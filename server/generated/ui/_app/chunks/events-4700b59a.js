var G=Object.defineProperty,P=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var v=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&v(e,r,t[r]);if(i)for(var r of i(t))w.call(t,r)&&v(e,r,t[r]);return e},y=(e,t)=>P(e,h(t));var k=(e,t)=>{var r={};for(var s in e)d.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&i)for(var s of i(e))t.indexOf(s)<0&&w.call(e,s)&&(r[s]=e[s]);return r};import{d as o,r as _,w as f}from"./index-e43b6509.js";import{p as c}from"./stores-9a131089.js";import{a as S}from"./events-service-785faf3c.js";import{a as I,b as l}from"./event-view-33ea0974.js";import{j as m}from"./route-for-789b7fae.js";import{w as j,d as q}from"./with-loading-22689bcc.js";import{g as H}from"./index-8821dfb5.js";import{a3 as O}from"./index-ebdc94c9.js";const R={events:[],eventGroups:[]},x=o([c],([e])=>m(e.params.namespace)),C=o([c],([e])=>e.params.workflow?m(e.params.workflow):""),F=o([c],([e])=>e.params.run?m(e.params.run):""),L=o([c],([e])=>e.stuff.settings),b={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},E=f(b),Z=()=>{E.set(b)},N=(e,t)=>{for(const n of["namespace","workflowId","runId"])if(!e[n])return!1;let r=!0;const s=O(t);for(const n of Object.keys(s))if(s[n]!==e[n]){r=!1;break}return r?!1:(t.set(e),!0)},T=o([x,C,F,I],([e,t,r,s])=>({namespace:e,workflowId:t,runId:r,sort:s})),U=o([T,L],([e,t])=>y(g({},e),{settings:t})),W=e=>U.subscribe(async t=>{const n=t,{settings:r}=n,s=k(n,["settings"]);N(s,E)&&j(A,z,async()=>{var u;const a=await S(t);(u=a==null?void 0:a.events)!=null&&u.length?e(a):setTimeout(()=>{e(a)},q)})}),p=_(R,W),$=o([p,l],([e,t])=>{const{events:r}=e;return t?r.filter(s=>s.category===t):r}),ee=o([p,l],([e,t])=>{const{eventGroups:r}=e;return t?r.filter(s=>s.category===t):r}),te=o([p,I,l],([e,t,r])=>{const{events:s}=e,n=t==="descending"?s.slice().reverse():s,a=H(n);return r?a.filter(u=>u.category===r):a}),z=f(!0),A=f(!0);export{te as a,ee as b,Z as c,$ as e,z as u};
