var E=Object.defineProperty,G=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var d=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&d(e,r,t[r]);if(i)for(var r of i(t))g.call(t,r)&&d(e,r,t[r]);return e},k=(e,t)=>G(e,_(t));var I=(e,t)=>{var r={};for(var s in e)w.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&i)for(var s of i(e))t.indexOf(s)<0&&g.call(e,s)&&(r[s]=e[s]);return r};import{d as a,r as S,w as c}from"./index-f99f80f5.js";import{p as f}from"./stores-5114c64c.js";import{a as q}from"./events-service-32a638ea.js";import{a as v,b as l}from"./event-view-a3a18a2d.js";import{m as p}from"./route-for-06f1921b.js";import{w as H,d as O}from"./with-loading-22689bcc.js";import{g as R}from"./index-d27505fa.js";import{r as b}from"./workflow-run-607a28a9.js";import{X as j}from"./index-68c8bf39.js";const x={events:[],eventGroups:[]},C=a([f],([e])=>e.params.namespace?p(e.params.namespace):""),F=a([f],([e])=>e.params.workflow?p(e.params.workflow):""),L=a([f],([e])=>e.params.run?p(e.params.run):""),N=a([f],([e])=>e.stuff.settings),P={namespace:null,workflowId:null,runId:null,rawPayloads:null,sort:null},h=c(P),te=()=>{h.set(P)},T=(e,t)=>{for(const n of["namespace","workflowId","runId"])if(!e[n])return!1;let r=!0;const s=j(t);for(const n of Object.keys(s))if(s[n]!==e[n]){r=!1;break}return r?!1:(t.set(e),!0)},U=a([C,F,L,v],([e,t,r,s])=>({namespace:e,workflowId:t,runId:r,sort:s})),W=a([U,N,b],([e,t,r])=>k(y({},e),{settings:t,refresh:b,$refresh:r})),X=e=>W.subscribe(async t=>{const n=t,{settings:r}=n,s=I(n,["settings"]);T(s,h)&&H(B,A,async()=>{var u;const o=await q(t);(u=o==null?void 0:o.events)!=null&&u.length?e(o):setTimeout(()=>{e(o)},O)})}),m=S(x,X),z=c(null),re=a([m,l,z],([e,t,r])=>{if(r)return r;const{events:s}=e;return t?s.filter(n=>n.category===t):s}),se=a([m,l],([e,t])=>{const{eventGroups:r}=e;return t?r.filter(s=>s.category===t):r}),ne=a([m,v,l],([e,t,r])=>{const{events:s}=e,n=t==="descending"?s.slice().reverse():s,o=R(n);return r?o.filter(u=>u.category===r):o});a([m,v,l],([e,t,r])=>{const{events:s}=e,n=t==="descending"?s.slice().reverse():s;return r?n.filter(o=>o.category===r):n});const A=c(!0),B=c(!0);export{ne as a,re as b,te as c,se as d,m as e,z as t,A as u};
