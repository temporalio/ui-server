var w=Object.defineProperty;var y=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var v=(t,s,e)=>s in t?w(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,g=(t,s)=>{for(var e in s||(s={}))m.call(s,e)&&v(t,e,s[e]);if(y)for(var e of y(s))A.call(s,e)&&v(t,e,s[e]);return t};var k=(t,s)=>{var e={};for(var r in t)m.call(t,r)&&s.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&y)for(var r of y(t))s.indexOf(r)<0&&A.call(t,r)&&(e[r]=t[r]);return e};import{h as F,i as h,r as P,a as b}from"./route-for-api-6959591d.js";import{t as j}from"./index-9470e975.js";const E=(t={},s={})=>{const e=g({},t);for(const r of Object.keys(s)){const n=e[r];Array.isArray(n)?e[r]=e[r].concat(s[r]):typeof n=="object"&&!Array.isArray(n)?e[r]=E(e[r],s[r]):e[r]=s[r]}return e},l=async(t,{onStart:s,onUpdate:e,onComplete:r,onError:n=F,token:p,previousProps:o}={})=>{!o&&h(s)&&s();try{const a=await t(p),{nextPageToken:u}=a,i=k(a,["nextPageToken"]),f=E(o,i);return h(e)&&e(f,i),u?l(t,{onStart:s,onUpdate:e,onComplete:r,token:u,previousProps:f}):(h(r)&&r(f),f)}catch(c){n(c)}},x=async({namespace:t,workflowId:s,runId:e,reverse:r,onStart:n,onUpdate:p,onComplete:o},a=fetch)=>{const c=r?"events.reverse":"events";return(await l(async i=>P(b(c,{namespace:t,workflowId:s,runId:e}),{token:i,request:a}),{onStart:n,onUpdate:p,onComplete:o})).history.events},O=async(t,s,e=fetch)=>x(t,e).then(r=>j({response:r,namespace:t.namespace,settings:s}));export{O as a,x as f};
