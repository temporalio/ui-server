var p=Object.defineProperty,d=Object.defineProperties;var f=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var u=(r,t,e)=>t in r?p(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,s=(r,t)=>{for(var e in t||(t={}))m.call(t,e)&&u(r,e,t[e]);if(c)for(var e of c(t))q.call(t,e)&&u(r,e,t[e]);return r},i=(r,t)=>d(r,f(t));import{r as I,i as O}from"./request-from-api-fc543812.js";import{r as _}from"./route-for-api-a5ba59e5.js";const g=r=>{const t=r.indexOf("["),e=r.indexOf("]");return r.slice(t+1,e).split(" ").filter(a=>a!=="__stack_trace")},h=async(r,t)=>(t=await t,{namespace:r,executionId:t.id,runId:t.runId});async function o({workflow:r,namespace:t,queryType:e},a=fetch,n){r=await r;const y=await h(t,r);return await I(_("query",y),{options:{method:"POST",body:JSON.stringify({execution:{workflowId:r.id,runId:r.runId},query:{queryType:e}})},request:a,onError:n})}async function S(r,t=fetch){return new Promise(e=>{o(i(s({},r),{queryType:"@@temporal-internal__list"}),t,({body:a})=>{O(a)&&e(g(a.message))})})}async function l(r,t=fetch){return o(r,t).then(e=>{const{queryResult:a}=e!=null?e:{queryResult:{payloads:[]}},n=window.atob(a.payloads[0].data);return JSON.parse(n)})}async function b(r,t=fetch){return l(i(s({},r),{queryType:"__stack_trace"}),t)}export{S as a,l as b,b as g};
