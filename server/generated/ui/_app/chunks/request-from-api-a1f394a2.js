var P=Object.defineProperty,k=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var l=(t,e,r)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,a=(t,e)=>{for(var r in e||(e={}))I.call(e,r)&&l(t,r,e[r]);if(u)for(var r of u(e))j.call(e,r)&&l(t,r,e[r]);return t},d=(t,e)=>k(t,x(e));import{C as E}from"./vendor-b03dee8a.js";const o=E([],()=>{const t=setInterval(()=>{requestIdleCallback(()=>{const e=Date.now();o.update(r=>r.filter(s=>s.expiration<e))})},5e3);return()=>{clearInterval(t)}}),R=(t,e,r=30)=>{const s=Date.now();return{id:String(s+Math.random()),type:t,message:e,expiration:s+r*1e3}},T=(t,e,r=30)=>{o.update(s=>[...s,R(t,e,r)])},U=t=>{o.update(e=>e.filter(r=>r.id!==t))},y=()=>{o.set([])},m={subscribe:o.subscribe,add:T,dismiss:U,clear:y},L=t=>{console.error(t),typeof t=="string"&&m.add("error",t),t instanceof Error&&m.add("error",t.message)},A=t=>{const e=a({},t);return Object.keys(e).forEach(r=>e[r]===void 0&&delete e[r]),e},f=t=>t instanceof URLSearchParams?t:new URLSearchParams(A(t)),h=t=>t.toString().split("&").map(e=>e.split("=")).reduce((e,r)=>{const[s,c]=r;return d(a({},e),{[s]:c})},{}),C=(t,e)=>f(a(a({},h(t)),h(e))),D=(t,e)=>{let r=t;const s=f(e).toString();return s&&(r+="?"+s),r},O="http://localhost:8080/api/v1",_=async(t,e={},r=10)=>{const{params:s={},options:c,request:p=fetch,token:i,shouldRetry:w=!0,retryInterval:b=5e3}=e;t.startsWith("/")||(t="/"+t);const g=i?{next_page_token:i}:{},v=D(O+t,a(a({},s),g));try{const n=await p(v,c);if(!n.ok)throw new Error(`${n.status}: ${n.statusText}`);return await n.json()}catch(n){if(L(n),w&&r>0)return new Promise(S=>{setTimeout(()=>{S(_(t,e,r-1))},b)})}};export{L as h,C as m,m as n,_ as r,f as t};
