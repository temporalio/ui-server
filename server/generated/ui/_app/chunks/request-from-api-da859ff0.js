var y=Object.defineProperty;var f=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var u=(e,t,r)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&u(e,r,t[r]);if(f)for(var r of f(t))S.call(t,r)&&u(e,r,t[r]);return e};import{n as l}from"./notifications-406f245b.js";const U=e=>{console.error(e),typeof e=="string"&&l.add("error",e),e instanceof Error&&l.add("error",e.message)},g=(e,t)=>{const r=t instanceof URLSearchParams;return t&&!r&&(t=new URLSearchParams(t)),t?`${e}?${t}`:e},L="",x=e=>e.split("/").map(t=>encodeURIComponent(t)).join("/"),E=async(e,t={},r=10)=>{const{params:c={},request:s=fetch,token:n,shouldRetry:h=!0,retryInterval:m=5e3}=t;let{options:i}=t;e.startsWith("/")||(e="/"+e);const w=n?{next_page_token:n}:{},d=new URLSearchParams(a(a({},c),w)),k=g(L+"/api/v1"+x(e),d);try{i=T(i);const o=await s(k,i);if(!o.ok)throw new Error(`${o.status}: ${o.statusText}`);return await o.json()}catch(o){if(U(o),h&&r>0)return new Promise(R=>{setTimeout(()=>{R(E(e,t,r-1))},m)})}},T=e=>{const t=a({credentials:"include"},e);return t.headers=$(e==null?void 0:e.headers),t},$=e=>{e||(e=new Headers);const t="_csrf=",r="X-CSRF-TOKEN";try{let s=document.cookie.split(";").find(n=>n.includes(t));s&&!e[r]&&(s=s.trim().slice(t.length),e[r]=s)}catch(c){console.error(c)}return e};export{U as h,E as r};
