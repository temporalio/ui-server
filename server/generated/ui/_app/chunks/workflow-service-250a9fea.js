var q=Object.defineProperty,K=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(t,o,n)=>o in t?q(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,I=(t,o)=>{for(var n in o||(o={}))Q.call(o,n)&&y(t,n,o[n]);if(d)for(var n of d(o))R.call(o,n)&&y(t,n,o[n]);return t},T=(t,o)=>K(t,P(o));import{s as D}from"./simplify-attributes-64d6cf1a.js";import{r as g,a as h}from"./route-for-api-605baeb9.js";import{b as N,e as j,h as E,j as F}from"./to-duration-271d3946.js";const B=(t=[])=>t.map(o=>{const n=D(o,!0),e=o.activityId;return T(I({},n),{id:e})}),A=t=>{var w,l,k,m,x;const o=t.workflowExecutionInfo.type.name,n=t.workflowExecutionInfo.execution.workflowId,e=t.workflowExecutionInfo.execution.runId,i=String(t.workflowExecutionInfo.startTime),f=String(t.workflowExecutionInfo.closeTime),c=t.workflowExecutionInfo.status,u=t.workflowExecutionInfo.status==="Running",s=t.workflowExecutionInfo.historyLength,a=`/workflows/${n}/${e}`,r=(l=(w=t==null?void 0:t.executionConfig)==null?void 0:w.taskQueue)==null?void 0:l.name,W=(k=t==null?void 0:t.workflowExecutionInfo)==null?void 0:k.parentNamespaceId,S=(m=t==null?void 0:t.workflowExecutionInfo)==null?void 0:m.parentExecution,$=t.workflowExecutionInfo.stateTransitionCount,C=(x=t.executionConfig)==null?void 0:x.defaultWorkflowTaskTimeout,b=B(t.pendingActivities);return{name:o,id:n,runId:e,startTime:i,endTime:f,status:c,historyEvents:s,url:a,taskQueue:r,pendingActivities:b,parentNamespaceId:W,parent:S,stateTransitionCount:$,isRunning:u,defaultWorkflowTaskTimeout:C}},L=t=>(t.executions||[]).map(o=>A({workflowExecutionInfo:o})),O={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus",closeTime:"CloseTime"},U=["workflowId","workflowType","timeRange","executionStatus","closeTime"],V=t=>!(t===null||t===void 0||t===""||typeof t=="string"&&t==="undefined"),p=t=>{if(typeof t!="string")return!1;for(const o of U)if(o===t)return!0;return!1},z=(t,o,n)=>{const e=O[t];return o==="All"?"":N(o)||j(o)?n?`${e} > "${E(o)}"`:`${e} BETWEEN "${E(o)}" AND "${F()}"`:`${e}="${o}"`},G=(t,o)=>Object.entries(t).map(([n,e])=>{if(p(n)&&V(e))return z(n,e,o)}).filter(Boolean),H=(t,o=!1)=>G(t,o).join(" and "),J=async(t,o,n=fetch,e=!1)=>{var r;const i=decodeURIComponent(o.query||H(o,e)),f=e?"workflows.archived":"workflows";let c,u;const{executions:s,nextPageToken:a}=(r=await g(h(f,{namespace:t}),{params:{query:i},onError:c,request:n}))!=null?r:{executions:[],nextPageToken:""};return{workflows:L({executions:s}),nextPageToken:String(a),error:u}},_=async(t,o,n=fetch)=>J(t,o,n,!0);async function v(t,o=fetch){return g(h("workflow",t),{request:o}).then(A)}export{J as a,_ as b,v as f,H as t};
