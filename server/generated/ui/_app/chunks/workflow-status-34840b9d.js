var C=Object.defineProperty,q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(t,e,n)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||(e={}))b.call(e,n)&&w(t,n,e[n]);if(m)for(var n of m(e))D.call(e,n)&&w(t,n,e[n]);return t},h=(t,e)=>q(t,W(e));import{r as T,a as _}from"./route-for-api-2057cc76.js";import{am as E,an as K,ao as F,S as N,i as P,s as $,e as j,t as O,c as Q,a as R,h as L,d as k,b as x,a6 as p,g as v,L as B,j as V,T as g}from"./vendor-74b93630.js";const z=(t=[])=>t.map(e=>{const n=`pending-${e.activityId}`;return h(y({},e),{id:n})}),I=t=>{var f,d;const e=t.workflowExecutionInfo.type.name,n=t.workflowExecutionInfo.execution.workflowId,s=t.workflowExecutionInfo.execution.runId,r=String(t.workflowExecutionInfo.startTime),o=String(t.workflowExecutionInfo.closeTime),i=t.workflowExecutionInfo.status,a=t.workflowExecutionInfo.historyLength,u=`/workflows/${n}/${s}`,l=(d=(f=t==null?void 0:t.executionConfig)==null?void 0:f.taskQueue)==null?void 0:d.name,c=z(t.pendingActivities);return{name:e,id:n,runId:s,startTime:r,endTime:o,status:i,historyEvents:a,url:u,taskQueue:l,pendingActivities:c}},G=t=>(t.executions||[]).map(e=>I({workflowExecutionInfo:e})),S=["years","months","weeks","days","hours","minutes","seconds"],dt=["10 minutes","60 minutes","3 hours","24 hours","3 days","7 days","30 days","90 days"],A=new RegExp(`(\\d+)\\s(${S.join("|")})`),H=t=>{if(typeof t!="string")return!1;for(const e of S)if(e===t)return!0;return!1},J=t=>{if(t===null||typeof t!="object")return!1;for(const e of Object.keys(t))if(!H(e))return!1;return!0},M=t=>{if(t===null||typeof t!="string")return!1;const e=t.match(A);if(!e)return!1;const[,n,s]=e;return!!n&&!!s},U=t=>{const[,e,n]=t.match(A);return{[n]:parseInt(e,10)}},X=t=>{const e=typeof t=="string"?U(t):t;return E(K(new Date,e))},Y=()=>E(F(new Date,{hours:24})),Z={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus",closeTime:"CloseTime"},tt=["workflowId","workflowType","timeRange","executionStatus","closeTime"],et=t=>!(t===null||t===void 0||typeof t=="string"&&t==="undefined"),nt=t=>{if(typeof t!="string")return!1;for(const e of tt)if(e===t)return!0;return!1},ot=(t,e)=>{const n=Z[t];return J(e)||M(e)?`${n} BETWEEN "${X(e)}" AND "${Y()}"`:`${n}="${e}"`},rt=t=>Object.entries(t).map(([e,n])=>{if(nt(e)&&et(n))return ot(e,n)}).filter(Boolean),st=t=>rt(t).join(" and "),it=async(t,e,n=fetch,s=!1)=>{var c;const r=e.query||st(e),o=s?"workflows.archived":"workflows";let i,a;e.query&&(i=f=>{a=f.body.message});const{executions:u,nextPageToken:l}=(c=await T(_(o,{namespace:t}),{params:{query:r},onError:i,request:n}))!=null?c:{executions:[],nextPageToken:""};return{workflows:G({executions:u}),nextPageToken:String(l),error:a}},mt=async(t,e,n=fetch)=>it(t,e,n,!0);async function wt(t,e=fetch){return T(_("workflow",t),{request:e}).then(I)}function at(t){let e,n,s;return{c(){e=j("span"),n=O(t[0]),this.h()},l(r){e=Q(r,"SPAN",{class:!0});var o=R(e);n=L(o,t[0]),o.forEach(k),this.h()},h(){x(e,"class",s=p(`${t[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y")},m(r,o){v(r,e,o),B(e,n)},p(r,[o]){o&1&&V(n,r[0]),o&2&&s!==(s=p(`${r[1]} rounded-md text-center px-2 text-sm`)+" svelte-xqpq4y")&&x(e,"class",s)},i:g,o:g,d(r){r&&k(e)}}}function ut(t,e,n){let s,r,{status:o}=e;const i={Running:"Running",TimedOut:"Timed Out",Completed:"Completed",Failed:"Failed",ContinuedAsNew:"Continued as New",Canceled:"Canceled",Terminated:"Terminated"},a={Running:"blue",TimedOut:"red",Completed:"green",Failed:"red",ContinuedAsNew:"indigo",Canceled:"yellow",Terminated:"pink"};return t.$$set=u=>{"status"in u&&n(2,o=u.status)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=a[o]),t.$$.dirty&4&&n(0,r=i[o])},[r,s,o]}class yt extends N{constructor(e){super();P(this,e,ut,at,$,{status:2})}}export{yt as W,wt as a,mt as b,dt as d,it as f};
