import{r as l}from"./request-from-api-fc543812.js";import{r as d}from"./route-for-api-a5ba59e5.js";import{ao as T,ap as I,S,i as E,s as C,e as b,t as K,c as W,a as j,g as q,d as m,b as w,a5 as y,f as A,K as F,h as D,R as k}from"./vendor-ea4e1b17.js";const p=t=>{var f,c;const e=t.workflowExecutionInfo.type.name,n=t.workflowExecutionInfo.execution.workflowId,s=t.workflowExecutionInfo.execution.runId,r=String(t.workflowExecutionInfo.startTime),o=String(t.workflowExecutionInfo.closeTime),i=t.workflowExecutionInfo.status,u=t.workflowExecutionInfo.historyLength,a=`/workflows/${n}/${s}`,g=(c=(f=t==null?void 0:t.executionConfig)==null?void 0:f.taskQueue)==null?void 0:c.name,_=t.pendingActivities||[];return{name:e,id:n,runId:s,startTime:r,endTime:o,status:i,historyEvents:u,url:a,taskQueue:g,pendingActivities:_}},O=t=>(t.executions||[]).map(e=>p({workflowExecutionInfo:e})),x=["years","months","weeks","days","hours","minutes","seconds"],Z=["10 minutes","60 minutes","3 hours","24 hours","3 days","7 days","30 days","90 days"],h=new RegExp(`(\\d+)\\s(${x.join("|")})`),P=t=>{if(typeof t!="string")return!1;for(const e of x)if(e===t)return!0;return!1},N=t=>{if(t===null||typeof t!="object")return!1;for(const e of Object.keys(t))if(!P(e))return!1;return!0},Q=t=>{if(t===null||typeof t!="string")return!1;const e=t.match(h);if(!e)return!1;const[,n,s]=e;return!!n&&!!s},R=t=>{const[,e,n]=t.match(h);return{[n]:parseInt(e,10)}},$=t=>{const e=typeof t=="string"?R(t):t;return T(I(new Date,e))},L={workflowId:"WorkflowId",workflowType:"WorkflowType",timeRange:"StartTime",executionStatus:"ExecutionStatus"},B=["workflowId","workflowType","timeRange","executionStatus"],V=t=>!(t===null||t===void 0||typeof t=="string"&&t==="undefined"),v=t=>{if(typeof t!="string")return!1;for(const e of B)if(e===t)return!0;return!1},z=(t,e)=>{const n=L[t];return N(e)||Q(e)?`${n} > "${$(e)}"`:`${n}="${e}"`},G=t=>Object.entries(t).map(([e,n])=>{if(v(e)&&V(n))return z(e,n)}).filter(Boolean),H=t=>G(t).join(" and "),tt=async(t,e,n=fetch)=>{var i;const s=H(e),{executions:r,nextPageToken:o}=(i=await l(d("workflows",{namespace:t}),{params:{query:s},request:n}))!=null?i:{executions:[],nextPageToken:""};return{workflows:O({executions:r}),nextPageToken:String(o)}};async function et(t,e=fetch){return l(d("workflow",t),{request:e}).then(p)}function J(t){let e,n,s;return{c(){e=b("span"),n=K(t[0]),this.h()},l(r){e=W(r,"SPAN",{class:!0});var o=j(e);n=q(o,t[0]),o.forEach(m),this.h()},h(){w(e,"class",s=""+(y(`${t[1]} rounded-md text-center px-2 text-sm`)+" svelte-1oiq6"))},m(r,o){A(r,e,o),F(e,n)},p(r,[o]){o&1&&D(n,r[0]),o&2&&s!==(s=""+(y(`${r[1]} rounded-md text-center px-2 text-sm`)+" svelte-1oiq6"))&&w(e,"class",s)},i:k,o:k,d(r){r&&m(e)}}}function M(t,e,n){let s,r,{status:o}=e;const i={Running:"Running",TimedOut:"Timed Out",Completed:"Completed",Failed:"Failed",ContinuedAsNew:"Continued as New",Canceled:"Canceled",Terminated:"Terminated"},u={Running:"blue",TimedOut:"red",Completed:"green",Failed:"red",ContinuedAsNew:"indigo",Canceled:"yellow",Terminated:"pink"};return t.$$set=a=>{"status"in a&&n(2,o=a.status)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=u[o]),t.$$.dirty&4&&n(0,r=i[o])},[r,s,o]}class nt extends S{constructor(e){super();E(this,e,M,J,C,{status:2})}}export{nt as W,et as a,Z as d,tt as f};
