import{h as F}from"./has-ae9b6b71.js";const O=["workflowExecutionStartedEventAttributes","workflowExecutionCompletedEventAttributes","workflowExecutionFailedEventAttributes","workflowExecutionTimedOutEventAttributes","workflowTaskStartedEventAttributes","workflowTaskScheduledEventAttributes","workflowTaskCompletedEventAttributes","workflowTaskTimedOutEventAttributes","workflowTaskFailedEventAttributes","activityTaskScheduledEventAttributes","activityTaskCompletedEventAttributes","activityTaskStartedEventAttributes","activityTaskFailedEventAttributes","activityTaskTimedOutEventAttributes","timerStartedEventAttributes","timerFiredEventAttributes","activityTaskCancelRequestedEventAttributes","activityTaskCanceledEventAttributes","timerCanceledEventAttributes","markerRecordedEventAttributes","workflowExecutionSignaledEventAttributes","workflowExecutionTerminatedEventAttributes","workflowExecutionCancelRequestedEventAttributes","workflowExecutionCanceledEventAttributes","requestCancelExternalWorkflowExecutionInitiatedEventAttributes","requestCancelExternalWorkflowExecutionFailedEventAttributes","externalWorkflowExecutionCancelRequestedEventAttributes","workflowExecutionContinuedAsNewEventAttributes","startChildWorkflowExecutionInitiatedEventAttributes","startChildWorkflowExecutionFailedEventAttributes","childWorkflowExecutionStartedEventAttributes","childWorkflowExecutionCompletedEventAttributes","childWorkflowExecutionFailedEventAttributes","childWorkflowExecutionCanceledEventAttributes","childWorkflowExecutionTimedOutEventAttributes","childWorkflowExecutionTerminatedEventAttributes","signalExternalWorkflowExecutionInitiatedEventAttributes","signalExternalWorkflowExecutionFailedEventAttributes","externalWorkflowExecutionSignaledEventAttributes","upsertWorkflowSearchAttributesEventAttributes"],R=t=>{for(const i of O)if(i in t)return i},q=(t,i)=>t[i],tt=t=>{const i=R(t),r=q(t,i);return{key:i,attributes:r}},e=t=>i=>Boolean(i[t]),et=e("workflowExecutionCompletedEventAttributes"),G=e("workflowExecutionFailedEventAttributes"),N=e("workflowExecutionTimedOutEventAttributes"),$=e("workflowTaskTimedOutEventAttributes"),L=e("workflowTaskFailedEventAttributes"),k=e("activityTaskScheduledEventAttributes"),B=e("activityTaskStartedEventAttributes"),K=e("activityTaskCompletedEventAttributes"),v=e("activityTaskFailedEventAttributes"),A=e("activityTaskTimedOutEventAttributes"),b=e("timerStartedEventAttributes"),M=e("timerFiredEventAttributes"),j=e("activityTaskCancelRequestedEventAttributes"),w=e("activityTaskCanceledEventAttributes"),m=e("timerCanceledEventAttributes"),T=e("markerRecordedEventAttributes"),x=e("workflowExecutionSignaledEventAttributes"),_=e("workflowExecutionTerminatedEventAttributes"),z=e("workflowExecutionCanceledEventAttributes"),C=e("startChildWorkflowExecutionInitiatedEventAttributes"),D=e("childWorkflowExecutionStartedEventAttributes"),H=e("childWorkflowExecutionCompletedEventAttributes"),J=e("childWorkflowExecutionFailedEventAttributes"),P=e("childWorkflowExecutionCanceledEventAttributes"),Q=e("childWorkflowExecutionTimedOutEventAttributes"),h=e("childWorkflowExecutionTerminatedEventAttributes"),W=e("signalExternalWorkflowExecutionInitiatedEventAttributes"),U=e("signalExternalWorkflowExecutionFailedEventAttributes"),S=t=>A(t)||v(t)||G(t)||N(t)||$(t)||L(t)||J(t)||Q(t)||U(t),it=t=>E(t)?t.isFailureOrTimedOut:S(t),g=t=>w(t)||m(t)||z(t)||P(t),rt=t=>E(t)?t.isCanceled:g(t),y=t=>_(t)||h(t),nt=t=>E(t)?t.isTerminated:y(t),I=t=>B(t)?String(t.activityTaskStartedEventAttributes.scheduledEventId):w(t)?String(t.activityTaskCanceledEventAttributes.scheduledEventId):j(t)?String(t.activityTaskCancelRequestedEventAttributes.scheduledEventId):v(t)?String(t.activityTaskFailedEventAttributes.scheduledEventId):A(t)?String(t.activityTaskTimedOutEventAttributes.scheduledEventId):K(t)?String(t.activityTaskCompletedEventAttributes.scheduledEventId):D(t)?String(t.childWorkflowExecutionStartedEventAttributes.initiatedEventId):h(t)?String(t.childWorkflowExecutionTerminatedEventAttributes.initiatedEventId):H(t)?String(t.childWorkflowExecutionCompletedEventAttributes.initiatedEventId):M(t)?String(t.timerFiredEventAttributes.startedEventId):m(t)?String(t.timerCanceledEventAttributes.startedEventId):t.id,V=t=>{var i,r,o,n,c,l,a,d,s;if(!!t){if(k(t))return(r=(i=t.activityTaskScheduledEventAttributes)==null?void 0:i.activityType)==null?void 0:r.name;if(b(t))return`Timer ${(o=t.timerStartedEventAttributes)==null?void 0:o.timerId} (${(n=t.timerStartedEventAttributes)==null?void 0:n.startToFireTimeout})`;if(W(t))return`Signal: ${(c=t.signalExternalWorkflowExecutionInitiatedEventAttributes)==null?void 0:c.signalName}`;if(x(t))return`Signal received: ${(l=t.workflowExecutionSignaledEventAttributes)==null?void 0:l.signalName}`;if(T(t))return`Marker: ${(a=t.markerRecordedEventAttributes)==null?void 0:a.markerName}`;if(C(t))return`Child Workflow: ${(s=(d=t.startChildWorkflowExecutionInitiatedEventAttributes)==null?void 0:d.workflowType)==null?void 0:s.name}`}},f=({events:t})=>{let i=0,r;for(const o of t.values()){const n=Number(o.id);n>=i&&(i=n,r=o)}return r},u=t=>{const i=I(t),r=V(t),{timestamp:o,category:n,classification:c}=t,l=t,a=new Map,d=new Set;return a.set(t.id,t),d.add(t.id),{id:i,name:r,events:a,eventIds:d,initialEvent:l,timestamp:o,category:n,classification:c,get eventTime(){var s;return(s=this.lastEvent)==null?void 0:s.eventTime},get attributes(){var s;return(s=f(this))==null?void 0:s.attributes},get eventList(){return Array.from(this.events,([s,p])=>p)},get lastEvent(){return f(this)},get isFailureOrTimedOut(){return Boolean(this.eventList.find(S))},get isCanceled(){return Boolean(this.eventList.find(g))},get isTerminated(){return Boolean(this.eventList.find(y))}}},X=t=>{if(k(t)||C(t)||b(t)||W(t)||x(t)||T(t))return u(t)},Y=(t,i)=>{!t||(t.events.set(i.id,i),t.eventIds.add(i.id),t.timestamp=i.timestamp)},ot=t=>{const i={};for(const r of t){const o=I(r),n=X(r);n?i[n.id]=n:Y(i[o],r)}return Object.values(i)},E=t=>t==null?!1:F(t,"events");export{E as a,rt as b,nt as c,it as e,tt as f,ot as g,et as i};
