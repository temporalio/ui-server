import{S as ve,i as Te,s as _e,w as j,x as z,y as K,f as E,t as I,z as M,F as Je,G as Xe,H as Ye,I as Ze,k as y,q as B,a as C,l as g,m as F,r as L,h as c,c as q,n as k,b as T,K as b,B as te,e as Ue,g as ce,d as me,J as Ge,R as N,U as le,am as se,D as Fe,Q as Ae,E as $e,u as Z,O as Ee}from"./index-eadb3ae7.js";import{T as xe,a as et}from"./table-header-row-a0607f47.js";import{p as tt}from"./stores-46e0fa40.js";import{f as Y}from"./format-date-c30acbf3.js";import{q as lt,s as st,u as rt,v as Re}from"./format-time-e9d12321.js";import{f as at}from"./route-for-9e2a964e.js";import{u as ot}from"./pagination-f404d462.js";import{t as Oe}from"./list-workflow-query-3eb8d617.js";import{c as nt,d as Se,e as ft,f as ut,g as it}from"./is-199b1f9e.js";import{W as ct}from"./workflow-status-7f998198.js";import{I as De}from"./icon-4da365da.js";import{c as mt}from"./copy-to-clipboard-04f4896d.js";import{T as _t}from"./table-row-a9c9ac78.js";import{B as ht}from"./button-ff549de6.js";function dt(r){let e;const s=r[1].default,t=Je(s,r,r[2],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&4)&&Xe(t,s,l,l[2],e?Ze(s,l[2],o,null):Ye(l[2]),null)},i(l){e||(E(t,l),e=!0)},o(l){I(t,l),e=!1},d(l){t&&t.d(l)}}}function pt(r){let e,s,t,l,o,a,n,f,i,h,W,p,w,m,_,D,U;return{c(){e=y("th"),s=B("Status"),t=C(),l=y("th"),o=B("Workflow ID"),a=C(),n=y("th"),f=B("Type"),i=C(),h=y("th"),W=B("Start"),p=C(),w=y("th"),m=B("End"),_=C(),D=y("th"),U=B("Summary"),this.h()},l(d){e=g(d,"TH",{class:!0});var S=F(e);s=L(S,"Status"),S.forEach(c),t=q(d),l=g(d,"TH",{class:!0});var P=F(l);o=L(P,"Workflow ID"),P.forEach(c),a=q(d),n=g(d,"TH",{class:!0});var V=F(n);f=L(V,"Type"),V.forEach(c),i=q(d),h=g(d,"TH",{class:!0});var R=F(h);W=L(R,"Start"),R.forEach(c),p=q(d),w=g(d,"TH",{class:!0});var H=F(w);m=L(H,"End"),H.forEach(c),_=q(d),D=g(d,"TH",{class:!0,colspan:!0});var G=F(D);U=L(G,"Summary"),G.forEach(c),this.h()},h(){k(e,"class","hidden w-32 md:table-cell"),k(l,"class","hidden md:table-cell md:w-auto"),k(n,"class","hidden md:table-cell xl:w-60"),k(h,"class","hidden xl:table-cell xl:w-60"),k(w,"class","hidden xl:table-cell xl:w-60"),k(D,"class","table-cell md:hidden"),k(D,"colspan","3")},m(d,S){T(d,e,S),b(e,s),T(d,t,S),T(d,l,S),b(l,o),T(d,a,S),T(d,n,S),b(n,f),T(d,i,S),T(d,h,S),b(h,W),T(d,p,S),T(d,w,S),b(w,m),T(d,_,S),T(d,D,S),b(D,U)},p:te,d(d){d&&c(e),d&&c(t),d&&c(l),d&&c(a),d&&c(n),d&&c(i),d&&c(h),d&&c(p),d&&c(w),d&&c(_),d&&c(D)}}}function wt(r){let e,s;return e=new et({props:{slot:"headers",$$slots:{default:[pt]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){K(e,t,l),s=!0},p(t,l){const o={};l&4&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){M(e,t)}}}function bt(r){let e,s;return e=new xe({props:{class:"w-full md:table-fixed",updating:r[0],$$slots:{headers:[wt],default:[dt]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){K(e,t,l),s=!0},p(t,[l]){const o={};l&1&&(o.updating=t[0]),l&4&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){M(e,t)}}}function kt(r,e,s){let{$$slots:t={},$$scope:l}=e,{updating:o=!1}=e;return r.$$set=a=>{"updating"in a&&s(0,o=a.updating),"$$scope"in a&&s(2,l=a.$$scope)},[o,t,l]}class Yt extends ve{constructor(e){super(),Te(this,e,kt,bt,_e,{updating:0})}}const vt=r=>{const e=[],s=()=>{t&&(e.push(t),t="")};let t="",l=0;for(;l<r.length;){const o=r[l];if(nt(o)){t+=o,s(),l++;continue}if(Se(o)){const a=`${r[l]}${r[l+1]}`,n=`${r[l]}${r[l+1]}${r[l+2]}`;if(Se(n)){s(),t+=n,l+=3;continue}else if(Se(a)){s(),t+=a,l+=2;continue}else{s(),t+=o,l++;continue}}if(ft(o)||ut(o)){s(),l++;continue}t+=o,l++}return s(),e},ye=r=>e=>e.toLowerCase()===r.toLowerCase(),ke=(r,e)=>r[e+2],Tt=r=>{if(r){for(const e of rt)if(r[e])return{[e]:r[e]}}},yt=ye("WorkflowType"),gt=ye("WorkflowId"),Et=ye("StartTime"),St=ye("ExecutionStatus"),Ft=r=>{const e=vt(r),s={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,l)=>{if(gt(t)&&(s.workflowId=ke(e,l)),yt(t)&&(s.workflowType=ke(e,l)),St(t)){const o=ke(e,l);it(o)&&(s.executionStatus=o)}if(Et(t)){const o=ke(e,l);try{const a=lt(o),n=Tt(a);s.timeRange=st(n)}catch(a){console.error("Error parsing StartTime from query",a)}}}),s};function Qe(r){let e,s,t,l,o,a,n=r[1]&&je(r),f=r[2]&&Ke(r);return{c(){e=y("div"),n&&n.c(),s=C(),f&&f.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var h=F(e);n&&n.l(h),s=q(h),f&&f.l(h),h.forEach(c),this.h()},h(){k(e,"class",t="copy-or-filter "+r[6]+" svelte-1f7279h")},m(i,h){T(i,e,h),n&&n.m(e,null),b(e,s),f&&f.m(e,null),l=!0,o||(a=[N(e,"click",le(se(te))),N(e,"keyup",le(se(te)))],o=!0)},p(i,h){i[1]?n?(n.p(i,h),h&2&&E(n,1)):(n=je(i),n.c(),E(n,1),n.m(e,s)):n&&(ce(),I(n,1,1,()=>{n=null}),me()),i[2]?f?(f.p(i,h),h&4&&E(f,1)):(f=Ke(i),f.c(),E(f,1),f.m(e,null)):f&&(ce(),I(f,1,1,()=>{f=null}),me()),(!l||h&64&&t!==(t="copy-or-filter "+i[6]+" svelte-1f7279h"))&&k(e,"class",t)},i(i){l||(E(n),E(f),l=!0)},o(i){I(n),I(f),l=!1},d(i){i&&c(e),n&&n.d(),f&&f.d(),o=!1,Fe(a)}}}function je(r){let e,s=r[5],t,l,o,a=ze();return{c(){e=y("button"),a.c(),this.h()},l(n){e=g(n,"BUTTON",{class:!0});var f=F(e);a.l(f),f.forEach(c),this.h()},h(){k(e,"class","copy-or-filter-button svelte-1f7279h"),Ae(e,"filtered",r[5])},m(n,f){T(n,e,f),a.m(e,null),t=!0,l||(o=N(e,"click",le(se(function(){$e(r[4])&&r[4].apply(this,arguments)}))),l=!0)},p(n,f){r=n,f&32&&_e(s,s=r[5])?(ce(),I(a,1,1,te),me(),a=ze(),a.c(),E(a,1),a.m(e,null)):a.p(r,f),(!t||f&32)&&Ae(e,"filtered",r[5])},i(n){t||(E(a),t=!0)},o(n){I(a),t=!1},d(n){n&&c(e),a.d(n),l=!1,o()}}}function ze(r){let e,s;return e=new De({props:{name:"filter"}}),{c(){j(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){K(e,t,l),s=!0},p:te,i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){M(e,t)}}}function Ke(r){let e,s,t,l,o;return s=new De({props:{name:r[7]?"checkmark":"copy",stroke:"#000"}}),{c(){e=y("button"),j(s.$$.fragment),this.h()},l(a){e=g(a,"BUTTON",{class:!0});var n=F(e);z(s.$$.fragment,n),n.forEach(c),this.h()},h(){k(e,"class","copy-or-filter-button svelte-1f7279h")},m(a,n){T(a,e,n),K(s,e,null),t=!0,l||(o=N(e,"click",le(se(r[10]))),l=!0)},p(a,n){const f={};n&128&&(f.name=a[7]?"checkmark":"copy"),s.$set(f)},i(a){t||(E(s.$$.fragment,a),t=!0)},o(a){I(s.$$.fragment,a),t=!1},d(a){a&&c(e),M(s),l=!1,o()}}}function Dt(r){let e,s,t=r[0]&&Qe(r);return{c(){t&&t.c(),e=Ue()},l(l){t&&t.l(l),e=Ue()},m(l,o){t&&t.m(l,o),T(l,e,o),s=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&E(t,1)):(t=Qe(l),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ce(),I(t,1,1,()=>{t=null}),me())},i(l){s||(E(t),s=!0)},o(l){I(t),s=!1},d(l){t&&t.d(l),l&&c(e)}}}function Wt(r,e,s){let t,{show:l=!1}=e,{filterable:o=!0}=e,{copyable:a=!0}=e,{content:n}=e,{onFilter:f=te}=e,{filtered:i=!1}=e,{class:h=""}=e;const{copy:W,copied:p}=mt(700);Ge(r,p,m=>s(7,t=m));const w=m=>W(m,n);return r.$$set=m=>{"show"in m&&s(0,l=m.show),"filterable"in m&&s(1,o=m.filterable),"copyable"in m&&s(2,a=m.copyable),"content"in m&&s(3,n=m.content),"onFilter"in m&&s(4,f=m.onFilter),"filtered"in m&&s(5,i=m.filtered),"class"in m&&s(6,h=m.class)},[l,o,a,n,f,i,h,t,W,p,w]}class Me extends ve{constructor(e){super(),Te(this,e,Wt,Dt,_e,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5,class:6})}}function It(r){var Ie,Pe,Ce;let e,s,t,l,o,a=r[0].id+"",n,f,i,h,W,p=Y(r[0].startTime,r[1])+"",w,m,_,D,U,d,S,P=r[0].name+"",V,R,H,G,J,re=Y(r[0].endTime,r[1])+"",he,de,$,ae,oe=Y(r[0].startTime,r[1])+"",pe,we,x,ne,fe=Y(r[0].endTime,r[1])+"",be,O,ge,We;return s=new ct({props:{status:r[0].status,delay:Re(r[0].startTime)}}),i=new Me({props:{show:r[2],content:r[0].id,filterable:!1}}),H=new Me({props:{show:r[2],content:r[0].name,onFilter:r[12],filtered:(Ce=(Pe=(Ie=r[4].url)==null?void 0:Ie.searchParams)==null?void 0:Pe.get("query"))==null?void 0:Ce.includes(r[0].name)}}),{c(){e=y("td"),j(s.$$.fragment),t=C(),l=y("td"),o=y("span"),n=B(a),f=C(),j(i.$$.fragment),h=C(),W=y("p"),w=B(p),m=C(),_=y("td"),D=y("h3"),U=B("Workflow Name:"),d=C(),S=y("span"),V=B(P),R=C(),j(H.$$.fragment),G=C(),J=y("p"),he=B(re),de=C(),$=y("td"),ae=y("p"),pe=B(oe),we=C(),x=y("td"),ne=y("p"),be=B(fe),this.h()},l(u){e=g(u,"TD",{});var v=F(e);z(s.$$.fragment,v),v.forEach(c),t=q(u),l=g(u,"TD",{class:!0});var Q=F(l);o=g(Q,"SPAN",{class:!0});var ee=F(o);n=L(ee,a),ee.forEach(c),f=q(Q),z(i.$$.fragment,Q),h=q(Q),W=g(Q,"P",{class:!0});var X=F(W);w=L(X,p),X.forEach(c),Q.forEach(c),m=q(u),_=g(u,"TD",{class:!0});var A=F(_);D=g(A,"H3",{class:!0});var ue=F(D);U=L(ue,"Workflow Name:"),ue.forEach(c),d=q(A),S=g(A,"SPAN",{class:!0});var ie=F(S);V=L(ie,P),ie.forEach(c),R=q(A),z(H.$$.fragment,A),G=q(A),J=g(A,"P",{class:!0});var qe=F(J);he=L(qe,re),qe.forEach(c),A.forEach(c),de=q(u),$=g(u,"TD",{class:!0});var He=F($);ae=g(He,"P",{});var Ne=F(ae);pe=L(Ne,oe),Ne.forEach(c),He.forEach(c),we=q(u),x=g(u,"TD",{class:!0});var Be=F(x);ne=g(Be,"P",{});var Le=F(ne);be=L(Le,fe),Le.forEach(c),Be.forEach(c),this.h()},h(){k(o,"class","table-link svelte-15hmyn9"),k(W,"class","inline-time-cell svelte-15hmyn9"),k(l,"class","relative break-words pr-4"),k(D,"class","md:hidden"),k(S,"class","table-link svelte-15hmyn9"),k(J,"class","inline-time-cell svelte-15hmyn9"),k(_,"class","relative truncate"),k($,"class","time-cell svelte-15hmyn9"),k(x,"class","time-cell svelte-15hmyn9")},m(u,v){T(u,e,v),K(s,e,null),T(u,t,v),T(u,l,v),b(l,o),b(o,n),b(l,f),K(i,l,null),b(l,h),b(l,W),b(W,w),T(u,m,v),T(u,_,v),b(_,D),b(D,U),b(_,d),b(_,S),b(S,V),b(_,R),K(H,_,null),b(_,G),b(_,J),b(J,he),T(u,de,v),T(u,$,v),b($,ae),b(ae,pe),T(u,we,v),T(u,x,v),b(x,ne),b(ne,be),O=!0,ge||(We=[N(l,"mouseover",r[7]),N(l,"focus",r[8]),N(l,"mouseleave",r[9]),N(l,"blur",r[10]),N(S,"click",le(se(r[11]))),N(_,"mouseover",r[13]),N(_,"focus",r[14]),N(_,"mouseleave",r[15]),N(_,"blur",r[16])],ge=!0)},p(u,v){var A,ue,ie;const Q={};v&1&&(Q.status=u[0].status),v&1&&(Q.delay=Re(u[0].startTime)),s.$set(Q),(!O||v&1)&&a!==(a=u[0].id+"")&&Z(n,a);const ee={};v&4&&(ee.show=u[2]),v&1&&(ee.content=u[0].id),i.$set(ee),(!O||v&3)&&p!==(p=Y(u[0].startTime,u[1])+"")&&Z(w,p),(!O||v&1)&&P!==(P=u[0].name+"")&&Z(V,P);const X={};v&4&&(X.show=u[2]),v&1&&(X.content=u[0].name),v&1&&(X.onFilter=u[12]),v&17&&(X.filtered=(ie=(ue=(A=u[4].url)==null?void 0:A.searchParams)==null?void 0:ue.get("query"))==null?void 0:ie.includes(u[0].name)),H.$set(X),(!O||v&3)&&re!==(re=Y(u[0].endTime,u[1])+"")&&Z(he,re),(!O||v&3)&&oe!==(oe=Y(u[0].startTime,u[1])+"")&&Z(pe,oe),(!O||v&3)&&fe!==(fe=Y(u[0].endTime,u[1])+"")&&Z(be,fe)},i(u){O||(E(s.$$.fragment,u),E(i.$$.fragment,u),E(H.$$.fragment,u),O=!0)},o(u){I(s.$$.fragment,u),I(i.$$.fragment,u),I(H.$$.fragment,u),O=!1},d(u){u&&c(e),M(s),u&&c(t),u&&c(l),M(i),u&&c(m),u&&c(_),M(H),u&&c(de),u&&c($),u&&c(we),u&&c(x),ge=!1,Fe(We)}}}function Pt(r){let e,s;return e=new _t({props:{href:r[3],class:"workflow-summary-row",$$slots:{default:[It]},$$scope:{ctx:r}}}),{c(){j(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){K(e,t,l),s=!0},p(t,[l]){const o={};l&8&&(o.href=t[3]),l&131095&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){M(e,t)}}}function Ct(r,e,s){let t,l;Ge(r,tt,P=>s(4,l=P));let{namespace:o}=e,{workflow:a}=e,{timeFormat:n}=e,f=!1;const i=P=>{const V=Oe({timeRange:"All"}),R=l.url.searchParams.get("query"),H=Ft(R??V),G=(H==null?void 0:H.workflowType)===P?"":P,J=Oe({...H,workflowType:G});ot({url:l.url,parameter:"query",value:J,allowEmpty:!0})},h=()=>s(2,f=!0),W=()=>s(2,f=!0),p=()=>s(2,f=!1),w=()=>s(2,f=!1),m=()=>i(a.name),_=()=>i(a.name),D=()=>s(2,f=!0),U=()=>s(2,f=!0),d=()=>s(2,f=!1),S=()=>s(2,f=!1);return r.$$set=P=>{"namespace"in P&&s(6,o=P.namespace),"workflow"in P&&s(0,a=P.workflow),"timeFormat"in P&&s(1,n=P.timeFormat)},r.$$.update=()=>{r.$$.dirty&65&&s(3,t=at({namespace:o,workflow:a.id,run:a.runId}))},[a,n,f,t,l,i,o,h,W,p,w,m,_,D,U,d,S]}class Zt extends ve{constructor(e){super(),Te(this,e,Ct,Pt,_e,{namespace:6,workflow:0,timeFormat:1})}}var $t=qt;function qt(r,e,s,t){var l,o,a;return function(){if(a=this,o=Array.prototype.slice.call(arguments),l&&(s||t))return;if(!s)return i(),l=setTimeout(f,e),l;l=setTimeout(i,e),r.apply(a,o);function f(){i(),r.apply(a,o)}function i(){clearTimeout(l),l=null}}}function Ve(r){let e,s;return e=new De({props:{name:"search",class:"ml-4 flex items-center text-gray-700"}}),{c(){j(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){K(e,t,l),s=!0},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){M(e,t)}}}function Ht(r){let e;return{c(){e=B(r[2])},l(s){e=L(s,r[2])},m(s,t){T(s,e,t)},p(s,t){t&4&&Z(e,s[2])},d(s){s&&c(e)}}}function Nt(r){let e,s,t,l,o,a,n,f,i,h,W,p,w=r[4]&&Ve();return i=new ht({props:{class:"m-2",type:"submit",$$slots:{default:[Ht]},$$scope:{ctx:r}}}),{c(){e=y("form"),w&&w.c(),s=C(),t=y("label"),l=B(r[2]),o=C(),a=y("input"),n=C(),f=y("div"),j(i.$$.fragment),this.h()},l(m){e=g(m,"FORM",{class:!0});var _=F(e);w&&w.l(_),s=q(_),t=g(_,"LABEL",{for:!0,class:!0});var D=F(t);l=L(D,r[2]),D.forEach(c),o=q(_),a=g(_,"INPUT",{id:!0,type:!0,class:!0,name:!0,placeholder:!0,autocomplete:!0}),n=q(_),f=g(_,"DIV",{});var U=F(f);z(i.$$.fragment,U),U.forEach(c),_.forEach(c),this.h()},h(){k(t,"for",r[5]),k(t,"class","hidden"),k(a,"id",r[5]),k(a,"type","text"),k(a,"class","w-full rounded-l-lg px-4 focus:outline-none"),k(a,"name",r[3]),a.value=r[1],k(a,"placeholder",r[0]),k(a,"autocomplete","off"),k(e,"class","relative flex items-center rounded-lg border-2 transition-colors focus-within:border-blue-700")},m(m,_){T(m,e,_),w&&w.m(e,null),b(e,s),b(e,t),b(t,l),b(e,o),b(e,a),b(e,n),b(e,f),K(i,f,null),h=!0,W||(p=[N(a,"input",r[7]),N(a,"keydown",le(r[8])),N(e,"submit",se(r[6]))],W=!0)},p(m,[_]){m[4]?w?_&16&&E(w,1):(w=Ve(),w.c(),E(w,1),w.m(e,s)):w&&(ce(),I(w,1,1,()=>{w=null}),me()),(!h||_&4)&&Z(l,m[2]),(!h||_&32)&&k(t,"for",m[5]),(!h||_&32)&&k(a,"id",m[5]),(!h||_&8)&&k(a,"name",m[3]),(!h||_&2&&a.value!==m[1])&&(a.value=m[1]),(!h||_&1)&&k(a,"placeholder",m[0]);const D={};_&516&&(D.$$scope={dirty:_,ctx:m}),i.$set(D)},i(m){h||(E(w),E(i.$$.fragment,m),h=!0)},o(m){I(w),I(i.$$.fragment,m),h=!1},d(m){m&&c(e),w&&w.d(),M(i),W=!1,Fe(p)}}}function Bt(r,e,s){let{placeholder:t=""}=e,{value:l=""}=e,{label:o="Search"}=e,{name:a="query"}=e,{icon:n=!1}=e,{id:f=`${o.toLocaleUpperCase()}-input`}=e;function i(p){Ee.call(this,r,p)}function h(p){Ee.call(this,r,p)}function W(p){Ee.call(this,r,p)}return r.$$set=p=>{"placeholder"in p&&s(0,t=p.placeholder),"value"in p&&s(1,l=p.value),"label"in p&&s(2,o=p.label),"name"in p&&s(3,a=p.name),"icon"in p&&s(4,n=p.icon),"id"in p&&s(5,f=p.id)},[t,l,o,a,n,f,i,h,W]}class xt extends ve{constructor(e){super(),Te(this,e,Bt,Nt,_e,{placeholder:0,value:1,label:2,name:3,icon:4,id:5})}}export{Me as F,xt as S,Yt as W,Zt as a,vt as b,$t as j,Ft as t};
