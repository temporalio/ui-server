import{S as ye,i as Ee,s as he,w as J,x as V,y as j,f as E,t as $,B as X,I as Ke,J as Me,K as ze,L as Ge,l as k,r as H,a as I,m as T,n as v,u as N,h as u,c as P,p as S,b,M as d,E as we,e as He,g as pe,d as de,N as Qe,T as C,U as be,aq as ke,H as Je,v as ee,G as Ve}from"./index-f283717a.js";import{T as je,a as Xe,b as Ye}from"./table-row-f3dc657f.js";import{p as Ze}from"./stores-62bcca1c.js";import{c as xe,f as G,d as Ne}from"./format-date-e7563fe7.js";import{n as et}from"./route-for-b2ab8caf.js";import{u as tt}from"./update-query-parameters-0d565146.js";import{c as lt,d as st,e as rt,f as ot}from"./is-6159121b.js";import{l as at,m as nt}from"./to-duration-a5f6615f.js";import{t as Ce}from"./workflow-service-455ea6e4.js";import{W as ft}from"./workflow-status-0bcf7612.js";import{I as Re}from"./icon-c6a60499.js";import{c as it}from"./copy-to-clipboard-c6080acc.js";function ut(r){let e;const s=r[0].default,t=Ke(s,r,r[1],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&2)&&Me(t,s,l,l[1],e?Ge(s,l[1],a,null):ze(l[1]),null)},i(l){e||(E(t,l),e=!0)},o(l){$(t,l),e=!1},d(l){t&&t.d(l)}}}function ct(r){let e,s,t,l,a,o,n,i,m,W,D,q,_,B,h,g,Q;return{c(){e=k("th"),s=H("Status"),t=I(),l=k("th"),a=H("Workflow ID"),o=I(),n=k("th"),i=H("Type"),m=I(),W=k("th"),D=H("Start"),q=I(),_=k("th"),B=H("End"),h=I(),g=k("th"),Q=H("Summary"),this.h()},l(c){e=T(c,"TH",{class:!0});var w=v(e);s=N(w,"Status"),w.forEach(u),t=P(c),l=T(c,"TH",{class:!0});var y=v(l);a=N(y,"Workflow ID"),y.forEach(u),o=P(c),n=T(c,"TH",{class:!0});var R=v(n);i=N(R,"Type"),R.forEach(u),m=P(c),W=T(c,"TH",{class:!0});var U=v(W);D=N(U,"Start"),U.forEach(u),q=P(c),_=T(c,"TH",{class:!0});var F=v(_);B=N(F,"End"),F.forEach(u),h=P(c),g=T(c,"TH",{class:!0,colspan:!0});var K=v(g);Q=N(K,"Summary"),K.forEach(u),this.h()},h(){S(e,"class","hidden w-48 md:table-cell"),S(l,"class","hidden md:table-cell md:w-60 xl:w-auto"),S(n,"class","hidden md:table-cell md:w-60 xl:w-80"),S(W,"class","hidden xl:table-cell xl:w-60"),S(_,"class","hidden xl:table-cell xl:w-60"),S(g,"class","table-cell md:hidden"),S(g,"colspan","3")},m(c,w){b(c,e,w),d(e,s),b(c,t,w),b(c,l,w),d(l,a),b(c,o,w),b(c,n,w),d(n,i),b(c,m,w),b(c,W,w),d(W,D),b(c,q,w),b(c,_,w),d(_,B),b(c,h,w),b(c,g,w),d(g,Q)},p:we,d(c){c&&u(e),c&&u(t),c&&u(l),c&&u(o),c&&u(n),c&&u(m),c&&u(W),c&&u(q),c&&u(_),c&&u(h),c&&u(g)}}}function mt(r){let e,s;return e=new Xe({props:{slot:"headers",$$slots:{default:[ct]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,l){const a={};l&2&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function _t(r){let e,s;return e=new je({props:{class:"w-full md:table-fixed",$$slots:{headers:[mt],default:[ut]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,[l]){const a={};l&2&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function pt(r,e,s){let{$$slots:t={},$$scope:l}=e;return r.$$set=a=>{"$$scope"in a&&s(1,l=a.$$scope)},[t,l]}class At extends ye{constructor(e){super(),Ee(this,e,pt,_t,he,{})}}const dt=r=>{const e=[],s=()=>{t&&(e.push(t),t="")};let t="",l=0;for(;l<r.length;){const a=r[l];if(lt(a)){s(),t+=a,l++;continue}if(st(a)||rt(a)){s(),l++;continue}t+=a,l++}return s(),e},Te=r=>e=>e.toLowerCase()===r.toLowerCase(),_e=(r,e)=>r[e+2],ht=r=>{if(!!r){for(const e of nt)if(r[e])return{[e]:r[e]}}},wt=Te("WorkflowType"),bt=Te("WorkflowId"),kt=Te("StartTime"),Tt=Te("ExecutionStatus"),vt=r=>{const e=dt(r),s={workflowId:"",workflowType:"",executionStatus:null,timeRange:null};return e.forEach((t,l)=>{if(bt(t)&&(s.workflowId=_e(e,l)),wt(t)&&(s.workflowType=_e(e,l)),Tt(t)){const a=_e(e,l);ot(a)&&(s.executionStatus=a)}if(kt(t)){const a=_e(e,l);try{const o=at(a),n=ht(o);s.timeRange=xe(n)}catch(o){console.error("Error parsing StartTime from query",o)}}}),s};function Le(r){let e,s,t,l,a,o=r[1]&&Be(r),n=r[2]&&Ae(r);return{c(){e=k("div"),o&&o.c(),s=I(),n&&n.c(),this.h()},l(i){e=T(i,"DIV",{class:!0});var m=v(e);o&&o.l(m),s=P(m),n&&n.l(m),m.forEach(u),this.h()},h(){S(e,"class","copy-or-filter svelte-1llgntb")},m(i,m){b(i,e,m),o&&o.m(e,null),d(e,s),n&&n.m(e,null),t=!0,l||(a=C(e,"click",be(ke(we))),l=!0)},p(i,m){i[1]?o?(o.p(i,m),m&2&&E(o,1)):(o=Be(i),o.c(),E(o,1),o.m(e,s)):o&&(pe(),$(o,1,1,()=>{o=null}),de()),i[2]?n?(n.p(i,m),m&4&&E(n,1)):(n=Ae(i),n.c(),E(n,1),n.m(e,null)):n&&(pe(),$(n,1,1,()=>{n=null}),de())},i(i){t||(E(o),E(n),t=!0)},o(i){$(o),$(n),t=!1},d(i){i&&u(e),o&&o.d(),n&&n.d(),l=!1,a()}}}function Be(r){let e,s=r[5],t,l,a,o=Ue(r);return{c(){e=k("button"),o.c()},l(n){e=T(n,"BUTTON",{});var i=v(e);o.l(i),i.forEach(u)},m(n,i){b(n,e,i),o.m(e,null),t=!0,l||(a=C(e,"click",be(ke(function(){Je(r[4])&&r[4].apply(this,arguments)}))),l=!0)},p(n,i){r=n,i&32&&he(s,s=r[5])?(pe(),$(o,1,1,we),de(),o=Ue(r),o.c(),E(o,1),o.m(e,null)):o.p(r,i)},i(n){t||(E(o),t=!0)},o(n){$(o),t=!1},d(n){n&&u(e),o.d(n),l=!1,a()}}}function Ue(r){let e,s;return e=new Re({props:{name:r[5]?"filter-solid":"filter",class:"h-4 w-4"}}),{c(){J(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,l){const a={};l&32&&(a.name=t[5]?"filter-solid":"filter"),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function Ae(r){let e,s,t,l,a;return s=new Re({props:{name:r[6]?"checkmark":"copy",stroke:"#000"}}),{c(){e=k("button"),J(s.$$.fragment)},l(o){e=T(o,"BUTTON",{});var n=v(e);V(s.$$.fragment,n),n.forEach(u)},m(o,n){b(o,e,n),j(s,e,null),t=!0,l||(a=C(e,"click",be(ke(r[9]))),l=!0)},p(o,n){const i={};n&64&&(i.name=o[6]?"checkmark":"copy"),s.$set(i)},i(o){t||(E(s.$$.fragment,o),t=!0)},o(o){$(s.$$.fragment,o),t=!1},d(o){o&&u(e),X(s),l=!1,a()}}}function yt(r){let e,s,t=r[0]&&Le(r);return{c(){t&&t.c(),e=He()},l(l){t&&t.l(l),e=He()},m(l,a){t&&t.m(l,a),b(l,e,a),s=!0},p(l,[a]){l[0]?t?(t.p(l,a),a&1&&E(t,1)):(t=Le(l),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(pe(),$(t,1,1,()=>{t=null}),de())},i(l){s||(E(t),s=!0)},o(l){$(t),s=!1},d(l){t&&t.d(l),l&&u(e)}}}function Et(r,e,s){let t,{show:l=!1}=e,{filterable:a=!0}=e,{copyable:o=!0}=e,{content:n}=e,{onFilter:i=we}=e,{filtered:m=!1}=e;const{copy:W,copied:D}=it(700);Qe(r,D,_=>s(6,t=_));const q=_=>W(_,n);return r.$$set=_=>{"show"in _&&s(0,l=_.show),"filterable"in _&&s(1,a=_.filterable),"copyable"in _&&s(2,o=_.copyable),"content"in _&&s(3,n=_.content),"onFilter"in _&&s(4,i=_.onFilter),"filtered"in _&&s(5,m=_.filtered)},[l,a,o,n,i,m,t,W,D,q]}class Oe extends ye{constructor(e){super(),Ee(this,e,Et,yt,he,{show:0,filterable:1,copyable:2,content:3,onFilter:4,filtered:5})}}function gt(r){var Se,$e,We;let e,s,t,l,a,o=r[0].id+"",n,i,m,W,D,q=G(r[0].startTime,r[1])+"",_,B,h,g,Q,c,w,y=r[0].name+"",R,U,F,K,M,te=G(r[0].endTime,r[1])+"",fe,ie,Y,le,se=G(r[0].startTime,r[1])+"",ue,ce,Z,re,oe=G(r[0].endTime,r[1])+"",me,A,ve,ge;return s=new ft({props:{status:r[0].status,delay:Ne(r[0].startTime)}}),m=new Oe({props:{show:r[2],content:r[0].id,filterable:!1}}),F=new Oe({props:{show:r[2],content:r[0].name,onFilter:r[12],filtered:(We=($e=(Se=r[4].url)==null?void 0:Se.searchParams)==null?void 0:$e.get("query"))==null?void 0:We.includes(r[0].name)}}),{c(){e=k("td"),J(s.$$.fragment),t=I(),l=k("td"),a=k("span"),n=H(o),i=I(),J(m.$$.fragment),W=I(),D=k("p"),_=H(q),B=I(),h=k("td"),g=k("h3"),Q=H("Workflow Name:"),c=I(),w=k("span"),R=H(y),U=I(),J(F.$$.fragment),K=I(),M=k("p"),fe=H(te),ie=I(),Y=k("td"),le=k("p"),ue=H(se),ce=I(),Z=k("td"),re=k("p"),me=H(oe),this.h()},l(f){e=T(f,"TD",{});var p=v(e);V(s.$$.fragment,p),p.forEach(u),t=P(f),l=T(f,"TD",{class:!0});var O=v(l);a=T(O,"SPAN",{class:!0});var x=v(a);n=N(x,o),x.forEach(u),i=P(O),V(m.$$.fragment,O),W=P(O),D=T(O,"P",{class:!0});var z=v(D);_=N(z,q),z.forEach(u),O.forEach(u),B=P(f),h=T(f,"TD",{class:!0});var L=v(h);g=T(L,"H3",{class:!0});var ae=v(g);Q=N(ae,"Workflow Name:"),ae.forEach(u),c=P(L),w=T(L,"SPAN",{class:!0});var ne=v(w);R=N(ne,y),ne.forEach(u),U=P(L),V(F.$$.fragment,L),K=P(L),M=T(L,"P",{class:!0});var Fe=v(M);fe=N(Fe,te),Fe.forEach(u),L.forEach(u),ie=P(f),Y=T(f,"TD",{class:!0});var De=v(Y);le=T(De,"P",{});var Ie=v(le);ue=N(Ie,se),Ie.forEach(u),De.forEach(u),ce=P(f),Z=T(f,"TD",{class:!0});var Pe=v(Z);re=T(Pe,"P",{});var qe=v(re);me=N(qe,oe),qe.forEach(u),Pe.forEach(u),this.h()},h(){S(a,"class","table-link svelte-si1lto"),S(D,"class","inline-time-cell svelte-si1lto"),S(l,"class","relative truncate"),S(g,"class","md:hidden"),S(w,"class","table-link svelte-si1lto"),S(M,"class","inline-time-cell svelte-si1lto"),S(h,"class","relative truncate"),S(Y,"class","time-cell svelte-si1lto"),S(Z,"class","time-cell svelte-si1lto")},m(f,p){b(f,e,p),j(s,e,null),b(f,t,p),b(f,l,p),d(l,a),d(a,n),d(l,i),j(m,l,null),d(l,W),d(l,D),d(D,_),b(f,B,p),b(f,h,p),d(h,g),d(g,Q),d(h,c),d(h,w),d(w,R),d(h,U),j(F,h,null),d(h,K),d(h,M),d(M,fe),b(f,ie,p),b(f,Y,p),d(Y,le),d(le,ue),b(f,ce,p),b(f,Z,p),d(Z,re),d(re,me),A=!0,ve||(ge=[C(l,"mouseover",r[7]),C(l,"focus",r[8]),C(l,"mouseleave",r[9]),C(l,"blur",r[10]),C(w,"click",be(ke(r[11]))),C(h,"mouseover",r[13]),C(h,"focus",r[14]),C(h,"mouseleave",r[15]),C(h,"blur",r[16])],ve=!0)},p(f,p){var L,ae,ne;const O={};p&1&&(O.status=f[0].status),p&1&&(O.delay=Ne(f[0].startTime)),s.$set(O),(!A||p&1)&&o!==(o=f[0].id+"")&&ee(n,o);const x={};p&4&&(x.show=f[2]),p&1&&(x.content=f[0].id),m.$set(x),(!A||p&3)&&q!==(q=G(f[0].startTime,f[1])+"")&&ee(_,q),(!A||p&1)&&y!==(y=f[0].name+"")&&ee(R,y);const z={};p&4&&(z.show=f[2]),p&1&&(z.content=f[0].name),p&1&&(z.onFilter=f[12]),p&17&&(z.filtered=(ne=(ae=(L=f[4].url)==null?void 0:L.searchParams)==null?void 0:ae.get("query"))==null?void 0:ne.includes(f[0].name)),F.$set(z),(!A||p&3)&&te!==(te=G(f[0].endTime,f[1])+"")&&ee(fe,te),(!A||p&3)&&se!==(se=G(f[0].startTime,f[1])+"")&&ee(ue,se),(!A||p&3)&&oe!==(oe=G(f[0].endTime,f[1])+"")&&ee(me,oe)},i(f){A||(E(s.$$.fragment,f),E(m.$$.fragment,f),E(F.$$.fragment,f),A=!0)},o(f){$(s.$$.fragment,f),$(m.$$.fragment,f),$(F.$$.fragment,f),A=!1},d(f){f&&u(e),X(s),f&&u(t),f&&u(l),X(m),f&&u(B),f&&u(h),X(F),f&&u(ie),f&&u(Y),f&&u(ce),f&&u(Z),ve=!1,Ve(ge)}}}function St(r){let e,s;return e=new Ye({props:{href:r[3],class:"workflow-summary-row",$$slots:{default:[gt]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){j(e,t,l),s=!0},p(t,[l]){const a={};l&8&&(a.href=t[3]),l&131095&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){s||(E(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function $t(r,e,s){let t,l;Qe(r,Ze,y=>s(4,l=y));let{namespace:a}=e,{workflow:o}=e,{timeFormat:n}=e,i=!1;const m=y=>{const R=Ce({timeRange:"All"}),U=l.url.searchParams.get("query"),F=vt(U!=null?U:R),K=(F==null?void 0:F.workflowType)===y?"":y,M=Ce({...F,workflowType:K});tt({url:l.url,parameter:"query",value:M,allowEmpty:!0})},W=()=>s(2,i=!0),D=()=>s(2,i=!0),q=()=>s(2,i=!1),_=()=>s(2,i=!1),B=()=>m(o.name),h=()=>m(o.name),g=()=>s(2,i=!0),Q=()=>s(2,i=!0),c=()=>s(2,i=!1),w=()=>s(2,i=!1);return r.$$set=y=>{"namespace"in y&&s(6,a=y.namespace),"workflow"in y&&s(0,o=y.workflow),"timeFormat"in y&&s(1,n=y.timeFormat)},r.$$.update=()=>{r.$$.dirty&65&&s(3,t=et({namespace:a,workflow:o.id,run:o.runId}))},[o,n,i,t,l,m,a,W,D,q,_,B,h,g,Q,c,w]}class Ot extends ye{constructor(e){super(),Ee(this,e,$t,St,he,{namespace:6,workflow:0,timeFormat:1})}}export{At as W,Ot as a,vt as t};
