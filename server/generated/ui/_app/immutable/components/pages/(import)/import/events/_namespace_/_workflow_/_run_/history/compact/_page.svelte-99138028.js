import{S as G,i as C,s as N,w as _,x as $,y as g,f as m,t as c,z as h,J as d,a2 as S,e as p,b as A,g as v,ac as q,d as y,h as I,ad as z}from"../../../../../../../../../../chunks/index-eadb3ae7.js";import{p as J}from"../../../../../../../../../../chunks/stores-46e0fa40.js";import{a as M}from"../../../../../../../../../../chunks/import-events-fdf6e16e.js";import{a as j,b as x,E as B}from"../../../../../../../../../../chunks/event-empty-row-4c723c03.js";import{P as D}from"../../../../../../../../../../chunks/pagination-f404d462.js";import{c as b}from"../../../../../../../../../../chunks/event-view-dd8ea025.js";function w(i,t,a){const e=i.slice();return e[8]=t[a],e}function k(i){let t,a;return t=new x({}),{c(){_(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){g(t,e,o),a=!0},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){c(t.$$.fragment,e),a=!1},d(e){h(t,e)}}}function E(i,t){let a,e,o;return e=new B({props:{event:t[8],compact:P,expandAll:t[1]==="true",initialItem:t[7],visibleItems:t[6]}}),{key:i,first:null,c(){a=p(),_(e.$$.fragment),this.h()},l(n){a=p(),$(e.$$.fragment,n),this.h()},h(){this.first=a},m(n,f){A(n,a,f),g(e,n,f),o=!0},p(n,f){t=n;const s={};f&64&&(s.event=t[8]),f&2&&(s.expandAll=t[1]==="true"),f&128&&(s.initialItem=t[7]),f&64&&(s.visibleItems=t[6]),e.$set(s)},i(n){o||(m(e.$$.fragment,n),o=!0)},o(n){c(e.$$.fragment,n),o=!1},d(n){n&&I(a),h(e,n)}}}function F(i){let t=[],a=new Map,e,o,n=i[6];const f=l=>`${l[8].id}-${l[8].timestamp}`;for(let l=0;l<n.length;l+=1){let r=w(i,n,l),u=f(r);a.set(u,t[l]=E(u,r))}let s=null;return n.length||(s=k()),{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=p(),s&&s.c()},l(l){for(let r=0;r<t.length;r+=1)t[r].l(l);e=p(),s&&s.l(l)},m(l,r){for(let u=0;u<t.length;u+=1)t[u].m(l,r);A(l,e,r),s&&s.m(l,r),o=!0},p(l,r){r&194&&(n=l[6],v(),t=q(t,r,f,1,l,n,a,e.parentNode,z,E,e,w),y(),n.length?s&&(v(),c(s,1,1,()=>{s=null}),y()):s||(s=k(),s.c(),m(s,1),s.m(e.parentNode,e)))},i(l){if(!o){for(let r=0;r<n.length;r+=1)m(t[r]);o=!0}},o(l){for(let r=0;r<t.length;r+=1)c(t[r]);o=!1},d(l){for(let r=0;r<t.length;r+=1)t[r].d(l);l&&I(e),s&&s.d(l)}}}function H(i){let t,a;return t=new j({props:{compact:P,$$slots:{default:[F]},$$scope:{ctx:i}}}),t.$on("expandAll",i[2]),{c(){_(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){g(t,e,o),a=!0},p(e,o){const n={};o&2242&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){c(t.$$.fragment,e),a=!1},d(e){h(t,e)}}}function K(i){let t,a;return t=new D({props:{items:i[0],floatId:"event-view-toggle","aria-label":"recent events",$$slots:{default:[H,({visibleItems:e,initialItem:o})=>({6:e,7:o}),({visibleItems:e,initialItem:o})=>(e?64:0)|(o?128:0)]},$$scope:{ctx:i}}}),{c(){_(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,o){g(t,e,o),a=!0},p(e,[o]){const n={};o&1&&(n.items=e[0]),o&2242&&(n.$$scope={dirty:o,ctx:e}),t.$set(n)},i(e){a||(m(t.$$.fragment,e),a=!0)},o(e){c(t.$$.fragment,e),a=!1},d(e){h(t,e)}}}let P=!0;function L(i,t,a){let e,o,n,f,s;d(i,b,r=>a(1,n=r)),d(i,M,r=>a(4,f=r)),d(i,J,r=>a(5,s=r));function l(r){S(b,n=r.detail.expanded,n)}return i.$$.update=()=>{i.$$.dirty&32&&a(3,e=s.url.searchParams.get("category")),i.$$.dirty&24&&a(0,o=f.filter(r=>e?r.category===e:r))},[o,n,l,e,f,s]}class W extends G{constructor(t){super(),C(this,t,L,K,N,{})}}export{W as default};
