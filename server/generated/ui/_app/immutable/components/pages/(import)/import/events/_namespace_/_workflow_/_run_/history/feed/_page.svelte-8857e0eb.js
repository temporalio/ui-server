import{S as C,i as N,s as S,w as _,x as $,y as g,f as u,t as c,z as h,J as d,a2 as q,e as p,b as A,g as v,ac as z,d as y,h as I,ad as J}from"../../../../../../../../../../chunks/index-3630b6f8.js";import{p as M}from"../../../../../../../../../../chunks/stores-4e1b824b.js";import{i as j}from"../../../../../../../../../../chunks/import-events-577ca048.js";import{a as x,b as B,E as D}from"../../../../../../../../../../chunks/event-empty-row-50bc8642.js";import{P as F}from"../../../../../../../../../../chunks/pagination-81046f13.js";import{c as b}from"../../../../../../../../../../chunks/event-view-840139d7.js";function w(i,t,a){const e=i.slice();return e[8]=t[a],e}function k(i){let t,a;return t=new B({}),{c(){_(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,l){g(t,e,l),a=!0},i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){c(t.$$.fragment,e),a=!1},d(e){h(t,e)}}}function E(i,t){let a,e,l;return e=new D({props:{event:t[8],compact:P,expandAll:t[1]==="true",initialItem:t[7],visibleItems:t[6]}}),{key:i,first:null,c(){a=p(),_(e.$$.fragment),this.h()},l(r){a=p(),$(e.$$.fragment,r),this.h()},h(){this.first=a},m(r,f){A(r,a,f),g(e,r,f),l=!0},p(r,f){t=r;const s={};f&64&&(s.event=t[8]),f&2&&(s.expandAll=t[1]==="true"),f&128&&(s.initialItem=t[7]),f&64&&(s.visibleItems=t[6]),e.$set(s)},i(r){l||(u(e.$$.fragment,r),l=!0)},o(r){c(e.$$.fragment,r),l=!1},d(r){r&&I(a),h(e,r)}}}function G(i){let t=[],a=new Map,e,l,r=i[6];const f=o=>`${o[8].id}-${o[8].timestamp}`;for(let o=0;o<r.length;o+=1){let n=w(i,r,o),m=f(n);a.set(m,t[o]=E(m,n))}let s=null;return r.length||(s=k()),{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=p(),s&&s.c()},l(o){for(let n=0;n<t.length;n+=1)t[n].l(o);e=p(),s&&s.l(o)},m(o,n){for(let m=0;m<t.length;m+=1)t[m].m(o,n);A(o,e,n),s&&s.m(o,n),l=!0},p(o,n){n&194&&(r=o[6],v(),t=z(t,n,f,1,o,r,a,e.parentNode,J,E,e,w),y(),r.length?s&&(v(),c(s,1,1,()=>{s=null}),y()):s||(s=k(),s.c(),u(s,1),s.m(e.parentNode,e)))},i(o){if(!l){for(let n=0;n<r.length;n+=1)u(t[n]);l=!0}},o(o){for(let n=0;n<t.length;n+=1)c(t[n]);l=!1},d(o){for(let n=0;n<t.length;n+=1)t[n].d(o);o&&I(e),s&&s.d(o)}}}function H(i){let t,a;return t=new x({props:{compact:P,$$slots:{default:[G]},$$scope:{ctx:i}}}),t.$on("expandAll",i[2]),{c(){_(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,l){g(t,e,l),a=!0},p(e,l){const r={};l&2242&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){c(t.$$.fragment,e),a=!1},d(e){h(t,e)}}}function K(i){let t,a;return t=new F({props:{items:i[0],floatId:"event-view-toggle","aria-label":"recent events",$$slots:{default:[H,({visibleItems:e,initialItem:l})=>({6:e,7:l}),({visibleItems:e,initialItem:l})=>(e?64:0)|(l?128:0)]},$$scope:{ctx:i}}}),{c(){_(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,l){g(t,e,l),a=!0},p(e,[l]){const r={};l&1&&(r.items=e[0]),l&2242&&(r.$$scope={dirty:l,ctx:e}),t.$set(r)},i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){c(t.$$.fragment,e),a=!1},d(e){h(t,e)}}}let P=!1;function L(i,t,a){let e,l,r,f,s;d(i,b,n=>a(1,r=n)),d(i,j,n=>a(4,f=n)),d(i,M,n=>a(5,s=n));function o(n){q(b,r=n.detail.expanded,r)}return i.$$.update=()=>{i.$$.dirty&32&&a(3,e=s.url.searchParams.get("category")),i.$$.dirty&24&&a(0,l=f.filter(n=>e?n.category===e:n))},[l,r,o,e,f,s]}class W extends C{constructor(t){super(),N(this,t,L,K,S,{})}}export{W as default};
