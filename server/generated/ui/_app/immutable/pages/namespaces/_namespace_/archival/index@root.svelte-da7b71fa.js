import{S as O,i as Q,s as U,w as S,a as T,e as B,x as C,c as F,y as I,b as v,t as y,d as q,f as w,B as V,h,N as G,g as D,l as W,r as E,m as N,n as H,u as A,p as P,M as g,E as X,ad as Y}from"../../../../chunks/index-f283717a.js";import{b as Z}from"../../../../chunks/workflow-service-f6a64dec.js";import{W as x,a as ee}from"../../../../chunks/workflows-summary-row-f6439633.js";import te from"./_workflow-filters.svelte-845c9442.js";import{P as le}from"../../../../chunks/pagination-3cbceff3.js";import{E as re}from"../../../../chunks/empty-state-5e402c94.js";import{C as M}from"../../../../chunks/code-block-79b577be.js";import{t as ae}from"../../../../chunks/time-format-e53b802e.js";import{P as ie}from"../../../../chunks/page-title-ec87b710.js";import{p as oe}from"../../../../chunks/stores-62bcca1c.js";import"../../../../chunks/settings-16907be6.js";import"../../../../chunks/index-5dff130b.js";import"../../../../chunks/simplify-attributes-61797c15.js";import"../../../../chunks/format-date-e7563fe7.js";import"../../../../chunks/to-duration-a5f6615f.js";import"../../../../chunks/is-6159121b.js";import"../../../../chunks/route-for-api-658a0b67.js";import"../../../../chunks/route-for-cc3652eb.js";import"../../../../chunks/get-public-path-029b12bd.js";import"../../../../chunks/notifications-dddf88f8.js";import"../../../../chunks/is-network-error-5f9e2367.js";import"../../../../chunks/is-function-45497f08.js";import"../../../../chunks/get-api-origin-aa9a7660.js";import"../../../../chunks/table-row-f3dc657f.js";import"../../../../chunks/update-query-parameters-0d565146.js";import"../../../../chunks/navigation-fbe70647.js";import"../../../../chunks/singletons-eca981c1.js";import"../../../../chunks/workflow-status-0bcf7612.js";import"../../../../chunks/icon-c6a60499.js";import"../../../../chunks/copy-to-clipboard-c6080acc.js";import"../../../../chunks/simple-select-bb509320.js";import"../../../../chunks/filter-select-a0e13a2c.js";import"./_filter-input.svelte-40f7ad05.js";import"../../../../chunks/index-97e54b9f.js";import"../../../../chunks/search-637897b3.js";import"../../../../chunks/button-397b3a8c.js";import"../../../../chunks/badge-46845e47.js";/* empty css                                                              */import"../../../../chunks/persist-store-c4deb1a0.js";function J(p,t,i){const e=p.slice();return e[7]=t[i],e}function ne(p){let t,i,e,l,s,r,a,o,u,c,b,k,n,d,m;a=new M({props:{content:`tctl --namespace ${p[0]} namespace update --has enabled`,language:"text",inline:!0}});let _=!p[3]&&K(p);return{c(){t=W("h2"),i=E("This namespace is currently not enabled for archival."),e=T(),l=W("p"),s=E("Run this command to enable Archival for Event Histories:"),r=T(),S(a.$$.fragment),o=T(),_&&_.c(),u=T(),c=W("p"),b=E("For more details, please check out "),k=W("a"),n=E("Archival documentation"),d=E("."),this.h()},l(f){t=N(f,"H2",{class:!0,"data-cy":!0});var $=H(t);i=A($,"This namespace is currently not enabled for archival."),$.forEach(h),e=F(f),l=N(f,"P",{});var R=H(l);s=A(R,"Run this command to enable Archival for Event Histories:"),R.forEach(h),r=F(f),C(a.$$.fragment,f),o=F(f),_&&_.l(f),u=F(f),c=N(f,"P",{});var j=H(c);b=A(j,"For more details, please check out "),k=N(j,"A",{class:!0,href:!0,target:!0});var z=H(k);n=A(z,"Archival documentation"),z.forEach(h),d=A(j,"."),j.forEach(h),this.h()},h(){P(t,"class","text-2xl"),P(t,"data-cy","archived-disabled-title"),P(k,"class","text-blue-700 underline"),P(k,"href","https://docs.temporal.io/server/archive-data/"),P(k,"target","_blank")},m(f,$){v(f,t,$),g(t,i),v(f,e,$),v(f,l,$),g(l,s),v(f,r,$),I(a,f,$),v(f,o,$),_&&_.m(f,$),v(f,u,$),v(f,c,$),g(c,b),g(c,k),g(k,n),g(c,d),m=!0},p(f,$){const R={};$&1&&(R.content=`tctl --namespace ${f[0]} namespace update --has enabled`),a.$set(R),f[3]?_&&(D(),y(_,1,1,()=>{_=null}),q()):_?(_.p(f,$),$&8&&w(_,1)):(_=K(f),_.c(),w(_,1),_.m(u.parentNode,u))},i(f){m||(w(a.$$.fragment,f),w(_),m=!0)},o(f){y(a.$$.fragment,f),y(_),m=!1},d(f){f&&h(t),f&&h(e),f&&h(l),f&&h(r),V(a,f),f&&h(o),_&&_.d(f),f&&h(u),f&&h(c)}}}function se(p){let t,i,e,l,s,r,a,o,u,c,b,k,n,d;return a=new M({props:{content:`tctl --namespace ${p[0]} namespace update -vas enabled`,language:"text",inline:!0}}),{c(){t=W("h2"),i=E(`This namespace is currently enabled for archival but visibility is not
    enabled.`),e=T(),l=W("p"),s=E("To enable Visibility Archival:"),r=T(),S(a.$$.fragment),o=T(),u=W("p"),c=E("For more details, please check out "),b=W("a"),k=E("Archival documentation"),n=E("."),this.h()},l(m){t=N(m,"H2",{class:!0,"data-cy":!0});var _=H(t);i=A(_,`This namespace is currently enabled for archival but visibility is not
    enabled.`),_.forEach(h),e=F(m),l=N(m,"P",{});var f=H(l);s=A(f,"To enable Visibility Archival:"),f.forEach(h),r=F(m),C(a.$$.fragment,m),o=F(m),u=N(m,"P",{});var $=H(u);c=A($,"For more details, please check out "),b=N($,"A",{class:!0,href:!0,target:!0});var R=H(b);k=A(R,"Archival documentation"),R.forEach(h),n=A($,"."),$.forEach(h),this.h()},h(){P(t,"class","text-2xl"),P(t,"data-cy","visibility-disabled-title"),P(b,"class","text-blue-700 underline"),P(b,"href","https://docs.temporal.io/server/archive-data/"),P(b,"target","_blank")},m(m,_){v(m,t,_),g(t,i),v(m,e,_),v(m,l,_),g(l,s),v(m,r,_),I(a,m,_),v(m,o,_),v(m,u,_),g(u,c),g(u,b),g(b,k),g(u,n),d=!0},p(m,_){const f={};_&1&&(f.content=`tctl --namespace ${m[0]} namespace update -vas enabled`),a.$set(f)},i(m){d||(w(a.$$.fragment,m),d=!0)},o(m){y(a.$$.fragment,m),d=!1},d(m){m&&h(t),m&&h(e),m&&h(l),m&&h(r),V(a,m),m&&h(o),m&&h(u)}}}function ce(p){let t,i,e,l,s,r,a,o,u;l=new te({});const c=[me,fe],b=[];function k(n,d){var m;return(m=n[1])!=null&&m.length?0:1}return r=k(p),a=b[r]=c[r](p),{c(){t=W("h2"),i=E("Archived Workflows"),e=T(),S(l.$$.fragment),s=T(),a.c(),o=B(),this.h()},l(n){t=N(n,"H2",{class:!0,"data-cy":!0});var d=H(t);i=A(d,"Archived Workflows"),d.forEach(h),e=F(n),C(l.$$.fragment,n),s=F(n),a.l(n),o=B(),this.h()},h(){P(t,"class","text-2xl"),P(t,"data-cy","archived-enabled-title")},m(n,d){v(n,t,d),g(t,i),v(n,e,d),I(l,n,d),v(n,s,d),b[r].m(n,d),v(n,o,d),u=!0},p(n,d){let m=r;r=k(n),r===m?b[r].p(n,d):(D(),y(b[m],1,1,()=>{b[m]=null}),q(),a=b[r],a?a.p(n,d):(a=b[r]=c[r](n),a.c()),w(a,1),a.m(o.parentNode,o))},i(n){u||(w(l.$$.fragment,n),w(a),u=!0)},o(n){y(l.$$.fragment,n),y(a),u=!1},d(n){n&&h(t),n&&h(e),V(l,n),n&&h(s),b[r].d(n),n&&h(o)}}}function K(p){let t,i,e,l,s;return l=new M({props:{content:`tctl --namespace ${p[0]} namespace update -vas enabled`,language:"text",inline:!0}}),{c(){t=W("p"),i=E("To enable Visibility Archival:"),e=T(),S(l.$$.fragment)},l(r){t=N(r,"P",{});var a=H(t);i=A(a,"To enable Visibility Archival:"),a.forEach(h),e=F(r),C(l.$$.fragment,r)},m(r,a){v(r,t,a),g(t,i),v(r,e,a),I(l,r,a),s=!0},p(r,a){const o={};a&1&&(o.content=`tctl --namespace ${r[0]} namespace update -vas enabled`),l.$set(o)},i(r){s||(w(l.$$.fragment,r),s=!0)},o(r){y(l.$$.fragment,r),s=!1},d(r){r&&h(t),r&&h(e),V(l,r)}}}function fe(p){let t,i;return t=new re({props:{title:"No Workflows Found",content:"If you have filters applied, try adjusting them."}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p:X,i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function me(p){let t,i;return t=new le({props:{items:p[1],$$slots:{default:[pe,({visibleItems:e})=>({6:e}),({visibleItems:e})=>e?64:0]},$$scope:{ctx:p}}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p(e,l){const s={};l&2&&(s.items=e[1]),l&1121&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function L(p){let t,i;return t=new ee({props:{workflow:p[7],namespace:p[0],timeFormat:p[5]}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p(e,l){const s={};l&64&&(s.workflow=e[7]),l&1&&(s.namespace=e[0]),l&32&&(s.timeFormat=e[5]),t.$set(s)},i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function ue(p){let t,i,e=p[6],l=[];for(let r=0;r<e.length;r+=1)l[r]=L(J(p,e,r));const s=r=>y(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();t=B()},l(r){for(let a=0;a<l.length;a+=1)l[a].l(r);t=B()},m(r,a){for(let o=0;o<l.length;o+=1)l[o].m(r,a);v(r,t,a),i=!0},p(r,a){if(a&97){e=r[6];let o;for(o=0;o<e.length;o+=1){const u=J(r,e,o);l[o]?(l[o].p(u,a),w(l[o],1)):(l[o]=L(u),l[o].c(),w(l[o],1),l[o].m(t.parentNode,t))}for(D(),o=e.length;o<l.length;o+=1)s(o);q()}},i(r){if(!i){for(let a=0;a<e.length;a+=1)w(l[a]);i=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);i=!1},d(r){Y(l,r),r&&h(t)}}}function pe(p){let t,i;return t=new x({props:{$$slots:{default:[ue]},$$scope:{ctx:p}}}),{c(){S(t.$$.fragment)},l(e){C(t.$$.fragment,e)},m(e,l){I(t,e,l),i=!0},p(e,l){const s={};l&1121&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){i||(w(t.$$.fragment,e),i=!0)},o(e){y(t.$$.fragment,e),i=!1},d(e){V(t,e)}}}function _e(p){let t,i,e,l,s,r;t=new ie({props:{title:`Archival | ${p[0]}`,url:p[4].url.href}});const a=[ce,se,ne],o=[];function u(c,b){return c[2]&&c[3]?0:c[2]?1:2}return e=u(p),l=o[e]=a[e](p),{c(){S(t.$$.fragment),i=T(),l.c(),s=B()},l(c){C(t.$$.fragment,c),i=F(c),l.l(c),s=B()},m(c,b){I(t,c,b),v(c,i,b),o[e].m(c,b),v(c,s,b),r=!0},p(c,[b]){const k={};b&1&&(k.title=`Archival | ${c[0]}`),b&16&&(k.url=c[4].url.href),t.$set(k);let n=e;e=u(c),e===n?o[e].p(c,b):(D(),y(o[n],1,1,()=>{o[n]=null}),q(),l=o[e],l?l.p(c,b):(l=o[e]=a[e](c),l.c()),w(l,1),l.m(s.parentNode,s))},i(c){r||(w(t.$$.fragment,c),w(l),r=!0)},o(c){y(t.$$.fragment,c),y(l),r=!1},d(c){V(t,c),c&&h(i),o[e].d(c),c&&h(s)}}}const tt=async function({params:p,url:t,stuff:i}){var e,l;const{searchParams:s}=t;s.has("time-range")||s.set("time-range","1 day");const r=p.namespace,a=s.get("workflow-id"),o=s.get("workflow-type"),u=s.get("time-range"),c=s.get("status"),b={workflowId:a,workflowType:o,closeTime:u,executionStatus:c},n=i.namespaces.find(f=>f.namespaceInfo.name===r),d=((e=n==null?void 0:n.config)===null||e===void 0?void 0:e.historyArchivalState)==="Enabled",m=((l=n==null?void 0:n.config)===null||l===void 0?void 0:l.visibilityArchivalState)==="Enabled",_=d&&m?await Z(r,b,fetch):null;return{props:{workflows:_?_.workflows:[],namespace:r,archivalEnabled:d,visibilityArchivalEnabled:m}}};function be(p,t,i){let e,l;G(p,oe,u=>i(4,e=u)),G(p,ae,u=>i(5,l=u));let{namespace:s}=t,{workflows:r}=t,{archivalEnabled:a=!1}=t,{visibilityArchivalEnabled:o=!1}=t;return p.$$set=u=>{"namespace"in u&&i(0,s=u.namespace),"workflows"in u&&i(1,r=u.workflows),"archivalEnabled"in u&&i(2,a=u.archivalEnabled),"visibilityArchivalEnabled"in u&&i(3,o=u.visibilityArchivalEnabled)},[s,r,a,o,e,l]}class lt extends O{constructor(t){super(),Q(this,t,be,_e,U,{namespace:0,workflows:1,archivalEnabled:2,visibilityArchivalEnabled:3})}}export{lt as default,tt as load};
