import{S as Y,i as Z,s as G,J as $e,l as k,m as $,n as v,h as c,b as w,K as ve,L as ye,M as Ee,f as _,ag as et,ah as tt,t as g,ai as rt,e as ce,g as Te,d as Ie,O as R,x as T,a as P,y as I,c as D,z as A,C,r as B,u as F,p as m,N as p,F as oe,Z as Fe,U as me,a4 as K,E as nt,D as Me,W as Ve,X as Xe,T as X,v as ne,H as at,I as st,o as Ye,an as Ae}from"../../../../../../chunks/index-7e739eea.js";import{p as Ze}from"../../../../../../chunks/stores-7f07ccfb.js";import{r as se,w as Ge,l as ot}from"../../../../../../chunks/workflow-run-2d13d39b.js";import{t as He,c as lt}from"../../../../../../chunks/events-5b4986c6.js";import{f as qe}from"../../../../../../chunks/index-126fba9a.js";import{I as ft}from"../../../../../../chunks/icon-e2f06bf3.js";import{a as ue,e as it,b as Ue}from"../../../../../../chunks/event-view-863dafee.js";import{t as ut,w as ct}from"../../../../../../chunks/terminate-service-189a225c.js";import{g as ie,h as ge,i as we,j as be,k as ke,l as Qe}from"../../../../../../chunks/route-for-06e4a074.js";import{t as mt}from"../../../../../../chunks/workflow-service-edf003eb.js";import{W as ht}from"../../../../../../chunks/workflow-status-cd15e3c1.js";import{n as je}from"../../../../../../chunks/notifications-7e703e91.js";import{B as pt}from"../../../../../../chunks/button-b1c22f57.js";import{M as _t}from"../../../../../../chunks/modal-ccc9fd9e.js";import{c as dt}from"../../../../../../chunks/core-user-d7236ce4.js";import{T as xe}from"../../../../../../chunks/tooltip-8a52658c.js";import{L as gt}from"../../../../../../chunks/loading-d00fcc7a.js";import"../../../../../../chunks/index-d8ed1bec.js";import"../../../../../../chunks/with-loading-f07bedaf.js";import"../../../../../../chunks/pollers-service-17146b23.js";import"../../../../../../chunks/route-for-api-652ea8c7.js";import"../../../../../../chunks/auth-user-bc1ad23a.js";import"../../../../../../chunks/persist-store-c25f6403.js";import"../../../../../../chunks/parse-with-big-int-561ccb8b.js";import"../../../../../../chunks/is-network-error-5f9e2367.js";import"../../../../../../chunks/is-http-0bfd0b41.js";import"../../../../../../chunks/get-encoder-endpoint-25b0520a.js";import"../../../../../../chunks/data-converter-config-7caccf53.js";import"../../../../../../chunks/atob-0f2ea7f7.js";import"../../../../../../chunks/events-service-9085b527.js";import"../../../../../../chunks/paginated-a5f6e575.js";import"../../../../../../chunks/index-ee84452b.js";import"../../../../../../chunks/format-date-c1755997.js";import"../../../../../../chunks/format-time-d031c2bc.js";import"../../../../../../chunks/is-44021919.js";import"../../../../../../chunks/index-7ac5c549.js";import"../../../../../../chunks/has-c7a26a56.js";import"../../../../../../chunks/get-event-categorization-2cfb578f.js";import"../../../../../../chunks/simplify-attributes-055c76f2.js";import"../../../../../../chunks/settings-c94c37e6.js";import"../../../../../../chunks/versions-4a0f3820.js";import"../../../../../../chunks/version-check-3a7b1db8.js";import"../../../../../../chunks/v4-f2cd1a04.js";import"../../../../../../chunks/badge-16b5ec74.js";import"../../../../../../chunks/copy-to-clipboard-1ace7192.js";function wt(s){let e,r,t,a;const n=s[1].default,o=$e(n,s,s[0],null);return{c(){e=k("div"),o&&o.c()},l(l){e=$(l,"DIV",{});var f=v(e);o&&o.l(f),f.forEach(c)},m(l,f){w(l,e,f),o&&o.m(e,null),a=!0},p(l,[f]){o&&o.p&&(!a||f&1)&&ve(o,n,l,l[0],a?Ee(n,l[0],f,null):ye(l[0]),null)},i(l){a||(_(o,l),et(()=>{t&&t.end(1),r=tt(e,qe,{y:-50,duration:150,delay:50}),r.start()}),a=!0)},o(l){g(o,l),r&&r.invalidate(),t=rt(e,qe,{y:-50,duration:150}),a=!1},d(l){l&&c(e),o&&o.d(l),l&&t&&t.end()}}}function bt(s,e,r){let{$$slots:t={},$$scope:a}=e;return s.$$set=n=>{"$$scope"in n&&r(0,a=n.$$scope)},[a,t]}class kt extends Y{constructor(e){super(),Z(this,e,bt,wt,G,{})}}function ze(s){let e,r,t,a;return e=new xe({props:{bottomLeft:!0,hide:!s[3],width:200,text:"You do not have permission to terminate this workflow. Contact your admin for assistance.",$$slots:{default:[vt]},$$scope:{ctx:s}}}),t=new _t({props:{open:s[2],confirmText:"Terminate",confirmType:"destructive",$$slots:{content:[Et],title:[yt]},$$scope:{ctx:s}}}),t.$on("cancelModal",s[5]),t.$on("confirmModal",s[6]),{c(){T(e.$$.fragment),r=P(),T(t.$$.fragment)},l(n){I(e.$$.fragment,n),r=D(n),I(t.$$.fragment,n)},m(n,o){A(e,n,o),w(n,r,o),A(t,n,o),a=!0},p(n,o){const l={};o&8&&(l.hide=!n[3]),o&16392&&(l.$$scope={dirty:o,ctx:n}),e.$set(l);const f={};o&4&&(f.open=n[2]),o&16386&&(f.$$scope={dirty:o,ctx:n}),t.$set(f)},i(n){a||(_(e.$$.fragment,n),_(t.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),a=!1},d(n){C(e,n),n&&c(r),C(t,n)}}}function $t(s){let e;return{c(){e=B("Terminate")},l(r){e=F(r,"Terminate")},m(r,t){w(r,e,t)},d(r){r&&c(e)}}}function vt(s){let e,r;return e=new pt({props:{variant:"destructive",disabled:s[3],dataCy:"terminate-button",$$slots:{default:[$t]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){A(e,t,a),r=!0},p(t,a){const n={};a&8&&(n.disabled=t[3]),a&16384&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function yt(s){let e,r;return{c(){e=k("h3"),r=B("Terminate Workflow"),this.h()},l(t){e=$(t,"H3",{slot:!0});var a=v(e);r=F(a,"Terminate Workflow"),a.forEach(c),this.h()},h(){m(e,"slot","title")},m(t,a){w(t,e,a),p(e,r)},p:oe,d(t){t&&c(e)}}}function Et(s){let e,r,t,a,n,o,l;return{c(){e=k("div"),r=k("p"),t=B(`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),a=P(),n=k("input"),this.h()},l(f){e=$(f,"DIV",{slot:!0});var i=v(e);r=$(i,"P",{});var b=v(r);t=F(b,`Are you sure you want to terminate this workflow? This action cannot be
        undone.`),b.forEach(c),a=D(i),n=$(i,"INPUT",{class:!0,placeholder:!0}),i.forEach(c),this.h()},h(){m(n,"class","mt-4 block w-full rounded-md border border-gray-200 p-2"),m(n,"placeholder","Enter a reason"),m(e,"slot","content")},m(f,i){w(f,e,i),p(e,r),p(r,t),p(e,a),p(e,n),Fe(n,s[1]),o||(l=me(n,"input",s[10]),o=!0)},p(f,i){i&2&&n.value!==f[1]&&Fe(n,f[1])},d(f){f&&c(e),o=!1,l()}}}function Tt(s){let e,r,t=s[0].canBeTerminated&&ze(s);return{c(){t&&t.c(),e=ce()},l(a){t&&t.l(a),e=ce()},m(a,n){t&&t.m(a,n),w(a,e,n),r=!0},p(a,[n]){a[0].canBeTerminated?t?(t.p(a,n),n&1&&_(t,1)):(t=ze(a),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(Te(),g(t,1,1,()=>{t=null}),Ie())},i(a){r||(_(t),r=!0)},o(a){g(t),r=!1},d(a){t&&t.d(a),a&&c(e)}}}function It(s,e,r){let t,a,n;R(s,se,N=>r(11,n=N));let{workflow:o}=e,{namespace:l}=e,f="",i=!1;const b=()=>r(2,i=!0),h=()=>r(2,i=!1),U=async()=>{r(2,i=!1),r(1,f=""),K(se,n=Date.now(),n),await nt(),je.add("success","Workflow Terminated")},W=()=>{r(2,i=!1),r(1,f=""),je.add("error","Cannot Terminate Workflow")},V=()=>{!o.canBeTerminated||ut({workflow:o,namespace:l,reason:f}).then(U).catch(W)};let H=dt();R(s,H,N=>r(9,a=N));function x(){f=this.value,r(1,f)}return s.$$set=N=>{"workflow"in N&&r(0,o=N.workflow),"namespace"in N&&r(8,l=N.namespace)},s.$$.update=()=>{s.$$.dirty&768&&r(3,t=a.terminateDisabled(l))},[o,f,i,t,b,h,V,H,l,a,x]}class At extends Y{constructor(e){super(),Z(this,e,It,Tt,G,{workflow:0,namespace:8})}}function Ct(s){let e,r,t,a;function n(f,i){return f[2]||f[2]===0?Pt:St}let o=n(s),l=o(s);return{c(){e=k("div"),l.c(),this.h()},l(f){e=$(f,"DIV",{class:!0,"data-cy":!0});var i=v(e);l.l(i),i.forEach(c),this.h()},h(){m(e,"class","block cursor-pointer whitespace-nowrap border-b-2 border-white text-sm hover:border-b-2 hover:border-blue-700 md:text-base svelte-1gctro0"),m(e,"data-cy",r=s[5].dataCy),X(e,"active",s[3]),X(e,"disabled",s[4])},m(f,i){w(f,e,i),l.m(e,null),t||(a=me(e,"click",s[6]),t=!0)},p(f,i){o===(o=n(f))&&l?l.p(f,i):(l.d(1),l=o(f),l&&(l.c(),l.m(e,null))),i&32&&r!==(r=f[5].dataCy)&&m(e,"data-cy",r),i&8&&X(e,"active",f[3]),i&16&&X(e,"disabled",f[4])},d(f){f&&c(e),l.d(),t=!1,a()}}}function Wt(s){let e,r;function t(o,l){return o[2]||o[2]===0?Nt:Dt}let a=t(s),n=a(s);return{c(){e=k("a"),n.c(),this.h()},l(o){e=$(o,"A",{class:!0,href:!0,"data-cy":!0});var l=v(e);n.l(l),l.forEach(c),this.h()},h(){m(e,"class","block whitespace-nowrap border-b-2 border-white text-sm hover:border-b-2 hover:border-blue-700 md:text-base svelte-1gctro0"),m(e,"href",s[0]),m(e,"data-cy",r=s[5].dataCy),X(e,"active",s[3]),X(e,"disabled",s[4])},m(o,l){w(o,e,l),n.m(e,null)},p(o,l){a===(a=t(o))&&n?n.p(o,l):(n.d(1),n=a(o),n&&(n.c(),n.m(e,null))),l&1&&m(e,"href",o[0]),l&32&&r!==(r=o[5].dataCy)&&m(e,"data-cy",r),l&8&&X(e,"active",o[3]),l&16&&X(e,"disabled",o[4])},d(o){o&&c(e),n.d()}}}function St(s){let e;return{c(){e=B(s[1])},l(r){e=F(r,s[1])},m(r,t){w(r,e,t)},p(r,t){t&2&&ne(e,r[1])},d(r){r&&c(e)}}}function Pt(s){let e,r,t,a;return{c(){e=B(s[1]),r=P(),t=k("span"),a=B(s[2]),this.h()},l(n){e=F(n,s[1]),r=D(n),t=$(n,"SPAN",{class:!0});var o=v(t);a=F(o,s[2]),o.forEach(c),this.h()},h(){m(t,"class","rounded-sm bg-blue-100 px-2 text-blue-700")},m(n,o){w(n,e,o),w(n,r,o),w(n,t,o),p(t,a)},p(n,o){o&2&&ne(e,n[1]),o&4&&ne(a,n[2])},d(n){n&&c(e),n&&c(r),n&&c(t)}}}function Dt(s){let e;return{c(){e=B(s[1])},l(r){e=F(r,s[1])},m(r,t){w(r,e,t)},p(r,t){t&2&&ne(e,r[1])},d(r){r&&c(e)}}}function Nt(s){let e,r,t,a;return{c(){e=B(s[1]),r=P(),t=k("span"),a=B(s[2]),this.h()},l(n){e=F(n,s[1]),r=D(n),t=$(n,"SPAN",{class:!0});var o=v(t);a=F(o,s[2]),o.forEach(c),this.h()},h(){m(t,"class","rounded-sm bg-blue-100 px-2 text-blue-700")},m(n,o){w(n,e,o),w(n,r,o),w(n,t,o),p(t,a)},p(n,o){o&2&&ne(e,n[1]),o&4&&ne(a,n[2])},d(n){n&&c(e),n&&c(r),n&&c(t)}}}function Rt(s){let e;function r(n,o){return n[0]?Wt:Ct}let t=r(s),a=t(s);return{c(){a.c(),e=ce()},l(n){a.l(n),e=ce()},m(n,o){a.m(n,o),w(n,e,o)},p(n,[o]){t===(t=r(n))&&a?a.p(n,o):(a.d(1),a=t(n),a&&(a.c(),a.m(e.parentNode,e)))},i:oe,o:oe,d(n){a.d(n),n&&c(e)}}}function Lt(s,e,r){let{href:t=""}=e,{label:a}=e,{amount:n=null}=e,{active:o=!1}=e,{disabled:l=!1}=e;function f(i){Xe.call(this,s,i)}return s.$$set=i=>{r(5,e=Me(Me({},e),Ve(i))),"href"in i&&r(0,t=i.href),"label"in i&&r(1,a=i.label),"amount"in i&&r(2,n=i.amount),"active"in i&&r(3,o=i.active),"disabled"in i&&r(4,l=i.disabled)},e=Ve(e),[t,a,n,o,l,e,f]}class fe extends Y{constructor(e){super(),Z(this,e,Lt,Rt,G,{href:0,label:1,amount:2,active:3,disabled:4})}}const Oe=s=>{const e=s==null?void 0:s.indexOf("?");return e>-1?s.slice(0,e):s},M=(s,e,r=!1)=>{const t=Oe(s).split("/"),a=Oe(e).split("/");if(r&&t.length!==a.length)return!1;for(let n=0;n<t.length;n++){const o=t[n],l=a[n];if(o!==l)return!1}return!0};function Bt(s){let e,r,t,a,n,o;return{c(){e=k("label"),r=k("input"),t=P(),a=k("span"),this.h()},l(l){e=$(l,"LABEL",{for:!0,class:!0});var f=v(e);r=$(f,"INPUT",{id:!0,type:!0,class:!0}),t=D(f),a=$(f,"SPAN",{class:!0}),v(a).forEach(c),f.forEach(c),this.h()},h(){m(r,"id",s[1]),m(r,"type","checkbox"),m(r,"class","hidden svelte-1ie64yz"),m(a,"class","slider svelte-1ie64yz"),m(e,"for",s[1]),m(e,"class","switch svelte-1ie64yz")},m(l,f){w(l,e,f),p(e,r),r.checked=s[0],p(e,t),p(e,a),n||(o=[me(r,"change",s[2]),me(r,"change",s[3])],n=!0)},p(l,[f]){f&2&&m(r,"id",l[1]),f&1&&(r.checked=l[0]),f&2&&m(e,"for",l[1])},i:oe,o:oe,d(l){l&&c(e),n=!1,at(o)}}}function Ft(s,e,r){let{checked:t=!1}=e,{id:a}=e;function n(l){Xe.call(this,s,l)}function o(){t=this.checked,r(0,t)}return s.$$set=l=>{"checked"in l&&r(0,t=l.checked),"id"in l&&r(1,a=l.id)},[t,a,n,o]}class Mt extends Y{constructor(e){super(),Z(this,e,Ft,Bt,G,{checked:0,id:1})}}function Vt(s){let e,r;return e=new Mt({props:{id:"autorefresh",checked:s[1]}}),e.$on("change",function(){st(s[0])&&s[0].apply(this,arguments)}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){A(e,t,a),r=!0},p(t,a){s=t;const n={};a&2&&(n.checked=s[1]),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function Ht(s){let e,r,t,a,n;return a=new xe({props:{bottomLeft:!0,text:"15 second page refresh",$$slots:{default:[Vt]},$$scope:{ctx:s}}}),{c(){e=k("label"),r=B("Auto refresh"),t=P(),T(a.$$.fragment),this.h()},l(o){e=$(o,"LABEL",{for:!0,class:!0});var l=v(e);r=F(l,"Auto refresh"),l.forEach(c),t=D(o),I(a.$$.fragment,o),this.h()},h(){m(e,"for","autorefresh"),m(e,"class","font-secondary text-sm")},m(o,l){w(o,e,l),p(e,r),w(o,t,l),A(a,o,l),n=!0},p(o,[l]){const f={};l&11&&(f.$$scope={dirty:l,ctx:o}),a.$set(f)},i(o){n||(_(a.$$.fragment,o),n=!0)},o(o){g(a.$$.fragment,o),n=!1},d(o){o&&c(e),o&&c(t),C(a,o)}}}function qt(s,e,r){let t,a;R(s,ue,o=>r(2,a=o));let{onChange:n}=e;return s.$$set=o=>{"onChange"in o&&r(0,n=o.onChange)},s.$$.update=()=>{s.$$.dirty&4&&r(1,t=a==="on")},[n,t,a]}class Ut extends Y{constructor(e){super(),Z(this,e,qt,Ht,G,{onChange:0})}}function Je(s){let e,r,t,a,n;return r=new Ut({props:{onChange:s[9]}}),a=new At({props:{workflow:s[1],namespace:s[0]}}),{c(){e=k("div"),T(r.$$.fragment),t=P(),T(a.$$.fragment),this.h()},l(o){e=$(o,"DIV",{class:!0});var l=v(e);I(r.$$.fragment,l),t=D(l),I(a.$$.fragment,l),l.forEach(c),this.h()},h(){m(e,"class","flex w-96 items-center justify-start gap-4 xl:justify-end")},m(o,l){w(o,e,l),A(r,e,null),p(e,t),A(a,e,null),n=!0},p(o,l){const f={};l&2&&(f.workflow=o[1]),l&1&&(f.namespace=o[0]),a.$set(f)},i(o){n||(_(r.$$.fragment,o),_(a.$$.fragment,o),n=!0)},o(o){g(r.$$.fragment,o),g(a.$$.fragment,o),n=!1},d(o){o&&c(e),C(r),C(a)}}}function Qt(s){var Ce,We,Se,Pe,De;let e,r,t,a,n,o,l,f,i,b,h,U,W,V=s[1].id+"",H,x,N,S,d,he,Q,pe,j,_e,z,de,O,ae;n=new ft({props:{name:"chevron-left",class:"inline"}}),h=new ht({props:{status:(Ce=s[1])==null?void 0:Ce.status}});let y=s[3]&&Je(s);return d=new fe({props:{label:"History",href:ie({view:s[4],...s[6]}),amount:(We=s[1])==null?void 0:We.historyEvents,dataCy:"history-tab",active:M(s[5].url.pathname,ie({view:s[4],...s[6]}))}}),Q=new fe({props:{label:"Workers",href:ge(s[6]),amount:(Pe=(Se=s[2])==null?void 0:Se.pollers)==null?void 0:Pe.length,dataCy:"workers-tab",active:M(s[5].url.pathname,ge(s[6]))}}),j=new fe({props:{label:"Pending Activities",href:we(s[6]),amount:(De=s[1].pendingActivities)==null?void 0:De.length,dataCy:"pending-activities-tab",active:M(s[5].url.pathname,we(s[6]))}}),z=new fe({props:{label:"Stack Trace",href:be(s[6]),dataCy:"stack-trace-tab",active:M(s[5].url.pathname,be(s[6]))}}),O=new fe({props:{label:"Queries",href:ke(s[6]),dataCy:"queries-tab",active:M(s[5].url.pathname,ke(s[6]))}}),{c(){e=k("header"),r=k("main"),t=k("div"),a=k("a"),T(n.$$.fragment),o=B("Back to Workflows"),f=P(),i=k("div"),b=k("h1"),T(h.$$.fragment),U=P(),W=k("span"),H=B(V),x=P(),y&&y.c(),N=P(),S=k("nav"),T(d.$$.fragment),he=P(),T(Q.$$.fragment),pe=P(),T(j.$$.fragment),_e=P(),T(z.$$.fragment),de=P(),T(O.$$.fragment),this.h()},l(u){e=$(u,"HEADER",{class:!0});var E=v(e);r=$(E,"MAIN",{class:!0});var q=v(r);t=$(q,"DIV",{class:!0});var ee=v(t);a=$(ee,"A",{href:!0,"data-cy":!0,class:!0});var te=v(a);I(n.$$.fragment,te),o=F(te,"Back to Workflows"),te.forEach(c),ee.forEach(c),f=D(q),i=$(q,"DIV",{class:!0});var J=v(i);b=$(J,"H1",{class:!0});var re=v(b);I(h.$$.fragment,re),U=D(re),W=$(re,"SPAN",{class:!0});var le=v(W);H=F(le,V),le.forEach(c),re.forEach(c),x=D(J),y&&y.l(J),J.forEach(c),N=D(q),S=$(q,"NAV",{class:!0});var L=v(S);I(d.$$.fragment,L),he=D(L),I(Q.$$.fragment,L),pe=D(L),I(j.$$.fragment,L),_e=D(L),I(z.$$.fragment,L),de=D(L),I(O.$$.fragment,L),L.forEach(c),q.forEach(c),E.forEach(c),this.h()},h(){m(a,"href",l=Qe({namespace:s[0],query:s[8],search:s[7]})),m(a,"data-cy","back-to-workflows"),m(a,"class","back-to-workflows svelte-st9g8m"),m(t,"class","-mt-3 -ml-2 mb-4 block"),m(W,"class","select-all font-medium"),m(b,"class","relative flex items-center gap-4 text-2xl"),m(i,"class","mb-8 flex flex-col items-start justify-between gap-4 xl:flex-row xl:gap-0"),m(S,"class","flex flex-wrap gap-6"),m(r,"class","relative flex flex-col gap-1"),m(e,"class","mb-4 flex flex-col gap-4")},m(u,E){w(u,e,E),p(e,r),p(r,t),p(t,a),A(n,a,null),p(a,o),p(r,f),p(r,i),p(i,b),A(h,b,null),p(b,U),p(b,W),p(W,H),p(i,x),y&&y.m(i,null),p(r,N),p(r,S),A(d,S,null),p(S,he),A(Q,S,null),p(S,pe),A(j,S,null),p(S,_e),A(z,S,null),p(S,de),A(O,S,null),ae=!0},p(u,[E]){var L,Ne,Re,Le,Be;(!ae||E&1&&l!==(l=Qe({namespace:u[0],query:u[8],search:u[7]})))&&m(a,"href",l);const q={};E&2&&(q.status=(L=u[1])==null?void 0:L.status),h.$set(q),(!ae||E&2)&&V!==(V=u[1].id+"")&&ne(H,V),u[3]?y?(y.p(u,E),E&8&&_(y,1)):(y=Je(u),y.c(),_(y,1),y.m(i,null)):y&&(Te(),g(y,1,1,()=>{y=null}),Ie());const ee={};E&16&&(ee.href=ie({view:u[4],...u[6]})),E&2&&(ee.amount=(Ne=u[1])==null?void 0:Ne.historyEvents),E&48&&(ee.active=M(u[5].url.pathname,ie({view:u[4],...u[6]}))),d.$set(ee);const te={};E&4&&(te.amount=(Le=(Re=u[2])==null?void 0:Re.pollers)==null?void 0:Le.length),E&32&&(te.active=M(u[5].url.pathname,ge(u[6]))),Q.$set(te);const J={};E&2&&(J.amount=(Be=u[1].pendingActivities)==null?void 0:Be.length),E&32&&(J.active=M(u[5].url.pathname,we(u[6]))),j.$set(J);const re={};E&32&&(re.active=M(u[5].url.pathname,be(u[6]))),z.$set(re);const le={};E&32&&(le.active=M(u[5].url.pathname,ke(u[6]))),O.$set(le)},i(u){ae||(_(n.$$.fragment,u),_(h.$$.fragment,u),_(y),_(d.$$.fragment,u),_(Q.$$.fragment,u),_(j.$$.fragment,u),_(z.$$.fragment,u),_(O.$$.fragment,u),ae=!0)},o(u){g(n.$$.fragment,u),g(h.$$.fragment,u),g(y),g(d.$$.fragment,u),g(Q.$$.fragment,u),g(j.$$.fragment,u),g(z.$$.fragment,u),g(O.$$.fragment,u),ae=!1},d(u){u&&c(e),C(n),C(h),y&&y.d(),C(d),C(Q),C(j),C(z),C(O)}}}const Ke=15e3;function jt(s,e,r){let t,a,n,o,l,f,i;R(s,se,d=>r(12,a=d)),R(s,ue,d=>r(13,n=d)),R(s,Ge,d=>r(11,o=d)),R(s,ct,d=>r(14,l=d)),R(s,it,d=>r(4,f=d)),R(s,Ze,d=>r(5,i=d));let{namespace:b}=e,{workflow:h}=e,{workers:U}=e,W;const V={namespace:b,workflow:h.id,run:h.runId},{parameters:H,searchType:x}=l,N=mt(H);Ye(()=>{t&&n==="on"&&(clearInterval(W),r(10,W=setInterval(()=>K(se,a=Date.now(),a),Ke)))});const S=()=>{n==="on"?(K(ue,n="off",n),clearInterval(W)):(K(se,a=Date.now(),a),K(ue,n="on",n),clearInterval(W),r(10,W=setInterval(()=>K(se,a=Date.now(),a),Ke)))};return Ae(()=>{clearInterval(W)}),s.$$set=d=>{"namespace"in d&&r(0,b=d.namespace),"workflow"in d&&r(1,h=d.workflow),"workers"in d&&r(2,U=d.workers)},s.$$.update=()=>{s.$$.dirty&2048&&r(3,t=o.workflow.isRunning),s.$$.dirty&1032&&(t||clearInterval(W))},[b,h,U,t,f,i,V,x,N,S,W,o]}class zt extends Y{constructor(e){super(),Z(this,e,jt,Qt,G,{namespace:0,workflow:1,workers:2})}}function Ot(s){let e,r;return e=new kt({props:{$$slots:{default:[Kt]},$$scope:{ctx:s}}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){A(e,t,a),r=!0},p(t,a){const n={};a&18&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function Jt(s){let e,r;return e=new gt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){A(e,t,a),r=!0},p:oe,i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function Kt(s){let e,r,t;e=new zt({props:{namespace:s[2],workflow:s[1].workflow,workers:s[1].workers}});const a=s[3].default,n=$e(a,s,s[4],null);return{c(){T(e.$$.fragment),r=P(),n&&n.c()},l(o){I(e.$$.fragment,o),r=D(o),n&&n.l(o)},m(o,l){A(e,o,l),w(o,r,l),n&&n.m(o,l),t=!0},p(o,l){const f={};l&2&&(f.workflow=o[1].workflow),l&2&&(f.workers=o[1].workers),e.$set(f),n&&n.p&&(!t||l&16)&&ve(n,a,o,o[4],t?Ee(a,o[4],l,null):ye(o[4]),null)},i(o){t||(_(e.$$.fragment,o),_(n,o),t=!0)},o(o){g(e.$$.fragment,o),g(n,o),t=!1},d(o){C(e,o),o&&c(r),n&&n.d(o)}}}function Xt(s){let e,r,t,a;const n=[Jt,Ot],o=[];function l(f,i){return f[0]?0:1}return r=l(s),t=o[r]=n[r](s),{c(){e=k("main"),t.c(),this.h()},l(f){e=$(f,"MAIN",{class:!0});var i=v(e);t.l(i),i.forEach(c),this.h()},h(){m(e,"class","flex h-full flex-col gap-6")},m(f,i){w(f,e,i),o[r].m(e,null),a=!0},p(f,[i]){let b=r;r=l(f),r===b?o[r].p(f,i):(Te(),g(o[b],1,1,()=>{o[b]=null}),Ie(),t=o[r],t?t.p(f,i):(t=o[r]=n[r](f),t.c()),_(t,1),t.m(e,null))},i(f){a||(_(t),a=!0)},o(f){g(t),a=!1},d(f){f&&c(e),o[r].d()}}}function Yt(s,e,r){let t,a,n,o,l;R(s,He,h=>r(5,t=h)),R(s,Ue,h=>r(6,a=h)),R(s,Ze,h=>r(7,n=h)),R(s,ot,h=>r(0,o=h)),R(s,Ge,h=>r(1,l=h));let{$$slots:f={},$$scope:i}=e;const{namespace:b}=n.params;return Ye(()=>{const h=n.url.searchParams.get("sort");h&&K(Ue,a=h,a)}),Ae(()=>{K(He,t=null,t)}),s.$$set=h=>{"$$scope"in h&&r(4,i=h.$$scope)},[o,l,b,f,i]}class Zt extends Y{constructor(e){super(),Z(this,e,Yt,Xt,G,{})}}function Gt(s){let e;const r=s[0].default,t=$e(r,s,s[1],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,n){t&&t.m(a,n),e=!0},p(a,n){t&&t.p&&(!e||n&2)&&ve(t,r,a,a[1],e?Ee(r,a[1],n,null):ye(a[1]),null)},i(a){e||(_(t,a),e=!0)},o(a){g(t,a),e=!1},d(a){t&&t.d(a)}}}function xt(s){let e,r;return e=new Zt({props:{$$slots:{default:[Gt]},$$scope:{ctx:s}}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){A(e,t,a),r=!0},p(t,[a]){const n={};a&2&&(n.$$scope={dirty:a,ctx:t}),e.$set(n)},i(t){r||(_(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){C(e,t)}}}function er(s,e,r){let{$$slots:t={},$$scope:a}=e;return Ae(()=>{lt()}),s.$$set=n=>{"$$scope"in n&&r(1,a=n.$$scope)},[t,a]}class Or extends Y{constructor(e){super(),Z(this,e,er,xt,G,{})}}export{Or as default};
