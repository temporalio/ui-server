import{S as z,i as G,s as L,e as j,t as M,k as A,j as C,c as S,a as P,g as X,d as E,n as D,m as R,b as q,K as Y,f as W,E as v,o as V,R as H,aA as x,aB as ee,x as d,an as te,a3 as ue,ao as ne,Z as ce,r as O,u as $,w as U,v as y,l as se,J as me,ap as ae,I as pe}from"../../../../../../chunks/vendor-b03dee8a.js";import{n as de}from"../../../../../../chunks/namespace-009eb0fd.js";import{a as _e}from"../../../../../../chunks/workflow-execution-96f0dc0e.js";import{T as ge,P as he,g as ve,a as $e}from"../../../../../../chunks/get-started-and-completed-events-d3b26200.js";import{E as J}from"../../../../../../chunks/_execution-information-315b675e.js";import{C as ie}from"../../../../../../chunks/code-block-184469bd.js";import{r as ke,n as we}from"../../../../../../chunks/request-from-api-a1f394a2.js";import"../../../../../../chunks/stores-0cc7c5f3.js";import"../../../../../../chunks/format-date-34e4dc1a.js";async function be({workflow:a,namespace:t,reason:e}){return await ke(`/namespaces/${t}/workflows/${a.id}/executions/${a.runId}/terminate`,{options:{method:"POST",body:JSON.stringify({reason:e})},shouldRetry:!1})}function re(a){let t,e,n,s,i,l,f,h,m,T,u;f=new me({props:{src:a[1]?x:ee,class:"mt-1 w-5 h-5 text-gray-500 cursor-pointer"}});let r=a[1]&&oe(a);return{c(){t=j("div"),e=j("div"),n=j("h4"),s=M("Terminate Execution"),i=A(),l=j("span"),C(f.$$.fragment),h=A(),r&&r.c(),this.h()},l(c){t=S(c,"DIV",{class:!0});var k=P(t);e=S(k,"DIV",{class:!0});var b=P(e);n=S(b,"H4",{class:!0});var I=P(n);s=X(I,"Terminate Execution"),I.forEach(E),i=D(b),l=S(b,"SPAN",{});var N=P(l);R(f.$$.fragment,N),N.forEach(E),b.forEach(E),h=D(k),r&&r.l(k),k.forEach(E),this.h()},h(){q(n,"class","svelte-1ctvlx3"),q(e,"class","flex gap-2"),Y(e,"mb-2",a[1]),q(t,"class","flex flex-col border-2 p-2 my-4")},m(c,k){W(c,t,k),v(t,e),v(e,n),v(n,s),v(e,i),v(e,l),V(f,l,null),v(t,h),r&&r.m(t,null),m=!0,T||(u=H(l,"click",a[6]),T=!0)},p(c,k){const b={};k&2&&(b.src=c[1]?x:ee),f.$set(b),k&2&&Y(e,"mb-2",c[1]),c[1]?r?(r.p(c,k),k&2&&d(r,1)):(r=oe(c),r.c(),d(r,1),r.m(t,null)):r&&(O(),$(r,1,1,()=>{r=null}),U())},i(c){m||(d(f.$$.fragment,c),d(r),m=!0)},o(c){$(f.$$.fragment,c),$(r),m=!1},d(c){c&&E(t),y(f),r&&r.d(),T=!1,u()}}}function oe(a){let t,e,n,s,i,l,f,h,m,T;return{c(){t=j("div"),e=j("input"),n=A(),s=j("button"),i=M("Terminate"),this.h()},l(u){t=S(u,"DIV",{class:!0});var r=P(t);e=S(r,"INPUT",{placeholder:!0,class:!0}),n=D(r),s=S(r,"BUTTON",{class:!0});var c=P(s);i=X(c,"Terminate"),c.forEach(E),r.forEach(E),this.h()},h(){q(e,"placeholder","Enter Reason"),q(e,"class","w-full svelte-1ctvlx3"),q(s,"class","terminate svelte-1ctvlx3"),s.disabled=l=!a[2],q(t,"class","flex gap-4 justify-between")},m(u,r){W(u,t,r),v(t,e),te(e,a[2]),v(t,n),v(t,s),v(s,i),h=!0,m||(T=[H(e,"input",a[7]),H(s,"click",a[4])],m=!0)},p(u,r){r&4&&e.value!==u[2]&&te(e,u[2]),(!h||r&4&&l!==(l=!u[2]))&&(s.disabled=l)},i(u){h||(ue(()=>{f||(f=ne(t,ae,{},!0)),f.run(1)}),h=!0)},o(u){f||(f=ne(t,ae,{},!1)),f.run(0),h=!1},d(u){u&&E(t),u&&f&&f.end(),m=!1,ce(T)}}}function Ee(a){let t=a[3](a[0]),e,n,s=t&&re(a);return{c(){s&&s.c(),e=se()},l(i){s&&s.l(i),e=se()},m(i,l){s&&s.m(i,l),W(i,e,l),n=!0},p(i,[l]){l&1&&(t=i[3](i[0])),t?s?(s.p(i,l),l&1&&d(s,1)):(s=re(i),s.c(),d(s,1),s.m(e.parentNode,e)):s&&(O(),$(s,1,1,()=>{s=null}),U())},i(i){n||(d(s),n=!0)},o(i){$(s),n=!1},d(i){s&&s.d(i),i&&E(e)}}}function Te(a,t,e){let{workflow:n}=t,{namespace:s}=t,i=!1,l="";const f=u=>String(u.status)==="Running",h=()=>{be({workflow:n,namespace:s,reason:l}),e(2,l=""),e(1,i=!1),we.add("success","Workflow Terminated")},m=()=>e(1,i=!i);function T(){l=this.value,e(2,l)}return a.$$set=u=>{"workflow"in u&&e(0,n=u.workflow),"namespace"in u&&e(5,s=u.namespace)},[n,i,l,f,h,s,m,T]}class Ie extends z{constructor(t){super();G(this,t,Te,Ee,L,{workflow:0,namespace:5})}}function le(a){let t,e;return t=new ie({props:{heading:"Input",content:a[3].input}}),{c(){C(t.$$.fragment)},l(n){R(t.$$.fragment,n)},m(n,s){V(t,n,s),e=!0},p(n,s){const i={};s&8&&(i.content=n[3].input),t.$set(i)},i(n){e||(d(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){y(t,n)}}}function fe(a){let t,e;return t=new ie({props:{heading:"Result",content:a[3].result}}),{c(){C(t.$$.fragment)},l(n){R(t.$$.fragment,n)},m(n,s){V(t,n,s),e=!0},p(n,s){const i={};s&8&&(i.content=n[3].result),t.$set(i)},i(n){e||(d(t.$$.fragment,n),e=!0)},o(n){$(t.$$.fragment,n),e=!1},d(n){y(t,n)}}}function je(a){let t,e,n,s,i,l,f,h,m,T,u,r,c,k,b,I,N;n=new J({props:{title:"Start Time",value:a[0].startTime}}),i=new J({props:{title:"End Time",value:a[0].endTime}}),f=new ge({props:{title:"Task Queue",value:a[0].taskQueue,href:a[2]}}),m=new J({props:{title:"History Events",value:a[0].historyEvents}});let _=a[3].input&&le(a),g=a[3].result&&fe(a);return c=new Ie({props:{namespace:a[1],workflow:a[0]}}),I=new he({props:{activities:a[0].pendingActivities}}),{c(){t=j("div"),e=j("div"),C(n.$$.fragment),s=A(),C(i.$$.fragment),l=A(),C(f.$$.fragment),h=A(),C(m.$$.fragment),T=A(),_&&_.c(),u=A(),g&&g.c(),r=A(),C(c.$$.fragment),k=A(),b=j("div"),C(I.$$.fragment),this.h()},l(o){t=S(o,"DIV",{class:!0});var p=P(t);e=S(p,"DIV",{class:!0});var w=P(e);R(n.$$.fragment,w),s=D(w),R(i.$$.fragment,w),l=D(w),R(f.$$.fragment,w),h=D(w),R(m.$$.fragment,w),T=D(w),_&&_.l(w),u=D(w),g&&g.l(w),w.forEach(E),r=D(p),R(c.$$.fragment,p),k=D(p),b=S(p,"DIV",{class:!0});var Q=P(b);R(I.$$.fragment,Q),Q.forEach(E),p.forEach(E),this.h()},h(){q(e,"class","w-full flex"),q(b,"class","flex w-full mt-4"),q(t,"class","execution-information px-6 py-6")},m(o,p){W(o,t,p),v(t,e),V(n,e,null),v(e,s),V(i,e,null),v(e,l),V(f,e,null),v(e,h),V(m,e,null),v(e,T),_&&_.m(e,null),v(e,u),g&&g.m(e,null),v(t,r),V(c,t,null),v(t,k),v(t,b),V(I,b,null),N=!0},p(o,[p]){const w={};p&1&&(w.value=o[0].startTime),n.$set(w);const Q={};p&1&&(Q.value=o[0].endTime),i.$set(Q);const B={};p&1&&(B.value=o[0].taskQueue),p&4&&(B.href=o[2]),f.$set(B);const K={};p&1&&(K.value=o[0].historyEvents),m.$set(K),o[3].input?_?(_.p(o,p),p&8&&d(_,1)):(_=le(o),_.c(),d(_,1),_.m(e,u)):_&&(O(),$(_,1,1,()=>{_=null}),U()),o[3].result?g?(g.p(o,p),p&8&&d(g,1)):(g=fe(o),g.c(),d(g,1),g.m(e,null)):g&&(O(),$(g,1,1,()=>{g=null}),U());const F={};p&2&&(F.namespace=o[1]),p&1&&(F.workflow=o[0]),c.$set(F);const Z={};p&1&&(Z.activities=o[0].pendingActivities),I.$set(Z)},i(o){N||(d(n.$$.fragment,o),d(i.$$.fragment,o),d(f.$$.fragment,o),d(m.$$.fragment,o),d(_),d(g),d(c.$$.fragment,o),d(I.$$.fragment,o),N=!0)},o(o){$(n.$$.fragment,o),$(i.$$.fragment,o),$(f.$$.fragment,o),$(m.$$.fragment,o),$(_),$(g),$(c.$$.fragment,o),$(I.$$.fragment,o),N=!1},d(o){o&&E(t),y(n),y(i),y(f),y(m),_&&_.d(),g&&g.d(),y(c),y(I)}}}async function Qe({stuff:a}){const{execution:t,events:e}=a;return{props:{execution:t,events:e}}}function Ae(a,t,e){let n,s,i,l;pe(a,de,m=>e(1,l=m));let{execution:f}=t,{events:h}=t;return a.$$set=m=>{"execution"in m&&e(4,f=m.execution),"events"in m&&e(5,h=m.events)},a.$$.update=()=>{a.$$.dirty&16&&e(0,n=_e(f)),a.$$.dirty&32&&e(3,s=ve(h)),a.$$.dirty&3&&e(2,i=$e(l,n.taskQueue))},[n,l,i,s,f,h]}class We extends z{constructor(t){super();G(this,t,Ae,je,L,{execution:4,events:5})}}export{We as default,Qe as load};
