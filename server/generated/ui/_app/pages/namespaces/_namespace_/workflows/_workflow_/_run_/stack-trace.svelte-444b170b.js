import{S as j,i as O,s as A,e as d,c as h,a as g,d as m,g as b,o as $,p as F,q as w,n as H,w as C,x,y as D,E as y,B as L,aj as B,l as N,ak as M,k as I,t as T,m as R,h as E,b as q,M as k,j as W}from"../../../../../../chunks/index-d3b4e788.js";import{x as z}from"../../../../../../chunks/index.es-b0be0744.js";import{g as P}from"../../../../../../chunks/query-service-662f9f3a.js";import{C as G}from"../../../../../../chunks/code-block-3502cf88.js";import{B as J}from"../../../../../../chunks/button-4beba973.js";import{E as V}from"../../../../../../chunks/empty-state-ead6dc71.js";import"../../../../../../chunks/route-for-api-6959591d.js";import"../../../../../../chunks/index-d96c6995.js";import"../../../../../../chunks/notifications-25ea2e0f.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/route-for-37155b93.js";import"../../../../../../chunks/atob-eb4fc9a1.js";function K(c){let e,n;return e=new V({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty"}}),{c(){C(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,a){D(e,t,a),n=!0},p:y,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Q(c){let e,n,t,a={ctx:c,current:null,token:null,hasCatch:!0,pending:Z,then:X,catch:U,value:6,error:7,blocks:[,,,]};return B(n=c[2],a),{c(){e=N(),a.block.c()},l(o){e=N(),a.block.l(o)},m(o,s){b(o,e,s),a.block.m(o,a.anchor=s),a.mount=()=>e.parentNode,a.anchor=e,t=!0},p(o,s){c=o,a.ctx=c,s&4&&n!==(n=c[2])&&B(n,a)||M(a,c,s)},i(o){t||(w(a.block),t=!0)},o(o){for(let s=0;s<3;s+=1){const l=a.blocks[s];$(l)}t=!1},d(o){o&&m(e),a.block.d(o),a.token=null,a=null}}}function U(c){let e,n;return e=new V({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){C(e.$$.fragment)},l(t){x(e.$$.fragment,t)},m(t,a){D(e,t,a),n=!0},p:y,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function X(c){let e,n,t,a,o,s=c[1].toLocaleTimeString()+"",l,u,r,i,_;return n=new J({props:{icon:z,loading:te,$$slots:{default:[Y]},$$scope:{ctx:c}}}),n.$on("click",c[3]),i=new G({props:{content:c[6],language:"text",dataCy:"query-stack-trace"}}),{c(){e=d("div"),C(n.$$.fragment),t=I(),a=d("p"),o=T("Stack Trace at "),l=T(s),u=I(),r=d("div"),C(i.$$.fragment),this.h()},l(f){e=h(f,"DIV",{class:!0});var p=g(e);x(n.$$.fragment,p),t=R(p),a=h(p,"P",{});var v=g(a);o=E(v,"Stack Trace at "),l=E(v,s),v.forEach(m),p.forEach(m),u=R(f),r=h(f,"DIV",{class:!0});var S=g(r);x(i.$$.fragment,S),S.forEach(m),this.h()},h(){q(e,"class","flex items-center gap-4"),q(r,"class","flex items-start h-full")},m(f,p){b(f,e,p),D(n,e,null),k(e,t),k(e,a),k(a,o),k(a,l),b(f,u,p),b(f,r,p),D(i,r,null),_=!0},p(f,p){const v={};p&256&&(v.$$scope={dirty:p,ctx:f}),n.$set(v),(!_||p&2)&&s!==(s=f[1].toLocaleTimeString()+"")&&W(l,s);const S={};p&4&&(S.content=f[6]),i.$set(S)},i(f){_||(w(n.$$.fragment,f),w(i.$$.fragment,f),_=!0)},o(f){$(n.$$.fragment,f),$(i.$$.fragment,f),_=!1},d(f){f&&m(e),L(n),f&&m(u),f&&m(r),L(i)}}}function Y(c){let e;return{c(){e=T("Refresh")},l(n){e=E(n,"Refresh")},m(n,t){b(n,e,t)},d(n){n&&m(e)}}}function Z(c){let e,n,t,a,o,s;return{c(){e=d("div"),n=d("h2"),t=T("Loading\u2026"),a=I(),o=d("p"),s=T("(This will fail if you have no workers running.)"),this.h()},l(l){e=h(l,"DIV",{class:!0});var u=g(e);n=h(u,"H2",{class:!0});var r=g(n);t=E(r,"Loading\u2026"),r.forEach(m),a=R(u),o=h(u,"P",{});var i=g(o);s=E(i,"(This will fail if you have no workers running.)"),i.forEach(m),u.forEach(m),this.h()},h(){q(n,"class","font-bold text-2xl mb-4"),q(e,"class","text-center")},m(l,u){b(l,e,u),k(e,n),k(n,t),k(e,a),k(e,o),k(o,s)},p:y,i:y,o:y,d(l){l&&m(e)}}}function ee(c){let e,n,t,a,o;const s=[Q,K],l=[];function u(r,i){return i&1&&(n=null),n==null&&(n=String(r[0].status)==="Running"),n?0:1}return t=u(c,-1),a=l[t]=s[t](c),{c(){e=d("section"),a.c()},l(r){e=h(r,"SECTION",{});var i=g(e);a.l(i),i.forEach(m)},m(r,i){b(r,e,i),l[t].m(e,null),o=!0},p(r,[i]){let _=t;t=u(r,i),t===_?l[t].p(r,i):(H(),$(l[_],1,1,()=>{l[_]=null}),F(),a=l[t],a?a.p(r,i):(a=l[t]=s[t](r),a.c()),w(a,1),a.m(e,null))},i(r){o||(w(a),o=!0)},o(r){$(a),o=!1},d(r){r&&m(e),l[t].d()}}}const ke=async function({params:c,stuff:e}){const{namespace:n}=c,{workflow:t}=e;return{props:{workflow:t,namespace:n}}};let te=!1;function ne(c,e,n){let{namespace:t}=e,{workflow:a}=e,o=new Date,l=(()=>P({workflow:a,namespace:t}))();const u=()=>{n(2,l=P({workflow:a,namespace:t})),l.then(()=>{n(1,o=new Date)})};return c.$$set=r=>{"namespace"in r&&n(4,t=r.namespace),"workflow"in r&&n(0,a=r.workflow)},[a,o,l,u,t]}class de extends j{constructor(e){super(),O(this,e,ne,ee,A,{namespace:4,workflow:0})}}export{de as default,ke as load};
