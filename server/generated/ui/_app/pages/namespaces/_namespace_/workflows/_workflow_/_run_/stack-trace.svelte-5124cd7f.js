import{S as O,i as W,s as j,e as d,c as h,a as $,d as u,g,q as b,o as w,N,w as E,x as T,y as x,E as y,B as C,aa as B,l as P,ac as F,k as q,t as R,m as I,h as D,b as L,M as k,j as H}from"../../../../../../chunks/index-604742bf.js";import{p as M}from"../../../../../../chunks/stores-810822a9.js";import{w as z}from"../../../../../../chunks/workflow-run-6a756c9b.js";import{b as V}from"../../../../../../chunks/query-service-40fab711.js";import{C as G}from"../../../../../../chunks/code-block-6c7863ef.js";import{B as J}from"../../../../../../chunks/button-75595856.js";import{E as A}from"../../../../../../chunks/empty-state-323474bd.js";import"../../../../../../chunks/index-c9e619a8.js";import"../../../../../../chunks/with-loading-22689bcc.js";import"../../../../../../chunks/workflow-service-4956e246.js";import"../../../../../../chunks/simplify-attributes-f2a24cc6.js";import"../../../../../../chunks/format-date-14f9c053.js";import"../../../../../../chunks/to-duration-3f40f60b.js";import"../../../../../../chunks/is-18735aa3.js";import"../../../../../../chunks/route-for-api-82f0cf48.js";import"../../../../../../chunks/route-for-15bcc76e.js";import"../../../../../../chunks/notifications-cfed8e58.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/is-function-b969a126.js";import"../../../../../../chunks/atob-eb4fc9a1.js";import"../../../../../../chunks/index-3ce11c61.js";import"../../../../../../chunks/copy-to-clipboard-8832075c.js";import"../../../../../../chunks/badge-cd9e2482.js";function K(l){let t,e;return t=new A({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty"}}),{c(){E(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,n){x(t,r,n),e=!0},p:y,i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){C(t,r)}}}function Q(l){let t,e,r,n={ctx:l,current:null,token:null,hasCatch:!0,pending:Z,then:X,catch:U,value:8,error:9,blocks:[,,,]};return B(e=l[1],n),{c(){t=P(),n.block.c()},l(a){t=P(),n.block.l(a)},m(a,o){g(a,t,o),n.block.m(a,n.anchor=o),n.mount=()=>t.parentNode,n.anchor=t,r=!0},p(a,o){l=a,n.ctx=l,o&2&&e!==(e=l[1])&&B(e,n)||F(n,l,o)},i(a){r||(b(n.block),r=!0)},o(a){for(let o=0;o<3;o+=1){const f=n.blocks[o];w(f)}r=!1},d(a){a&&u(t),n.block.d(a),n.token=null,n=null}}}function U(l){let t,e;return t=new A({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){E(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,n){x(t,r,n),e=!0},p:y,i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){C(t,r)}}}function X(l){let t,e,r,n,a,o=l[0].toLocaleTimeString()+"",f,c,s,m,_;return e=new J({props:{iconScale:.8,icon:"refresh",loading:et,$$slots:{default:[Y]},$$scope:{ctx:l}}}),e.$on("click",l[3]),m=new G({props:{content:l[8],language:"text",dataCy:"query-stack-trace"}}),{c(){t=d("div"),E(e.$$.fragment),r=q(),n=d("p"),a=R("Stack Trace at "),f=R(o),c=q(),s=d("div"),E(m.$$.fragment),this.h()},l(i){t=h(i,"DIV",{class:!0});var p=$(t);T(e.$$.fragment,p),r=I(p),n=h(p,"P",{});var v=$(n);a=D(v,"Stack Trace at "),f=D(v,o),v.forEach(u),p.forEach(u),c=I(i),s=h(i,"DIV",{class:!0});var S=$(s);T(m.$$.fragment,S),S.forEach(u),this.h()},h(){L(t,"class","flex items-center gap-4"),L(s,"class","flex items-start h-full")},m(i,p){g(i,t,p),x(e,t,null),k(t,r),k(t,n),k(n,a),k(n,f),g(i,c,p),g(i,s,p),x(m,s,null),_=!0},p(i,p){const v={};p&1024&&(v.$$scope={dirty:p,ctx:i}),e.$set(v),(!_||p&1)&&o!==(o=i[0].toLocaleTimeString()+"")&&H(f,o);const S={};p&2&&(S.content=i[8]),m.$set(S)},i(i){_||(b(e.$$.fragment,i),b(m.$$.fragment,i),_=!0)},o(i){w(e.$$.fragment,i),w(m.$$.fragment,i),_=!1},d(i){i&&u(t),C(e),i&&u(c),i&&u(s),C(m)}}}function Y(l){let t;return{c(){t=R("Refresh")},l(e){t=D(e,"Refresh")},m(e,r){g(e,t,r)},d(e){e&&u(t)}}}function Z(l){let t,e,r,n,a,o;return{c(){t=d("div"),e=d("h2"),r=R("Loading\u2026"),n=q(),a=d("p"),o=R("(This will fail if you have no workers running.)"),this.h()},l(f){t=h(f,"DIV",{class:!0});var c=$(t);e=h(c,"H2",{class:!0});var s=$(e);r=D(s,"Loading\u2026"),s.forEach(u),n=I(c),a=h(c,"P",{});var m=$(a);o=D(m,"(This will fail if you have no workers running.)"),m.forEach(u),c.forEach(u),this.h()},h(){L(e,"class","font-bold text-2xl mb-4"),L(t,"class","text-center")},m(f,c){g(f,t,c),k(t,e),k(e,r),k(t,n),k(t,a),k(a,o)},p:y,i:y,o:y,d(f){f&&u(t)}}}function tt(l){let t,e,r,n;const a=[Q,K],o=[];function f(c,s){return c[2].isRunning?0:1}return e=f(l),r=o[e]=a[e](l),{c(){t=d("section"),r.c()},l(c){t=h(c,"SECTION",{});var s=$(t);r.l(s),s.forEach(u)},m(c,s){g(c,t,s),o[e].m(t,null),n=!0},p(c,[s]){r.p(c,s)},i(c){n||(b(r),n=!0)},o(c){w(r),n=!1},d(c){c&&u(t),o[e].d()}}}let et=!1;function rt(l,t,e){let r,n;N(l,z,_=>e(4,r=_)),N(l,M,_=>e(5,n=_));const{namespace:a}=n.params,{workflow:o}=r;let f=new Date;const c=()=>V({workflow:o,namespace:a});let s;const m=()=>{e(1,s=V({workflow:o,namespace:a})),s.then(()=>{e(0,f=new Date)})};return o.isRunning&&e(1,s=c()),[f,s,o,m]}class nt extends O{constructor(t){super(),W(this,t,rt,tt,j,{})}}function ot(l){let t,e;return t=new nt({}),{c(){E(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,n){x(t,r,n),e=!0},p:y,i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){C(t,r)}}}class Ct extends O{constructor(t){super(),W(this,t,null,ot,j,{})}}export{Ct as default};
