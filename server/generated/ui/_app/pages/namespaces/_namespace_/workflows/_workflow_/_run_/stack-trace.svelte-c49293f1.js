import{S as O,i as W,s as j,e as d,c as h,a as $,d as u,g,q as b,o as w,N,w as E,x as T,y as x,E as y,B as C,aa as B,l as P,ac as F,k as q,t as R,m as I,h as D,b as L,M as k,j as H}from"../../../../../../chunks/index-604742bf.js";import{p as M}from"../../../../../../chunks/stores-810822a9.js";import{w as z}from"../../../../../../chunks/workflow-run-3f490eb5.js";import{b as V}from"../../../../../../chunks/query-service-aab9abb2.js";import{C as G}from"../../../../../../chunks/code-block-03609e84.js";import{B as J}from"../../../../../../chunks/button-0ce95595.js";import{E as A}from"../../../../../../chunks/empty-state-c50aaf3c.js";import"../../../../../../chunks/index-c9e619a8.js";import"../../../../../../chunks/with-loading-22689bcc.js";import"../../../../../../chunks/workflow-service-af583558.js";import"../../../../../../chunks/simplify-attributes-64d6cf1a.js";import"../../../../../../chunks/format-date-919f4714.js";import"../../../../../../chunks/to-duration-271d3946.js";import"../../../../../../chunks/route-for-api-f6933200.js";import"../../../../../../chunks/notifications-cfed8e58.js";import"../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../chunks/route-for-1f2060cd.js";import"../../../../../../chunks/atob-eb4fc9a1.js";import"../../../../../../chunks/index-0574ae1f.js";import"../../../../../../chunks/copy-to-clipboard-8832075c.js";function K(l){let t,e;return t=new A({props:{title:"No Stack Traces Found",dataCy:"query-stack-trace-empty"}}),{c(){E(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,n){x(t,r,n),e=!0},p:y,i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){C(t,r)}}}function Q(l){let t,e,r,n={ctx:l,current:null,token:null,hasCatch:!0,pending:Z,then:X,catch:U,value:8,error:9,blocks:[,,,]};return B(e=l[1],n),{c(){t=P(),n.block.c()},l(o){t=P(),n.block.l(o)},m(o,a){g(o,t,a),n.block.m(o,n.anchor=a),n.mount=()=>t.parentNode,n.anchor=t,r=!0},p(o,a){l=o,n.ctx=l,a&2&&e!==(e=l[1])&&B(e,n)||F(n,l,a)},i(o){r||(b(n.block),r=!0)},o(o){for(let a=0;a<3;a+=1){const f=n.blocks[a];w(f)}r=!1},d(o){o&&u(t),n.block.d(o),n.token=null,n=null}}}function U(l){let t,e;return t=new A({props:{title:"An Error Occured",content:"Please make sure you have at least one worker running."}}),{c(){E(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,n){x(t,r,n),e=!0},p:y,i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){C(t,r)}}}function X(l){let t,e,r,n,o,a=l[0].toLocaleTimeString()+"",f,c,s,m,_;return e=new J({props:{iconScale:.8,icon:"refresh",loading:et,$$slots:{default:[Y]},$$scope:{ctx:l}}}),e.$on("click",l[3]),m=new G({props:{content:l[8],language:"text",dataCy:"query-stack-trace"}}),{c(){t=d("div"),E(e.$$.fragment),r=q(),n=d("p"),o=R("Stack Trace at "),f=R(a),c=q(),s=d("div"),E(m.$$.fragment),this.h()},l(i){t=h(i,"DIV",{class:!0});var p=$(t);T(e.$$.fragment,p),r=I(p),n=h(p,"P",{});var v=$(n);o=D(v,"Stack Trace at "),f=D(v,a),v.forEach(u),p.forEach(u),c=I(i),s=h(i,"DIV",{class:!0});var S=$(s);T(m.$$.fragment,S),S.forEach(u),this.h()},h(){L(t,"class","flex items-center gap-4"),L(s,"class","flex items-start h-full")},m(i,p){g(i,t,p),x(e,t,null),k(t,r),k(t,n),k(n,o),k(n,f),g(i,c,p),g(i,s,p),x(m,s,null),_=!0},p(i,p){const v={};p&1024&&(v.$$scope={dirty:p,ctx:i}),e.$set(v),(!_||p&1)&&a!==(a=i[0].toLocaleTimeString()+"")&&H(f,a);const S={};p&2&&(S.content=i[8]),m.$set(S)},i(i){_||(b(e.$$.fragment,i),b(m.$$.fragment,i),_=!0)},o(i){w(e.$$.fragment,i),w(m.$$.fragment,i),_=!1},d(i){i&&u(t),C(e),i&&u(c),i&&u(s),C(m)}}}function Y(l){let t;return{c(){t=R("Refresh")},l(e){t=D(e,"Refresh")},m(e,r){g(e,t,r)},d(e){e&&u(t)}}}function Z(l){let t,e,r,n,o,a;return{c(){t=d("div"),e=d("h2"),r=R("Loading\u2026"),n=q(),o=d("p"),a=R("(This will fail if you have no workers running.)"),this.h()},l(f){t=h(f,"DIV",{class:!0});var c=$(t);e=h(c,"H2",{class:!0});var s=$(e);r=D(s,"Loading\u2026"),s.forEach(u),n=I(c),o=h(c,"P",{});var m=$(o);a=D(m,"(This will fail if you have no workers running.)"),m.forEach(u),c.forEach(u),this.h()},h(){L(e,"class","font-bold text-2xl mb-4"),L(t,"class","text-center")},m(f,c){g(f,t,c),k(t,e),k(e,r),k(t,n),k(t,o),k(o,a)},p:y,i:y,o:y,d(f){f&&u(t)}}}function tt(l){let t,e,r,n;const o=[Q,K],a=[];function f(c,s){return c[2].isRunning?0:1}return e=f(l),r=a[e]=o[e](l),{c(){t=d("section"),r.c()},l(c){t=h(c,"SECTION",{});var s=$(t);r.l(s),s.forEach(u)},m(c,s){g(c,t,s),a[e].m(t,null),n=!0},p(c,[s]){r.p(c,s)},i(c){n||(b(r),n=!0)},o(c){w(r),n=!1},d(c){c&&u(t),a[e].d()}}}let et=!1;function rt(l,t,e){let r,n;N(l,z,_=>e(4,r=_)),N(l,M,_=>e(5,n=_));const{namespace:o}=n.params,{workflow:a}=r;let f=new Date;const c=()=>V({workflow:a,namespace:o});let s;const m=()=>{e(1,s=V({workflow:a,namespace:o})),s.then(()=>{e(0,f=new Date)})};return a.isRunning&&e(1,s=c()),[f,s,a,m]}class nt extends O{constructor(t){super(),W(this,t,rt,tt,j,{})}}function at(l){let t,e;return t=new nt({}),{c(){E(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,n){x(t,r,n),e=!0},p:y,i(r){e||(b(t.$$.fragment,r),e=!0)},o(r){w(t.$$.fragment,r),e=!1},d(r){C(t,r)}}}class Et extends O{constructor(t){super(),W(this,t,null,at,j,{})}}export{Et as default};
