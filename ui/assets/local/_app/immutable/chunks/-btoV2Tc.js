import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as N,b as U,g as d,t as k,d as f,s as c,e as G,c as h,n as H,r as S,m as j}from"./Dv5jDC8Z.js";import{s as q}from"./CnnFVxmh.js";import{a as y,t as C,b as P}from"./BM_uyzAk.js";import{e as R}from"./C1S4hUbu.js";import{i as T}from"./CM2QeVoh.js";import{s as W,a as z}from"./CEr_ApTH.js";import{g as D}from"./CFnI2aNn.js";import{B as J}from"./59-RDtFO.js";import{L as K}from"./BtoDfu-7.js";import{t as n}from"./CZMG2GAD.js";import{g as M}from"./CO6JiDyR.js";import{t as O}from"./CIYeKIgM.js";import{i as Q,a as V}from"./YaTQsLoV.js";import{l as X}from"./CL06mzCM.js";import{t as _}from"./S8vTd6-A.js";import{p as Y}from"./CTBtQUu0.js";import{r as Z}from"./D1Un8y-w.js";var ee=C('<div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><!> <input id="import-event-history-file-upload" class="import-input block border border-slate-200 p-2" type="file" accept=".json"> <!></div>');function $e($,b){N(b,!1);const[x,E]=W(),w=()=>z(X,"$lastUsedNamespace",x);let r,a=j(!1);const A=async e=>{var s;const t=e.target,i=(s=t==null?void 0:t.files)===null||s===void 0?void 0:s[0],o=new FileReader;i&&(o.readAsText(i),o.onload=()=>{var p,m;try{const g=(m=(p=o==null?void 0:o.result)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:"";r=Y(g),c(a,!0)}catch{_.push({variant:"error",message:n("events.event-history-load-error")}),c(a,!1)}})},B=async()=>{try{const e=await O(Array.isArray(r)?r:r==null?void 0:r.events),s=M(e);Q.set(e),V.set(s),c(a,!1);const t=Z(w(),"feed");D(t)}catch(e){console.error(e),_.push({variant:"error",message:n("events.event-history-import-error")})}};T();var l=ee(),v=G(l);const F=f(()=>n("events.import-event-history-file-upload"));K(v,{hidden:!0,for:"import-event-history-file-upload",get label(){return d(F)}});var u=h(v,2),I=h(u,2);const L=f(()=>!d(a));J(I,{leadingIcon:"file-upload",get disabled(){return d(L)},$$events:{click:B},children:(e,s)=>{H();var t=P();k(i=>q(t,i),[()=>n("common.import")],f),y(e,t)},$$slots:{default:!0}}),S(l),R("change",u,A),y($,l),U(),E()}export{$e as E};
