import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{a as Re,w as Se}from"./DsVF0eUi.js";import{p as me,i as O,c as S,e as C,b as ve,L as r,G as l,m as h,l as U,a as Ke,f as pe,t as W,g as e,h as m,j as x,s as y,o as s,r as _,n as oe,k as Qe}from"./CckrFwdx.js";import{s as R}from"./_IQD3yTx.js";import{i as ge,s as X}from"./ebNgFJjp.js";import{p as f,s as fe,a as je,c as ie}from"./BioCYJcK.js";import{i as Ae}from"./CoMawi-e.js";import{p as Ee}from"./mwZeQPPz.js";import{A as Fe}from"./DQoxx6p8.js";import{C as ue}from"./CXhCcizX.js";import{I as de}from"./DfVEW58q.js";import{M as He}from"./DkYbxbQw.js";import{t}from"./DEjs8ZrU.js";function Me(A,n){me(n,!1);const E=()=>je(Ee,"$page",F),[F,K]=fe();let $=f(n,"isCloud",8,!1);ge();var k=O(),q=S(k);{var L=v=>{var u=O(),p=S(u);X(p,n,"default",{},null),C(v,u)},P=v=>{var u=O(),p=S(u);X(p,n,"fallback",{},null),C(v,u)};Ae(q,v=>{r($()),E(),l(()=>{var u,p,w;return $()||((w=(p=(u=E().data)==null?void 0:u.settings)==null?void 0:p.runtimeEnvironment)==null?void 0:w.isCloud)})?v(L):v(P,!1)})}C(A,k),ve(),K()}const xe={spec:{name:"",descriptionString:"",target:{worker:{namespace:"",taskQueue:""}},allowedCallerNamespaces:[]}},ce=Se(xe);var Ve=pe('<div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!>',1),ze=pe('<div class="flex w-full flex-col gap-4 xl:w-1/2"><!> <div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!> <!> <!> <div class="flex flex-col gap-2"><p class="text-sm font-medium">Description</p> <!> <p class="text-xs text-secondary">Do not include sensitive data.</p></div> <!></div> <!>',1);function st(A,n){me(n,!1);const[E,F]=fe(),K=h(),$=h();var k,q,L,P,v,u,p,w,H;let o=f(n,"endpoint",8,void 0),_e=f(n,"targetNamespaceList",24,()=>[]),Y=f(n,"callerNamespaceList",24,()=>[]),T=f(n,"error",8,void 0),be=f(n,"nameDisabled",8,!1),he=f(n,"isCloud",8,!0),ye=f(n,"nameHintText",8),Z=f(n,"nameRegexPattern",8),b=h(((k=o()===null||o()===void 0?void 0:o().spec)===null||k===void 0?void 0:k.name)||""),Q=h(((q=o()===null||o()===void 0?void 0:o().spec)===null||q===void 0?void 0:q.descriptionString)||""),D=h(((v=(P=(L=o()===null||o()===void 0?void 0:o().spec)===null||L===void 0?void 0:L.target)===null||P===void 0?void 0:P.worker)===null||v===void 0?void 0:v.namespace)||""),I=h(((w=(p=(u=o()===null||o()===void 0?void 0:o().spec)===null||u===void 0?void 0:u.target)===null||p===void 0?void 0:p.worker)===null||w===void 0?void 0:w.taskQueue)||""),N=h(((H=o()===null||o()===void 0?void 0:o().spec)===null||H===void 0?void 0:H.allowedCallerNamespaces)||[]);const $e=(a,d,i,c,g)=>{ie(ce,{spec:{name:a,descriptionString:d,target:{worker:{namespace:i,taskQueue:c}},allowedCallerNamespaces:g}})};Re(()=>{ie(ce,xe)}),U(()=>(e(b),e(Q),e(D),e(I),e(N)),()=>{$e(e(b),e(Q),e(D),e(I),e(N))}),U(()=>r(Y()),()=>{y(K,Y().map(a=>({value:a.namespace,label:a.namespace})))}),U(()=>r(Z()),()=>{y($,a=>Z().test(a))}),Ke(),ge();var ee=ze(),M=S(ee),te=x(M);{let a=s(()=>(e(b),e($),l(()=>!e(b)||!e($)(e(b))))),d=s(()=>(r(t),l(()=>t("nexus.endpoint-name")))),i=s(()=>(r(t),l(()=>t("nexus.endpoint-name-placeholder"))));de(te,{required:!0,get disabled(){return be()},get error(){return e(a)},get hintText(){return ye()},get label(){return e(d)},id:"name",maxLength:255,get placeholder(){return e(i)},get value(){return e(b)},set value(c){y(b,c)},$$legacy:!0})}var V=m(te,2),z=x(V),ke=x(z,!0);_(z);var ae=m(z,2),we=x(ae,!0);_(ae),_(V);var re=m(V,2);{let a=s(()=>(r(t),l(()=>t("nexus.target-namespace")))),d=s(()=>(r(t),l(()=>t("common.no-results")))),i=s(()=>!!e(D)),c=s(()=>(r(t),l(()=>t("nexus.select-namespace"))));ue(re,{get label(){return e(a)},get noResultsText(){return e(d)},get valid(){return e(i)},error:"Please select a target Namespace.",required:!0,id:"target-namespace",get placeholder(){return e(c)},leadingIcon:"namespace-switcher",get options(){return _e()},optionValueKey:"namespace",minSize:32,get value(){return e(D)},set value(g){y(D,g)},$$legacy:!0})}var le=m(re,2);{let a=s(()=>!e(I)),d=s(()=>(r(t),l(()=>t("common.task-queue")))),i=s(()=>(r(t),l(()=>t("nexus.task-queue-placeholder"))));de(le,{required:!0,get error(){return e(a)},get label(){return e(d)},id:"task-queue",get placeholder(){return e(i)},get value(){return e(I)},set value(c){y(I,c)},$$legacy:!0})}var se=m(le,2);Me(se,{get isCloud(){return he()},children:(a,d)=>{var i=Ve(),c=S(i),g=x(c),j=x(g,!0);_(g);var ne=m(g,2),Le=x(ne,!0);_(ne),_(c);var Pe=m(c,2);{let B=s(()=>(r(t),l(()=>t("nexus.allowed-caller-namespaces")))),J=s(()=>(r(t),l(()=>t("common.no-results")))),Te=s(()=>(e(N),l(()=>!!e(N).length))),De=s(()=>(r(t),l(()=>t("nexus.select-namespaces"))));ue(Pe,{id:"caller-namespace-filter-menu",multiselect:!0,displayChips:!1,get options(){return e(K)},get label(){return e(B)},leadingIcon:"search",get noResultsText(){return e(J)},get valid(){return e(Te)},error:"Please select at least one Namespace.",get placeholder(){return e(De)},optionValueKey:"value",optionLabelKey:"label",get value(){return e(N)},set value(Ie){y(N,Ie)},$$legacy:!0})}W((B,J)=>{R(j,B),R(Le,J)},[()=>(r(t),l(()=>t("nexus.access-policy"))),()=>(r(t),l(()=>t("nexus.allowed-caller-namespaces-description")))]),C(a,i)},$$slots:{default:!0}});var G=m(se,2),Ne=m(x(G),2);He(Ne,{get content(){return e(Q)},set content(a){y(Q,a)},$$legacy:!0}),oe(2),_(G);var Ce=m(G,2);X(Ce,n,"footer",{},null),_(M);var qe=m(M,2);{let a=s(()=>(r(T()),l(()=>{var i;return(i=T())==null?void 0:i.statusText}))),d=s(()=>!T());Fe(qe,{get title(){return e(a)},intent:"error",get hidden(){return e(d)},children:(i,c)=>{oe();var g=Qe();W(()=>R(g,(r(T()),l(()=>{var j;return(j=T())==null?void 0:j.message})))),C(i,g)},$$slots:{default:!0}})}W((a,d)=>{R(ke,a),R(we,d)},[()=>(r(t),l(()=>t("nexus.target"))),()=>(r(t),l(()=>t("nexus.target-description")))]),C(A,ee),ve(),F()}export{st as N,ce as e};
