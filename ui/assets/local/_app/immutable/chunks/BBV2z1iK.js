import"./CWj6FrbW.js";import{p as vt,g as t,j as G,b as pt,az as o,t as b,f as C,h as r,c as u,n as ct,k as mt,i as f,d as p,r as a,e as Ot,A as At}from"./CtXwlho8.js";import{s as c}from"./BXc8M6y4.js";import{i as F}from"./yjFgoZ2z.js";import{e as Et,i as St}from"./DN_bdWMP.js";import{s as Ut}from"./CHkfRj1l.js";import{a as J,s as Ht}from"./CI9zuxJp.js";import{p as qt}from"./BEuqZ1rz.js";import{B as zt}from"./Dvm4Bl2G.js";import{E as Kt}from"./Dij6HiAt.js";import{L as Xt}from"./C1bW8zQ3.js";import{T as Yt,a as Gt,b as Jt}from"./BqrFf2JF.js";import{t as m}from"./D2OY9xdY.js";import{g as Mt}from"./BZmJWhnf.js";import"./Ip-blrGX.js";import"./GWRmNmWh.js";import{h as Zt}from"./BE9R_oLn.js";import"./BP9w7_RT.js";import"./C7UJxxoo.js";import{f as te,t as ee,r as re}from"./cq7hwzrg.js";import{w as ae}from"./D9pSO_rq.js";import{D as se}from"./CBuoHlZ0.js";import"./69_IOA4Y.js";import{i as oe}from"./D4D3ThYu.js";import{p as ie}from"./DdhuX4yd.js";import{I as ne}from"./Cey4-U3a.js";function M(V,w){vt(w,!1);let k=ie(w,"includesTaskQueueType",8);oe();const j=G(()=>k()?"checkmark":"close"),L=G(()=>k()?"text-blue-700":"text-primary"),N=G(()=>k()?m("common.yes"):m("common.no"));ne(V,{get name(){return t(j)},get class(){return t(L)},get title(){return t(N)}}),pt()}var de=b("<p> </p>"),le=b("<p> </p>"),ue=b('<td class="select-all break-all" data-testid="worker-identity"> </td> <td class="select-all break-all" data-testid="worker-build-id"><div class="flex items-center gap-2"> <!></div></td> <td class="select-all break-all" data-testid="worker-deployment"><!></td> <td class="hidden md:table-cell" data-testid="worker-last-access-time"> </td> <td data-testid="workflow-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="activity-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="nexus-poller"><div class="flex items-center justify-center"><!></div></td>',1),ce=b('<tr class="w-full"><td colspan="7"><!></td></tr>'),me=b('<caption class="sr-only" slot="caption"> </caption>'),ve=b('<th> </th> <th> </th> <th> </th> <th class="hidden md:table-cell"> </th> <th class="!text-center xl:w-48"> </th> <th class="!text-center xl:w-36"> </th> <th class="!text-center xl:w-36"> </th>',1),pe=b('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function Se(V,w){vt(w,!0);const[k,j]=Ht(),L=()=>J(ae,"$workflowRun",k),N=()=>J(ee,"$timeFormat",k),_t=()=>J(re,"$relativeTime",k),ft=o(()=>qt.params),wt=o(()=>t(ft).namespace),kt=o(()=>L().workflow),h=o(()=>Mt(t(kt),w.workers)),Z=o(()=>t(h).pollers),ht=o(()=>t(h).pinned),gt=o(()=>t(h).autoUpgrade),xt=o(()=>t(h).currentBuildId),yt=o(()=>t(h).currentDeployment),bt=o(()=>t(h).rampingBuildId),$t=o(()=>t(h).rampingDeployment),O=e=>{var l,s,i;const n=(s=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.deploymentName)!==null&&s!==void 0?s:(i=e==null?void 0:e.workerVersionCapabilities)===null||i===void 0?void 0:i.deploymentSeriesName;return n??""},A=e=>{var l,s,i;const n=(s=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.buildId)!==null&&s!==void 0?s:(i=e==null?void 0:e.workerVersionCapabilities)===null||i===void 0?void 0:i.buildId;return n??""},Tt=e=>t(tt)(e)?"Current":t(et)(e)?"Ramping":void 0,It=e=>t(tt)(e)?m("deployments.current"):t(et)(e)?m("deployments.ramping-percentage",{percentage:w.workers.versioningInfo.rampingVersionPercentage}):"",tt=o(()=>e=>O(e)===t(yt)&&A(e)===t(xt)),et=o(()=>e=>O(e)===t($t)&&A(e)===t(bt));var rt=pe(),E=C(rt),at=r(E),Pt=u(at);zt(Pt,{type:"count",children:(e,l)=>{ct();var s=mt();f(()=>{var i;return c(s,((i=t(Z))==null?void 0:i.length)||0)}),p(e,s)},$$slots:{default:!0}}),a(E);var st=u(E,2);Ut(st,()=>w.children??At);var ot=u(st,2);{var Bt=e=>{var l=de(),s=r(l,!0);a(l),f(i=>c(s,i),[()=>m("workers.viewing-pinned-build-ids")]),p(e,l)},Dt=(e,l)=>{{var s=i=>{var n=le(),d=r(n,!0);a(n),f(v=>c(d,v),[()=>m("workers.viewing-auto-upgrade-build-ids")]),p(i,n)};F(e,i=>{t(gt)&&i(s)},l)}};F(ot,e=>{t(ht)?e(Bt):e(Dt,!1)})}var Qt=u(ot,2);Yt(Qt,{class:"mb-6",fixed:!0,children:(e,l)=>{var s=Ot(),i=C(s);Et(i,17,()=>t(Z),St,(n,d)=>{const v=o(()=>O(t(d))),g=o(()=>A(t(d))),$=o(()=>Tt(t(d))),T=o(()=>It(t(d)));Jt(n,{"data-testid":"worker-row",children:(S,Q)=>{var W=ue(),x=C(W),U=r(x,!0);a(x);var y=u(x,2),R=r(y),I=r(R),H=u(I);{var q=_=>{se(_,{get status(){return t($)},get label(){return t(T)}})};F(H,_=>{t($)&&_(q)})}a(R),a(y);var P=u(y,2),z=r(P);{var K=_=>{const Lt=o(()=>Zt({namespace:t(wt),deployment:t(v)}));Xt(_,{get href(){return t(Lt)},children:(Nt,_e)=>{ct();var ut=mt();f(()=>c(ut,t(v))),p(Nt,ut)},$$slots:{default:!0}})};F(z,_=>{t(v)&&_(K)})}a(P);var B=u(P,2),X=r(B,!0);a(B);var D=u(B,2),it=r(D),Wt=r(it);const Rt=o(()=>t(d).taskQueueTypes.includes("WORKFLOW"));M(Wt,{get includesTaskQueueType(){return t(Rt)}}),a(it),a(D);var Y=u(D,2),nt=r(Y),Ct=r(nt);const Ft=o(()=>t(d).taskQueueTypes.includes("ACTIVITY"));M(Ct,{get includesTaskQueueType(){return t(Ft)}}),a(nt),a(Y);var dt=u(Y,2),lt=r(dt),Vt=r(lt);const jt=o(()=>t(d).taskQueueTypes.includes("NEXUS"));M(Vt,{get includesTaskQueueType(){return t(jt)}}),a(lt),a(dt),f(_=>{c(U,t(d).identity),c(I,`${t(g)??""} `),c(X,_)},[()=>te(t(d).lastAccessTime,N(),{relative:_t()})]),p(S,W)},$$slots:{default:!0}})},n=>{var d=ce(),v=r(d),g=r(v);const $=o(()=>m("workflows.workers-empty-state"));Kt(g,{get title(){return t($)}}),a(v),a(d),p(n,d)}),p(e,s)},$$slots:{default:!0,caption:(e,l)=>{var s=me(),i=r(s,!0);a(s),f(n=>c(i,n),[()=>m("workflows.workers-tab")]),p(e,s)},headers:(e,l)=>{Gt(e,{slot:"headers",children:(s,i)=>{var n=ve(),d=C(n),v=r(d,!0);a(d);var g=u(d,2),$=r(g,!0);a(g);var T=u(g,2),S=r(T,!0);a(T);var Q=u(T,2),W=r(Q,!0);a(Q);var x=u(Q,2),U=r(x,!0);a(x);var y=u(x,2),R=r(y,!0);a(y);var I=u(y,2),H=r(I,!0);a(I),f((q,P,z,K,B,X,D)=>{c(v,q),c($,P),c(S,z),c(W,K),c(U,B),c(R,X),c(H,D)},[()=>m("common.id"),()=>m("workers.buildId"),()=>m("deployments.deployment"),()=>m("workflows.last-accessed"),()=>m("workflows.workflow-task-handler"),()=>m("workflows.activity-handler"),()=>m("workflows.nexus-handler")]),p(s,n)},$$slots:{default:!0}})}}}),f(e=>c(at,`${e??""} `),[()=>m("workers.workers")]),p(V,rt),pt(),j()}export{Se as W};
