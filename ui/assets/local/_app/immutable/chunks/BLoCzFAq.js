import{r as E,a as d}from"./DW_YjHbn.js";const L=({activityPollers:u,nexusPollers:t,workflowPollers:n})=>{const m=(n==null?void 0:n.pollers)??[],s=(u==null?void 0:u.pollers)??[],T=(t==null?void 0:t.pollers)??[],Q=new Map,I=(a,p)=>{var g;if(a.identity){const c=Q.get(a.identity);c?(c.taskQueueTypes.push(p),(a==null?void 0:a.lastAccessTime)>((g=c==null?void 0:c.poller)==null?void 0:g.lastAccessTime)&&(c.poller=a)):Q.set(a.identity,{poller:a,taskQueueTypes:[p]})}};m.forEach(a=>I(a,"WORKFLOW")),s.forEach(a=>I(a,"ACTIVITY")),T.forEach(a=>I(a,"NEXUS"));const A=Array.from(Q.values()).map(({poller:a,taskQueueTypes:p})=>({...a,taskQueueTypes:p})),h=(u==null?void 0:u.versioningInfo)??(n==null?void 0:n.versioningInfo)??(t==null?void 0:t.versioningInfo),S=(u==null?void 0:u.taskQueueStatus)??(n==null?void 0:n.taskQueueStatus)??(t==null?void 0:t.taskQueueStatus);return{pollers:A,taskQueueStatus:S,versioningInfo:h}};async function f(u,t=fetch){const n=E("task-queue",u),m=await d(n,{request:t,params:{taskQueueType:"1"}}),s=await d(n,{request:t,params:{taskQueueType:"2"}}),T=await d(n,{request:t,params:{taskQueueType:"3"}});return L({activityPollers:s,nexusPollers:T,workflowPollers:m})}export{f as g};
