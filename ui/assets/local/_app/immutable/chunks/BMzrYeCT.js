import"./Bzak7iHL.js";import{p as wt,u as n,ag as B,ah as ot,g as e,t as j,i as o,c as a,s as x,r as s,n as Ht,k as xt,j as F,e as _,b as ht,f as st,a8 as gt,h as Yt,d as Re,o as V,q as We}from"./C-0kx8Rl.js";import{s as P,e as Be}from"./B-1TjF6E.js";import{i as U}from"./DIXBMONz.js";import{k as me}from"./B0kvq5Du.js";import{p as Wt,s as Bt,c as Zt,a as Nt}from"./B0Wc33k0.js";import{p as fe}from"./DXuD1FF0.js";import{a as Le}from"./DliSAU7O.js";import{B as Ft}from"./96HHLak6.js";import{T as de}from"./D7zMa2zU.js";import{t as r}from"./BXv1jDVW.js";import{C as Rt}from"./B47b57DJ.js";import{D as Ue,a as je}from"./CXSkpIAa.js";import{I as mt}from"./DPpomUHS.js";import{N as Ie}from"./BifXs6Ed.js";import{L as ct}from"./CGLMDN_1.js";import{s as $t}from"./BDfAQ6r3.js";import{r as te,a as ee}from"./CIBP7f3H.js";import{t as ye}from"./DHNhp-3A.js";import{r as ae,w as ze}from"./D3po6tj5.js";import{g as ie}from"./BduMvSVJ.js";import{z as pt,c as _t,d as Ot,w as qe,A as Qe}from"./2uWpc1Jl.js";import{M as pe}from"./DwtwrTdS.js";import{P as De}from"./vax7Mo4u.js";import{W as Ee}from"./rQ9pVa1K.js";import{A as Ke}from"./BEz0tgA7.js";import{B as Ve}from"./CqraL4jo.js";import{C as ue}from"./CjXSN14h.js";import{I as Ge}from"./BQ19dEFL.js";import{c as Je}from"./DdOilM5V.js";import{f as Mt,t as Xe,r as Ye,a as Ze}from"./BnZXuwac.js";import{c as Pe}from"./ByTIZu23.js";import{k as $e,l as ta}from"./BsatSevQ.js";import{o as ea}from"./C8ejR22J.js";const aa=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),ia=new Set(["maximumAttempts"]),ra=(c,t)=>c===0?r("workflows.no-expiration"):t,oa=(c,t)=>c?c-t:r("workflows.unlimited"),sa=c=>c||r("workflows.unlimited"),na=(c,t)=>c==="maximumAttempts"&&!t?r("workflows.unlimited"):t,ca=(c,t)=>{if(aa.has(t)&&typeof c[t]=="object"){for(const[u,m]of Object.entries(c[t]))ta(m)&&(ia.has(u)?c[`${t}${Pe(u)}`]=na(u,m):c[`${t}${Pe(u)}`]=m);delete c[t]}},wi=c=>{const t={};if(c.attributes)for(const[u,m]of Object.entries(c.attributes))$e(u,m)&&(t[u]=m),ca(t,u);return t},la=({date:c,now:t=Date.now(),negativeDefault:u})=>{if(!c)return"";const m=String(c);try{const f=(Number(new Date(m))-t)/1e3;return u!==void 0&&f<0?u:isNaN(f)?"":`${f.toFixed(0)}s`}catch{return""}},va=async({namespace:c,execution:t,id:u,reason:m,type:l,identity:f})=>{const g=te("activity.pause",{namespace:c});return ee(g,{options:{method:"POST",body:$t({execution:t,reason:m,id:u,type:l,...f&&{identity:f}})}})},da=async({namespace:c,execution:t,id:u,type:m,identity:l})=>{const f=te("activity.unpause",{namespace:c});return ee(f,{options:{method:"POST",body:$t({execution:t,id:u,type:m,...l&&{identity:l}})}})},ua=async({namespace:c,execution:t,id:u,type:m,resetHeartbeat:l,identity:f})=>{const g=te("activity.reset",{namespace:c});return ee(g,{options:{method:"POST",body:$t({execution:t,id:u,type:m,resetHeartbeat:l,...f&&{identity:f}})}})},ma=async({namespace:c,execution:t,id:u,type:m,activityOptions:l,identity:f})=>{const g=te("activity.update-options",{namespace:c});return ee(g,{options:{method:"POST",body:$t({execution:t,id:u,type:m,activityOptions:l,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts",...f&&{identity:f}})}})};var fa=j(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function ya(c,t){wt(t,!0);const[u,m]=Bt();var l,f,g,C,R,h,y,N,E,$,J,H,b,L;let k=Wt(t,"open",15),S=n(()=>t.activity.activityId),q=n(()=>t.activity.activityType),Q=B(ot((f=(l=t.activity.activityOptions)===null||l===void 0?void 0:l.taskQueue)===null||f===void 0?void 0:f.name)),z=B(ot(pt(String((g=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||g===void 0?void 0:g.scheduleToCloseTimeout)))),X=B(ot(pt(String((C=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||C===void 0?void 0:C.scheduleToStartTimeout)))),Y=B(ot(pt(String((R=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||R===void 0?void 0:R.startToCloseTimeout)))),w=B(ot(pt(String((h=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||h===void 0?void 0:h.heartbeatTimeout)))),G=B(ot((N=(y=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||y===void 0?void 0:y.retryPolicy)===null||N===void 0?void 0:N.maximumAttempts)),it=B(ot(($=(E=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||E===void 0?void 0:E.retryPolicy)===null||$===void 0?void 0:$.backoffCoefficient)),tt=B(ot(pt(String((H=(J=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||J===void 0?void 0:J.retryPolicy)===null||H===void 0?void 0:H.initialInterval)))),et=ot(pt(String((L=(b=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||b===void 0?void 0:b.retryPolicy)===null||L===void 0?void 0:L.maximumInterval))),Z=B(!1);const bt=n(()=>({taskQueue:{name:e(Q)},scheduleToCloseTimeout:_t(e(z)),scheduleToStartTimeout:_t(e(X)),startToCloseTimeout:_t(e(Y)),heartbeatTimeout:_t(e(w)),retryPolicy:{maximumAttempts:e(G),initialInterval:_t(e(tt)),backoffCoefficient:e(it),maximumInterval:_t(et)}})),Lt=ie(),kt=()=>{k(!1)},Ut=async ft=>{ft.preventDefault();try{await ma({namespace:t.namespace,execution:t.execution,id:e(Z)?void 0:e(S),type:e(Z)?e(q):void 0,activityOptions:e(bt),identity:Lt}),Zt(ae,Date.now()),ye.push({variant:"success",message:`Options for Activity ${e(S)} have been updated.`})}catch(lt){console.error("Error updating activity options:",lt),ye.push({variant:"error",message:`Options for Activity ${e(S)} have been failed to update: ${lt==null?void 0:lt.message}`,duration:5e3})}finally{kt()}},re=n(()=>r("common.close"));Ue(c,{get open(){return k()},onClick:kt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e(re)},class:"w-[480px]",children:(ft,lt)=>{je(ft,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(jt,_e)=>{var vt=fa(),Tt=o(vt),At=o(Tt);ct(At,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var zt=a(At,4),It=o(zt);const oe=n(()=>isNaN(Number(e(w))));mt(It,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(oe)},get value(){return e(w)},set value(M){x(w,M,!0)}});var Dt=a(It,2),se=o(Dt,!0);s(Dt),s(zt),s(Tt);var Pt=a(Tt,2),qt=o(Pt);ct(qt,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var Qt=a(qt,4);Ie(Qt,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(it)},set value(M){x(it,M,!0)}}),s(Pt);var yt=a(Pt,2),Et=o(yt);ct(Et,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var Kt=a(Et,4),Vt=o(Kt);const i=n(()=>isNaN(Number(e(tt))));mt(Vt,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(i)},get value(){return e(tt)},set value(M){x(tt,M,!0)}});var v=a(Vt,2),d=o(v,!0);s(v),s(Kt),s(yt);var O=a(yt,2),W=o(O);ct(W,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var p=a(W,4);Ie(p,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(G)},set value(M){x(G,M,!0)}}),s(O);var I=a(O,2),T=o(I);ct(T,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var D=a(T,4),A=o(D);const K=n(()=>isNaN(Number(e(z))));mt(A,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(K)},get value(){return e(z)},set value(M){x(z,M,!0)}});var nt=a(A,2),rt=o(nt,!0);s(nt),s(D),s(I);var dt=a(I,2),Ct=o(dt);ct(Ct,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var Gt=a(Ct,4),Jt=o(Gt);const ne=n(()=>isNaN(Number(e(X))));mt(Jt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(ne)},get value(){return e(X)},set value(M){x(X,M,!0)}});var Xt=a(Jt,2),Ce=o(Xt,!0);s(Xt),s(Gt),s(dt);var ce=a(dt,2),xe=o(ce);ct(xe,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var ge=a(xe,4),we=o(ge);const Se=n(()=>isNaN(Number(e(Y))));mt(we,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Se)},get value(){return e(Y)},set value(M){x(Y,M,!0)}});var he=a(we,2),Ne=o(he,!0);s(he),s(ge),s(ce);var le=a(ce,2),be=o(le);ct(be,{for:"task-queue-name",label:"Task Queue Name"});var Oe=a(be,2);mt(Oe,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e(Q)},set value(M){x(Q,M,!0)}}),s(le);var ke=a(le,2);const Me=n(()=>r("activities.apply-to-all-activity-types",{type:e(q)}));Rt(ke,{get label(){return e(Me)},get checked(){return e(Z)},set checked(M){x(Z,M,!0)}});var Te=a(ke,2),Ae=o(Te);Ft(Ae,{type:"button",variant:"ghost",size:"sm",$$events:{click:kt},children:(M,ve)=>{Ht();var ut=xt();F(St=>P(ut,St),[()=>r("common.cancel")]),_(M,ut)},$$slots:{default:!0}});var He=a(Ae,2);Ft(He,{type:"submit",variant:"primary",size:"sm",children:(M,ve)=>{Ht();var ut=xt();F(St=>P(ut,St),[()=>r("common.save")]),_(M,ut)},$$slots:{default:!0}}),s(Te),s(vt),F((M,ve,ut,St,Fe)=>{P(se,M),P(d,ve),P(rt,ut),P(Ce,St),P(Ne,Fe)},[()=>Ot(e(w)),()=>Ot(e(tt)),()=>Ot(e(z)),()=>Ot(e(X)),()=>Ot(e(Y))]),Be("submit",vt,Ut),_(jt,vt)},$$slots:{default:!0}})},$$slots:{default:!0}}),ht(),m()}var pa=j('<h3 slot="title"> </h3>'),_a=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function xa(c,t){wt(t,!0);const[u,m]=Bt();let l=Wt(t,"open",15),f=n(()=>t.activity.activityId),g=n(()=>t.activity.activityType),C=B(""),R=!1,h=B(""),y=B(!1);const N=ie(),E=()=>{l(!1),x(h,""),x(y,!1)},$=async()=>{await va({namespace:t.namespace,execution:t.execution,id:e(y)?void 0:e(f),reason:e(h),type:e(y)?e(g):void 0,identity:N}),Zt(ae,Date.now()),E()},J=n(()=>r("workflows.pause")),H=n(()=>r("common.cancel"));pe(c,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return R},get confirmText(){return e(J)},get cancelText(){return e(H)},confirmType:"destructive",get error(){return e(C)},set error(b){x(C,b,!0)},get open(){return l()},set open(b){l(b)},$$events:{cancelModal:E,confirmModal:$},$$slots:{title:(b,L)=>{var k=pa(),S=o(k,!0);s(k),F(q=>P(S,q),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(b,k)},content:(b,L)=>{var k=_a(),S=o(k),q=o(S,!0);s(S);var Q=a(S,2);const z=n(()=>r("common.reason-placeholder")),X=n(()=>r("common.reason"));mt(Q,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(z)},get label(){return e(X)},get value(){return e(h)},set value(G){x(h,G,!0)}});var Y=a(Q,2);const w=n(()=>r("activities.pause-all-activity-types",{type:e(g)}));Rt(Y,{get label(){return e(w)},get checked(){return e(y)},set checked(G){x(y,G,!0)}}),s(k),F(G=>P(q,G),[()=>r("activities.pause-modal-description")]),_(b,k)}}}),ht(),m()}var ga=j('<h3 slot="title"> </h3>'),wa=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ha(c,t){wt(t,!0);const[u,m]=Bt();let l=Wt(t,"open",15),f=n(()=>t.activity.activityId),g=n(()=>t.activity.activityType),C=B(""),R=!1,h=B(!1),y=B(!1);const N=ie(),E=()=>{l(!1),x(h,!1),x(y,!1)},$=async()=>{await ua({namespace:t.namespace,execution:t.execution,id:e(h)?void 0:e(f),resetHeartbeat:e(y),type:e(h)?e(g):void 0,identity:N}),Zt(ae,Date.now()),ye.push({variant:"success",message:r("activities.reset-success",{activityId:e(f)})}),E()},J=n(()=>r("workflows.reset")),H=n(()=>r("common.cancel"));pe(c,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return R},get confirmText(){return e(J)},get cancelText(){return e(H)},confirmType:"destructive",get error(){return e(C)},set error(b){x(C,b,!0)},get open(){return l()},set open(b){l(b)},$$events:{cancelModal:E,confirmModal:$},$$slots:{title:(b,L)=>{var k=ga(),S=o(k,!0);s(k),F(q=>P(S,q),[()=>r("activities.reset-modal-confirmation",{activityId:t.activity.id})]),_(b,k)},content:(b,L)=>{var k=wa(),S=o(k),q=o(S,!0);s(S);var Q=a(S,2);const z=n(()=>r("activities.apply-to-all-activity-types",{type:e(g)}));Rt(Q,{get label(){return e(z)},get checked(){return e(h)},set checked(w){x(h,w,!0)}});var X=a(Q,2);const Y=n(()=>r("activities.reset-heartbeat-details"));Rt(X,{get label(){return e(Y)},get checked(){return e(y)},set checked(w){x(y,w,!0)}}),s(k),F(w=>P(q,w),[()=>r("activities.reset-modal-description")]),_(b,k)}}}),ht(),m()}var ba=j('<h3 slot="title"> </h3>'),ka=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function Ta(c,t){wt(t,!0);const[u,m]=Bt();let l=Wt(t,"open",15),f=n(()=>t.activity.activityId),g=n(()=>t.activity.activityType),C=B(""),R=!1,h=B(!1);const y=ie(),N=()=>{l(!1),x(h,!1)},E=async()=>{await da({namespace:t.namespace,execution:t.execution,id:e(h)?void 0:e(f),type:e(h)?e(g):void 0,identity:y}),Zt(ae,Date.now()),N()},$=n(()=>r("workflows.unpause")),J=n(()=>r("common.cancel"));pe(c,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",get loading(){return R},get confirmText(){return e($)},get cancelText(){return e(J)},confirmType:"destructive",get error(){return e(C)},set error(H){x(C,H,!0)},get open(){return l()},set open(H){l(H)},$$events:{cancelModal:N,confirmModal:E},$$slots:{title:(H,b)=>{var L=ba(),k=o(L,!0);s(L),F(S=>P(k,S),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(H,L)},content:(H,b)=>{var L=ka(),k=o(L),S=o(k,!0);s(k);var q=a(k,2);const Q=n(()=>r("activities.unpause-all-activity-types",{type:e(g)}));Rt(q,{get label(){return e(Q)},get checked(){return e(h)},set checked(z){x(h,z,!0)}}),s(L),F(z=>P(S,z),[()=>r("activities.unpause-modal-description")]),_(H,L)}}}),ht(),m()}var Aa=j("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function Ia(c,t){wt(t,!0);let u=Wt(t,"class",3,"");const m=n(()=>fe.params),l=n(()=>e(m).namespace),f=n(()=>e(m).workflow),g=n(()=>e(m).run),C=n(()=>({workflowId:e(f),runId:e(g)}));let R=B(!1),h=B(!1),y=B(!1),N=B(!1);const E=async()=>{t.activity.paused?x(h,!0):x(R,!0)},$=()=>{x(y,!0)},J=()=>{x(N,!0)};var H=Aa(),b=st(H),L=o(b);const k=n(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");de(L,{bottomLeft:!0,width:200,get text(){return e(k)},children:(w,G)=>{const it=n(()=>t.activity.paused?"play":"pause");Ft(w,{variant:"secondary",size:"sm",get leadingIcon(){return e(it)},$$events:{click:E},children:(tt,et)=>{Ht();var Z=xt();F(bt=>P(Z,bt),[()=>t.activity.paused?r("workflows.unpause"):r("workflows.pause")]),_(tt,Z)},$$slots:{default:!0}})},$$slots:{default:!0}});var S=a(L,2);de(S,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(w,G)=>{Ft(w,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:J},children:(it,tt)=>{Ht();var et=xt();F(Z=>P(et,Z),[()=>r("common.update")]),_(it,et)},$$slots:{default:!0}})},$$slots:{default:!0}});var q=a(S,2);de(q,{bottom:!0,width:200,text:"Reset this Activity.",children:(w,G)=>{Ft(w,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:$},children:(it,tt)=>{Ht();var et=xt();F(Z=>P(et,Z),[()=>r("workflows.reset")]),_(it,et)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(b);var Q=a(b,2);xa(Q,{get namespace(){return e(l)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(R)},set open(w){x(R,w,!0)}});var z=a(Q,2);Ta(z,{get namespace(){return e(l)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(h)},set open(w){x(h,w,!0)}});var X=a(z,2);ha(X,{get namespace(){return e(l)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(y)},set open(w){x(y,w,!0)}});var Y=a(X,2);me(Y,()=>e(N),w=>{ya(w,{get namespace(){return e(l)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(N)},set open(G){x(N,G,!0)}})}),F(()=>Le(b,1,`flex items-center gap-2 ${u()??""}`)),_(c,H),ht()}const Da=(c,t,u)=>!c.disableWriteActions&&!t.namespaceWriteDisabled(u)&&!t.isActivityCommandsDisabled&&!c.activityCommandsDisabled,at=(c,t=gt,u=gt)=>{var m=Pa(),l=o(m),f=o(l,!0);s(l);var g=a(l,2),C=o(g);{var R=y=>{var N=xt();F(()=>P(N,u())),_(y,N)},h=y=>{var N=Yt(),E=st(N);Re(E,()=>u()??gt),_(y,N)};U(C,y=>{typeof u()=="string"||typeof u()=="number"?y(R):y(h,!1)})}s(g),s(m),F(()=>P(f,t())),_(c,m)};var Pa=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ca=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Sa=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Na=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Oa=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Ma=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Ha=j("<!> ",1),Fa=j('<p class="ml-1 text-sm text-secondary"> </p>'),Ra=j('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Wa=j("<!> <!> <!>",1),Ba=j("<!> <!>",1),La=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function hi(c,t){wt(t,!0);const[u,m]=Bt(),l=()=>Nt(ze,"$workflowRun",u),f=()=>Nt(L,"$coreUser",u),g=()=>Nt(Ze,"$timeFormat",u),C=()=>Nt(Ye,"$relativeTime",u),R=()=>Nt(Xe,"$timestampFormat",u),h=i=>{var v=Ca(),d=o(v),O=o(d,!0);s(d);var W=a(d,2);me(W,()=>t.activity.attempt,p=>{De(p,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:(T,D=gt)=>{const A=n(()=>r("common.copy-icon-title")),K=n(()=>r("common.copy-success-icon-title"));ue(T,{get content(){return D()},maxHeight:384,get copyIconTitle(){return e(A)},get copySuccessIconTitle(){return e(K)}})},$$slots:{default:!0}})}),s(v),F(p=>P(O,p),[()=>r("workflows.heartbeat-details")]),_(i,v)},y=i=>{var v=Oa(),d=o(v),O=o(d);{var W=T=>{var D=Sa(),A=st(D),K=o(A,!0);s(A);var nt=a(A,2);me(nt,()=>t.activity.attempt,rt=>{const dt=n(()=>ea(t.activity.lastFailure,"stackTrace"));De(rt,{get value(){return e(dt)},children:(Gt,Jt=gt)=>{const ne=n(()=>r("common.copy-icon-title")),Xt=n(()=>r("common.copy-success-icon-title"));ue(Gt,{get content(){return Jt()},maxHeight:384,get copyIconTitle(){return e(ne)},get copySuccessIconTitle(){return e(Xt)}})},$$slots:{default:!0}})}),F(rt=>P(K,rt),[()=>r("workflows.last-failure")]),_(T,D)};U(O,T=>{t.activity.lastFailure&&T(W)})}s(d);var p=a(d,2);{var I=T=>{var D=Na(),A=o(D),K=o(A,!0);s(A);var nt=a(A,2);const rt=n(()=>r("common.copy-icon-title")),dt=n(()=>r("common.copy-success-icon-title"));ue(nt,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(rt)},get copySuccessIconTitle(){return e(dt)}}),s(D),F(Ct=>P(K,Ct),[()=>r("common.stack-trace")]),_(T,D)};U(p,T=>{var D;(D=t.activity.lastFailure)!=null&&D.stackTrace&&T(I)})}s(v),_(i,v)},N=i=>{const v=n(()=>{var d;return(d=t.activity.lastFailure)!=null&&d.stackTrace?r("workflows.last-failure-with-stack-trace"):r("workflows.last-failure")});Ke(i,{get title(){return e(v)},children:We,$$slots:{default:(d,O)=>{const W=n(()=>O.open);var p=Yt(),I=st(p);{var T=D=>{y(D)};U(I,D=>{e(W)&&D(T)})}_(d,p)}}})},E=(i,v=gt)=>{var d=Ma(),O=o(d),W=o(O,!0);s(O);var p=a(O,2),I=o(p),T=a(I),D=o(T);s(T),s(p),s(d),F((A,K)=>{P(W,A),P(I,`${K??""} `),P(D,`(${v()??""})`)},[()=>r("workflows.next-retry"),()=>Mt(t.activity.scheduledTime,g(),{relative:C(),format:R(),relativeLabel:""})]),_(i,d)},$=i=>{var v=Ra(),d=o(v);const O=n(()=>e(H)?"danger":"default");Ve(d,{get type(){return e(O)},children:(I,T)=>{var D=Ha(),A=st(D);const K=n(()=>e(H)&&"font-bold text-red-400");Ge(A,{get class(){return`mr-1 ${e(K)??""}`},name:"retry"});var nt=a(A);F(rt=>P(nt,` ${t.activity.attempt??0} of ${rt??""}`),[()=>sa(t.activity.maximumAttempts)]),_(I,D)},$$slots:{default:!0}});var W=a(d,2);{var p=I=>{var T=Fa(),D=o(T);s(T),F(A=>P(D,`${A??""} remaining`),[()=>oa(t.activity.maximumAttempts,t.activity.attempt)]),_(I,T)};U(W,I=>{t.activity.maximumAttempts&&I(p)})}s(v),_(i,v)};var J;const H=n(()=>t.activity.attempt>1&&!!t.activity.lastFailure),b=n(()=>(J=l()===null||l()===void 0?void 0:l().workflow)===null||J===void 0?void 0:J.isRunning);let L=Je(),k=n(()=>Da(fe.data.settings,f(),fe.params.namespace)&&e(b));var S=La(),q=o(S),Q=o(q),z=o(Q);const X=n(()=>t.activity.paused?"Paused":t.activity.state);Ee(z,{get status(){return e(X)}});var Y=a(z,2),w=o(Y,!0);s(Y),s(Q);var G=a(Q,2);{var it=i=>{Ia(i,{get activity(){return t.activity},class:"justify-end"})};U(G,i=>{e(k)&&i(it)})}s(q);var tt=a(q,2),et=o(tt),Z=o(et),bt=V(()=>r("workflows.activity-id"));at(Z,()=>e(bt),()=>t.activity.activityId);var Lt=a(Z,2);{var kt=i=>{var v=Wa(),d=st(v),O=V(()=>r("activities.paused-by"));at(d,()=>e(O),()=>{var A,K;return((K=(A=t.activity.pauseInfo)==null?void 0:A.manual)==null?void 0:K.identity)||""});var W=a(d,2),p=V(()=>r("activities.paused-since")),I=V(()=>{var A;return Mt((A=t.activity.pauseInfo)==null?void 0:A.pauseTime,g(),{relative:C(),format:R()})});at(W,()=>e(p),()=>e(I));var T=a(W,2),D=V(()=>r("activities.pause-reason"));at(T,()=>e(D),()=>{var A,K;return((K=(A=t.activity.pauseInfo)==null?void 0:A.manual)==null?void 0:K.reason)||"-"}),_(i,v)};U(Lt,i=>{t.activity.paused&&t.activity.pauseInfo&&i(kt)})}var Ut=a(Lt,2),re=V(()=>r("workflows.attempt"));at(Ut,()=>e(re),()=>$);var ft=a(Ut,2);{var lt=i=>{var v=Yt();const d=n(()=>la({date:t.activity.scheduledTime,negativeDefault:""}));var O=st(v);{var W=p=>{E(p,()=>e(d))};U(O,p=>{e(d)&&p(W)})}_(i,v)};U(ft,i=>{t.activity.scheduledTime&&i(lt)})}var jt=a(ft,2);{var _e=i=>{var v=V(()=>r("workflows.last-attempt-completed-time")),d=V(()=>Mt(t.activity.lastAttemptCompleteTime,g(),{relative:C(),format:R()}));at(i,()=>e(v),()=>e(d))};U(jt,i=>{t.activity.lastAttemptCompleteTime&&i(_e)})}var vt=a(jt,2);{var Tt=i=>{var v=V(()=>r("workflows.retry-expiration")),d=V(()=>ra(t.activity.maximumAttempts,qe(Qe({start:Date.now(),end:t.activity.expirationTime}))));at(i,()=>e(v),()=>e(d))};U(vt,i=>{t.activity.expirationTime&&i(Tt)})}var At=a(vt,2);{var zt=i=>{var v=V(()=>r("workflows.last-heartbeat")),d=V(()=>Mt(t.activity.lastHeartbeatTime,g(),{relative:C(),format:R()}));at(i,()=>e(v),()=>e(d))};U(At,i=>{t.activity.lastHeartbeatTime&&i(zt)})}var It=a(At,2);{var oe=i=>{var v=V(()=>r("workflows.last-started-time")),d=V(()=>Mt(t.activity.lastStartedTime,g(),{relative:C(),format:R()}));at(i,()=>e(v),()=>e(d))};U(It,i=>{t.activity.lastStartedTime&&i(oe)})}var Dt=a(It,2);{var se=i=>{var v=V(()=>r("workflows.last-worker-identity"));at(i,()=>e(v),()=>t.activity.lastWorkerIdentity)};U(Dt,i=>{t.activity.lastWorkerIdentity&&i(se)})}var Pt=a(Dt,2);{var qt=i=>{var v=Ba(),d=st(v);{var O=I=>{var T=V(()=>r("workflows.priority"));at(I,()=>e(T),()=>t.activity.priority.priorityKey)};U(d,I=>{t.activity.priority.priorityKey&&I(O)})}var W=a(d,2);{var p=I=>{var T=V(()=>r("workflows.fairness"));at(I,()=>e(T),()=>t.activity.priority.fairnessKey)};U(W,I=>{t.activity.priority.fairnessKey&&I(p)})}_(i,v)};U(Pt,i=>{t.activity.priority&&i(qt)})}s(et);var Qt=a(et,2),yt=o(Qt);{var Et=i=>{var v=Yt(),d=st(v);{var O=p=>{N(p)},W=p=>{y(p)};U(d,p=>{t.totalPending>20?p(O):p(W,!1)})}_(i,v)};U(yt,i=>{e(H)&&i(Et)})}var Kt=a(yt,2);{var Vt=i=>{h(i)};U(Kt,i=>{t.activity.heartbeatDetails&&i(Vt)})}s(Qt),s(tt),s(S),F(()=>P(w,t.activity.activityType)),_(c,S),ht(),m()}export{hi as P,wi as f,la as t};
