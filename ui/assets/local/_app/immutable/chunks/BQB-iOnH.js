import"./CWj6FrbW.js";import{o as C}from"./CfXw_P7u.js";import{p as P,at as b,au as _,s as x,g as r,i as E,c as T,d as U,e as V,b as D}from"./B6CF0p-B.js";import{p as I,a as l,s as W}from"./BrOjBIf0.js";import{p as w}from"./BStS81yP.js";import{a as B}from"./DHGlOZyE.js";import{c as M,d as j}from"./iLtJ8eJU.js";import{a as q,b as z,g as F}from"./C7hdajd3.js";import{s as u}from"./ikbOq2O5.js";function X(m,e){P(e,!0);const t=()=>l(w,"$page",i),g=()=>l(B,"$authUser",i),[i,v]=W();let a=I(e,"key",3,""),y=a()&&(!(e.value===null||e.value===void 0)&&e.value[a()])?e.value[a()]:e.value,d=b(_(u(y)));C(()=>{f(e.value)});const f=async h=>{var n;const k={...t().data.settings,codec:{...(n=t().data.settings)===null||n===void 0?void 0:n.codec,endpoint:F(t().data.settings),passAccessToken:z(t().data.settings),includeCredentials:q(t().data.settings)}};try{const A=await M(h,t().params.namespace,k,g().accessToken),s=j(A);let o=a()&&(s==null?void 0:s[a()])?s[a()]:s;Array.isArray(o)&&o.length===1&&(o=o[0]),x(d,u(o),!0),e.onDecode&&e.onDecode(r(d))}catch{console.error("Could not decode payloads")}};var c=E(),p=T(c);U(p,()=>e.children,()=>r(d)),V(m,c),D(),v()}export{X as P};
