import"./CWj6FrbW.js";import{o as ha}from"./DsVF0eUi.js";import{p as Re,f as R,j as o,n as ve,k as ee,t as S,e as d,h as m,r as n,a9 as Q,g as e,u as a,b as He,i as ye,c as K,d as wa,l as lt,s as Se,m as Ye,L as $,a as wt,G as Ee,q as qt,aP as mt,o as Rt,ao as ft,al as Ht,am as ka}from"./CckrFwdx.js";import{s as E,d as ba,e as jt}from"./_IQD3yTx.js";import{i as w}from"./CoMawi-e.js";import{e as Ve,i as kt}from"./BTEtt5uP.js";import{c as yt,a as $e,s as gt}from"./CjYTZKiB.js";import{s as bt,a as Ie,l as ct,p as J,b as _t}from"./BioCYJcK.js";import{p as Be}from"./DiaoEa26.js";import{c as Ta,B as Ue}from"./DlLJhG5Q.js";import{C as qe}from"./B5ye1DE1.js";import{I as ht}from"./tBOn7xqW.js";import{L as We}from"./BjTXDc0n.js";import{T as pt}from"./Bf95Vmcc.js";import{t as _}from"./DEjs8ZrU.js";import{b as Wt,i as Z,e as Ia,c as Ea,d as Pa}from"./DIclM5HE.js";import{i as Aa}from"./CTegDgpK.js";import{a as Sa}from"./Bp7uNEFS.js";import{f as Ze,t as Kt,r as Qt,a as Xt}from"./DBTYq7FH.js";import{c as Ca,d as Fa}from"./Dvuc0nBT.js";import{a as La,b as Ma,g as Oa}from"./bI0jWfqa.js";import{c as Da,f as Ra,d as it,e as Ha,h as ja,j as Na,k as Ga,l as za}from"./BQGNiNO3.js";import{g as Je,h as Pe,F as Ba}from"./BKmCo86e.js";import{f as et,s as Jt}from"./ByTIZu23.js";import{t as Yt,f as Zt,P as Va}from"./CQewvGJl.js";import{n as Nt}from"./EZHNhN5g.js";import{c as Gt,k as Ua,l as qa,a as Wa,b as zt}from"./DGYqaFe3.js";import"./DAcYyk2F.js";import"./Bao9kpNA.js";import"./Dip-gjWQ.js";import"./BUApaBEI.js";import"./Dk2sa4cb.js";import{s as Bt}from"./DSbgyoV1.js";import{C as Ae}from"./AoLe9iY8.js";import{o as Ka}from"./C8ejR22J.js";import{T as $t}from"./DYFacKo_.js";import{g as ea}from"./CVH0kANz.js";import"./69_IOA4Y.js";import{i as Tt,t as vt}from"./ebNgFJjp.js";import{p as Qa}from"./BDmH61WB.js";import{M as ta}from"./DeVEzG3o.js";import{P as st}from"./cyr476x1.js";const nt=6,Cn={height:nt*4,gutter:nt*8,radius:nt*1.5,fontSizeRatio:nt*4},Fn={height:32,radius:4},Xa={workflow:"workflow",signal:"signal",activity:"activity",nexus:"nexus",timer:"retention","local-activity":"feather","child-workflow":"relationship",update:"update",other:"terminal"},Ln=(i,t,r,s,u)=>{const{radius:f}=u,c=i[0],g=i[i.length-1];let h=!1,k="start",v=0;const x=c>1/2*r;let I=!x&&g<2/3*r&&!s;x&&(k="end"),I&&(v=i.indexOf(g));const F=1.5*f;let y=I?g+F:c-F;if(!I&&!x&&(h=!0,I=!0,y=c+F,i.length===2&&s&&i[1]-i[0]<r-i[1]&&(v=1,y=i[1]+F),i.length>2)){const P=i[1]-i[0];i[2]-i[1]>P&&(v=1,y=i[1]+F)}return{textPosition:[y,t],textIndex:v,textAnchor:k,backdrop:h}},Mn=(i,t)=>{const r=t.find(u=>u.eventIds.has(i.id));return r?Array.from(r.eventIds).indexOf(i.id)===1&&r.eventList.length===3:!1},xt=(i,t)=>parseInt(i)===parseInt(t)-1,Ja=i=>{const t=Array.from(i.eventIds);return t.length===1?!0:t.length===2?xt(t[0],t[1]):t.length===3?xt(t[0],t[1])&&xt(t[1],t[2]):!1},Ya=(i,t)=>{const r=Wt(t,i);if(!r)return 0;if(r.level!==void 0)return r.level;const s=t.filter(c=>c.isPending&&c.id!==r.id).filter(c=>parseInt(c.initialEvent.id)<parseInt(r.initialEvent.id)),u=t.filter(c=>c.eventList.length>1&&!c.isPending&&c.id!==r.id).filter(c=>parseInt(c.initialEvent.id)<parseInt(r.initialEvent.id)).filter(c=>parseInt(c.lastEvent.id)>parseInt(r.initialEvent.id)),f=[...s,...u];return!f.length&&Ja(r)&&(r.level=0),r.level=f.length+1,r.level},On=(i,t,r,s,u)=>{const f=Wt(r,t);let c=0,g=0;if(!f)return{nextDistance:c,offset:g};if(f.eventList.length===1&&!f.isPending)return{nextDistance:c,offset:g};const h=Je(t)?f.eventList.indexOf(t):-1,k=Je(t)?f.eventList[h+1]:void 0;if((!Je(t)||t.category!=="workflow")&&(g=Ya(t,r)),!k&&!f.isPending)return{nextDistance:c,offset:g};let v=0;k&&Je(t)?v=parseInt(k.id)-parseInt(t.id):f.isPending&&Je(t)&&(v=i.length-parseInt(t.id)+2);const x=v*s;return c=u==="ascending"?x:-x,{nextDistance:c,offset:g}},Vt=async(i,t)=>{var c,g,h,k,v,x,I,F,y,O,P;if(!("eventType"in i)||!Pe(i))return;const{namespace:r,settings:s,accessToken:u}=t,f={...s,codec:{...s==null?void 0:s.codec,endpoint:Oa(s),passAccessToken:Ma(s),includeCredentials:La(s)}};try{const H=await Ca(i.attributes,r,f,u),L=((h=(g=(c=i.markerRecordedEventAttributes)==null?void 0:c.details)==null?void 0:g.data)==null?void 0:h.payloads)||((x=(v=(k=i.markerRecordedEventAttributes)==null?void 0:k.details)==null?void 0:v.type)==null?void 0:x.payloads)||[];if(!(L!=null&&L.length))return;const b=Fa(H),G=(P=((F=(I=b==null?void 0:b.details)==null?void 0:I.data)==null?void 0:F.payloads)||((O=(y=b==null?void 0:b.details)==null?void 0:y.type)==null?void 0:O.payloads))==null?void 0:P[0],z=Da(G);if(z)return Ra("ActivityType",z)}catch(H){console.error("Failed to decode local activity type:",H)}},Dn=i=>{if("eventList"in i)return i.eventList.find(Pe);if(Pe(i))return i},Za=Ta(["whitespace-nowrap font-semibold md:text-base flex items-center gap-0.5"],{variants:{category:{workflow:"text-blue-700 dark:text-blue-400",activity:"text-purple-600 dark:text-purple-500","child-workflow":"text-cyan-600",timer:"text-yellow-600 dark:text-yellow-400",signal:"text-pink-600 dark:text-pink-400",update:"text-blue-600 dark:text-blue-400",other:"text-slate-700 dark:text-slate-300",nexus:"text-indigo-600 dark:text-indigo-400","local-activity":"text-slate-700 dark:text-slate-300",default:"text-purple-600 dark:text-purple-500"}}}),Te=(i,t=Q,r=Q)=>{var s=er(),u=o(s),f=o(u,!0);n(u);var c=m(u,2),g=o(c);{var h=v=>{var x=ee();S(()=>E(x,r())),d(v,x)},k=v=>{var x=ye(),I=K(x);wa(I,()=>r()??Q),d(v,x)};w(g,v=>{typeof r()=="string"||typeof r()=="number"?v(h):v(k,!1)})}n(c),n(s),S(()=>E(f,t())),d(i,s)};var $a=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),er=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),tr=R("<!> ",1),ar=R('<p class="text-sm text-secondary/80"> </p> <!>',1),rr=R('<p class="text-sm text-secondary/80"> </p> <!>',1),nr=R('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),or=R('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),ir=R('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),sr=R('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function lr(i,t){Re(t,!0);const r=()=>Ie(Xt,"$timeFormat",f),s=()=>Ie(Qt,"$relativeTime",f),u=()=>Ie(Kt,"$timestampFormat",f),[f,c]=bt(),g=(l,C=Q)=>{var j=$a(),ie=o(j),se=o(ie,!0);n(ie);var B=m(ie,2),q=o(B),_e=m(q),pe=o(_e);n(_e),n(B),n(j),S((me,le)=>{E(se,me),E(q,`${le??""} `),E(pe,`(${C()??""})`)},[()=>_("workflows.next-retry"),()=>Ze(t.operation.nextAttemptScheduleTime,r(),{relative:s(),format:u(),relativeLabel:""})]),d(l,j)},h=l=>{{let C=a(()=>e(v)?"danger":"default");Ue(l,{class:"mr-1",get type(){return e(C)},children:(j,ie)=>{var se=tr(),B=K(se);{let _e=a(()=>e(v)&&"font-bold text-red-400");ht(B,{get class(){return`mr-1 ${e(_e)??""}`},name:"retry"})}var q=m(B);S(()=>E(q,` ${t.operation.attempt??0??""}`)),d(j,se)},$$slots:{default:!0}})}},k=l=>{var C=nr(),j=o(C),ie=o(j);{var se=pe=>{var me=ar(),le=K(me),Qe=o(le,!0);n(le);var Me=m(le,2);{let be=a(()=>Bt(Ka(t.operation.lastAttemptFailure,"stackTrace"))),Oe=a(()=>_("common.copy-icon-title")),Xe=a(()=>_("common.copy-success-icon-title"));Ae(Me,{get content(){return e(be)},maxHeight:384,get copyIconTitle(){return e(Oe)},get copySuccessIconTitle(){return e(Xe)}})}S(be=>E(Qe,be),[()=>_("workflows.last-failure")]),d(pe,me)};w(ie,pe=>{t.operation.lastAttemptFailure&&pe(se)})}n(j);var B=m(j,2),q=o(B);{var _e=pe=>{var me=rr(),le=K(me),Qe=o(le,!0);n(le);var Me=m(le,2);{let be=a(()=>_("common.copy-icon-title")),Oe=a(()=>_("common.copy-success-icon-title"));Ae(Me,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(be)},get copySuccessIconTitle(){return e(Oe)}})}S(be=>E(Qe,be),[()=>_("common.stack-trace")]),d(pe,me)};w(q,pe=>{var me;(me=t.operation.lastAttemptFailure)!=null&&me.stackTrace&&pe(_e)})}n(B),n(C),d(l,C)},v=a(()=>t.operation.attempt>1);var x=sr(),I=o(x),F=o(I),y=o(F);Ue(y,{children:(l,C)=>{ve();var j=ee();S(()=>E(j,t.operation.state)),d(l,j)},$$slots:{default:!0}});var O=m(y,2),P=o(O,!0);n(O),n(F),n(I);var H=m(I,2),L=o(H),b=o(L);{var G=l=>{{let C=a(()=>_("nexus.endpoint"));Te(l,()=>e(C),()=>t.operation.endpoint)}};w(b,l=>{t.operation.endpoint&&l(G)})}var z=m(b,2);{var W=l=>{{let C=a(()=>_("nexus.service"));Te(l,()=>e(C),()=>t.operation.service)}};w(z,l=>{t.operation.service&&l(W)})}var U=m(z,2);{var V=l=>{{let C=a(()=>_("nexus.operation"));Te(l,()=>e(C),()=>t.operation.operation)}};w(U,l=>{t.operation.operation&&l(V)})}var te=m(U,2);{var oe=l=>{{let C=a(()=>_("nexus.operation-token"));Te(l,()=>e(C),()=>t.operation.operationToken)}};w(te,l=>{t.operation.operationToken&&l(oe)})}var he=m(te,2);{let l=a(()=>_("workflows.attempt"));Te(he,()=>e(l),()=>h)}var M=m(he,2);{var D=l=>{const C=a(()=>Yt({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var j=ye(),ie=K(j);{var se=B=>{g(B,()=>e(C))};w(ie,B=>{e(C)&&B(se)})}d(l,j)};w(M,l=>{t.operation.nextAttemptScheduleTime&&l(D)})}var T=m(M,2);{var ae=l=>{{let C=a(()=>_("workflows.last-attempt-completed-time")),j=a(()=>Ze(t.operation.lastAttemptCompleteTime,r(),{relative:s(),format:u()}));Te(l,()=>e(C),()=>e(j))}};w(T,l=>{t.operation.lastAttemptCompleteTime&&l(ae)})}var Y=m(T,2);{var je=l=>{{let C=a(()=>_("workflows.schedule-event-id")),j=a(()=>String(t.operation.scheduledEventId));Te(l,()=>e(C),()=>e(j))}};w(Y,l=>{t.operation.scheduledEventId&&l(je)})}var Ce=m(Y,2);{var Fe=l=>{{let C=a(()=>_("workflows.scheduled-time")),j=a(()=>Ze(t.operation.scheduledTime,r(),{relative:s(),format:u()}));Te(l,()=>e(C),()=>e(j))}};w(Ce,l=>{t.operation.scheduledTime&&l(Fe)})}var Ke=m(Ce,2);{var de=l=>{{let C=a(()=>_("workflows.schedule-to-close-timeout"));Te(l,()=>e(C),()=>t.operation.scheduleToCloseTimeout)}};w(Ke,l=>{t.operation.scheduleToCloseTimeout&&l(de)})}n(L);var ue=m(L,2),ge=o(ue);{var Le=l=>{k(l)};w(ge,l=>{e(v)&&l(Le)})}var we=m(ge,2);{var tt=l=>{var C=or(),j=o(C),ie=o(j,!0);n(j);var se=m(j,2);{let B=a(()=>_("common.copy-icon-title")),q=a(()=>_("common.copy-success-icon-title"));Ae(se,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(B)},get copySuccessIconTitle(){return e(q)}})}n(C),S(B=>E(ie,B),[()=>_("nexus.blocked-reason")]),d(l,C)};w(we,l=>{t.operation.blockedReason&&l(tt)})}var dt=m(we,2);{var at=l=>{var C=ir(),j=o(C),ie=o(j,!0);n(j);var se=m(j,2);{let B=a(()=>Bt(t.operation.cancellationInfo)),q=a(()=>_("common.copy-icon-title")),_e=a(()=>_("common.copy-success-icon-title"));Ae(se,{language:"text",get content(){return e(B)},get copyIconTitle(){return e(q)},get copySuccessIconTitle(){return e(_e)}})}n(C),S(B=>E(ie,B),[()=>_("nexus.cancellation-info")]),d(l,C)};w(dt,l=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&l(at)})}n(ue),n(H),n(x),S(l=>E(P,l),[()=>_("workflows.pending-nexus-operation")]),d(i,x),He(),c()}function aa(i,t){const r=ct(t,["children","$$slots","$$events","$$legacy"]),s=ct(r,["value","attributes","type"]);Re(t,!1);const u=()=>Ie(Qa,"$page",f),[f,c]=bt(),g=Ye(),h=Ye(),k=Ye();let v=J(t,"value",8),x=J(t,"attributes",8),I=J(t,"type",8);function F(y,O,P,H,L){return L==="execution"?Gt({namespace:y,workflow:O,run:H}):L==="task-queue"?Ua({namespace:y,queue:H}):L==="child-workflow"?Gt({namespace:y,workflow:P.workflowExecutionWorkflowId,run:P.workflowExecutionRunId}):L==="nexus-endpoint"?qa(H):""}lt(()=>(e(g),e(h),u()),()=>{(y=>{Se(g,y.workflow),Se(h,y.namespace)})(u().params)}),lt(()=>(e(h),e(g),$(x()),$(v()),$(I())),()=>{Se(k,F(e(h),e(g),x(),v(),I()))}),wt(),Tt(),We(i,{get class(){return $(s),Ee(()=>s.class)},get href(){return e(k)},children:(y,O)=>{ve();var P=ee();S(()=>E(P,v())),d(y,P)},$$slots:{default:!0}}),He(),c()}const cr=(i,t=Q)=>{const r=a(()=>ea(t())),s=a(()=>{var h;return((h=e(r).split("workflows/"))==null?void 0:h[1])||e(r)});var u=gr(),f=o(u),c=o(f,!0);n(f);var g=m(f,2);{let h=a(()=>_("common.copy-icon-title")),k=a(()=>_("common.copy-success-icon-title"));qe(g,{get copyIconTitle(){return e(h)},get copySuccessIconTitle(){return e(k)},get content(){return e(s)},children:(v,x)=>{We(v,{get href(){return e(r)},class:"whitespace-pre-line",children:(I,F)=>{ve();var y=ee();S(()=>E(y,e(s))),d(I,y)},$$slots:{default:!0}})},$$slots:{default:!0}})}n(u),S(h=>E(c,h),[()=>_("nexus.link")]),d(i,u)},vr=(i,t=Q)=>{const r=a(()=>Wa({namespace:t().workflowEvent.namespace}));var s=_r(),u=o(s),f=o(u,!0);n(u);var c=m(u,2);{let g=a(()=>_("common.copy-icon-title")),h=a(()=>_("common.copy-success-icon-title"));qe(c,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(h)},get content(){return t().workflowEvent.namespace},children:(k,v)=>{We(k,{get href(){return e(r)},class:"whitespace-pre-line",children:(x,I)=>{ve();var F=ee();S(()=>E(F,t().workflowEvent.namespace)),d(x,F)},$$slots:{default:!0}})},$$slots:{default:!0}})}n(s),S(g=>E(f,g),[()=>_("nexus.link-namespace")]),d(i,s)},dr=(i,t=Q)=>{var r=ye(),s=K(r);Ve(s,17,t,kt,(u,f,c,g)=>{var h=pr(),k=K(h);cr(k,()=>e(f));var v=m(k,2);vr(v,()=>e(f)),d(u,h)}),d(i,r)},ur=(i,t=Q)=>{var r=xr(),s=m(o(r),2),u=o(s);{let f=a(()=>_("events.decode-failed"));ta(u,{get value(){return t()},get fallback(){return e(f)},children:qt,$$slots:{default:(c,g)=>{const h=a(()=>g.decodedValue);ve();var k=ee();S(()=>E(k,e(h))),d(c,k)}}})}n(s),n(r),d(i,r)},mr=(i,t=Q,r=Q)=>{const s=a(()=>Na(r())),u=a(()=>ja(e(s)));var f=hr(),c=K(f),g=o(c),h=o(g,!0);n(g);var k=m(g,2);{var v=y=>{st(y,{get value(){return r()},key:"payloads",children:(P,H=Q)=>{{let L=a(()=>_("common.copy-icon-title")),b=a(()=>_("common.copy-success-icon-title"));Ae(P,{get content(){return H()},maxHeight:384,get copyIconTitle(){return e(L)},get copySuccessIconTitle(){return e(b)}})}},$$slots:{default:!0}})},x=y=>{var O=ye(),P=K(O);{var H=b=>{{const G=(W,U=Q)=>{{let V=a(()=>_("common.copy-icon-title")),te=a(()=>_("common.copy-success-icon-title"));Ae(W,{get content(){return U()},maxHeight:384,get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(te)}})}};let z=a(()=>({searchAttributes:e(s)}));st(b,{key:"searchAttributes",get value(){return e(z)},children:G,$$slots:{default:!0}})}},L=b=>{st(b,{get value(){return e(s)},children:(z,W=Q)=>{{let U=a(()=>_("common.copy-icon-title")),V=a(()=>_("common.copy-success-icon-title"));Ae(z,{get content(){return W()},maxHeight:384,get copyIconTitle(){return e(U)},get copySuccessIconTitle(){return e(V)}})}},$$slots:{default:!0}})};w(P,b=>{t()==="searchAttributes"?b(H):b(L,!1)},!0)}d(y,O)};w(k,y=>{var O;(O=r())!=null&&O.payloads?y(v):y(x,!1)})}n(c);var I=m(c,2);{var F=y=>{var O=yr(),P=o(O),H=o(P,!0);n(P);var L=m(P,2);{let b=a(()=>_("common.copy-icon-title")),G=a(()=>_("common.copy-success-icon-title"));Ae(L,{get content(){return e(u)},language:"text",maxHeight:384,get copyIconTitle(){return e(b)},get copySuccessIconTitle(){return e(G)}})}n(O),S(b=>E(H,b),[()=>_("workflows.call-stack-tab")]),d(y,O)};w(I,y=>{e(u)&&y(F)})}S(y=>E(h,y),[()=>et(t())]),d(i,f)},fr=(i,t=Q,r=Q)=>{var s=kr(),u=o(s),f=o(u,!0);n(u);var c=m(u,2),g=o(c);{var h=v=>{$t(v,{get dateTime(){return r()}})},k=v=>{var x=ee();S(()=>E(x,r())),d(v,x)};w(g,v=>{Ha(t())?v(h):v(k,!1)})}n(c),n(s),S(v=>E(f,v),[()=>et(t())]),d(i,s)};var gr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),_r=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),pr=R("<!> <!>",1),xr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),yr=R('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),hr=R('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),wr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),kr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),br=R('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),Tr=R('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Ut(i,t){Re(t,!0);const r=(M,D=Q,T=Q)=>{var ae=wr(),Y=o(ae),je=o(Y,!0);n(Y);var Ce=m(Y,2);{let Fe=a(()=>_("common.copy-icon-title")),Ke=a(()=>_("common.copy-success-icon-title")),de=a(()=>String(T()));qe(Ce,{get copyIconTitle(){return e(Fe)},get copySuccessIconTitle(){return e(Ke)},get content(){return e(de)},children:(ue,ge)=>{{let Le=a(()=>String(T())),we=a(()=>it(D(),e(u)));aa(ue,{get value(){return e(Le)},get attributes(){return e(u)},get type(){return e(we)},class:"whitespace-pre-line"})}},$$slots:{default:!0}})}n(ae),S(Fe=>E(je,Fe),[()=>et(D())]),d(M,ae)},s=a(()=>Pe(t.event)?_("events.category.local-activity"):Jt(t.event.name)),u=a(()=>Zt(t.event)),f=a(()=>Object.entries(e(u))),c=a(()=>e(f).filter(([M,D])=>typeof D=="object"&&Object.keys(D).length>0)),g=a(()=>e(f).filter(([M,D])=>it(M,e(u))!=="none")),h=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),k=a(()=>e(f).filter(([M,D])=>typeof D!="object"&&it(M,e(u))==="none"&&!e(h).includes(M)&&(M!=="namespace"||M==="namespace"&&Be.params.namespace!==D)));var v=Tr(),x=o(v),I=o(x),F=o(I),y=o(F,!0);n(F);var O=m(F,2),P=o(O,!0);n(O),n(I);var H=m(I,2);$t(H,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),n(x);var L=m(x,2),b=o(L),G=o(b);{var z=M=>{dr(M,()=>t.event.links)};w(G,M=>{var D,T;(T=(D=t.event)==null?void 0:D.links)!=null&&T.length&&M(z)})}var W=m(G,2);{var U=M=>{ur(M,()=>t.event.userMetadata.summary)};w(W,M=>{var D,T;(T=(D=t.event)==null?void 0:D.userMetadata)!=null&&T.summary&&M(U)})}var V=m(W,2);Ve(V,17,()=>e(k),([M,D])=>M,(M,D)=>{var T=a(()=>mt(e(D),2));fr(M,()=>e(T)[0],()=>e(T)[1])});var te=m(V,2);Ve(te,17,()=>e(g),([M,D])=>M,(M,D)=>{var T=a(()=>mt(e(D),2));r(M,()=>e(T)[0],()=>e(T)[1])}),n(b);var oe=m(b,2);{var he=M=>{var D=br();Ve(D,21,()=>e(c),([T,ae])=>T,(T,ae)=>{var Y=a(()=>mt(e(ae),2));mr(T,()=>e(Y)[0],()=>e(Y)[1])}),n(D),d(M,D)};w(oe,M=>{e(c).length&&M(he)})}n(L),n(v),S(()=>{E(y,t.event.id),E(P,e(s))}),d(i,v),He()}var Ir=R('<div class="flex flex-col overflow-hidden"><!> <!></div>');function Er(i,t){Re(t,!0);let r=J(t,"group",3,void 0),s=J(t,"event",3,void 0);const u=a(()=>(r()===null||r()===void 0?void 0:r().pendingActivity)||(r()===null||r()===void 0?void 0:r().pendingNexusOperation)),f=a(()=>r()&&(r().eventList.length>1||e(u)));var c=ye(),g=K(c);{var h=v=>{var x=Ir(),I=o(x);{var F=P=>{Va(P,{get activity(){return r().pendingActivity}})},y=P=>{var H=ye(),L=K(H);{var b=G=>{lr(G,{get operation(){return r().pendingNexusOperation}})};w(L,G=>{var z;(z=r())!=null&&z.pendingNexusOperation&&G(b)},!0)}d(P,H)};w(I,P=>{var H;(H=r())!=null&&H.pendingActivity?P(F):P(y,!1)})}var O=m(I,2);Ve(O,17,()=>r().eventList,kt,(P,H)=>{Ut(P,{get event(){return e(H)}})}),n(x),d(v,x)},k=v=>{var x=ye(),I=K(x);{var F=y=>{Ut(y,{get event(){return s()}})};w(I,y=>{s()&&y(F)},!0)}d(v,x)};w(g,v=>{e(f)?v(h):v(k,!1)})}d(i,c),He()}var Pr=R('<p class="whitespace-nowrap text-right text-xs"> </p>'),Ar=R('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),Sr=R('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),Cr=R('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function ot(i,t){const r=ct(t,["children","$$slots","$$events","$$legacy"]);Re(t,!1);const s=Ye();let u=J(t,"key",8),f=J(t,"value",8),c=J(t,"attributes",8),g=J(t,"showKey",8,!0);lt(()=>($(u()),$(c())),()=>{Se(s,it(u(),c()))}),wt(),Tt();var h=ye(),k=K(h);{var v=x=>{var I=Cr(),F=o(I);{var y=L=>{var b=Pr(),G=o(b,!0);n(b),S(z=>E(G,z),[()=>($(et),$(u()),Ee(()=>et(u())))]),d(L,b)};w(F,L=>{g()&&L(y)})}var O=m(F,2);{var P=L=>{var b=Sr(),G=o(b);st(G,{get value(){return f()},key:"payloads",children:(W,U=Q)=>{var V=Ar(),te=o(V),oe=o(te),he=o(oe,!0);n(oe),n(te),n(V),S((M,D)=>{$e(V,1,M,"svelte-cy5z6t"),E(he,D)},[()=>yt(($(vt),$(r),Ee(()=>vt("payload",r.class)))),()=>(U(),Ee(()=>U().slice(0,60)))]),d(W,V)},$$slots:{default:!0}}),n(b),d(L,b)},H=L=>{var b=ye(),G=K(b);{var z=U=>{{let V=Rt(()=>($(_),Ee(()=>_("common.copy-icon-title")))),te=Rt(()=>($(_),Ee(()=>_("common.copy-success-icon-title"))));qe(U,{get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(te)},get content(){return f()},"container-class":"truncate",children:(oe,he)=>{aa(oe,{get value(){return f()},get attributes(){return c()},get type(){return e(s)},class:"truncate"})},$$slots:{default:!0}})}},W=U=>{Ue(U,{type:"subtle",class:"block select-none truncate",children:(V,te)=>{ve();var oe=ee();S(()=>E(oe,f())),d(V,oe)},$$slots:{default:!0}})};w(G,U=>{e(s)!=="none"?U(z):U(W,!1)},!0)}d(L,b)};w(O,L=>{typeof f()=="object"?L(P):L(H,!1)})}n(I),d(x,I)};w(k,x=>{u()&&x(v)})}d(i,h),He()}var Fr=R('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function Lr(i,t){const r=ct(t,["children","$$slots","$$events","$$legacy"]);Re(t,!1);var s=Ye();let u=J(t,"link",8),f=J(t,"value",28,()=>u().workflowEvent.workflowId),c=J(t,"label",24,()=>_("nexus.link")),g=J(t,"href",12,void 0);lt(()=>($(g()),$(u()),ft(s)),()=>{g()||(g(ea(u())),f((Se(s,g().split("workflows/"))===null||ft(s)===void 0?void 0:ft(s)[1])||g()))}),wt(),Tt();var h=Fr(),k=o(h),v=o(k,!0);n(k);var x=m(k,2),I=o(x);We(I,{get href(){return g()},children:(F,y)=>{ve();var O=ee();S(()=>E(O,f())),d(F,O)},$$slots:{default:!0}}),n(x),n(h),S(()=>{$e(h,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${$(r),Ee(()=>r.class)??""}`),E(v,c()),$e(x,1,`overflow-hidden ${$(r),Ee(()=>r.linkClass)??""}`)}),d(i,h),He()}var Mr=R('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Or=R('<td class="font-mono"><!></td>'),Dr=R(" <!>",1),Rr=R("<!> <!>",1),Hr=R('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),jr=R('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Nr=R('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Gr=R('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function Rn(i,t){Re(t,!0);const r=()=>Ie(Xt,"$timeFormat",g),s=()=>Ie(Qt,"$relativeTime",g),u=()=>Ie(Kt,"$timestampFormat",g),f=()=>Ie(Sa,"$authUser",g),c=()=>Ie(Aa,"$isCloud",g),[g,h]=bt();var k,v,x,I,F,y,O,P;let H=J(t,"compact",3,!1),L=J(t,"expanded",3,!1),b=J(t,"onRowClick",3,()=>{}),G=J(t,"hoveredEventId",15),z=Ht(ka(L())),W=Ht(void 0);const U=a(()=>Z(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),V=a(()=>Be.params),te=a(()=>e(V).workflow),oe=a(()=>e(V).run),he=a(()=>e(V).namespace),M=a(()=>zt({eventId:t.event.id,namespace:e(he),workflow:e(te),run:e(oe)})),D=a(()=>Zt(t.event)),T=a(()=>Z(t.event)?t.event.events.get(e(U)):t.event),ae=a(()=>Nt({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:Z(e(T))?(k=e(T).initialEvent)===null||k===void 0?void 0:k.eventTime:e(T)===null||e(T)===void 0?void 0:e(T).eventTime,includeMillisecondsForUnderSecond:!0})),Y=a(()=>Z(t.event)?Nt({start:(v=t.event.initialEvent)===null||v===void 0?void 0:v.eventTime,end:(x=t.event.lastEvent)===null||x===void 0?void 0:x.eventTime,includeMillisecondsForUnderSecond:!0}):""),je=a(()=>Ia(t.event)),Ce=a(()=>Ea(t.event)),Fe=a(()=>Pa(t.event)),Ke=a(()=>Z(t.event)?t.event.label:Pe(t.event)?_("events.category.local-activity"):Jt(t.event.name)),de=a(()=>Pe(t.event)?void 0:Ga(Z(t.event)?t.event.initialEvent:t.event)),ue=a(()=>za(Z(t.event)?t.event.lastEvent:t.event,e(de)===null||e(de)===void 0?void 0:e(de).key)),ge=a(()=>Z(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),Le=a(()=>e(ge)&&(e(ge)===null||e(ge)===void 0?void 0:e(ge).paused)),we=a(()=>Z(t.event)&&t.event.isPending&&(((I=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||I===void 0?void 0:I.attempt)||((F=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||F===void 0?void 0:F.attempt))),tt=a(()=>Z(t.event)&&!t.event.isPending&&((O=(y=t.event.eventList.find(Ba))===null||y===void 0?void 0:y.attributes)===null||O===void 0?void 0:O.attempt)),dt=a(()=>H()&&(e(ue)===null||e(ue)===void 0?void 0:e(ue).key)&&(e(ue)===null||e(ue)===void 0?void 0:e(ue).key)!==(e(de)===null||e(de)===void 0?void 0:e(de).key)&&!(!((P=e(T)===null||e(T)===void 0?void 0:e(T).userMetadata)===null||P===void 0)&&P.summary)),at=a(()=>Ze(e(T)===null||e(T)===void 0?void 0:e(T).eventTime,r(),{relative:s(),format:u()})),l=a(()=>Ze(e(T)===null||e(T)===void 0?void 0:e(T).eventTime,r(),{relative:s(),format:"short"})),C=p=>{Se(z,!e(z)),p.stopPropagation(),b()()},j=()=>{G(t.event.id)},ie=()=>{G(void 0)};let se=(p,A)=>{var N;return(N=p==null?void 0:p.eventIds)===null||N===void 0?void 0:N.has(A)};ha(async()=>{Pe(t.event)?Se(W,await Vt(t.event,{namespace:Be.params.namespace,settings:Be.data.settings,accessToken:f().accessToken}),!0):Z(t.event)&&Pe(t.event.initialEvent)&&Se(W,await Vt(t.event.initialEvent,{namespace:Be.params.namespace,settings:Be.data.settings,accessToken:f().accessToken}),!0)});var B=Gr(),q=K(B);q.__click=C;var _e=o(q);{var pe=p=>{var A=Mr(),N=o(A);Ve(N,21,()=>t.event.eventList,kt,(ce,re)=>{{let X=a(()=>zt({eventId:e(re).id,namespace:e(he),workflow:e(te),run:e(oe)}));We(ce,{"data-testid":"link",get href(){return e(X)},children:(fe,ke)=>{ve();var ne=ee();S(()=>E(ne,e(re).id)),d(fe,ne)},$$slots:{default:!0}})}}),n(N),n(A),d(p,A)},me=p=>{var A=Or(),N=o(A);We(N,{"data-testid":"link",get href(){return e(M)},children:(ce,re)=>{ve();var X=ee();S(()=>E(X,t.event.id)),d(ce,X)},$$slots:{default:!0}}),n(A),d(p,A)};w(_e,p=>{Z(t.event)?p(pe):p(me,!1)})}var le=m(_e),Qe=o(le);{let p=a(()=>Z(t.event)&&!e(Y)||!e(ae)),A=a(()=>Z(t.event)?`Duration: ${e(Y)}`:`+${e(ae)}`);pt(Qe,{get hide(){return e(p)},get text(){return e(A)},class:"block",bottom:!0,children:(N,ce)=>{{let re=a(()=>_("common.copy-icon-title")),X=a(()=>_("common.copy-success-icon-title"));qe(N,{get copyIconTitle(){return e(re)},get copySuccessIconTitle(){return e(X)},get content(){return e(l)},children:(fe,ke)=>{ve();var ne=ee();S(()=>E(ne,e(l))),d(fe,ne)},$$slots:{default:!0}})}},$$slots:{default:!0}})}n(le);var Me=m(le),be=o(Me);{let p=a(()=>Z(t.event)&&!e(Y)||!e(ae)),A=a(()=>Z(t.event)?`Duration: ${e(Y)}`:`+${e(ae)}`);pt(be,{get hide(){return e(p)},get text(){return e(A)},class:"block",bottom:!0,children:(N,ce)=>{{let re=a(()=>_("common.copy-icon-title")),X=a(()=>_("common.copy-success-icon-title"));qe(N,{get copyIconTitle(){return e(re)},get copySuccessIconTitle(){return e(X)},get content(){return e(at)},children:(fe,ke)=>{ve();var ne=ee();S(()=>E(ne,e(at))),d(fe,ne)},$$slots:{default:!0}})}},$$slots:{default:!0}})}n(Me);var Oe=m(Me),Xe=o(Oe),It=o(Xe);ht(It,{get name(){return Xa[t.event.category]},class:"mr-1 inline"});var ra=m(It);n(Xe),n(Oe);var ut=m(Oe),Et=o(ut),Pt=o(Et);{var na=p=>{{let A=a(()=>e(Le)?"warning":e(we)>1?"danger":"default");Ue(p,{class:"mr-1",get type(){return e(A)},children:(N,ce)=>{var re=Rr(),X=K(re);{let xe=a(()=>vt("mr-1 inline",e(we)>1&&"font-bold text-red-400",e(Le)&&"font-bold text-yellow-700")),De=a(()=>e(Le)?"pause":"retry");ht(X,{get class(){return e(xe)},get name(){return e(De)}})}var fe=m(X),ke=m(fe);{var ne=xe=>{var De=Dr(),Ne=K(De),rt=m(Ne);{var _a=Ge=>{const Mt=a(()=>{var ze;return Yt({date:(ze=e(ge))==null?void 0:ze.scheduledTime,negativeDefault:""})});var Ot=ye(),pa=K(Ot);{var xa=ze=>{var Dt=ee();S(ya=>E(Dt,`• ${ya??""}
                ${e(Mt)??""}`),[()=>_("workflows.next-retry")]),d(ze,Dt)};w(pa,ze=>{e(Mt)&&ze(xa)})}d(Ge,Ot)};w(rt,Ge=>{e(we)>1&&Ge(_a)})}S(()=>{var Ge;return E(Ne,`/ ${(((Ge=e(ge))==null?void 0:Ge.maximumAttempts)||"∞")??""} `)}),d(xe,De)};w(ke,xe=>{e(ge)&&xe(ne)})}S(xe=>E(fe,` ${xe??""}
          ${e(we)??""} `),[()=>_("workflows.attempt")]),d(N,re)},$$slots:{default:!0}})}};w(Pt,p=>{e(we)&&p(na)})}var At=m(Pt,2);{var oa=p=>{ot(p,_t(()=>e(de),{get attributes(){return e(D)}}))};w(At,p=>{var A;!e(W)&&((A=e(de))!=null&&A.key)&&p(oa)})}var St=m(At,2);{var ia=p=>{ot(p,_t(()=>e(W),{get attributes(){return e(D)}}))};w(St,p=>{e(W)&&e(W).key&&p(ia)})}var Ct=m(St,2);{var sa=p=>{ta(p,{get value(){return e(T).userMetadata.summary},children:qt,$$slots:{default:(A,N)=>{const ce=a(()=>N.decodedValue);var re=ye(),X=K(re);{var fe=ke=>{var ne=Hr(),xe=m(o(ne),2);Ue(xe,{type:"secondary",class:"block select-none truncate",children:(De,Ne)=>{ve();var rt=ee();S(()=>E(rt,e(ce))),d(De,rt)},$$slots:{default:!0}}),n(ne),d(ke,ne)};w(X,ke=>{e(ce)&&ke(fe)})}d(A,re)}}})};w(Ct,p=>{var A,N;(N=(A=e(T))==null?void 0:A.userMetadata)!=null&&N.summary&&p(sa)})}var Ft=m(Ct,2);{var la=p=>{Lr(p,{get link(){return e(T).links[0]},class:"max-w-xl",linkClass:"truncate"})};w(Ft,p=>{var A,N;(N=(A=e(T))==null?void 0:A.links)!=null&&N.length&&p(la)})}var Lt=m(Ft,2);{var ca=p=>{{let A=a(()=>e(tt).toString());ot(p,{key:"attempt",get value(){return e(A)},get attributes(){return e(D)}})}};w(Lt,p=>{e(tt)&&p(ca)})}var va=m(Lt,2);{var da=p=>{ot(p,_t(()=>e(ue),{get attributes(){return e(D)}}))};w(va,p=>{e(dt)&&p(da)})}n(Et),n(ut);var ua=m(ut);{var ma=p=>{var A=jr(),N=o(A),ce=o(N);{var re=X=>{{let fe=a(()=>_("workflows.estimated-billable-actions"));pt(X,{get text(){return e(fe)},topRight:!0,children:(ke,ne)=>{Ue(ke,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(xe,De)=>{ve();var Ne=ee();S(()=>E(Ne,t.event.billableActions)),d(xe,Ne)},$$slots:{default:!0}})},$$slots:{default:!0}})}};w(ce,X=>{t.event.billableActions&&X(re)})}n(N),n(A),d(p,A)};w(ua,p=>{c()&&p(ma)})}n(q);var fa=m(q,2);{var ga=p=>{var A=Nr(),N=o(A),ce=o(N);Er(ce,{get group(){return t.group},get event(){return e(T)}}),n(N),n(A),S(()=>gt(N,"colspan",c()?5:4)),d(p,A)};w(fa,p=>{e(z)&&p(ga)})}S((p,A)=>{$e(q,1,p,"svelte-1cvp1uf"),gt(q,"id",`${t.event.id}-${t.index}`),gt(q,"data-eventid",t.event.id),$e(Xe,1,A),E(ra,` ${e(Ke)??""}`)},[()=>yt(vt("hover:cursor-pointer",e(je)&&"!bg-red-400/40 hover:!bg-red-400/60",e(Ce)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(Fe)&&"!bg-pink-700/30 hover:!bg-pink-700/50",se(t.group,G())&&"active")),()=>yt(Za({category:t.event.category}))]),jt("mouseenter",q,j),jt("mouseleave",q,ie),d(i,B),He(),h()}ba(["click"]);export{Xa as C,Rn as E,Fn as H,Cn as T,ot as a,Er as b,Dn as c,Vt as d,Za as e,Lr as f,On as g,Mn as i,Ln as t};
