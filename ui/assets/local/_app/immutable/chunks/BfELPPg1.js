import"./CWj6FrbW.js";import{p as wt,az as n,aC as U,Y as ot,g as e,t as j,h as o,c as a,s as x,r as s,n as Mt,k as gt,i as R,d as _,b as bt,f as st,A as ht,e as Jt,j as K,o as Re}from"./CtXwlho8.js";import{s as I,e as Fe}from"./BXc8M6y4.js";import{i as L}from"./yjFgoZ2z.js";import{k as ue}from"./CmcpgAEn.js";import{s as We}from"./CHkfRj1l.js";import{s as Ft,b as Xt,a as Gt}from"./CI9zuxJp.js";import{p as me}from"./Z2tDCb64.js";import{s as Ue}from"./CiDpyPci.js";import{p as Wt}from"./DdhuX4yd.js";import{B as Ht}from"./DMo_v60n.js";import{T as ve}from"./DHeHXQSq.js";import{t as r}from"./D2OY9xdY.js";import{C as Rt}from"./Dl4Or9k2.js";import{D as Be,a as Le}from"./BK3EYonm.js";import{I as mt}from"./B2vZlsUA.js";import{N as Ie}from"./BTm-kVeV.js";import{L as lt}from"./DCI8NNqO.js";import{g as je}from"./BBGlwGsK.js";import{a as ze}from"./Ip-blrGX.js";import{s as Zt}from"./byHaz_JD.js";import{r as $t,a as te}from"./C64L02Sn.js";import{t as fe}from"./C7ldE0Xz.js";import{r as ee,w as Qe}from"./D9pSO_rq.js";import{m as _t,c as xt,d as Nt,h as qe,n as Ee}from"./CeMbHz9m.js";import{M as ye}from"./SjgzbyiQ.js";import{P as Ae}from"./Bz4Ikx5n.js";import{W as Ke}from"./Bk85UM9I.js";import{A as Ve}from"./DggFymUa.js";import{B as Ye}from"./Dvm4Bl2G.js";import{C as de}from"./C1kx_LEb.js";import{I as Ge}from"./Cey4-U3a.js";import{c as Je}from"./BoPhJLUE.js";import{f as Ot,r as Xe,t as Ze}from"./cq7hwzrg.js";import{c as De}from"./ByTIZu23.js";import{k as $e,l as ta}from"./GrqpJ_m0.js";import{o as ea}from"./C8ejR22J.js";const aa=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),ia=new Set(["maximumAttempts"]),ra=(l,t)=>l===0?r("workflows.no-expiration"):t,oa=(l,t)=>l?l-t:r("workflows.unlimited"),sa=l=>l||r("workflows.unlimited"),na=(l,t)=>l==="maximumAttempts"&&!t?r("workflows.unlimited"):t,la=(l,t)=>{if(aa.has(t)&&typeof l[t]=="object"){for(const[c,m]of Object.entries(l[t]))ta(m)&&(ia.has(c)?l[`${t}${De(c)}`]=na(c,m):l[`${t}${De(c)}`]=m);delete l[t]}},ki=l=>{const t={};if(l.attributes)for(const[c,m]of Object.entries(l.attributes))$e(c,m)&&(t[c]=m),la(t,c);return t},ca=({date:l,now:t=Date.now(),negativeDefault:c})=>{if(!l)return"";const m=String(l);try{const A=(Number(new Date(m))-t)/1e3;return c!==void 0&&A<0?c:isNaN(A)?"":`${A.toFixed(0)}s`}catch{return""}},ae=()=>{var c;const l=(c=je(ze))==null?void 0:c.email;return l?`From the Web UI by ${l}`:"From the Web UI"},va=async({namespace:l,execution:t,id:c,reason:m,type:v})=>{const A=$t("activity.pause",{namespace:l});return te(A,{options:{method:"POST",body:Zt({execution:t,reason:m,identity:ae(),id:c,type:v})}})},da=async({namespace:l,execution:t,id:c,type:m})=>{const v=$t("activity.unpause",{namespace:l});return te(v,{options:{method:"POST",body:Zt({execution:t,identity:ae(),id:c,type:m})}})},ua=async({namespace:l,execution:t,id:c,type:m,resetHeartbeat:v})=>{const A=$t("activity.reset",{namespace:l});return te(A,{options:{method:"POST",body:Zt({execution:t,identity:ae(),id:c,type:m,resetHeartbeat:v})}})},ma=async({namespace:l,execution:t,id:c,type:m,activityOptions:v})=>{const A=$t("activity.update-options",{namespace:l});return te(A,{options:{method:"POST",body:Zt({execution:t,identity:ae(),id:c,type:m,activityOptions:v,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts"})}})};var fa=j(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function ya(l,t){wt(t,!0);const[c,m]=Ft();var v,A,C,P,z,g,f,S,Y,G,F,D,H,y;let N=Wt(t,"open",15),B=n(()=>t.activity.activityId),V=n(()=>t.activity.activityType),Q=U(ot((A=(v=t.activity.activityOptions)===null||v===void 0?void 0:v.taskQueue)===null||A===void 0?void 0:A.name)),X=U(ot(_t(String((C=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||C===void 0?void 0:C.scheduleToCloseTimeout)))),J=U(ot(_t(String((P=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||P===void 0?void 0:P.scheduleToStartTimeout)))),q=U(ot(_t(String((z=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||z===void 0?void 0:z.startToCloseTimeout)))),b=U(ot(_t(String((g=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||g===void 0?void 0:g.heartbeatTimeout)))),it=U(ot((S=(f=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||f===void 0?void 0:f.retryPolicy)===null||S===void 0?void 0:S.maximumAttempts)),tt=U(ot((G=(Y=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||Y===void 0?void 0:Y.retryPolicy)===null||G===void 0?void 0:G.backoffCoefficient)),Z=U(ot(_t(String((D=(F=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||F===void 0?void 0:F.retryPolicy)===null||D===void 0?void 0:D.initialInterval)))),at=ot(_t(String((y=(H=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||H===void 0?void 0:H.retryPolicy)===null||y===void 0?void 0:y.maximumInterval))),$=U(!1);const ft=n(()=>({taskQueue:{name:e(Q)},scheduleToCloseTimeout:xt(e(X)),scheduleToStartTimeout:xt(e(J)),startToCloseTimeout:xt(e(q)),heartbeatTimeout:xt(e(b)),retryPolicy:{maximumAttempts:e(it),initialInterval:xt(e(Z)),backoffCoefficient:e(tt),maximumInterval:xt(at)}})),kt=()=>{N(!1)},Ut=async yt=>{yt.preventDefault();try{await ma({namespace:t.namespace,execution:t.execution,id:e($)?void 0:e(B),type:e($)?e(V):void 0,activityOptions:e(ft)}),Xt(ee,Date.now()),fe.push({variant:"success",message:`Options for Activity ${e(B)} have been updated.`})}catch(ct){console.error("Error updating activity options:",ct),fe.push({variant:"error",message:`Options for Activity ${e(B)} have been failed to update: ${ct==null?void 0:ct.message}`,duration:5e3})}finally{kt()}},ie=n(()=>r("common.close"));Be(l,{get open(){return N()},onClick:kt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e(ie)},class:"w-[480px]",children:(yt,ct)=>{Le(yt,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(Bt,pe)=>{var vt=fa(),Tt=o(vt),It=o(Tt);lt(It,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var Lt=a(It,4),At=o(Lt);const re=n(()=>isNaN(Number(e(b))));mt(At,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(re)},get value(){return e(b)},set value(M){x(b,M,!0)}});var Dt=a(At,2),oe=o(Dt,!0);s(Dt),s(Lt),s(Tt);var Pt=a(Tt,2),jt=o(Pt);lt(jt,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var zt=a(jt,4);Ie(zt,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(tt)},set value(M){x(tt,M,!0)}}),s(Pt);var pt=a(Pt,2),Qt=o(pt);lt(Qt,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var qt=a(Qt,4),Et=o(qt);const i=n(()=>isNaN(Number(e(Z))));mt(Et,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(i)},get value(){return e(Z)},set value(M){x(Z,M,!0)}});var d=a(Et,2),u=o(d,!0);s(d),s(qt),s(pt);var O=a(pt,2),W=o(O);lt(W,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var p=a(W,4);Ie(p,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(it)},set value(M){x(it,M,!0)}}),s(O);var k=a(O,2),h=o(k);lt(h,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var T=a(h,4),w=o(T);const E=n(()=>isNaN(Number(e(X))));mt(w,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(E)},get value(){return e(X)},set value(M){x(X,M,!0)}});var nt=a(w,2),rt=o(nt,!0);s(nt),s(T),s(k);var dt=a(k,2),Ct=o(dt);lt(Ct,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var Kt=a(Ct,4),Vt=o(Kt);const se=n(()=>isNaN(Number(e(J))));mt(Vt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(se)},get value(){return e(J)},set value(M){x(J,M,!0)}});var Yt=a(Vt,2),Pe=o(Yt,!0);s(Yt),s(Kt),s(dt);var ne=a(dt,2),_e=o(ne);lt(_e,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var xe=a(_e,4),ge=o(xe);const Ce=n(()=>isNaN(Number(e(q))));mt(ge,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Ce)},get value(){return e(q)},set value(M){x(q,M,!0)}});var he=a(ge,2),Se=o(he,!0);s(he),s(xe),s(ne);var le=a(ne,2),we=o(le);lt(we,{for:"task-queue-name",label:"Task Queue Name"});var Ne=a(we,2);mt(Ne,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e(Q)},set value(M){x(Q,M,!0)}}),s(le);var be=a(le,2);const Oe=n(()=>r("activities.apply-to-all-activity-types",{type:e(V)}));Rt(be,{get label(){return e(Oe)},get checked(){return e($)},set checked(M){x($,M,!0)}});var ke=a(be,2),Te=o(ke);Ht(Te,{type:"button",variant:"ghost",size:"sm",$$events:{click:kt},children:(M,ce)=>{Mt();var ut=gt();R(St=>I(ut,St),[()=>r("common.cancel")]),_(M,ut)},$$slots:{default:!0}});var Me=a(Te,2);Ht(Me,{type:"submit",variant:"primary",size:"sm",children:(M,ce)=>{Mt();var ut=gt();R(St=>I(ut,St),[()=>r("common.save")]),_(M,ut)},$$slots:{default:!0}}),s(ke),s(vt),R((M,ce,ut,St,He)=>{I(oe,M),I(u,ce),I(rt,ut),I(Pe,St),I(Se,He)},[()=>Nt(e(b)),()=>Nt(e(Z)),()=>Nt(e(X)),()=>Nt(e(J)),()=>Nt(e(q))]),Fe("submit",vt,Ut),_(Bt,vt)},$$slots:{default:!0}})},$$slots:{default:!0}}),bt(),m()}var pa=j('<h3 slot="title"> </h3>'),_a=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function xa(l,t){wt(t,!0);const[c,m]=Ft();let v=Wt(t,"open",15),A=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=U(""),z=!1,g=U(""),f=U(!1);const S=()=>{v(!1),x(g,""),x(f,!1)},Y=async()=>{await va({namespace:t.namespace,execution:t.execution,id:e(f)?void 0:e(A),reason:e(g),type:e(f)?e(C):void 0}),Xt(ee,Date.now()),S()},G=n(()=>r("workflows.pause")),F=n(()=>r("common.cancel"));ye(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return z},get confirmText(){return e(G)},get cancelText(){return e(F)},confirmType:"destructive",get error(){return e(P)},set error(D){x(P,D,!0)},get open(){return v()},set open(D){v(D)},$$events:{cancelModal:S,confirmModal:Y},$$slots:{title:(D,H)=>{var y=pa(),N=o(y,!0);s(y),R(B=>I(N,B),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(D,y)},content:(D,H)=>{var y=_a(),N=o(y),B=o(N,!0);s(N);var V=a(N,2);const Q=n(()=>r("common.reason-placeholder")),X=n(()=>r("common.reason"));mt(V,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(Q)},get label(){return e(X)},get value(){return e(g)},set value(b){x(g,b,!0)}});var J=a(V,2);const q=n(()=>r("activities.pause-all-activity-types",{type:e(C)}));Rt(J,{get label(){return e(q)},get checked(){return e(f)},set checked(b){x(f,b,!0)}}),s(y),R(b=>I(B,b),[()=>r("activities.pause-modal-description")]),_(D,y)}}}),bt(),m()}var ga=j('<h3 slot="title"> </h3>'),ha=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function wa(l,t){wt(t,!0);const[c,m]=Ft();let v=Wt(t,"open",15),A=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=U(""),z=!1,g=U(!1),f=U(!1);const S=()=>{v(!1),x(g,!1),x(f,!1)},Y=async()=>{await ua({namespace:t.namespace,execution:t.execution,id:e(g)?void 0:e(A),resetHeartbeat:e(f),type:e(g)?e(C):void 0}),Xt(ee,Date.now()),fe.push({variant:"success",message:r("activities.reset-success",{activityId:e(A)})}),S()},G=n(()=>r("workflows.reset")),F=n(()=>r("common.cancel"));ye(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return z},get confirmText(){return e(G)},get cancelText(){return e(F)},confirmType:"destructive",get error(){return e(P)},set error(D){x(P,D,!0)},get open(){return v()},set open(D){v(D)},$$events:{cancelModal:S,confirmModal:Y},$$slots:{title:(D,H)=>{var y=ga(),N=o(y,!0);s(y),R(B=>I(N,B),[()=>r("activities.reset-modal-confirmation",{activityId:t.activity.id})]),_(D,y)},content:(D,H)=>{var y=ha(),N=o(y),B=o(N,!0);s(N);var V=a(N,2);const Q=n(()=>r("activities.apply-to-all-activity-types",{type:e(C)}));Rt(V,{get label(){return e(Q)},get checked(){return e(g)},set checked(q){x(g,q,!0)}});var X=a(V,2);const J=n(()=>r("activities.reset-heartbeat-details"));Rt(X,{get label(){return e(J)},get checked(){return e(f)},set checked(q){x(f,q,!0)}}),s(y),R(q=>I(B,q),[()=>r("activities.reset-modal-description")]),_(D,y)}}}),bt(),m()}var ba=j('<h3 slot="title"> </h3>'),ka=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function Ta(l,t){wt(t,!0);const[c,m]=Ft();let v=Wt(t,"open",15),A=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=U(""),z=!1,g=U(!1);const f=()=>{v(!1),x(g,!1)},S=async()=>{await da({namespace:t.namespace,execution:t.execution,id:e(g)?void 0:e(A),type:e(g)?e(C):void 0}),Xt(ee,Date.now()),f()},Y=n(()=>r("workflows.unpause")),G=n(()=>r("common.cancel"));ye(l,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",get loading(){return z},get confirmText(){return e(Y)},get cancelText(){return e(G)},confirmType:"destructive",get error(){return e(P)},set error(F){x(P,F,!0)},get open(){return v()},set open(F){v(F)},$$events:{cancelModal:f,confirmModal:S},$$slots:{title:(F,D)=>{var H=ba(),y=o(H,!0);s(H),R(N=>I(y,N),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(F,H)},content:(F,D)=>{var H=ka(),y=o(H),N=o(y,!0);s(y);var B=a(y,2);const V=n(()=>r("activities.unpause-all-activity-types",{type:e(C)}));Rt(B,{get label(){return e(V)},get checked(){return e(g)},set checked(Q){x(g,Q,!0)}}),s(H),R(Q=>I(N,Q),[()=>r("activities.unpause-modal-description")]),_(F,H)}}}),bt(),m()}var Ia=j("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function Aa(l,t){wt(t,!0);let c=Wt(t,"class",3,"");const m=n(()=>me.params),v=n(()=>e(m).namespace),A=n(()=>e(m).workflow),C=n(()=>e(m).run),P=n(()=>({workflowId:e(A),runId:e(C)}));let z=U(!1),g=U(!1),f=U(!1),S=U(!1);const Y=async()=>{t.activity.paused?x(g,!0):x(z,!0)},G=()=>{x(f,!0)},F=()=>{x(S,!0)};var D=Ia(),H=st(D),y=o(H);const N=n(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");ve(y,{bottomLeft:!0,width:200,get text(){return e(N)},children:(b,it)=>{const tt=n(()=>t.activity.paused?"play":"pause");Ht(b,{variant:"secondary",size:"sm",get leadingIcon(){return e(tt)},$$events:{click:Y},children:(Z,at)=>{Mt();var $=gt();R(ft=>I($,ft),[()=>t.activity.paused?r("workflows.unpause"):r("workflows.pause")]),_(Z,$)},$$slots:{default:!0}})},$$slots:{default:!0}});var B=a(y,2);ve(B,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(b,it)=>{Ht(b,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:F},children:(tt,Z)=>{Mt();var at=gt();R($=>I(at,$),[()=>r("common.update")]),_(tt,at)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=a(B,2);ve(V,{bottom:!0,width:200,text:"Reset this Activity.",children:(b,it)=>{Ht(b,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:G},children:(tt,Z)=>{Mt();var at=gt();R($=>I(at,$),[()=>r("workflows.reset")]),_(tt,at)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(H);var Q=a(H,2);xa(Q,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(z)},set open(b){x(z,b,!0)}});var X=a(Q,2);Ta(X,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(g)},set open(b){x(g,b,!0)}});var J=a(X,2);wa(J,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(f)},set open(b){x(f,b,!0)}});var q=a(J,2);ue(q,()=>e(S),b=>{ya(b,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(S)},set open(it){x(S,it,!0)}})}),R(()=>Ue(H,1,`flex items-center gap-2 ${c()??""}`)),_(l,D),bt()}const Da=(l,t,c)=>!l.disableWriteActions&&!t.namespaceWriteDisabled(c)&&!t.isActivityCommandsDisabled&&!l.activityCommandsDisabled,et=(l,t=ht,c=ht)=>{var m=Pa(),v=o(m),A=o(v,!0);s(v);var C=a(v,2),P=o(C);{var z=f=>{var S=gt();R(()=>I(S,c())),_(f,S)},g=f=>{var S=Jt(),Y=st(S);We(Y,()=>c()??ht),_(f,S)};L(P,f=>{typeof c()=="string"||typeof c()=="number"?f(z):f(g,!1)})}s(C),s(m),R(()=>I(A,t())),_(l,m)};var Pa=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ca=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Sa=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Na=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Oa=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Ma=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Ha=j("<!> ",1),Ra=j('<p class="ml-1 text-sm text-secondary"> </p>'),Fa=j('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Wa=j("<!> <!> <!>",1),Ua=j("<!> <!>",1),Ba=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function Ti(l,t){wt(t,!0);const[c,m]=Ft(),v=()=>Gt(Qe,"$workflowRun",c),A=()=>Gt(H,"$coreUser",c),C=()=>Gt(Ze,"$timeFormat",c),P=()=>Gt(Xe,"$relativeTime",c),z=i=>{var d=Ca(),u=o(d),O=o(u,!0);s(u);var W=a(u,2);ue(W,()=>t.activity.attempt,p=>{Ae(p,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:(h,T=ht)=>{const w=n(()=>r("common.copy-icon-title")),E=n(()=>r("common.copy-success-icon-title"));de(h,{get content(){return T()},maxHeight:384,get copyIconTitle(){return e(w)},get copySuccessIconTitle(){return e(E)}})},$$slots:{default:!0}})}),s(d),R(p=>I(O,p),[()=>r("workflows.heartbeat-details")]),_(i,d)},g=i=>{var d=Oa(),u=o(d),O=o(u);{var W=h=>{var T=Sa(),w=st(T),E=o(w,!0);s(w);var nt=a(w,2);ue(nt,()=>t.activity.attempt,rt=>{const dt=n(()=>ea(t.activity.lastFailure,"stackTrace"));Ae(rt,{get value(){return e(dt)},children:(Kt,Vt=ht)=>{const se=n(()=>r("common.copy-icon-title")),Yt=n(()=>r("common.copy-success-icon-title"));de(Kt,{get content(){return Vt()},maxHeight:384,get copyIconTitle(){return e(se)},get copySuccessIconTitle(){return e(Yt)}})},$$slots:{default:!0}})}),R(rt=>I(E,rt),[()=>r("workflows.last-failure")]),_(h,T)};L(O,h=>{t.activity.lastFailure&&h(W)})}s(u);var p=a(u,2);{var k=h=>{var T=Na(),w=o(T),E=o(w,!0);s(w);var nt=a(w,2);const rt=n(()=>r("common.copy-icon-title")),dt=n(()=>r("common.copy-success-icon-title"));de(nt,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(rt)},get copySuccessIconTitle(){return e(dt)}}),s(T),R(Ct=>I(E,Ct),[()=>r("common.stack-trace")]),_(h,T)};L(p,h=>{var T;(T=t.activity.lastFailure)!=null&&T.stackTrace&&h(k)})}s(d),_(i,d)},f=i=>{const d=n(()=>{var u;return(u=t.activity.lastFailure)!=null&&u.stackTrace?r("workflows.last-failure-with-stack-trace"):r("workflows.last-failure")});Ve(i,{get title(){return e(d)},children:Re,$$slots:{default:(u,O)=>{const W=n(()=>O.open);var p=Jt(),k=st(p);{var h=T=>{g(T)};L(k,T=>{e(W)&&T(h)})}_(u,p)}}})},S=(i,d=ht)=>{var u=Ma(),O=o(u),W=o(O,!0);s(O);var p=a(O,2),k=o(p),h=a(k),T=o(h);s(h),s(p),s(u),R((w,E)=>{I(W,w),I(k,`${E??""} `),I(T,`(${d()??""})`)},[()=>r("workflows.next-retry"),()=>Ot(t.activity.scheduledTime,C(),{relative:P(),relativeLabel:""})]),_(i,u)},Y=i=>{var d=Fa(),u=o(d);const O=n(()=>e(F)?"danger":"default");Ye(u,{get type(){return e(O)},children:(k,h)=>{var T=Ha(),w=st(T);const E=n(()=>e(F)&&"font-bold text-red-400");Ge(w,{get class(){return`mr-1 ${e(E)??""}`},name:"retry"});var nt=a(w);R(rt=>I(nt,` ${t.activity.attempt??0} of ${rt??""}`),[()=>sa(t.activity.maximumAttempts)]),_(k,T)},$$slots:{default:!0}});var W=a(u,2);{var p=k=>{var h=Ra(),T=o(h);s(h),R(w=>I(T,`${w??""} remaining`),[()=>oa(t.activity.maximumAttempts,t.activity.attempt)]),_(k,h)};L(W,k=>{t.activity.maximumAttempts&&k(p)})}s(d),_(i,d)};var G;const F=n(()=>t.activity.attempt>1&&!!t.activity.lastFailure),D=n(()=>(G=v()===null||v()===void 0?void 0:v().workflow)===null||G===void 0?void 0:G.isRunning);let H=Je(),y=n(()=>Da(me.data.settings,A(),me.params.namespace)&&e(D));var N=Ba(),B=o(N),V=o(B),Q=o(V);const X=n(()=>t.activity.paused?"Paused":t.activity.state);Ke(Q,{get status(){return e(X)}});var J=a(Q,2),q=o(J,!0);s(J),s(V);var b=a(V,2);{var it=i=>{Aa(i,{get activity(){return t.activity},class:"justify-end"})};L(b,i=>{e(y)&&i(it)})}s(B);var tt=a(B,2),Z=o(tt),at=o(Z),$=K(()=>r("workflows.activity-id"));et(at,()=>e($),()=>t.activity.activityId);var ft=a(at,2);{var kt=i=>{var d=Wa(),u=st(d),O=K(()=>r("activities.paused-by"));et(u,()=>e(O),()=>{var w,E;return((E=(w=t.activity.pauseInfo)==null?void 0:w.manual)==null?void 0:E.identity)||""});var W=a(u,2),p=K(()=>r("activities.paused-since")),k=K(()=>{var w;return Ot((w=t.activity.pauseInfo)==null?void 0:w.pauseTime,C(),{relative:P()})});et(W,()=>e(p),()=>e(k));var h=a(W,2),T=K(()=>r("activities.pause-reason"));et(h,()=>e(T),()=>{var w,E;return((E=(w=t.activity.pauseInfo)==null?void 0:w.manual)==null?void 0:E.reason)||"-"}),_(i,d)};L(ft,i=>{t.activity.paused&&t.activity.pauseInfo&&i(kt)})}var Ut=a(ft,2),ie=K(()=>r("workflows.attempt"));et(Ut,()=>e(ie),()=>Y);var yt=a(Ut,2);{var ct=i=>{var d=Jt();const u=n(()=>ca({date:t.activity.scheduledTime,negativeDefault:""}));var O=st(d);{var W=p=>{S(p,()=>e(u))};L(O,p=>{e(u)&&p(W)})}_(i,d)};L(yt,i=>{t.activity.scheduledTime&&i(ct)})}var Bt=a(yt,2);{var pe=i=>{var d=K(()=>r("workflows.last-attempt-completed-time")),u=K(()=>Ot(t.activity.lastAttemptCompleteTime,C(),{relative:P()}));et(i,()=>e(d),()=>e(u))};L(Bt,i=>{t.activity.lastAttemptCompleteTime&&i(pe)})}var vt=a(Bt,2);{var Tt=i=>{var d=K(()=>r("workflows.retry-expiration")),u=K(()=>ra(t.activity.maximumAttempts,qe(Ee({start:Date.now(),end:t.activity.expirationTime}))));et(i,()=>e(d),()=>e(u))};L(vt,i=>{t.activity.expirationTime&&i(Tt)})}var It=a(vt,2);{var Lt=i=>{var d=K(()=>r("workflows.last-heartbeat")),u=K(()=>Ot(t.activity.lastHeartbeatTime,C(),{relative:P(),relativeStrict:!0}));et(i,()=>e(d),()=>e(u))};L(It,i=>{t.activity.lastHeartbeatTime&&i(Lt)})}var At=a(It,2);{var re=i=>{var d=K(()=>r("workflows.last-started-time")),u=K(()=>Ot(t.activity.lastStartedTime,C(),{relative:P()}));et(i,()=>e(d),()=>e(u))};L(At,i=>{t.activity.lastStartedTime&&i(re)})}var Dt=a(At,2);{var oe=i=>{var d=K(()=>r("workflows.last-worker-identity"));et(i,()=>e(d),()=>t.activity.lastWorkerIdentity)};L(Dt,i=>{t.activity.lastWorkerIdentity&&i(oe)})}var Pt=a(Dt,2);{var jt=i=>{var d=Ua(),u=st(d);{var O=k=>{var h=K(()=>r("workflows.priority"));et(k,()=>e(h),()=>t.activity.priority.priorityKey)};L(u,k=>{t.activity.priority.priorityKey&&k(O)})}var W=a(u,2);{var p=k=>{var h=K(()=>r("workflows.fairness"));et(k,()=>e(h),()=>t.activity.priority.fairnessKey)};L(W,k=>{t.activity.priority.fairnessKey&&k(p)})}_(i,d)};L(Pt,i=>{t.activity.priority&&i(jt)})}s(Z);var zt=a(Z,2),pt=o(zt);{var Qt=i=>{var d=Jt(),u=st(d);{var O=p=>{f(p)},W=p=>{g(p)};L(u,p=>{t.totalPending>20?p(O):p(W,!1)})}_(i,d)};L(pt,i=>{e(F)&&i(Qt)})}var qt=a(pt,2);{var Et=i=>{z(i)};L(qt,i=>{t.activity.heartbeatDetails&&i(Et)})}s(zt),s(tt),s(N),R(()=>I(q,t.activity.activityType)),_(l,N),bt(),m()}export{Ti as P,ki as f,ca as t};
