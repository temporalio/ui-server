import"./Bzak7iHL.js";import"./69_IOA4Y.js";import{p as $e,h as J,f as O,e as f,n as Ie,k as Pe,j as K,g as l,o as P,b as et,l as ue,a as qt,t as T,i as V,c as C,r as q,m as G,s as S,M as H,af as Se}from"./DtSMpxPp.js";import{s as te,e as Z}from"./ChP_J8fE.js";import{i as x}from"./BUX2ey9N.js";import{e as Je,i as Qe}from"./D_0FA0ti.js";import{i as tt,s as fe,t as le,a as Et}from"./DM92YGvC.js";import{r as Dt,c as Ue,a as We,b as Ht,s as Kt}from"./Dbhi2jYg.js";import{b as Bt}from"./CtBRckes.js";import{s as $}from"./Bfc47y5P.js";import{p as a,l as Xe,s as Rt,a as jt,c as Oe}from"./QkTQNHha.js";import{c as Ft,B as Nt}from"./CsMNScE5.js";import{c as Gt,w as Jt}from"./C_fvR0pn.js";import{b as Qt}from"./lfQGXmy2.js";import{b as Ut,c as Wt,d as Xt}from"./Rz3tcmb6.js";import{L as Yt}from"./BI3gsI5V.js";import{B as Ye}from"./Drauf92r.js";import{C as Zt}from"./qADPTMoC.js";import{I as Ae}from"./Db7F_qcf.js";import{M as $t}from"./D0CDR0gQ.js";import{T as Ze}from"./B5dU76Br.js";function ee(ve,t){$e(t,!1);let ae=a(t,"selected",8,!1),Q=a(t,"disabled",8,!1),me=a(t,"label",8),ge=a(t,"class",8,"");tt();const be=P(()=>le("break-all",ge()));Ut(ve,{role:"option",get class(){return l(be)},get"aria-selected"(){return ae()},get"aria-disabled"(){return Q()},get selected(){return ae()},get disabled(){return Q()},$$events:{click(o){Qt.call(this,t,o)}},children:(o,E)=>{Ie();var m=Pe();K(()=>te(m,me())),f(o,m)},$$slots:{default:!0,leading:(o,E)=>{var m=J(),B=O(m);fe(B,t,"leading",{},null),f(o,m)},trailing:(o,E)=>{var m=J(),B=O(m);fe(B,t,"trailing",{},null),f(o,m)}}}),et()}const el=Ft(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}});var tl=T("<p> </p>"),ll=T("<!> <!>",1),al=T('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),rl=T('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),sl=T('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),nl=T("<!> <!> <!>",1),il=T("<!> <!> <!>",1),ol=T('<span class="error svelte-8zxxzt"> </span>'),dl=T('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input></div> <!> <!></div></div> <!> <!>',1);function Pl(ve,t){const ae=Et(t),Q=Xe(t,["children","$$slots","$$events","$$legacy"]),me=Xe(Q,["class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","displayChips","chipLimit","selectAllLabel","deselectAllLabel","removeChipLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","optionClass","numberOfItemsSelectedLabel","open","maxMenuHeight"]);$e(t,!1);const[ge,be]=Rt(),o=()=>jt(W(),"$open",ge),E=G(),m=Gt();let B=a(t,"class",8,""),U=a(t,"id",8),lt=a(t,"label",8),p=a(t,"multiselect",8,!1),r=a(t,"value",28,()=>p()?[]:void 0),at=a(t,"noResultsText",8),Te=a(t,"disabled",8,!1),rt=a(t,"labelHidden",8,!1),R=a(t,"options",8),st=a(t,"placeholder",8,null),nt=a(t,"readonly",8,!1),he=a(t,"required",8,!1),re=a(t,"leadingIcon",8,null),it=a(t,"showChevron",8,!1),M=a(t,"optionValueKey",8,null),se=a(t,"optionLabelKey",24,M),_e=a(t,"minSize",8,0),xe=a(t,"maxSize",8,120),Me=a(t,"error",8,""),Ve=a(t,"valid",8,!0),ot=a(t,"displayChips",8,!0),pe=a(t,"chipLimit",8,5),dt=a(t,"selectAllLabel",8,"Select All"),ct=a(t,"deselectAllLabel",8,"Deselect All"),ut=a(t,"removeChipLabel",8,"Remove Option"),ne=a(t,"actionTooltip",8,""),ye=a(t,"href",8,""),qe=a(t,"hrefDisabled",8,!1),Ee=a(t,"loading",8,!1),ft=a(t,"loadingText",8,"Loading more results"),De=a(t,"variant",8,"default"),vt=a(t,"optionClass",8,""),mt=a(t,"numberOfItemsSelectedLabel",8,e=>`${e} option${e>1?"s":""} selected`),y=G(""),ie=G(""),j=G(),we=G(),v=G(),W=a(t,"open",24,()=>Jt(!1)),gt=a(t,"maxMenuHeight",8,"max-h-[20rem]");const X=()=>{o()||(Oe(W(),!0),S(ie,""),l(v).focus(),l(v).select())},He=()=>{o()&&(Oe(W(),!1),m("close",{selectedOption:l(j)}),Le())},bt=()=>{m("close",{selectedOption:l(j)}),Le()},Le=()=>{S(y,Ce(l(j))),S(E,R())},A=e=>Array.isArray(e),F=e=>typeof e=="string",N=e=>typeof e=="object",Y=e=>e===null||typeof e!="object"?!1:M()!==null&&se()!==null&&M()in e&&se()in e,Ce=e=>{if(!e)return A(r())?"":r()!==null&&r()!==void 0?r():"";if(F(e))return e;if(N(e)&&Y(e))return String(e[se()])},ht=e=>{if(F(e)&&(A(r())?r().includes(e)?r(r().filter(c=>c!==e)):r([...r(),e]):r(e)),N(e)&&Y(e)){const c=String(e[M()]);A(r())?r().includes(c)?r(r().filter(h=>h!==c)):r([...r(),c]):r(c)}},_t=e=>{ht(e),m("change",{value:e}),p()||Le()},xt=e=>{A(r())&&r(r().filter(c=>c!==e))},pt=()=>{!p()||!A(r())||r(l(E).map(e=>{if(N(e)&&Y(e))return String(e[M()]);if(F(e))return e}))},yt=()=>{r([])},Ke=()=>{const e=l(we).querySelector('li[role="option"]:not([aria-disabled="true"])');e&&requestAnimationFrame(()=>e.focus())},wt=e=>{switch(e.key){case"Escape":He();break;case"ArrowDown":X(),Ke();break;case"Enter":X(),Ke();break}},Lt=e=>{o()||Oe(W(),!0),S(y,e.currentTarget.value),S(ie,l(y)),m("input",l(y))};function Ct(e,c){return m("filter",l(y)),c.filter(h=>{if(F(h))return h.toLowerCase().includes(e.toLowerCase());if(N(h)&&Y(h))return String(h[se()]).toLowerCase().includes(e.toLowerCase())})}const zt=()=>{o()||X()},kt=(e,c)=>{if(N(e)){const h=String(e[M()]);return A(c)?c.includes(h):c===h}else if(F(e))return A(c)?c.includes(e):c===e;return!1};ue(()=>(o(),l(v)),()=>{o()&&l(v)&&document.activeElement!==l(v)&&(l(v).focus(),l(v).select())}),ue(()=>(l(ie),H(R())),()=>{S(E,Ct(l(ie),R()))}),ue(()=>(H(p()),l(j),H(R()),H(r()),H(M())),()=>{p()||(S(j,R().find(e=>{if(F(e))return e===r();if(N(e)&&Y(e))return e[M()]===r()})),S(y,Ce(l(j))))}),ue(()=>(l(v),l(y),H(_e()),H(xe())),()=>{l(v)&&l(y)&&(l(y).length<_e()?Se(v,l(v).size=_e()):l(y).length>xe()?Se(v,l(v).size=xe()):Se(v,l(v).size=l(y).length))}),qt(),tt(),Wt(ve,{get open(){return W()},$$events:{close:bt},children:(e,c)=>{var h=dl(),ze=O(h),Be=V(ze);Yt(Be,{get hidden(){return rt()},get required(){return he()},get label(){return lt()},get for(){return U()}});var ke=C(Be,2),Re=V(ke);{var St=s=>{Ae(s,{class:"ml-2 shrink-0",get name(){return re()}})};x(Re,s=>{re()&&s(St)})}var oe=C(Re,2),je=V(oe);{var Ot=s=>{var i=J(),g=O(i);{var w=u=>{var _=ll(),z=O(_);Je(z,1,()=>r().slice(0,pe()),Qe,(b,L)=>{Zt(b,{get removeButtonLabel(){return ut()},$$events:{remove:()=>xt(l(L))},children:(k,de)=>{Ie();var ce=Pe();K(()=>te(ce,l(L))),f(k,ce)},$$slots:{default:!0}})});var n=C(z,2);{var d=b=>{var L=tl(),k=V(L);q(L),K(de=>te(k,`+${de??""}`),[()=>r().slice(pe()).length],P),f(b,L)};x(n,b=>{r().length>pe()&&b(d)})}f(u,_)},I=u=>{Nt(u,{children:(_,z)=>{Ie();var n=Pe();K(d=>te(n,d),[()=>mt()(r().length)],P),f(_,n)},$$slots:{default:!0}})};x(g,u=>{ot()?u(w):u(I,!1)})}f(s,i)};x(je,s=>{p()&&A(r())&&r().length>0&&s(Ot)})}var D=C(je,2);Dt(D);let Fe;Bt(D,s=>S(v,s),()=>l(v)),q(oe);var Ne=C(oe,2);{var At=s=>{var i=al(),g=V(i);{var w=u=>{Ze(u,{get text(){return ne()},right:!0,children:(_,z)=>{var n=J(),d=O(n);fe(d,t,"action",{},null),f(_,n)},$$slots:{default:!0}})},I=u=>{var _=J(),z=O(_);fe(z,t,"action",{},null),f(u,_)};x(g,u=>{ne()?u(w):u(I,!1)})}q(i),f(s,i)},It=(s,i)=>{{var g=w=>{var I=rl(),u=V(I);{var _=n=>{Ze(n,{get text(){return ne()},right:!0,children:(d,b)=>{Ye(d,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return qe()},leadingIcon:"external-link"})},$$slots:{default:!0}})},z=n=>{Ye(n,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return qe()},leadingIcon:"external-link"})};x(u,n=>{ne()?n(_):n(z,!1)})}q(I),f(w,I)};x(s,w=>{ye()&&w(g)},i)}};x(Ne,s=>{ae.action?s(At):s(It,!1)})}var Pt=C(Ne,2);{var Tt=s=>{var i=sl(),g=V(i);const w=P(()=>le("transition-transform duration-200",o()&&"rotate-180",!o()&&"rotate-0"));Ae(g,{name:"chevron-down",get class(){return l(w)}}),q(i),K(()=>Kt(i,"aria-label",o()?"Close options":"Open options")),Z("click",i,$(()=>o()?He():X())),f(s,i)};x(Pt,s=>{it()&&s(Tt)})}q(ke),q(ze);var Ge=C(ze,2);Xt(Ge,{get keepOpen(){return p()},get id(){return`${U()??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return gt()},get menuElement(){return l(we)},set menuElement(s){S(we,s)},children:(s,i)=>{var g=il(),w=O(g);{var I=n=>{var d=nl(),b=O(d);const L=P(()=>r().length===R().length);ee(b,{get disabled(){return l(L)},get label(){return dt()},$$events:{click:pt}});var k=C(b,2);const de=P(()=>r().length===0);ee(k,{get disabled(){return l(de)},get label(){return ct()},$$events:{click:yt}});var ce=C(k,2);$t(ce),f(n,d)};x(w,n=>{p()&&A(r())&&n(I)})}var u=C(w,2);Je(u,1,()=>l(E),Qe,(n,d)=>{const b=P(()=>kt(l(d),r())),L=P(()=>Ce(l(d)));ee(n,{get selected(){return l(b)},get label(){return l(L)},get class(){return vt()},$$events:{click:()=>_t(l(d))}})},n=>{var d=J(),b=O(d);{var L=k=>{ee(k,{disabled:!0,get label(){return at()}})};x(b,k=>{Ee()===!1&&k(L)})}f(n,d)});var _=C(u,2);{var z=n=>{ee(n,{disabled:!0,get label(){return ft()},$$slots:{leading:(d,b)=>{Ae(d,{slot:"leading",name:"spinner",class:"animate-spin"})}}})};x(_,n=>{Ee()&&n(z)})}f(s,g)},$$slots:{default:!0},$$legacy:!0});var Mt=C(Ge,2);{var Vt=s=>{var i=ol(),g=V(i,!0);q(i),K(()=>te(g,Me())),f(s,i)};x(Mt,s=>{Me()&&!Ve()&&s(Vt)})}K((s,i,g)=>{We(ke,1,s,"svelte-8zxxzt"),We(oe,1,i,"svelte-8zxxzt"),Fe=Ht(D,Fe,{id:U(),placeholder:st(),required:he(),readonly:nt(),disabled:Te(),type:"text",value:l(y),class:g,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${U()??""}-listbox`,"aria-expanded":o(),"aria-required":he(),"aria-autocomplete":"list","data-testid":Q["data-testid"]??U(),...me},"svelte-8zxxzt")},[()=>Ue(le(el({variant:De()}),!Ve()&&De()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",Te()&&"opacity-50",B())),()=>Ue(le("input-wrapper",p()&&"gap-1",p()&&"m-1",re()&&p()&&"ml-2")),()=>le("combobox-input",p()?r().length>0||re()?"indent-0":"indent-1":"indent-2",B())],P),Z("focus",D,$(X)),Z("input",D,$(Lt)),Z("keydown",D,$(wt)),Z("click",D,$(zt)),f(e,h)},$$slots:{default:!0}}),et(),be()}export{Pl as C};
