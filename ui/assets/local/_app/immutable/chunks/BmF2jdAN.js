import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as be,f as N,b as he,m as _,l as Y,a as Ye,t as K,c as l,e as x,s as p,d as a,g as e,ah as me,r as f,n as H}from"./DYX0w8bX.js";import{s as w}from"./CxFVcq4O.js";import{i as we}from"./B_BuKjdB.js";import{c as Z,a as v,t as ae,b as ee}from"./Bz76f8pg.js";import{s as te}from"./CFGOF_JX.js";import{i as ye}from"./CZRFLhJG.js";import{p as m}from"./D9WZReL3.js";import{s as $e,a as Ze,b as ve}from"./CgU0heln.js";import{a as et,w as tt}from"./DsexP6Wk.js";import{p as at}from"./C5eDCw4x.js";import{A as rt}from"./DsBGK4n-.js";import{C as ge}from"./BCd-yKwr.js";import{I as _e}from"./CfUefy9_.js";import{E as st}from"./DYjS6aIf.js";import{M as ot}from"./CZPgF_P_.js";import{T as nt,a as xe}from"./BerCweRD.js";import{t as r}from"./D2OY9xdY.js";function lt(M,s){be(s,!1);const[re,V]=$e(),Q=()=>Ze(at,"$page",re);let A=m(s,"isCloud",8,!1);ye();var y=Z(),C=N(y);{var P=c=>{var n=Z(),u=N(n);te(u,s,"default",{},null),v(c,n)},T=c=>{var n=Z(),u=N(n);te(u,s,"fallback",{},null),v(c,n)};we(C,c=>{var n,u,$;A()||($=(u=(n=Q().data)==null?void 0:n.settings)==null?void 0:u.runtimeEnvironment)!=null&&$.isCloud?c(P):c(T,!1)})}v(M,y),he(),V()}const ke={spec:{name:"",descriptionString:"",target:{worker:{namespace:"",taskQueue:""}},allowedCallerNamespaces:[]}},fe=tt(ke);var it=ae('<div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!>',1),ct=ae("<!> <!>",1),ut=ae('<div class="flex w-full flex-col gap-4 xl:w-1/2"><!> <div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!> <!> <!> <!> <div><!> <p class="my-2 text-xs text-secondary">Do not include sensitive data.</p></div> <!></div> <!>',1);function Lt(M,s){be(s,!1);const[re,V]=$e(),Q=_(),A=_();var y,C,P,T,c,n,u,$,j;let o=m(s,"endpoint",8,void 0),Ne=m(s,"targetNamespaceList",24,()=>[]),se=m(s,"callerNamespaceList",24,()=>[]),z=m(s,"error",8,void 0),Ce=m(s,"nameDisabled",8,!1),Pe=m(s,"isCloud",8,!0),Te=m(s,"nameHintText",8),oe=m(s,"nameRegexPattern",8),k=_(((y=o()===null||o()===void 0?void 0:o().spec)===null||y===void 0?void 0:y.name)||""),q=_(((C=o()===null||o()===void 0?void 0:o().spec)===null||C===void 0?void 0:C.descriptionString)||""),L=_(((c=(T=(P=o()===null||o()===void 0?void 0:o().spec)===null||P===void 0?void 0:P.target)===null||T===void 0?void 0:T.worker)===null||c===void 0?void 0:c.namespace)||""),I=_((($=(u=(n=o()===null||o()===void 0?void 0:o().spec)===null||n===void 0?void 0:n.target)===null||u===void 0?void 0:u.worker)===null||$===void 0?void 0:$.taskQueue)||""),D=_(((j=o()===null||o()===void 0?void 0:o().spec)===null||j===void 0?void 0:j.allowedCallerNamespaces)||[]),E=_(!1);const qe=(t,g,d,i,b)=>{ve(fe,{spec:{name:t,descriptionString:g,target:{worker:{namespace:d,taskQueue:i}},allowedCallerNamespaces:b}})};et(()=>{ve(fe,ke)}),Y(()=>(e(k),e(q),e(L),e(I),e(D)),()=>{qe(e(k),e(q),e(L),e(I),e(D))}),Y(()=>me(se()),()=>{p(Q,se().map(t=>({value:t.namespace,label:t.namespace})))}),Y(()=>me(oe()),()=>{p(A,t=>oe().test(t))}),Ye(),ye();var ne=ut(),B=N(ne),le=x(B);const Le=a(()=>!e(k)||!e(A)(e(k))),Ie=a(()=>r("nexus.endpoint-name")),De=a(()=>r("nexus.endpoint-name-placeholder"));_e(le,{required:!0,get disabled(){return Ce()},get error(){return e(Le)},get hintText(){return Te()},get label(){return e(Ie)},id:"name",maxLength:255,get placeholder(){return e(De)},get value(){return e(k)},set value(t){p(k,t)},$$legacy:!0});var G=l(le,2),J=x(G),Ee=x(J,!0);f(J);var ie=l(J,2),Re=x(ie,!0);f(ie),f(G);var ce=l(G,2);const Se=a(()=>r("nexus.target-namespace")),Ke=a(()=>r("common.no-results")),Qe=a(()=>!!e(L)),Ae=a(()=>r("nexus.select-namespace"));ge(ce,{get label(){return e(Se)},get noResultsText(){return e(Ke)},get valid(){return e(Qe)},error:"Please select a target Namespace.",required:!0,id:"target-namespace",get placeholder(){return e(Ae)},leadingIcon:"namespace-switcher",get options(){return Ne()},optionValueKey:"namespace",minSize:32,get value(){return e(L)},set value(t){p(L,t)},$$legacy:!0});var ue=l(ce,2);const Fe=a(()=>!e(I)),He=a(()=>r("common.task-queue")),Me=a(()=>r("nexus.task-queue-placeholder"));_e(ue,{required:!0,get error(){return e(Fe)},get label(){return e(He)},id:"task-queue",get placeholder(){return e(Me)},get value(){return e(I)},set value(t){p(I,t)},$$legacy:!0});var de=l(ue,2);lt(de,{get isCloud(){return Pe()},children:(t,g)=>{var d=it(),i=N(d),b=x(i),U=x(b,!0);f(b);var F=l(b,2),R=x(F,!0);f(F),f(i);var W=l(i,2);const h=a(()=>r("nexus.allowed-caller-namespaces")),S=a(()=>r("common.no-results")),Ue=a(()=>!!e(D).length),We=a(()=>r("nexus.select-namespaces"));ge(W,{id:"caller-namespace-filter-menu",multiselect:!0,displayChips:!1,get options(){return e(Q)},get label(){return e(h)},leadingIcon:"search",get noResultsText(){return e(S)},get valid(){return e(Ue)},error:"Please select at least one Namespace.",get placeholder(){return e(We)},optionValueKey:"value",optionLabelKey:"label",get value(){return e(D)},set value(X){p(D,X)},$$legacy:!0}),K((X,Xe)=>{w(U,X),w(R,Xe)},[()=>r("nexus.access-policy"),()=>r("nexus.allowed-caller-namespaces-description")],a),v(t,d)},$$slots:{default:!0}});var pe=l(de,2);nt(pe,{children:(t,g)=>{var d=ct(),i=N(d);const b=a(()=>e(E)===!1);xe(i,{get active(){return e(b)},"data-testid":"description-editor",$$events:{click:()=>p(E,!1)},children:(R,W)=>{H();var h=ee();K(S=>w(h,S),[()=>r("common.description")],a),v(R,h)},$$slots:{default:!0}});var U=l(i,2);const F=a(()=>e(E)===!0);xe(U,{get active(){return e(F)},"data-testid":"description-preview",$$events:{click:()=>p(E,!0)},children:(R,W)=>{H();var h=ee();K(S=>w(h,S),[()=>r("common.preview")],a),v(R,h)},$$slots:{default:!0}}),v(t,d)},$$slots:{default:!0}});var O=l(pe,2),Ve=x(O);{var je=t=>{ot(t,{get content(){return e(q)}})},ze=t=>{st(t,{get content(){return e(q)},$$events:{change:g=>p(q,g.detail.value)}})};we(Ve,t=>{e(E)?t(je):t(ze,!1)})}H(2),f(O);var Be=l(O,2);te(Be,s,"footer",{},null),f(B);var Ge=l(B,2);const Je=a(()=>{var t;return(t=z())==null?void 0:t.statusText}),Oe=a(()=>!z());rt(Ge,{get title(){return e(Je)},intent:"error",get hidden(){return e(Oe)},children:(t,g)=>{H();var d=ee();K(()=>{var i;return w(d,(i=z())==null?void 0:i.message)}),v(t,d)},$$slots:{default:!0}}),K((t,g)=>{w(Ee,t),w(Re,g)},[()=>r("nexus.target"),()=>r("nexus.target-description")],a),v(M,ne),he(),V()}export{Lt as N,fe as e};
