import"./Bzak7iHL.js";import"./69_IOA4Y.js";import{p as L,t as N,i as U,c as h,r as j,e as y,b as G,g as d,o as v,n as H,k as S,j as q,s as c,m as C}from"./CeuSLZ0_.js";import{e as P,s as R}from"./BWPCX_-J.js";import{i as T}from"./Bs0RATCS.js";import{s as W,a as z}from"./BqQLnCe4.js";import{g as D}from"./v74mFwfO.js";import{B as J}from"./DGmPcK68.js";import{L as K}from"./PV4uXEXA.js";import{t as n}from"./BXv1jDVW.js";import{g as M}from"./DojrVGEt.js";import{t as O}from"./2Q3ZmeKt.js";import{i as Q,a as V}from"./U4jslUKK.js";import{l as X}from"./B4NlAMcR.js";import{t as _}from"./Dm9NLqzZ.js";import{p as Y}from"./BDfAQ6r3.js";import{r as Z}from"./B-pZrLC2.js";var ee=N('<div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><!> <input id="import-event-history-file-upload" class="import-input block border border-slate-200 p-2" type="file" accept=".json"> <!></div>');function ye($,x){L(x,!1);const[b,E]=W(),w=()=>z(X,"$lastUsedNamespace",b);let o,a=C(!1);const k=async e=>{var s;const t=e.target,i=(s=t==null?void 0:t.files)===null||s===void 0?void 0:s[0],r=new FileReader;i&&(r.readAsText(i),r.onload=()=>{var p,m;try{const g=(m=(p=r==null?void 0:r.result)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:"";o=Y(g),c(a,!0)}catch{_.push({variant:"error",message:n("events.event-history-load-error")}),c(a,!1)}})},A=async()=>{try{const e=await O(Array.isArray(o)?o:o==null?void 0:o.events),s=M(e);Q.set(e),V.set(s),c(a,!1);const t=Z(w(),"feed");D(t)}catch(e){console.error(e),_.push({variant:"error",message:n("events.event-history-import-error")})}};T();var l=ee(),f=U(l);const B=v(()=>n("events.import-event-history-file-upload"));K(f,{hidden:!0,for:"import-event-history-file-upload",get label(){return d(B)}});var u=h(f,2),F=h(u,2);const I=v(()=>!d(a));J(F,{leadingIcon:"file-upload",get disabled(){return d(I)},$$events:{click:A},children:(e,s)=>{H();var t=S();q(i=>R(t,i),[()=>n("common.import")],v),y(e,t)},$$slots:{default:!0}}),j(l),P("change",u,k),y($,l),G(),E()}export{ye as E};
