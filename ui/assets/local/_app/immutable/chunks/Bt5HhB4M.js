import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as G,b as H,f as C,t as D,G as l,L as i,e as W,s as r,m as y,g as a,o as v,j as x,r as T,h as U}from"./yn9lut7I.js";import{s as M}from"./B95CcGmx.js";import{i as L}from"./Bk16Yghv.js";import{p as f,s as N,c as z}from"./C6jR5PNA.js";import{M as B}from"./C-X69kVh.js";import{t as e}from"./DEjs8ZrU.js";import{j as V,t as X}from"./1zfUjPTn.js";import{t as F}from"./D9gMh8gV.js";import{g as J}from"./D0XF6wMs.js";import{i as K}from"./CXxME4Cq.js";import{I as Y}from"./bRa08td7.js";var Z=C('<h3 slot="title"> </h3>'),ee=C("<p> </p>");function ke(o,t){G(t,!1);const[w,E]=N();let d=f(t,"open",12),P=f(t,"workflow",8),A=f(t,"namespace",8),I=f(t,"refresh",8),h=y(),s=y("");const p=J(),_=async()=>{r(s,""),r(h,!0);try{await V({namespace:A(),workflow:P(),identity:p}),d(!1),z(I(),Date.now()),F.push({id:"workflow-cancelation-success-toast",message:e("workflows.cancel-success")})}catch(k){r(s,K(k)?k.message:e("common.unknown-error"))}finally{r(h,!1)}};L();{let k=v(()=>(i(e),l(()=>e("common.confirm")))),j=v(()=>(i(e),l(()=>e("common.cancel"))));B(o,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return a(k)},get cancelText(){return a(j)},get loading(){return a(h)},confirmType:"destructive",get error(){return a(s)},set error(c){r(s,c)},get open(){return d()},set open(c){d(c)},$$events:{confirmModal:_},$$slots:{title:(c,g)=>{var m=Z(),n=x(m,!0);T(m),D($=>M(n,$),[()=>(i(e),l(()=>e("workflows.cancel-modal-title")))]),W(c,m)},content:(c,g)=>{var m=ee(),n=x(m,!0);T(m),D($=>M(n,$),[()=>(i(e),l(()=>e("workflows.cancel-modal-confirmation")))]),W(c,m)}},$$legacy:!0})}H(),E()}var te=C('<h3 slot="title"> </h3>'),re=C('<div slot="content"><p> </p> <!></div>');function ge(o,t){G(t,!1);const[w,E]=N();let d=f(t,"open",12),P=f(t,"workflow",8),A=f(t,"namespace",8),I=f(t,"refresh",8),h=f(t,"first",8,void 0),s=y(""),p=y(""),_=y(!1);const k=J(),j=()=>{d(!1),r(s,"")},c=async()=>{r(p,""),r(_,!0);try{await X({workflow:P(),namespace:A(),reason:a(s),first:h(),identity:k}),d(!1),r(s,""),z(I(),Date.now()),F.push({id:"workflow-termination-success-toast",message:e("workflows.terminate-success")})}catch(g){r(p,K(g)?g.message:e("common.unknown-error"))}finally{r(_,!1)}};L();{let g=v(()=>(i(e),l(()=>e("workflows.terminate")))),m=v(()=>(i(e),l(()=>e("common.cancel"))));B(o,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get loading(){return a(_)},get confirmText(){return a(g)},get cancelText(){return a(m)},confirmType:"destructive",get error(){return a(p)},set error(n){r(p,n)},get open(){return d()},set open(n){d(n)},$$events:{cancelModal:j,confirmModal:c},$$slots:{title:(n,$)=>{var u=te(),b=x(u,!0);T(u),D(R=>M(b,R),[()=>(i(e),l(()=>e("workflows.terminate-modal-title")))]),W(n,u)},content:(n,$)=>{var u=re(),b=x(u),R=x(b,!0);T(b);var O=U(b,2);{let q=v(()=>(i(e),l(()=>e("common.reason-placeholder")))),Q=v(()=>(i(e),l(()=>e("common.reason-placeholder"))));Y(O,{id:"workflow-termination-reason",class:"mt-4",get placeholder(){return a(q)},get label(){return a(Q)},labelHidden:!0,get value(){return a(s)},set value(S){r(s,S)},$$legacy:!0})}T(u),D(q=>M(R,q),[()=>(i(e),l(()=>e("workflows.terminate-modal-confirmation")))]),W(n,u)}},$$legacy:!0})}H(),E()}const ve=(o,t,w)=>!o.disableWriteActions&&!o.workflowCancelDisabled&&!t.namespaceWriteDisabled(w),he=(o,t,w)=>!o.disableWriteActions&&!o.workflowResetDisabled&&!t.namespaceWriteDisabled(w),_e=(o,t,w)=>!o.disableWriteActions&&!o.workflowTerminateDisabled&&!t.namespaceWriteDisabled(w);export{ke as C,ge as T,_e as a,he as b,ve as w};
