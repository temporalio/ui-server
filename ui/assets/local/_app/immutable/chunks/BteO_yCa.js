import"./CWj6FrbW.js";import{o as Gt}from"./SxBBeV83.js";import{p as ot,l as Rt,s as fe,m as Bt,M as O,a as qt,i as ge,c as V,e as s,b as lt,f as E,j as v,h as c,r as l,t as x,I as le,u as Kt,g as e,o as Ye,n as H,k as U,at as Ze,au as Nt,v as n,q as Ht}from"./BzuLCQNf.js";import{s as h,d as Vt,e as $e}from"./HOnlAALn.js";import{i as d}from"./Be-bjpec.js";import{e as Jt,i as Qt}from"./DHcq7Esf.js";import{s as Ie}from"./Brfhuxqj.js";import{c as Se,s as De}from"./wWuJlbLq.js";import{l as Wt,p as j,a as Ce,s as Xt,c as Me}from"./DdNojIXk.js";import{p as ve}from"./CVgXBNUb.js";import{t as Yt}from"./DQtg0T9O.js";import{B as _e}from"./BvcST-tr.js";import{C as Fe}from"./Vk2HnYFn.js";import{I as et}from"./CKL6Zfw6.js";import{L as tt}from"./4popcYKk.js";import{T as Le}from"./QGm-pl5O.js";import{t as T}from"./DEjs8ZrU.js";import{i as m,e as Zt,a as $t,b as ea}from"./Cg-3ghoV.js";import{i as ta}from"./RipDN3Bf.js";import{a as aa}from"./ewzzm9Vv.js";import{E as na,d as at,C as nt,e as ra,M as ia,a as sa,b as oa}from"./CeaJ37XL.js";import{f as rt,s as la}from"./ByTIZu23.js";import{b as va}from"./BqYmNl_n.js";import{g as it}from"./CrZfxCV7.js";import{d as da,g as ca,b as ua}from"./Pko39ypC.js";import{h as ue,p as ma}from"./CrJ7WDl9.js";import{c as st}from"./BufVb_yv.js";import{t as fa}from"./DXPy4zJt.js";import"./69_IOA4Y.js";import{i as _a,t as ye}from"./W-5sOwmb.js";import{P as ga}from"./BlAr8iaR.js";var ya=E('<p class="whitespace-nowrap text-right text-xs"> </p>'),xa=E('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),ba=E('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),ha=E('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function me(xe,t){const te=Wt(t,["children","$$slots","$$events","$$legacy"]);ot(t,!1);const J=Bt();let S=j(t,"key",8),C=j(t,"value",8),ae=j(t,"attributes",8),ne=j(t,"showKey",8,!0);Rt(()=>(O(S()),O(ae())),()=>{fe(J,da(S(),ae()))}),qt(),_a();var Q=ge(),re=V(Q);{var ie=z=>{var G=ha(),W=v(G);{var se=g=>{var y=ya(),k=v(y,!0);l(y),x(X=>h(k,X),[()=>(O(rt),O(S()),le(()=>rt(S())))]),s(g,y)};d(W,g=>{ne()&&g(se)})}var be=c(W,2);{var he=g=>{var y=ba(),k=v(y);ga(k,{get value(){return C()},key:"payloads",children:(R,w=Kt)=>{var A=xa(),D=v(A),M=v(D),B=v(M,!0);l(M),l(D),l(A),x((o,Y)=>{De(A,1,o,"svelte-cy5z6t"),h(B,Y)},[()=>Se((O(ye),O(te),le(()=>ye("payload",te.class)))),()=>(w(),le(()=>w().slice(0,60)))]),s(R,A)},$$slots:{default:!0}}),l(y),s(g,y)},ke=g=>{var y=ge(),k=V(y);{var X=w=>{{let A=Ye(()=>(O(T),le(()=>T("common.copy-icon-title")))),D=Ye(()=>(O(T),le(()=>T("common.copy-success-icon-title"))));Fe(w,{get copyIconTitle(){return e(A)},get copySuccessIconTitle(){return e(D)},get content(){return C()},"container-class":"truncate",children:(M,B)=>{na(M,{get value(){return C()},get attributes(){return ae()},get type(){return e(J)},class:"truncate"})},$$slots:{default:!0}})}},R=w=>{_e(w,{type:"subtle",class:"block select-none truncate",children:(A,D)=>{H();var M=U();x(()=>h(M,C())),s(A,M)},$$slots:{default:!0}})};d(k,w=>{e(J)!=="none"?w(X):w(R,!1)},!0)}s(g,y)};d(be,g=>{typeof C()=="object"?g(he):g(ke,!1)})}l(G),s(z,G)};d(re,z=>{S()&&z(ie)})}s(xe,Q),lt()}var ka=E('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),wa=E('<td class="font-mono"><!></td>'),pa=E(" <!>",1),Ta=E("<!> <!>",1),Ea=E('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Aa=E('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Pa=E('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Ia=E('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function on(xe,t){ot(t,!0);const te=()=>Ce(Yt,"$timestamp",C),J=()=>Ce(aa,"$authUser",C),S=()=>Ce(ta,"$isCloud",C),[C,ae]=Xt();var ne,Q,re,ie,z,G,W,se;let be=j(t,"compact",3,!1),he=j(t,"expanded",3,!1),ke=j(t,"onRowClick",3,()=>{}),g=j(t,"hoveredEventId",15),y=Ze(Nt(he())),k=Ze(void 0);const X=n(()=>m(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),R=n(()=>ve.params),w=n(()=>e(R).workflow),A=n(()=>e(R).run),D=n(()=>e(R).namespace),M=n(()=>st({eventId:t.event.id,namespace:e(D),workflow:e(w),run:e(A)})),B=n(()=>va(t.event)),o=n(()=>m(t.event)?t.event.events.get(e(X)):t.event),Y=n(()=>it({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:m(e(o))?(ne=e(o).initialEvent)===null||ne===void 0?void 0:ne.eventTime:e(o)===null||e(o)===void 0?void 0:e(o).eventTime,includeMillisecondsForUnderSecond:!0})),de=n(()=>m(t.event)?it({start:(Q=t.event.initialEvent)===null||Q===void 0?void 0:Q.eventTime,end:(re=t.event.lastEvent)===null||re===void 0?void 0:re.eventTime,includeMillisecondsForUnderSecond:!0}):""),vt=n(()=>Zt(t.event)),dt=n(()=>$t(t.event)),ct=n(()=>ea(t.event)),ut=n(()=>m(t.event)?t.event.label:ue(t.event)?T("events.category.local-activity"):la(t.event.name)),F=n(()=>ue(t.event)?void 0:ca(m(t.event)?t.event.initialEvent:t.event)),q=n(()=>ua(m(t.event)?t.event.lastEvent:t.event,e(F)===null||e(F)===void 0?void 0:e(F).key)),K=n(()=>m(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),we=n(()=>e(K)&&(e(K)===null||e(K)===void 0?void 0:e(K).paused)),oe=n(()=>m(t.event)&&t.event.isPending&&(((ie=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||ie===void 0?void 0:ie.attempt)||((z=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||z===void 0?void 0:z.attempt))),Oe=n(()=>m(t.event)&&!t.event.isPending&&((W=(G=t.event.eventList.find(ma))===null||G===void 0?void 0:G.attributes)===null||W===void 0?void 0:W.attempt)),mt=n(()=>be()&&(e(q)===null||e(q)===void 0?void 0:e(q).key)&&(e(q)===null||e(q)===void 0?void 0:e(q).key)!==(e(F)===null||e(F)===void 0?void 0:e(F).key)&&!(!((se=e(o)===null||e(o)===void 0?void 0:e(o).userMetadata)===null||se===void 0)&&se.summary)),Ue=n(()=>te()(e(o)===null||e(o)===void 0?void 0:e(o).eventTime)),je=n(()=>te()(e(o)===null||e(o)===void 0?void 0:e(o).eventTime,{format:"short"})),ft=a=>{fe(y,!e(y)),a.stopPropagation(),ke()()},_t=()=>{g(t.event.id)},gt=()=>{g(void 0)};let yt=(a,r)=>{var i;return(i=a==null?void 0:a.eventIds)===null||i===void 0?void 0:i.has(r)};Gt(async()=>{ue(t.event)?fe(k,await at(t.event,{namespace:ve.params.namespace,settings:ve.data.settings,accessToken:J().accessToken}),!0):m(t.event)&&ue(t.event.initialEvent)&&fe(k,await at(t.event.initialEvent,{namespace:ve.params.namespace,settings:ve.data.settings,accessToken:J().accessToken}),!0)});var ze=Ia(),L=V(ze);L.__click=ft;var Ge=v(L);{var xt=a=>{var r=ka(),i=v(r);Jt(i,21,()=>t.event.eventList,Qt,(b,f)=>{{let u=n(()=>st({eventId:e(f).id,namespace:e(D),workflow:e(w),run:e(A)}));tt(b,{"data-testid":"link",get href(){return e(u)},children:(p,I)=>{H();var _=U();x(()=>h(_,e(f).id)),s(p,_)},$$slots:{default:!0}})}}),l(i),l(r),s(a,r)},bt=a=>{var r=wa(),i=v(r);tt(i,{"data-testid":"link",get href(){return e(M)},children:(b,f)=>{H();var u=U();x(()=>h(u,t.event.id)),s(b,u)},$$slots:{default:!0}}),l(r),s(a,r)};d(Ge,a=>{m(t.event)?a(xt):a(bt,!1)})}var pe=c(Ge),ht=v(pe);{let a=n(()=>m(t.event)&&!e(de)||!e(Y)),r=n(()=>m(t.event)?`Duration: ${e(de)}`:`+${e(Y)}`);Le(ht,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,b)=>{{let f=n(()=>T("common.copy-icon-title")),u=n(()=>T("common.copy-success-icon-title"));Fe(i,{get copyIconTitle(){return e(f)},get copySuccessIconTitle(){return e(u)},get content(){return e(je)},children:(p,I)=>{H();var _=U();x(()=>h(_,e(je))),s(p,_)},$$slots:{default:!0}})}},$$slots:{default:!0}})}l(pe);var Te=c(pe),kt=v(Te);{let a=n(()=>m(t.event)&&!e(de)||!e(Y)),r=n(()=>m(t.event)?`Duration: ${e(de)}`:`+${e(Y)}`);Le(kt,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,b)=>{{let f=n(()=>T("common.copy-icon-title")),u=n(()=>T("common.copy-success-icon-title"));Fe(i,{get copyIconTitle(){return e(f)},get copySuccessIconTitle(){return e(u)},get content(){return e(Ue)},children:(p,I)=>{H();var _=U();x(()=>h(_,e(Ue))),s(p,_)},$$slots:{default:!0}})}},$$slots:{default:!0}})}l(Te);var Ee=c(Te),Ae=v(Ee),Re=v(Ae);et(Re,{get name(){return nt[t.event.category].name},get title(){return nt[t.event.category].title},class:"mr-1 inline"});var wt=c(Re);l(Ae),l(Ee);var Pe=c(Ee),Be=v(Pe),qe=v(Be);{var pt=a=>{{let r=n(()=>e(we)?"warning":e(oe)>1?"danger":"default");_e(a,{class:"mr-1",get type(){return e(r)},children:(i,b)=>{var f=Ta(),u=V(f);{let P=n(()=>ye("mr-1 inline",e(oe)>1&&"font-bold text-red-400",e(we)&&"font-bold text-yellow-700")),N=n(()=>e(we)?"pause":"retry");et(u,{get class(){return e(P)},get name(){return e(N)}})}var p=c(u),I=c(p);{var _=P=>{var N=pa(),Z=V(N),ce=c(Z);{var Ot=$=>{const Qe=n(()=>{var ee;return fa({date:(ee=e(K))==null?void 0:ee.scheduledTime,negativeDefault:""})});var We=ge(),Ut=V(We);{var jt=ee=>{var Xe=U();x(zt=>h(Xe,`• ${zt??""}
                ${e(Qe)??""}`),[()=>T("workflows.next-retry")]),s(ee,Xe)};d(Ut,ee=>{e(Qe)&&ee(jt)})}s($,We)};d(ce,$=>{e(oe)>1&&$(Ot)})}x(()=>{var $;return h(Z,`/ ${((($=e(K))==null?void 0:$.maximumAttempts)||"∞")??""} `)}),s(P,N)};d(I,P=>{e(K)&&P(_)})}x(P=>h(p,` ${P??""}
          ${e(oe)??""} `),[()=>T("workflows.attempt")]),s(i,f)},$$slots:{default:!0}})}};d(qe,a=>{e(oe)&&a(pt)})}var Ke=c(qe,2);{var Tt=a=>{me(a,Me(()=>e(F),{get attributes(){return e(B)}}))};d(Ke,a=>{var r;!e(k)&&((r=e(F))!=null&&r.key)&&a(Tt)})}var Ne=c(Ke,2);{var Et=a=>{me(a,Me(()=>e(k),{get attributes(){return e(B)}}))};d(Ne,a=>{e(k)&&e(k).key&&a(Et)})}var He=c(Ne,2);{var At=a=>{ia(a,{get value(){return e(o).userMetadata.summary},children:Ht,$$slots:{default:(r,i)=>{const b=n(()=>i.decodedValue);var f=ge(),u=V(f);{var p=I=>{var _=Ea(),P=c(v(_),2);_e(P,{type:"secondary",class:"block select-none truncate",children:(N,Z)=>{H();var ce=U();x(()=>h(ce,e(b))),s(N,ce)},$$slots:{default:!0}}),l(_),s(I,_)};d(u,I=>{e(b)&&I(p)})}s(r,f)}}})};d(He,a=>{var r,i;(i=(r=e(o))==null?void 0:r.userMetadata)!=null&&i.summary&&a(At)})}var Ve=c(He,2);{var Pt=a=>{sa(a,{get link(){return e(o).links[0]},class:"max-w-xl",linkClass:"truncate"})};d(Ve,a=>{var r,i;(i=(r=e(o))==null?void 0:r.links)!=null&&i.length&&a(Pt)})}var Je=c(Ve,2);{var It=a=>{{let r=n(()=>e(Oe).toString());me(a,{key:"attempt",get value(){return e(r)},get attributes(){return e(B)}})}};d(Je,a=>{e(Oe)&&a(It)})}var Ct=c(Je,2);{var Mt=a=>{me(a,Me(()=>e(q),{get attributes(){return e(B)}}))};d(Ct,a=>{e(mt)&&a(Mt)})}l(Be),l(Pe);var Lt=c(Pe);{var St=a=>{var r=Aa(),i=v(r),b=v(i);{var f=u=>{{let p=n(()=>T("workflows.estimated-billable-actions"));Le(u,{get text(){return e(p)},topRight:!0,children:(I,_)=>{_e(I,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(P,N)=>{H();var Z=U();x(()=>h(Z,t.event.billableActions)),s(P,Z)},$$slots:{default:!0}})},$$slots:{default:!0}})}};d(b,u=>{t.event.billableActions&&u(f)})}l(i),l(r),s(a,r)};d(Lt,a=>{S()&&a(St)})}l(L);var Dt=c(L,2);{var Ft=a=>{var r=Pa(),i=v(r),b=v(i);oa(b,{get group(){return t.group},get event(){return e(o)}}),l(i),l(r),x(()=>Ie(i,"colspan",S()?5:4)),s(a,r)};d(Dt,a=>{e(y)&&a(Ft)})}x((a,r)=>{De(L,1,a,"svelte-1cvp1uf"),Ie(L,"id",`${t.event.id}-${t.index}`),Ie(L,"data-eventid",t.event.id),De(Ae,1,r),h(wt,` ${e(ut)??""}`)},[()=>Se(ye("hover:cursor-pointer",e(vt)&&"!bg-red-400/40 hover:!bg-red-400/60",e(dt)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(ct)&&"!bg-pink-700/30 hover:!bg-pink-700/50",yt(t.group,g())&&"active")),()=>Se(ra({category:t.event.category}))]),$e("mouseenter",L,_t),$e("mouseleave",L,gt),s(xe,ze),lt(),ae()}Vt(["click"]);export{on as E,me as a};
