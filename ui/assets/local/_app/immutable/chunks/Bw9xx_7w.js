import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as H,b as N,f as C,t as D,I as l,M as i,e as W,s as r,m as y,g as a,o as v,j as x,r as T,h as U}from"./BBjqMsu1.js";import{s as M}from"./DHOm-mSm.js";import{i as z}from"./DIZ-FoJG.js";import{p as f,s as B,b as F}from"./D42yUzBQ.js";import{M as G}from"./D6RmGxjd.js";import{t as e}from"./DEjs8ZrU.js";import{j as V,t as X}from"./ZhYkj3dx.js";import{t as J}from"./BTcyvo72.js";import{g as K}from"./ck0AZ_wG.js";import{i as L}from"./DRcmmJhF.js";import{I as Y}from"./vJ2wLM1D.js";var Z=C('<h3 slot="title"> </h3>'),ee=C("<p> </p>");function ke(o,t){H(t,!1);const[w,E]=B();let d=f(t,"open",12),I=f(t,"workflow",8),P=f(t,"namespace",8),A=f(t,"refresh",8),h=y(),s=y("");const p=K(),_=async()=>{r(s,""),r(h,!0);try{await V({namespace:P(),workflow:I(),identity:p}),d(!1),F(A(),Date.now()),J.push({id:"workflow-cancelation-success-toast",message:e("workflows.cancel-success")})}catch(k){r(s,L(k)?k.message:e("common.unknown-error"))}finally{r(h,!1)}};z();{let k=v(()=>(i(e),l(()=>e("common.confirm")))),j=v(()=>(i(e),l(()=>e("common.cancel"))));G(o,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return a(k)},get cancelText(){return a(j)},get loading(){return a(h)},confirmType:"destructive",get error(){return a(s)},set error(c){r(s,c)},get open(){return d()},set open(c){d(c)},$$events:{confirmModal:_},$$slots:{title:(c,g)=>{var m=Z(),n=x(m,!0);T(m),D(b=>M(n,b),[()=>(i(e),l(()=>e("workflows.cancel-modal-title")))]),W(c,m)},content:(c,g)=>{var m=ee(),n=x(m,!0);T(m),D(b=>M(n,b),[()=>(i(e),l(()=>e("workflows.cancel-modal-confirmation")))]),W(c,m)}},$$legacy:!0})}N(),E()}var te=C('<h3 slot="title"> </h3>'),re=C('<div slot="content"><p> </p> <!></div>');function ge(o,t){H(t,!1);const[w,E]=B();let d=f(t,"open",12),I=f(t,"workflow",8),P=f(t,"namespace",8),A=f(t,"refresh",8),h=f(t,"first",8,void 0),s=y(""),p=y(""),_=y(!1);const k=K(),j=()=>{d(!1),r(s,"")},c=async()=>{r(p,""),r(_,!0);try{await X({workflow:I(),namespace:P(),reason:a(s),first:h(),identity:k}),d(!1),r(s,""),F(A(),Date.now()),J.push({id:"workflow-termination-success-toast",message:e("workflows.terminate-success")})}catch(g){r(p,L(g)?g.message:e("common.unknown-error"))}finally{r(_,!1)}};z();{let g=v(()=>(i(e),l(()=>e("workflows.terminate")))),m=v(()=>(i(e),l(()=>e("common.cancel"))));G(o,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get loading(){return a(_)},get confirmText(){return a(g)},get cancelText(){return a(m)},confirmType:"destructive",get error(){return a(p)},set error(n){r(p,n)},get open(){return d()},set open(n){d(n)},$$events:{cancelModal:j,confirmModal:c},$$slots:{title:(n,b)=>{var u=te(),$=x(u,!0);T(u),D(R=>M($,R),[()=>(i(e),l(()=>e("workflows.terminate-modal-title")))]),W(n,u)},content:(n,b)=>{var u=re(),$=x(u),R=x($,!0);T($);var O=U($,2);{let q=v(()=>(i(e),l(()=>e("common.reason-placeholder")))),Q=v(()=>(i(e),l(()=>e("common.reason-placeholder"))));Y(O,{id:"workflow-termination-reason",class:"mt-4",get placeholder(){return a(q)},get label(){return a(Q)},labelHidden:!0,get value(){return a(s)},set value(S){r(s,S)},$$legacy:!0})}T(u),D(q=>M(R,q),[()=>(i(e),l(()=>e("workflows.terminate-modal-confirmation")))]),W(n,u)}},$$legacy:!0})}N(),E()}const ve=(o,t,w)=>!o.disableWriteActions&&!o.workflowCancelDisabled&&!t.namespaceWriteDisabled(w),he=(o,t,w)=>!o.disableWriteActions&&!o.workflowResetDisabled&&!t.namespaceWriteDisabled(w),_e=(o,t,w)=>!o.disableWriteActions&&!o.workflowTerminateDisabled&&!t.namespaceWriteDisabled(w);export{ke as C,ge as T,_e as a,he as b,ve as w};
