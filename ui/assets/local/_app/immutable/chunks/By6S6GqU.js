import"./CWj6FrbW.js";import{o as ha}from"./r33Ll6et.js";import{p as Le,f as j,j as i,n as fe,k as $,t as O,e as v,h as u,r,u as X,g as e,v as a,b as Fe,i as le,c as U,d as wa,l as Ee,s as Z,m as pe,M as Q,a as vt,I as Pe,av as We,q as Ut,aP as xt,o as Ot,at as Dt,au as ka}from"./BBjqMsu1.js";import{s as C,d as ba,e as Rt}from"./DHOm-mSm.js";import{i as b}from"./DrCjka1e.js";import{e as Ke,i as Tt}from"./B8KdL4-8.js";import{s as pt}from"./CDFkFKEl.js";import{c as kt,s as et}from"./Cd9fk9Xa.js";import{s as ut,a as Qe,l as ct,p as W,c as yt}from"./D42yUzBQ.js";import{p as qe}from"./uV8NUiUQ.js";import{t as qt,T as Wt}from"./5sHaeCkN.js";import{c as Ta,B as Xe}from"./CylVXXRZ.js";import{C as Je}from"./CCD28ISS.js";import{I as bt}from"./cYmRoqvp.js";import{L as Ye}from"./CSbGqH0-.js";import{T as ht}from"./B-EYHHC0.js";import{t as _}from"./DEjs8ZrU.js";import{b as Kt,i as Y,e as Ia,c as Ea,d as Pa}from"./DFtahkkU.js";import{i as Aa}from"./_DUFHGLC.js";import{a as Ca}from"./DEsUSA2c.js";import{c as Sa,d as La,a as Fa}from"./BbHqrdf-.js";import{a as Qt,b as Xt,g as Jt}from"./D1GAMG9y.js";import{c as Ma,f as Oa,d as st,e as Da,h as Ra,j as Ha,k as ja,l as Na}from"./qGJqiGsV.js";import{g as $e,h as Ce,F as Va}from"./BsWBd0zM.js";import{f as tt,s as Yt}from"./ByTIZu23.js";import{c as Zt}from"./6zLfdY7q.js";import{o as Ht}from"./CtQjrHKC.js";import{c as jt,k as Ga,l as za,a as Ba,b as Nt}from"./DLSNOAeh.js";import{t as $t,P as Ua}from"./CxoYVO7_.js";import"./DAcYyk2F.js";import"./DGYYVAig.js";import"./BghEGSac.js";import"./CailMBF2.js";import"./BUApaBEI.js";import"./BnhKcfcd.js";import{s as Vt}from"./DMvnBdKo.js";import{C as Se}from"./CuY3ug9w.js";import{o as qa}from"./C8ejR22J.js";import{g as ea}from"./D5z13lFM.js";import"./69_IOA4Y.js";import{i as ft,t as dt}from"./DIZ-FoJG.js";import{p as ta}from"./oaW7T73P.js";import{a as Wa}from"./D7OjqCRS.js";import{s as Gt}from"./TZ42VP9a.js";import{P as lt}from"./C9ON7Aaq.js";const ot=6,Lr={height:ot*4,gutter:ot*8,radius:ot*1.5,fontSizeRatio:ot*4},Fr={height:32,radius:4},Ka={workflow:"workflow",signal:"signal",activity:"activity",nexus:"nexus",timer:"retention","local-activity":"feather","child-workflow":"relationship",update:"update",other:"terminal"},Mr=(s,t,n,d,f)=>{const{radius:m}=f,c=s[0],g=s[s.length-1];let x=!1,k="start",l=0;const p=c>1/2*n;let I=!p&&g<2/3*n&&!d;p&&(k="end"),I&&(l=s.indexOf(g));const S=1.5*m;let w=I?g+S:c-S;if(!I&&!p&&(x=!0,I=!0,w=c+S,s.length===2&&d&&s[1]-s[0]<n-s[1]&&(l=1,w=s[1]+S),s.length>2)){const T=s[1]-s[0];s[2]-s[1]>T&&(l=1,w=s[1]+S)}return{textPosition:[w,t],textIndex:l,textAnchor:k,backdrop:x}},Or=(s,t)=>{const n=t.find(f=>f.eventIds.has(s.id));return n?Array.from(n.eventIds).indexOf(s.id)===1&&n.eventList.length===3:!1},wt=(s,t)=>parseInt(s)===parseInt(t)-1,Qa=s=>{const t=Array.from(s.eventIds);return t.length===1?!0:t.length===2?wt(t[0],t[1]):t.length===3?wt(t[0],t[1])&&wt(t[1],t[2]):!1},Xa=(s,t)=>{const n=Kt(t,s);if(!n)return 0;if(n.level!==void 0)return n.level;const d=t.filter(c=>c.isPending&&c.id!==n.id).filter(c=>parseInt(c.initialEvent.id)<parseInt(n.initialEvent.id)),f=t.filter(c=>c.eventList.length>1&&!c.isPending&&c.id!==n.id).filter(c=>parseInt(c.initialEvent.id)<parseInt(n.initialEvent.id)).filter(c=>parseInt(c.lastEvent.id)>parseInt(n.initialEvent.id)),m=[...d,...f];return!m.length&&Qa(n)&&(n.level=0),n.level=m.length+1,n.level},Dr=(s,t,n,d,f)=>{const m=Kt(n,t);let c=0,g=0;if(!m)return{nextDistance:c,offset:g};if(m.eventList.length===1&&!m.isPending)return{nextDistance:c,offset:g};const x=$e(t)?m.eventList.indexOf(t):-1,k=$e(t)?m.eventList[x+1]:void 0;if((!$e(t)||t.category!=="workflow")&&(g=Xa(t,n)),!k&&!m.isPending)return{nextDistance:c,offset:g};let l=0;k&&$e(t)?l=parseInt(k.id)-parseInt(t.id):m.isPending&&$e(t)&&(l=s.length-parseInt(t.id)+2);const p=l*d;return c=f==="ascending"?p:-p,{nextDistance:c,offset:g}},zt=async(s,t)=>{var c,g,x,k,l,p,I,S,w,D,T;if(!("eventType"in s)||!Ce(s))return;const{namespace:n,settings:d,accessToken:f}=t,m={...d,codec:{...d==null?void 0:d.codec,endpoint:Jt(d),passAccessToken:Xt(d),includeCredentials:Qt(d)}};try{const H=await Sa(s.attributes,n,m,f),L=((x=(g=(c=s.markerRecordedEventAttributes)==null?void 0:c.details)==null?void 0:g.data)==null?void 0:x.payloads)||((p=(l=(k=s.markerRecordedEventAttributes)==null?void 0:k.details)==null?void 0:l.type)==null?void 0:p.payloads)||[];if(!(L!=null&&L.length))return;const E=La(H),P=(T=((S=(I=E==null?void 0:E.details)==null?void 0:I.data)==null?void 0:S.payloads)||((D=(w=E==null?void 0:E.details)==null?void 0:w.type)==null?void 0:D.payloads))==null?void 0:T[0],N=Ma(P);if(N)return Oa("ActivityType",N)}catch(H){console.error("Failed to decode local activity type:",H)}},Rr=s=>{if("eventList"in s)return s.eventList.find(Ce);if(Ce(s))return s},Ja=Ta(["whitespace-nowrap font-semibold md:text-base flex items-center gap-0.5"],{variants:{category:{workflow:"text-blue-700 dark:text-blue-400",activity:"text-purple-600 dark:text-purple-500","child-workflow":"text-cyan-600",timer:"text-yellow-600 dark:text-yellow-400",signal:"text-pink-600 dark:text-pink-400",update:"text-blue-600 dark:text-blue-400",other:"text-slate-700 dark:text-slate-300",nexus:"text-indigo-600 dark:text-indigo-400","local-activity":"text-slate-700 dark:text-slate-300",default:"text-purple-600 dark:text-purple-500"}}}),ke=(s,t=X,n=X)=>{var d=Za(),f=i(d),m=i(f,!0);r(f);var c=u(f,2),g=i(c);{var x=l=>{var p=$();O(()=>C(p,n())),v(l,p)},k=l=>{var p=le(),I=U(p);wa(I,()=>n()??X),v(l,p)};b(g,l=>{typeof n()=="string"||typeof n()=="number"?l(x):l(k,!1)})}r(c),r(d),O(()=>C(m,t())),v(s,d)};var Ya=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Za=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),$a=j("<!> ",1),en=j('<p class="text-sm text-secondary/80"> </p> <!>',1),tn=j('<p class="text-sm text-secondary/80"> </p> <!>',1),an=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),nn=j('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),rn=j('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),on=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function sn(s,t){Le(t,!0);const n=()=>Qe(qt,"$timestamp",d),[d,f]=ut(),m=(o,A=X)=>{var F=Ya(),te=i(F),ie=i(te,!0);r(te);var B=u(te,2),se=i(B),be=u(se),de=i(be);r(be),r(B),r(F),O((_e,ve)=>{C(ie,_e),C(se,`${ve??""} `),C(de,`(${A()??""})`)},[()=>_("workflows.next-retry"),()=>n()(t.operation.nextAttemptScheduleTime,{relativeLabel:""})]),v(o,F)},c=o=>{{let A=a(()=>e(x)?"danger":"default");Xe(o,{class:"mr-1",get type(){return e(A)},children:(F,te)=>{var ie=$a(),B=U(ie);{let be=a(()=>e(x)&&"font-bold text-red-400");bt(B,{get class(){return`mr-1 ${e(be)??""}`},name:"retry"})}var se=u(B);O(()=>C(se,` ${t.operation.attempt??0??""}`)),v(F,ie)},$$slots:{default:!0}})}},g=o=>{var A=an(),F=i(A),te=i(F);{var ie=de=>{var _e=en(),ve=U(_e),Re=i(ve,!0);r(ve);var Ge=u(ve,2);{let Ie=a(()=>Vt(qa(t.operation.lastAttemptFailure,"stackTrace"))),He=a(()=>_("common.copy-icon-title")),nt=a(()=>_("common.copy-success-icon-title"));Se(Ge,{get content(){return e(Ie)},maxHeight:384,get copyIconTitle(){return e(He)},get copySuccessIconTitle(){return e(nt)}})}O(Ie=>C(Re,Ie),[()=>_("workflows.last-failure")]),v(de,_e)};b(te,de=>{t.operation.lastAttemptFailure&&de(ie)})}r(F);var B=u(F,2),se=i(B);{var be=de=>{var _e=tn(),ve=U(_e),Re=i(ve,!0);r(ve);var Ge=u(ve,2);{let Ie=a(()=>_("common.copy-icon-title")),He=a(()=>_("common.copy-success-icon-title"));Se(Ge,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(Ie)},get copySuccessIconTitle(){return e(He)}})}O(Ie=>C(Re,Ie),[()=>_("common.stack-trace")]),v(de,_e)};b(se,de=>{var _e;(_e=t.operation.lastAttemptFailure)!=null&&_e.stackTrace&&de(be)})}r(B),r(A),v(o,A)},x=a(()=>t.operation.attempt>1);var k=on(),l=i(k),p=i(l),I=i(p);Xe(I,{children:(o,A)=>{fe();var F=$();O(()=>C(F,t.operation.state)),v(o,F)},$$slots:{default:!0}});var S=u(I,2),w=i(S,!0);r(S),r(p),r(l);var D=u(l,2),T=i(D),H=i(T);{var L=o=>{{let A=a(()=>_("nexus.endpoint"));ke(o,()=>e(A),()=>t.operation.endpoint)}};b(H,o=>{t.operation.endpoint&&o(L)})}var E=u(H,2);{var P=o=>{{let A=a(()=>_("nexus.service"));ke(o,()=>e(A),()=>t.operation.service)}};b(E,o=>{t.operation.service&&o(P)})}var N=u(E,2);{var q=o=>{{let A=a(()=>_("nexus.operation"));ke(o,()=>e(A),()=>t.operation.operation)}};b(N,o=>{t.operation.operation&&o(q)})}var z=u(N,2);{var K=o=>{{let A=a(()=>_("nexus.operation-token"));ke(o,()=>e(A),()=>t.operation.operationToken)}};b(z,o=>{t.operation.operationToken&&o(K)})}var ee=u(z,2);{let o=a(()=>_("workflows.attempt"));ke(ee,()=>e(o),()=>c)}var re=u(ee,2);{var ye=o=>{const A=a(()=>$t({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var F=le(),te=U(F);{var ie=B=>{m(B,()=>e(A))};b(te,B=>{e(A)&&B(ie)})}v(o,F)};b(re,o=>{t.operation.nextAttemptScheduleTime&&o(ye)})}var y=u(re,2);{var R=o=>{{let A=a(()=>_("workflows.last-attempt-completed-time")),F=a(()=>n()(t.operation.lastAttemptCompleteTime));ke(o,()=>e(A),()=>e(F))}};b(y,o=>{t.operation.lastAttemptCompleteTime&&o(R)})}var G=u(y,2);{var me=o=>{{let A=a(()=>_("workflows.schedule-event-id")),F=a(()=>String(t.operation.scheduledEventId));ke(o,()=>e(A),()=>e(F))}};b(G,o=>{t.operation.scheduledEventId&&o(me)})}var ce=u(G,2);{var Ne=o=>{{let A=a(()=>_("workflows.scheduled-time")),F=a(()=>n()(t.operation.scheduledTime));ke(o,()=>e(A),()=>e(F))}};b(ce,o=>{t.operation.scheduledTime&&o(Ne)})}var Me=u(ce,2);{var oe=o=>{{let A=a(()=>_("workflows.schedule-to-close-timeout"));ke(o,()=>e(A),()=>t.operation.scheduleToCloseTimeout)}};b(Me,o=>{t.operation.scheduleToCloseTimeout&&o(oe)})}var ge=u(Me,2);{var he=o=>{{let A=a(()=>_("workflows.schedule-to-start-timeout"));ke(o,()=>e(A),()=>t.operation.scheduleToCloseTimeout)}};b(ge,o=>{t.operation.scheduleToStartTimeout&&o(he)})}var Oe=u(ge,2);{var Ae=o=>{{let A=a(()=>_("workflows.start-to-close-timeout"));ke(o,()=>e(A),()=>t.operation.startToCloseTimeout)}};b(Oe,o=>{t.operation.startToCloseTimeout&&o(Ae)})}r(T);var De=u(T,2),Ve=i(De);{var at=o=>{g(o)};b(Ve,o=>{e(x)&&o(at)})}var Ze=u(Ve,2);{var mt=o=>{var A=nn(),F=i(A),te=i(F,!0);r(F);var ie=u(F,2);{let B=a(()=>_("common.copy-icon-title")),se=a(()=>_("common.copy-success-icon-title"));Se(ie,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(B)},get copySuccessIconTitle(){return e(se)}})}r(A),O(B=>C(te,B),[()=>_("nexus.blocked-reason")]),v(o,A)};b(Ze,o=>{t.operation.blockedReason&&o(mt)})}var gt=u(Ze,2);{var _t=o=>{var A=rn(),F=i(A),te=i(F,!0);r(F);var ie=u(F,2);{let B=a(()=>Vt(t.operation.cancellationInfo)),se=a(()=>_("common.copy-icon-title")),be=a(()=>_("common.copy-success-icon-title"));Se(ie,{language:"text",get content(){return e(B)},get copyIconTitle(){return e(se)},get copySuccessIconTitle(){return e(be)}})}r(A),O(B=>C(te,B),[()=>_("nexus.cancellation-info")]),v(o,A)};b(gt,o=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&o(_t)})}r(De),r(D),r(k),O(o=>C(w,o),[()=>_("workflows.pending-nexus-operation")]),v(s,k),Fe(),f()}function aa(s,t){const n=ct(t,["children","$$slots","$$events","$$legacy"]),d=ct(n,["value","attributes","type"]);Le(t,!1);const f=()=>Qe(ta,"$page",m),[m,c]=ut(),g=pe(),x=pe(),k=pe();let l=W(t,"value",8),p=W(t,"attributes",8),I=W(t,"type",8);function S(w,D,T,H,L){return L==="execution"?jt({namespace:w,workflow:D,run:H}):L==="task-queue"?Ga({namespace:w,queue:H}):L==="child-workflow"?jt({namespace:w,workflow:T.workflowExecutionWorkflowId,run:T.workflowExecutionRunId}):L==="nexus-endpoint"?za(H):""}Ee(()=>(e(g),e(x),f()),()=>{(w=>{Z(g,w.workflow),Z(x,w.namespace)})(f().params)}),Ee(()=>(e(x),e(g),Q(p()),Q(l()),Q(I())),()=>{Z(k,S(e(x),e(g),p(),l(),I()))}),vt(),ft(),Ye(s,{get class(){return Q(d),Pe(()=>d.class)},get href(){return e(k)},children:(w,D)=>{fe();var T=$();O(()=>C(T,l())),v(w,T)},$$slots:{default:!0}}),Fe(),c()}function na(s,t){Le(t,!1);const n=()=>Qe(ta,"$page",d),[d,f]=ut(),m=pe(),c=pe(),g=pe(),x=pe(),k=pe();var l=pe();let p=W(t,"value",8,void 0),I=W(t,"fallback",8,""),S=W(t,"prefix",8,""),w=W(t,"onDecode",8,void 0);const D=120;let T=pe("");const H=P=>S()?(P=`${S()} • ${P}`,P.length<D?P:P.slice(0,D)+"..."):P;Ee(()=>n(),()=>{Z(m,Jt(n().data.settings))}),Ee(()=>n(),()=>{Z(c,Xt(n().data.settings))}),Ee(()=>n(),()=>{Z(g,Qt(n().data.settings))}),Ee(()=>(n(),We(l),e(m),e(c),e(g)),()=>{Z(x,{...n().data.settings,codec:{...Z(l,n().data.settings)===null||We(l)===void 0?void 0:We(l).codec,endpoint:e(m),passAccessToken:e(c),includeCredentials:e(g)}})}),Ee(()=>(Q(I()),e(T),e(x),Q(w())),()=>{Z(k,async P=>{if(!P)return I();if(e(T))return e(T);const N=await Fa(P,e(x));return typeof N=="string"?(Z(T,H(N)),w()&&w()(e(T)),e(T)):(Z(T,I()),I())})}),vt(),ft();var L=le(),E=U(L);Wa(E,()=>(e(k),Q(p()),Pe(()=>e(k)(p()))),null,(P,N)=>{var q=le(),z=U(q);Gt(z,t,"default",{get decodedValue(){return e(N)}},null),v(P,q)},P=>{var N=le(),q=U(N);Gt(q,t,"default",{get decodedValue(){return I()}},null),v(P,N)}),v(s,L),Fe(),f()}const ln=(s,t=X)=>{const n=a(()=>ea(t())),d=a(()=>{var x;return((x=e(n).split("workflows/"))==null?void 0:x[1])||e(n)});var f=mn(),m=i(f),c=i(m,!0);r(m);var g=u(m,2);{let x=a(()=>_("common.copy-icon-title")),k=a(()=>_("common.copy-success-icon-title"));Je(g,{get copyIconTitle(){return e(x)},get copySuccessIconTitle(){return e(k)},get content(){return e(d)},children:(l,p)=>{Ye(l,{get href(){return e(n)},class:"whitespace-pre-line",children:(I,S)=>{fe();var w=$();O(()=>C(w,e(d))),v(I,w)},$$slots:{default:!0}})},$$slots:{default:!0}})}r(f),O(x=>C(c,x),[()=>_("nexus.link")]),v(s,f)},cn=(s,t=X)=>{const n=a(()=>Ba({namespace:t().workflowEvent.namespace}));var d=gn(),f=i(d),m=i(f,!0);r(f);var c=u(f,2);{let g=a(()=>_("common.copy-icon-title")),x=a(()=>_("common.copy-success-icon-title"));Je(c,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(x)},get content(){return t().workflowEvent.namespace},children:(k,l)=>{Ye(k,{get href(){return e(n)},class:"whitespace-pre-line",children:(p,I)=>{fe();var S=$();O(()=>C(S,t().workflowEvent.namespace)),v(p,S)},$$slots:{default:!0}})},$$slots:{default:!0}})}r(d),O(g=>C(m,g),[()=>_("nexus.link-namespace")]),v(s,d)},dn=(s,t=X)=>{var n=le(),d=U(n);Ke(d,17,t,Tt,(f,m,c,g)=>{var x=_n(),k=U(x);ln(k,()=>e(m));var l=u(k,2);cn(l,()=>e(m)),v(f,x)}),v(s,n)},vn=(s,t=X)=>{var n=xn(),d=u(i(n),2),f=i(d);{let m=a(()=>_("events.decode-failed"));na(f,{get value(){return t()},get fallback(){return e(m)},children:Ut,$$slots:{default:(c,g)=>{const x=a(()=>g.decodedValue);fe();var k=$();O(()=>C(k,e(x))),v(c,k)}}})}r(d),r(n),v(s,n)},un=(s,t=X,n=X)=>{const d=a(()=>Ha(n())),f=a(()=>Ra(e(d)));var m=yn(),c=U(m),g=i(c),x=i(g,!0);r(g);var k=u(g,2);{var l=w=>{lt(w,{get value(){return n()},key:"payloads",children:(T,H=X)=>{{let L=a(()=>_("common.copy-icon-title")),E=a(()=>_("common.copy-success-icon-title"));Se(T,{get content(){return H()},maxHeight:384,get copyIconTitle(){return e(L)},get copySuccessIconTitle(){return e(E)}})}},$$slots:{default:!0}})},p=w=>{var D=le(),T=U(D);{var H=E=>{{const P=(q,z=X)=>{{let K=a(()=>_("common.copy-icon-title")),ee=a(()=>_("common.copy-success-icon-title"));Se(q,{get content(){return z()},maxHeight:384,get copyIconTitle(){return e(K)},get copySuccessIconTitle(){return e(ee)}})}};let N=a(()=>({searchAttributes:e(d)}));lt(E,{key:"searchAttributes",get value(){return e(N)},children:P,$$slots:{default:!0}})}},L=E=>{lt(E,{get value(){return e(d)},children:(N,q=X)=>{{let z=a(()=>_("common.copy-icon-title")),K=a(()=>_("common.copy-success-icon-title"));Se(N,{get content(){return q()},maxHeight:384,get copyIconTitle(){return e(z)},get copySuccessIconTitle(){return e(K)}})}},$$slots:{default:!0}})};b(T,E=>{t()==="searchAttributes"?E(H):E(L,!1)},!0)}v(w,D)};b(k,w=>{var D;(D=n())!=null&&D.payloads?w(l):w(p,!1)})}r(c);var I=u(c,2);{var S=w=>{var D=pn(),T=i(D),H=i(T,!0);r(T);var L=u(T,2);{let E=a(()=>_("common.copy-icon-title")),P=a(()=>_("common.copy-success-icon-title"));Se(L,{get content(){return e(f)},language:"text",maxHeight:384,get copyIconTitle(){return e(E)},get copySuccessIconTitle(){return e(P)}})}r(D),O(E=>C(H,E),[()=>_("workflows.call-stack-tab")]),v(w,D)};b(I,w=>{e(f)&&w(S)})}O(w=>C(x,w),[()=>tt(t())]),v(s,m)},fn=(s,t=X,n=X)=>{var d=wn(),f=i(d),m=i(f,!0);r(f);var c=u(f,2),g=i(c);{var x=l=>{Wt(l,{get dateTime(){return n()}})},k=l=>{var p=$();O(()=>C(p,n())),v(l,p)};b(g,l=>{Da(t())?l(x):l(k,!1)})}r(c),r(d),O(l=>C(m,l),[()=>tt(t())]),v(s,d)};var mn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),gn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),_n=j("<!> <!>",1),xn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),pn=j('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),yn=j('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),hn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),wn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),kn=j('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),bn=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Bt(s,t){Le(t,!0);const n=(y,R=X,G=X)=>{var me=hn(),ce=i(me),Ne=i(ce,!0);r(ce);var Me=u(ce,2);{let oe=a(()=>_("common.copy-icon-title")),ge=a(()=>_("common.copy-success-icon-title")),he=a(()=>String(G()));Je(Me,{get copyIconTitle(){return e(oe)},get copySuccessIconTitle(){return e(ge)},get content(){return e(he)},children:(Oe,Ae)=>{{let De=a(()=>String(G())),Ve=a(()=>st(R(),e(f)));aa(Oe,{get value(){return e(De)},get attributes(){return e(f)},get type(){return e(Ve)},class:"whitespace-pre-line"})}},$$slots:{default:!0}})}r(me),O(oe=>C(Ne,oe),[()=>tt(R())]),v(y,me)},d=a(()=>Ce(t.event)?_("events.category.local-activity"):Yt(t.event.name)),f=a(()=>Zt(t.event)),m=a(()=>Object.entries(e(f))),c=a(()=>e(m).filter(([y,R])=>typeof R=="object"&&Object.keys(R).length>0)),g=a(()=>e(m).filter(([y,R])=>st(y,e(f))!=="none")),x=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),k=a(()=>e(m).filter(([y,R])=>typeof R!="object"&&st(y,e(f))==="none"&&!e(x).includes(y)&&(y!=="namespace"||y==="namespace"&&qe.params.namespace!==R)));var l=bn(),p=i(l),I=i(p),S=i(I),w=i(S,!0);r(S);var D=u(S,2),T=i(D,!0);r(D),r(I);var H=u(I,2);Wt(H,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),r(p);var L=u(p,2),E=i(L),P=i(E);{var N=y=>{dn(y,()=>t.event.links)};b(P,y=>{var R,G;(G=(R=t.event)==null?void 0:R.links)!=null&&G.length&&y(N)})}var q=u(P,2);{var z=y=>{vn(y,()=>t.event.userMetadata.summary)};b(q,y=>{var R,G;(G=(R=t.event)==null?void 0:R.userMetadata)!=null&&G.summary&&y(z)})}var K=u(q,2);Ke(K,17,()=>e(k),([y,R])=>y,(y,R)=>{var G=a(()=>xt(e(R),2));fn(y,()=>e(G)[0],()=>e(G)[1])});var ee=u(K,2);Ke(ee,17,()=>e(g),([y,R])=>y,(y,R)=>{var G=a(()=>xt(e(R),2));n(y,()=>e(G)[0],()=>e(G)[1])}),r(E);var re=u(E,2);{var ye=y=>{var R=kn();Ke(R,21,()=>e(c),([G,me])=>G,(G,me)=>{var ce=a(()=>xt(e(me),2));un(G,()=>e(ce)[0],()=>e(ce)[1])}),r(R),v(y,R)};b(re,y=>{e(c).length&&y(ye)})}r(L),r(l),O(()=>{C(w,t.event.id),C(T,e(d))}),v(s,l),Fe()}var Tn=j('<div class="flex flex-col overflow-hidden"><!> <!></div>');function In(s,t){Le(t,!0);let n=W(t,"group",3,void 0),d=W(t,"event",3,void 0);const f=a(()=>(n()===null||n()===void 0?void 0:n().pendingActivity)||(n()===null||n()===void 0?void 0:n().pendingNexusOperation)),m=a(()=>n()&&(n().eventList.length>1||e(f)));var c=le(),g=U(c);{var x=l=>{var p=Tn(),I=i(p);{var S=T=>{Ua(T,{get activity(){return n().pendingActivity}})},w=T=>{var H=le(),L=U(H);{var E=P=>{sn(P,{get operation(){return n().pendingNexusOperation}})};b(L,P=>{var N;(N=n())!=null&&N.pendingNexusOperation&&P(E)},!0)}v(T,H)};b(I,T=>{var H;(H=n())!=null&&H.pendingActivity?T(S):T(w,!1)})}var D=u(I,2);Ke(D,17,()=>n().eventList,Tt,(T,H)=>{Bt(T,{get event(){return e(H)}})}),r(p),v(l,p)},k=l=>{var p=le(),I=U(p);{var S=w=>{Bt(w,{get event(){return d()}})};b(I,w=>{d()&&w(S)},!0)}v(l,p)};b(g,l=>{e(m)?l(x):l(k,!1)})}v(s,c),Fe()}var En=j('<p class="whitespace-nowrap text-right text-xs"> </p>'),Pn=j('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),An=j('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),Cn=j('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function it(s,t){const n=ct(t,["children","$$slots","$$events","$$legacy"]);Le(t,!1);const d=pe();let f=W(t,"key",8),m=W(t,"value",8),c=W(t,"attributes",8),g=W(t,"showKey",8,!0);Ee(()=>(Q(f()),Q(c())),()=>{Z(d,st(f(),c()))}),vt(),ft();var x=le(),k=U(x);{var l=p=>{var I=Cn(),S=i(I);{var w=L=>{var E=En(),P=i(E,!0);r(E),O(N=>C(P,N),[()=>(Q(tt),Q(f()),Pe(()=>tt(f())))]),v(L,E)};b(S,L=>{g()&&L(w)})}var D=u(S,2);{var T=L=>{var E=An(),P=i(E);lt(P,{get value(){return m()},key:"payloads",children:(q,z=X)=>{var K=Pn(),ee=i(K),re=i(ee),ye=i(re,!0);r(re),r(ee),r(K),O((y,R)=>{et(K,1,y,"svelte-cy5z6t"),C(ye,R)},[()=>kt((Q(dt),Q(n),Pe(()=>dt("payload",n.class)))),()=>(z(),Pe(()=>z().slice(0,60)))]),v(q,K)},$$slots:{default:!0}}),r(E),v(L,E)},H=L=>{var E=le(),P=U(E);{var N=z=>{{let K=Ot(()=>(Q(_),Pe(()=>_("common.copy-icon-title")))),ee=Ot(()=>(Q(_),Pe(()=>_("common.copy-success-icon-title"))));Je(z,{get copyIconTitle(){return e(K)},get copySuccessIconTitle(){return e(ee)},get content(){return m()},"container-class":"truncate",children:(re,ye)=>{aa(re,{get value(){return m()},get attributes(){return c()},get type(){return e(d)},class:"truncate"})},$$slots:{default:!0}})}},q=z=>{Xe(z,{type:"subtle",class:"block select-none truncate",children:(K,ee)=>{fe();var re=$();O(()=>C(re,m())),v(K,re)},$$slots:{default:!0}})};b(P,z=>{e(d)!=="none"?z(N):z(q,!1)},!0)}v(L,E)};b(D,L=>{typeof m()=="object"?L(T):L(H,!1)})}r(I),v(p,I)};b(k,p=>{f()&&p(l)})}v(s,x),Fe()}var Sn=j('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function Ln(s,t){const n=ct(t,["children","$$slots","$$events","$$legacy"]);Le(t,!1);var d=pe();let f=W(t,"link",8),m=W(t,"value",28,()=>f().workflowEvent.workflowId),c=W(t,"label",24,()=>_("nexus.link")),g=W(t,"href",12,void 0);Ee(()=>(Q(g()),Q(f()),We(d)),()=>{g()||(g(ea(f())),m((Z(d,g().split("workflows/"))===null||We(d)===void 0?void 0:We(d)[1])||g()))}),vt(),ft();var x=Sn(),k=i(x),l=i(k,!0);r(k);var p=u(k,2),I=i(p);Ye(I,{get href(){return g()},children:(S,w)=>{fe();var D=$();O(()=>C(D,m())),v(S,D)},$$slots:{default:!0}}),r(p),r(x),O(()=>{et(x,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${Q(n),Pe(()=>n.class)??""}`),C(l,c()),et(p,1,`overflow-hidden ${Q(n),Pe(()=>n.linkClass)??""}`)}),v(s,x),Fe()}var Fn=j('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Mn=j('<td class="font-mono"><!></td>'),On=j(" <!>",1),Dn=j("<!> <!>",1),Rn=j('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Hn=j('<td><div class="flex justify-center gap-0.5"><!></div></td>'),jn=j('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Nn=j('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function Hr(s,t){Le(t,!0);const n=()=>Qe(qt,"$timestamp",m),d=()=>Qe(Ca,"$authUser",m),f=()=>Qe(Aa,"$isCloud",m),[m,c]=ut();var g,x,k,l,p,I,S,w;let D=W(t,"compact",3,!1),T=W(t,"expanded",3,!1),H=W(t,"onRowClick",3,()=>{}),L=W(t,"hoveredEventId",15),E=Dt(ka(T())),P=Dt(void 0);const N=a(()=>Y(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),q=a(()=>qe.params),z=a(()=>e(q).workflow),K=a(()=>e(q).run),ee=a(()=>e(q).namespace),re=a(()=>Nt({eventId:t.event.id,namespace:e(ee),workflow:e(z),run:e(K)})),ye=a(()=>Zt(t.event)),y=a(()=>Y(t.event)?t.event.events.get(e(N)):t.event),R=a(()=>Ht({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:Y(e(y))?(g=e(y).initialEvent)===null||g===void 0?void 0:g.eventTime:e(y)===null||e(y)===void 0?void 0:e(y).eventTime,includeMillisecondsForUnderSecond:!0})),G=a(()=>Y(t.event)?Ht({start:(x=t.event.initialEvent)===null||x===void 0?void 0:x.eventTime,end:(k=t.event.lastEvent)===null||k===void 0?void 0:k.eventTime,includeMillisecondsForUnderSecond:!0}):""),me=a(()=>Ia(t.event)),ce=a(()=>Ea(t.event)),Ne=a(()=>Pa(t.event)),Me=a(()=>Y(t.event)?t.event.label:Ce(t.event)?_("events.category.local-activity"):Yt(t.event.name)),oe=a(()=>Ce(t.event)?void 0:ja(Y(t.event)?t.event.initialEvent:t.event)),ge=a(()=>Na(Y(t.event)?t.event.lastEvent:t.event,e(oe)===null||e(oe)===void 0?void 0:e(oe).key)),he=a(()=>Y(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),Oe=a(()=>e(he)&&(e(he)===null||e(he)===void 0?void 0:e(he).paused)),Ae=a(()=>Y(t.event)&&t.event.isPending&&(((l=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||l===void 0?void 0:l.attempt)||((p=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||p===void 0?void 0:p.attempt))),De=a(()=>Y(t.event)&&!t.event.isPending&&((S=(I=t.event.eventList.find(Va))===null||I===void 0?void 0:I.attributes)===null||S===void 0?void 0:S.attempt)),Ve=a(()=>D()&&(e(ge)===null||e(ge)===void 0?void 0:e(ge).key)&&(e(ge)===null||e(ge)===void 0?void 0:e(ge).key)!==(e(oe)===null||e(oe)===void 0?void 0:e(oe).key)&&!(!((w=e(y)===null||e(y)===void 0?void 0:e(y).userMetadata)===null||w===void 0)&&w.summary)),at=a(()=>n()(e(y)===null||e(y)===void 0?void 0:e(y).eventTime)),Ze=a(()=>n()(e(y)===null||e(y)===void 0?void 0:e(y).eventTime,{format:"short"})),mt=h=>{Z(E,!e(E)),h.stopPropagation(),H()()},gt=()=>{L(t.event.id)},_t=()=>{L(void 0)};let o=(h,M)=>{var V;return(V=h==null?void 0:h.eventIds)===null||V===void 0?void 0:V.has(M)};ha(async()=>{Ce(t.event)?Z(P,await zt(t.event,{namespace:qe.params.namespace,settings:qe.data.settings,accessToken:d().accessToken}),!0):Y(t.event)&&Ce(t.event.initialEvent)&&Z(P,await zt(t.event.initialEvent,{namespace:qe.params.namespace,settings:qe.data.settings,accessToken:d().accessToken}),!0)});var A=Nn(),F=U(A);F.__click=mt;var te=i(F);{var ie=h=>{var M=Fn(),V=i(M);Ke(V,21,()=>t.event.eventList,Tt,(ue,ae)=>{{let J=a(()=>Nt({eventId:e(ae).id,namespace:e(ee),workflow:e(z),run:e(K)}));Ye(ue,{"data-testid":"link",get href(){return e(J)},children:(xe,Te)=>{fe();var ne=$();O(()=>C(ne,e(ae).id)),v(xe,ne)},$$slots:{default:!0}})}}),r(V),r(M),v(h,M)},B=h=>{var M=Mn(),V=i(M);Ye(V,{"data-testid":"link",get href(){return e(re)},children:(ue,ae)=>{fe();var J=$();O(()=>C(J,t.event.id)),v(ue,J)},$$slots:{default:!0}}),r(M),v(h,M)};b(te,h=>{Y(t.event)?h(ie):h(B,!1)})}var se=u(te),be=i(se);{let h=a(()=>Y(t.event)&&!e(G)||!e(R)),M=a(()=>Y(t.event)?`Duration: ${e(G)}`:`+${e(R)}`);ht(be,{get hide(){return e(h)},get text(){return e(M)},class:"block",bottom:!0,children:(V,ue)=>{{let ae=a(()=>_("common.copy-icon-title")),J=a(()=>_("common.copy-success-icon-title"));Je(V,{get copyIconTitle(){return e(ae)},get copySuccessIconTitle(){return e(J)},get content(){return e(Ze)},children:(xe,Te)=>{fe();var ne=$();O(()=>C(ne,e(Ze))),v(xe,ne)},$$slots:{default:!0}})}},$$slots:{default:!0}})}r(se);var de=u(se),_e=i(de);{let h=a(()=>Y(t.event)&&!e(G)||!e(R)),M=a(()=>Y(t.event)?`Duration: ${e(G)}`:`+${e(R)}`);ht(_e,{get hide(){return e(h)},get text(){return e(M)},class:"block",bottom:!0,children:(V,ue)=>{{let ae=a(()=>_("common.copy-icon-title")),J=a(()=>_("common.copy-success-icon-title"));Je(V,{get copyIconTitle(){return e(ae)},get copySuccessIconTitle(){return e(J)},get content(){return e(at)},children:(xe,Te)=>{fe();var ne=$();O(()=>C(ne,e(at))),v(xe,ne)},$$slots:{default:!0}})}},$$slots:{default:!0}})}r(de);var ve=u(de),Re=i(ve),Ge=i(Re);bt(Ge,{get name(){return Ka[t.event.category]},class:"mr-1 inline"});var Ie=u(Ge);r(Re),r(ve);var He=u(ve),nt=i(He),It=i(nt);{var ra=h=>{{let M=a(()=>e(Oe)?"warning":e(Ae)>1?"danger":"default");Xe(h,{class:"mr-1",get type(){return e(M)},children:(V,ue)=>{var ae=Dn(),J=U(ae);{let we=a(()=>dt("mr-1 inline",e(Ae)>1&&"font-bold text-red-400",e(Oe)&&"font-bold text-yellow-700")),je=a(()=>e(Oe)?"pause":"retry");bt(J,{get class(){return e(we)},get name(){return e(je)}})}var xe=u(J),Te=u(xe);{var ne=we=>{var je=On(),ze=U(je),rt=u(ze);{var _a=Be=>{const Lt=a(()=>{var Ue;return $t({date:(Ue=e(he))==null?void 0:Ue.scheduledTime,negativeDefault:""})});var Ft=le(),xa=U(Ft);{var pa=Ue=>{var Mt=$();O(ya=>C(Mt,`• ${ya??""}
                ${e(Lt)??""}`),[()=>_("workflows.next-retry")]),v(Ue,Mt)};b(xa,Ue=>{e(Lt)&&Ue(pa)})}v(Be,Ft)};b(rt,Be=>{e(Ae)>1&&Be(_a)})}O(()=>{var Be;return C(ze,`/ ${(((Be=e(he))==null?void 0:Be.maximumAttempts)||"∞")??""} `)}),v(we,je)};b(Te,we=>{e(he)&&we(ne)})}O(we=>C(xe,` ${we??""}
          ${e(Ae)??""} `),[()=>_("workflows.attempt")]),v(V,ae)},$$slots:{default:!0}})}};b(It,h=>{e(Ae)&&h(ra)})}var Et=u(It,2);{var oa=h=>{it(h,yt(()=>e(oe),{get attributes(){return e(ye)}}))};b(Et,h=>{var M;!e(P)&&((M=e(oe))!=null&&M.key)&&h(oa)})}var Pt=u(Et,2);{var ia=h=>{it(h,yt(()=>e(P),{get attributes(){return e(ye)}}))};b(Pt,h=>{e(P)&&e(P).key&&h(ia)})}var At=u(Pt,2);{var sa=h=>{na(h,{get value(){return e(y).userMetadata.summary},children:Ut,$$slots:{default:(M,V)=>{const ue=a(()=>V.decodedValue);var ae=le(),J=U(ae);{var xe=Te=>{var ne=Rn(),we=u(i(ne),2);Xe(we,{type:"secondary",class:"block select-none truncate",children:(je,ze)=>{fe();var rt=$();O(()=>C(rt,e(ue))),v(je,rt)},$$slots:{default:!0}}),r(ne),v(Te,ne)};b(J,Te=>{e(ue)&&Te(xe)})}v(M,ae)}}})};b(At,h=>{var M,V;(V=(M=e(y))==null?void 0:M.userMetadata)!=null&&V.summary&&h(sa)})}var Ct=u(At,2);{var la=h=>{Ln(h,{get link(){return e(y).links[0]},class:"max-w-xl",linkClass:"truncate"})};b(Ct,h=>{var M,V;(V=(M=e(y))==null?void 0:M.links)!=null&&V.length&&h(la)})}var St=u(Ct,2);{var ca=h=>{{let M=a(()=>e(De).toString());it(h,{key:"attempt",get value(){return e(M)},get attributes(){return e(ye)}})}};b(St,h=>{e(De)&&h(ca)})}var da=u(St,2);{var va=h=>{it(h,yt(()=>e(ge),{get attributes(){return e(ye)}}))};b(da,h=>{e(Ve)&&h(va)})}r(nt),r(He);var ua=u(He);{var fa=h=>{var M=Hn(),V=i(M),ue=i(V);{var ae=J=>{{let xe=a(()=>_("workflows.estimated-billable-actions"));ht(J,{get text(){return e(xe)},topRight:!0,children:(Te,ne)=>{Xe(Te,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(we,je)=>{fe();var ze=$();O(()=>C(ze,t.event.billableActions)),v(we,ze)},$$slots:{default:!0}})},$$slots:{default:!0}})}};b(ue,J=>{t.event.billableActions&&J(ae)})}r(V),r(M),v(h,M)};b(ua,h=>{f()&&h(fa)})}r(F);var ma=u(F,2);{var ga=h=>{var M=jn(),V=i(M),ue=i(V);In(ue,{get group(){return t.group},get event(){return e(y)}}),r(V),r(M),O(()=>pt(V,"colspan",f()?5:4)),v(h,M)};b(ma,h=>{e(E)&&h(ga)})}O((h,M)=>{et(F,1,h,"svelte-1cvp1uf"),pt(F,"id",`${t.event.id}-${t.index}`),pt(F,"data-eventid",t.event.id),et(Re,1,M),C(Ie,` ${e(Me)??""}`)},[()=>kt(dt("hover:cursor-pointer",e(me)&&"!bg-red-400/40 hover:!bg-red-400/60",e(ce)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(Ne)&&"!bg-pink-700/30 hover:!bg-pink-700/50",o(t.group,L())&&"active")),()=>kt(Ja({category:t.event.category}))]),Rt("mouseenter",F,gt),Rt("mouseleave",F,_t),v(s,A),Fe(),c()}ba(["click"]);export{Ka as C,Hr as E,Fr as H,na as M,Lr as T,it as a,In as b,Rr as c,zt as d,Ja as e,Ln as f,Dr as g,Or as i,Mr as t};
