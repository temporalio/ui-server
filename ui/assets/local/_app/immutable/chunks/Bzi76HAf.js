import"./Bzak7iHL.js";import{I as D,ab as U,p as j,t as E,i as I,r as M,j as O,e as f,b as A,h,f as p,d as Q,k as W,c as X,g as b,u as C,s as Y}from"./C-0kx8Rl.js";import{i as V}from"./DIXBMONz.js";import{e as G,i as H}from"./CdE3I_3f.js";import{r as z,p as d,a as Z,b as $,s as ee}from"./B0Wc33k0.js";import{p as ae}from"./DmrXLpiq.js";import{u as te}from"./oCyVpfIk.js";import{l as re,s as ne}from"./B-1TjF6E.js";import{b as J}from"./DliSAU7O.js";import{t as K}from"./DFzl7kYA.js";import{L as le}from"./CGLMDN_1.js";function N(a,e,n){if(a.multiple)return ue(a,e);for(var t of a.options){var r=S(t);if(U(r,e)){t.selected=!0;return}}(!n||e!==void 0)&&(a.selectedIndex=-1)}function ie(a,e){D(()=>{var n=new MutationObserver(()=>{var t=a.__value;N(a,t)});return n.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function se(a,e,n=e){var t=!0;re(a,"change",r=>{var i=r?"[selected]":":checked",o;if(a.multiple)o=[].map.call(a.querySelectorAll(i),S);else{var s=a.querySelector(i)??a.querySelector("option:not([disabled])");o=s&&S(s)}n(o)}),D(()=>{var r=e();if(N(a,r,t),t&&r===void 0){var i=a.querySelector(":checked");i!==null&&(r=S(i),n(r))}a.__value=r,t=!1}),ie(a)}function ue(a,e){for(var n of a.options)n.selected=~e.indexOf(S(n))}function S(a){return"__value"in a?a.__value:a.value}var oe=E("<option><!></option>");function R(a,e){j(e,!0);const n=z(e,["$$slots","$$events","$$legacy","value","class","children"]);var t=oe();let r;var i=I(t);{var o=l=>{var u=h(),c=p(u);Q(c,()=>e.children),f(l,u)},s=l=>{var u=W();O(()=>ne(u,e.value)),f(l,u)};V(i,l=>{e.children?l(o):l(s,!1)})}M(t),O(l=>r=J(t,r,{value:e.value,class:l,...n}),[()=>K("border-0",e.class)]),f(a,t),A()}var ve=E("<div><!> <select><!></select></div>");function de(a,e){j(e,!0);let n=d(e,"value",15),t=d(e,"arrow",3,!1),r=d(e,"name",19,()=>e.id),i=d(e,"required",3,!1),o=d(e,"options",19,()=>[]),s=z(e,["$$slots","$$events","$$legacy","id","value","label","arrow","name","required","options","class","children"]);var l=ve(),u=I(l);le(u,{get required(){return i()},get label(){return e.label},hidden:!0,get for(){return e.id}});var c=X(u,2);let w;var y=I(c);{var B=v=>{var m=h(),x=p(m);Q(x,()=>e.children),f(v,m)},_=v=>{var m=h(),x=p(m);G(x,17,o,H,(k,F)=>{R(k,{get value(){return b(F)}})}),f(v,m)};V(y,v=>{e.children?v(B):v(_,!1)})}M(c),M(l),O(v=>w=J(c,w,{class:v,name:r(),id:e.id,...s}),[()=>K("inline h-10 w-full border border-secondary bg-transparent px-2 text-base text-primary outline-none dark:surface-primary focus-visible:outline focus-visible:outline-blue-700",t()&&"h-8 appearance-none py-1 pl-3 text-sm",e.class)]),se(c,n),f(a,l),A()}function Se(a,e){j(e,!0);const[n,t]=ee(),r=()=>Z(ae,"$page",n);let i=d(e,"value",7),o=d(e,"options",19,()=>[]),s=d(e,"parameter",3,null),l=d(e,"position",3,void 0),u=z(e,["$$slots","$$events","$$legacy","label","value","options","parameter","position","children"]);const c=C(()=>`${s()||e.label}-${l()?`${l()}-filter`:"filter"}`),w=C(()=>s()&&r().url.searchParams.get(s()));let y=C(()=>b(w)||i()&&i().toString());de(a,$({onchange:()=>{te({parameter:s(),value:b(y),url:r().url}).then(_=>i(_))},get id(){return b(c)},get label(){return e.label}},()=>u,{get value(){return b(y)},set value(_){Y(y,_,!0)},children:(_,v)=>{var m=h(),x=p(m);{var k=g=>{var q=h(),L=p(q);Q(L,()=>e.children),f(g,q)},F=g=>{var q=h(),L=p(q);G(L,17,()=>o().map(P=>P.toString()),H,(P,T)=>{R(P,{get value(){return b(T)}})}),f(g,q)};V(x,g=>{e.children?g(k):g(F,!1)})}f(_,m)},$$slots:{default:!0}})),A(),t()}export{Se as F};
