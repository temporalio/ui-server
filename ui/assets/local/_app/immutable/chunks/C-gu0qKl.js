import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as R,b as j,t as T,h,r as _,i as x,j as i,d as y,s as r,m as b,g as n,c as O}from"./CtXwlho8.js";import{s as $}from"./BXc8M6y4.js";import{i as q}from"./D4D3ThYu.js";import{p as m}from"./DdhuX4yd.js";import{s as H,b as N}from"./CI9zuxJp.js";import{M as z}from"./BonoEmkl.js";import{t as o}from"./D2OY9xdY.js";import{i as Q,t as S}from"./Cv917vET.js";import{t as B}from"./GWRmNmWh.js";import{i as F}from"./V0ppeWDx.js";import{I as U}from"./DdpG80Q9.js";import{g as V}from"./AlMSaZnh.js";var X=T('<h3 slot="title"> </h3>'),Y=T("<p> </p>");function ue(a,e){R(e,!1);const[d,D]=H();let f=m(e,"open",12),W=m(e,"workflow",8),M=m(e,"namespace",8),C=m(e,"refresh",8),u=b(),l=b("");const p=async()=>{r(l,""),r(u,!0);try{await Q({namespace:M(),workflow:W()}),f(!1),N(C(),Date.now()),B.push({id:"workflow-cancelation-success-toast",message:o("workflows.cancel-success")})}catch(s){r(l,F(s)?s.message:o("common.unknown-error"))}finally{r(u,!1)}};q();const k=i(()=>o("common.confirm")),E=i(()=>o("common.cancel"));z(a,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return n(k)},get cancelText(){return n(E)},get loading(){return n(u)},confirmType:"destructive",get error(){return n(l)},set error(s){r(l,s)},get open(){return f()},set open(s){f(s)},$$events:{confirmModal:p},$$slots:{title:(s,P)=>{var c=X(),g=h(c,!0);_(c),x(t=>$(g,t),[()=>o("workflows.cancel-modal-title")],i),y(s,c)},content:(s,P)=>{var c=Y(),g=h(c,!0);_(c),x(t=>$(g,t),[()=>o("workflows.cancel-modal-confirmation")],i),y(s,c)}},$$legacy:!0}),j(),D()}var Z=T('<h3 slot="title"> </h3>'),ee=T('<div slot="content"><p> </p> <!></div>');function ke(a,e){R(e,!1);const[d,D]=H();let f=m(e,"open",12),W=m(e,"workflow",8),M=m(e,"namespace",8),C=m(e,"refresh",8),u=m(e,"first",8,void 0),l=b(""),p=b(""),k=b(!1);const E=V(),s=()=>{f(!1),r(l,"")},P=async()=>{r(p,""),r(k,!0);try{await S({workflow:W(),namespace:M(),reason:n(l),first:u(),identity:E}),f(!1),r(l,""),N(C(),Date.now()),B.push({id:"workflow-termination-success-toast",message:o("workflows.terminate-success")})}catch(t){r(p,F(t)?t.message:o("common.unknown-error"))}finally{r(k,!1)}};q();const c=i(()=>o("workflows.terminate")),g=i(()=>o("common.cancel"));z(a,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get loading(){return n(k)},get confirmText(){return n(c)},get cancelText(){return n(g)},confirmType:"destructive",get error(){return n(p)},set error(t){r(p,t)},get open(){return f()},set open(t){f(t)},$$events:{cancelModal:s,confirmModal:P},$$slots:{title:(t,G)=>{var w=Z(),v=h(w,!0);_(w),x(A=>$(v,A),[()=>o("workflows.terminate-modal-title")],i),y(t,w)},content:(t,G)=>{var w=ee(),v=h(w),A=h(v,!0);_(v);var J=O(v,2);const K=i(()=>o("common.reason-placeholder")),L=i(()=>o("common.reason-placeholder"));U(J,{id:"workflow-termination-reason",class:"mt-4",get placeholder(){return n(K)},get label(){return n(L)},labelHidden:!0,get value(){return n(l)},set value(I){r(l,I)},$$legacy:!0}),_(w),x(I=>$(A,I),[()=>o("workflows.terminate-modal-confirmation")],i),y(t,w)}},$$legacy:!0}),j(),D()}const ge=(a,e,d)=>!a.disableWriteActions&&!a.workflowCancelDisabled&&!e.namespaceWriteDisabled(d),ve=(a,e,d)=>!a.disableWriteActions&&!a.workflowResetDisabled&&!e.namespaceWriteDisabled(d),he=(a,e,d)=>!a.disableWriteActions&&!a.workflowTerminateDisabled&&!e.namespaceWriteDisabled(d);export{ue as C,ke as T,ge as a,ve as b,he as w};
