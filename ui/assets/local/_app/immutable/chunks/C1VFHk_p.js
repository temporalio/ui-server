import"./Bzak7iHL.js";import{p as ve,aH as fe,N as qe,t as N,f as q,i as Z,c as R,u as V,j as de,e as o,g as d,h as B,r as $,d as ee,b as ge,O as ye,ag as ue,s as ce}from"./C-0kx8Rl.js";import{b as Le}from"./B9s8aHCz.js";import{p as t,c as U,a as j,r as me,s as _e,b as Se}from"./B0Wc33k0.js";import{w as T,o as be,a as we}from"./Dl-yZlXH.js";import{c as Ee,d as He,b as Pe}from"./BSdQFxOj.js";import{s as Ve}from"./B-1TjF6E.js";import{i as x}from"./DIXBMONz.js";import{k as Be}from"./B0kvq5Du.js";import{r as Te,b as je,C as Ne}from"./DliSAU7O.js";import{I as Y}from"./BQ19dEFL.js";import{L as Ae}from"./CGLMDN_1.js";import{M as De}from"./C8Gw4DW1.js";import"./69_IOA4Y.js";import{t as Fe}from"./DFzl7kYA.js";const xe="select-context";var We=N("<input>"),Xe=N('<span class="text-xs text-danger"> </span>'),ze=N('<div class="flex flex-col gap-1"><!> <!></div> <!> <!>',1);function dt(A,e){ve(e,!0);const[h,D]=_e(),y=()=>j(w,"$labelCtx",h),C=()=>j(ne,"$optionsCtx",h);let F=t(e,"labelHidden",3,!1),n=t(e,"value",15,void 0),L=t(e,"placeholder",3,""),m=t(e,"disabled",3,!1),k=t(e,"loading",3,!1),u=t(e,"leadingIcon",3,null),l=t(e,"onChange",3,()=>{}),W=t(e,"menuButtonClass",3,void 0),p=t(e,"menuClass",3,void 0),te=t(e,"variant",3,"secondary"),r=t(e,"required",3,!1),I=t(e,"error",3,""),c=t(e,"valid",3,!0),X=t(e,"position",3,void 0),S=me(e,["$$slots","$$events","$$legacy","label","id","labelHidden","value","placeholder","disabled","loading","leadingIcon","onChange","menuButtonClass","menuClass","variant","required","error","valid","position","leading","children"]);const ae=T(n()),ne=T([]),w=T(n()===null||n()===void 0?void 0:n().toString()),le=T(!1);fe(()=>he(n()));function he(i){U(ae,i),U(w,se(i))}const Ce=i=>{n(i),l()(n())};function se(i){const z=C().find(E=>E.value===i);return z!==void 0?z.label:""}qe(xe,{selectValue:ae,selectLabel:w,options:ne,open:le,handleChange:Ce}),be(()=>{U(w,se(n()))}),Ee(A,{class:"w-full",open:le,children:(i,z)=>{var E=ze(),G=q(E),re=Z(G);Ae(re,{get label(){return e.label},get hidden(){return F()},get for(){return e.id},get required(){return r()}});var ke=R(re,2);Be(ke,y,s=>{const v=V(()=>Fe("w-full",!c()&&"border-danger",W())),H=V(()=>!m()),P=V(()=>m()||k()),J=V(()=>S["data-testid"]??e.id);De(s,{get class(){return d(v)},get hasIndicator(){return d(H)},get disabled(){return d(P)},get controls(){return`${e.id??""}-select`},get variant(){return te()},get"data-testid"(){return`${d(J)??""}-button`},"data-track-name":"select","data-track-intent":"select",get"data-track-text"(){return e.label},leading:O=>{var _=B(),f=q(_);{var b=a=>{Y(a,{get name(){return u()}})},M=(a,K)=>{{var Q=g=>{var oe=B(),Me=q(oe);ee(Me,()=>e.leading),o(g,oe)};x(a,g=>{e.leading&&g(Q)},K)}};x(f,a=>{u()?a(b):a(M,!1)})}o(O,_)},trailing:O=>{var _=B(),f=q(_);{var b=a=>{Y(a,{name:"lock"})},M=(a,K)=>{{var Q=g=>{Y(g,{name:"spinner",class:"animate-spin"})};x(a,g=>{k()&&g(Q)},K)}};x(f,a=>{m()?a(b):a(M,!1)})}o(O,_)},children:(O,_)=>{var f=We();Te(f);let b;de(M=>b=je(f,b,{id:e.id,value:!n()&&L()!==""?L():y(),tabindex:"-1",disabled:!0,required:r(),"aria-required":r(),...S,[Ne]:M},"svelte-1j0yr8e"),[()=>({disabled:m()})]),o(O,f)},$$slots:{leading:!0,trailing:!0,default:!0}})}),$(G);var ie=R(G,2);{var pe=s=>{He(s,{role:"listbox",get id(){return`${e.id??""}-select`},get class(){return p()},get position(){return X()},children:(v,H)=>{var P=B(),J=q(P);ee(J,()=>e.children),o(v,P)},$$slots:{default:!0}})};x(ie,s=>{e.children&&s(pe)})}var Ie=R(ie,2);{var Oe=s=>{var v=Xe(),H=Z(v,!0);$(v),de(()=>Ve(H,I())),o(s,v)};x(Ie,s=>{I()&&!c()&&s(Oe)})}o(i,E)},$$slots:{default:!0}}),ge(),D()}var Ge=N("<span><!></span>");function ut(A,e){ve(e,!0);const[h,D]=_e(),y=()=>j(F,"$selectValue",h),C=()=>j(L,"$options",h),{selectValue:F,handleChange:n,options:L}=ye(xe);let m=me(e,["$$slots","$$events","$$legacy","value","children","onclick"]),k=ue(!1),u=ue(void 0),l,W,p;fe(()=>{l&&(ce(u,e.value!==null&&e.value!==void 0?e.value:l.textContent,!0),ce(k,y()===d(u)),p=l.textContent)}),be(()=>{l&&(p=l.textContent,C().push({value:e.value,label:p,nativeElement:W}))}),we(()=>{let r=C().findIndex(I=>I.value===e.value);r!==void 0&&C().splice(r,1)}),Pe(A,Se({onclick:()=>{n(d(u)),e.onclick===null||e.onclick===void 0||e.onclick(d(u))},role:"option",get selected(){return d(k)}},()=>m,{children:(r,I)=>{var c=Ge(),X=Z(c);ee(X,()=>e.children),$(c),Le(c,S=>l=S,()=>l),o(r,c)},$$slots:{default:!0}})),ge(),D()}export{ut as O,dt as S};
