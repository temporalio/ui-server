import"./CWj6FrbW.js";import{p as vt,g as t,o as z,b as pt,G as Ct,L as lt,f as x,c as D,d as Lt,t as w,e as p,h as u,j as a,k as ut,n as ct,u as o,r as s,a9 as Vt,i as mt}from"./yn9lut7I.js";import{s as m}from"./B95CcGmx.js";import{i as L}from"./Bw1cG9kR.js";import{e as Nt,i as Ot}from"./B0gjW5Lu.js";import{p as Et,s as St,a as Ut}from"./C6jR5PNA.js";import{p as At}from"./DvgzgOmO.js";import{B as Ft}from"./TpdbhCNd.js";import{E as Ht}from"./CCu90O8D.js";import{L as qt}from"./0GDztGzB.js";import{T as Gt,a as Kt,b as Xt}from"./BJRykWro.js";import{t as c}from"./DEjs8ZrU.js";import{g as Yt}from"./MmN5qE90.js";import"./j5XEhUQM.js";import"./D9gMh8gV.js";import{j as zt}from"./CvBRcgV4.js";import"./CLQjEMu3.js";import"./DB4lO5ox.js";import"./BUApaBEI.js";import{w as Jt}from"./CtmWgi5e.js";import{D as Mt}from"./D-qeEgPU.js";import"./69_IOA4Y.js";import{i as Zt}from"./Bk16Yghv.js";import{I as te}from"./DbAXokY8.js";import{T as ee}from"./CyeuWbsh.js";function J(V,k){vt(k,!1);let $=Et(k,"includesTaskQueueType",8);Zt();{let N=z(()=>$()?"checkmark":"close"),O=z(()=>$()?"text-blue-700":"text-primary"),E=z(()=>(lt($()),lt(c),Ct(()=>$()?c("common.yes"):c("common.no"))));te(V,{get name(){return t(N)},get class(){return t(O)},get title(){return t(E)}})}pt()}var re=x("<p> </p>"),ae=x("<p> </p>"),se=x('<td class="select-all break-all" data-testid="worker-identity"> </td> <td class="select-all break-all" data-testid="worker-build-id"><div class="flex items-center gap-2"> <!></div></td> <td class="select-all break-all" data-testid="worker-deployment"><!></td> <!> <td data-testid="workflow-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="activity-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="nexus-poller"><div class="flex items-center justify-center"><!></div></td>',1),oe=x('<tr class="w-full"><td colspan="7"><!></td></tr>'),ne=x('<caption class="sr-only" slot="caption"> </caption>'),ie=x('<th> </th> <th> </th> <th> </th> <th class="hidden md:table-cell"> </th> <th class="!text-center xl:w-48"> </th> <th class="!text-center xl:w-36"> </th> <th class="!text-center xl:w-36"> </th>',1),de=x('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function Le(V,k){vt(k,!0);const $=()=>Ut(Jt,"$workflowRun",N),[N,O]=St(),E=o(()=>At.params),_t=o(()=>t(E).namespace),ft=o(()=>$().workflow),g=o(()=>Yt(t(ft),k.workers)),M=o(()=>t(g).pollers),wt=o(()=>t(g).pinned),kt=o(()=>t(g).autoUpgrade),gt=o(()=>t(g).currentBuildId),ht=o(()=>t(g).currentDeployment),yt=o(()=>t(g).rampingBuildId),xt=o(()=>t(g).rampingDeployment),S=e=>{var l,r,d;const i=(r=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.deploymentName)!==null&&r!==void 0?r:(d=e==null?void 0:e.workerVersionCapabilities)===null||d===void 0?void 0:d.deploymentSeriesName;return i??""},U=e=>{var l,r,d;const i=(r=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.buildId)!==null&&r!==void 0?r:(d=e==null?void 0:e.workerVersionCapabilities)===null||d===void 0?void 0:d.buildId;return i??""},$t=e=>t(Z)(e)?"Current":t(tt)(e)?"Ramping":void 0,bt=e=>t(Z)(e)?c("deployments.current"):t(tt)(e)?c("deployments.ramping-percentage",{percentage:k.workers.versioningInfo.rampingVersionPercentage}):"",Z=o(()=>e=>S(e)===t(ht)&&U(e)===t(gt)),tt=o(()=>e=>S(e)===t(xt)&&U(e)===t(yt));var et=de(),A=D(et),rt=a(A),Tt=u(rt);Ft(Tt,{type:"count",children:(e,l)=>{ct();var r=ut();w(()=>{var d;return m(r,((d=t(M))==null?void 0:d.length)||0)}),p(e,r)},$$slots:{default:!0}}),s(A);var at=u(A,2);Lt(at,()=>k.children??Vt);var st=u(at,2);{var It=e=>{var l=re(),r=a(l,!0);s(l),w(d=>m(r,d),[()=>c("workers.viewing-pinned-build-ids")]),p(e,l)},Pt=e=>{var l=mt(),r=D(l);{var d=i=>{var n=ae(),_=a(n,!0);s(n),w(f=>m(_,f),[()=>c("workers.viewing-auto-upgrade-build-ids")]),p(i,n)};L(r,i=>{t(kt)&&i(d)},!0)}p(e,l)};L(st,e=>{t(wt)?e(It):e(Pt,!1)})}var Bt=u(st,2);Gt(Bt,{class:"mb-6",fixed:!0,children:(e,l)=>{var r=mt(),d=D(r);Nt(d,17,()=>t(M),Ot,(i,n)=>{const _=o(()=>S(t(n))),f=o(()=>U(t(n))),b=o(()=>$t(t(n))),T=o(()=>bt(t(n)));Xt(i,{"data-testid":"worker-row",children:(F,Q)=>{var W=se(),h=D(W),H=a(h,!0);s(h);var y=u(h,2),R=a(y),I=a(R),q=u(I);{var G=v=>{Mt(v,{get status(){return t(b)},get label(){return t(T)}})};L(q,v=>{t(b)&&v(G)})}s(R),s(y);var P=u(y,2),K=a(P);{var X=v=>{{let Rt=o(()=>zt({namespace:t(_t),deployment:t(_)}));qt(v,{get href(){return t(Rt)},children:(jt,le)=>{ct();var dt=ut();w(()=>m(dt,t(_))),p(jt,dt)},$$slots:{default:!0}})}};L(K,v=>{t(_)&&v(X)})}s(P);var j=u(P,2);ee(j,{as:"td",get dateTime(){return t(n).lastAccessTime},class:"hidden md:table-cell","data-testid":"worker-last-access-time"});var B=u(j,2),C=a(B),Dt=a(C);{let v=o(()=>t(n).taskQueueTypes.includes("WORKFLOW"));J(Dt,{get includesTaskQueueType(){return t(v)}})}s(C),s(B);var Y=u(B,2),ot=a(Y),Qt=a(ot);{let v=o(()=>t(n).taskQueueTypes.includes("ACTIVITY"));J(Qt,{get includesTaskQueueType(){return t(v)}})}s(ot),s(Y);var nt=u(Y,2),it=a(nt),Wt=a(it);{let v=o(()=>t(n).taskQueueTypes.includes("NEXUS"));J(Wt,{get includesTaskQueueType(){return t(v)}})}s(it),s(nt),w(()=>{m(H,t(n).identity),m(I,`${t(f)??""} `)}),p(F,W)},$$slots:{default:!0}})},i=>{var n=oe(),_=a(n),f=a(_);{let b=o(()=>c("workflows.workers-empty-state"));Ht(f,{get title(){return t(b)}})}s(_),s(n),p(i,n)}),p(e,r)},$$slots:{default:!0,caption:(e,l)=>{var r=ne(),d=a(r,!0);s(r),w(i=>m(d,i),[()=>c("workflows.workers-tab")]),p(e,r)},headers:(e,l)=>{Kt(e,{slot:"headers",children:(r,d)=>{var i=ie(),n=D(i),_=a(n,!0);s(n);var f=u(n,2),b=a(f,!0);s(f);var T=u(f,2),F=a(T,!0);s(T);var Q=u(T,2),W=a(Q,!0);s(Q);var h=u(Q,2),H=a(h,!0);s(h);var y=u(h,2),R=a(y,!0);s(y);var I=u(y,2),q=a(I,!0);s(I),w((G,P,K,X,j,B,C)=>{m(_,G),m(b,P),m(F,K),m(W,X),m(H,j),m(R,B),m(q,C)},[()=>c("common.id"),()=>c("workers.buildId"),()=>c("deployments.deployment"),()=>c("workflows.last-accessed"),()=>c("workflows.workflow-task-handler"),()=>c("workflows.activity-handler"),()=>c("workflows.nexus-handler")]),p(r,i)},$$slots:{default:!0}})}}}),w(e=>m(rt,`${e??""} `),[()=>c("workers.workers")]),p(V,et),pt(),O()}export{Le as W};
