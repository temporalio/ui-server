import"./CWj6FrbW.js";import{p as vt,g as t,o as Y,b as ct,I as Ct,M as nt,f as x,c as D,d as Vt,t as k,e as p,h as u,j as a,k as lt,n as ut,v as i,r as s,u as jt,i as mt}from"./B6CF0p-B.js";import{s as v}from"./BSSJzwu8.js";import{i as A}from"./DVfqY6Lp.js";import{e as At,i as Lt}from"./DNXtLIpi.js";import{p as pt}from"./BrOjBIf0.js";import{p as Nt}from"./CGGZL5WV.js";import{B as Ot}from"./D3maMAGB.js";import{E as Et}from"./CwMDJm8N.js";import{L as Rt}from"./PLG0j6OZ.js";import{T as St,a as Ut,b as Ft}from"./-APBpgtV.js";import{t as m}from"./DEjs8ZrU.js";import{g as Ht}from"./Rls2l-bB.js";import"./DHGlOZyE.js";import"./ikbOq2O5.js";import"./BxHUL3FD.js";import{i as qt}from"./BydudN05.js";import"./CSDMLUeY.js";import"./DN4jPxEP.js";import"./BUApaBEI.js";import{D as Kt}from"./GMV5bcOD.js";import"./69_IOA4Y.js";import{i as Mt}from"./BC0HqUZ9.js";import{I as Xt}from"./CsmBsHFA.js";import{T as Yt}from"./DRi4x2LZ.js";function z(L,g){vt(g,!1);let b=pt(g,"includesTaskQueueType",8);Mt();{let N=Y(()=>b()?"checkmark":"close"),O=Y(()=>b()?"text-blue-700":"text-primary"),f=Y(()=>(nt(b()),nt(m),Ct(()=>b()?m("common.yes"):m("common.no"))));Xt(L,{get name(){return t(N)},get class(){return t(O)},get title(){return t(f)}})}ct()}var zt=x("<p> </p>"),Gt=x("<p> </p>"),Jt=x('<td class="select-all break-all" data-testid="worker-identity"> </td> <td class="select-all break-all" data-testid="worker-build-id"><div class="flex items-center gap-2"> <!></div></td> <td class="select-all break-all" data-testid="worker-deployment"><!></td> <!> <td data-testid="workflow-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="activity-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="nexus-poller"><div class="flex items-center justify-center"><!></div></td>',1),Zt=x('<tr class="w-full"><td colspan="7"><!></td></tr>'),te=x('<caption class="sr-only" slot="caption"> </caption>'),ee=x('<th> </th> <th> </th> <th> </th> <th class="hidden md:table-cell"> </th> <th class="!text-center xl:w-48"> </th> <th class="!text-center xl:w-36"> </th> <th class="!text-center xl:w-36"> </th>',1),re=x('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function De(L,g){vt(g,!0);let b=pt(g,"searchAttributes",19,()=>({}));const N=i(()=>Nt.params),O=i(()=>t(N).namespace),f=i(()=>Ht(b(),g.workers)),G=i(()=>t(f).pollers),_t=i(()=>t(f).pinned),ft=i(()=>t(f).autoUpgrade),ht=i(()=>t(f).currentBuildId),gt=i(()=>t(f).currentDeployment),kt=i(()=>t(f).rampingBuildId),wt=i(()=>t(f).rampingDeployment),E=e=>{var l,r,n;const d=(r=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.deploymentName)!==null&&r!==void 0?r:(n=e==null?void 0:e.workerVersionCapabilities)===null||n===void 0?void 0:n.deploymentSeriesName;return d??""},R=e=>{var l,r,n;const d=(r=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.buildId)!==null&&r!==void 0?r:(n=e==null?void 0:e.workerVersionCapabilities)===null||n===void 0?void 0:n.buildId;return d??""},yt=e=>t(J)(e)?"Current":t(Z)(e)?"Ramping":void 0,xt=e=>t(J)(e)?m("deployments.current"):t(Z)(e)?m("deployments.ramping-percentage",{percentage:g.workers.versioningInfo.rampingVersionPercentage}):"",J=i(()=>e=>E(e)===t(gt)&&R(e)===t(ht)),Z=i(()=>e=>E(e)===t(wt)&&R(e)===t(kt));var tt=re(),S=D(tt),et=a(S),bt=u(et);Ot(bt,{type:"count",children:(e,l)=>{ut();var r=lt();k(()=>{var n;return v(r,((n=t(G))==null?void 0:n.length)||0)}),p(e,r)},$$slots:{default:!0}}),s(S);var rt=u(S,2);Vt(rt,()=>g.children??jt);var at=u(rt,2);{var $t=e=>{var l=zt(),r=a(l,!0);s(l),k(n=>v(r,n),[()=>m("workers.viewing-pinned-build-ids")]),p(e,l)},Tt=e=>{var l=mt(),r=D(l);{var n=d=>{var o=Gt(),_=a(o,!0);s(o),k(h=>v(_,h),[()=>m("workers.viewing-auto-upgrade-build-ids")]),p(d,o)};A(r,d=>{t(ft)&&d(n)},!0)}p(e,l)};A(at,e=>{t(_t)?e($t):e(Tt,!1)})}var It=u(at,2);St(It,{class:"mb-6",fixed:!0,children:(e,l)=>{var r=mt(),n=D(r);At(n,17,()=>t(G),Lt,(d,o)=>{const _=i(()=>E(t(o))),h=i(()=>R(t(o))),$=i(()=>yt(t(o))),T=i(()=>xt(t(o)));Ft(d,{"data-testid":"worker-row",children:(U,Q)=>{var W=Jt(),w=D(W),F=a(w,!0);s(w);var y=u(w,2),C=a(y),I=a(C),H=u(I);{var q=c=>{Kt(c,{get status(){return t($)},get label(){return t(T)}})};A(H,c=>{t($)&&c(q)})}s(C),s(y);var P=u(y,2),K=a(P);{var M=c=>{{let Qt=i(()=>qt({namespace:t(O),deployment:t(_)}));Rt(c,{get href(){return t(Qt)},children:(Wt,ae)=>{ut();var dt=lt();k(()=>v(dt,t(_))),p(Wt,dt)},$$slots:{default:!0}})}};A(K,c=>{t(_)&&c(M)})}s(P);var V=u(P,2);Yt(V,{as:"td",get dateTime(){return t(o).lastAccessTime},class:"hidden md:table-cell","data-testid":"worker-last-access-time"});var B=u(V,2),j=a(B),Pt=a(j);{let c=i(()=>t(o).taskQueueTypes.includes("WORKFLOW"));z(Pt,{get includesTaskQueueType(){return t(c)}})}s(j),s(B);var X=u(B,2),st=a(X),Bt=a(st);{let c=i(()=>t(o).taskQueueTypes.includes("ACTIVITY"));z(Bt,{get includesTaskQueueType(){return t(c)}})}s(st),s(X);var ot=u(X,2),it=a(ot),Dt=a(it);{let c=i(()=>t(o).taskQueueTypes.includes("NEXUS"));z(Dt,{get includesTaskQueueType(){return t(c)}})}s(it),s(ot),k(()=>{v(F,t(o).identity),v(I,`${t(h)??""} `)}),p(U,W)},$$slots:{default:!0}})},d=>{var o=Zt(),_=a(o),h=a(_);{let $=i(()=>m("workflows.workers-empty-state"));Et(h,{get title(){return t($)}})}s(_),s(o),p(d,o)}),p(e,r)},$$slots:{default:!0,caption:(e,l)=>{var r=te(),n=a(r,!0);s(r),k(d=>v(n,d),[()=>m("workflows.workers-tab")]),p(e,r)},headers:(e,l)=>{Ut(e,{slot:"headers",children:(r,n)=>{var d=ee(),o=D(d),_=a(o,!0);s(o);var h=u(o,2),$=a(h,!0);s(h);var T=u(h,2),U=a(T,!0);s(T);var Q=u(T,2),W=a(Q,!0);s(Q);var w=u(Q,2),F=a(w,!0);s(w);var y=u(w,2),C=a(y,!0);s(y);var I=u(y,2),H=a(I,!0);s(I),k((q,P,K,M,V,B,j)=>{v(_,q),v($,P),v(U,K),v(W,M),v(F,V),v(C,B),v(H,j)},[()=>m("common.id"),()=>m("workers.buildId"),()=>m("deployments.deployment"),()=>m("workflows.last-accessed"),()=>m("workflows.workflow-task-handler"),()=>m("workflows.activity-handler"),()=>m("workflows.nexus-handler")]),p(r,d)},$$slots:{default:!0}})}}}),k(e=>v(et,`${e??""} `),[()=>m("workers.workers")]),p(L,tt),ct()}export{De as W};
