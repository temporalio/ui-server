import"./CWj6FrbW.js";import{p as ct,g as t,o as Y,b as mt,K as Wt,O as nt,f as x,c as O,d as jt,t as g,e as p,k as lt,h as l,j as a,n as ut,v as o,r as s,u as Ct,i as Ot}from"./DZ1-1a5q.js";import{s as m}from"./DxwvfIkW.js";import{i as z}from"./DnKg3jxh.js";import{e as Vt,i as At}from"./DGhzC9On.js";import{p as vt}from"./TaaIktnz.js";import{p as Lt}from"./etqQTYOW.js";import{B as Nt}from"./CqqsKTDn.js";import{E as Et}from"./DEyS7vMf.js";import{L as Rt}from"./y0sr2j8b.js";import{T as St,a as Ut,b as Ft}from"./D4J3bl6a.js";import{t as u}from"./DEjs8ZrU.js";import{g as Ht}from"./Dhbaw71P.js";import"./urDygoU8.js";import"./ikbOq2O5.js";import"./Cc_MFLKO.js";import{j as Kt}from"./OsXtHQDs.js";import"./DlxCc2AE.js";import"./BUApaBEI.js";import{D as qt}from"./CWncMf59.js";import"./69_IOA4Y.js";import{i as Xt}from"./Bby3K3wO.js";import{I as Yt}from"./BwERH40W.js";import{T as zt}from"./4Dr_hdgK.js";function G(V,f){ct(f,!1);let b=vt(f,"includesTaskQueueType",8);Xt();{let A=Y(()=>b()?"checkmark":"close"),L=Y(()=>b()?"text-blue-700":"text-primary"),_=Y(()=>(nt(b()),nt(u),Wt(()=>b()?u("common.yes"):u("common.no"))));Yt(V,{get name(){return t(A)},get class(){return t(L)},get title(){return t(_)}})}mt()}var Gt=x("<p> </p>"),Jt=x("<p> </p>"),Mt=x('<td class="select-all break-all" data-testid="worker-identity"> </td> <td class="select-all break-all" data-testid="worker-build-id"><div class="flex items-center gap-2"> <!></div></td> <td class="select-all break-all" data-testid="worker-deployment"><!></td> <!> <td data-testid="workflow-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="activity-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="nexus-poller"><div class="flex items-center justify-center"><!></div></td>',1),Zt=x('<tr class="w-full"><td colspan="7"><!></td></tr>'),te=x('<caption class="sr-only" slot="caption"> </caption>'),ee=x('<th> </th> <th> </th> <th> </th> <th class="hidden md:table-cell"> </th> <th class="!text-center xl:w-48"> </th> <th class="!text-center xl:w-36"> </th> <th class="!text-center xl:w-36"> </th>',1),re=x('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function Be(V,f){ct(f,!0);let b=vt(f,"searchAttributes",19,()=>({}));const A=o(()=>Lt.params),L=o(()=>t(A).namespace),_=o(()=>Ht(b(),f.workers)),J=o(()=>t(_).pollers),pt=o(()=>t(_).pinned),_t=o(()=>t(_).autoUpgrade),ft=o(()=>t(_).currentBuildId),ht=o(()=>t(_).currentDeployment),gt=o(()=>t(_).rampingBuildId),kt=o(()=>t(_).rampingDeployment),N=e=>{var i,r,d;const c=(r=(i=e==null?void 0:e.deploymentOptions)===null||i===void 0?void 0:i.deploymentName)!==null&&r!==void 0?r:(d=e==null?void 0:e.workerVersionCapabilities)===null||d===void 0?void 0:d.deploymentSeriesName;return c??""},E=e=>{var i,r,d;const c=(r=(i=e==null?void 0:e.deploymentOptions)===null||i===void 0?void 0:i.buildId)!==null&&r!==void 0?r:(d=e==null?void 0:e.workerVersionCapabilities)===null||d===void 0?void 0:d.buildId;return c??""},wt=e=>t(M)(e)?"Current":t(Z)(e)?"Ramping":void 0,yt=e=>t(M)(e)?u("deployments.current"):t(Z)(e)?u("deployments.ramping-percentage",{percentage:f.workers.versioningInfo.rampingVersionPercentage}):"",M=o(()=>e=>N(e)===t(ht)&&E(e)===t(ft)),Z=o(()=>e=>N(e)===t(kt)&&E(e)===t(gt));var tt=re(),R=O(tt),et=a(R),xt=l(et);Nt(xt,{type:"count",children:(e,i)=>{ut();var r=lt();g(()=>{var d;return m(r,((d=t(J))==null?void 0:d.length)||0)}),p(e,r)},$$slots:{default:!0}}),s(R);var rt=l(R,2);jt(rt,()=>f.children??Ct);var at=l(rt,2);{var bt=e=>{var i=Gt(),r=a(i,!0);s(i),g(d=>m(r,d),[()=>u("workers.viewing-pinned-build-ids")]),p(e,i)},$t=e=>{var i=Jt(),r=a(i,!0);s(i),g(d=>m(r,d),[()=>u("workers.viewing-auto-upgrade-build-ids")]),p(e,i)};z(at,e=>{t(pt)?e(bt):t(_t)&&e($t,1)})}var Tt=l(at,2);St(Tt,{class:"mb-6",fixed:!0,children:(e,i)=>{var r=Ot(),d=O(r);Vt(d,17,()=>t(J),At,(c,n)=>{const h=o(()=>N(t(n))),k=o(()=>E(t(n))),$=o(()=>wt(t(n))),T=o(()=>yt(t(n)));Ft(c,{"data-testid":"worker-row",children:(S,D)=>{var Q=Mt(),w=O(Q),U=a(w,!0);s(w);var y=l(w,2),W=a(y),I=a(W),F=l(I);{var H=v=>{qt(v,{get status(){return t($)},get label(){return t(T)}})};z(F,v=>{t($)&&v(H)})}s(W),s(y);var P=l(y,2),K=a(P);{var q=v=>{{let Dt=o(()=>Kt({namespace:t(L),deployment:t(h)}));Rt(v,{get href(){return t(Dt)},children:(Qt,ae)=>{ut();var dt=lt();g(()=>m(dt,t(h))),p(Qt,dt)},$$slots:{default:!0}})}};z(K,v=>{t(h)&&v(q)})}s(P);var j=l(P,2);zt(j,{as:"td",get dateTime(){return t(n).lastAccessTime},class:"hidden md:table-cell","data-testid":"worker-last-access-time"});var B=l(j,2),C=a(B),It=a(C);{let v=o(()=>t(n).taskQueueTypes.includes("WORKFLOW"));G(It,{get includesTaskQueueType(){return t(v)}})}s(C),s(B);var X=l(B,2),st=a(X),Pt=a(st);{let v=o(()=>t(n).taskQueueTypes.includes("ACTIVITY"));G(Pt,{get includesTaskQueueType(){return t(v)}})}s(st),s(X);var ot=l(X,2),it=a(ot),Bt=a(it);{let v=o(()=>t(n).taskQueueTypes.includes("NEXUS"));G(Bt,{get includesTaskQueueType(){return t(v)}})}s(it),s(ot),g(()=>{m(U,t(n).identity),m(I,`${t(k)??""} `)}),p(S,Q)},$$slots:{default:!0}})},c=>{var n=Zt(),h=a(n),k=a(h);{let $=o(()=>u("workflows.workers-empty-state"));Et(k,{get title(){return t($)}})}s(h),s(n),p(c,n)}),p(e,r)},$$slots:{default:!0,caption:(e,i)=>{var r=te(),d=a(r,!0);s(r),g(c=>m(d,c),[()=>u("workflows.workers-tab")]),p(e,r)},headers:(e,i)=>{Ut(e,{slot:"headers",children:(r,d)=>{var c=ee(),n=O(c),h=a(n,!0);s(n);var k=l(n,2),$=a(k,!0);s(k);var T=l(k,2),S=a(T,!0);s(T);var D=l(T,2),Q=a(D,!0);s(D);var w=l(D,2),U=a(w,!0);s(w);var y=l(w,2),W=a(y,!0);s(y);var I=l(y,2),F=a(I,!0);s(I),g((H,P,K,q,j,B,C)=>{m(h,H),m($,P),m(S,K),m(Q,q),m(U,j),m(W,B),m(F,C)},[()=>u("common.id"),()=>u("workers.buildId"),()=>u("deployments.deployment"),()=>u("workflows.last-accessed"),()=>u("workflows.workflow-task-handler"),()=>u("workflows.activity-handler"),()=>u("workflows.nexus-handler")]),p(r,c)},$$slots:{default:!0}})}}}),g(e=>m(et,`${e??""} `),[()=>u("workers.workers")]),p(V,tt),mt()}export{Be as W};
