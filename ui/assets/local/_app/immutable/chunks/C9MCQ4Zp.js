import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Tt,l as T,s as m,m as w,O as i,g as t,a as Kt,bR as ue,j as u,h as b,r as d,e as g,b as $t,o as W,K as X,f as ut,t as R,ax as Vt,ay as Xt,c as pt,v as s,i as kt,n as It,k as xt,az as At,q as ge}from"./DZ1-1a5q.js";import{i as $}from"./DnKg3jxh.js";import{e as Ot,i as me}from"./DGhzC9On.js";import{i as Wt,t as fe}from"./Bby3K3wO.js";import{p as C,a as Z,s as Ct}from"./TaaIktnz.js";import{p as Mt}from"./Bm0Gpem_.js";import{L as zt,D as Rt,g as pe,E as _e}from"./C11hfyzS.js";import{P as he}from"./CsKfOKLA.js";import{a as ye}from"./D4J3bl6a.js";import{t as P}from"./DEjs8ZrU.js";import{c as xe,d as qt,i as jt}from"./BiZw4PW5.js";import{g as Gt}from"./De7-tgDK.js";import{i as Bt}from"./UyrFuaKQ.js";import{e as Yt,b as we,f as be,h as Ee}from"./CfU7pSof.js";import{p as Jt,c as Qt}from"./D4oZ1vFI.js";import{i as Et,c as wt}from"./JX6Mt42b.js";import{b as Pe,s as vt}from"./D3L9VHHD.js";import{s as Nt,c as Zt}from"./B3h3Bc2r.js";import{g as te,i as ke,H as ee,C as Dt,e as re,b as ne}from"./D3fuUC1G.js";import{T as Ie}from"./CO7SHWE2.js";import{E as Te}from"./DEyS7vMf.js";import{L as $e}from"./DW6uis09.js";import{a as Ce,E as Ut}from"./CQakYgES.js";import{d as ae,s as et,a as oe}from"./DxwvfIkW.js";import{t as ie}from"./4Dr_hdgK.js";import{B as se}from"./CqqsKTDn.js";import{C as Lt}from"./DTh3gV-B.js";import{I as Ft}from"./BwERH40W.js";import{L as le}from"./GwTckd-2.js";import{c as de}from"./Bzxzd4dC.js";import{t as ce}from"./CxGq884o.js";var Se=ue('<g role="button" tabindex="0" class="relative cursor-pointer"><!><!><!><!></g>');function He(at,e){Tt(e,!1);const D=()=>Z(Yt,"$eventFilterSort",M),[M,U]=Ct(),k=w(),B=w(),S=w(),H=w(),E=w(),c=w(),p=w(),q=w(),I=w(),j=w();let a=C(e,"event",8),o=C(e,"group",8),A=C(e,"history",8),K=C(e,"groups",8),L=C(e,"index",8),f=C(e,"canvasWidth",8);const{height:tt,radius:_}=ee,N=_/2;T(()=>i(L()),()=>{m(k,L()*tt+tt/2)}),T(()=>(t(B),t(S),i(A()),i(a()),i(K()),D()),()=>{(y=>{m(B,y.nextDistance),m(S,y.offset)})(te(A(),a(),K(),tt,D()))}),T(()=>(t(S),t(B)),()=>{m(H,t(S)>0&&t(B))}),T(()=>(i(a()),wt),()=>{m(E,Et(a())||wt(a())?"pending":a()===null||a()===void 0?void 0:a().classification)}),T(()=>t(S),()=>{m(c,t(S)*1.75*_)}),T(()=>(i(a()),i(o())),()=>{m(p,Gt(a())&&(o()===null||o()===void 0?void 0:o().lastEvent.id)===(a()===null||a()===void 0?void 0:a().id)&&(o()===null||o()===void 0?void 0:o().isPending))}),T(()=>(i(a()),t(S),i(K())),()=>{m(q,Et(a())||wt(a())||t(S)===0?!1:!ke(a(),K()))}),T(()=>(i(a()),t(p)),()=>{m(I,Et(a())||wt(a())?"pending":t(p)?a()===null||a()===void 0?void 0:a().category:void 0)}),T(()=>D(),()=>{m(j,D()==="descending")}),Kt(),Wt();var O=Se(),J=u(O);{var ot=y=>{{let z=W(()=>[f(),t(k)]),it=W(()=>[f()-t(c)-_,t(k)]);zt(y,{get startPoint(){return t(z)},get endPoint(){return t(it)}})}};$(J,y=>{t(q)&&y(ot)})}var gt=b(J);{var _t=y=>{{let z=W(()=>[f()-t(c),t(k)]);Rt(y,{get point(){return t(z)},get classification(){return t(E)},strokeWidth:1})}};$(gt,y=>{t(j)||y(_t)})}var ht=b(gt);{var h=y=>{{let z=W(()=>[f()-t(c)-_/2+N,t(k)+_+N/2]),it=W(()=>[f()-t(c)-_/2+N,t(k)+t(H)+_]),mt=W(()=>(i(o()),t(I),X(()=>{var ft;return(ft=o())!=null&&ft.pendingActivity?Number(o().pendingActivity.attempt)>1?"retry":"pending":t(I)})));zt(y,{get startPoint(){return t(z)},get endPoint(){return t(it)},get category(){return t(mt)},get pending(){return t(p)}})}};$(ht,y=>{t(H)&&y(h)})}var Y=b(ht);{var yt=y=>{{let z=W(()=>[f()-t(c),t(k)]);Rt(y,{get point(){return t(z)},get classification(){return t(E)},strokeWidth:1})}};$(Y,y=>{t(j)&&y(yt)})}d(O),g(at,O),$t(),U()}var De=ut("<div><svg><!><svg></svg></svg></div>");function Le(at,e){Tt(e,!1);const D=()=>Z(we,"$filteredEventHistory",U),M=()=>Z(Yt,"$eventFilterSort",U),[U,k]=Ct(),B=w(),S=w(),H=w(),E=w();let c=C(e,"groups",8),p=C(e,"history",8);const{height:q,radius:I}=ee,j=4*I,a=600;let o=w(j),A=w(0);T(()=>(D(),M()),()=>{m(B,xe(D(),M()))}),T(()=>(t(B),i(c())),()=>{m(S,[...t(B),...c()])}),T(()=>i(p()),()=>{m(H,p().length*q)}),T(()=>(i(p()),i(c()),M(),t(o)),()=>{m(E,N=>{N.forEach(O=>{const{offset:J}=te(p(),O,c(),q,M());m(o,Math.max(t(o),J*1.75*I+j)),m(A,Math.min(t(o)-2*I,a))})})}),T(()=>(t(E),i(p())),()=>{t(E)(p())}),Kt(),Wt();var K=De();let L;var f=u(K),tt=u(f);{let N=W(()=>[t(A),0]),O=W(()=>[t(A),t(H)]);zt(tt,{get startPoint(){return t(N)},get endPoint(){return t(O)},strokeWidth:3})}var _=b(tt);Ot(_,5,p,me,(N,O,J)=>{const ot=W(()=>(i(qt),t(S),t(O),X(()=>qt(t(S),t(O)))));He(N,{get event(){return t(O)},get group(){return t(ot)},get groups(){return t(S)},get history(){return p()},get canvasWidth(){return t(A)},index:J})}),d(_),d(f),d(K),R(()=>{L=Nt(K,1,"hidden text-right xl:block",null,L,{"overflow-hidden":t(o)>a}),Pe(K,`width: ${t(o)??""}px; max-width: 600px;`),vt(f,"viewBox",`0 0 ${t(o)??""} ${t(H)??""}`),vt(f,"height",t(H)),vt(f,"width",t(o)),vt(_,"viewBox",`0 0 ${t(o)??""} ${t(H)??""}`),vt(_,"height",t(H)),vt(_,"width",t(o))}),g(at,K),$t(),k()}var Fe=ut('<tr class="bg-primary"><td><!></td></tr>');function We(at,e){Tt(e,!1);const D=()=>Z(Bt,"$isCloud",M),[M,U]=Ct();let k=C(e,"loading",8,!1),B=C(e,"title",24,()=>P("events.empty-state-title")),S=C(e,"content",24,()=>P("events.empty-state-description"));Wt();var H=Fe(),E=u(H),c=u(E);{var p=I=>{$e(I,{})},q=I=>{Te(I,{get title(){return B()},get content(){return S()}})};$(c,I=>{k()?I(p):I(q,!1)})}d(E),d(H),R(()=>vt(E,"colspan",D()?5:4)),g(at,H),$t(),U()}var Be=ut("<!> <!>",1),Ae=ut("<td></td>"),Oe=ut('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),ze=ut('<tr class="hover:cursor-pointer" data-testid="pending-activity-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td><p><!> </p></td><td class="w-full overflow-hidden text-right font-normal xl:text-left"><div class="flex items-center gap-1"><!> <!></div></td><!></tr> <!>',1);function Ge(at,e){Tt(e,!0);const D=()=>Z(Mt,"$page",k),M=()=>Z(ie,"$timestamp",k),U=()=>Z(Bt,"$isCloud",k),[k,B]=Ct(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let E=Vt(Xt(S())),c=s(()=>D().params),p=s(()=>t(c).workflow),q=s(()=>t(c).run),I=s(()=>t(c).namespace),j=s(()=>de({eventId:e.group===null||e.group===void 0?void 0:e.group.id,namespace:t(I),workflow:t(p),run:t(q)})),a=s(()=>M()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),o=s(()=>M()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const A=n=>{n.stopPropagation(),m(E,!t(E)),H()()};var K=ze(),L=pt(K),f=u(L),tt=u(f);{var _=n=>{le(n,{"data-testid":"link",get href(){return t(j)},children:(l,G)=>{It();var x=xt();R(()=>et(x,e.group.id)),g(l,x)},$$slots:{default:!0}})},N=n=>{var l=xt();R(()=>et(l,e.event.id)),g(n,l)};$(tt,n=>{var l;(l=e.group)!=null&&l.id?n(_):n(N,!1)})}d(f);var O=b(f),J=u(O);{var ot=n=>{{let l=s(()=>P("common.copy-icon-title")),G=s(()=>P("common.copy-success-icon-title"));Lt(n,{get copyIconTitle(){return t(l)},get copySuccessIconTitle(){return t(G)},get content(){return t(o)},children:(x,lt)=>{It();var Q=xt();R(()=>et(Q,t(o))),g(x,Q)},$$slots:{default:!0}})}};$(J,n=>{t(o)&&n(ot)})}d(O);var gt=b(O),_t=u(gt);{var ht=n=>{{let l=s(()=>P("common.copy-icon-title")),G=s(()=>P("common.copy-success-icon-title"));Lt(n,{get copyIconTitle(){return t(l)},get copySuccessIconTitle(){return t(G)},get content(){return t(a)},children:(x,lt)=>{It();var Q=xt();R(()=>et(Q,t(a))),g(x,Q)},$$slots:{default:!0}})}};$(_t,n=>{t(a)&&n(ht)})}d(gt);var h=b(gt),Y=u(h),yt=u(Y);Ft(yt,{get name(){return Dt.activity.name},get title(){return Dt.activity.title},class:"mr-1 inline animate-pulse"});var y=b(yt);d(Y),d(h);var z=b(h),it=u(z),mt=u(it);{let n=s(()=>e.event.paused?"warning":e.event.attempt>1?"danger":"default");se(mt,{class:"mr-1",get type(){return t(n)},children:(l,G)=>{var x=Be(),lt=pt(x);{let rt=s(()=>fe("mr-1 inline",e.event.attempt>1&&"font-bold text-red-400",e.event.paused&&"font-bold text-yellow-700")),F=s(()=>e.event.paused?"pause":"retry");Ft(lt,{get class(){return t(rt)},get name(){return t(F)}})}var Q=b(lt),St=b(Q);{var dt=rt=>{const F=s(()=>ce({date:e.event.scheduledTime,negativeDefault:""}));var nt=kt(),V=pt(nt);{var ct=Pt=>{var Ht=xt();R(ve=>et(Ht,`• ${ve??""}
            ${t(F)??""}`),[()=>P("workflows.next-retry")]),g(Pt,Ht)};$(V,Pt=>{t(F)&&Pt(ct)})}g(rt,nt)};$(St,rt=>{e.event.attempt>1&&rt(dt)})}R(rt=>et(Q,` ${rt??""}
        ${e.event.attempt??""} / ${(e.event.maximumAttempts||"∞")??""} `),[()=>P("workflows.attempt")]),g(l,x)},$$slots:{default:!0}})}var ft=b(mt,2);Ce(ft,{key:"activityType",get value(){return e.event.activityType},showKey:!0,get attributes(){return e.event}}),d(it),d(z);var bt=b(z);{var st=n=>{var l=Ae();g(n,l)};$(bt,n=>{U()&&n(st)})}d(L);var r=b(L,2);{var v=n=>{var l=Oe(),G=u(l),x=u(G);ne(x,{get group(){return e.group}}),d(G),d(l),R(()=>vt(G,"colspan",U()?5:4)),g(n,l)};$(r,n=>{t(E)&&n(v)})}R((n,l)=>{vt(L,"id",`${e.event.id}-${e.index}`),Nt(Y,1,n),et(y,` ${l??""}`)},[()=>Zt(re({category:"activity"})),()=>P("workflows.pending-activity")]),oe("click",L,A),g(at,K),$t(),B()}ae(["click"]);var Ke=ut("<!> <!>",1),Me=ut("<td></td>"),Ne=ut('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),Re=ut('<tr class="hover:cursor-pointer" data-testid="pending-nexus-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="w-full overflow-hidden text-right text-sm font-normal xl:text-left"><div class="flex"><div class="flex w-full items-center gap-2"><p><!> </p> <!></div></div></td><td></td><!></tr> <!>',1);function qe(at,e){Tt(e,!0);const D=()=>Z(Mt,"$page",k),M=()=>Z(ie,"$timestamp",k),U=()=>Z(Bt,"$isCloud",k),[k,B]=Ct(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let E=Vt(Xt(S())),c=s(()=>D().params),p=s(()=>t(c).workflow),q=s(()=>t(c).run),I=s(()=>t(c).namespace),j=s(()=>de({eventId:String(e.event.scheduledEventId),namespace:t(I),workflow:t(p),run:t(q)})),a=s(()=>M()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),o=s(()=>M()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const A=r=>{r.stopPropagation(),m(E,!t(E)),H()()};var K=Re(),L=pt(K),f=u(L),tt=u(f);le(tt,{"data-testid":"link",get href(){return t(j)},children:(r,v)=>{It();var n=xt();R(()=>et(n,e.event.scheduledEventId||"")),g(r,n)},$$slots:{default:!0}}),d(f);var _=b(f),N=u(_);{var O=r=>{{let v=s(()=>P("common.copy-icon-title")),n=s(()=>P("common.copy-success-icon-title"));Lt(r,{get copyIconTitle(){return t(v)},get copySuccessIconTitle(){return t(n)},get content(){return t(o)},children:(l,G)=>{It();var x=xt();R(()=>et(x,t(o))),g(l,x)},$$slots:{default:!0}})}};$(N,r=>{t(o)&&r(O)})}d(_);var J=b(_),ot=u(J);{var gt=r=>{{let v=s(()=>P("common.copy-icon-title")),n=s(()=>P("common.copy-success-icon-title"));Lt(r,{get copyIconTitle(){return t(v)},get copySuccessIconTitle(){return t(n)},get content(){return t(a)},children:(l,G)=>{It();var x=xt();R(()=>et(x,t(a))),g(l,x)},$$slots:{default:!0}})}};$(ot,r=>{t(a)&&r(gt)})}d(J);var _t=b(J),ht=u(_t),h=u(ht),Y=u(h),yt=u(Y);Ft(yt,{get name(){return Dt.nexus.name},get title(){return Dt.nexus.title},class:"mr-1 inline animate-pulse"});var y=b(yt);d(Y);var z=b(Y,2);{var it=r=>{{let v=s(()=>e.event.attempt>1?"danger":"default");se(r,{class:"mx-1",get type(){return t(v)},children:(n,l)=>{var G=Ke(),x=pt(G);{let dt=s(()=>e.event.attempt>1&&"font-bold text-red-400");Ft(x,{get class(){return`mr-1 inline ${t(dt)??""}`},name:"retry"})}var lt=b(x),Q=b(lt);{var St=dt=>{const rt=s(()=>ce({date:e.event.nextAttemptScheduleTime,negativeDefault:""}));var F=kt(),nt=pt(F);{var V=ct=>{var Pt=xt();R(Ht=>et(Pt,`• ${Ht??""}
                ${t(rt)??""}`),[()=>P("workflows.next-retry")]),g(ct,Pt)};$(nt,ct=>{t(rt)&&ct(V)})}g(dt,F)};$(Q,dt=>{e.event.attempt>1&&dt(St)})}R(dt=>et(lt,` ${dt??""}
            ${e.event.attempt??""} `),[()=>P("workflows.attempt")]),g(n,G)},$$slots:{default:!0}})}};$(z,r=>{e.event.attempt&&r(it)})}d(h),d(ht),d(_t);var mt=b(_t,2);{var ft=r=>{var v=Me();g(r,v)};$(mt,r=>{U()&&r(ft)})}d(L);var bt=b(L,2);{var st=r=>{var v=Ne(),n=u(v),l=u(n);ne(l,{get group(){return e.group}}),d(n),d(v),R(()=>vt(n,"colspan",U()?5:4)),g(r,v)};$(bt,r=>{t(E)&&r(st)})}R((r,v)=>{vt(L,"id",`${e.event.scheduledEventId}-${e.index}`),Nt(Y,1,r),et(y,` ${v??""}`)},[()=>Zt(re({category:"nexus"})),()=>P("workflows.pending-nexus-operation")]),oe("click",L,A),g(at,K),$t(),B()}ae(["click"]);var je=ut('<div class="flex"><div class="pt-9"><!></div> <!></div>');function Ir(at,e){Tt(e,!1);const D=()=>Z(be,"$fullEventHistory",B),M=()=>Z(Mt,"$page",B),U=()=>Z(Ee,"$eventStatusFilter",B),k=()=>Z(Bt,"$isCloud",B),[B,S]=Ct(),H=w(),E=w(),c=w(),p=w(),q=w(),I=w(),j=w();var a=w();let o=C(e,"items",8),A=C(e,"groups",24,()=>[]),K=C(e,"updating",8,!1),L=C(e,"loading",8,!1),f=C(e,"compact",8,!1),tt=C(e,"minimized",8,!0),_=C(e,"hoveredEventId",12,void 0);const N=[{label:"Event ID"},{label:"Timestamp"},{label:"Event Type"},{label:"Details"}],O=h=>wt(h)?`pending-nexus-${h.scheduledEventId}`:Et(h)?`pending-activity-${h.id}`:`event-${h.id}`;T(()=>(i(tt()),i(f())),()=>{m(H,!tt()&&!f())}),T(()=>D(),()=>{m(E,D()===null||D()===void 0?void 0:D()[0])}),T(()=>M(),()=>{m(c,M().url)}),T(()=>(At(a),t(c),Jt),()=>{m(p,m(a,t(c).searchParams.get(Jt))!==null&&At(a)!==void 0?At(a):"100")}),T(()=>(t(c),Qt),()=>{m(q,t(c).searchParams.get(Qt)||"1")}),T(()=>U(),()=>{m(j,h=>pe(h,U()))}),T(()=>(t(j),t(q),t(p)),()=>{m(I,h=>t(j)(h).slice((parseInt(t(q))-1)*parseInt(t(p)),parseInt(t(q))*parseInt(t(p))))}),T(()=>k(),()=>{k()&&N.length===4&&N.push({label:"Billable Actions"})}),Kt(),Wt();var J=je(),ot=u(J),gt=u(ot);{var _t=h=>{{let Y=W(()=>(t(I),i(o()),X(()=>t(I)(o()))));Le(h,{get groups(){return A()},get history(){return t(Y)}})}};$(gt,h=>{t(H)&&h(_t)})}d(ot);var ht=b(ot,2);{let h=W(()=>(i(P),X(()=>P("common.per-page")))),Y=W(()=>(i(P),X(()=>P("common.next-page")))),yt=W(()=>(i(P),X(()=>P("common.previous-page")))),y=W(()=>(t(j),i(o()),X(()=>t(j)(o()))));he(ht,{get perPageLabel(){return t(h)},get nextPageButtonLabel(){return t(Y)},get previousPageButtonLabel(){return t(yt)},pageButtonLabel:z=>P("common.go-to-page",{page:z}),get updating(){return K()},get items(){return t(y)},maxHeight:"none",class:"border-t-0",children:ge,$$slots:{default:(z,it)=>{const mt=W(()=>it.visibleItems);var ft=kt(),bt=pt(ft);Ot(bt,3,()=>t(mt),st=>O(st),(st,r,v)=>{var n=kt(),l=pt(n);{var G=F=>{Ut(F,{get event(){return t(r)},get index(){return t(v)},get group(){return t(r)},get compact(){return f()},get initialItem(){return t(E)},get hoveredEventId(){return _()},set hoveredEventId(nt){_(nt)},$$legacy:!0})},x=s(()=>(i(jt),t(r),X(()=>jt(t(r))))),lt=F=>{{let nt=W(()=>(i(A()),i(Et),t(r),X(()=>A().find(V=>{var ct;return Et(t(r))&&((ct=V==null?void 0:V.pendingActivity)==null?void 0:ct.id)===t(r).id}))));Ge(F,{get event(){return t(r)},get index(){return t(v)},get group(){return t(nt)}})}},Q=s(()=>(i(Et),t(r),X(()=>Et(t(r))))),St=F=>{{let nt=W(()=>(i(A()),i(wt),t(r),X(()=>A().find(V=>{var ct;return wt(t(r))&&((ct=V==null?void 0:V.pendingNexusOperation)==null?void 0:ct.scheduledEventId)===t(r).scheduledEventId}))));qe(F,{get event(){return t(r)},get index(){return t(v)},get group(){return t(nt)}})}},dt=s(()=>(i(wt),t(r),X(()=>wt(t(r))))),rt=F=>{{let nt=W(()=>(i(A()),i(Gt),t(r),X(()=>A().find(V=>Gt(t(r))&&V.eventIds.has(t(r).id)))));Ut(F,{get event(){return t(r)},get index(){return t(v)},get group(){return t(nt)},get compact(){return f()},get initialItem(){return t(E)},get hoveredEventId(){return _()},set hoveredEventId(V){_(V)},$$legacy:!0})}};$(l,F=>{t(x)?F(G):t(Q)?F(lt,1):t(dt)?F(St,2):F(rt,!1)})}g(st,n)},st=>{{let r=W(()=>(D(),i(L()),X(()=>!D().length||L())));We(st,{get loading(){return t(r)}})}}),g(z,ft)},headers:(z,it)=>{ye(z,{slot:"headers",class:"!h-8",children:(mt,ft)=>{var bt=kt(),st=pt(bt);Ot(st,3,()=>N,(r,v)=>`${r.label}:${v}`,(r,v)=>{Ie(r,{get column(){return t(v)},children:(n,l)=>{var G=kt(),x=pt(G);{var lt=Q=>{_e(Q,{eventTypesOnly:!0})};$(x,Q=>{t(v),X(()=>t(v).label==="Event Type")&&Q(lt)})}g(n,G)}})}),g(mt,bt)},$$slots:{default:!0}})}}})}d(J),g(at,J),$t(),S()}export{Ir as E};
