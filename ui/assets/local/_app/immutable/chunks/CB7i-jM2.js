import"./CWj6FrbW.js";import{c as Ct,B as St}from"./D3maMAGB.js";import{p as Re,k as ge,t as E,e as c,g as r,v as q,b as Fe,n as be,aO as Me,at as fe,f as z,c as I,j as P,h as w,i as F,s as V,r as T,d as Ve}from"./B6CF0p-B.js";import{s as N,d as Ot}from"./BSSJzwu8.js";import{i as h}from"./DVfqY6Lp.js";import{e as Ee,i as He}from"./DNXtLIpi.js";import{a as At,s as It}from"./Rrz4rnkO.js";import{c as Ke,s as De}from"./CVNTlwXL.js";import{b as qt}from"./DsKFGCQq.js";import{p as l,a as zt,s as Pt,r as Tt,b as ve}from"./BrOjBIf0.js";import{w as Mt}from"./CfXw_P7u.js";import{b as Vt,c as Et,d as Ht}from"./C8yzQBLH.js";import{t as G}from"./BC0HqUZ9.js";import{L as Kt}from"./gE4noIMR.js";import{B as Be}from"./8VG3u8yQ.js";import{C as Dt}from"./DmJNVnSC.js";import{I as me}from"./CsmBsHFA.js";import{M as Bt}from"./8iXXs4OF.js";import{T as je}from"./C82XNxlY.js";function p($,e){Re(e,!0);let m=l(e,"selected",3,!1),J=l(e,"disabled",3,!1),ee=l(e,"class",3,"");{let _=q(()=>G("break-all",ee()));Vt($,{role:"option",get class(){return r(_)},get"aria-selected"(){return m()},get"aria-disabled"(){return J()},get onclick(){return e.onclick},get selected(){return m()},get disabled(){return J()},get leading(){return e.leading},get trailing(){return e.trailing},children:(a,te)=>{be();var Q=ge();E(()=>N(Q,e.label)),c(a,Q)},$$slots:{default:!0}})}Fe()}const jt=Ct(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}});var Rt=z("<p> </p>"),Ft=z("<!> <!>",1),pt=z('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),Nt=z('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),Gt=z('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),Jt=z("<!> <!> <!>",1),Qt=z("<!> <!> <!>",1),Ut=z('<span class="error svelte-kqcnue"> </span>'),Wt=z('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input/></div> <!> <!></div></div> <!> <!>',1);function ga($,e){Re(e,!0);const m=()=>zt(B(),"$open",J),[J,ee]=Pt();let _=l(e,"multiselect",3,!1),a=l(e,"value",15),te=l(e,"disabled",3,!1),Q=l(e,"labelHidden",3,!1),pe=l(e,"placeholder",3,null),Ne=l(e,"readonly",3,!1),ae=l(e,"required",3,!1),U=l(e,"leadingIcon",3,null),Ge=l(e,"showChevron",3,!1),M=l(e,"optionValueKey",3,null),W=l(e,"optionLabelKey",19,M),he=l(e,"minSize",3,0),_e=l(e,"maxSize",3,120),xe=l(e,"error",3,""),ye=l(e,"valid",3,!0),B=l(e,"open",19,()=>Mt(!1)),Je=l(e,"maxMenuHeight",3,"max-h-[20rem]"),re=l(e,"chipLimit",3,5),Qe=l(e,"displayChips",3,!0),Ue=l(e,"selectAllLabel",3,"Select All"),We=l(e,"deselectAllLabel",3,"Deselect All"),Xe=l(e,"removeChipLabel",3,"Remove Option"),Ye=l(e,"numberOfItemsSelectedLabel",3,t=>`${t} option${t>1?"s":""} selected`),X=l(e,"actionTooltip",3,""),le=l(e,"href",3,""),we=l(e,"hrefDisabled",3,!1),ke=l(e,"loading",3,!1),Ze=l(e,"loadingText",3,"Loading more results"),Le=l(e,"variant",3,"default"),$e=l(e,"optionClass",3,""),et=l(e,"data-testid",19,()=>e.id),tt=Tt(e,["$$slots","$$events","$$legacy","class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","open","maxMenuHeight","action","chipLimit","displayChips","selectAllLabel","deselectAllLabel","removeChipLabel","numberOfItemsSelectedLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","optionClass","onchange","onclose","oninput","data-testid"]),ne=fe(""),ie=fe(null),x=fe(null);const Y=q(()=>rt(e.options));let se=q(()=>ft(r(ne),e.options)),C=q(()=>_()?void 0:de(r(Y)));Me(()=>{m()&&r(x)&&document.activeElement!==r(x)&&(r(x).focus(),r(x).select())}),Me(()=>{r(x)&&r(C)&&(r(C).length<he()?r(x).size=he():r(C).length>_e()?r(x).size=_e():r(x).size=r(C).length)});const j=()=>{m()||(ve(B(),!0),V(ne,""),r(x).focus(),r(x).select())},Ce=()=>{m()&&(ve(B(),!1),e.onclose===null||e.onclose===void 0||e.onclose(r(Y)),oe())},at=()=>{e.onclose===null||e.onclose===void 0||e.onclose(r(Y)),oe()},oe=()=>{V(C,de(r(Y))),V(se,e.options)},S=t=>Array.isArray(t),H=t=>typeof t=="string",K=t=>typeof t=="object",R=t=>t===null||typeof t!="object"?!1:M()!==null&&W()!==null&&M()in t&&W()in t;function de(t){if(!t)return S(a())?"":a()!==null&&a()!==void 0?a():"";if(H(t))return t;if(K(t)&&R(t))return String(t[W()])}function rt(t){return t.find(i=>{if(H(i))return i===a();if(K(i)&&R(i))return i[M()]===a()})}const lt=t=>{if(H(t)&&(S(a())?a().includes(t)?a(a().filter(i=>i!==t)):a([...a(),t]):a(t)),K(t)&&R(t)){const i=String(t[M()]);S(a())?a().includes(i)?a(a().filter(g=>g!==i)):a([...a(),i]):a(i)}},nt=t=>{lt(t),e.onchange===null||e.onchange===void 0||e.onchange(t),_()||oe()},it=t=>{S(a())&&a(a().filter(i=>i!==t))},st=()=>{!_()||!S(a())||a(r(se).map(t=>{if(K(t)&&R(t))return String(t[M()]);if(H(t))return t}))},ot=()=>{a([])},Se=()=>{const t=r(ie).querySelector('li[role="option"]:not([aria-disabled="true"])');t&&requestAnimationFrame(()=>t.focus())},dt=t=>{switch(t.stopPropagation(),t.key){case"Escape":Ce();break;case"ArrowDown":j(),Se();break;case"Enter":j(),Se();break}},ut=t=>{t.stopPropagation(),j()},ct=t=>{t.stopPropagation(),m()||ve(B(),!0),V(C,t.currentTarget.value),V(ne,r(C),!0),e.oninput===null||e.oninput===void 0||e.oninput(r(C))};function ft(t,i){return i.filter(g=>{if(H(g))return g.toLowerCase().includes(t.toLowerCase());if(K(g)&&R(g))return String(g[W()]).toLowerCase().includes(t.toLowerCase())})}const vt=t=>{t.stopPropagation(),m()||j()},mt=t=>{t.stopPropagation(),m()?Ce():j()},gt=(t,i)=>{if(K(t)){const g=String(t[M()]);return S(i)?i.includes(g):i===g}else if(H(t))return S(i)?i.includes(t):i===t;return!1};Et($,{get open(){return B()},onclose:at,children:(t,i)=>{var g=Wt(),ue=I(g),Oe=P(ue);Kt(Oe,{get hidden(){return Q()},get required(){return ae()},get label(){return e.label},get for(){return e.id}});var ce=w(Oe,2),Ae=P(ce);{var bt=n=>{me(n,{class:"ml-2 shrink-0",get name(){return U()}})};h(Ae,n=>{U()&&n(bt)})}var Z=w(Ae,2),Ie=P(Z);{var ht=n=>{var o=F(),y=I(o);{var k=u=>{var b=Ft(),L=I(b);Ee(L,17,()=>a().slice(0,re()),He,(f,v)=>{Dt(f,{onremove:()=>it(r(v)),get removeButtonLabel(){return Xe()},children:(A,D)=>{be();var Te=ge();E(()=>N(Te,r(v))),c(A,Te)},$$slots:{default:!0}})});var d=w(L,2);{var s=f=>{var v=Rt(),A=P(v);T(v),E(D=>N(A,`+${D??""}`),[()=>a().slice(re()).length]),c(f,v)};h(d,f=>{a().length>re()&&f(s)})}c(u,b)},O=u=>{St(u,{children:(b,L)=>{be();var d=ge();E(s=>N(d,s),[()=>Ye()(a().length)]),c(b,d)},$$slots:{default:!0}})};h(y,u=>{Qe()?u(k):u(O,!1)})}c(n,o)};h(Ie,n=>{_()&&S(a())&&a().length>0&&n(ht)})}var qe=w(Ie,2);At(qe,n=>({id:e.id,placeholder:pe(),required:ae(),readonly:Ne(),disabled:te(),type:"text",value:r(C),class:n,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${e.id??""}-listbox`,"aria-expanded":m(),"aria-required":ae(),"aria-autocomplete":"list",onfocus:ut,oninput:ct,onkeydown:dt,onclick:vt,"data-testid":et(),...tt}),[()=>G("combobox-input",_()?a().length>0||U()?"indent-0":"indent-1":"indent-2",e.class)],void 0,void 0,"svelte-kqcnue",!0),qt(qe,n=>V(x,n),()=>r(x)),T(Z);var ze=w(Z,2);{var _t=n=>{var o=pt(),y=P(o);{var k=u=>{je(u,{get text(){return X()},right:!0,children:(b,L)=>{var d=F(),s=I(d);Ve(s,()=>e.action),c(b,d)},$$slots:{default:!0}})},O=u=>{var b=F(),L=I(b);Ve(L,()=>e.action),c(u,b)};h(y,u=>{X()?u(k):u(O,!1)})}T(o),c(n,o)},xt=n=>{var o=F(),y=I(o);{var k=O=>{var u=Nt(),b=P(u);{var L=s=>{je(s,{get text(){return X()},right:!0,children:(f,v)=>{Be(f,{variant:"ghost",size:"xs",get href(){return le()},get disabled(){return we()},leadingIcon:"external-link"})},$$slots:{default:!0}})},d=s=>{Be(s,{variant:"ghost",size:"xs",get href(){return le()},get disabled(){return we()},leadingIcon:"external-link"})};h(b,s=>{X()?s(L):s(d,!1)})}T(u),c(O,u)};h(y,O=>{le()&&O(k)},!0)}c(n,o)};h(ze,n=>{e.action?n(_t):n(xt,!1)})}var yt=w(ze,2);{var wt=n=>{var o=Gt();o.__click=mt;var y=P(o);{let k=q(()=>G("transition-transform duration-200",m()&&"rotate-180",!m()&&"rotate-0"));me(y,{name:"chevron-down",get class(){return r(k)}})}T(o),E(()=>It(o,"aria-label",m()?"Close options":"Open options")),c(n,o)};h(yt,n=>{Ge()&&n(wt)})}T(ce),T(ue);var Pe=w(ue,2);Ht(Pe,{get keepOpen(){return _()},get id(){return`${e.id??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return Je()},get menuElement(){return r(ie)},set menuElement(n){V(ie,n,!0)},children:(n,o)=>{var y=Qt(),k=I(y);{var O=d=>{var s=Jt(),f=I(s);{let D=q(()=>a().length===e.options.length);p(f,{get disabled(){return r(D)},onclick:st,get label(){return Ue()}})}var v=w(f,2);{let D=q(()=>a().length===0);p(v,{get disabled(){return r(D)},onclick:ot,get label(){return We()}})}var A=w(v,2);Bt(A),c(d,s)};h(k,d=>{_()&&S(a())&&d(O)})}var u=w(k,2);Ee(u,17,()=>r(se),He,(d,s)=>{{let f=q(()=>gt(r(s),a())),v=q(()=>de(r(s)));p(d,{onclick:()=>nt(r(s)),get selected(){return r(f)},get label(){return r(v)},get class(){return $e()}})}},d=>{var s=F(),f=I(s);{var v=A=>{p(A,{disabled:!0,get label(){return e.noResultsText}})};h(f,A=>{ke()===!1&&A(v)})}c(d,s)});var b=w(u,2);{var L=d=>{p(d,{disabled:!0,get label(){return Ze()},leading:f=>{me(f,{name:"spinner",class:"animate-spin"})},$$slots:{leading:!0}})};h(b,d=>{ke()&&d(L)})}c(n,y)},$$slots:{default:!0}});var kt=w(Pe,2);{var Lt=n=>{var o=Ut(),y=P(o,!0);T(o),E(()=>N(y,xe())),c(n,o)};h(kt,n=>{xe()&&!ye()&&n(Lt)})}E((n,o)=>{De(ce,1,n,"svelte-kqcnue"),De(Z,1,o,"svelte-kqcnue")},[()=>Ke(G(jt({variant:Le()}),!ye()&&Le()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",te()&&"opacity-50",e.class)),()=>Ke(G("input-wrapper",_()&&"gap-1",_()&&"m-1",U()&&_()&&"ml-2"))]),c(t,g)},$$slots:{default:!0}}),Fe(),ee()}Ot(["click"]);export{ga as C};
