import"./Bzak7iHL.js";import"./69_IOA4Y.js";import{p as ge,t as B,i as l,c as d,r as c,j,o as i,e as x,b as xe,f as me,g as e,m as F,l as de,s as f,ak as V,a as Ne,h as Oe,n as ue,k as fe}from"./DbzSl5JP.js";import{f as ze,e as re,s as T}from"./B3b0ZBK9.js";import{i as ee}from"./BwgIsUu1.js";import{c as _e,s as se,b as Me,a as We}from"./TqT1w0aw.js";import{t as Fe,a as Ge}from"./isAOmgoW.js";import{i as he,t as ce,s as Ie}from"./0AwovCk4.js";import{l as Ce,p as s,a as U,s as Je,c as G}from"./BV6aaRB7.js";import{w as qe}from"./Bq4CR0Xw.js";import{p as Ke}from"./CwQI2t38.js";import{A as Qe}from"./DEYh1TLQ.js";import{B as $e}from"./BUuWoipd.js";import{L as Ue}from"./DpOeyJ1_.js";import{t as a}from"./BXv1jDVW.js";import{c as Te,p as Ee,i as Le,o as Pe}from"./DhyhAeXw.js";import{r as Xe}from"./BrrWw5aB.js";import{v as Ye,a as De}from"./Dq3hB7XF.js";import{a as Ze}from"./Vj7pKMMQ.js";import{s as et}from"./Bfc47y5P.js";import{b as ae}from"./D8435AaA.js";import{L as tt}from"./Cs_V1R3x.js";import{T as He}from"./3mpjcgLW.js";import{R as rt,a as Re}from"./BiCeoThc.js";var at=B('<p class="-mt-1 text-sm"> </p>'),st=B("<p> </p>"),ot=B("<!> <!>",1),it=B('<span class="count svelte-1i0s5a4"><span> </span> </span>'),nt=B('<div><!> <!> <div><textarea></textarea></div> <div class="flex justify-between gap-2"><div><!></div> <!></div></div>');function lt(I,t){const h=Ce(t,["children","$$slots","$$events","$$legacy"]),X=Ce(h,["disabled","error","isValid","placeholder","rows","spellcheck","value","label","labelHidden","id","required","description","maxLength","class"]);ge(t,!1);let _=s(t,"disabled",8,!1),E=s(t,"error",8,""),b=s(t,"isValid",8,!0),J=s(t,"placeholder",8,""),A=s(t,"rows",8,5),K=s(t,"spellcheck",8,null),L=s(t,"value",12),w=s(t,"label",8),P=s(t,"labelHidden",8,!1),k=s(t,"id",8),N=s(t,"required",8,!1),D=s(t,"description",8,""),y=s(t,"maxLength",8,0),p=s(t,"class",8,"text-primary");he();var g=nt(),n=l(g);tt(n,{get required(){return N()},get hidden(){return P()},get label(){return w()},get for(){return k()}});var H=d(n,2);{var Y=r=>{var v=at(),m=l(v,!0);c(v),j(()=>T(m,D())),x(r,v)};ee(H,r=>{D()&&r(Y)})}var O=d(H,2),C=l(O);ze(C);let oe;c(O);var ie=d(O,2),S=l(ie);let z;var ne=l(S);{var te=r=>{var v=ot(),m=me(v);{var M=Q=>{var R=st(),q=l(R,!0);c(R),j(()=>T(q,E())),x(Q,R)};ee(m,Q=>{E()&&Q(M)})}var Z=d(m,2);Ie(Z,t,"error",{},null),x(r,v)};ee(ne,r=>{b()||r(te)})}c(S);var le=d(S,2);{var ve=r=>{var v=it(),m=l(v);let M;var Z=l(m,!0);c(m);var Q=d(m);c(v),j(R=>{var q;M=se(m,1,"text-information svelte-1i0s5a4",null,M,R),T(Z,((q=L())==null?void 0:q.length)??0),T(Q,` / ${y()??""}`)},[()=>{var R,q;return{warn:y()-((R=L())==null?void 0:R.length)<=5,error:y()===((q=L())==null?void 0:q.length)}}],i),x(r,v)};ee(le,r=>{y()&&!_()&&r(ve)})}c(ie),c(g),j((r,v,m,M)=>{se(g,1,r,"svelte-1i0s5a4"),se(O,1,v,"svelte-1i0s5a4"),oe=Me(C,oe,{class:m,id:k(),disabled:_(),placeholder:J(),rows:A(),spellcheck:K(),maxlength:y()>0?y():void 0,"data-testid":k(),...X},"svelte-1i0s5a4"),z=se(S,1,"error-msg svelte-1i0s5a4",null,z,M),We(S,"aria-live",b()?"off":"assertive")},[()=>_e(ce("group flex flex-col gap-1",p())),()=>_e(ce("relative box-border inline-flex w-full border border-subtle focus-within:border-information focus-within:ring-2 focus-within:ring-primary/70",!b()&&"error",!_()&&"hover:border-information")),()=>ce("surface-primary min-h-fit w-full px-3 py-2 text-sm focus-visible:outline-none",_()&&"cursor-not-allowed opacity-50"),()=>({"min-width":y()})],i),Ze(C,L),re("input",C,function(r){ae.call(this,t,r)}),re("change",C,function(r){ae.call(this,t,r)}),re("focus",C,function(r){ae.call(this,t,r)}),re("blur",C,function(r){ae.call(this,t,r)}),re("keydown",C,et(function(r){ae.call(this,t,r)})),x(I,g),xe()}var dt=B('<small data-testid="data-encoder-cross-origin-credentials"> </small>'),ct=B('<div class="flex flex-col gap-4"><div class="flex flex-col gap-2"><!> <!> <!> <!></div></div>');function vt(I,t){ge(t,!1);let h=s(t,"endpoint",12,""),X=s(t,"passToken",12,!1),_=s(t,"includeCreds",12,!1),E=s(t,"error",8,"");he();var b=ct(),J=l(b),A=l(J);const K=i(()=>a("data-encoder.endpoint-placeholder")),L=i(()=>!E()),w=i(()=>a("data-encoder.endpoint-title")),P=i(()=>a("data-encoder.endpoint-description"));lt(A,{id:"data-encoder-endpoint-input",rows:3,get placeholder(){return e(K)},get error(){return E()},get isValid(){return e(L)},get label(){return e(w)},get description(){return e(P)},get value(){return h()},set value(n){h(n)},$$legacy:!0});var k=d(A,2);const N=i(()=>a("data-encoder.pass-access-token-label"));He(k,{get label(){return e(N)},id:"pass-access-token","data-testid":"data-encoder-pass-access-token",get checked(){return X()},set checked(n){X(n)},$$legacy:!0});var D=d(k,2);const y=i(()=>a("data-encoder.include-cross-origin-credentials-label"));He(D,{get label(){return e(y)},id:"pass-access-credentials","data-testid":"data-encoder-include-credentials",get checked(){return _()},set checked(n){_(n)},$$legacy:!0});var p=d(D,2);{var g=n=>{var H=dt(),Y=l(H,!0);c(H),j(O=>T(Y,O),[()=>a("data-encoder.include-cross-origin-credentials-warning")],i),x(n,H)};ee(p,n=>{_()&&n(g)})}c(J),c(b),x(I,b),xe()}const ut=I=>I.replace(/\/+$/,""),pe=qe(!1);var ft=B("<!> <!>",1),pt=B('<aside><div class="flex w-full flex-col gap-4 xl:w-1/2"><div class="flex items-center justify-between space-x-2"><h3 data-testid="data-encoder-title"> </h3></div> <p class="text-sm"> <!> </p> <!> <!> <div class="flex items-center gap-4"><!> <!></div></div></aside>');function Nt(I,t){ge(t,!1);const[h,X]=Je(),_=()=>U(Te,"$codecEndpoint",h),E=()=>U(Ee,"$passAccessToken",h),b=()=>U(Le,"$includeCredentials",h),J=()=>U(Pe,"$overrideRemoteCodecConfiguration",h),A=()=>U(Ke,"$page",h),K=()=>U(pe,"$viewDataEncoderSettings",h),L=()=>U(H,"$override",h),w=F(),P=F();var k=F(),N=F(),D=F();let y=s(t,"class",8,""),p=F(_()!==null&&_()!==void 0?_():""),g=F(E()!==null&&E()!==void 0?E():!1),n=F(b()!==null&&b()!==void 0?b():!1),H=qe(J());const Y=()=>{f(p,_()),f(g,E()),f(n,b()),G(H,J()),G(pe,!1)},O=()=>{f(w,""),G(Te,e(p)?ut(e(p)):e(p)),G(Ee,e(g)),G(Le,e(n)),G(pe,!1),G(Pe,L()),A().url.pathname.endsWith("history")&&G(Xe,Date.now())};de(()=>{},()=>{f(w,"")}),de(()=>(V(D),V(N),V(k),A(),a),()=>{f(P,!(f(D,f(N,f(k,A().data)===null||V(k)===void 0?void 0:V(k).settings)===null||V(N)===void 0?void 0:V(N).runtimeEnvironment)===null||V(D)===void 0)&&V(D).isCloud?a("common.namespaces"):a("common.cluster"))}),de(()=>(e(g),e(p),De),()=>{e(g)&&!Ye(e(p))?f(w,a("data-encoder.access-token-https-error")):e(p)&&!De(e(p))?f(w,a("data-encoder.prefix-error")):f(w,"")}),de(()=>K(),()=>{K()||Y()}),Ne(),he();var C=Oe(),oe=me(C);{var ie=S=>{var z=pt(),ne=l(z),te=l(ne),le=l(te),ve=l(le,!0);c(le),c(te);var r=d(te,2),v=l(r,!0),m=d(v);Ue(m,{href:"https://docs.temporal.io/dataconversion#codec-server",newTab:!0,children:(o,W)=>{ue();var u=fe();j($=>T(u,$),[()=>a("common.codec-server")],i),x(o,u)},$$slots:{default:!0}});var M=d(m);c(r);var Z=d(r,2);const Q=i(()=>L()?a("data-encoder.browser-override-description",{level:e(P)}):a("data-encoder.no-browser-override-description",{level:e(P)})),R=i(()=>{var o,W,u,$;return L()?"":($=(u=(W=(o=A())==null?void 0:o.data)==null?void 0:W.settings)==null?void 0:u.codec)==null?void 0:$.endpoint});Qe(Z,{"data-testid":"override-accordion",get title(){return e(Q)},get subtitle(){return e(R)},class:"max-sm:[&_h3]:text-xs",children:(o,W)=>{rt(o,{name:"override",group:H,children:(u,$)=>{var ke=ft(),ye=me(ke);const Ve=i(()=>a("data-encoder.no-browser-override-description",{level:e(P)}));Re(ye,{id:"use-configuration-endpoint-radio","data-testid":"use-configuration-endpoint-input",value:!1,get label(){return e(Ve)}});var je=d(ye,2);const Be=i(()=>a("data-encoder.browser-override-description",{level:e(P)}));Re(je,{id:"use-local-endpoint-radio","data-testid":"use-local-endpoint-input",value:!0,get label(){return e(Be)}}),x(u,ke)},$$slots:{default:!0}})},$$slots:{default:!0}});var q=d(Z,2);vt(q,{get error(){return e(w)},get endpoint(){return e(p)},set endpoint(o){f(p,o)},get passToken(){return e(g)},set passToken(o){f(g,o)},get includeCreds(){return e(n)},set includeCreds(o){f(n,o)},$$legacy:!0});var be=d(q,2),we=l(be);const Ae=i(()=>!!e(w));$e(we,{get disabled(){return e(Ae)},"data-testid":"confirm-data-encoder-button",type:"submit",$$events:{click:O},children:(o,W)=>{ue();var u=fe();j($=>T(u,$),[()=>a("common.apply")],i),x(o,u)},$$slots:{default:!0}});var Se=d(we,2);$e(Se,{variant:"ghost","data-testid":"cancel-data-encoder-button",$$events:{click:Y},children:(o,W)=>{ue();var u=fe();j($=>T(u,$),[()=>a("common.cancel")],i),x(o,u)},$$slots:{default:!0}}),c(be),c(ne),c(z),j((o,W,u,$)=>{se(z,1,o),T(ve,W),T(v,u),T(M,` ${$??""}`)},[()=>_e(ce("surface-primary relative flex h-[540px] w-full flex-col gap-6 border-b border-subtle p-4 md:p-12",y())),()=>a("common.codec-server"),()=>a("data-encoder.codec-server-description-prefix"),()=>a("data-encoder.codec-server-description-suffix",{level:e(P)})],i),Fe(1,z,()=>Ge,()=>({y:-50,delay:0,duration:500})),x(S,z)};ee(oe,S=>{K()&&S(ie)})}x(I,C),xe(),X()}export{Nt as D,pe as v};
