import"./Bzak7iHL.js";import{p as Oe,u as a,t as j,i as r,n as ue,k as re,j as I,e as l,c as s,r as n,af as Q,g as e,b as qe,h as Ne,f as oe,d as pa,o as ne,l as Ie,s as de,m as we,M as Ee,a as gt,q as Ut,ak as mt,ah as Dt,ai as xa}from"./DbzSl5JP.js";import{s as y,d as ga,e as Rt}from"./B3b0ZBK9.js";import{i as m}from"./BwgIsUu1.js";import{e as ze,i as yt}from"./DgMCLi2J.js";import{c as Wt,s as st,a as ft}from"./TqT1w0aw.js";import{s as ct,a as Ae,l as it,p as X,b as _t}from"./BV6aaRB7.js";import{o as ya}from"./Bq4CR0Xw.js";import{p as We}from"./Z8ytLBAl.js";import{B as Ge}from"./CQ8G9PIZ.js";import{C as Ke}from"./Bo6M_2f6.js";import{I as zt}from"./ZcSUWOp6.js";import{L as Qe}from"./wXB5p9zJ.js";import{T as pt}from"./DDNYcp7V.js";import{t as v}from"./BXv1jDVW.js";import{i as Z,e as ha,a as wa,b as ka}from"./BAlXqhA4.js";import{i as ba}from"./DkiTd6LZ.js";import{a as Ta}from"./B8QFmZ5C.js";import{f as He,r as ht,t as wt}from"./Cuno9m5b.js";import{c as Ia,d as Ea}from"./CsGtnzKH.js";import{a as Aa,b as Pa,g as Sa}from"./BBDx8iTm.js";import{b as Fa,f as Ca,d as rt,s as La,c as Ma,e as ja,h as Da,j as Ra}from"./ehR0GODD.js";import{h as Le,F as Ha}from"./CmQ9-Uxk.js";import{s as Gt,f as lt}from"./ByTIZu23.js";import{t as Kt,f as Qt,P as Na}from"./BBi_ufdz.js";import{l as Ht}from"./D2ipHYI-.js";import{c as Nt,i as Oa,j as qa,a as Va,b as Ot}from"./DxApGHAz.js";import{C as Me}from"./51NTAvwI.js";import{o as Ba}from"./C8ejR22J.js";import{s as qt}from"./BDfAQ6r3.js";import{g as Jt}from"./CPt4rN4L.js";import"./69_IOA4Y.js";import{i as kt,t as xt}from"./0AwovCk4.js";import{p as Ua}from"./Bmm20IWV.js";import"./D0Jyh3oV.js";import"./DhyhAeXw.js";import{M as Xt}from"./DaLSQPJC.js";import{P as ot}from"./CoACBnZY.js";const Vt=async(E,t)=>{var P,k,p,f,d,x,M,D,S,T,F;if(!("eventType"in E)||!Le(E))return;const{namespace:i,settings:u,accessToken:_}=t,h={...u,codec:{...u==null?void 0:u.codec,endpoint:Sa(u),passAccessToken:Pa(u),includeCredentials:Aa(u)}};try{const R=await Ia(E.attributes,i,h,_),g=((p=(k=(P=E.markerRecordedEventAttributes)==null?void 0:P.details)==null?void 0:k.data)==null?void 0:p.payloads)||((x=(d=(f=E.markerRecordedEventAttributes)==null?void 0:f.details)==null?void 0:d.type)==null?void 0:x.payloads)||[];if(!(g!=null&&g.length))return;const A=Ea(R),O=(F=((D=(M=A==null?void 0:A.details)==null?void 0:M.data)==null?void 0:D.payloads)||((T=(S=A==null?void 0:A.details)==null?void 0:S.type)==null?void 0:T.payloads))==null?void 0:F[0],U=Fa(O);if(U)return Ca("ActivityType",U)}catch(R){console.error("Failed to decode local activity type:",R)}},pr=E=>{if("eventList"in E)return E.eventList.find(Le);if(Le(E))return E},Te=(E,t=Q,i=Q)=>{var u=za(),_=r(u),h=r(_,!0);n(_);var P=s(_,2),k=r(P);{var p=d=>{var x=re();I(()=>y(x,i())),l(d,x)},f=d=>{var x=Ne(),M=oe(x);pa(M,()=>i()??Q),l(d,x)};m(k,d=>{typeof i()=="string"||typeof i()=="number"?d(p):d(f,!1)})}n(P),n(u),I(()=>y(h,t())),l(E,u)};var Wa=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),za=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ga=j("<!> ",1),Ka=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Qa=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Ja=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),Xa=j('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),Ya=j('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),Za=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function $a(E,t){Oe(t,!0);const[i,u]=ct(),_=()=>Ae(wt,"$timeFormat",i),h=()=>Ae(ht,"$relativeTime",i),P=(o,w=Q)=>{var H=Wa(),se=r(H),$=r(se,!0);n(se);var V=s(se,2),le=r(V),pe=s(le),ce=r(pe);n(pe),n(V),n(H),I((ie,ge)=>{y($,ie),y(le,`${ge??""} `),y(ce,`(${w()??""})`)},[()=>v("workflows.next-retry"),()=>He(t.operation.nextAttemptScheduleTime,_(),{relative:h(),relativeLabel:""})]),l(o,H)},k=o=>{const w=a(()=>e(f)?"danger":"default");Ge(o,{class:"mr-1",get type(){return e(w)},children:(H,se)=>{var $=Ga(),V=oe($);const le=a(()=>e(f)&&"font-bold text-red-400");zt(V,{get class(){return`mr-1 ${e(le)??""}`},name:"retry"});var pe=s(V);I(()=>y(pe,` ${t.operation.attempt??0}`)),l(H,$)},$$slots:{default:!0}})},p=o=>{var w=Ja(),H=r(w),se=r(H);{var $=ce=>{var ie=Ka(),ge=oe(ie),Xe=r(ge,!0);n(ge);var Ye=s(ge,2);const Re=a(()=>qt(Ba(t.operation.lastAttemptFailure,"stackTrace"))),Ze=a(()=>v("common.copy-icon-title")),$e=a(()=>v("common.copy-success-icon-title"));Me(Ye,{get content(){return e(Re)},maxHeight:384,get copyIconTitle(){return e(Ze)},get copySuccessIconTitle(){return e($e)}}),I(vt=>y(Xe,vt),[()=>v("workflows.last-failure")]),l(ce,ie)};m(se,ce=>{t.operation.lastAttemptFailure&&ce($)})}n(H);var V=s(H,2),le=r(V);{var pe=ce=>{var ie=Qa(),ge=oe(ie),Xe=r(ge,!0);n(ge);var Ye=s(ge,2);const Re=a(()=>v("common.copy-icon-title")),Ze=a(()=>v("common.copy-success-icon-title"));Me(Ye,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(Re)},get copySuccessIconTitle(){return e(Ze)}}),I($e=>y(Xe,$e),[()=>v("common.stack-trace")]),l(ce,ie)};m(le,ce=>{var ie;(ie=t.operation.lastAttemptFailure)!=null&&ie.stackTrace&&ce(pe)})}n(V),n(w),l(o,w)},f=a(()=>t.operation.attempt>1);var d=Za(),x=r(d),M=r(x),D=r(M);Ge(D,{children:(o,w)=>{ue();var H=re();I(()=>y(H,t.operation.state)),l(o,H)},$$slots:{default:!0}});var S=s(D,2),T=r(S,!0);n(S),n(M),n(x);var F=s(x,2),R=r(F),g=r(R);{var A=o=>{var w=ne(()=>v("nexus.endpoint"));Te(o,()=>e(w),()=>t.operation.endpoint)};m(g,o=>{t.operation.endpoint&&o(A)})}var O=s(g,2);{var U=o=>{var w=ne(()=>v("nexus.service"));Te(o,()=>e(w),()=>t.operation.service)};m(O,o=>{t.operation.service&&o(U)})}var z=s(O,2);{var J=o=>{var w=ne(()=>v("nexus.operation"));Te(o,()=>e(w),()=>t.operation.operation)};m(z,o=>{t.operation.operation&&o(J)})}var K=s(z,2);{var Y=o=>{var w=ne(()=>v("nexus.operation-token"));Te(o,()=>e(w),()=>t.operation.operationToken)};m(K,o=>{t.operation.operationToken&&o(Y)})}var me=s(K,2),je=ne(()=>v("workflows.attempt"));Te(me,()=>e(je),()=>k);var fe=s(me,2);{var B=o=>{var w=Ne();const H=a(()=>Kt({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var se=oe(w);{var $=V=>{P(V,()=>e(H))};m(se,V=>{e(H)&&V($)})}l(o,w)};m(fe,o=>{t.operation.nextAttemptScheduleTime&&o(B)})}var ye=s(fe,2);{var Pe=o=>{var w=ne(()=>v("workflows.last-attempt-completed-time")),H=ne(()=>He(t.operation.lastAttemptCompleteTime,_(),{relative:h()}));Te(o,()=>e(w),()=>e(H))};m(ye,o=>{t.operation.lastAttemptCompleteTime&&o(Pe)})}var Ve=s(ye,2);{var Je=o=>{var w=ne(()=>v("workflows.schedule-event-id"));Te(o,()=>e(w),()=>t.operation.scheduledEventId)};m(Ve,o=>{t.operation.scheduledEventId&&o(Je)})}var b=s(Ve,2);{var C=o=>{var w=ne(()=>v("workflows.scheduled-time")),H=ne(()=>He(t.operation.scheduledTime,_(),{relative:h()}));Te(o,()=>e(w),()=>e(H))};m(b,o=>{t.operation.scheduledTime&&o(C)})}var q=s(b,2);{var W=o=>{var w=ne(()=>v("workflows.schedule-to-close-timeout"));Te(o,()=>e(w),()=>t.operation.scheduleToCloseTimeout)};m(q,o=>{t.operation.scheduleToCloseTimeout&&o(W)})}n(R);var G=s(R,2),xe=r(G);{var _e=o=>{p(o)};m(xe,o=>{e(f)&&o(_e)})}var ke=s(xe,2);{var De=o=>{var w=Xa(),H=r(w),se=r(H,!0);n(H);var $=s(H,2);const V=a(()=>v("common.copy-icon-title")),le=a(()=>v("common.copy-success-icon-title"));Me($,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(le)}}),n(w),I(pe=>y(se,pe),[()=>v("nexus.blocked-reason")]),l(o,w)};m(ke,o=>{t.operation.blockedReason&&o(De)})}var Se=s(ke,2);{var Fe=o=>{var w=Ya(),H=r(w),se=r(H,!0);n(H);var $=s(H,2);const V=a(()=>qt(t.operation.cancellationInfo)),le=a(()=>v("common.copy-icon-title")),pe=a(()=>v("common.copy-success-icon-title"));Me($,{language:"text",get content(){return e(V)},get copyIconTitle(){return e(le)},get copySuccessIconTitle(){return e(pe)}}),n(w),I(ce=>y(se,ce),[()=>v("nexus.cancellation-info")]),l(o,w)};m(Se,o=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&o(Fe)})}n(G),n(F),n(d),I(o=>y(T,o),[()=>v("workflows.pending-nexus-operation")]),l(E,d),qe(),u()}function Yt(E,t){const i=it(t,["children","$$slots","$$events","$$legacy"]),u=it(i,["value","attributes","type"]);Oe(t,!1);const[_,h]=ct(),P=()=>Ae(Ua,"$page",_),k=we(),p=we(),f=we(),d=we(),x=we(),M=we(),D=we(),S=we();let T=X(t,"value",8),F=X(t,"attributes",8),R=X(t,"type",8);Ie(()=>(e(k),e(p),P()),()=>{(g=>(de(k,g.workflow),de(p,g.namespace)))(P().params)}),Ie(()=>(e(p),e(k),Ee(T())),()=>{de(f,Nt({namespace:e(p),workflow:e(k),run:T()}))}),Ie(()=>(e(p),Ee(T())),()=>{de(d,Oa({namespace:e(p),queue:T()}))}),Ie(()=>(e(p),Ee(F())),()=>{de(x,Nt({namespace:e(p),workflow:F().workflowExecutionWorkflowId,run:F().workflowExecutionRunId}))}),Ie(()=>Ee(T()),()=>{de(M,qa(T()))}),Ie(()=>(e(f),e(d),e(x),e(M)),()=>{de(D,{execution:e(f),"task-queue":e(d),"child-workflow":e(x),"nexus-endpoint":e(M)})}),Ie(()=>(e(D),Ee(R())),()=>{de(S,e(D)[R()])}),gt(),kt(),Qe(E,{get class(){return u.class},get href(){return e(S)},children:(g,A)=>{ue();var O=re();I(()=>y(O,T())),l(g,O)},$$slots:{default:!0}}),qe(),h()}const en=(E,t=Q)=>{var i=on();const u=a(()=>Jt(t())),_=a(()=>{var d;return((d=e(u).split("workflows/"))==null?void 0:d[1])||e(u)});var h=r(i),P=r(h,!0);n(h);var k=s(h,2);const p=a(()=>v("common.copy-icon-title")),f=a(()=>v("common.copy-success-icon-title"));Ke(k,{get copyIconTitle(){return e(p)},get copySuccessIconTitle(){return e(f)},get content(){return e(_)},children:(d,x)=>{Qe(d,{get href(){return e(u)},class:"whitespace-pre-line",children:(M,D)=>{ue();var S=re();I(()=>y(S,e(_))),l(M,S)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(i),I(d=>y(P,d),[()=>v("nexus.link")]),l(E,i)},tn=(E,t=Q)=>{var i=sn();const u=a(()=>Va({namespace:t().workflowEvent.namespace}));var _=r(i),h=r(_,!0);n(_);var P=s(_,2);const k=a(()=>v("common.copy-icon-title")),p=a(()=>v("common.copy-success-icon-title"));Ke(P,{get copyIconTitle(){return e(k)},get copySuccessIconTitle(){return e(p)},get content(){return t().workflowEvent.namespace},children:(f,d)=>{Qe(f,{get href(){return e(u)},class:"whitespace-pre-line",children:(x,M)=>{ue();var D=re();I(()=>y(D,t().workflowEvent.namespace)),l(x,D)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(i),I(f=>y(h,f),[()=>v("nexus.link-namespace")]),l(E,i)},an=(E,t=Q)=>{var i=Ne(),u=oe(i);ze(u,17,t,yt,(_,h,P,k)=>{var p=ln(),f=oe(p);en(f,()=>e(h));var d=s(f,2);tn(d,()=>e(h)),l(_,p)}),l(E,i)},nn=(E,t=Q)=>{var i=cn(),u=s(r(i),2),_=r(u);const h=a(()=>v("events.decode-failed"));Xt(_,{get value(){return t()},get fallback(){return e(h)},children:Ut,$$slots:{default:(P,k)=>{const p=a(()=>k.decodedValue);ue();var f=re();I(()=>y(f,e(p))),l(P,f)}}}),n(u),n(i),l(E,i)},rn=(E,t=Q,i=Q)=>{var u=dn();const _=a(()=>Ma(i())),h=a(()=>ja(e(_)));var P=oe(u),k=r(P),p=r(k,!0);n(k);var f=s(k,2);{var d=S=>{ot(S,{get value(){return i()},key:"payloads",children:(F,R=Q)=>{const g=a(()=>v("common.copy-icon-title")),A=a(()=>v("common.copy-success-icon-title"));Me(F,{get content(){return R()},maxHeight:384,get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(A)}})},$$slots:{default:!0}})},x=(S,T)=>{{var F=g=>{const A=a(()=>({searchAttributes:e(_)}));ot(g,{key:"searchAttributes",get value(){return e(A)},children:(U,z=Q)=>{const J=a(()=>v("common.copy-icon-title")),K=a(()=>v("common.copy-success-icon-title"));Me(U,{get content(){return z()},maxHeight:384,get copyIconTitle(){return e(J)},get copySuccessIconTitle(){return e(K)}})},$$slots:{default:!0}})},R=g=>{ot(g,{get value(){return e(_)},children:(O,U=Q)=>{const z=a(()=>v("common.copy-icon-title")),J=a(()=>v("common.copy-success-icon-title"));Me(O,{get content(){return U()},maxHeight:384,get copyIconTitle(){return e(z)},get copySuccessIconTitle(){return e(J)}})},$$slots:{default:!0}})};m(S,g=>{t()==="searchAttributes"?g(F):g(R,!1)},T)}};m(f,S=>{var T;(T=i())!=null&&T.payloads?S(d):S(x,!1)})}n(P);var M=s(P,2);{var D=S=>{var T=vn(),F=r(T),R=r(F,!0);n(F);var g=s(F,2);const A=a(()=>v("common.copy-icon-title")),O=a(()=>v("common.copy-success-icon-title"));Me(g,{get content(){return e(h)},language:"text",maxHeight:384,get copyIconTitle(){return e(A)},get copySuccessIconTitle(){return e(O)}}),n(T),I(U=>y(R,U),[()=>v("workflows.call-stack-tab")]),l(S,T)};m(M,S=>{e(h)&&S(D)})}I(S=>y(p,S),[()=>lt(t())]),l(E,u)};var on=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),sn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),ln=j("<!> <!>",1),cn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),vn=j('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),dn=j('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),un=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),mn=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"> </p></div>'),fn=j('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),_n=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <p class="text-sm"> </p></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Bt(E,t){Oe(t,!0);const[i,u]=ct(),_=()=>Ae(wt,"$timeFormat",i),h=()=>Ae(ht,"$relativeTime",i),P=(b,C=Q,q=Q)=>{var W=un(),G=r(W),xe=r(G,!0);n(G);var _e=s(G,2);const ke=a(()=>v("common.copy-icon-title")),De=a(()=>v("common.copy-success-icon-title")),Se=a(()=>String(q()));Ke(_e,{get copyIconTitle(){return e(ke)},get copySuccessIconTitle(){return e(De)},get content(){return e(Se)},children:(Fe,o)=>{const w=a(()=>String(q())),H=a(()=>rt(C(),e(f)));Yt(Fe,{get value(){return e(w)},get attributes(){return e(f)},get type(){return e(H)},class:"whitespace-pre-line"})},$$slots:{default:!0}}),n(W),I(Fe=>y(xe,Fe),[()=>lt(C())]),l(b,W)},k=(b,C=Q,q=Q)=>{var W=mn(),G=r(W),xe=r(G,!0);n(G);var _e=s(G,2),ke=r(_e,!0);n(_e),n(W),I((De,Se)=>{y(xe,De),y(ke,Se)},[()=>lt(C()),()=>La(C())?He(q(),_()):q()]),l(b,W)},p=a(()=>Le(t.event)?v("events.category.local-activity"):Gt(t.event.name)),f=a(()=>Qt(t.event)),d=a(()=>Object.entries(e(f))),x=a(()=>e(d).filter(([b,C])=>typeof C=="object"&&Object.keys(C).length>0)),M=a(()=>e(d).filter(([b,C])=>rt(b,e(f))!=="none")),D=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),S=a(()=>e(d).filter(([b,C])=>typeof C!="object"&&rt(b,e(f))==="none"&&!e(D).includes(b)&&(b!=="namespace"||b==="namespace"&&We.params.namespace!==C)));var T=_n(),F=r(T),R=r(F),g=r(R),A=r(g,!0);n(g);var O=s(g,2),U=r(O,!0);n(O),n(R);var z=s(R,2),J=r(z,!0);n(z),n(F);var K=s(F,2),Y=r(K),me=r(Y);{var je=b=>{an(b,()=>t.event.links)};m(me,b=>{var C,q;(q=(C=t.event)==null?void 0:C.links)!=null&&q.length&&b(je)})}var fe=s(me,2);{var B=b=>{nn(b,()=>t.event.userMetadata.summary)};m(fe,b=>{var C,q;(q=(C=t.event)==null?void 0:C.userMetadata)!=null&&q.summary&&b(B)})}var ye=s(fe,2);ze(ye,17,()=>e(S),([b,C])=>b,(b,C)=>{k(b,()=>e(C)[0],()=>e(C)[1])});var Pe=s(ye,2);ze(Pe,17,()=>e(M),([b,C])=>b,(b,C)=>{P(b,()=>e(C)[0],()=>e(C)[1])}),n(Y);var Ve=s(Y,2);{var Je=b=>{var C=fn();ze(C,21,()=>e(x),([q,W])=>q,(q,W)=>{rn(q,()=>e(W)[0],()=>e(W)[1])}),n(C),l(b,C)};m(Ve,b=>{e(x).length&&b(Je)})}n(K),n(T),I(b=>{y(A,t.event.id),y(U,e(p)),y(J,b)},[()=>He(t.event.eventTime,_(),{relative:h()})]),l(E,T),qe(),u()}var pn=j('<div class="flex flex-col overflow-hidden"><!> <!></div>');function xn(E,t){Oe(t,!0);let i=X(t,"group",3,void 0),u=X(t,"event",3,void 0);const _=a(()=>(i()===null||i()===void 0?void 0:i().pendingActivity)||(i()===null||i()===void 0?void 0:i().pendingNexusOperation)),h=a(()=>i()&&(i().eventList.length>1||e(_)));var P=Ne(),k=oe(P);{var p=d=>{var x=pn(),M=r(x);{var D=F=>{Na(F,{get activity(){return i().pendingActivity}})},S=(F,R)=>{{var g=A=>{$a(A,{get operation(){return i().pendingNexusOperation}})};m(F,A=>{var O;(O=i())!=null&&O.pendingNexusOperation&&A(g)},R)}};m(M,F=>{var R;(R=i())!=null&&R.pendingActivity?F(D):F(S,!1)})}var T=s(M,2);ze(T,17,()=>i().eventList,yt,(F,R)=>{Bt(F,{get event(){return e(R)}})}),n(x),l(d,x)},f=(d,x)=>{{var M=D=>{Bt(D,{get event(){return u()}})};m(d,D=>{u()&&D(M)},x)}};m(k,d=>{e(h)?d(p):d(f,!1)})}l(E,P),qe()}var gn=j('<p class="whitespace-nowrap text-right text-xs"> </p>'),yn=j('<div><code class="svelte-1qb2863"><pre class="truncate svelte-1qb2863"> </pre></code></div>'),hn=j('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),wn=j('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function nt(E,t){const i=it(t,["children","$$slots","$$events","$$legacy"]);Oe(t,!1);const u=we();let _=X(t,"key",8),h=X(t,"value",8),P=X(t,"attributes",8),k=X(t,"showKey",8,!0);Ie(()=>(Ee(_()),Ee(P())),()=>{de(u,rt(_(),P()))}),gt(),kt();var p=Ne(),f=oe(p);{var d=x=>{var M=wn(),D=r(M);{var S=g=>{var A=gn(),O=r(A,!0);n(A),I(U=>y(O,U),[()=>lt(_())],ne),l(g,A)};m(D,g=>{k()&&g(S)})}var T=s(D,2);{var F=g=>{var A=hn(),O=r(A);ot(O,{get value(){return h()},key:"payloads",children:(z,J=Q)=>{var K=yn(),Y=r(K),me=r(Y),je=r(me,!0);n(me),n(Y),n(K),I((fe,B)=>{st(K,1,fe,"svelte-1qb2863"),y(je,B)},[()=>Wt(xt("payload",i.class)),()=>J().slice(0,60)],ne),l(z,K)},$$slots:{default:!0}}),n(A),l(g,A)},R=(g,A)=>{{var O=z=>{const J=ne(()=>v("common.copy-icon-title")),K=ne(()=>v("common.copy-success-icon-title"));Ke(z,{get copyIconTitle(){return e(J)},get copySuccessIconTitle(){return e(K)},get content(){return h()},"container-class":"truncate",children:(Y,me)=>{Yt(Y,{get value(){return h()},get attributes(){return P()},get type(){return e(u)},class:"truncate"})},$$slots:{default:!0}})},U=z=>{Ge(z,{type:"subtle",class:"block select-none truncate",children:(J,K)=>{ue();var Y=re();I(()=>y(Y,h())),l(J,Y)},$$slots:{default:!0}})};m(g,z=>{e(u)!=="none"?z(O):z(U,!1)},A)}};m(T,g=>{typeof h()=="object"?g(F):g(R,!1)})}n(M),l(x,M)};m(f,x=>{_()&&x(d)})}l(E,p),qe()}var kn=j('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function bn(E,t){const i=it(t,["children","$$slots","$$events","$$legacy"]);Oe(t,!1);var u=we();let _=X(t,"link",8),h=X(t,"value",28,()=>_().workflowEvent.workflowId),P=X(t,"label",24,()=>v("nexus.link")),k=X(t,"href",12,void 0);Ie(()=>(Ee(k()),Ee(_()),mt(u)),()=>{k()||(k(Jt(_())),h((de(u,k().split("workflows/"))===null||mt(u)===void 0?void 0:mt(u)[1])||k()))}),gt(),kt();var p=kn(),f=r(p),d=r(f,!0);n(f);var x=s(f,2),M=r(x);Qe(M,{get href(){return k()},children:(D,S)=>{ue();var T=re();I(()=>y(T,h())),l(D,T)},$$slots:{default:!0}}),n(x),n(p),I(()=>{st(p,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${i.class??""}`),y(d,P()),st(x,1,`overflow-hidden ${i.linkClass??""}`)}),l(E,p),qe()}var Tn=j('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),In=j('<td class="font-mono"><!></td>'),En=j(" <!>",1),An=j("<!> <!>",1),Pn=j('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Sn=j('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Fn=j('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Cn=j('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p class="whitespace-nowrap font-semibold md:text-base"> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function xr(E,t){Oe(t,!0);const[i,u]=ct(),_=()=>Ae(wt,"$timeFormat",i),h=()=>Ae(ht,"$relativeTime",i),P=()=>Ae(Ta,"$authUser",i),k=()=>Ae(ba,"$isCloud",i);var p,f,d,x,M,D,S,T;let F=X(t,"compact",3,!1),R=X(t,"expanded",3,!1),g=X(t,"onRowClick",3,()=>{}),A=X(t,"hoveredEventId",15),O=Dt(xa(R())),U=Dt(void 0);const z=a(()=>Z(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),J=a(()=>We.params),K=a(()=>e(J).workflow),Y=a(()=>e(J).run),me=a(()=>e(J).namespace),je=a(()=>Ot({eventId:t.event.id,namespace:e(me),workflow:e(K),run:e(Y)})),fe=a(()=>Qt(t.event)),B=a(()=>Z(t.event)?t.event.events.get(e(z)):t.event),ye=a(()=>Ht({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:Z(e(B))?(p=e(B).initialEvent)===null||p===void 0?void 0:p.eventTime:e(B)===null||e(B)===void 0?void 0:e(B).eventTime,includeMillisecondsForUnderSecond:!0})),Pe=a(()=>Z(t.event)?Ht({start:(f=t.event.initialEvent)===null||f===void 0?void 0:f.eventTime,end:(d=t.event.lastEvent)===null||d===void 0?void 0:d.eventTime,includeMillisecondsForUnderSecond:!0}):""),Ve=a(()=>ha(t.event)),Je=a(()=>wa(t.event)),b=a(()=>ka(t.event)),C=a(()=>Z(t.event)?t.event.label:Le(t.event)?v("events.category.local-activity"):Gt(t.event.name)),q=a(()=>Le(t.event)?void 0:Da(Z(t.event)?t.event.initialEvent:t.event)),W=a(()=>Ra(Z(t.event)?t.event.lastEvent:t.event,e(q)===null||e(q)===void 0?void 0:e(q).key)),G=a(()=>Z(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),xe=a(()=>e(G)&&(e(G)===null||e(G)===void 0?void 0:e(G).paused)),_e=a(()=>Z(t.event)&&t.event.isPending&&(((x=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||x===void 0?void 0:x.attempt)||((M=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||M===void 0?void 0:M.attempt))),ke=a(()=>Z(t.event)&&!t.event.isPending&&((S=(D=t.event.eventList.find(Ha))===null||D===void 0?void 0:D.attributes)===null||S===void 0?void 0:S.attempt)),De=a(()=>F()&&(e(W)===null||e(W)===void 0?void 0:e(W).key)&&(e(W)===null||e(W)===void 0?void 0:e(W).key)!==(e(q)===null||e(q)===void 0?void 0:e(q).key)&&!(!((T=e(B)===null||e(B)===void 0?void 0:e(B).userMetadata)===null||T===void 0)&&T.summary)),Se=a(()=>He(e(B)===null||e(B)===void 0?void 0:e(B).eventTime,_(),{relative:h()})),Fe=a(()=>He(e(B)===null||e(B)===void 0?void 0:e(B).eventTime,_(),{relative:h(),abbrFormat:!0})),o=c=>{de(O,!e(O)),c.stopPropagation(),g()()},w=()=>{A(t.event.id)},H=()=>{A(void 0)};let se=(c,L)=>{var N;return(N=c==null?void 0:c.eventIds)===null||N===void 0?void 0:N.has(L)};ya(async()=>{Le(t.event)?de(U,await Vt(t.event,{namespace:We.params.namespace,settings:We.data.settings,accessToken:P().accessToken}),!0):Z(t.event)&&Le(t.event.initialEvent)&&de(U,await Vt(t.event.initialEvent,{namespace:We.params.namespace,settings:We.data.settings,accessToken:P().accessToken}),!0)});var $=Cn(),V=oe($);V.__click=o;var le=r(V);{var pe=c=>{var L=Tn(),N=r(L);ze(N,21,()=>t.event.eventList,yt,(ee,te)=>{const ae=a(()=>Ot({eventId:e(te).id,namespace:e(me),workflow:e(K),run:e(Y)}));Qe(ee,{"data-testid":"link",get href(){return e(ae)},children:(ve,Ce)=>{ue();var he=re();I(()=>y(he,e(te).id)),l(ve,he)},$$slots:{default:!0}})}),n(N),n(L),l(c,L)},ce=c=>{var L=In(),N=r(L);Qe(N,{"data-testid":"link",get href(){return e(je)},children:(ee,te)=>{ue();var ae=re();I(()=>y(ae,t.event.id)),l(ee,ae)},$$slots:{default:!0}}),n(L),l(c,L)};m(le,c=>{Z(t.event)?c(pe):c(ce,!1)})}var ie=s(le),ge=r(ie);const Xe=a(()=>Z(t.event)&&!e(Pe)||!e(ye)),Ye=a(()=>Z(t.event)?`Duration: ${e(Pe)}`:`+${e(ye)}`);pt(ge,{get hide(){return e(Xe)},get text(){return e(Ye)},class:"block",bottom:!0,children:(c,L)=>{const N=a(()=>v("common.copy-icon-title")),ee=a(()=>v("common.copy-success-icon-title"));Ke(c,{get copyIconTitle(){return e(N)},get copySuccessIconTitle(){return e(ee)},get content(){return e(Fe)},children:(te,ae)=>{ue();var ve=re();I(()=>y(ve,e(Fe))),l(te,ve)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(ie);var Re=s(ie),Ze=r(Re);const $e=a(()=>Z(t.event)&&!e(Pe)||!e(ye)),vt=a(()=>Z(t.event)?`Duration: ${e(Pe)}`:`+${e(ye)}`);pt(Ze,{get hide(){return e($e)},get text(){return e(vt)},class:"block",bottom:!0,children:(c,L)=>{const N=a(()=>v("common.copy-icon-title")),ee=a(()=>v("common.copy-success-icon-title"));Ke(c,{get copyIconTitle(){return e(N)},get copySuccessIconTitle(){return e(ee)},get content(){return e(Se)},children:(te,ae)=>{ue();var ve=re();I(()=>y(ve,e(Se))),l(te,ve)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(Re);var dt=s(Re),bt=r(dt),Zt=r(bt,!0);n(bt),n(dt);var ut=s(dt),Tt=r(ut),It=r(Tt);{var $t=c=>{const L=a(()=>e(xe)?"warning":e(_e)>1?"danger":"default");Ge(c,{class:"mr-1",get type(){return e(L)},children:(N,ee)=>{var te=An(),ae=oe(te);const ve=a(()=>xt("mr-1 inline",e(_e)>1&&"font-bold text-red-400",e(xe)&&"font-bold text-yellow-700")),Ce=a(()=>e(xe)?"pause":"retry");zt(ae,{get class(){return e(ve)},get name(){return e(Ce)}});var he=s(ae),et=s(he);{var at=be=>{var tt=En(),Ct=oe(tt),da=s(Ct);{var ua=Be=>{var Lt=Ne();const Mt=a(()=>{var Ue;return Kt({date:(Ue=e(G))==null?void 0:Ue.scheduledTime,negativeDefault:""})});var ma=oe(Lt);{var fa=Ue=>{var jt=re();I(_a=>y(jt,`• ${_a??""}
                ${e(Mt)??""}`),[()=>v("workflows.next-retry")]),l(Ue,jt)};m(ma,Ue=>{e(Mt)&&Ue(fa)})}l(Be,Lt)};m(da,Be=>{e(_e)>1&&Be(ua)})}I(()=>{var Be;return y(Ct,`/ ${((Be=e(G))==null?void 0:Be.maximumAttempts)||"∞"} `)}),l(be,tt)};m(et,be=>{e(G)&&be(at)})}I(be=>y(he,` ${be??""}
          ${e(_e)??""} `),[()=>v("workflows.attempt")]),l(N,te)},$$slots:{default:!0}})};m(It,c=>{e(_e)&&c($t)})}var Et=s(It,2);{var ea=c=>{nt(c,_t(()=>e(q),{get attributes(){return e(fe)}}))};m(Et,c=>{var L;!e(U)&&((L=e(q))!=null&&L.key)&&c(ea)})}var At=s(Et,2);{var ta=c=>{nt(c,_t(()=>e(U),{get attributes(){return e(fe)}}))};m(At,c=>{e(U)&&e(U).key&&c(ta)})}var Pt=s(At,2);{var aa=c=>{Xt(c,{get value(){return e(B).userMetadata.summary},children:Ut,$$slots:{default:(L,N)=>{const ee=a(()=>N.decodedValue);var te=Ne(),ae=oe(te);{var ve=Ce=>{var he=Pn(),et=s(r(he),2);Ge(et,{type:"secondary",class:"block select-none truncate",children:(at,be)=>{ue();var tt=re();I(()=>y(tt,e(ee))),l(at,tt)},$$slots:{default:!0}}),n(he),l(Ce,he)};m(ae,Ce=>{e(ee)&&Ce(ve)})}l(L,te)}}})};m(Pt,c=>{var L,N;(N=(L=e(B))==null?void 0:L.userMetadata)!=null&&N.summary&&c(aa)})}var St=s(Pt,2);{var na=c=>{bn(c,{get link(){return e(B).links[0]},class:"max-w-xl",linkClass:"truncate"})};m(St,c=>{var L,N;(N=(L=e(B))==null?void 0:L.links)!=null&&N.length&&c(na)})}var Ft=s(St,2);{var ra=c=>{const L=a(()=>e(ke).toString());nt(c,{key:"attempt",get value(){return e(L)},get attributes(){return e(fe)}})};m(Ft,c=>{e(ke)&&c(ra)})}var oa=s(Ft,2);{var sa=c=>{nt(c,_t(()=>e(W),{get attributes(){return e(fe)}}))};m(oa,c=>{e(De)&&c(sa)})}n(Tt),n(ut);var ia=s(ut);{var la=c=>{var L=Sn(),N=r(L),ee=r(N);{var te=ae=>{const ve=a(()=>v("workflows.estimated-billable-actions"));pt(ae,{get text(){return e(ve)},topRight:!0,children:(Ce,he)=>{Ge(Ce,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(et,at)=>{ue();var be=re();I(()=>y(be,t.event.billableActions)),l(et,be)},$$slots:{default:!0}})},$$slots:{default:!0}})};m(ee,ae=>{t.event.billableActions&&ae(te)})}n(N),n(L),l(c,L)};m(ia,c=>{k()&&c(la)})}n(V);var ca=s(V,2);{var va=c=>{var L=Fn(),N=r(L),ee=r(N);xn(ee,{get group(){return t.group},get event(){return e(B)}}),n(N),n(L),I(()=>ft(N,"colspan",k()?5:4)),l(c,L)};m(ca,c=>{e(O)&&c(va)})}I(c=>{st(V,1,c,"svelte-1cm88cy"),ft(V,"id",`${t.event.id}-${t.index}`),ft(V,"data-eventid",t.event.id),y(Zt,e(C))},[()=>Wt(xt("hover:cursor-pointer",e(Ve)&&"!bg-red-400/40 hover:!bg-red-400/60",e(Je)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(b)&&"!bg-pink-700/30 hover:!bg-pink-700/50",se(t.group,A())&&"active"))]),Rt("mouseenter",V,w),Rt("mouseleave",V,H),l(E,$),qe(),u()}ga(["click"]);export{xr as E,nt as a,xn as b,bn as c,Vt as d,pr as g};
