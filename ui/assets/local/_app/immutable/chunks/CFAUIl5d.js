import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as F,f as I,e as g,b as L,h,j as N,g as d,o as y,n as U,k as j,t as G,r as H,s as v,m as S}from"./yn9lut7I.js";import{e as q,s as C}from"./B95CcGmx.js";import{i as P}from"./Bk16Yghv.js";import{s as R,a as T}from"./C6jR5PNA.js";import{g as W}from"./DB4lO5ox.js";import{B as z}from"./CkQLto4H.js";import{L as D}from"./pDH-5pWv.js";import{t as n}from"./DEjs8ZrU.js";import{g as J}from"./B1HHhOwn.js";import{t as K}from"./o9ygHmx5.js";import{i as M,a as O}from"./Cb2T9suo.js";import{l as Q}from"./BUY-kRRB.js";import{t as _}from"./D9gMh8gV.js";import{p as V}from"./rlUF3pky.js";import{r as X}from"./CvBRcgV4.js";var Y=I('<div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><!> <input id="import-event-history-file-upload" class="import-input block border border-slate-200 p-2" type="file" accept=".json"/> <!></div>');function gt($,b){F(b,!1);const x=()=>T(Q,"$lastUsedNamespace",E),[E,w]=R();let o,i=S(!1);const k=async t=>{var e;const s=t.target,a=(e=s==null?void 0:s.files)===null||e===void 0?void 0:e[0],r=new FileReader;a&&(r.readAsText(a),r.onload=()=>{var p,m;try{const u=(m=(p=r==null?void 0:r.result)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:"";o=V(u),v(i,!0)}catch{_.push({variant:"error",message:n("events.event-history-load-error")}),v(i,!1)}})},A=async()=>{try{const t=await K(Array.isArray(o)?o:o==null?void 0:o.events),e=J(t);M.set(t),O.set(e),v(i,!1);const s=X(x(),"feed");W(s)}catch(t){console.error(t),_.push({variant:"error",message:n("events.event-history-import-error")})}};P();var l=Y(),f=N(l);{let t=y(()=>n("events.import-event-history-file-upload"));D(f,{hidden:!0,for:"import-event-history-file-upload",get label(){return d(t)}})}var c=h(f,2),B=h(c,2);{let t=y(()=>!d(i));z(B,{leadingIcon:"file-upload",get disabled(){return d(t)},$$events:{click:A},children:(e,s)=>{U();var a=j();G(r=>C(a,r),[()=>n("common.import")]),g(e,a)},$$slots:{default:!0}})}H(l),q("change",c,k),g($,l),L(),w()}export{gt as E};
