import"./CWj6FrbW.js";import{p as wt,at as F,au as it,f as L,j as o,h as r,s as b,g as t,v as a,r as s,n as Dt,k as ht,t as O,e as h,b as kt,c as rt,u as bt,i as qt,d as Te,q as Ie}from"./BzuLCQNf.js";import{s as w,e as Ae}from"./HOnlAALn.js";import{i as B}from"./Be-bjpec.js";import{k as ne}from"./B6WYOvS7.js";import{p as Mt,s as Pe,a as ie}from"./DdNojIXk.js";import{p as zt}from"./BawWSvJ3.js";import{s as Ce}from"./wWuJlbLq.js";import{B as St}from"./zCHRLhNX.js";import{T as re}from"./QGm-pl5O.js";import{t as n}from"./DEjs8ZrU.js";import{C as Nt}from"./CQVxWgdE.js";import{D as De,a as Se}from"./Bs7HTvLM.js";import{I as mt}from"./gslwIh22.js";import{N as _e}from"./CvKuLrZV.js";import{L as ct}from"./DUFHtEr8.js";import{r as Qt,a as oe,i as Ne,b as Me}from"./CZ6nwOPb.js";import{s as jt}from"./ikbOq2O5.js";import{m as Oe}from"./HVeMsM_a.js";import{t as le}from"./mTWriMIu.js";import{t as Et,w as Re}from"./BGTvKxEd.js";import{g as Kt}from"./CeN1S7l_.js";import{n as _t,e as Ct,d as gt,m as He,o as Fe}from"./vp2td3Dl.js";import{M as ce}from"./CvWuESsb.js";import{P as ge}from"./Bbe7AjXJ.js";import{t as We}from"./pi-WXkM0.js";import{W as Be}from"./B1S_w4vZ.js";import{A as Le}from"./DXJr_BSE.js";import{B as Ue}from"./BvcST-tr.js";import{C as se}from"./BVTTWmbH.js";import{I as qe}from"./CKL6Zfw6.js";import{c as ze}from"./Cn_-e7B9.js";import{f as Qe,c as je,a as Ee}from"./CJE5uT4m.js";import{o as Ke}from"./C8ejR22J.js";const Ve=({date:_,now:e=Date.now(),negativeDefault:l})=>{if(!_)return"";const y=String(_);try{const m=(Number(new Date(y))-e)/1e3;return l!==void 0&&m<0?l:isNaN(m)?"":`${m.toFixed(0)}s`}catch{return""}},Vt=async(_,e)=>{var v,m;const l=_.replace("/activities-deprecated/","/activities/"),y=(m=(v=zt.data)==null?void 0:v.settings)==null?void 0:m.version;if(y&&!Oe("2.45.3",y))return oe(l,e);try{return await oe(_,{...e,notifyOnError:!1})}catch(k){if(Ne(k)||Me(k))return oe(l,e);throw k}},Ge=async({namespace:_,execution:e,id:l,reason:y,type:v,identity:m})=>{const k=Qt("activity.pause",{namespace:_});return Vt(k,{options:{method:"POST",body:jt({execution:e,reason:y,id:l,type:v,...m&&{identity:m}})}})},Je=async({namespace:_,execution:e,id:l,type:y,identity:v})=>{const m=Qt("activity.unpause",{namespace:_});return Vt(m,{options:{method:"POST",body:jt({execution:e,id:l,type:y,...v&&{identity:v}})}})},Xe=async({namespace:_,execution:e,id:l,type:y,resetHeartbeat:v,identity:m})=>{const k=Qt("activity.reset",{namespace:_});return Vt(k,{options:{method:"POST",body:jt({execution:e,id:l,type:y,resetHeartbeat:v,...m&&{identity:m}})}})},Ye=async({namespace:_,execution:e,id:l,type:y,activityOptions:v,identity:m})=>{const k=Qt("activity.update-options",{namespace:_});return Vt(k,{options:{method:"POST",body:jt({execution:e,id:l,type:y,activityOptions:v,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts",...m&&{identity:m}})}})};var Ze=L(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function $e(_,e){wt(e,!0);var l,y,v,m,k,g,I,Q,C,N,E,R,A,W;let p=Mt(e,"open",15),T=a(()=>e.activity.activityId),U=a(()=>e.activity.activityType),q=F(it((y=(l=e.activity.activityOptions)===null||l===void 0?void 0:l.taskQueue)===null||y===void 0?void 0:y.name)),K=F(it(_t(String((v=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||v===void 0?void 0:v.scheduleToCloseTimeout)))),D=F(it(_t(String((m=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||m===void 0?void 0:m.scheduleToStartTimeout)))),j=F(it(_t(String((k=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||k===void 0?void 0:k.startToCloseTimeout)))),tt=F(it(_t(String((g=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||g===void 0?void 0:g.heartbeatTimeout)))),z=F(it((Q=(I=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||I===void 0?void 0:I.retryPolicy)===null||Q===void 0?void 0:Q.maximumAttempts)),Y=F(it((N=(C=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||C===void 0?void 0:C.retryPolicy)===null||N===void 0?void 0:N.backoffCoefficient)),X=F(it(_t(String((R=(E=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||E===void 0?void 0:E.retryPolicy)===null||R===void 0?void 0:R.initialInterval)))),ot=it(_t(String((W=(A=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||A===void 0?void 0:A.retryPolicy)===null||W===void 0?void 0:W.maximumInterval))),G=F(!1);const st=a(()=>({taskQueue:{name:t(q)},scheduleToCloseTimeout:gt(t(K)),scheduleToStartTimeout:gt(t(D)),startToCloseTimeout:gt(t(j)),heartbeatTimeout:gt(t(tt)),retryPolicy:{maximumAttempts:t(z),initialInterval:gt(t(X)),backoffCoefficient:t(Y),maximumInterval:gt(ot)}})),vt=Kt(),nt=()=>{p(!1)},Gt=async ft=>{ft.preventDefault();try{await Ye({namespace:e.namespace,execution:e.execution,id:t(G)?void 0:t(T),type:t(G)?t(U):void 0,activityOptions:t(st),identity:vt}),Et(),le.push({variant:"success",message:`Options for Activity ${t(T)} have been updated.`})}catch(lt){console.error("Error updating activity options:",lt),le.push({variant:"error",message:`Options for Activity ${t(T)} have been failed to update: ${lt==null?void 0:lt.message}`,duration:5e3})}finally{nt()}};{let ft=a(()=>n("common.close"));De(_,{get open(){return p()},onClick:nt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return t(ft)},class:"w-[480px]",children:(lt,Jt)=>{Se(lt,{get title(){return`Update Activity ${e.activity.activityId??""}`},children:(Xt,Yt)=>{var yt=Ze(),pt=o(yt),Ot=o(pt);ct(Ot,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var Tt=r(Ot,4),Rt=o(Tt);{let S=a(()=>isNaN(Number(t(tt))));mt(Rt,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(S)},get value(){return t(tt)},set value(J){b(tt,J,!0)}})}var Ht=r(Rt,2),Zt=o(Ht,!0);s(Ht),s(Tt),s(pt);var xt=r(pt,2),It=o(xt);ct(It,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var $t=r(It,4);_e($t,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return t(Y)},set value(S){b(Y,S,!0)}}),s(xt);var At=r(xt,2),Ft=o(At);ct(Ft,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var i=r(Ft,4),d=o(i);{let S=a(()=>isNaN(Number(t(X))));mt(d,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(S)},get value(){return t(X)},set value(J){b(X,J,!0)}})}var c=r(d,2),M=o(c,!0);s(c),s(i),s(At);var H=r(At,2),u=o(H);ct(u,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var x=r(u,4);_e(x,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return t(z)},set value(S){b(z,S,!0)}}),s(H);var f=r(H,2),P=o(f);ct(P,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var V=r(P,4),Z=o(V);{let S=a(()=>isNaN(Number(t(K))));mt(Z,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(S)},get value(){return t(K)},set value(J){b(K,J,!0)}})}var et=r(Z,2),at=o(et,!0);s(et),s(V),s(f);var dt=r(f,2),Wt=o(dt);ct(Wt,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var Bt=r(Wt,4),Lt=o(Bt);{let S=a(()=>isNaN(Number(t(D))));mt(Lt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(S)},get value(){return t(D)},set value(J){b(D,J,!0)}})}var Ut=r(Lt,2),te=o(Ut,!0);s(Ut),s(Bt),s(dt);var ee=r(dt,2),ve=o(ee);ct(ve,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var de=r(ve,4),ue=o(de);{let S=a(()=>isNaN(Number(t(j))));mt(ue,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(S)},get value(){return t(j)},set value(J){b(j,J,!0)}})}var me=r(ue,2),he=o(me,!0);s(me),s(de),s(ee);var ae=r(ee,2),fe=o(ae);ct(fe,{for:"task-queue-name",label:"Task Queue Name"});var be=r(fe,2);mt(be,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return t(q)},set value(S){b(q,S,!0)}}),s(ae);var ye=r(ae,2);{let S=a(()=>n("activities.apply-to-all-activity-types",{type:t(U)}));Nt(ye,{get label(){return t(S)},get checked(){return t(G)},set checked(J){b(G,J,!0)}})}var pe=r(ye,2),xe=o(pe);St(xe,{type:"button",variant:"ghost",size:"sm",$$events:{click:nt},children:(S,J)=>{Dt();var ut=ht();O(Pt=>w(ut,Pt),[()=>n("common.cancel")]),h(S,ut)},$$slots:{default:!0}});var we=r(xe,2);St(we,{type:"submit",variant:"primary",size:"sm",children:(S,J)=>{Dt();var ut=ht();O(Pt=>w(ut,Pt),[()=>n("common.save")]),h(S,ut)},$$slots:{default:!0}}),s(pe),s(yt),O((S,J,ut,Pt,ke)=>{w(Zt,S),w(M,J),w(at,ut),w(te,Pt),w(he,ke)},[()=>Ct(t(tt)),()=>Ct(t(X)),()=>Ct(t(K)),()=>Ct(t(D)),()=>Ct(t(j))]),Ae("submit",yt,Gt),h(Xt,yt)},$$slots:{default:!0}})},$$slots:{default:!0}})}kt()}var ta=L('<h3 slot="title"> </h3>'),ea=L('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function aa(_,e){wt(e,!0);let l=Mt(e,"open",15),y=a(()=>e.activity.activityId),v=a(()=>e.activity.activityType),m=F(""),k=!1,g=F(""),I=F(!1);const Q=Kt(),C=()=>{l(!1),b(g,""),b(I,!1)},N=async()=>{await Ge({namespace:e.namespace,execution:e.execution,id:t(I)?void 0:t(y),reason:t(g),type:t(I)?t(v):void 0,identity:Q}),Et(),C()};{let E=a(()=>n("workflows.pause")),R=a(()=>n("common.cancel"));ce(_,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",loading:k,get confirmText(){return t(E)},get cancelText(){return t(R)},confirmType:"destructive",get error(){return t(m)},set error(A){b(m,A,!0)},get open(){return l()},set open(A){l(A)},$$events:{cancelModal:C,confirmModal:N},$$slots:{title:(A,W)=>{var p=ta(),T=o(p,!0);s(p),O(U=>w(T,U),[()=>n("activities.pause-modal-confirmation",{activityId:e.activity.id})]),h(A,p)},content:(A,W)=>{var p=ea(),T=o(p),U=o(T,!0);s(T);var q=r(T,2);{let D=a(()=>n("common.reason-placeholder")),j=a(()=>n("common.reason"));mt(q,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return t(D)},get label(){return t(j)},get value(){return t(g)},set value(tt){b(g,tt,!0)}})}var K=r(q,2);{let D=a(()=>n("activities.pause-all-activity-types",{type:t(v)??""}));Nt(K,{get label(){return t(D)},get checked(){return t(I)},set checked(j){b(I,j,!0)}})}s(p),O(D=>w(U,D),[()=>n("activities.pause-modal-description")]),h(A,p)}}})}kt()}var ia=L('<h3 slot="title"> </h3>'),ra=L('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function oa(_,e){wt(e,!0);let l=Mt(e,"open",15),y=a(()=>e.activity.activityId),v=a(()=>e.activity.activityType),m=F(""),k=!1,g=F(!1),I=F(!1);const Q=Kt(),C=()=>{l(!1),b(g,!1),b(I,!1)},N=async()=>{await Xe({namespace:e.namespace,execution:e.execution,id:t(g)?void 0:t(y),resetHeartbeat:t(I),type:t(g)?t(v):void 0,identity:Q}),Et(),le.push({variant:"success",message:n("activities.reset-success",{activityId:t(y)})}),C()};{let E=a(()=>n("workflows.reset")),R=a(()=>n("common.cancel"));ce(_,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",loading:k,get confirmText(){return t(E)},get cancelText(){return t(R)},confirmType:"destructive",get error(){return t(m)},set error(A){b(m,A,!0)},get open(){return l()},set open(A){l(A)},$$events:{cancelModal:C,confirmModal:N},$$slots:{title:(A,W)=>{var p=ia(),T=o(p,!0);s(p),O(U=>w(T,U),[()=>n("activities.reset-modal-confirmation",{activityId:e.activity.id})]),h(A,p)},content:(A,W)=>{var p=ra(),T=o(p),U=o(T,!0);s(T);var q=r(T,2);{let D=a(()=>n("activities.apply-to-all-activity-types",{type:t(v)}));Nt(q,{get label(){return t(D)},get checked(){return t(g)},set checked(j){b(g,j,!0)}})}var K=r(q,2);{let D=a(()=>n("activities.reset-heartbeat-details"));Nt(K,{get label(){return t(D)},get checked(){return t(I)},set checked(j){b(I,j,!0)}})}s(p),O(D=>w(U,D),[()=>n("activities.reset-modal-description")]),h(A,p)}}})}kt()}var sa=L('<h3 slot="title"> </h3>'),na=L('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function la(_,e){wt(e,!0);let l=Mt(e,"open",15),y=a(()=>e.activity.activityId),v=a(()=>e.activity.activityType),m=F(""),k=!1,g=F(!1);const I=Kt(),Q=()=>{l(!1),b(g,!1)},C=async()=>{await Je({namespace:e.namespace,execution:e.execution,id:t(g)?void 0:t(y),type:t(g)?t(v):void 0,identity:I}),Et(),Q()};{let N=a(()=>n("workflows.unpause")),E=a(()=>n("common.cancel"));ce(_,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",loading:k,get confirmText(){return t(N)},get cancelText(){return t(E)},confirmType:"destructive",get error(){return t(m)},set error(R){b(m,R,!0)},get open(){return l()},set open(R){l(R)},$$events:{cancelModal:Q,confirmModal:C},$$slots:{title:(R,A)=>{var W=sa(),p=o(W,!0);s(W),O(T=>w(p,T),[()=>n("activities.pause-modal-confirmation",{activityId:e.activity.id})]),h(R,W)},content:(R,A)=>{var W=na(),p=o(W),T=o(p,!0);s(p);var U=r(p,2);{let q=a(()=>n("activities.unpause-all-activity-types",{type:t(v)}));Nt(U,{get label(){return t(q)},get checked(){return t(g)},set checked(K){b(g,K,!0)}})}s(W),O(q=>w(T,q),[()=>n("activities.unpause-modal-description")]),h(R,W)}}})}kt()}var ca=L("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function va(_,e){wt(e,!0);let l=Mt(e,"class",3,"");const y=a(()=>zt.params),v=a(()=>t(y).namespace),m=a(()=>t(y).workflow),k=a(()=>t(y).run),g=a(()=>({workflowId:t(m),runId:t(k)}));let I=F(!1),Q=F(!1),C=F(!1),N=F(!1);const E=async()=>{e.activity.paused?b(Q,!0):b(I,!0)},R=()=>{b(C,!0)},A=()=>{b(N,!0)};var W=ca(),p=rt(W),T=o(p);{let z=a(()=>e.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");re(T,{bottomLeft:!0,width:200,get text(){return t(z)},children:(Y,X)=>{{let ot=a(()=>e.activity.paused?"play":"pause");St(Y,{variant:"secondary",size:"sm",get leadingIcon(){return t(ot)},$$events:{click:E},children:(G,st)=>{Dt();var vt=ht();O(nt=>w(vt,nt),[()=>e.activity.paused?n("workflows.unpause"):n("workflows.pause")]),h(G,vt)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var U=r(T,2);re(U,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(z,Y)=>{St(z,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:A},children:(X,ot)=>{Dt();var G=ht();O(st=>w(G,st),[()=>n("common.update")]),h(X,G)},$$slots:{default:!0}})},$$slots:{default:!0}});var q=r(U,2);re(q,{bottom:!0,width:200,text:"Reset this Activity.",children:(z,Y)=>{St(z,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:R},children:(X,ot)=>{Dt();var G=ht();O(st=>w(G,st),[()=>n("workflows.reset")]),h(X,G)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(p);var K=r(p,2);aa(K,{get namespace(){return t(v)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(I)},set open(z){b(I,z,!0)}});var D=r(K,2);la(D,{get namespace(){return t(v)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(Q)},set open(z){b(Q,z,!0)}});var j=r(D,2);oa(j,{get namespace(){return t(v)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(C)},set open(z){b(C,z,!0)}});var tt=r(j,2);ne(tt,()=>t(N),z=>{$e(z,{get namespace(){return t(v)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(N)},set open(Y){b(N,Y,!0)}})}),O(()=>Ce(p,1,`flex items-center gap-2 ${l()??""}`)),h(_,W),kt()}const da=(_,e,l)=>!_.disableWriteActions&&!e.namespaceWriteDisabled(l)&&!e.isActivityCommandsDisabled&&!_.activityCommandsDisabled,$=(_,e=bt,l=bt)=>{var y=ua(),v=o(y),m=o(v,!0);s(v);var k=r(v,2),g=o(k);{var I=C=>{var N=ht();O(()=>w(N,l())),h(C,N)},Q=C=>{var N=qt(),E=rt(N);Te(E,()=>l()??bt),h(C,N)};B(g,C=>{typeof l()=="string"||typeof l()=="number"?C(I):C(Q,!1)})}s(k),s(y),O(()=>w(m,e())),h(_,y)};var ua=L('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),ma=L('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),fa=L('<p class="text-sm text-secondary/80"> </p> <!>',1),ya=L('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),pa=L('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),xa=L('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),_a=L("<!> ",1),ga=L('<p class="ml-1 text-sm text-secondary"> </p>'),ha=L('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),ba=L("<!> <!> <!>",1),wa=L("<!> <!>",1),ka=L('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function ri(_,e){wt(e,!0);const l=()=>ie(Re,"$workflowRun",m),y=()=>ie(W,"$coreUser",m),v=()=>ie(We,"$timestamp",m),[m,k]=Pe(),g=i=>{var d=ma(),c=o(d),M=o(c,!0);s(c);var H=r(c,2);ne(H,()=>e.activity.attempt,u=>{ge(u,{get value(){return e.activity.heartbeatDetails},key:"payloads",children:(f,P=bt)=>{{let V=a(()=>n("common.copy-icon-title")),Z=a(()=>n("common.copy-success-icon-title"));se(f,{get content(){return P()},maxHeight:384,get copyIconTitle(){return t(V)},get copySuccessIconTitle(){return t(Z)}})}},$$slots:{default:!0}})}),s(d),O(u=>w(M,u),[()=>n("workflows.heartbeat-details")]),h(i,d)},I=i=>{var d=pa(),c=o(d),M=o(c);{var H=f=>{var P=fa(),V=rt(P),Z=o(V,!0);s(V);var et=r(V,2);ne(et,()=>e.activity.attempt,at=>{{const dt=(Bt,Lt=bt)=>{{let Ut=a(()=>n("common.copy-icon-title")),te=a(()=>n("common.copy-success-icon-title"));se(Bt,{get content(){return Lt()},maxHeight:384,get copyIconTitle(){return t(Ut)},get copySuccessIconTitle(){return t(te)}})}};let Wt=a(()=>Ke(e.activity.lastFailure,"stackTrace"));ge(at,{get value(){return t(Wt)},children:dt,$$slots:{default:!0}})}}),O(at=>w(Z,at),[()=>n("workflows.last-failure")]),h(f,P)};B(M,f=>{e.activity.lastFailure&&f(H)})}s(c);var u=r(c,2);{var x=f=>{var P=ya(),V=o(P),Z=o(V,!0);s(V);var et=r(V,2);{let at=a(()=>n("common.copy-icon-title")),dt=a(()=>n("common.copy-success-icon-title"));se(et,{language:"text",maxHeight:384,get content(){return e.activity.lastFailure.stackTrace},get copyIconTitle(){return t(at)},get copySuccessIconTitle(){return t(dt)}})}s(P),O(at=>w(Z,at),[()=>n("common.stack-trace")]),h(f,P)};B(u,f=>{var P;(P=e.activity.lastFailure)!=null&&P.stackTrace&&f(x)})}s(d),h(i,d)},Q=i=>{{let d=a(()=>{var c;return(c=e.activity.lastFailure)!=null&&c.stackTrace?n("workflows.last-failure-with-stack-trace"):n("workflows.last-failure")});Le(i,{get title(){return t(d)},children:Ie,$$slots:{default:(c,M)=>{const H=a(()=>M.open);var u=qt(),x=rt(u);{var f=P=>{I(P)};B(x,P=>{t(H)&&P(f)})}h(c,u)}}})}},C=(i,d=bt)=>{var c=xa(),M=o(c),H=o(M,!0);s(M);var u=r(M,2),x=o(u),f=r(x),P=o(f);s(f),s(u),s(c),O((V,Z)=>{w(H,V),w(x,`${Z??""} `),w(P,`(${d()??""})`)},[()=>n("workflows.next-retry"),()=>v()(e.activity.scheduledTime,{relativeLabel:""})]),h(i,c)},N=i=>{var d=ha(),c=o(d);{let u=a(()=>t(R)?"danger":"default");Ue(c,{get type(){return t(u)},children:(x,f)=>{var P=_a(),V=rt(P);{let et=a(()=>t(R)&&"font-bold text-red-400");qe(V,{get class(){return`mr-1 ${t(et)??""}`},name:"retry"})}var Z=r(V);O(et=>w(Z,` ${e.activity.attempt??0??""} of ${et??""}`),[()=>Qe(e.activity.maximumAttempts)]),h(x,P)},$$slots:{default:!0}})}var M=r(c,2);{var H=u=>{var x=ga(),f=o(x);s(x),O(P=>w(f,`${P??""} remaining`),[()=>Ee(e.activity.maximumAttempts,e.activity.attempt)]),h(u,x)};B(M,u=>{e.activity.maximumAttempts&&u(H)})}s(d),h(i,d)};var E;const R=a(()=>e.activity.attempt>1&&!!e.activity.lastFailure),A=a(()=>(E=l()===null||l()===void 0?void 0:l().workflow)===null||E===void 0?void 0:E.isRunning);let W=ze(),p=a(()=>da(zt.data.settings,y(),zt.params.namespace)&&t(A));var T=ka(),U=o(T),q=o(U),K=o(q);{let i=a(()=>e.activity.paused?"Paused":e.activity.state);Be(K,{get status(){return t(i)}})}var D=r(K,2),j=o(D,!0);s(D),s(q);var tt=r(q,2);{var z=i=>{va(i,{get activity(){return e.activity},class:"justify-end"})};B(tt,i=>{t(p)&&i(z)})}s(U);var Y=r(U,2),X=o(Y),ot=o(X);{let i=a(()=>n("workflows.activity-id"));$(ot,()=>t(i),()=>e.activity.activityId)}var G=r(ot,2);{var st=i=>{var d=ba(),c=rt(d);{let u=a(()=>n("activities.paused-by"));$(c,()=>t(u),()=>{var x,f;return((f=(x=e.activity.pauseInfo)==null?void 0:x.manual)==null?void 0:f.identity)||""})}var M=r(c,2);{let u=a(()=>n("activities.paused-since")),x=a(()=>{var f;return v()((f=e.activity.pauseInfo)==null?void 0:f.pauseTime)});$(M,()=>t(u),()=>t(x))}var H=r(M,2);{let u=a(()=>n("activities.pause-reason"));$(H,()=>t(u),()=>{var x,f;return((f=(x=e.activity.pauseInfo)==null?void 0:x.manual)==null?void 0:f.reason)||"-"})}h(i,d)};B(G,i=>{e.activity.paused&&e.activity.pauseInfo&&i(st)})}var vt=r(G,2);{let i=a(()=>n("workflows.attempt"));$(vt,()=>t(i),()=>N)}var nt=r(vt,2);{var Gt=i=>{const d=a(()=>Ve({date:e.activity.scheduledTime,negativeDefault:""}));var c=qt(),M=rt(c);{var H=u=>{C(u,()=>t(d))};B(M,u=>{t(d)&&u(H)})}h(i,c)};B(nt,i=>{e.activity.scheduledTime&&i(Gt)})}var ft=r(nt,2);{var lt=i=>{{let d=a(()=>n("workflows.last-attempt-completed-time")),c=a(()=>v()(e.activity.lastAttemptCompleteTime));$(i,()=>t(d),()=>t(c))}};B(ft,i=>{e.activity.lastAttemptCompleteTime&&i(lt)})}var Jt=r(ft,2);{var Xt=i=>{{let d=a(()=>n("workflows.retry-expiration")),c=a(()=>je(e.activity.maximumAttempts,He(Fe({start:Date.now(),end:e.activity.expirationTime}))));$(i,()=>t(d),()=>t(c))}};B(Jt,i=>{e.activity.expirationTime&&i(Xt)})}var Yt=r(Jt,2);{var yt=i=>{{let d=a(()=>n("workflows.last-heartbeat")),c=a(()=>v()(e.activity.lastHeartbeatTime));$(i,()=>t(d),()=>t(c))}};B(Yt,i=>{e.activity.lastHeartbeatTime&&i(yt)})}var pt=r(Yt,2);{var Ot=i=>{{let d=a(()=>n("workflows.last-started-time")),c=a(()=>v()(e.activity.lastStartedTime));$(i,()=>t(d),()=>t(c))}};B(pt,i=>{e.activity.lastStartedTime&&i(Ot)})}var Tt=r(pt,2);{var Rt=i=>{{let d=a(()=>n("workflows.last-worker-identity"));$(i,()=>t(d),()=>e.activity.lastWorkerIdentity)}};B(Tt,i=>{e.activity.lastWorkerIdentity&&i(Rt)})}var Ht=r(Tt,2);{var Zt=i=>{var d=wa(),c=rt(d);{var M=x=>{{let f=a(()=>n("workflows.priority"));$(x,()=>t(f),()=>e.activity.priority.priorityKey)}};B(c,x=>{e.activity.priority.priorityKey&&x(M)})}var H=r(c,2);{var u=x=>{{let f=a(()=>n("workflows.fairness"));$(x,()=>t(f),()=>e.activity.priority.fairnessKey)}};B(H,x=>{e.activity.priority.fairnessKey&&x(u)})}h(i,d)};B(Ht,i=>{e.activity.priority&&i(Zt)})}s(X);var xt=r(X,2),It=o(xt);{var $t=i=>{var d=qt(),c=rt(d);{var M=u=>{Q(u)},H=u=>{I(u)};B(c,u=>{e.totalPending>20?u(M):u(H,!1)})}h(i,d)};B(It,i=>{t(R)&&i($t)})}var At=r(It,2);{var Ft=i=>{g(i)};B(At,i=>{e.activity.heartbeatDetails&&i(Ft)})}s(xt),s(Y),s(T),O(()=>w(j,e.activity.activityType)),h(_,T),kt(),k()}export{ri as P,Ve as t};
