import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as $e,h as J,f as A,e as f,n as Ie,k as qe,j as K,g as l,o as q,b as et,l as ue,a as Vt,m as G,s as O,L as H,ag as Oe,t as P,i as M,c as k,r as V}from"./BUtADDjV.js";import{s as te,e as Z}from"./BIRKK4Cx.js";import{i as x}from"./Cx0Hed4m.js";import{e as Je,i as Qe}from"./Da7lzrFF.js";import{i as tt,s as fe,t as le,a as Et}from"./h9b1Gopq.js";import{r as Dt,c as Ue,s as We,b as Ht,a as Kt}from"./D8C9uSNL.js";import{b as Bt}from"./BET8jzrT.js";import{s as $}from"./Bfc47y5P.js";import{p as a,l as Xe,s as Rt,a as jt,b as Ae}from"./B1GMiS9d.js";import{c as Ft,B as Nt}from"./DVhdhZc5.js";import{c as Gt,w as Jt}from"./BEyRdwvQ.js";import{b as Qt}from"./Bm7bPHVx.js";import{b as Ut,c as Wt,d as Xt}from"./GFxZX_Av.js";import{L as Yt}from"./DEcVbmPQ.js";import{B as Ye}from"./GvnbonMU.js";import{C as Zt}from"./DAitYZ5H.js";import{I as ze}from"./BVWW46Sb.js";import{M as $t}from"./CJ6PhSXM.js";import{T as Ze}from"./Bz2USGpB.js";function ee(ve,t){$e(t,!1);let ae=a(t,"selected",8,!1),Q=a(t,"disabled",8,!1),me=a(t,"label",8),ge=a(t,"class",8,"");tt();const be=q(()=>le("break-all",ge()));Ut(ve,{role:"option",get class(){return l(be)},get"aria-selected"(){return ae()},get"aria-disabled"(){return Q()},get selected(){return ae()},get disabled(){return Q()},$$events:{click(o){Qt.call(this,t,o)}},children:(o,E)=>{Ie();var m=qe();K(()=>te(m,me())),f(o,m)},$$slots:{default:!0,leading:(o,E)=>{var m=J(),B=A(m);fe(B,t,"leading",{},null),f(o,m)},trailing:(o,E)=>{var m=J(),B=A(m);fe(B,t,"trailing",{},null),f(o,m)}}}),et()}const el=Ft(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}});var tl=P("<p> </p>"),ll=P("<!> <!>",1),al=P('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),rl=P('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),sl=P('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),nl=P("<!> <!> <!>",1),il=P("<!> <!> <!>",1),ol=P('<span class="error svelte-1lqkhpx"> </span>'),dl=P('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input></div> <!> <!></div></div> <!> <!>',1);function ql(ve,t){const ae=Et(t),Q=Xe(t,["children","$$slots","$$events","$$legacy"]),me=Xe(Q,["class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","displayChips","chipLimit","selectAllLabel","deselectAllLabel","removeChipLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","optionClass","numberOfItemsSelectedLabel","open","maxMenuHeight"]);$e(t,!1);const[ge,be]=Rt(),o=()=>jt(W(),"$open",ge),E=G(),m=Gt();let B=a(t,"class",8,""),U=a(t,"id",8),lt=a(t,"label",8),p=a(t,"multiselect",8,!1),r=a(t,"value",28,()=>p()?[]:void 0),at=a(t,"noResultsText",8),Pe=a(t,"disabled",8,!1),rt=a(t,"labelHidden",8,!1),R=a(t,"options",8),st=a(t,"placeholder",8,null),nt=a(t,"readonly",8,!1),he=a(t,"required",8,!1),re=a(t,"leadingIcon",8,null),it=a(t,"showChevron",8,!1),T=a(t,"optionValueKey",8,null),se=a(t,"optionLabelKey",24,T),_e=a(t,"minSize",8,0),xe=a(t,"maxSize",8,120),Te=a(t,"error",8,""),Me=a(t,"valid",8,!0),ot=a(t,"displayChips",8,!0),pe=a(t,"chipLimit",8,5),dt=a(t,"selectAllLabel",8,"Select All"),ct=a(t,"deselectAllLabel",8,"Deselect All"),ut=a(t,"removeChipLabel",8,"Remove Option"),ne=a(t,"actionTooltip",8,""),ye=a(t,"href",8,""),Ve=a(t,"hrefDisabled",8,!1),Ee=a(t,"loading",8,!1),ft=a(t,"loadingText",8,"Loading more results"),De=a(t,"variant",8,"default"),vt=a(t,"optionClass",8,""),mt=a(t,"numberOfItemsSelectedLabel",8,e=>`${e} option${e>1?"s":""} selected`),y=G(""),ie=G(""),j=G(),we=G(),v=G(),W=a(t,"open",24,()=>Jt(!1)),gt=a(t,"maxMenuHeight",8,"max-h-[20rem]");const X=()=>{o()||(Ae(W(),!0),O(ie,""),l(v).focus(),l(v).select())},He=()=>{o()&&(Ae(W(),!1),m("close",{selectedOption:l(j)}),Le())},bt=()=>{m("close",{selectedOption:l(j)}),Le()},Le=()=>{O(y,ke(l(j))),O(E,R())},z=e=>Array.isArray(e),F=e=>typeof e=="string",N=e=>typeof e=="object",Y=e=>e===null||typeof e!="object"?!1:T()!==null&&se()!==null&&T()in e&&se()in e,ke=e=>{if(!e)return z(r())?"":r()!==null&&r()!==void 0?r():"";if(F(e))return e;if(N(e)&&Y(e))return String(e[se()])},ht=e=>{if(F(e)&&(z(r())?r().includes(e)?r(r().filter(c=>c!==e)):r([...r(),e]):r(e)),N(e)&&Y(e)){const c=String(e[T()]);z(r())?r().includes(c)?r(r().filter(h=>h!==c)):r([...r(),c]):r(c)}},_t=e=>{ht(e),m("change",{value:e}),p()||Le()},xt=e=>{z(r())&&r(r().filter(c=>c!==e))},pt=()=>{!p()||!z(r())||r(l(E).map(e=>{if(N(e)&&Y(e))return String(e[T()]);if(F(e))return e}))},yt=()=>{r([])},Ke=()=>{const e=l(we).querySelector('li[role="option"]:not([aria-disabled="true"])');e&&requestAnimationFrame(()=>e.focus())},wt=e=>{switch(e.key){case"Escape":He();break;case"ArrowDown":X(),Ke();break;case"Enter":X(),Ke();break}},Lt=e=>{o()||Ae(W(),!0),O(y,e.currentTarget.value),O(ie,l(y)),m("input",l(y))};function kt(e,c){return m("filter",l(y)),c.filter(h=>{if(F(h))return h.toLowerCase().includes(e.toLowerCase());if(N(h)&&Y(h))return String(h[se()]).toLowerCase().includes(e.toLowerCase())})}const Ct=()=>{o()||X()},St=(e,c)=>{if(N(e)){const h=String(e[T()]);return z(c)?c.includes(h):c===h}else if(F(e))return z(c)?c.includes(e):c===e;return!1};ue(()=>(o(),l(v)),()=>{o()&&l(v)&&document.activeElement!==l(v)&&(l(v).focus(),l(v).select())}),ue(()=>(l(ie),H(R())),()=>{O(E,kt(l(ie),R()))}),ue(()=>(H(p()),l(j),H(R()),H(r()),H(T())),()=>{p()||(O(j,R().find(e=>{if(F(e))return e===r();if(N(e)&&Y(e))return e[T()]===r()})),O(y,ke(l(j))))}),ue(()=>(l(v),l(y),H(_e()),H(xe())),()=>{l(v)&&l(y)&&(l(y).length<_e()?Oe(v,l(v).size=_e()):l(y).length>xe()?Oe(v,l(v).size=xe()):Oe(v,l(v).size=l(y).length))}),Vt(),tt(),Wt(ve,{get open(){return W()},$$events:{close:bt},children:(e,c)=>{var h=dl(),Ce=A(h),Be=M(Ce);Yt(Be,{get hidden(){return rt()},get required(){return he()},get label(){return lt()},get for(){return U()}});var Se=k(Be,2),Re=M(Se);{var Ot=s=>{ze(s,{class:"ml-2 shrink-0",get name(){return re()}})};x(Re,s=>{re()&&s(Ot)})}var oe=k(Re,2),je=M(oe);{var At=s=>{var i=J(),g=A(i);{var w=u=>{var _=ll(),C=A(_);Je(C,1,()=>r().slice(0,pe()),Qe,(b,L)=>{Zt(b,{get removeButtonLabel(){return ut()},$$events:{remove:()=>xt(l(L))},children:(S,de)=>{Ie();var ce=qe();K(()=>te(ce,l(L))),f(S,ce)},$$slots:{default:!0}})});var n=k(C,2);{var d=b=>{var L=tl(),S=M(L);V(L),K(de=>te(S,`+${de??""}`),[()=>r().slice(pe()).length],q),f(b,L)};x(n,b=>{r().length>pe()&&b(d)})}f(u,_)},I=u=>{Nt(u,{children:(_,C)=>{Ie();var n=qe();K(d=>te(n,d),[()=>mt()(r().length)],q),f(_,n)},$$slots:{default:!0}})};x(g,u=>{ot()?u(w):u(I,!1)})}f(s,i)};x(je,s=>{p()&&z(r())&&r().length>0&&s(At)})}var D=k(je,2);Dt(D);let Fe;Bt(D,s=>O(v,s),()=>l(v)),V(oe);var Ne=k(oe,2);{var zt=s=>{var i=al(),g=M(i);{var w=u=>{Ze(u,{get text(){return ne()},right:!0,children:(_,C)=>{var n=J(),d=A(n);fe(d,t,"action",{},null),f(_,n)},$$slots:{default:!0}})},I=u=>{var _=J(),C=A(_);fe(C,t,"action",{},null),f(u,_)};x(g,u=>{ne()?u(w):u(I,!1)})}V(i),f(s,i)},It=(s,i)=>{{var g=w=>{var I=rl(),u=M(I);{var _=n=>{Ze(n,{get text(){return ne()},right:!0,children:(d,b)=>{Ye(d,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return Ve()},leadingIcon:"external-link"})},$$slots:{default:!0}})},C=n=>{Ye(n,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return Ve()},leadingIcon:"external-link"})};x(u,n=>{ne()?n(_):n(C,!1)})}V(I),f(w,I)};x(s,w=>{ye()&&w(g)},i)}};x(Ne,s=>{ae.action?s(zt):s(It,!1)})}var qt=k(Ne,2);{var Pt=s=>{var i=sl(),g=M(i);const w=q(()=>le("transition-transform duration-200",o()&&"rotate-180",!o()&&"rotate-0"));ze(g,{name:"chevron-down",get class(){return l(w)}}),V(i),K(()=>Kt(i,"aria-label",o()?"Close options":"Open options")),Z("click",i,$(()=>o()?He():X())),f(s,i)};x(qt,s=>{it()&&s(Pt)})}V(Se),V(Ce);var Ge=k(Ce,2);Xt(Ge,{get keepOpen(){return p()},get id(){return`${U()??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return gt()},get menuElement(){return l(we)},set menuElement(s){O(we,s)},children:(s,i)=>{var g=il(),w=A(g);{var I=n=>{var d=nl(),b=A(d);const L=q(()=>r().length===R().length);ee(b,{get disabled(){return l(L)},get label(){return dt()},$$events:{click:pt}});var S=k(b,2);const de=q(()=>r().length===0);ee(S,{get disabled(){return l(de)},get label(){return ct()},$$events:{click:yt}});var ce=k(S,2);$t(ce),f(n,d)};x(w,n=>{p()&&z(r())&&n(I)})}var u=k(w,2);Je(u,1,()=>l(E),Qe,(n,d)=>{const b=q(()=>St(l(d),r())),L=q(()=>ke(l(d)));ee(n,{get selected(){return l(b)},get label(){return l(L)},get class(){return vt()},$$events:{click:()=>_t(l(d))}})},n=>{var d=J(),b=A(d);{var L=S=>{ee(S,{disabled:!0,get label(){return at()}})};x(b,S=>{Ee()===!1&&S(L)})}f(n,d)});var _=k(u,2);{var C=n=>{ee(n,{disabled:!0,get label(){return ft()},$$slots:{leading:(d,b)=>{ze(d,{slot:"leading",name:"spinner",class:"animate-spin"})}}})};x(_,n=>{Ee()&&n(C)})}f(s,g)},$$slots:{default:!0},$$legacy:!0});var Tt=k(Ge,2);{var Mt=s=>{var i=ol(),g=M(i,!0);V(i),K(()=>te(g,Te())),f(s,i)};x(Tt,s=>{Te()&&!Me()&&s(Mt)})}K((s,i,g)=>{We(Se,1,s,"svelte-1lqkhpx"),We(oe,1,i,"svelte-1lqkhpx"),Fe=Ht(D,Fe,{id:U(),placeholder:st(),required:he(),readonly:nt(),disabled:Pe(),type:"text",value:l(y),class:g,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${U()??""}-listbox`,"aria-expanded":o(),"aria-required":he(),"aria-autocomplete":"list","data-testid":Q["data-testid"]??U(),...me},"svelte-1lqkhpx")},[()=>Ue(le(el({variant:De()}),!Me()&&De()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",Pe()&&"opacity-50",B())),()=>Ue(le("input-wrapper",p()&&"gap-1",p()&&"m-1",re()&&p()&&"ml-2")),()=>le("combobox-input",p()?r().length>0||re()?"indent-0":"indent-1":"indent-2",B())],q),Z("focus",D,$(X)),Z("input",D,$(Lt)),Z("keydown",D,$(wt)),Z("click",D,$(Ct)),f(e,h)},$$slots:{default:!0}}),et(),be()}export{ql as C};
