import{n as c}from"./DuFMxN9w.js";import{t as m}from"./mTWriMIu.js";import{p as u}from"./DLPXAOjq.js";import{r as p,a as f}from"./CygcAxUg.js";import{t as i,a as y}from"./DNNVWk-J.js";const v={namespaces:[]},h=t=>{var e;return t.config&&(t.config.historyArchivalState=i(t.config.historyArchivalState),t.config.visibilityArchivalState=i(t.config.visibilityArchivalState)),t.namespaceInfo&&(t.namespaceInfo.state=y((e=t.namespaceInfo)==null?void 0:e.state)),t};async function I(t,e=fetch){const{showTemporalSystemNamespace:s,runtimeEnvironment:o}=t;if(o.isCloud){c.set([]);return}try{const r=p("namespaces"),a=await u(async n=>f(r,{request:e,token:n,onError:()=>m.push({variant:"error",message:"Unable to fetch namespaces"})})),l=((a==null?void 0:a.namespaces)??[]).filter(n=>s||n.namespaceInfo.name!=="temporal-system").map(h);c.set(l)}catch{c.set([])}}async function d(t,e,s=fetch){const[o]=v.namespaces,r=p("namespace",{namespace:t}),a=await f(r,{request:s,onError:()=>m.push({variant:"error",message:"Unable to fetch namespace"})});return a?h(a):o}export{I as a,d as f};
