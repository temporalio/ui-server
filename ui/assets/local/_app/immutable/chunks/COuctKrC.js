import{d as m}from"./BsnfN2fh.js";import{p as D}from"./Cu4RXsHe.js";import{n as h}from"./Dk_FBisY.js";import{p as S}from"./BiwUG45a.js";import{c as y}from"./C3UEgiin.js";const b={WORKFLOWS:"workflows",SCHEDULES:"schedules"},p=[{label:"Status"},{label:"Workflow ID"},{label:"Run ID"},{label:"Type"},{label:"Start"},{label:"End"}],E=[{label:"History Size"},{label:"History Length"},{label:"Execution Time"},{label:"Execution Duration"},{label:"State Transitions"},{label:"Task Queue"},{label:"Scheduled By ID"},{label:"Scheduled Start Time"},{label:"Deployment"},{label:"Deployment Version"},{label:"Versioning Behavior"},{label:"Change Version"}],R=[...E,{label:"Parent Namespace"}],d=[{label:"Status"},{label:"Schedule ID"},{label:"Workflow Type"},{label:"Recent Runs"},{label:"Upcoming Runs"},{label:"Schedule Spec"}],f=S("namespace-workflow-table-columns",{}),U=S("namespace-schedules-table-columns",{}),i=m([h,D,f,U],([l,e,o,s])=>{const a={},r=(c,u,A)=>{var O;return(O=c==null?void 0:c[u])!=null&&O.length||(c[u]=[...A]),c[u]},n=c=>({workflows:r(o,c,p),schedules:r(s,c,d)}),t=(l==null?void 0:l.reduce((c,{namespaceInfo:{name:u}})=>({...c,[u]:n(u)}),a))??{},{namespace:C}=e.params;return t[C]?t:{...t,[C]:n(C)}}),B=(l,e)=>m(i,o=>{var s;return[...p,...(s=e==null?void 0:e.runtimeEnvironment)!=null&&s.isCloud?E:R].filter(a=>{var r,n;return!((n=(r=o[l])==null?void 0:r.workflows)!=null&&n.some(t=>t.label===a.label))})}),k=l=>m(i,e=>[...d].filter(o=>{var s,a;return!((a=(s=e[l])==null?void 0:s.schedules)!=null&&a.some(r=>r.label===o.label))})),v=(l,e=b.WORKFLOWS)=>m([y,i],([o,s])=>Object.keys(o).filter(a=>{var r,n;return!((n=(r=s[l])==null?void 0:r[e])!=null&&n.some(t=>t.label===a))}).map(a=>({label:a}))),T=l=>{switch(l){case b.WORKFLOWS:return p;case b.SCHEDULES:return d}},N=(l,e)=>{const o=T(l.payload.table);switch(l.type){case"CONFIGURABLE_COLUMN.ADD":{const{label:s,namespace:a}=l.payload,r=(e==null?void 0:e[a])??o;return{...e,[a]:[...r,{label:s}]}}case"CONFIGURABLE_COLUMN.REMOVE":{const{label:s,namespace:a}=l.payload,r=(e==null?void 0:e[a])??o;return{...e,[a]:r.filter(({label:n})=>n!==s)}}case"CONFIGURABLE_COLUMN.MOVE":{const{from:s,to:a,namespace:r}=l.payload,t=[...(e==null?void 0:e[r])??p];return t.splice(a,0,t.splice(s,1)[0]),{...e,[r]:t}}default:return e}},W=l=>{switch(l){case b.WORKFLOWS:return f;case b.SCHEDULES:return U}},L=l=>{W(l.payload.table).update(o=>N(l,o))},V=(l,e,o)=>{L({type:"CONFIGURABLE_COLUMN.ADD",payload:{label:l,namespace:e,table:o}})},K=(l,e,o)=>{L({type:"CONFIGURABLE_COLUMN.REMOVE",payload:{label:l,namespace:e,table:o}})},g=(l,e,o,s)=>{L({type:"CONFIGURABLE_COLUMN.MOVE",payload:{from:l,to:e,namespace:o,table:s}})};export{p as D,b as T,v as a,V as b,i as c,k as d,B as e,g as m,K as r};
