import"./CWj6FrbW.js";import{o as Kt}from"./CDMQnRTF.js";import{p as Ue,l as vt,s as ue,m as dt,M as C,a as ct,i as he,c as ee,e as s,b as je,f as w,j as l,h as d,r as o,t as f,I as te,u as Nt,g as e,o as tt,n as V,k as q,av as Ce,at,au as Vt,v as n,q as Jt}from"./UnFCzZBm.js";import{s as y,d as Qt,e as nt}from"./CX2avYX0.js";import{i as c}from"./pI5hk1MB.js";import{e as Wt,i as Xt}from"./DMsHiW-d.js";import{s as Me}from"./fCvEOUPS.js";import{c as Fe,s as me}from"./CDVS_aRO.js";import{l as ut,p as M,a as Le,s as Yt,c as Se}from"./GmGfGY7t.js";import{p as ce}from"./KgELkxBz.js";import{t as Zt}from"./DJTfxBJa.js";import{c as $t,B as xe}from"./CROwkM3p.js";import{C as Oe}from"./CqMauwEX.js";import{I as rt}from"./dWO51a22.js";import{L as ze}from"./Pi4fgePL.js";import{T as De}from"./BV10CEsJ.js";import{t as b}from"./DEjs8ZrU.js";import{i as m,e as ea,c as ta,d as aa}from"./Msym7e88.js";import{i as na}from"./CycxjDHA.js";import{a as ra}from"./Bt9FnE2Z.js";import{c as ia,d as it,C as sa,M as oa,E as la}from"./DbsFj1kX.js";import{f as st,s as va}from"./ByTIZu23.js";import{b as da}from"./BLclL1_6.js";import{k as ot}from"./iEPjGoii.js";import{d as ca,g as ua,c as ma}from"./BLF9o8B_.js";import{h as ge,p as fa}from"./BiL-WGDY.js";import{c as lt}from"./BcS-U-E_.js";import{t as _a}from"./DJA9DSKC.js";import"./69_IOA4Y.js";import{i as mt,t as ke}from"./BBLBidKq.js";import{P as ga}from"./DXeof409.js";import{g as ya}from"./DDsOhKiV.js";const xa={workflow:"text-blue-700 dark:text-blue-400",activity:"text-purple-600 dark:text-purple-500","child-workflow":"text-cyan-600",timer:"text-yellow-600 dark:text-yellow-400",signal:"text-pink-600 dark:text-pink-400",update:"text-blue-600 dark:text-blue-400",other:"text-slate-700 dark:text-slate-300",nexus:"text-indigo-600 dark:text-indigo-400","local-activity":"text-slate-700 dark:text-slate-300",default:"text-purple-600 dark:text-purple-500"},ha=$t(["whitespace-nowrap font-semibold md:text-base flex items-center gap-0.5"],{variants:{category:xa}});var ka=w('<p class="whitespace-nowrap text-right text-xs"> </p>'),ba=w('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),wa=w('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),pa=w('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function ye(ve,t){const z=ut(t,["children","$$slots","$$events","$$legacy"]);Ue(t,!1);const L=dt();let p=M(t,"key",8),T=M(t,"value",8),J=M(t,"attributes",8),E=M(t,"showKey",8,!0);vt(()=>(C(p()),C(J())),()=>{ue(L,ca(p(),J()))}),ct(),mt();var S=he(),j=ee(S);{var Q=D=>{var G=pa(),H=l(G);{var ae=x=>{var h=ka(),P=l(h,!0);o(h),f(re=>y(P,re),[()=>(C(st),C(p()),te(()=>st(p())))]),s(x,h)};c(H,x=>{E()&&x(ae)})}var ne=d(H,2);{var be=x=>{var h=wa(),P=l(h);ga(P,{get value(){return T()},key:"payloads",children:(W,A=Nt)=>{var F=ba(),K=l(F),R=l(K),X=l(R,!0);o(R),o(K),o(F),f((v,ie)=>{me(F,1,v,"svelte-cy5z6t"),y(X,ie)},[()=>Fe((C(ke),C(z),te(()=>ke("payload",z.class)))),()=>(A(),te(()=>A().slice(0,60)))]),s(W,F)},$$slots:{default:!0}}),o(h),s(x,h)},we=x=>{var h=he(),P=ee(h);{var re=A=>{{let F=tt(()=>(C(b),te(()=>b("common.copy-icon-title")))),K=tt(()=>(C(b),te(()=>b("common.copy-success-icon-title"))));Oe(A,{get copyIconTitle(){return e(F)},get copySuccessIconTitle(){return e(K)},get content(){return T()},"container-class":"truncate",children:(R,X)=>{ia(R,{get value(){return T()},get attributes(){return J()},get type(){return e(L)},class:"truncate"})},$$slots:{default:!0}})}},W=A=>{xe(A,{type:"subtle",class:"block select-none truncate",children:(F,K)=>{V();var R=q();f(()=>y(R,T())),s(F,R)},$$slots:{default:!0}})};c(P,A=>{e(L)!=="none"?A(re):A(W,!1)},!0)}s(x,h)};c(ne,x=>{typeof T()=="object"?x(be):x(we,!1)})}o(G),s(D,G)};c(j,D=>{p()&&D(Q)})}s(ve,S),je()}var Ta=w('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function Ea(ve,t){const z=ut(t,["children","$$slots","$$events","$$legacy"]);Ue(t,!1);var L=dt();let p=M(t,"link",8),T=M(t,"value",28,()=>p().workflowEvent.workflowId),J=M(t,"label",24,()=>b("nexus.link")),E=M(t,"href",12,void 0);vt(()=>(C(E()),C(p()),Ce(L)),()=>{E()||(E(ya(p())),T((ue(L,E().split("workflows/"))===null||Ce(L)===void 0?void 0:Ce(L)[1])||E()))}),ct(),mt();var S=Ta(),j=l(S),Q=l(j,!0);o(j);var D=d(j,2),G=l(D);ze(G,{get href(){return E()},children:(H,ae)=>{V();var ne=q();f(()=>y(ne,T())),s(H,ne)},$$slots:{default:!0}}),o(D),o(S),f(()=>{me(S,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${C(z),te(()=>z.class)??""}`),y(Q,J()),me(D,1,`overflow-hidden ${C(z),te(()=>z.linkClass)??""}`)}),s(ve,S),je()}var Pa=w('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Aa=w('<td class="font-mono"><!></td>'),Ia=w(" <!>",1),Ca=w("<!> <!>",1),Ma=w('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),La=w('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Sa=w('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Da=w('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function mn(ve,t){Ue(t,!0);const z=()=>Le(Zt,"$timestamp",T),L=()=>Le(ra,"$authUser",T),p=()=>Le(na,"$isCloud",T),[T,J]=Yt();var E,S,j,Q,D,G,H,ae;let ne=M(t,"compact",3,!1),be=M(t,"expanded",3,!1),we=M(t,"onRowClick",3,()=>{}),x=M(t,"hoveredEventId",15),h=at(Vt(be())),P=at(void 0);const re=n(()=>m(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),W=n(()=>ce.params),A=n(()=>e(W).workflow),F=n(()=>e(W).run),K=n(()=>e(W).namespace),R=n(()=>lt({eventId:t.event.id,namespace:e(K),workflow:e(A),run:e(F)})),X=n(()=>da(t.event)),v=n(()=>m(t.event)?t.event.events.get(e(re)):t.event),ie=n(()=>ot({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:m(e(v))?(E=e(v).initialEvent)===null||E===void 0?void 0:E.eventTime:e(v)===null||e(v)===void 0?void 0:e(v).eventTime,includeMillisecondsForUnderSecond:!0})),fe=n(()=>m(t.event)?ot({start:(S=t.event.initialEvent)===null||S===void 0?void 0:S.eventTime,end:(j=t.event.lastEvent)===null||j===void 0?void 0:j.eventTime,includeMillisecondsForUnderSecond:!0}):""),ft=n(()=>ea(t.event)),_t=n(()=>ta(t.event)),gt=n(()=>aa(t.event)),yt=n(()=>m(t.event)?t.event.label:ge(t.event)?b("events.category.local-activity"):va(t.event.name)),N=n(()=>ge(t.event)?void 0:ua(m(t.event)?t.event.initialEvent:t.event)),Y=n(()=>ma(m(t.event)?t.event.lastEvent:t.event,e(N)===null||e(N)===void 0?void 0:e(N).key)),Z=n(()=>m(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),pe=n(()=>e(Z)&&(e(Z)===null||e(Z)===void 0?void 0:e(Z).paused)),de=n(()=>m(t.event)&&t.event.isPending&&(((Q=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||Q===void 0?void 0:Q.attempt)||((D=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||D===void 0?void 0:D.attempt))),Ge=n(()=>m(t.event)&&!t.event.isPending&&((H=(G=t.event.eventList.find(fa))===null||G===void 0?void 0:G.attributes)===null||H===void 0?void 0:H.attempt)),xt=n(()=>ne()&&(e(Y)===null||e(Y)===void 0?void 0:e(Y).key)&&(e(Y)===null||e(Y)===void 0?void 0:e(Y).key)!==(e(N)===null||e(N)===void 0?void 0:e(N).key)&&!(!((ae=e(v)===null||e(v)===void 0?void 0:e(v).userMetadata)===null||ae===void 0)&&ae.summary)),Re=n(()=>z()(e(v)===null||e(v)===void 0?void 0:e(v).eventTime)),Be=n(()=>z()(e(v)===null||e(v)===void 0?void 0:e(v).eventTime,{format:"short"})),ht=a=>{ue(h,!e(h)),a.stopPropagation(),we()()},kt=()=>{x(t.event.id)},bt=()=>{x(void 0)};let wt=(a,r)=>{var i;return(i=a==null?void 0:a.eventIds)===null||i===void 0?void 0:i.has(r)};Kt(async()=>{ge(t.event)?ue(P,await it(t.event,{namespace:ce.params.namespace,settings:ce.data.settings,accessToken:L().accessToken}),!0):m(t.event)&&ge(t.event.initialEvent)&&ue(P,await it(t.event.initialEvent,{namespace:ce.params.namespace,settings:ce.data.settings,accessToken:L().accessToken}),!0)});var qe=Da(),B=ee(qe);B.__click=ht;var He=l(B);{var pt=a=>{var r=Pa(),i=l(r);Wt(i,21,()=>t.event.eventList,Xt,(k,_)=>{{let u=n(()=>lt({eventId:e(_).id,namespace:e(K),workflow:e(A),run:e(F)}));ze(k,{"data-testid":"link",get href(){return e(u)},children:(I,U)=>{V();var g=q();f(()=>y(g,e(_).id)),s(I,g)},$$slots:{default:!0}})}}),o(i),o(r),s(a,r)},Tt=a=>{var r=Aa(),i=l(r);ze(i,{"data-testid":"link",get href(){return e(R)},children:(k,_)=>{V();var u=q();f(()=>y(u,t.event.id)),s(k,u)},$$slots:{default:!0}}),o(r),s(a,r)};c(He,a=>{m(t.event)?a(pt):a(Tt,!1)})}var Te=d(He),Et=l(Te);{let a=n(()=>m(t.event)&&!e(fe)||!e(ie)),r=n(()=>m(t.event)?`Duration: ${e(fe)}`:`+${e(ie)}`);De(Et,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,k)=>{{let _=n(()=>b("common.copy-icon-title")),u=n(()=>b("common.copy-success-icon-title"));Oe(i,{get copyIconTitle(){return e(_)},get copySuccessIconTitle(){return e(u)},get content(){return e(Be)},children:(I,U)=>{V();var g=q();f(()=>y(g,e(Be))),s(I,g)},$$slots:{default:!0}})}},$$slots:{default:!0}})}o(Te);var Ee=d(Te),Pt=l(Ee);{let a=n(()=>m(t.event)&&!e(fe)||!e(ie)),r=n(()=>m(t.event)?`Duration: ${e(fe)}`:`+${e(ie)}`);De(Pt,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,k)=>{{let _=n(()=>b("common.copy-icon-title")),u=n(()=>b("common.copy-success-icon-title"));Oe(i,{get copyIconTitle(){return e(_)},get copySuccessIconTitle(){return e(u)},get content(){return e(Re)},children:(I,U)=>{V();var g=q();f(()=>y(g,e(Re))),s(I,g)},$$slots:{default:!0}})}},$$slots:{default:!0}})}o(Ee);var Pe=d(Ee),Ae=l(Pe),Ke=l(Ae);rt(Ke,{get name(){return sa[t.event.category]},class:"mr-1 inline"});var At=d(Ke);o(Ae),o(Pe);var Ie=d(Pe),Ne=l(Ie),Ve=l(Ne);{var It=a=>{{let r=n(()=>e(pe)?"warning":e(de)>1?"danger":"default");xe(a,{class:"mr-1",get type(){return e(r)},children:(i,k)=>{var _=Ca(),u=ee(_);{let O=n(()=>ke("mr-1 inline",e(de)>1&&"font-bold text-red-400",e(pe)&&"font-bold text-yellow-700")),$=n(()=>e(pe)?"pause":"retry");rt(u,{get class(){return e(O)},get name(){return e($)}})}var I=d(u),U=d(I);{var g=O=>{var $=Ia(),se=ee($),_e=d(se);{var Rt=oe=>{const Ze=n(()=>{var le;return _a({date:(le=e(Z))==null?void 0:le.scheduledTime,negativeDefault:""})});var $e=he(),Bt=ee($e);{var qt=le=>{var et=q();f(Ht=>y(et,`• ${Ht??""}
                ${e(Ze)??""}`),[()=>b("workflows.next-retry")]),s(le,et)};c(Bt,le=>{e(Ze)&&le(qt)})}s(oe,$e)};c(_e,oe=>{e(de)>1&&oe(Rt)})}f(()=>{var oe;return y(se,`/ ${(((oe=e(Z))==null?void 0:oe.maximumAttempts)||"∞")??""} `)}),s(O,$)};c(U,O=>{e(Z)&&O(g)})}f(O=>y(I,` ${O??""}
          ${e(de)??""} `),[()=>b("workflows.attempt")]),s(i,_)},$$slots:{default:!0}})}};c(Ve,a=>{e(de)&&a(It)})}var Je=d(Ve,2);{var Ct=a=>{ye(a,Se(()=>e(N),{get attributes(){return e(X)}}))};c(Je,a=>{var r;!e(P)&&((r=e(N))!=null&&r.key)&&a(Ct)})}var Qe=d(Je,2);{var Mt=a=>{ye(a,Se(()=>e(P),{get attributes(){return e(X)}}))};c(Qe,a=>{e(P)&&e(P).key&&a(Mt)})}var We=d(Qe,2);{var Lt=a=>{oa(a,{get value(){return e(v).userMetadata.summary},children:Jt,$$slots:{default:(r,i)=>{const k=n(()=>i.decodedValue);var _=he(),u=ee(_);{var I=U=>{var g=Ma(),O=d(l(g),2);xe(O,{type:"secondary",class:"block select-none truncate",children:($,se)=>{V();var _e=q();f(()=>y(_e,e(k))),s($,_e)},$$slots:{default:!0}}),o(g),s(U,g)};c(u,U=>{e(k)&&U(I)})}s(r,_)}}})};c(We,a=>{var r,i;(i=(r=e(v))==null?void 0:r.userMetadata)!=null&&i.summary&&a(Lt)})}var Xe=d(We,2);{var St=a=>{Ea(a,{get link(){return e(v).links[0]},class:"max-w-xl",linkClass:"truncate"})};c(Xe,a=>{var r,i;(i=(r=e(v))==null?void 0:r.links)!=null&&i.length&&a(St)})}var Ye=d(Xe,2);{var Dt=a=>{{let r=n(()=>e(Ge).toString());ye(a,{key:"attempt",get value(){return e(r)},get attributes(){return e(X)}})}};c(Ye,a=>{e(Ge)&&a(Dt)})}var Ft=d(Ye,2);{var Ot=a=>{ye(a,Se(()=>e(Y),{get attributes(){return e(X)}}))};c(Ft,a=>{e(xt)&&a(Ot)})}o(Ne),o(Ie);var zt=d(Ie);{var Ut=a=>{var r=La(),i=l(r),k=l(i);{var _=u=>{{let I=n(()=>b("workflows.estimated-billable-actions"));De(u,{get text(){return e(I)},topRight:!0,children:(U,g)=>{xe(U,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(O,$)=>{V();var se=q();f(()=>y(se,t.event.billableActions)),s(O,se)},$$slots:{default:!0}})},$$slots:{default:!0}})}};c(k,u=>{t.event.billableActions&&u(_)})}o(i),o(r),s(a,r)};c(zt,a=>{p()&&a(Ut)})}o(B);var jt=d(B,2);{var Gt=a=>{var r=Sa(),i=l(r),k=l(i);la(k,{get group(){return t.group},get event(){return e(v)}}),o(i),o(r),f(()=>Me(i,"colspan",p()?5:4)),s(a,r)};c(jt,a=>{e(h)&&a(Gt)})}f((a,r)=>{me(B,1,a,"svelte-1cvp1uf"),Me(B,"id",`${t.event.id}-${t.index}`),Me(B,"data-eventid",t.event.id),me(Ae,1,r),y(At,` ${e(yt)??""}`)},[()=>Fe(ke("hover:cursor-pointer",e(ft)&&"!bg-red-400/40 hover:!bg-red-400/60",e(_t)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(gt)&&"!bg-pink-700/30 hover:!bg-pink-700/50",wt(t.group,x())&&"active")),()=>Fe(ha({category:t.event.category}))]),nt("mouseenter",B,kt),nt("mouseleave",B,bt),s(ve,qe),je(),J()}Qt(["click"]);export{mn as E,ye as a,ha as e};
