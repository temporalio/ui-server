import"./CWj6FrbW.js";import{p as C,ah as P,ai as b,s as _,g as l,h as x,f as E,d as T,e as U,b as V}from"./U_G9-AHJ.js";import{p as D,a as u,s as I}from"./DNW1xCX_.js";import{o as W}from"./D1QWZ-ZU.js";import{p as w}from"./vKsDjb1u.js";import{a as B}from"./brOJZyi7.js";import{c as M,d as j}from"./p15EZxI6.js";import{a as q,b as z,g as F}from"./DX-N0CqY.js";import{s as m}from"./byHaz_JD.js";function X(g,e){C(e,!0);const[i,f]=I(),t=()=>u(w,"$page",i),v=()=>u(B,"$authUser",i);let a=D(e,"key",3,""),y=a()&&(!(e.value===null||e.value===void 0)&&e.value[a()])?e.value[a()]:e.value,d=P(b(m(y)));W(()=>{p(e.value)});const p=async k=>{var n;const A={...t().data.settings,codec:{...(n=t().data.settings)===null||n===void 0?void 0:n.codec,endpoint:F(t().data.settings),passAccessToken:z(t().data.settings),includeCredentials:q(t().data.settings)}};try{const r=await M(k,t().params.namespace,A,v().accessToken),s=j(r);let o=a()&&(s==null?void 0:s[a()])?s[a()]:s;Array.isArray(o)&&o.length===1&&(o=o[0]),_(d,m(o),!0),e.onDecode&&e.onDecode(l(d))}catch{console.error("Could not decode payloads")}};var c=x(),h=E(c);T(h,()=>e.children,()=>l(d)),U(g,c),V(),f()}export{X as P};
