import"./Bzak7iHL.js";import{p as wt,u as n,ag as U,ah as ot,g as e,t as z,i as o,c as a,s as x,r as s,n as Mt,k as gt,j as H,e as _,b as bt,f as st,ac as ht,h as Jt,d as He,o as K,q as Re}from"./CYx2j9em.js";import{s as I,e as We}from"./BjCW00Pv.js";import{i as j}from"./DeQvpgQS.js";import{k as fe}from"./Hbsv0g-K.js";import{p as Rt,s as Wt,c as Xt,a as St}from"./DnRAdnAf.js";import{p as ye}from"./B74WkODG.js";import{a as Ue}from"./CHX8vcg8.js";import{B as Ft}from"./B9yPLxZj.js";import{T as ue}from"./BgyxhB8O.js";import{t as r}from"./BXv1jDVW.js";import{C as Ht}from"./M2gwvNzl.js";import{D as Be,a as Le}from"./DEo3E3oc.js";import{I as dt}from"./DH-qHh3A.js";import{N as Ae}from"./CKEXdhSM.js";import{L as lt}from"./DE4dU2pc.js";import{g as je}from"./CzTm8X19.js";import{a as ze}from"./DTBKjfP9.js";import{s as Yt}from"./BDfAQ6r3.js";import{r as Zt,a as $t}from"./DhtFMaPc.js";import{t as pe}from"./CM4UClqV.js";import{r as te,w as qe}from"./WemCyz5V.js";import{z as _t,c as xt,d as Nt,w as Qe,A as Ee}from"./2uWpc1Jl.js";import{M as _e}from"./vBRT9TDL.js";import{P as De}from"./Pm5swowm.js";import{W as Ke}from"./C6aklHeg.js";import{A as Ve}from"./CnoPspYK.js";import{B as Ge}from"./B5FQmuB7.js";import{C as me}from"./CfzT86F3.js";import{I as Je}from"./Cgy7lDWn.js";import{c as Xe}from"./Corebn1S.js";import{f as Ot,t as Ye,r as Ze,a as $e}from"./Cted96qS.js";import{c as Pe}from"./ByTIZu23.js";import{k as ta,l as ea}from"./x71bnyTj.js";import{o as aa}from"./C8ejR22J.js";const ia=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),ra=new Set(["maximumAttempts"]),oa=(l,t)=>l===0?r("workflows.no-expiration"):t,sa=(l,t)=>l?l-t:r("workflows.unlimited"),na=l=>l||r("workflows.unlimited"),la=(l,t)=>l==="maximumAttempts"&&!t?r("workflows.unlimited"):t,ca=(l,t)=>{if(ia.has(t)&&typeof l[t]=="object"){for(const[v,m]of Object.entries(l[t]))ea(m)&&(ra.has(v)?l[`${t}${Pe(v)}`]=la(v,m):l[`${t}${Pe(v)}`]=m);delete l[t]}},bi=l=>{const t={};if(l.attributes)for(const[v,m]of Object.entries(l.attributes))ta(v,m)&&(t[v]=m),ca(t,v);return t},va=({date:l,now:t=Date.now(),negativeDefault:v})=>{if(!l)return"";const m=String(l);try{const A=(Number(new Date(m))-t)/1e3;return v!==void 0&&A<0?v:isNaN(A)?"":`${A.toFixed(0)}s`}catch{return""}},ee=()=>{var v;const l=(v=je(ze))==null?void 0:v.email;return l?`From the Web UI by ${l}`:"From the Web UI"},da=async({namespace:l,execution:t,id:v,reason:m,type:d})=>{const A=Zt("activity.pause",{namespace:l});return $t(A,{options:{method:"POST",body:Yt({execution:t,reason:m,identity:ee(),id:v,type:d})}})},ua=async({namespace:l,execution:t,id:v,type:m})=>{const d=Zt("activity.unpause",{namespace:l});return $t(d,{options:{method:"POST",body:Yt({execution:t,identity:ee(),id:v,type:m})}})},ma=async({namespace:l,execution:t,id:v,type:m,resetHeartbeat:d})=>{const A=Zt("activity.reset",{namespace:l});return $t(A,{options:{method:"POST",body:Yt({execution:t,identity:ee(),id:v,type:m,resetHeartbeat:d})}})},fa=async({namespace:l,execution:t,id:v,type:m,activityOptions:d})=>{const A=Zt("activity.update-options",{namespace:l});return $t(A,{options:{method:"POST",body:Yt({execution:t,identity:ee(),id:v,type:m,activityOptions:d,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts"})}})};var ya=z(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function pa(l,t){wt(t,!0);const[v,m]=Wt();var d,A,C,P,R,g,y,S,G,Z,W,h,O,p;let M=Rt(t,"open",15),B=n(()=>t.activity.activityId),V=n(()=>t.activity.activityType),q=U(ot((A=(d=t.activity.activityOptions)===null||d===void 0?void 0:d.taskQueue)===null||A===void 0?void 0:A.name)),J=U(ot(_t(String((C=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||C===void 0?void 0:C.scheduleToCloseTimeout)))),X=U(ot(_t(String((P=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||P===void 0?void 0:P.scheduleToStartTimeout)))),Q=U(ot(_t(String((R=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||R===void 0?void 0:R.startToCloseTimeout)))),b=U(ot(_t(String((g=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||g===void 0?void 0:g.heartbeatTimeout)))),rt=U(ot((S=(y=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||y===void 0?void 0:y.retryPolicy)===null||S===void 0?void 0:S.maximumAttempts)),at=U(ot((Z=(G=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||G===void 0?void 0:G.retryPolicy)===null||Z===void 0?void 0:Z.backoffCoefficient)),$=U(ot(_t(String((h=(W=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||W===void 0?void 0:W.retryPolicy)===null||h===void 0?void 0:h.initialInterval)))),tt=ot(_t(String((p=(O=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||O===void 0?void 0:O.retryPolicy)===null||p===void 0?void 0:p.maximumInterval))),Y=U(!1);const kt=n(()=>({taskQueue:{name:e(q)},scheduleToCloseTimeout:xt(e(J)),scheduleToStartTimeout:xt(e(X)),startToCloseTimeout:xt(e(Q)),heartbeatTimeout:xt(e(b)),retryPolicy:{maximumAttempts:e(rt),initialInterval:xt(e($)),backoffCoefficient:e(at),maximumInterval:xt(tt)}})),ut=()=>{M(!1)},ae=async Tt=>{Tt.preventDefault();try{await fa({namespace:t.namespace,execution:t.execution,id:e(Y)?void 0:e(B),type:e(Y)?e(V):void 0,activityOptions:e(kt)}),Xt(te,Date.now()),pe.push({variant:"success",message:`Options for Activity ${e(B)} have been updated.`})}catch(nt){console.error("Error updating activity options:",nt),pe.push({variant:"error",message:`Options for Activity ${e(B)} have been failed to update: ${nt==null?void 0:nt.message}`,duration:5e3})}finally{ut()}},Ut=n(()=>r("common.close"));Be(l,{get open(){return M()},onClick:ut,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e(Ut)},class:"w-[480px]",children:(Tt,nt)=>{Le(Tt,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(ie,re)=>{var mt=ya(),ft=o(mt),Bt=o(ft);lt(Bt,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var It=a(Bt,4),Lt=o(It);const jt=n(()=>isNaN(Number(e(b))));dt(Lt,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(jt)},get value(){return e(b)},set value(N){x(b,N,!0)}});var zt=a(Lt,2),qt=o(zt,!0);s(zt),s(It),s(ft);var At=a(ft,2),Qt=o(At);lt(Qt,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var oe=a(Qt,4);Ae(oe,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(at)},set value(N){x(at,N,!0)}}),s(At);var yt=a(At,2),Dt=o(yt);lt(Dt,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var Et=a(Dt,4),Kt=o(Et);const se=n(()=>isNaN(Number(e($))));dt(Kt,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(se)},get value(){return e($)},set value(N){x($,N,!0)}});var i=a(Kt,2),u=o(i,!0);s(i),s(Et),s(yt);var c=a(yt,2),F=o(c);lt(F,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var L=a(F,4);Ae(L,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(rt)},set value(N){x(rt,N,!0)}}),s(c);var f=a(c,2),D=o(f);lt(D,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var w=a(D,4),k=o(w);const T=n(()=>isNaN(Number(e(J))));dt(k,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(T)},get value(){return e(J)},set value(N){x(J,N,!0)}});var E=a(k,2),ct=o(E,!0);s(E),s(w),s(f);var it=a(f,2),pt=o(it);lt(pt,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var Pt=a(pt,4),Vt=o(Pt);const ne=n(()=>isNaN(Number(e(X))));dt(Vt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(ne)},get value(){return e(X)},set value(N){x(X,N,!0)}});var Gt=a(Vt,2),le=o(Gt,!0);s(Gt),s(Pt),s(it);var ce=a(it,2),xe=o(ce);lt(xe,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var ge=a(xe,4),he=o(ge);const Ce=n(()=>isNaN(Number(e(Q))));dt(he,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Ce)},get value(){return e(Q)},set value(N){x(Q,N,!0)}});var we=a(he,2),Se=o(we,!0);s(we),s(ge),s(ce);var ve=a(ce,2),be=o(ve);lt(be,{for:"task-queue-name",label:"Task Queue Name"});var Ne=a(be,2);dt(Ne,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e(q)},set value(N){x(q,N,!0)}}),s(ve);var ke=a(ve,2);const Oe=n(()=>r("activities.apply-to-all-activity-types",{type:e(V)}));Ht(ke,{get label(){return e(Oe)},get checked(){return e(Y)},set checked(N){x(Y,N,!0)}});var Te=a(ke,2),Ie=o(Te);Ft(Ie,{type:"button",variant:"ghost",size:"sm",$$events:{click:ut},children:(N,de)=>{Mt();var vt=gt();H(Ct=>I(vt,Ct),[()=>r("common.cancel")]),_(N,vt)},$$slots:{default:!0}});var Me=a(Ie,2);Ft(Me,{type:"submit",variant:"primary",size:"sm",children:(N,de)=>{Mt();var vt=gt();H(Ct=>I(vt,Ct),[()=>r("common.save")]),_(N,vt)},$$slots:{default:!0}}),s(Te),s(mt),H((N,de,vt,Ct,Fe)=>{I(qt,N),I(u,de),I(ct,vt),I(le,Ct),I(Se,Fe)},[()=>Nt(e(b)),()=>Nt(e($)),()=>Nt(e(J)),()=>Nt(e(X)),()=>Nt(e(Q))]),We("submit",mt,ae),_(ie,mt)},$$slots:{default:!0}})},$$slots:{default:!0}}),bt(),m()}var _a=z('<h3 slot="title"> </h3>'),xa=z('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ga(l,t){wt(t,!0);const[v,m]=Wt();let d=Rt(t,"open",15),A=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=U(""),R=!1,g=U(""),y=U(!1);const S=()=>{d(!1),x(g,""),x(y,!1)},G=async()=>{await da({namespace:t.namespace,execution:t.execution,id:e(y)?void 0:e(A),reason:e(g),type:e(y)?e(C):void 0}),Xt(te,Date.now()),S()},Z=n(()=>r("workflows.pause")),W=n(()=>r("common.cancel"));_e(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return R},get confirmText(){return e(Z)},get cancelText(){return e(W)},confirmType:"destructive",get error(){return e(P)},set error(h){x(P,h,!0)},get open(){return d()},set open(h){d(h)},$$events:{cancelModal:S,confirmModal:G},$$slots:{title:(h,O)=>{var p=_a(),M=o(p,!0);s(p),H(B=>I(M,B),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(h,p)},content:(h,O)=>{var p=xa(),M=o(p),B=o(M,!0);s(M);var V=a(M,2);const q=n(()=>r("common.reason-placeholder")),J=n(()=>r("common.reason"));dt(V,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(q)},get label(){return e(J)},get value(){return e(g)},set value(b){x(g,b,!0)}});var X=a(V,2);const Q=n(()=>r("activities.pause-all-activity-types",{type:e(C)}));Ht(X,{get label(){return e(Q)},get checked(){return e(y)},set checked(b){x(y,b,!0)}}),s(p),H(b=>I(B,b),[()=>r("activities.pause-modal-description")]),_(h,p)}}}),bt(),m()}var ha=z('<h3 slot="title"> </h3>'),wa=z('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ba(l,t){wt(t,!0);const[v,m]=Wt();let d=Rt(t,"open",15),A=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=U(""),R=!1,g=U(!1),y=U(!1);const S=()=>{d(!1),x(g,!1),x(y,!1)},G=async()=>{await ma({namespace:t.namespace,execution:t.execution,id:e(g)?void 0:e(A),resetHeartbeat:e(y),type:e(g)?e(C):void 0}),Xt(te,Date.now()),pe.push({variant:"success",message:r("activities.reset-success",{activityId:e(A)})}),S()},Z=n(()=>r("workflows.reset")),W=n(()=>r("common.cancel"));_e(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return R},get confirmText(){return e(Z)},get cancelText(){return e(W)},confirmType:"destructive",get error(){return e(P)},set error(h){x(P,h,!0)},get open(){return d()},set open(h){d(h)},$$events:{cancelModal:S,confirmModal:G},$$slots:{title:(h,O)=>{var p=ha(),M=o(p,!0);s(p),H(B=>I(M,B),[()=>r("activities.reset-modal-confirmation",{activityId:t.activity.id})]),_(h,p)},content:(h,O)=>{var p=wa(),M=o(p),B=o(M,!0);s(M);var V=a(M,2);const q=n(()=>r("activities.apply-to-all-activity-types",{type:e(C)}));Ht(V,{get label(){return e(q)},get checked(){return e(g)},set checked(Q){x(g,Q,!0)}});var J=a(V,2);const X=n(()=>r("activities.reset-heartbeat-details"));Ht(J,{get label(){return e(X)},get checked(){return e(y)},set checked(Q){x(y,Q,!0)}}),s(p),H(Q=>I(B,Q),[()=>r("activities.reset-modal-description")]),_(h,p)}}}),bt(),m()}var ka=z('<h3 slot="title"> </h3>'),Ta=z('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function Ia(l,t){wt(t,!0);const[v,m]=Wt();let d=Rt(t,"open",15),A=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=U(""),R=!1,g=U(!1);const y=()=>{d(!1),x(g,!1)},S=async()=>{await ua({namespace:t.namespace,execution:t.execution,id:e(g)?void 0:e(A),type:e(g)?e(C):void 0}),Xt(te,Date.now()),y()},G=n(()=>r("workflows.unpause")),Z=n(()=>r("common.cancel"));_e(l,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",get loading(){return R},get confirmText(){return e(G)},get cancelText(){return e(Z)},confirmType:"destructive",get error(){return e(P)},set error(W){x(P,W,!0)},get open(){return d()},set open(W){d(W)},$$events:{cancelModal:y,confirmModal:S},$$slots:{title:(W,h)=>{var O=ka(),p=o(O,!0);s(O),H(M=>I(p,M),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(W,O)},content:(W,h)=>{var O=Ta(),p=o(O),M=o(p,!0);s(p);var B=a(p,2);const V=n(()=>r("activities.unpause-all-activity-types",{type:e(C)}));Ht(B,{get label(){return e(V)},get checked(){return e(g)},set checked(q){x(g,q,!0)}}),s(O),H(q=>I(M,q),[()=>r("activities.unpause-modal-description")]),_(W,O)}}}),bt(),m()}var Aa=z("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function Da(l,t){wt(t,!0);let v=Rt(t,"class",3,"");const m=n(()=>ye.params),d=n(()=>e(m).namespace),A=n(()=>e(m).workflow),C=n(()=>e(m).run),P=n(()=>({workflowId:e(A),runId:e(C)}));let R=U(!1),g=U(!1),y=U(!1),S=U(!1);const G=async()=>{t.activity.paused?x(g,!0):x(R,!0)},Z=()=>{x(y,!0)},W=()=>{x(S,!0)};var h=Aa(),O=st(h),p=o(O);const M=n(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");ue(p,{bottomLeft:!0,width:200,get text(){return e(M)},children:(b,rt)=>{const at=n(()=>t.activity.paused?"play":"pause");Ft(b,{variant:"secondary",size:"sm",get leadingIcon(){return e(at)},$$events:{click:G},children:($,tt)=>{Mt();var Y=gt();H(kt=>I(Y,kt),[()=>t.activity.paused?r("workflows.unpause"):r("workflows.pause")]),_($,Y)},$$slots:{default:!0}})},$$slots:{default:!0}});var B=a(p,2);ue(B,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(b,rt)=>{Ft(b,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:W},children:(at,$)=>{Mt();var tt=gt();H(Y=>I(tt,Y),[()=>r("common.update")]),_(at,tt)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=a(B,2);ue(V,{bottom:!0,width:200,text:"Reset this Activity.",children:(b,rt)=>{Ft(b,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:Z},children:(at,$)=>{Mt();var tt=gt();H(Y=>I(tt,Y),[()=>r("workflows.reset")]),_(at,tt)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(O);var q=a(O,2);ga(q,{get namespace(){return e(d)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(R)},set open(b){x(R,b,!0)}});var J=a(q,2);Ia(J,{get namespace(){return e(d)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(g)},set open(b){x(g,b,!0)}});var X=a(J,2);ba(X,{get namespace(){return e(d)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(y)},set open(b){x(y,b,!0)}});var Q=a(X,2);fe(Q,()=>e(S),b=>{pa(b,{get namespace(){return e(d)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(S)},set open(rt){x(S,rt,!0)}})}),H(()=>Ue(O,1,`flex items-center gap-2 ${v()??""}`)),_(l,h),bt()}const Pa=(l,t,v)=>!l.disableWriteActions&&!t.namespaceWriteDisabled(v)&&!t.isActivityCommandsDisabled&&!l.activityCommandsDisabled,et=(l,t=ht,v=ht)=>{var m=Ca(),d=o(m),A=o(d,!0);s(d);var C=a(d,2),P=o(C);{var R=y=>{var S=gt();H(()=>I(S,v())),_(y,S)},g=y=>{var S=Jt(),G=st(S);He(G,()=>v()??ht),_(y,S)};j(P,y=>{typeof v()=="string"||typeof v()=="number"?y(R):y(g,!1)})}s(C),s(m),H(()=>I(A,t())),_(l,m)};var Ca=z('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Sa=z('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Na=z('<p class="text-sm text-secondary/80"> </p> <!>',1),Oa=z('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Ma=z('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Fa=z('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Ha=z("<!> ",1),Ra=z('<p class="ml-1 text-sm text-secondary"> </p>'),Wa=z('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Ua=z("<!> <!> <!>",1),Ba=z("<!> <!>",1),La=z('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function ki(l,t){wt(t,!0);const[v,m]=Wt(),d=()=>St(qe,"$workflowRun",v),A=()=>St(p,"$coreUser",v),C=()=>St($e,"$timeFormat",v),P=()=>St(Ze,"$relativeTime",v),R=()=>St(Ye,"$timestampFormat",v),g=i=>{var u=Sa(),c=o(u),F=o(c,!0);s(c);var L=a(c,2);fe(L,()=>t.activity.attempt,f=>{De(f,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:(w,k=ht)=>{const T=n(()=>r("common.copy-icon-title")),E=n(()=>r("common.copy-success-icon-title"));me(w,{get content(){return k()},maxHeight:384,get copyIconTitle(){return e(T)},get copySuccessIconTitle(){return e(E)}})},$$slots:{default:!0}})}),s(u),H(f=>I(F,f),[()=>r("workflows.heartbeat-details")]),_(i,u)},y=i=>{var u=Ma(),c=o(u),F=o(c);{var L=w=>{var k=Na(),T=st(k),E=o(T,!0);s(T);var ct=a(T,2);fe(ct,()=>t.activity.attempt,it=>{const pt=n(()=>aa(t.activity.lastFailure,"stackTrace"));De(it,{get value(){return e(pt)},children:(Vt,ne=ht)=>{const Gt=n(()=>r("common.copy-icon-title")),le=n(()=>r("common.copy-success-icon-title"));me(Vt,{get content(){return ne()},maxHeight:384,get copyIconTitle(){return e(Gt)},get copySuccessIconTitle(){return e(le)}})},$$slots:{default:!0}})}),H(it=>I(E,it),[()=>r("workflows.last-failure")]),_(w,k)};j(F,w=>{t.activity.lastFailure&&w(L)})}s(c);var f=a(c,2);{var D=w=>{var k=Oa(),T=o(k),E=o(T,!0);s(T);var ct=a(T,2);const it=n(()=>r("common.copy-icon-title")),pt=n(()=>r("common.copy-success-icon-title"));me(ct,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(it)},get copySuccessIconTitle(){return e(pt)}}),s(k),H(Pt=>I(E,Pt),[()=>r("common.stack-trace")]),_(w,k)};j(f,w=>{var k;(k=t.activity.lastFailure)!=null&&k.stackTrace&&w(D)})}s(u),_(i,u)},S=i=>{const u=n(()=>{var c;return(c=t.activity.lastFailure)!=null&&c.stackTrace?r("workflows.last-failure-with-stack-trace"):r("workflows.last-failure")});Ve(i,{get title(){return e(u)},children:Re,$$slots:{default:(c,F)=>{const L=n(()=>F.open);var f=Jt(),D=st(f);{var w=k=>{y(k)};j(D,k=>{e(L)&&k(w)})}_(c,f)}}})},G=(i,u=ht)=>{var c=Fa(),F=o(c),L=o(F,!0);s(F);var f=a(F,2),D=o(f),w=a(D),k=o(w);s(w),s(f),s(c),H((T,E)=>{I(L,T),I(D,`${E??""} `),I(k,`(${u()??""})`)},[()=>r("workflows.next-retry"),()=>Ot(t.activity.scheduledTime,C(),{relative:P(),format:R(),relativeLabel:""})]),_(i,c)},Z=i=>{var u=Wa(),c=o(u);const F=n(()=>e(h)?"danger":"default");Ge(c,{get type(){return e(F)},children:(D,w)=>{var k=Ha(),T=st(k);const E=n(()=>e(h)&&"font-bold text-red-400");Je(T,{get class(){return`mr-1 ${e(E)??""}`},name:"retry"});var ct=a(T);H(it=>I(ct,` ${t.activity.attempt??0} of ${it??""}`),[()=>na(t.activity.maximumAttempts)]),_(D,k)},$$slots:{default:!0}});var L=a(c,2);{var f=D=>{var w=Ra(),k=o(w);s(w),H(T=>I(k,`${T??""} remaining`),[()=>sa(t.activity.maximumAttempts,t.activity.attempt)]),_(D,w)};j(L,D=>{t.activity.maximumAttempts&&D(f)})}s(u),_(i,u)};var W;const h=n(()=>t.activity.attempt>1&&!!t.activity.lastFailure),O=n(()=>(W=d()===null||d()===void 0?void 0:d().workflow)===null||W===void 0?void 0:W.isRunning);let p=Xe(),M=n(()=>Pa(ye.data.settings,A(),ye.params.namespace)&&e(O));var B=La(),V=o(B),q=o(V),J=o(q);const X=n(()=>t.activity.paused?"Paused":t.activity.state);Ke(J,{get status(){return e(X)}});var Q=a(J,2),b=o(Q,!0);s(Q),s(q);var rt=a(q,2);{var at=i=>{Da(i,{get activity(){return t.activity},class:"justify-end"})};j(rt,i=>{e(M)&&i(at)})}s(V);var $=a(V,2),tt=o($),Y=o(tt),kt=K(()=>r("workflows.activity-id"));et(Y,()=>e(kt),()=>t.activity.activityId);var ut=a(Y,2);{var ae=i=>{var u=Ua(),c=st(u),F=K(()=>r("activities.paused-by"));et(c,()=>e(F),()=>{var T,E;return((E=(T=t.activity.pauseInfo)==null?void 0:T.manual)==null?void 0:E.identity)||""});var L=a(c,2),f=K(()=>r("activities.paused-since")),D=K(()=>{var T;return Ot((T=t.activity.pauseInfo)==null?void 0:T.pauseTime,C(),{relative:P(),format:R()})});et(L,()=>e(f),()=>e(D));var w=a(L,2),k=K(()=>r("activities.pause-reason"));et(w,()=>e(k),()=>{var T,E;return((E=(T=t.activity.pauseInfo)==null?void 0:T.manual)==null?void 0:E.reason)||"-"}),_(i,u)};j(ut,i=>{t.activity.paused&&t.activity.pauseInfo&&i(ae)})}var Ut=a(ut,2),Tt=K(()=>r("workflows.attempt"));et(Ut,()=>e(Tt),()=>Z);var nt=a(Ut,2);{var ie=i=>{var u=Jt();const c=n(()=>va({date:t.activity.scheduledTime,negativeDefault:""}));var F=st(u);{var L=f=>{G(f,()=>e(c))};j(F,f=>{e(c)&&f(L)})}_(i,u)};j(nt,i=>{t.activity.scheduledTime&&i(ie)})}var re=a(nt,2);{var mt=i=>{var u=K(()=>r("workflows.last-attempt-completed-time")),c=K(()=>Ot(t.activity.lastAttemptCompleteTime,C(),{relative:P(),format:R()}));et(i,()=>e(u),()=>e(c))};j(re,i=>{t.activity.lastAttemptCompleteTime&&i(mt)})}var ft=a(re,2);{var Bt=i=>{var u=K(()=>r("workflows.retry-expiration")),c=K(()=>oa(t.activity.maximumAttempts,Qe(Ee({start:Date.now(),end:t.activity.expirationTime}))));et(i,()=>e(u),()=>e(c))};j(ft,i=>{t.activity.expirationTime&&i(Bt)})}var It=a(ft,2);{var Lt=i=>{var u=K(()=>r("workflows.last-heartbeat")),c=K(()=>Ot(t.activity.lastHeartbeatTime,C(),{relative:P(),format:R()}));et(i,()=>e(u),()=>e(c))};j(It,i=>{t.activity.lastHeartbeatTime&&i(Lt)})}var jt=a(It,2);{var zt=i=>{var u=K(()=>r("workflows.last-started-time")),c=K(()=>Ot(t.activity.lastStartedTime,C(),{relative:P(),format:R()}));et(i,()=>e(u),()=>e(c))};j(jt,i=>{t.activity.lastStartedTime&&i(zt)})}var qt=a(jt,2);{var At=i=>{var u=K(()=>r("workflows.last-worker-identity"));et(i,()=>e(u),()=>t.activity.lastWorkerIdentity)};j(qt,i=>{t.activity.lastWorkerIdentity&&i(At)})}var Qt=a(qt,2);{var oe=i=>{var u=Ba(),c=st(u);{var F=D=>{var w=K(()=>r("workflows.priority"));et(D,()=>e(w),()=>t.activity.priority.priorityKey)};j(c,D=>{t.activity.priority.priorityKey&&D(F)})}var L=a(c,2);{var f=D=>{var w=K(()=>r("workflows.fairness"));et(D,()=>e(w),()=>t.activity.priority.fairnessKey)};j(L,D=>{t.activity.priority.fairnessKey&&D(f)})}_(i,u)};j(Qt,i=>{t.activity.priority&&i(oe)})}s(tt);var yt=a(tt,2),Dt=o(yt);{var Et=i=>{var u=Jt(),c=st(u);{var F=f=>{S(f)},L=f=>{y(f)};j(c,f=>{t.totalPending>20?f(F):f(L,!1)})}_(i,u)};j(Dt,i=>{e(h)&&i(Et)})}var Kt=a(Dt,2);{var se=i=>{g(i)};j(Kt,i=>{t.activity.heartbeatDetails&&i(se)})}s(yt),s($),s(B),H(()=>I(b,t.activity.activityType)),_(l,B),bt(),m()}export{ki as P,bi as f,va as t};
