import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Ct,l as $,s as g,m as y,M as i,g as t,a as zt,bH as me,j as u,h as x,r as d,e as c,b as St,o as F,I as Y,f as vt,t as z,at as Yt,au as Zt,c as ct,v as l,i as Tt,n as $t,k as wt,av as Mt,q as fe}from"./UnFCzZBm.js";import{i as E}from"./pI5hk1MB.js";import{e as Ot,i as te}from"./DMsHiW-d.js";import{i as Bt,t as pe}from"./BBLBidKq.js";import{p as C,a as Z,s as Ht}from"./GmGfGY7t.js";import{p as Kt}from"./Dwxo_w7E.js";import{P as _e}from"./4zisTAWF.js";import{a as he}from"./B-9qHBJy.js";import{t as P}from"./DEjs8ZrU.js";import{a as ye,b as jt,i as Jt}from"./B4V_56Kr.js";import{g as Gt}from"./Dnsu5D6o.js";import{i as At}from"./fbYKRW0O.js";import{e as ee,b as xe,f as we,g as be}from"./DDItt_LS.js";import{p as Qt,c as Ut}from"./BqK-bw6u.js";import{L as Nt,D as Vt,g as Ee}from"./BfATd3m4.js";import{i as kt,b as bt}from"./CxkjLV5S.js";import{b as Pe,s as dt}from"./fCvEOUPS.js";import{s as Rt,c as re}from"./CDVS_aRO.js";import{b as ne,i as ke,H as ae,C as oe,E as ie}from"./DPEaMjgq.js";import{T as Ie}from"./D2gItXgg.js";import{E as Te}from"./C2OodUaI.js";import{L as $e}from"./gXUEJ3Qb.js";import{a as Ce,e as se,E as Xt}from"./BfR4-lub.js";import{d as le,s as et}from"./CX2avYX0.js";import{t as de}from"./DJTfxBJa.js";import{B as ce}from"./CROwkM3p.js";import{C as Ft}from"./CqMauwEX.js";import{I as Wt}from"./dWO51a22.js";import{L as ve}from"./BSzgQSk4.js";import{c as ue}from"./ChVW5Njm.js";import{t as ge}from"./BJpJRqSh.js";var Se=me('<g role="button" tabindex="0" class="relative cursor-pointer"><!><!><!><!></g>');function He(nt,e){Ct(e,!1);const D=()=>Z(ee,"$eventFilterSort",G),[G,J]=Ht(),k=y(),W=y(),S=y(),H=y(),w=y(),v=y(),f=y(),K=y(),I=y(),R=y();let a=C(e,"event",8),o=C(e,"group",8),B=C(e,"history",8),O=C(e,"groups",8),L=C(e,"index",8),m=C(e,"canvasWidth",8);const{height:tt,radius:p}=ae,N=p/2;$(()=>i(L()),()=>{g(k,L()*tt+tt/2)}),$(()=>(t(W),t(S),i(B()),i(a()),i(O()),D()),()=>{(h=>{g(W,h.nextDistance),g(S,h.offset)})(ne(B(),a(),O(),tt,D()))}),$(()=>(t(S),t(W)),()=>{g(H,t(S)>0&&t(W))}),$(()=>(i(a()),bt),()=>{g(w,kt(a())||bt(a())?"pending":a()===null||a()===void 0?void 0:a().classification)}),$(()=>t(S),()=>{g(v,t(S)*1.75*p)}),$(()=>(i(a()),i(o())),()=>{g(f,Gt(a())&&(o()===null||o()===void 0?void 0:o().lastEvent.id)===(a()===null||a()===void 0?void 0:a().id)&&(o()===null||o()===void 0?void 0:o().isPending))}),$(()=>(i(a()),t(S),i(O())),()=>{g(K,kt(a())||bt(a())||t(S)===0?!1:!ke(a(),O()))}),$(()=>(i(a()),t(f)),()=>{g(I,kt(a())||bt(a())?"pending":t(f)?a()===null||a()===void 0?void 0:a().category:void 0)}),$(()=>D(),()=>{g(R,D()==="descending")}),zt(),Bt();var A=Se(),q=u(A);{var at=h=>{{let M=F(()=>[m(),t(k)]),ot=F(()=>[m()-t(v)-p,t(k)]);Nt(h,{get startPoint(){return t(M)},get endPoint(){return t(ot)}})}};E(q,h=>{t(K)&&h(at)})}var ut=x(q);{var pt=h=>{{let M=F(()=>[m()-t(v),t(k)]);Vt(h,{get point(){return t(M)},get classification(){return t(w)},strokeWidth:1})}};E(ut,h=>{t(R)||h(pt)})}var _t=x(ut);{var _=h=>{{let M=F(()=>[m()-t(v)-p/2+N,t(k)+p+N/2]),ot=F(()=>[m()-t(v)-p/2+N,t(k)+t(H)+p]),gt=F(()=>(i(o()),t(I),Y(()=>{var mt;return(mt=o())!=null&&mt.pendingActivity?Number(o().pendingActivity.attempt)>1?"retry":"pending":t(I)})));Nt(h,{get startPoint(){return t(M)},get endPoint(){return t(ot)},get category(){return t(gt)},get pending(){return t(f)}})}};E(_t,h=>{t(H)&&h(_)})}var U=x(_t);{var ht=h=>{{let M=F(()=>[m()-t(v),t(k)]);Vt(h,{get point(){return t(M)},get classification(){return t(w)},strokeWidth:1})}};E(U,h=>{t(R)&&h(ht)})}d(A),c(nt,A),St(),J()}var De=vt("<div><svg><!><svg></svg></svg></div>");function Le(nt,e){Ct(e,!1);const D=()=>Z(xe,"$filteredEventHistory",J),G=()=>Z(ee,"$eventFilterSort",J),[J,k]=Ht(),W=y(),S=y(),H=y(),w=y();let v=C(e,"groups",8),f=C(e,"history",8);const{height:K,radius:I}=ae,R=4*I,a=600;let o=y(R),B=y(0);$(()=>(D(),G()),()=>{g(W,ye(D(),G()))}),$(()=>(t(W),i(v())),()=>{g(S,[...t(W),...v()])}),$(()=>i(f()),()=>{g(H,f().length*K)}),$(()=>(i(f()),i(v()),G(),t(o)),()=>{g(w,N=>{N.forEach(A=>{const{offset:q}=ne(f(),A,v(),K,G());g(o,Math.max(t(o),q*1.75*I+R)),g(B,Math.min(t(o)-2*I,a))})})}),$(()=>(t(w),i(f())),()=>{t(w)(f())}),zt(),Bt();var O=De();let L;var m=u(O),tt=u(m);{let N=F(()=>[t(B),0]),A=F(()=>[t(B),t(H)]);Nt(tt,{get startPoint(){return t(N)},get endPoint(){return t(A)},strokeWidth:3})}var p=x(tt);Ot(p,5,f,te,(N,A,q)=>{const at=F(()=>(i(jt),t(S),t(A),Y(()=>jt(t(S),t(A)))));He(N,{get event(){return t(A)},get group(){return t(at)},get groups(){return t(S)},get history(){return f()},get canvasWidth(){return t(B)},index:q})}),d(p),d(m),d(O),z(()=>{L=Rt(O,1,"hidden text-right xl:block",null,L,{"overflow-hidden":t(o)>a}),Pe(O,`width: ${t(o)??""}px; max-width: 600px;`),dt(m,"viewBox",`0 0 ${t(o)??""} ${t(H)??""}`),dt(m,"height",t(H)),dt(m,"width",t(o)),dt(p,"viewBox",`0 0 ${t(o)??""} ${t(H)??""}`),dt(p,"height",t(H)),dt(p,"width",t(o))}),c(nt,O),St(),k()}var Fe=vt('<tr class="bg-primary"><td><!></td></tr>');function We(nt,e){Ct(e,!1);const D=()=>Z(At,"$isCloud",G),[G,J]=Ht();let k=C(e,"loading",8,!1),W=C(e,"title",24,()=>P("events.empty-state-title")),S=C(e,"content",24,()=>P("events.empty-state-description"));Bt();var H=Fe(),w=u(H),v=u(w);{var f=I=>{$e(I,{})},K=I=>{Te(I,{get title(){return W()},get content(){return S()}})};E(v,I=>{k()?I(f):I(K,!1)})}d(w),d(H),z(()=>dt(w,"colspan",D()?5:4)),c(nt,H),St(),J()}var Be=vt("<!> <!>",1),Ae=vt("<td></td>"),Me=vt('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),Oe=vt('<tr class="hover:cursor-pointer" data-testid="pending-activity-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td><p><!> </p></td><td class="w-full overflow-hidden text-right font-normal xl:text-left"><div class="flex items-center gap-1"><!> <!></div></td><!></tr> <!>',1);function Ge(nt,e){Ct(e,!0);const D=()=>Z(Kt,"$page",k),G=()=>Z(de,"$timestamp",k),J=()=>Z(At,"$isCloud",k),[k,W]=Ht(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let w=Yt(Zt(S())),v=l(()=>D().params),f=l(()=>t(v).workflow),K=l(()=>t(v).run),I=l(()=>t(v).namespace),R=l(()=>ue({eventId:e.group===null||e.group===void 0?void 0:e.group.id,namespace:t(I),workflow:t(f),run:t(K)})),a=l(()=>G()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),o=l(()=>G()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const B=n=>{n.stopPropagation(),g(w,!t(w)),H()()};var O=Oe(),L=ct(O);L.__click=B;var m=u(L),tt=u(m);{var p=n=>{ve(n,{"data-testid":"link",get href(){return t(R)},children:(s,j)=>{$t();var T=wt();z(()=>et(T,e.group.id)),c(s,T)},$$slots:{default:!0}})},N=n=>{var s=wt();z(()=>et(s,e.event.id)),c(n,s)};E(tt,n=>{var s;(s=e.group)!=null&&s.id?n(p):n(N,!1)})}d(m);var A=x(m),q=u(A);{var at=n=>{{let s=l(()=>P("common.copy-icon-title")),j=l(()=>P("common.copy-success-icon-title"));Ft(n,{get copyIconTitle(){return t(s)},get copySuccessIconTitle(){return t(j)},get content(){return t(o)},children:(T,V)=>{$t();var Q=wt();z(()=>et(Q,t(o))),c(T,Q)},$$slots:{default:!0}})}};E(q,n=>{t(o)&&n(at)})}d(A);var ut=x(A),pt=u(ut);{var _t=n=>{{let s=l(()=>P("common.copy-icon-title")),j=l(()=>P("common.copy-success-icon-title"));Ft(n,{get copyIconTitle(){return t(s)},get copySuccessIconTitle(){return t(j)},get content(){return t(a)},children:(T,V)=>{$t();var Q=wt();z(()=>et(Q,t(a))),c(T,Q)},$$slots:{default:!0}})}};E(pt,n=>{t(a)&&n(_t)})}d(ut);var _=x(ut),U=u(_),ht=u(U);Wt(ht,{get name(){return oe.activity},class:"mr-1 inline animate-pulse"});var h=x(ht);d(U),d(_);var M=x(_),ot=u(M),gt=u(ot);{let n=l(()=>e.event.paused?"warning":e.event.attempt>1?"danger":"default");ce(gt,{class:"mr-1",get type(){return t(n)},children:(s,j)=>{var T=Be(),V=ct(T);{let rt=l(()=>pe("mr-1 inline",e.event.attempt>1&&"font-bold text-red-400",e.event.paused&&"font-bold text-yellow-700")),X=l(()=>e.event.paused?"pause":"retry");Wt(V,{get class(){return t(rt)},get name(){return t(X)}})}var Q=x(V),Dt=x(Q);{var st=rt=>{const X=l(()=>ge({date:e.event.scheduledTime,negativeDefault:""}));var yt=Tt(),xt=ct(yt);{var ft=Pt=>{var lt=wt();z(Lt=>et(lt,`• ${Lt??""}
            ${t(X)??""}`),[()=>P("workflows.next-retry")]),c(Pt,lt)};E(xt,Pt=>{t(X)&&Pt(ft)})}c(rt,yt)};E(Dt,rt=>{e.event.attempt>1&&rt(st)})}z(rt=>et(Q,` ${rt??""}
        ${e.event.attempt??""} / ${(e.event.maximumAttempts||"∞")??""} `),[()=>P("workflows.attempt")]),c(s,T)},$$slots:{default:!0}})}var mt=x(gt,2);Ce(mt,{key:"activityType",get value(){return e.event.activityType},showKey:!0,get attributes(){return e.event}}),d(ot),d(M);var Et=x(M);{var it=n=>{var s=Ae();c(n,s)};E(Et,n=>{J()&&n(it)})}d(L);var r=x(L,2);{var b=n=>{var s=Me(),j=u(s),T=u(j);ie(T,{get group(){return e.group}}),d(j),d(s),z(()=>dt(j,"colspan",J()?5:4)),c(n,s)};E(r,n=>{t(w)&&n(b)})}z((n,s)=>{dt(L,"id",`${e.event.id}-${e.index}`),Rt(U,1,n),et(h,` ${s??""}`)},[()=>re(se({category:"activity"})),()=>P("workflows.pending-activity")]),c(nt,O),St(),W()}le(["click"]);var Ne=vt("<!> <!>",1),ze=vt("<td></td>"),Ke=vt('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),Re=vt('<tr class="hover:cursor-pointer" data-testid="pending-nexus-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="w-full overflow-hidden text-right text-sm font-normal xl:text-left"><div class="flex"><div class="flex w-full items-center gap-2"><p><!> </p> <!></div></div></td><td></td><!></tr> <!>',1);function qe(nt,e){Ct(e,!0);const D=()=>Z(Kt,"$page",k),G=()=>Z(de,"$timestamp",k),J=()=>Z(At,"$isCloud",k),[k,W]=Ht(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let w=Yt(Zt(S())),v=l(()=>D().params),f=l(()=>t(v).workflow),K=l(()=>t(v).run),I=l(()=>t(v).namespace),R=l(()=>ue({eventId:String(e.event.scheduledEventId),namespace:t(I),workflow:t(f),run:t(K)})),a=l(()=>G()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),o=l(()=>G()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const B=r=>{r.stopPropagation(),g(w,!t(w)),H()()};var O=Re(),L=ct(O);L.__click=B;var m=u(L),tt=u(m);ve(tt,{"data-testid":"link",get href(){return t(R)},children:(r,b)=>{$t();var n=wt();z(()=>et(n,e.event.scheduledEventId||"")),c(r,n)},$$slots:{default:!0}}),d(m);var p=x(m),N=u(p);{var A=r=>{{let b=l(()=>P("common.copy-icon-title")),n=l(()=>P("common.copy-success-icon-title"));Ft(r,{get copyIconTitle(){return t(b)},get copySuccessIconTitle(){return t(n)},get content(){return t(o)},children:(s,j)=>{$t();var T=wt();z(()=>et(T,t(o))),c(s,T)},$$slots:{default:!0}})}};E(N,r=>{t(o)&&r(A)})}d(p);var q=x(p),at=u(q);{var ut=r=>{{let b=l(()=>P("common.copy-icon-title")),n=l(()=>P("common.copy-success-icon-title"));Ft(r,{get copyIconTitle(){return t(b)},get copySuccessIconTitle(){return t(n)},get content(){return t(a)},children:(s,j)=>{$t();var T=wt();z(()=>et(T,t(a))),c(s,T)},$$slots:{default:!0}})}};E(at,r=>{t(a)&&r(ut)})}d(q);var pt=x(q),_t=u(pt),_=u(_t),U=u(_),ht=u(U);Wt(ht,{get name(){return oe.nexus},class:"mr-1 inline animate-pulse"});var h=x(ht);d(U);var M=x(U,2);{var ot=r=>{{let b=l(()=>e.event.attempt>1?"danger":"default");ce(r,{class:"mx-1",get type(){return t(b)},children:(n,s)=>{var j=Ne(),T=ct(j);{let st=l(()=>e.event.attempt>1&&"font-bold text-red-400");Wt(T,{get class(){return`mr-1 inline ${t(st)??""}`},name:"retry"})}var V=x(T),Q=x(V);{var Dt=st=>{const rt=l(()=>ge({date:e.event.nextAttemptScheduleTime,negativeDefault:""}));var X=Tt(),yt=ct(X);{var xt=ft=>{var Pt=wt();z(lt=>et(Pt,`• ${lt??""}
                ${t(rt)??""}`),[()=>P("workflows.next-retry")]),c(ft,Pt)};E(yt,ft=>{t(rt)&&ft(xt)})}c(st,X)};E(Q,st=>{e.event.attempt>1&&st(Dt)})}z(st=>et(V,` ${st??""}
            ${e.event.attempt??""} `),[()=>P("workflows.attempt")]),c(n,j)},$$slots:{default:!0}})}};E(M,r=>{e.event.attempt&&r(ot)})}d(_),d(_t),d(pt);var gt=x(pt,2);{var mt=r=>{var b=ze();c(r,b)};E(gt,r=>{J()&&r(mt)})}d(L);var Et=x(L,2);{var it=r=>{var b=Ke(),n=u(b),s=u(n);ie(s,{get group(){return e.group}}),d(n),d(b),z(()=>dt(n,"colspan",J()?5:4)),c(r,b)};E(Et,r=>{t(w)&&r(it)})}z((r,b)=>{dt(L,"id",`${e.event.scheduledEventId}-${e.index}`),Rt(U,1,r),et(h,` ${b??""}`)},[()=>re(se({category:"nexus"})),()=>P("workflows.pending-nexus-operation")]),c(nt,O),St(),W()}le(["click"]);var je=vt('<div class="flex"><div class="pt-9"><!></div> <!></div>');function Ir(nt,e){Ct(e,!1);const D=()=>Z(we,"$fullEventHistory",W),G=()=>Z(Kt,"$page",W),J=()=>Z(be,"$eventStatusFilter",W),k=()=>Z(At,"$isCloud",W),[W,S]=Ht(),H=y(),w=y(),v=y(),f=y(),K=y(),I=y(),R=y();var a=y();let o=C(e,"items",8),B=C(e,"groups",24,()=>[]),O=C(e,"updating",8,!1),L=C(e,"loading",8,!1),m=C(e,"compact",8,!1),tt=C(e,"minimized",8,!0),p=C(e,"hoveredEventId",12,void 0);const N=[{label:"Event ID"},{label:"Timestamp"},{label:"Event Type"},{label:"Details"}],A=_=>bt(_)?`pending-nexus-${_.scheduledEventId}`:kt(_)?`pending-activity-${_.id}`:`event-${_.id}`;$(()=>(i(tt()),i(m())),()=>{g(H,!tt()&&!m())}),$(()=>D(),()=>{g(w,D()===null||D()===void 0?void 0:D()[0])}),$(()=>G(),()=>{g(v,G().url)}),$(()=>(Mt(a),t(v),Qt),()=>{g(f,g(a,t(v).searchParams.get(Qt))!==null&&Mt(a)!==void 0?Mt(a):"100")}),$(()=>(t(v),Ut),()=>{g(K,t(v).searchParams.get(Ut)||"1")}),$(()=>J(),()=>{g(R,_=>Ee(_,J()))}),$(()=>(t(R),t(K),t(f)),()=>{g(I,_=>t(R)(_).slice((parseInt(t(K))-1)*parseInt(t(f)),parseInt(t(K))*parseInt(t(f))))}),$(()=>k(),()=>{k()&&N.length===4&&N.push({label:"Billable Actions"})}),zt(),Bt();var q=je(),at=u(q),ut=u(at);{var pt=_=>{{let U=F(()=>(t(I),i(o()),Y(()=>t(I)(o()))));Le(_,{get groups(){return B()},get history(){return t(U)}})}};E(ut,_=>{t(H)&&_(pt)})}d(at);var _t=x(at,2);{let _=F(()=>(i(P),Y(()=>P("common.per-page")))),U=F(()=>(i(P),Y(()=>P("common.next-page")))),ht=F(()=>(i(P),Y(()=>P("common.previous-page")))),h=F(()=>(t(R),i(o()),Y(()=>t(R)(o()))));_e(_t,{get perPageLabel(){return t(_)},get nextPageButtonLabel(){return t(U)},get previousPageButtonLabel(){return t(ht)},pageButtonLabel:M=>P("common.go-to-page",{page:M}),get updating(){return O()},get items(){return t(h)},maxHeight:"none",children:fe,$$slots:{default:(M,ot)=>{const gt=F(()=>ot.visibleItems);var mt=Tt(),Et=ct(mt);Ot(Et,3,()=>t(gt),it=>A(it),(it,r,b)=>{var n=Tt(),s=ct(n);{var j=V=>{Xt(V,{get event(){return t(r)},get index(){return t(b)},get group(){return t(r)},get compact(){return m()},get initialItem(){return t(w)},get hoveredEventId(){return p()},set hoveredEventId(Q){p(Q)},$$legacy:!0})},T=V=>{var Q=Tt(),Dt=ct(Q);{var st=X=>{{let yt=F(()=>(i(B()),i(kt),t(r),Y(()=>B().find(xt=>{var ft;return kt(t(r))&&((ft=xt==null?void 0:xt.pendingActivity)==null?void 0:ft.id)===t(r).id}))));Ge(X,{get event(){return t(r)},get index(){return t(b)},get group(){return t(yt)}})}},rt=X=>{var yt=Tt(),xt=ct(yt);{var ft=lt=>{{let Lt=F(()=>(i(B()),i(bt),t(r),Y(()=>B().find(It=>{var qt;return bt(t(r))&&((qt=It==null?void 0:It.pendingNexusOperation)==null?void 0:qt.scheduledEventId)===t(r).scheduledEventId}))));qe(lt,{get event(){return t(r)},get index(){return t(b)},get group(){return t(Lt)}})}},Pt=lt=>{{let Lt=F(()=>(i(B()),i(Gt),t(r),Y(()=>B().find(It=>Gt(t(r))&&It.eventIds.has(t(r).id)))));Xt(lt,{get event(){return t(r)},get index(){return t(b)},get group(){return t(Lt)},get compact(){return m()},get initialItem(){return t(w)},get hoveredEventId(){return p()},set hoveredEventId(It){p(It)},$$legacy:!0})}};E(xt,lt=>{i(bt),t(r),Y(()=>bt(t(r)))?lt(ft):lt(Pt,!1)},!0)}c(X,yt)};E(Dt,X=>{i(kt),t(r),Y(()=>kt(t(r)))?X(st):X(rt,!1)},!0)}c(V,Q)};E(s,V=>{i(Jt),t(r),Y(()=>Jt(t(r)))?V(j):V(T,!1)})}c(it,n)},it=>{{let r=F(()=>(D(),i(L()),Y(()=>!D().length||L())));We(it,{get loading(){return t(r)}})}}),c(M,mt)},headers:(M,ot)=>{he(M,{slot:"headers",class:"!h-8",children:(gt,mt)=>{var Et=Tt(),it=ct(Et);Ot(it,1,()=>N,te,(r,b)=>{Ie(r,{get column(){return t(b)}})}),c(gt,Et)},$$slots:{default:!0}})}}})}d(q),c(nt,q),St(),S()}export{Ir as E};
