import{g as x,h as b,j as T}from"./pq4lXl2I.js";import{c as S}from"./ByTIZu23.js";import{b as I,i as R}from"./BAfr3XO8.js";import{h as o,a as w}from"./BJzbPR4R.js";const L=t=>t===null||typeof t!="object"||Array.isArray(t)?!1:!!o(t,"activityType"),j=t=>t===null||typeof t!="object"||Array.isArray(t)?!1:!!(o(t,"operation")&&o(t,"endpoint")),u={key:"",value:""},D=new Set(["suggestContinueAsNew","historySizeBytes","targetWorkerDeploymentVersionChanged"]),c=(t,r)=>!(r===null||r===void 0||r===""||r==="0s"||t==="type"||(!r||r==="0")&&D.has(t)),Z=t=>!(t===null||t===void 0||t===""||Array.isArray(t)&&!t.length),$=t=>typeof t=="string"?t:[t==null?void 0:t.payloads,t==null?void 0:t.indexedFields,t==null?void 0:t.points,t].find(r=>r!==void 0),W=t=>{if(w(t)){if(o(t,"stackTrace")&&t.stackTrace)return t.stackTrace;for(const r in t)if(w(t[r]))return W(t[r])}},K=["baseRunId","continuedExecutionRunId","firstExecutionRunId","newExecutionRunId","newRunId","originalExecutionRunId"],v=(t,r)=>N(t)?"execution":C(t)?"task-queue":F(t,r)?"child-workflow":B(t)?"nexus-endpoint":"none",N=t=>{for(const r of K)if(t===r)return!0;return!1},O=["taskQueueName"],C=t=>{for(const r of O)if(t===r)return!0;return!1},P=["workflowExecutionWorkflowId","workflowExecutionRunId"],F=(t,r)=>{const e=!!(r!=null&&r.workflowExecutionWorkflowId&&(r!=null&&r.workflowExecutionRunId));for(const i of P)if(t===i&&e)return!0;return!1},Q=["endpointId"],B=t=>{for(const r of Q)if(t===r)return!0;return!1},tt=t=>{var r;return(r=t==null?void 0:t.toLowerCase())==null?void 0:r.endsWith("time")},a=(t,r)=>{if(typeof r=="object"){if(R(r))return{key:t,value:r};const[e]=Object.keys(r);return e?e==="payloads"?{key:t,value:r}:{key:t+S(e),value:r[e]}:{key:t,value:{}}}else return{key:t,value:r.toString()}},E=["activityType","signalName","workflowType","result","failure","input","outcome","workflowExecution","taskQueue","startToFireTimeout","attempt","historySizeBytes","identity","parentInitiatedEventId","endpointId"],V=({attributes:t})=>{for(const[r,e]of Object.entries(t))if(c(r,e))return a(r,e)},q=t=>{if(o(t,"ActivityType"))return t.ActivityType;if(o(t,"activity_type"))return t.activity_type;if(typeof t=="string")return t},z=t=>{var r,e,i;return!!((i=(e=(r=t.markerRecordedEventAttributes)==null?void 0:r.details)==null?void 0:e.type)!=null&&i.payloads)},_=t=>{var e,i,f,y,d,p,l,k,m;const r=V(t);if(b(t)){const n=(((f=(i=(e=t.markerRecordedEventAttributes)==null?void 0:e.details)==null?void 0:i.data)==null?void 0:f.payloads)||((p=(d=(y=t.markerRecordedEventAttributes)==null?void 0:y.details)==null?void 0:d.type)==null?void 0:p.payloads)||[]).map(h=>I(h)),s=n==null?void 0:n[0];if(z(t)&&s)return a("ActivityType",s);const g=q(s);if(g)return a("ActivityType",g)}if(T(t)&&(m=(k=(l=t.attributes)==null?void 0:l.acceptedRequest)==null?void 0:k.input)!=null&&m.name)return{key:"name",value:t.attributes.acceptedRequest.input.name};for(const A of E)for(const[n,s]of Object.entries(t.attributes))if(n===A&&c(n,s))return a(n,s);return r||u},J=t=>({key:"attempt",value:t.attempt.toString()}),M=t=>t.attempt?{key:"attempt",value:t.attempt.toString()}:u,U=t=>x(t)?_(t):L(t)?J(t):j(t)?M(t):u,rt=t=>t?U(t):u,et=(t,r)=>{if(!t||!(t!=null&&t.attributes))return u;for(const e of E)for(const[i,f]of Object.entries(t.attributes))if(i===e&&i!==r&&c(i,f))return a(i,f);return u};export{Z as a,et as b,j as c,v as d,U as e,q as f,rt as g,a as h,L as i,W as j,$ as k,tt as l,c as s};
