import"./CWj6FrbW.js";import{o as ka}from"./CfXw_P7u.js";import{p as Le,f as H,j as s,n as fe,k as $,t as O,e as v,h as u,r as o,u as X,g as e,v as a,b as Fe,i as le,c as U,d as ba,l as Ee,s as Z,m as xe,M as Q,a as vt,I as Pe,av as We,q as Ut,aQ as pt,o as Ot,at as Dt,au as Ta}from"./B6CF0p-B.js";import{s as C,d as Ia,e as Rt}from"./BSSJzwu8.js";import{i as b}from"./DVfqY6Lp.js";import{e as Ke,i as Tt}from"./DNXtLIpi.js";import{s as xt}from"./Rrz4rnkO.js";import{c as kt,s as et}from"./CVNTlwXL.js";import{s as ut,a as Qe,l as ct,p as W,c as yt}from"./BrOjBIf0.js";import{p as qe}from"./DI_-_QE2.js";import{t as qt,T as Wt}from"./DRi4x2LZ.js";import{c as Kt,B as Xe}from"./D3maMAGB.js";import{C as Je}from"./DtNOqOv-.js";import{I as bt}from"./CsmBsHFA.js";import{L as Ye}from"./YlXRqom9.js";import{T as ht}from"./C82XNxlY.js";import{t as _}from"./DEjs8ZrU.js";import{b as Qt,i as Y,e as Ea,c as Pa,d as Aa}from"./DmPb72Lm.js";import{i as Ca}from"./BOVap8yq.js";import{a as Sa}from"./DHGlOZyE.js";import{c as La,d as Fa,a as Ma}from"./D6JMt4q0.js";import{a as Xt,b as Jt,g as Yt}from"./BVOpawqu.js";import{c as Oa,f as Da,d as st,e as Ra,h as ja,j as Ha,k as Na,l as Va}from"./DjO9mJfq.js";import{g as $e,h as Ce,F as Ba}from"./pqqiUbHV.js";import{f as tt,s as Zt}from"./ByTIZu23.js";import{c as $t}from"./2wVRHwKL.js";import{o as jt}from"./CtQjrHKC.js";import{d as Ht,k as Ga,l as za,a as Ua,c as Nt}from"./DuiGVrm8.js";import{t as ea,P as qa}from"./Caip565o.js";import"./DAcYyk2F.js";import"./DGYYVAig.js";import"./DzV807zH.js";import"./iQh8yuIJ.js";import"./BUApaBEI.js";import"./DMxHNrpS.js";import{s as Vt}from"./ikbOq2O5.js";import{C as Se}from"./BN-QgJsm.js";import{o as Wa}from"./C8ejR22J.js";import{g as ta}from"./C7Yrah4r.js";import"./69_IOA4Y.js";import{i as ft,t as dt}from"./BC0HqUZ9.js";import{p as aa}from"./BIwFzf-p.js";import{a as Ka}from"./COSDPnZv.js";import{s as Bt}from"./Cp8cxTKk.js";import{P as lt}from"./ey4BU0Cy.js";const ot=6,Fn={height:ot*4,gutter:ot*8,radius:ot*1.5,fontSizeRatio:ot*4},Mn={height:32,radius:4},Qa={workflow:"workflow",signal:"signal",activity:"activity",nexus:"nexus",timer:"retention","local-activity":"feather","child-workflow":"relationship",update:"update",other:"terminal"},On=(n,t,r,d,f)=>{const{radius:m}=f,c=n[0],g=n[n.length-1];let p=!1,k="start",l=0;const x=c>1/2*r;let I=!x&&g<2/3*r&&!d;x&&(k="end"),I&&(l=n.indexOf(g));const S=1.5*m;let w=I?g+S:c-S;if(!I&&!x&&(p=!0,I=!0,w=c+S,n.length===2&&d&&n[1]-n[0]<r-n[1]&&(l=1,w=n[1]+S),n.length>2)){const T=n[1]-n[0];n[2]-n[1]>T&&(l=1,w=n[1]+S)}return{textPosition:[w,t],textIndex:l,textAnchor:k,backdrop:p}},Dn=(n,t)=>{const r=t.find(f=>f.eventIds.has(n.id));return r?Array.from(r.eventIds).indexOf(n.id)===1&&r.eventList.length===3:!1},wt=(n,t)=>parseInt(n)===parseInt(t)-1,Xa=n=>{const t=Array.from(n.eventIds);return t.length===1?!0:t.length===2?wt(t[0],t[1]):t.length===3?wt(t[0],t[1])&&wt(t[1],t[2]):!1},Ja=(n,t)=>{const r=Qt(t,n);if(!r)return 0;if(r.level!==void 0)return r.level;const d=t.filter(c=>c.isPending&&c.id!==r.id).filter(c=>parseInt(c.initialEvent.id)<parseInt(r.initialEvent.id)),f=t.filter(c=>c.eventList.length>1&&!c.isPending&&c.id!==r.id).filter(c=>parseInt(c.initialEvent.id)<parseInt(r.initialEvent.id)).filter(c=>parseInt(c.lastEvent.id)>parseInt(r.initialEvent.id)),m=[...d,...f];return!m.length&&Xa(r)&&(r.level=0),r.level=m.length+1,r.level},Rn=(n,t,r,d,f)=>{const m=Qt(r,t);let c=0,g=0;if(!m)return{nextDistance:c,offset:g};if(m.eventList.length===1&&!m.isPending)return{nextDistance:c,offset:g};const p=$e(t)?m.eventList.indexOf(t):-1,k=$e(t)?m.eventList[p+1]:void 0;if((!$e(t)||t.category!=="workflow")&&(g=Ja(t,r)),!k&&!m.isPending)return{nextDistance:c,offset:g};let l=0;k&&$e(t)?l=parseInt(k.id)-parseInt(t.id):m.isPending&&$e(t)&&(l=n.length-parseInt(t.id)+2);const x=l*d;return c=f==="ascending"?x:-x,{nextDistance:c,offset:g}},jn=n=>{switch(n){case"Completed":return"#1ff1a5";case"Failed":case"Terminated":return"#c71607";case"Signaled":return"#d300d8";case"Fired":return"#f8a208";case"TimedOut":return"#f97316";case"Canceled":return"#fed64b";case"Running":return"#3b82f6";case"Delayed":return"#fbbf24";default:return"currentColor"}},Hn=n=>{switch(n){case"timer":return"#fbbf24";case"signal":return"#d300d8";case"activity":return"#a78bfa";case"workflow":case"marker":case"command":return"#ebebeb";case"child-workflow":return"#0899B2";case"update":return"#FF9B70";case"pending":return"#a78bfa";case"retry":return"#FF9B70";default:return"currentColor"}},Gt=async(n,t)=>{var c,g,p,k,l,x,I,S,w,D,T;if(!("eventType"in n)||!Ce(n))return;const{namespace:r,settings:d,accessToken:f}=t,m={...d,codec:{...d==null?void 0:d.codec,endpoint:Yt(d),passAccessToken:Jt(d),includeCredentials:Xt(d)}};try{const j=await La(n.attributes,r,m,f),L=((p=(g=(c=n.markerRecordedEventAttributes)==null?void 0:c.details)==null?void 0:g.data)==null?void 0:p.payloads)||((x=(l=(k=n.markerRecordedEventAttributes)==null?void 0:k.details)==null?void 0:l.type)==null?void 0:x.payloads)||[];if(!(L!=null&&L.length))return;const E=Fa(j),P=(T=((S=(I=E==null?void 0:E.details)==null?void 0:I.data)==null?void 0:S.payloads)||((D=(w=E==null?void 0:E.details)==null?void 0:w.type)==null?void 0:D.payloads))==null?void 0:T[0],N=Oa(P);if(N)return Da("ActivityType",N)}catch(j){console.error("Failed to decode local activity type:",j)}},Nn=n=>{if("eventList"in n)return n.eventList.find(Ce);if(Ce(n))return n},ra={workflow:"text-blue-700 dark:text-blue-400",activity:"text-purple-600 dark:text-purple-500","child-workflow":"text-cyan-600",timer:"text-yellow-600 dark:text-yellow-400",signal:"text-pink-600 dark:text-pink-400",update:"text-blue-600 dark:text-blue-400",other:"text-slate-700 dark:text-slate-300",nexus:"text-indigo-600 dark:text-indigo-400","local-activity":"text-slate-700 dark:text-slate-300",default:"text-purple-600 dark:text-purple-500"},Vn=Kt("",{variants:{category:ra}}),Ya=Kt(["whitespace-nowrap font-semibold md:text-base flex items-center gap-0.5"],{variants:{category:ra}}),ke=(n,t=X,r=X)=>{var d=$a(),f=s(d),m=s(f,!0);o(f);var c=u(f,2),g=s(c);{var p=l=>{var x=$();O(()=>C(x,r())),v(l,x)},k=l=>{var x=le(),I=U(x);ba(I,()=>r()??X),v(l,x)};b(g,l=>{typeof r()=="string"||typeof r()=="number"?l(p):l(k,!1)})}o(c),o(d),O(()=>C(m,t())),v(n,d)};var Za=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),$a=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),er=H("<!> ",1),tr=H('<p class="text-sm text-secondary/80"> </p> <!>',1),ar=H('<p class="text-sm text-secondary/80"> </p> <!>',1),rr=H('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),nr=H('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),or=H('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),ir=H('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function sr(n,t){Le(t,!0);const r=()=>Qe(qt,"$timestamp",d),[d,f]=ut(),m=(i,A=X)=>{var F=Za(),te=s(F),ie=s(te,!0);o(te);var z=u(te,2),se=s(z),be=u(se),de=s(be);o(be),o(z),o(F),O((_e,ve)=>{C(ie,_e),C(se,`${ve??""} `),C(de,`(${A()??""})`)},[()=>_("workflows.next-retry"),()=>r()(t.operation.nextAttemptScheduleTime,{relativeLabel:""})]),v(i,F)},c=i=>{{let A=a(()=>e(p)?"danger":"default");Xe(i,{class:"mr-1",get type(){return e(A)},children:(F,te)=>{var ie=er(),z=U(ie);{let be=a(()=>e(p)&&"font-bold text-red-400");bt(z,{get class(){return`mr-1 ${e(be)??""}`},name:"retry"})}var se=u(z);O(()=>C(se,` ${t.operation.attempt??0??""}`)),v(F,ie)},$$slots:{default:!0}})}},g=i=>{var A=rr(),F=s(A),te=s(F);{var ie=de=>{var _e=tr(),ve=U(_e),Re=s(ve,!0);o(ve);var Be=u(ve,2);{let Ie=a(()=>Vt(Wa(t.operation.lastAttemptFailure,"stackTrace"))),je=a(()=>_("common.copy-icon-title")),rt=a(()=>_("common.copy-success-icon-title"));Se(Be,{get content(){return e(Ie)},maxHeight:384,get copyIconTitle(){return e(je)},get copySuccessIconTitle(){return e(rt)}})}O(Ie=>C(Re,Ie),[()=>_("workflows.last-failure")]),v(de,_e)};b(te,de=>{t.operation.lastAttemptFailure&&de(ie)})}o(F);var z=u(F,2),se=s(z);{var be=de=>{var _e=ar(),ve=U(_e),Re=s(ve,!0);o(ve);var Be=u(ve,2);{let Ie=a(()=>_("common.copy-icon-title")),je=a(()=>_("common.copy-success-icon-title"));Se(Be,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(Ie)},get copySuccessIconTitle(){return e(je)}})}O(Ie=>C(Re,Ie),[()=>_("common.stack-trace")]),v(de,_e)};b(se,de=>{var _e;(_e=t.operation.lastAttemptFailure)!=null&&_e.stackTrace&&de(be)})}o(z),o(A),v(i,A)},p=a(()=>t.operation.attempt>1);var k=ir(),l=s(k),x=s(l),I=s(x);Xe(I,{children:(i,A)=>{fe();var F=$();O(()=>C(F,t.operation.state)),v(i,F)},$$slots:{default:!0}});var S=u(I,2),w=s(S,!0);o(S),o(x),o(l);var D=u(l,2),T=s(D),j=s(T);{var L=i=>{{let A=a(()=>_("nexus.endpoint"));ke(i,()=>e(A),()=>t.operation.endpoint)}};b(j,i=>{t.operation.endpoint&&i(L)})}var E=u(j,2);{var P=i=>{{let A=a(()=>_("nexus.service"));ke(i,()=>e(A),()=>t.operation.service)}};b(E,i=>{t.operation.service&&i(P)})}var N=u(E,2);{var q=i=>{{let A=a(()=>_("nexus.operation"));ke(i,()=>e(A),()=>t.operation.operation)}};b(N,i=>{t.operation.operation&&i(q)})}var G=u(N,2);{var K=i=>{{let A=a(()=>_("nexus.operation-token"));ke(i,()=>e(A),()=>t.operation.operationToken)}};b(G,i=>{t.operation.operationToken&&i(K)})}var ee=u(G,2);{let i=a(()=>_("workflows.attempt"));ke(ee,()=>e(i),()=>c)}var ne=u(ee,2);{var ye=i=>{const A=a(()=>ea({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var F=le(),te=U(F);{var ie=z=>{m(z,()=>e(A))};b(te,z=>{e(A)&&z(ie)})}v(i,F)};b(ne,i=>{t.operation.nextAttemptScheduleTime&&i(ye)})}var y=u(ne,2);{var R=i=>{{let A=a(()=>_("workflows.last-attempt-completed-time")),F=a(()=>r()(t.operation.lastAttemptCompleteTime));ke(i,()=>e(A),()=>e(F))}};b(y,i=>{t.operation.lastAttemptCompleteTime&&i(R)})}var B=u(y,2);{var me=i=>{{let A=a(()=>_("workflows.schedule-event-id")),F=a(()=>String(t.operation.scheduledEventId));ke(i,()=>e(A),()=>e(F))}};b(B,i=>{t.operation.scheduledEventId&&i(me)})}var ce=u(B,2);{var Ne=i=>{{let A=a(()=>_("workflows.scheduled-time")),F=a(()=>r()(t.operation.scheduledTime));ke(i,()=>e(A),()=>e(F))}};b(ce,i=>{t.operation.scheduledTime&&i(Ne)})}var Me=u(ce,2);{var oe=i=>{{let A=a(()=>_("workflows.schedule-to-close-timeout"));ke(i,()=>e(A),()=>t.operation.scheduleToCloseTimeout)}};b(Me,i=>{t.operation.scheduleToCloseTimeout&&i(oe)})}var ge=u(Me,2);{var he=i=>{{let A=a(()=>_("workflows.schedule-to-start-timeout"));ke(i,()=>e(A),()=>t.operation.scheduleToCloseTimeout)}};b(ge,i=>{t.operation.scheduleToStartTimeout&&i(he)})}var Oe=u(ge,2);{var Ae=i=>{{let A=a(()=>_("workflows.start-to-close-timeout"));ke(i,()=>e(A),()=>t.operation.startToCloseTimeout)}};b(Oe,i=>{t.operation.startToCloseTimeout&&i(Ae)})}o(T);var De=u(T,2),Ve=s(De);{var at=i=>{g(i)};b(Ve,i=>{e(p)&&i(at)})}var Ze=u(Ve,2);{var mt=i=>{var A=nr(),F=s(A),te=s(F,!0);o(F);var ie=u(F,2);{let z=a(()=>_("common.copy-icon-title")),se=a(()=>_("common.copy-success-icon-title"));Se(ie,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(z)},get copySuccessIconTitle(){return e(se)}})}o(A),O(z=>C(te,z),[()=>_("nexus.blocked-reason")]),v(i,A)};b(Ze,i=>{t.operation.blockedReason&&i(mt)})}var gt=u(Ze,2);{var _t=i=>{var A=or(),F=s(A),te=s(F,!0);o(F);var ie=u(F,2);{let z=a(()=>Vt(t.operation.cancellationInfo)),se=a(()=>_("common.copy-icon-title")),be=a(()=>_("common.copy-success-icon-title"));Se(ie,{language:"text",get content(){return e(z)},get copyIconTitle(){return e(se)},get copySuccessIconTitle(){return e(be)}})}o(A),O(z=>C(te,z),[()=>_("nexus.cancellation-info")]),v(i,A)};b(gt,i=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&i(_t)})}o(De),o(D),o(k),O(i=>C(w,i),[()=>_("workflows.pending-nexus-operation")]),v(n,k),Fe(),f()}function na(n,t){const r=ct(t,["children","$$slots","$$events","$$legacy"]),d=ct(r,["value","attributes","type"]);Le(t,!1);const f=()=>Qe(aa,"$page",m),[m,c]=ut(),g=xe(),p=xe(),k=xe();let l=W(t,"value",8),x=W(t,"attributes",8),I=W(t,"type",8);function S(w,D,T,j,L){return L==="execution"?Ht({namespace:w,workflow:D,run:j}):L==="task-queue"?Ga({namespace:w,queue:j}):L==="child-workflow"?Ht({namespace:w,workflow:T.workflowExecutionWorkflowId,run:T.workflowExecutionRunId}):L==="nexus-endpoint"?za(j):""}Ee(()=>(e(g),e(p),f()),()=>{(w=>{Z(g,w.workflow),Z(p,w.namespace)})(f().params)}),Ee(()=>(e(p),e(g),Q(x()),Q(l()),Q(I())),()=>{Z(k,S(e(p),e(g),x(),l(),I()))}),vt(),ft(),Ye(n,{get class(){return Q(d),Pe(()=>d.class)},get href(){return e(k)},children:(w,D)=>{fe();var T=$();O(()=>C(T,l())),v(w,T)},$$slots:{default:!0}}),Fe(),c()}function oa(n,t){Le(t,!1);const r=()=>Qe(aa,"$page",d),[d,f]=ut(),m=xe(),c=xe(),g=xe(),p=xe(),k=xe();var l=xe();let x=W(t,"value",8,void 0),I=W(t,"fallback",8,""),S=W(t,"prefix",8,""),w=W(t,"onDecode",8,void 0);const D=120;let T=xe("");const j=P=>S()?(P=`${S()} • ${P}`,P.length<D?P:P.slice(0,D)+"..."):P;Ee(()=>r(),()=>{Z(m,Yt(r().data.settings))}),Ee(()=>r(),()=>{Z(c,Jt(r().data.settings))}),Ee(()=>r(),()=>{Z(g,Xt(r().data.settings))}),Ee(()=>(r(),We(l),e(m),e(c),e(g)),()=>{Z(p,{...r().data.settings,codec:{...Z(l,r().data.settings)===null||We(l)===void 0?void 0:We(l).codec,endpoint:e(m),passAccessToken:e(c),includeCredentials:e(g)}})}),Ee(()=>(Q(I()),e(T),e(p),Q(w())),()=>{Z(k,async P=>{if(!P)return I();if(e(T))return e(T);const N=await Ma(P,e(p));return typeof N=="string"?(Z(T,j(N)),w()&&w()(e(T)),e(T)):(Z(T,I()),I())})}),vt(),ft();var L=le(),E=U(L);Ka(E,()=>(e(k),Q(x()),Pe(()=>e(k)(x()))),null,(P,N)=>{var q=le(),G=U(q);Bt(G,t,"default",{get decodedValue(){return e(N)}},null),v(P,q)},P=>{var N=le(),q=U(N);Bt(q,t,"default",{get decodedValue(){return I()}},null),v(P,N)}),v(n,L),Fe(),f()}const lr=(n,t=X)=>{const r=a(()=>ta(t())),d=a(()=>{var p;return((p=e(r).split("workflows/"))==null?void 0:p[1])||e(r)});var f=mr(),m=s(f),c=s(m,!0);o(m);var g=u(m,2);{let p=a(()=>_("common.copy-icon-title")),k=a(()=>_("common.copy-success-icon-title"));Je(g,{get copyIconTitle(){return e(p)},get copySuccessIconTitle(){return e(k)},get content(){return e(d)},children:(l,x)=>{Ye(l,{get href(){return e(r)},class:"whitespace-pre-line",children:(I,S)=>{fe();var w=$();O(()=>C(w,e(d))),v(I,w)},$$slots:{default:!0}})},$$slots:{default:!0}})}o(f),O(p=>C(c,p),[()=>_("nexus.link")]),v(n,f)},cr=(n,t=X)=>{const r=a(()=>Ua({namespace:t().workflowEvent.namespace}));var d=gr(),f=s(d),m=s(f,!0);o(f);var c=u(f,2);{let g=a(()=>_("common.copy-icon-title")),p=a(()=>_("common.copy-success-icon-title"));Je(c,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(p)},get content(){return t().workflowEvent.namespace},children:(k,l)=>{Ye(k,{get href(){return e(r)},class:"whitespace-pre-line",children:(x,I)=>{fe();var S=$();O(()=>C(S,t().workflowEvent.namespace)),v(x,S)},$$slots:{default:!0}})},$$slots:{default:!0}})}o(d),O(g=>C(m,g),[()=>_("nexus.link-namespace")]),v(n,d)},dr=(n,t=X)=>{var r=le(),d=U(r);Ke(d,17,t,Tt,(f,m,c,g)=>{var p=_r(),k=U(p);lr(k,()=>e(m));var l=u(k,2);cr(l,()=>e(m)),v(f,p)}),v(n,r)},vr=(n,t=X)=>{var r=pr(),d=u(s(r),2),f=s(d);{let m=a(()=>_("events.decode-failed"));oa(f,{get value(){return t()},get fallback(){return e(m)},children:Ut,$$slots:{default:(c,g)=>{const p=a(()=>g.decodedValue);fe();var k=$();O(()=>C(k,e(p))),v(c,k)}}})}o(d),o(r),v(n,r)},ur=(n,t=X,r=X)=>{const d=a(()=>Ha(r())),f=a(()=>ja(e(d)));var m=yr(),c=U(m),g=s(c),p=s(g,!0);o(g);var k=u(g,2);{var l=w=>{lt(w,{get value(){return r()},key:"payloads",children:(T,j=X)=>{{let L=a(()=>_("common.copy-icon-title")),E=a(()=>_("common.copy-success-icon-title"));Se(T,{get content(){return j()},maxHeight:384,get copyIconTitle(){return e(L)},get copySuccessIconTitle(){return e(E)}})}},$$slots:{default:!0}})},x=w=>{var D=le(),T=U(D);{var j=E=>{{const P=(q,G=X)=>{{let K=a(()=>_("common.copy-icon-title")),ee=a(()=>_("common.copy-success-icon-title"));Se(q,{get content(){return G()},maxHeight:384,get copyIconTitle(){return e(K)},get copySuccessIconTitle(){return e(ee)}})}};let N=a(()=>({searchAttributes:e(d)}));lt(E,{key:"searchAttributes",get value(){return e(N)},children:P,$$slots:{default:!0}})}},L=E=>{lt(E,{get value(){return e(d)},children:(N,q=X)=>{{let G=a(()=>_("common.copy-icon-title")),K=a(()=>_("common.copy-success-icon-title"));Se(N,{get content(){return q()},maxHeight:384,get copyIconTitle(){return e(G)},get copySuccessIconTitle(){return e(K)}})}},$$slots:{default:!0}})};b(T,E=>{t()==="searchAttributes"?E(j):E(L,!1)},!0)}v(w,D)};b(k,w=>{var D;(D=r())!=null&&D.payloads?w(l):w(x,!1)})}o(c);var I=u(c,2);{var S=w=>{var D=xr(),T=s(D),j=s(T,!0);o(T);var L=u(T,2);{let E=a(()=>_("common.copy-icon-title")),P=a(()=>_("common.copy-success-icon-title"));Se(L,{get content(){return e(f)},language:"text",maxHeight:384,get copyIconTitle(){return e(E)},get copySuccessIconTitle(){return e(P)}})}o(D),O(E=>C(j,E),[()=>_("workflows.call-stack-tab")]),v(w,D)};b(I,w=>{e(f)&&w(S)})}O(w=>C(p,w),[()=>tt(t())]),v(n,m)},fr=(n,t=X,r=X)=>{var d=wr(),f=s(d),m=s(f,!0);o(f);var c=u(f,2),g=s(c);{var p=l=>{Wt(l,{get dateTime(){return r()}})},k=l=>{var x=$();O(()=>C(x,r())),v(l,x)};b(g,l=>{Ra(t())?l(p):l(k,!1)})}o(c),o(d),O(l=>C(m,l),[()=>tt(t())]),v(n,d)};var mr=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),gr=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),_r=H("<!> <!>",1),pr=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),xr=H('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),yr=H('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),hr=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),wr=H('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),kr=H('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),br=H('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function zt(n,t){Le(t,!0);const r=(y,R=X,B=X)=>{var me=hr(),ce=s(me),Ne=s(ce,!0);o(ce);var Me=u(ce,2);{let oe=a(()=>_("common.copy-icon-title")),ge=a(()=>_("common.copy-success-icon-title")),he=a(()=>String(B()));Je(Me,{get copyIconTitle(){return e(oe)},get copySuccessIconTitle(){return e(ge)},get content(){return e(he)},children:(Oe,Ae)=>{{let De=a(()=>String(B())),Ve=a(()=>st(R(),e(f)));na(Oe,{get value(){return e(De)},get attributes(){return e(f)},get type(){return e(Ve)},class:"whitespace-pre-line"})}},$$slots:{default:!0}})}o(me),O(oe=>C(Ne,oe),[()=>tt(R())]),v(y,me)},d=a(()=>Ce(t.event)?_("events.category.local-activity"):Zt(t.event.name)),f=a(()=>$t(t.event)),m=a(()=>Object.entries(e(f))),c=a(()=>e(m).filter(([y,R])=>typeof R=="object"&&Object.keys(R).length>0)),g=a(()=>e(m).filter(([y,R])=>st(y,e(f))!=="none")),p=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),k=a(()=>e(m).filter(([y,R])=>typeof R!="object"&&st(y,e(f))==="none"&&!e(p).includes(y)&&(y!=="namespace"||y==="namespace"&&qe.params.namespace!==R)));var l=br(),x=s(l),I=s(x),S=s(I),w=s(S,!0);o(S);var D=u(S,2),T=s(D,!0);o(D),o(I);var j=u(I,2);Wt(j,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),o(x);var L=u(x,2),E=s(L),P=s(E);{var N=y=>{dr(y,()=>t.event.links)};b(P,y=>{var R,B;(B=(R=t.event)==null?void 0:R.links)!=null&&B.length&&y(N)})}var q=u(P,2);{var G=y=>{vr(y,()=>t.event.userMetadata.summary)};b(q,y=>{var R,B;(B=(R=t.event)==null?void 0:R.userMetadata)!=null&&B.summary&&y(G)})}var K=u(q,2);Ke(K,17,()=>e(k),([y,R])=>y,(y,R)=>{var B=a(()=>pt(e(R),2));fr(y,()=>e(B)[0],()=>e(B)[1])});var ee=u(K,2);Ke(ee,17,()=>e(g),([y,R])=>y,(y,R)=>{var B=a(()=>pt(e(R),2));r(y,()=>e(B)[0],()=>e(B)[1])}),o(E);var ne=u(E,2);{var ye=y=>{var R=kr();Ke(R,21,()=>e(c),([B,me])=>B,(B,me)=>{var ce=a(()=>pt(e(me),2));ur(B,()=>e(ce)[0],()=>e(ce)[1])}),o(R),v(y,R)};b(ne,y=>{e(c).length&&y(ye)})}o(L),o(l),O(()=>{C(w,t.event.id),C(T,e(d))}),v(n,l),Fe()}var Tr=H('<div class="flex flex-col overflow-hidden"><!> <!></div>');function Ir(n,t){Le(t,!0);let r=W(t,"group",3,void 0),d=W(t,"event",3,void 0);const f=a(()=>(r()===null||r()===void 0?void 0:r().pendingActivity)||(r()===null||r()===void 0?void 0:r().pendingNexusOperation)),m=a(()=>r()&&(r().eventList.length>1||e(f)));var c=le(),g=U(c);{var p=l=>{var x=Tr(),I=s(x);{var S=T=>{qa(T,{get activity(){return r().pendingActivity}})},w=T=>{var j=le(),L=U(j);{var E=P=>{sr(P,{get operation(){return r().pendingNexusOperation}})};b(L,P=>{var N;(N=r())!=null&&N.pendingNexusOperation&&P(E)},!0)}v(T,j)};b(I,T=>{var j;(j=r())!=null&&j.pendingActivity?T(S):T(w,!1)})}var D=u(I,2);Ke(D,17,()=>r().eventList,Tt,(T,j)=>{zt(T,{get event(){return e(j)}})}),o(x),v(l,x)},k=l=>{var x=le(),I=U(x);{var S=w=>{zt(w,{get event(){return d()}})};b(I,w=>{d()&&w(S)},!0)}v(l,x)};b(g,l=>{e(m)?l(p):l(k,!1)})}v(n,c),Fe()}var Er=H('<p class="whitespace-nowrap text-right text-xs"> </p>'),Pr=H('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),Ar=H('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),Cr=H('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function it(n,t){const r=ct(t,["children","$$slots","$$events","$$legacy"]);Le(t,!1);const d=xe();let f=W(t,"key",8),m=W(t,"value",8),c=W(t,"attributes",8),g=W(t,"showKey",8,!0);Ee(()=>(Q(f()),Q(c())),()=>{Z(d,st(f(),c()))}),vt(),ft();var p=le(),k=U(p);{var l=x=>{var I=Cr(),S=s(I);{var w=L=>{var E=Er(),P=s(E,!0);o(E),O(N=>C(P,N),[()=>(Q(tt),Q(f()),Pe(()=>tt(f())))]),v(L,E)};b(S,L=>{g()&&L(w)})}var D=u(S,2);{var T=L=>{var E=Ar(),P=s(E);lt(P,{get value(){return m()},key:"payloads",children:(q,G=X)=>{var K=Pr(),ee=s(K),ne=s(ee),ye=s(ne,!0);o(ne),o(ee),o(K),O((y,R)=>{et(K,1,y,"svelte-cy5z6t"),C(ye,R)},[()=>kt((Q(dt),Q(r),Pe(()=>dt("payload",r.class)))),()=>(G(),Pe(()=>G().slice(0,60)))]),v(q,K)},$$slots:{default:!0}}),o(E),v(L,E)},j=L=>{var E=le(),P=U(E);{var N=G=>{{let K=Ot(()=>(Q(_),Pe(()=>_("common.copy-icon-title")))),ee=Ot(()=>(Q(_),Pe(()=>_("common.copy-success-icon-title"))));Je(G,{get copyIconTitle(){return e(K)},get copySuccessIconTitle(){return e(ee)},get content(){return m()},"container-class":"truncate",children:(ne,ye)=>{na(ne,{get value(){return m()},get attributes(){return c()},get type(){return e(d)},class:"truncate"})},$$slots:{default:!0}})}},q=G=>{Xe(G,{type:"subtle",class:"block select-none truncate",children:(K,ee)=>{fe();var ne=$();O(()=>C(ne,m())),v(K,ne)},$$slots:{default:!0}})};b(P,G=>{e(d)!=="none"?G(N):G(q,!1)},!0)}v(L,E)};b(D,L=>{typeof m()=="object"?L(T):L(j,!1)})}o(I),v(x,I)};b(k,x=>{f()&&x(l)})}v(n,p),Fe()}var Sr=H('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function Lr(n,t){const r=ct(t,["children","$$slots","$$events","$$legacy"]);Le(t,!1);var d=xe();let f=W(t,"link",8),m=W(t,"value",28,()=>f().workflowEvent.workflowId),c=W(t,"label",24,()=>_("nexus.link")),g=W(t,"href",12,void 0);Ee(()=>(Q(g()),Q(f()),We(d)),()=>{g()||(g(ta(f())),m((Z(d,g().split("workflows/"))===null||We(d)===void 0?void 0:We(d)[1])||g()))}),vt(),ft();var p=Sr(),k=s(p),l=s(k,!0);o(k);var x=u(k,2),I=s(x);Ye(I,{get href(){return g()},children:(S,w)=>{fe();var D=$();O(()=>C(D,m())),v(S,D)},$$slots:{default:!0}}),o(x),o(p),O(()=>{et(p,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${Q(r),Pe(()=>r.class)??""}`),C(l,c()),et(x,1,`overflow-hidden ${Q(r),Pe(()=>r.linkClass)??""}`)}),v(n,p),Fe()}var Fr=H('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Mr=H('<td class="font-mono"><!></td>'),Or=H(" <!>",1),Dr=H("<!> <!>",1),Rr=H('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),jr=H('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Hr=H('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Nr=H('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function Bn(n,t){Le(t,!0);const r=()=>Qe(qt,"$timestamp",m),d=()=>Qe(Sa,"$authUser",m),f=()=>Qe(Ca,"$isCloud",m),[m,c]=ut();var g,p,k,l,x,I,S,w;let D=W(t,"compact",3,!1),T=W(t,"expanded",3,!1),j=W(t,"onRowClick",3,()=>{}),L=W(t,"hoveredEventId",15),E=Dt(Ta(T())),P=Dt(void 0);const N=a(()=>Y(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),q=a(()=>qe.params),G=a(()=>e(q).workflow),K=a(()=>e(q).run),ee=a(()=>e(q).namespace),ne=a(()=>Nt({eventId:t.event.id,namespace:e(ee),workflow:e(G),run:e(K)})),ye=a(()=>$t(t.event)),y=a(()=>Y(t.event)?t.event.events.get(e(N)):t.event),R=a(()=>jt({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:Y(e(y))?(g=e(y).initialEvent)===null||g===void 0?void 0:g.eventTime:e(y)===null||e(y)===void 0?void 0:e(y).eventTime,includeMillisecondsForUnderSecond:!0})),B=a(()=>Y(t.event)?jt({start:(p=t.event.initialEvent)===null||p===void 0?void 0:p.eventTime,end:(k=t.event.lastEvent)===null||k===void 0?void 0:k.eventTime,includeMillisecondsForUnderSecond:!0}):""),me=a(()=>Ea(t.event)),ce=a(()=>Pa(t.event)),Ne=a(()=>Aa(t.event)),Me=a(()=>Y(t.event)?t.event.label:Ce(t.event)?_("events.category.local-activity"):Zt(t.event.name)),oe=a(()=>Ce(t.event)?void 0:Na(Y(t.event)?t.event.initialEvent:t.event)),ge=a(()=>Va(Y(t.event)?t.event.lastEvent:t.event,e(oe)===null||e(oe)===void 0?void 0:e(oe).key)),he=a(()=>Y(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),Oe=a(()=>e(he)&&(e(he)===null||e(he)===void 0?void 0:e(he).paused)),Ae=a(()=>Y(t.event)&&t.event.isPending&&(((l=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||l===void 0?void 0:l.attempt)||((x=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||x===void 0?void 0:x.attempt))),De=a(()=>Y(t.event)&&!t.event.isPending&&((S=(I=t.event.eventList.find(Ba))===null||I===void 0?void 0:I.attributes)===null||S===void 0?void 0:S.attempt)),Ve=a(()=>D()&&(e(ge)===null||e(ge)===void 0?void 0:e(ge).key)&&(e(ge)===null||e(ge)===void 0?void 0:e(ge).key)!==(e(oe)===null||e(oe)===void 0?void 0:e(oe).key)&&!(!((w=e(y)===null||e(y)===void 0?void 0:e(y).userMetadata)===null||w===void 0)&&w.summary)),at=a(()=>r()(e(y)===null||e(y)===void 0?void 0:e(y).eventTime)),Ze=a(()=>r()(e(y)===null||e(y)===void 0?void 0:e(y).eventTime,{format:"short"})),mt=h=>{Z(E,!e(E)),h.stopPropagation(),j()()},gt=()=>{L(t.event.id)},_t=()=>{L(void 0)};let i=(h,M)=>{var V;return(V=h==null?void 0:h.eventIds)===null||V===void 0?void 0:V.has(M)};ka(async()=>{Ce(t.event)?Z(P,await Gt(t.event,{namespace:qe.params.namespace,settings:qe.data.settings,accessToken:d().accessToken}),!0):Y(t.event)&&Ce(t.event.initialEvent)&&Z(P,await Gt(t.event.initialEvent,{namespace:qe.params.namespace,settings:qe.data.settings,accessToken:d().accessToken}),!0)});var A=Nr(),F=U(A);F.__click=mt;var te=s(F);{var ie=h=>{var M=Fr(),V=s(M);Ke(V,21,()=>t.event.eventList,Tt,(ue,ae)=>{{let J=a(()=>Nt({eventId:e(ae).id,namespace:e(ee),workflow:e(G),run:e(K)}));Ye(ue,{"data-testid":"link",get href(){return e(J)},children:(pe,Te)=>{fe();var re=$();O(()=>C(re,e(ae).id)),v(pe,re)},$$slots:{default:!0}})}}),o(V),o(M),v(h,M)},z=h=>{var M=Mr(),V=s(M);Ye(V,{"data-testid":"link",get href(){return e(ne)},children:(ue,ae)=>{fe();var J=$();O(()=>C(J,t.event.id)),v(ue,J)},$$slots:{default:!0}}),o(M),v(h,M)};b(te,h=>{Y(t.event)?h(ie):h(z,!1)})}var se=u(te),be=s(se);{let h=a(()=>Y(t.event)&&!e(B)||!e(R)),M=a(()=>Y(t.event)?`Duration: ${e(B)}`:`+${e(R)}`);ht(be,{get hide(){return e(h)},get text(){return e(M)},class:"block",bottom:!0,children:(V,ue)=>{{let ae=a(()=>_("common.copy-icon-title")),J=a(()=>_("common.copy-success-icon-title"));Je(V,{get copyIconTitle(){return e(ae)},get copySuccessIconTitle(){return e(J)},get content(){return e(Ze)},children:(pe,Te)=>{fe();var re=$();O(()=>C(re,e(Ze))),v(pe,re)},$$slots:{default:!0}})}},$$slots:{default:!0}})}o(se);var de=u(se),_e=s(de);{let h=a(()=>Y(t.event)&&!e(B)||!e(R)),M=a(()=>Y(t.event)?`Duration: ${e(B)}`:`+${e(R)}`);ht(_e,{get hide(){return e(h)},get text(){return e(M)},class:"block",bottom:!0,children:(V,ue)=>{{let ae=a(()=>_("common.copy-icon-title")),J=a(()=>_("common.copy-success-icon-title"));Je(V,{get copyIconTitle(){return e(ae)},get copySuccessIconTitle(){return e(J)},get content(){return e(at)},children:(pe,Te)=>{fe();var re=$();O(()=>C(re,e(at))),v(pe,re)},$$slots:{default:!0}})}},$$slots:{default:!0}})}o(de);var ve=u(de),Re=s(ve),Be=s(Re);bt(Be,{get name(){return Qa[t.event.category]},class:"mr-1 inline"});var Ie=u(Be);o(Re),o(ve);var je=u(ve),rt=s(je),It=s(rt);{var ia=h=>{{let M=a(()=>e(Oe)?"warning":e(Ae)>1?"danger":"default");Xe(h,{class:"mr-1",get type(){return e(M)},children:(V,ue)=>{var ae=Dr(),J=U(ae);{let we=a(()=>dt("mr-1 inline",e(Ae)>1&&"font-bold text-red-400",e(Oe)&&"font-bold text-yellow-700")),He=a(()=>e(Oe)?"pause":"retry");bt(J,{get class(){return e(we)},get name(){return e(He)}})}var pe=u(J),Te=u(pe);{var re=we=>{var He=Or(),Ge=U(He),nt=u(Ge);{var xa=ze=>{const Lt=a(()=>{var Ue;return ea({date:(Ue=e(he))==null?void 0:Ue.scheduledTime,negativeDefault:""})});var Ft=le(),ya=U(Ft);{var ha=Ue=>{var Mt=$();O(wa=>C(Mt,`• ${wa??""}
                ${e(Lt)??""}`),[()=>_("workflows.next-retry")]),v(Ue,Mt)};b(ya,Ue=>{e(Lt)&&Ue(ha)})}v(ze,Ft)};b(nt,ze=>{e(Ae)>1&&ze(xa)})}O(()=>{var ze;return C(Ge,`/ ${(((ze=e(he))==null?void 0:ze.maximumAttempts)||"∞")??""} `)}),v(we,He)};b(Te,we=>{e(he)&&we(re)})}O(we=>C(pe,` ${we??""}
          ${e(Ae)??""} `),[()=>_("workflows.attempt")]),v(V,ae)},$$slots:{default:!0}})}};b(It,h=>{e(Ae)&&h(ia)})}var Et=u(It,2);{var sa=h=>{it(h,yt(()=>e(oe),{get attributes(){return e(ye)}}))};b(Et,h=>{var M;!e(P)&&((M=e(oe))!=null&&M.key)&&h(sa)})}var Pt=u(Et,2);{var la=h=>{it(h,yt(()=>e(P),{get attributes(){return e(ye)}}))};b(Pt,h=>{e(P)&&e(P).key&&h(la)})}var At=u(Pt,2);{var ca=h=>{oa(h,{get value(){return e(y).userMetadata.summary},children:Ut,$$slots:{default:(M,V)=>{const ue=a(()=>V.decodedValue);var ae=le(),J=U(ae);{var pe=Te=>{var re=Rr(),we=u(s(re),2);Xe(we,{type:"secondary",class:"block select-none truncate",children:(He,Ge)=>{fe();var nt=$();O(()=>C(nt,e(ue))),v(He,nt)},$$slots:{default:!0}}),o(re),v(Te,re)};b(J,Te=>{e(ue)&&Te(pe)})}v(M,ae)}}})};b(At,h=>{var M,V;(V=(M=e(y))==null?void 0:M.userMetadata)!=null&&V.summary&&h(ca)})}var Ct=u(At,2);{var da=h=>{Lr(h,{get link(){return e(y).links[0]},class:"max-w-xl",linkClass:"truncate"})};b(Ct,h=>{var M,V;(V=(M=e(y))==null?void 0:M.links)!=null&&V.length&&h(da)})}var St=u(Ct,2);{var va=h=>{{let M=a(()=>e(De).toString());it(h,{key:"attempt",get value(){return e(M)},get attributes(){return e(ye)}})}};b(St,h=>{e(De)&&h(va)})}var ua=u(St,2);{var fa=h=>{it(h,yt(()=>e(ge),{get attributes(){return e(ye)}}))};b(ua,h=>{e(Ve)&&h(fa)})}o(rt),o(je);var ma=u(je);{var ga=h=>{var M=jr(),V=s(M),ue=s(V);{var ae=J=>{{let pe=a(()=>_("workflows.estimated-billable-actions"));ht(J,{get text(){return e(pe)},topRight:!0,children:(Te,re)=>{Xe(Te,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(we,He)=>{fe();var Ge=$();O(()=>C(Ge,t.event.billableActions)),v(we,Ge)},$$slots:{default:!0}})},$$slots:{default:!0}})}};b(ue,J=>{t.event.billableActions&&J(ae)})}o(V),o(M),v(h,M)};b(ma,h=>{f()&&h(ga)})}o(F);var _a=u(F,2);{var pa=h=>{var M=Hr(),V=s(M),ue=s(V);Ir(ue,{get group(){return t.group},get event(){return e(y)}}),o(V),o(M),O(()=>xt(V,"colspan",f()?5:4)),v(h,M)};b(_a,h=>{e(E)&&h(pa)})}O((h,M)=>{et(F,1,h,"svelte-1cvp1uf"),xt(F,"id",`${t.event.id}-${t.index}`),xt(F,"data-eventid",t.event.id),et(Re,1,M),C(Ie,` ${e(Me)??""}`)},[()=>kt(dt("hover:cursor-pointer",e(me)&&"!bg-red-400/40 hover:!bg-red-400/60",e(ce)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(Ne)&&"!bg-pink-700/30 hover:!bg-pink-700/50",i(t.group,L())&&"active")),()=>kt(Ya({category:t.event.category}))]),Rt("mouseenter",F,gt),Rt("mouseleave",F,_t),v(n,A),Fe(),c()}Ia(["click"]);export{Qa as C,Bn as E,Mn as H,oa as M,Fn as T,Hn as a,Rn as b,it as c,Ir as d,Ya as e,Vn as f,jn as g,Nn as h,Dn as i,Gt as j,Lr as k,On as t};
