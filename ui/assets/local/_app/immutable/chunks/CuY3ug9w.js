import"./CWj6FrbW.js";import{o as It}from"./r33Ll6et.js";import{p as ve,f as w,j as z,g as a,v as G,r as E,t as Y,e as O,b as ke,d as he,aM as Ot,h as P,u as me,au as zt,aN as ae,at as ce,s as ue,i as Nt,c as Rt}from"./BBjqMsu1.js";import{d as be,e as wt,s as Ht}from"./DHOm-mSm.js";import{i as X}from"./DrCjka1e.js";import{e as Jt}from"./B8KdL4-8.js";import{a as Gt,C as Pt}from"./CDFkFKEl.js";import{c as V,s as U}from"./Cd9fk9Xa.js";import{b as Vt}from"./CnjsOa-4.js";import{p as g,s as Ut,a as Ie,r as Ft}from"./D42yUzBQ.js";import{u as M,I as jt,z as qt,j as Ke,A as Oe,E as b,B as We,D as F,S as Kt,F as Wt,i as Qt,a as Xt,G as Qe,H as Xe,J as de,K as Ye,M as Yt,O as Zt,Q as $t,R as ze,k as en,U as tn,l as nn,V as rn,W as on,X as sn,Y as ln,Z as an,_ as cn,$ as un,a0 as dn,a1 as fn,n as Ne,a2 as hn,a3 as mn,a4 as pn,a5 as gn}from"./BzoGpghd.js";import{B as Re}from"./CIP12kf3.js";import{I as yn}from"./cYmRoqvp.js";import{t as we}from"./DEjs8ZrU.js";import{t as R}from"./DIZ-FoJG.js";import{c as vn}from"./DKR5volK.js";import"./69_IOA4Y.js";import{u as kn}from"./D3tpJ1VZ.js";import{p as bn,s as xn}from"./DMvnBdKo.js";const pe=Xe.define(),Sn=Xe.define(),Bn=Qe.define(),An=Qe.define({combine(e){return $t(e,{minDepth:100,newGroupDelay:500,joinToEvent:(t,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,n)=>(r,o)=>t(r,o)||n(r,o)})}}),Dn=Kt.define({create(){return D.empty},update(e,t){let n=t.state.facet(An),r=t.annotation(pe);if(r){let c=k.fromTransaction(t,r.selection),m=r.side,f=m==0?e.undone:e.done;return c?f=Z(f,f.length,n.minDepth,c):f=$e(f,t.startState.selection),new D(m==0?r.rest:f,m==0?f:r.rest)}let o=t.annotation(Sn);if((o=="full"||o=="before")&&(e=e.isolate()),t.annotation(de.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let s=k.fromTransaction(t),i=t.annotation(de.time),l=t.annotation(de.userEvent);return s?e=e.addChanges(s,i,l,n,t):t.selection&&(e=e.addSelection(t.startState.selection,i,l,n.newGroupDelay)),(o=="full"||o=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new D(e.done.map(k.fromJSON),e.undone.map(k.fromJSON))}});function $(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let o=n.field(Dn,!1);if(!o)return!1;let s=o.pop(e,n,t);return s?(r(s),!0):!1}}const Cn=$(0,!1),He=$(1,!1),Mn=$(0,!0),Tn=$(1,!0);class k{constructor(t,n,r,o,s){this.changes=t,this.effects=n,this.mapped=r,this.startSelection=o,this.selectionsAfter=s}setSelAfter(t){return new k(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(t){return new k(t.changes&&Yt.fromJSON(t.changes),[],t.mapped&&Zt.fromJSON(t.mapped),t.startSelection&&b.fromJSON(t.startSelection),t.selectionsAfter.map(b.fromJSON))}static fromTransaction(t,n){let r=S;for(let o of t.startState.facet(Bn)){let s=o(t);s.length&&(r=r.concat(s))}return!r.length&&t.changes.empty?null:new k(t.changes.invert(t.startState.doc),r,void 0,n||t.startState.selection,S)}static selection(t){return new k(void 0,S,void 0,void 0,t)}}function Z(e,t,n,r){let o=t+1>n+20?t-n-1:0,s=e.slice(o,t);return s.push(r),s}function Ln(e,t){let n=[],r=!1;return e.iterChangedRanges((o,s)=>n.push(o,s)),t.iterChangedRanges((o,s,i,l)=>{for(let c=0;c<n.length;){let m=n[c++],f=n[c++];l>=m&&i<=f&&(r=!0)}}),r}function En(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((n,r)=>n.empty!=t.ranges[r].empty).length===0}function Ze(e,t){return e.length?t.length?e.concat(t):e:t}const S=[],_n=200;function $e(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-_n));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),Z(e,e.length-1,1e9,n.setSelAfter(r)))}else return[k.selection([t])]}function In(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function fe(e,t){if(!e.length)return e;let n=e.length,r=S;for(;n;){let o=On(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let s=e.slice(0,n);return s[n-1]=o,s}else t=o.mapped,n--,r=o.selectionsAfter}return r.length?[k.selection(r)]:S}function On(e,t,n){let r=Ze(e.selectionsAfter.length?e.selectionsAfter.map(l=>l.map(t)):S,n);if(!e.changes)return k.selection(r);let o=e.changes.map(t),s=t.mapDesc(e.changes,!0),i=e.mapped?e.mapped.composeDesc(s):s;return new k(o,Ye.mapEffects(e.effects,t),i,e.startSelection.map(s),r)}const zn=/^(input\.type|delete)($|\.)/;class D{constructor(t,n,r=0,o=void 0){this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=o}isolate(){return this.prevTime?new D(this.done,this.undone):this}addChanges(t,n,r,o,s){let i=this.done,l=i[i.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!r||zn.test(r))&&(!l.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(s,Ln(l.changes,t.changes))||r=="input.type.compose")?i=Z(i,i.length-1,o.minDepth,new k(t.changes.compose(l.changes),Ze(Ye.mapEffects(t.effects,l.changes),l.effects),l.mapped,l.startSelection,S)):i=Z(i,i.length,o.minDepth,t),new D(i,S,n,r)}addSelection(t,n,r,o){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:S;return s.length>0&&n-this.prevTime<o&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&En(s[s.length-1],t)?this:new D($e(this.done,t),this.undone,n,r)}addMapping(t){return new D(fe(this.done,t),fe(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,r){let o=t==0?this.done:this.undone;if(o.length==0)return null;let s=o[o.length-1],i=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:pe.of({side:t,rest:In(o),selection:i}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=o.length==1?S:o.slice(0,o.length-1);return s.mapped&&(l=fe(l,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:pe.of({side:t,rest:l,selection:i}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}D.empty=new D(S,S);const Nn=[{key:"Mod-z",run:Cn,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:He,preventDefault:!0},{linux:"Ctrl-Shift-z",run:He,preventDefault:!0},{key:"Mod-u",run:Mn,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Tn,preventDefault:!0}];function xe(e,t){return b.create(e.ranges.map(t),e.mainIndex)}function N(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function T({state:e,dispatch:t},n){let r=xe(e.selection,n);return r.eq(e.selection,!0)?!1:(t(N(e,r)),!0)}function ee(e,t){return b.cursor(t?e.to:e.from)}function et(e,t){return T(e,n=>n.empty?e.moveByChar(n,t):ee(n,t))}function B(e){return e.textDirectionAt(e.state.selection.main.head)==Wt.LTR}const tt=e=>et(e,!B(e)),nt=e=>et(e,B(e));function rt(e,t){return T(e,n=>n.empty?e.moveByGroup(n,t):ee(n,t))}const Rn=e=>rt(e,!B(e)),wn=e=>rt(e,B(e));function ot(e,t){return T(e,n=>{if(!n.empty)return ee(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}const st=e=>ot(e,!1),it=e=>ot(e,!0);function lt(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0,o;if(t){for(let s of e.state.facet(M.scrollMargins)){let i=s(e);i!=null&&i.top&&(n=Math.max(i==null?void 0:i.top,n)),i!=null&&i.bottom&&(r=Math.max(i==null?void 0:i.bottom,r))}o=e.scrollDOM.clientHeight-n-r}else o=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:t,height:Math.max(e.defaultLineHeight,o-5)}}function at(e,t){let n=lt(e),{state:r}=e,o=xe(r.selection,i=>i.empty?e.moveVertically(i,t,n.height):ee(i,t));if(o.eq(r.selection))return!1;let s;if(n.selfScroll){let i=e.coordsAtPos(r.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),c=l.top+n.marginTop,m=l.bottom-n.marginBottom;i&&i.top>c&&i.bottom<m&&(s=M.scrollIntoView(o.main.head,{y:"start",yMargin:i.top-c}))}return e.dispatch(N(r,o),{effects:s}),!0}const Je=e=>at(e,!1),ge=e=>at(e,!0);function _(e,t,n){let r=e.lineBlockAt(t.head),o=e.moveToLineBoundary(t,n);if(o.head==t.head&&o.head!=(n?r.to:r.from)&&(o=e.moveToLineBoundary(t,n,!1)),!n&&o.head==r.from&&r.length){let s=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&t.head!=r.from+s&&(o=b.cursor(r.from+s))}return o}const Hn=e=>T(e,t=>_(e,t,!0)),Jn=e=>T(e,t=>_(e,t,!1)),Gn=e=>T(e,t=>_(e,t,!B(e))),Pn=e=>T(e,t=>_(e,t,B(e))),Vn=e=>T(e,t=>b.cursor(e.lineBlockAt(t.head).from,1)),Un=e=>T(e,t=>b.cursor(e.lineBlockAt(t.head).to,-1));function C(e,t){let n=xe(e.state.selection,r=>{let o=t(r);return b.range(r.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(e.state.selection)?!1:(e.dispatch(N(e.state,n)),!0)}function ct(e,t){return C(e,n=>e.moveByChar(n,t))}const ut=e=>ct(e,!B(e)),dt=e=>ct(e,B(e));function ft(e,t){return C(e,n=>e.moveByGroup(n,t))}const Fn=e=>ft(e,!B(e)),jn=e=>ft(e,B(e));function ht(e,t){return C(e,n=>e.moveVertically(n,t))}const mt=e=>ht(e,!1),pt=e=>ht(e,!0);function gt(e,t){return C(e,n=>e.moveVertically(n,t,lt(e).height))}const Ge=e=>gt(e,!1),Pe=e=>gt(e,!0),qn=e=>C(e,t=>_(e,t,!0)),Kn=e=>C(e,t=>_(e,t,!1)),Wn=e=>C(e,t=>_(e,t,!B(e))),Qn=e=>C(e,t=>_(e,t,B(e))),Xn=e=>C(e,t=>b.cursor(e.lineBlockAt(t.head).from)),Yn=e=>C(e,t=>b.cursor(e.lineBlockAt(t.head).to)),Ve=({state:e,dispatch:t})=>(t(N(e,{anchor:0})),!0),Ue=({state:e,dispatch:t})=>(t(N(e,{anchor:e.doc.length})),!0),Fe=({state:e,dispatch:t})=>(t(N(e,{anchor:e.selection.main.anchor,head:0})),!0),je=({state:e,dispatch:t})=>(t(N(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Zn=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0);function j(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,o=r.changeByRange(s=>{let{from:i,to:l}=s;if(i==l){let c=t(s);c<i?(n="delete.backward",c=Q(e,c,!1)):c>i&&(n="delete.forward",c=Q(e,c,!0)),i=Math.min(i,c),l=Math.max(l,c)}else i=Q(e,i,!1),l=Q(e,l,!0);return i==l?{range:s}:{changes:{from:i,to:l},range:b.cursor(i,i<s.head?-1:1)}});return o.changes.empty?!1:(e.dispatch(r.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?M.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Q(e,t,n){if(e instanceof M)for(let r of e.state.facet(M.atomicRanges).map(o=>o(e)))r.between(t,t,(o,s)=>{o<t&&s>t&&(t=n?s:o)});return t}const yt=(e,t,n)=>j(e,r=>{let o=r.from,{state:s}=e,i=s.doc.lineAt(o),l,c;if(n&&!t&&o>i.from&&o<i.from+200&&!/[^ \t]/.test(l=i.text.slice(0,o-i.from))){if(l[l.length-1]=="	")return o-1;let m=Ke(l,s.tabSize),f=m%ze(s)||ze(s);for(let y=0;y<f&&l[l.length-1-y]==" ";y++)o--;c=o}else c=F(i.text,o-i.from,t,t)+i.from,c==o&&i.number!=(t?s.doc.lines:1)?c+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(i.text.slice(c-i.from,o-i.from))&&(c=F(i.text,c-i.from,!1,!1)+i.from);return c}),ye=e=>yt(e,!1,!0),vt=e=>yt(e,!0,!1),kt=(e,t)=>j(e,n=>{let r=n.head,{state:o}=e,s=o.doc.lineAt(r),i=o.charCategorizer(r);for(let l=null;;){if(r==(t?s.to:s.from)){r==n.head&&s.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let c=F(s.text,r-s.from,t)+s.from,m=s.text.slice(Math.min(r,c)-s.from,Math.max(r,c)-s.from),f=i(m);if(l!=null&&f!=l)break;(m!=" "||r!=n.head)&&(l=f),r=c}return r}),bt=e=>kt(e,!1),$n=e=>kt(e,!0),er=e=>j(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),tr=e=>j(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),nr=e=>j(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),rr=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:We.of(["",""])},range:b.cursor(r.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},or=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{if(!r.empty||r.from==0||r.from==e.doc.length)return{range:r};let o=r.from,s=e.doc.lineAt(o),i=o==s.from?o-1:F(s.text,o-s.from,!1)+s.from,l=o==s.to?o+1:F(s.text,o-s.from,!0)+s.from;return{changes:{from:i,to:l,insert:e.doc.slice(o,l).append(e.doc.slice(i,o))},range:b.cursor(l)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function sr(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=Qt(e).resolveInner(t),r=n.childBefore(t),o=n.childAfter(t),s;return r&&o&&r.to<=t&&o.from>=t&&(s=r.type.prop(Xt.closedBy))&&s.indexOf(o.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(r.to,o.from))?{from:r.to,to:o.from}:null}const qe=ir(!1);function ir(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(o=>{let{from:s,to:i}=o,l=t.doc.lineAt(s),c=!e&&s==i&&sr(t,s);e&&(s=i=(i<=l.to?l:t.doc.lineAt(i)).to);let m=new jt(t,{simulateBreak:s,simulateDoubleBreak:!!c}),f=qt(m,s);for(f==null&&(f=Ke(/^\s*/.exec(t.doc.lineAt(s).text)[0],t.tabSize));i<l.to&&/\s/.test(l.text[i-l.from]);)i++;c?{from:s,to:i}=c:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let y=["",Oe(t,f)];return c&&y.push(Oe(t,m.lineIndent(l.from,-1))),{changes:{from:s,to:i,insert:We.of(y)},range:b.cursor(s+1+y[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}const lr=[{key:"Ctrl-b",run:tt,shift:ut,preventDefault:!0},{key:"Ctrl-f",run:nt,shift:dt},{key:"Ctrl-p",run:st,shift:mt},{key:"Ctrl-n",run:it,shift:pt},{key:"Ctrl-a",run:Vn,shift:Xn},{key:"Ctrl-e",run:Un,shift:Yn},{key:"Ctrl-d",run:vt},{key:"Ctrl-h",run:ye},{key:"Ctrl-k",run:er},{key:"Ctrl-Alt-h",run:bt},{key:"Ctrl-o",run:rr},{key:"Ctrl-t",run:or},{key:"Ctrl-v",run:ge}],ar=[{key:"ArrowLeft",run:tt,shift:ut,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Rn,shift:Fn,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Gn,shift:Wn,preventDefault:!0},{key:"ArrowRight",run:nt,shift:dt,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:wn,shift:jn,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Pn,shift:Qn,preventDefault:!0},{key:"ArrowUp",run:st,shift:mt,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ve,shift:Fe},{mac:"Ctrl-ArrowUp",run:Je,shift:Ge},{key:"ArrowDown",run:it,shift:pt,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ue,shift:je},{mac:"Ctrl-ArrowDown",run:ge,shift:Pe},{key:"PageUp",run:Je,shift:Ge},{key:"PageDown",run:ge,shift:Pe},{key:"Home",run:Jn,shift:Kn,preventDefault:!0},{key:"Mod-Home",run:Ve,shift:Fe},{key:"End",run:Hn,shift:qn,preventDefault:!0},{key:"Mod-End",run:Ue,shift:je},{key:"Enter",run:qe,shift:qe},{key:"Mod-a",run:Zn},{key:"Backspace",run:ye,shift:ye,preventDefault:!0},{key:"Delete",run:vt,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bt,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:$n,preventDefault:!0},{mac:"Mod-Backspace",run:tr,preventDefault:!0},{mac:"Mod-Delete",run:nr,preventDefault:!0}].concat(lr.map(e=>({mac:e.key,run:e.run,shift:e.shift})));var cr=w("<button><!></button>");function ur(e,t){ve(t,!0);let n=g(t,"class",3,void 0);const r=we("common.minimize"),o=we("common.maximize"),s=G(()=>t.maximized?r:o),i=G(()=>t.maximized?"minimize":"expand");var l=cr();l.__click=function(...m){var f;(f=t.onclick)==null||f.apply(this,m)};var c=z(l);yn(c,{get title(){return a(s)},get name(){return a(i)}}),E(l),Y(m=>U(l,1,m),[()=>V(R("surface-interactive-secondary m-1 border border-[transparent] bg-transparent p-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/70",n()))]),O(e,l),ke()}be(["click"]);var dr=w("<div><!> <div><!> <!></div></div>");function fr(e,t){ve(t,!0);let n=g(t,"maximized",15,!1),r=g(t,"class",3,void 0),o=g(t,"enabled",3,!0),s=g(t,"actions",3,void 0),i=v=>{n()&&v.key==="Escape"&&n(!1)};const l=()=>{n(!n())},c=v=>{n()&&v.currentTarget instanceof Element&&v.relatedTarget instanceof Element&&!v.currentTarget.contains(v.relatedTarget)&&n(!1)};var m=dr();wt("keydown",Ot,i),m.__focusout=c;var f=z(m);he(f,()=>t.children);var y=P(f,2),H=z(y);he(H,()=>s()??me);var q=P(H,2);{var L=v=>{ur(v,{class:"m-0 rounded-full text-secondary",onclick:l,get maximized(){return n()}})};X(q,v=>{o()&&v(L)})}E(y),E(m),Y((v,te)=>{U(m,1,v),U(y,1,te)},[()=>V(R("relative",n()&&"fixed bottom-0 left-0 right-0 top-0 z-100 h-full w-full overflow-y-auto bg-white dark:bg-black",r())),()=>V(R("absolute",n()&&"fixed","right-2 top-2 flex items-center"))]),O(e,m),ke()}be(["focusout"]);function hr(e,t){if(!e)return"";let n="";try{const r=bn(e);n=xn(r,void 0,t)}catch{n=e}return n}var mr=w("<button> </button>"),pr=w('<div class="flex flex-row items-center justify-between border-b border-subtle bg-code-block px-3"><div class="flex flex-row items-center gap-4"></div> <div class="flex flex-row items-center gap-4"><!> <!></div></div>'),gr=w("<div></div>"),yr=w("<div><!> <!></div>");function wr(e,t){ve(t,!0);const n=()=>Ie(kn,"$useDarkMode",o),r=()=>Ie(At,"$copied",o),[o,s]=Ut(),i=(d,h=me)=>{var p=mr();p.__click=()=>Se(h());var x=z(p,!0);E(p),Y(A=>{U(p,1,A),Ht(x,h())},[()=>V(R("h-full border-b-2 border-transparent py-2",h()===Se()?"border-brand":""))]),O(d,p)};var l;let c=g(t,"language",3,"json"),m=g(t,"class",3,void 0),f=g(t,"editable",3,!1),y=g(t,"copyable",3,!0),H=g(t,"copyIconTitle",3,""),q=g(t,"copySuccessIconTitle",3,""),L=g(t,"inline",3,!1),v=g(t,"testId",3,void 0),te=g(t,"minHeight",3,void 0),ne=g(t,"maxHeight",3,void 0),xt=g(t,"label",3,""),re=g(t,"onchange",3,void 0),Se=g(t,"activeTab",15),St=Ft(t,["$$slots","$$events","$$legacy","content","language","class","editable","copyable","copyIconTitle","copySuccessIconTitle","inline","testId","minHeight","maxHeight","label","onchange","tabs","activeTab","headerActions"]),oe=ce(void 0),u=ce(void 0);const{copy:Bt,copied:At}=vn(),Be=(d,h,p)=>h==="json"?hr(d,p?0:2):d,Ae=()=>Be(t.content,c(),L()),se=()=>{var d;const h=(d=a(u)===null||a(u)===void 0?void 0:a(u).state)===null||d===void 0?void 0:d.doc;return h?Be(h.toString(),c(),L()):""},De=d=>{var h;const p=(h=a(u)===null||a(u)===void 0?void 0:a(u).state)===null||h===void 0?void 0:h.doc;p&&p.toString()!==d&&(a(u)===null||a(u)===void 0||a(u).dispatch({changes:{from:0,to:p.length,insert:d}}))},Dt=1e5,Ce=()=>{if(!a(u)||c()!=="json")return;const d=a(u).state.doc.length;if(!(d<Dt))try{an(a(u).state,d,2e3)}catch{}},K=G(()=>!!t.tabs);let ie=ce(!1);const le=G(()=>(l=ne()&&!a(K)&&(a(u)===null||a(u)===void 0?void 0:a(u).contentHeight)>ne())!==null&&l!==void 0?l:!1),Me=zt(new cn),Ct=[en.of([...ar,...Nn]),tn(un,{fallback:!0}),nn.of("  "),rn(),on(),sn(),ln()];let Te=G(()=>[dn(n(),a(K)),fn({hasActions:y()||a(le)}),Ne.readOnly.of(!f()),M.editable.of(f()),M.contentAttributes.of({"aria-label":xt()}),hn(f()),mn(c()),L()?void 0:M.lineWrapping,!L()&&!f()?pn():void 0,gn({maxHeight:ne(),minHeight:te(),maximized:a(ie)})].filter(d=>d!=null));const Mt=()=>new M({parent:a(oe),state:Ne.create({doc:Ae(),extensions:[Ct,Me.of(a(Te))]}),dispatch(d){a(u).update([d]),d.docChanged&&(re()===null||re()===void 0||re()(se()))}});ae(()=>{a(u)===null||a(u)===void 0||a(u).dispatch({effects:Me.reconfigure(a(Te))})}),ae(()=>{var d,h;a(le)?(d=a(u)===null||a(u)===void 0?void 0:a(u).scrollDOM)===null||d===void 0||d.setAttribute("tabindex","0"):(h=a(u)===null||a(u)===void 0?void 0:a(u).scrollDOM)===null||h===void 0||h.removeAttribute("tabindex")}),ae(()=>{var d;t.content,c(),L(),f(),a(u)===null||a(u)===void 0||a(u).hasFocus;const h=(d=a(u)===null||a(u)===void 0?void 0:a(u).state)===null||d===void 0?void 0:d.doc;if(!h)return;if(!(f()&&(a(u)===null||a(u)===void 0?void 0:a(u).hasFocus))){const x=Ae();h.toString()!==x&&De(x),Ce()}});const Le=d=>{Bt(d,se())},Ee=()=>{De(se())};It(()=>(ue(u,Mt(),!0),a(u).contentDOM.onblur=Ee,Ce(),()=>{a(u)===null||a(u)===void 0||a(u).destroy()}));var W=yr(),_e=z(W);{var Tt=d=>{var h=pr(),p=z(h);Jt(p,20,()=>t.tabs,I=>I,(I,_t)=>{i(I,()=>_t)}),E(p);var x=P(p,2),A=z(x);he(A,()=>t.headerActions??me);var J=P(A,2);{var Et=I=>{Re(I,{get copyIconTitle(){return H()},get copySuccessIconTitle(){return q()},class:"m-0 rounded-full text-secondary",get copied(){return r()},$$events:{click:Le}})};X(J,I=>{y()&&I(Et)})}E(x),E(h),O(d,h)};X(_e,d=>{t.tabs&&t.tabs.length>0&&d(Tt)})}var Lt=P(_e,2);fr(Lt,{get enabled(){return a(le)},get maximized(){return a(ie)},set maximized(h){ue(ie,h,!0)},actions:h=>{var p=Nt(),x=Rt(p);{var A=J=>{Re(J,{get copyIconTitle(){return H()},get copySuccessIconTitle(){return q()},class:"m-0 rounded-full text-secondary",get copied(){return r()},$$events:{click:Le}})};X(x,J=>{y()&&!a(K)&&J(A)})}O(h,p)},children:(h,p)=>{var x=gr();Gt(x,A=>({class:A,"data-testid":v(),...St,onblur:Ee,[Pt]:{inline:L(),editable:f(),readOnly:!f()}}),[()=>R("h-full",m())]),Vt(x,A=>ue(oe,A),()=>a(oe)),O(h,x)},$$slots:{actions:!0,default:!0}}),E(W),Y(d=>U(W,1,d),[()=>V(R("min-w-[80px] grow",a(K)&&["border border-subtle"]))]),O(e,W),ke(),s()}be(["click"]);export{wr as C};
