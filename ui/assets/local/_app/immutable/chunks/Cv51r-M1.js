import"./CWj6FrbW.js";import{o as C}from"./D12POdU-.js";import{p as P,al as b,am as _,s as x,g as l,i as E,c as T,d as U,e as V,b as D}from"./yn9lut7I.js";import{p as I,a as u,s as W}from"./C6jR5PNA.js";import{p as w}from"./BoDOIM00.js";import{a as B}from"./j5XEhUQM.js";import{c as M,d as j}from"./DStRFmk_.js";import{a as q,b as z,g as F}from"./Ch7aapqc.js";import{s as m}from"./rlUF3pky.js";function X(g,e){P(e,!0);const t=()=>u(w,"$page",i),v=()=>u(B,"$authUser",i),[i,y]=W();let a=I(e,"key",3,""),f=a()&&(!(e.value===null||e.value===void 0)&&e.value[a()])?e.value[a()]:e.value,d=b(_(m(f)));C(()=>{p(e.value)});const p=async k=>{var n;const A={...t().data.settings,codec:{...(n=t().data.settings)===null||n===void 0?void 0:n.codec,endpoint:F(t().data.settings),passAccessToken:z(t().data.settings),includeCredentials:q(t().data.settings)}};try{const r=await M(k,t().params.namespace,A,v().accessToken),s=j(r);let o=a()&&(s==null?void 0:s[a()])?s[a()]:s;Array.isArray(o)&&o.length===1&&(o=o[0]),x(d,m(o),!0),e.onDecode&&e.onDecode(l(d))}catch{console.error("Could not decode payloads")}};var c=E(),h=T(c);U(h,()=>e.children,()=>l(d)),V(g,c),D(),y()}export{X as P};
