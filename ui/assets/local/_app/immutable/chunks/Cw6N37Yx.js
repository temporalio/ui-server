import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{a as Re,w as Se}from"./DIJxQKhU.js";import{p as me,i as O,c as S,e as C,b as ve,M as r,I as l,m as h,l as U,a as Ke,f as pe,t as W,g as e,s as y,o as s,j as x,h as m,r as _,n as oe,k as Me}from"./DPYmeJXN.js";import{s as R}from"./DtOlEDQN.js";import{s as X}from"./B2YVu2ra.js";import{i as ge}from"./VvTteBni.js";import{p as f,s as fe,a as Qe,b as ie}from"./BkgVXhYA.js";import{i as je}from"./DqIiO-ir.js";import{p as Ae}from"./CEsfqZ2A.js";import{A as Ee}from"./D7XaJJEl.js";import{C as ue}from"./DBWXK_7b.js";import{I as de}from"./CrdzKrnI.js";import{M as Fe}from"./G-qIKhVs.js";import{t}from"./DEjs8ZrU.js";function He(j,n){me(n,!1);const A=()=>Qe(Ae,"$page",E),[E,K]=fe();let $=f(n,"isCloud",8,!1);ge();var k=O(),q=S(k);{var I=v=>{var u=O(),p=S(u);X(p,n,"default",{},null),C(v,u)},L=v=>{var u=O(),p=S(u);X(p,n,"fallback",{},null),C(v,u)};je(q,v=>{r($()),A(),l(()=>{var u,p,w;return $()||((w=(p=(u=A().data)==null?void 0:u.settings)==null?void 0:p.runtimeEnvironment)==null?void 0:w.isCloud)})?v(I):v(L,!1)})}C(j,k),ve(),K()}const xe={spec:{name:"",descriptionString:"",target:{worker:{namespace:"",taskQueue:""}},allowedCallerNamespaces:[]}},ce=Se(xe);var Ve=pe('<div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!>',1),ze=pe('<div class="flex w-full flex-col gap-4 xl:w-1/2"><!> <div class="flex flex-col gap-0"><p class="text-base text-primary"> </p> <p class="text-xs text-secondary"> </p></div> <!> <!> <!> <div class="flex flex-col gap-2"><p class="text-sm font-medium">Description</p> <!> <p class="text-xs text-secondary">Do not include sensitive data.</p></div> <!></div> <!>',1);function nt(j,n){me(n,!1);const[A,E]=fe(),K=h(),$=h();var k,q,I,L,v,u,p,w,F;let o=f(n,"endpoint",8,void 0),_e=f(n,"targetNamespaceList",24,()=>[]),Y=f(n,"callerNamespaceList",24,()=>[]),P=f(n,"error",8,void 0),be=f(n,"nameDisabled",8,!1),he=f(n,"isCloud",8,!0),ye=f(n,"nameHintText",8),Z=f(n,"nameRegexPattern",8),b=h(((k=o()===null||o()===void 0?void 0:o().spec)===null||k===void 0?void 0:k.name)||""),M=h(((q=o()===null||o()===void 0?void 0:o().spec)===null||q===void 0?void 0:q.descriptionString)||""),T=h(((v=(L=(I=o()===null||o()===void 0?void 0:o().spec)===null||I===void 0?void 0:I.target)===null||L===void 0?void 0:L.worker)===null||v===void 0?void 0:v.namespace)||""),D=h(((w=(p=(u=o()===null||o()===void 0?void 0:o().spec)===null||u===void 0?void 0:u.target)===null||p===void 0?void 0:p.worker)===null||w===void 0?void 0:w.taskQueue)||""),N=h(((F=o()===null||o()===void 0?void 0:o().spec)===null||F===void 0?void 0:F.allowedCallerNamespaces)||[]);const $e=(a,d,i,c,g)=>{ie(ce,{spec:{name:a,descriptionString:d,target:{worker:{namespace:i,taskQueue:c}},allowedCallerNamespaces:g}})};Re(()=>{ie(ce,xe)}),U(()=>(e(b),e(M),e(T),e(D),e(N)),()=>{$e(e(b),e(M),e(T),e(D),e(N))}),U(()=>r(Y()),()=>{y(K,Y().map(a=>({value:a.namespace,label:a.namespace})))}),U(()=>r(Z()),()=>{y($,a=>Z().test(a))}),Ke(),ge();var ee=ze(),H=S(ee),te=x(H);{let a=s(()=>(e(b),e($),l(()=>!e(b)||!e($)(e(b))))),d=s(()=>(r(t),l(()=>t("nexus.endpoint-name")))),i=s(()=>(r(t),l(()=>t("nexus.endpoint-name-placeholder"))));de(te,{required:!0,get disabled(){return be()},get error(){return e(a)},get hintText(){return ye()},get label(){return e(d)},id:"name",maxLength:255,get placeholder(){return e(i)},get value(){return e(b)},set value(c){y(b,c)},$$legacy:!0})}var V=m(te,2),z=x(V),ke=x(z,!0);_(z);var ae=m(z,2),we=x(ae,!0);_(ae),_(V);var re=m(V,2);{let a=s(()=>(r(t),l(()=>t("nexus.target-namespace")))),d=s(()=>(r(t),l(()=>t("common.no-results")))),i=s(()=>!!e(T)),c=s(()=>(r(t),l(()=>t("nexus.select-namespace"))));ue(re,{get label(){return e(a)},get noResultsText(){return e(d)},get valid(){return e(i)},error:"Please select a target Namespace.",required:!0,id:"target-namespace",get placeholder(){return e(c)},leadingIcon:"namespace-switcher",get options(){return _e()},optionValueKey:"namespace",minSize:32,get value(){return e(T)},set value(g){y(T,g)},$$legacy:!0})}var le=m(re,2);{let a=s(()=>!e(D)),d=s(()=>(r(t),l(()=>t("common.task-queue")))),i=s(()=>(r(t),l(()=>t("nexus.task-queue-placeholder"))));de(le,{required:!0,get error(){return e(a)},get label(){return e(d)},id:"task-queue",get placeholder(){return e(i)},get value(){return e(D)},set value(c){y(D,c)},$$legacy:!0})}var se=m(le,2);He(se,{get isCloud(){return he()},children:(a,d)=>{var i=Ve(),c=S(i),g=x(c),Q=x(g,!0);_(g);var ne=m(g,2),Ie=x(ne,!0);_(ne),_(c);var Le=m(c,2);{let G=s(()=>(r(t),l(()=>t("nexus.allowed-caller-namespaces")))),J=s(()=>(r(t),l(()=>t("common.no-results")))),Pe=s(()=>(e(N),l(()=>!!e(N).length))),Te=s(()=>(r(t),l(()=>t("nexus.select-namespaces"))));ue(Le,{id:"caller-namespace-filter-menu",multiselect:!0,displayChips:!1,get options(){return e(K)},get label(){return e(G)},leadingIcon:"search",get noResultsText(){return e(J)},get valid(){return e(Pe)},error:"Please select at least one Namespace.",get placeholder(){return e(Te)},optionValueKey:"value",optionLabelKey:"label",get value(){return e(N)},set value(De){y(N,De)},$$legacy:!0})}W((G,J)=>{R(Q,G),R(Ie,J)},[()=>(r(t),l(()=>t("nexus.access-policy"))),()=>(r(t),l(()=>t("nexus.allowed-caller-namespaces-description")))]),C(a,i)},$$slots:{default:!0}});var B=m(se,2),Ne=m(x(B),2);Fe(Ne,{get content(){return e(M)},set content(a){y(M,a)},$$legacy:!0}),oe(2),_(B);var Ce=m(B,2);X(Ce,n,"footer",{},null),_(H);var qe=m(H,2);{let a=s(()=>(r(P()),l(()=>{var i;return(i=P())==null?void 0:i.statusText}))),d=s(()=>!P());Ee(qe,{get title(){return e(a)},intent:"error",get hidden(){return e(d)},children:(i,c)=>{oe();var g=Me();W(()=>R(g,(r(P()),l(()=>{var Q;return(Q=P())==null?void 0:Q.message})))),C(i,g)},$$slots:{default:!0}})}W((a,d)=>{R(ke,a),R(we,d)},[()=>(r(t),l(()=>t("nexus.target"))),()=>(r(t),l(()=>t("nexus.target-description")))]),C(j,ee),ve(),E()}export{nt as N,ce as e};
