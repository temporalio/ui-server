import"./CWj6FrbW.js";import{p as bt,ax as H,ay as rt,f as W,j as o,h as r,s as w,g as t,v as a,r as s,n as St,k as ht,t as O,e as h,b as kt,c as ot,u as wt,i as Et,d as Pe,q as Ae}from"./DZ1-1a5q.js";import{s as k,e as Ce}from"./DxwvfIkW.js";import{i as F}from"./DnKg3jxh.js";import{k as le}from"./DhxkE7tO.js";import{p as Ot,s as De,a as re}from"./TaaIktnz.js";import{p as Kt}from"./CxQ66pXP.js";import{s as Se}from"./B3h3Bc2r.js";import{B as Nt}from"./sS3hQGPy.js";import{T as oe}from"./DM1_LFNw.js";import{t as n}from"./DEjs8ZrU.js";import{C as Mt}from"./1SferHEQ.js";import{D as Ne,a as Me}from"./DotNSDJw.js";import{I as ut}from"./Cxp5pilr.js";import{N as ge}from"./DK7n4mk8.js";import{L as lt}from"./BO02Afj1.js";import{r as Vt,a as se,i as Oe,b as Re}from"./CTAWkTpv.js";import{s as Gt}from"./ikbOq2O5.js";import{m as He}from"./HVeMsM_a.js";import{t as ce}from"./Cc_MFLKO.js";import{t as Jt,w as Ue}from"./D3HmRl1U.js";import{g as Xt}from"./BrqVdl23.js";import{n as _t,e as Dt,d as gt,m as Fe,o as We}from"./CrZfxCV7.js";import{M as ve}from"./C3T1ts5q.js";import{A as we}from"./ClzYi2Ei.js";import{P as he}from"./x8v7btQu.js";import{t as Be}from"./4Dr_hdgK.js";import{W as Le}from"./DPVSJDnS.js";import{A as qe}from"./jw7sBMoL.js";import{B as ze}from"./CqqsKTDn.js";import{C as ne}from"./DRZCEzQy.js";import{I as Qe}from"./BwERH40W.js";import{c as je}from"./DgcHeW01.js";import{f as Ee,c as Ke,a as Ve}from"./DsWVhdk8.js";import{o as Ge}from"./C8ejR22J.js";var de=(v=>(v[v.Pause=0]="Pause",v[v.Unpause=1]="Unpause",v[v.Update=2]="Update",v[v.Reset=3]="Reset",v))(de||{});const Je=({date:v,now:e=Date.now(),negativeDefault:l})=>{if(!v)return"";const y=String(v);try{const f=(Number(new Date(y))-e)/1e3;return l!==void 0&&f<0?l:isNaN(f)?"":`${f.toFixed(0)}s`}catch{return""}},Yt=async(v,e)=>{var d,f;const l=v.replace("/activities-deprecated/","/activities/"),y=(f=(d=Kt.data)==null?void 0:d.settings)==null?void 0:f.version;if(y&&!He("2.45.3",y))return se(l,e);try{return await se(v,{...e,notifyOnError:!1})}catch(T){if(Oe(T)||Re(T))return se(l,e);throw T}},Xe=async({namespace:v,execution:e,id:l,reason:y,type:d,identity:f})=>{const T=Vt("activity.pause",{namespace:v});return Yt(T,{options:{method:"POST",body:Gt({execution:e,reason:y,id:l,type:d,...f&&{identity:f}})}})},Ye=async({namespace:v,execution:e,id:l,type:y,identity:d})=>{const f=Vt("activity.unpause",{namespace:v});return Yt(f,{options:{method:"POST",body:Gt({execution:e,id:l,type:y,...d&&{identity:d}})}})},Ze=async({namespace:v,execution:e,id:l,type:y,resetHeartbeat:d,identity:f})=>{const T=Vt("activity.reset",{namespace:v});return Yt(T,{options:{method:"POST",body:Gt({execution:e,id:l,type:y,resetHeartbeat:d,...f&&{identity:f}})}})},$e=async({namespace:v,execution:e,id:l,type:y,activityOptions:d,identity:f})=>{const T=Vt("activity.update-options",{namespace:v});return Yt(T,{options:{method:"POST",body:Gt({execution:e,id:l,type:y,activityOptions:d,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts",...f&&{identity:f}})}})};var ta=W(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function ea(v,e){bt(e,!0);var l,y,d,f,T,g,I,Q,A,M,E,R,b,U;let _=Ot(e,"open",15),C=a(()=>e.activity.activityId),K=a(()=>e.activity.activityType),B=H(rt((y=(l=e.activity.activityOptions)===null||l===void 0?void 0:l.taskQueue)===null||y===void 0?void 0:y.name)),j=H(rt(_t(String((d=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||d===void 0?void 0:d.scheduleToCloseTimeout)))),D=H(rt(_t(String((f=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||f===void 0?void 0:f.scheduleToStartTimeout)))),L=H(rt(_t(String((T=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||T===void 0?void 0:T.startToCloseTimeout)))),X=H(rt(_t(String((g=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||g===void 0?void 0:g.heartbeatTimeout)))),q=H(rt((Q=(I=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||I===void 0?void 0:I.retryPolicy)===null||Q===void 0?void 0:Q.maximumAttempts)),$=H(rt((M=(A=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||A===void 0?void 0:A.retryPolicy)===null||M===void 0?void 0:M.backoffCoefficient)),Y=H(rt(_t(String((R=(E=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||E===void 0?void 0:E.retryPolicy)===null||R===void 0?void 0:R.initialInterval)))),st=rt(_t(String((U=(b=e.activity===null||e.activity===void 0?void 0:e.activity.activityOptions)===null||b===void 0?void 0:b.retryPolicy)===null||U===void 0?void 0:U.maximumInterval))),G=H(!1);const it=a(()=>({taskQueue:{name:t(B)},scheduleToCloseTimeout:gt(t(j)),scheduleToStartTimeout:gt(t(D)),startToCloseTimeout:gt(t(L)),heartbeatTimeout:gt(t(X)),retryPolicy:{maximumAttempts:t(q),initialInterval:gt(t(Y)),backoffCoefficient:t($),maximumInterval:gt(st)}})),ct=Xt(),vt=()=>{_(!1)},Rt=async mt=>{mt.preventDefault();try{await $e({namespace:e.namespace,execution:e.execution,id:t(G)?void 0:t(C),type:t(G)?t(K):void 0,activityOptions:t(it),identity:ct}),Jt(de.Update),ce.push({variant:"success",message:`Options for Activity ${t(C)} have been updated.`})}catch(nt){console.error("Error updating activity options:",nt),ce.push({variant:"error",message:`Options for Activity ${t(C)} have been failed to update: ${nt==null?void 0:nt.message}`,duration:5e3})}finally{vt()}};{let mt=a(()=>n("common.close"));Ne(v,{get open(){return _()},onClick:vt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return t(mt)},class:"w-[480px]",children:(nt,Zt)=>{Me(nt,{get title(){return`Update Activity ${e.activity.activityId??""}`},children:($t,te)=>{var ft=ta(),yt=o(ft),Ht=o(yt);lt(Ht,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var Tt=r(Ht,4),Ut=o(Tt);{let N=a(()=>isNaN(Number(t(X))));ut(Ut,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(N)},get value(){return t(X)},set value(J){w(X,J,!0)}})}var It=r(Ut,2),ee=o(It,!0);s(It),s(Tt),s(yt);var Pt=r(yt,2),Ft=o(Pt);lt(Ft,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var Wt=r(Ft,4);ge(Wt,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return t($)},set value(N){w($,N,!0)}}),s(Pt);var pt=r(Pt,2),Bt=o(pt);lt(Bt,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var Lt=r(Bt,4),qt=o(Lt);{let N=a(()=>isNaN(Number(t(Y))));ut(qt,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(N)},get value(){return t(Y)},set value(J){w(Y,J,!0)}})}var i=r(qt,2),m=o(i,!0);s(i),s(Lt),s(pt);var c=r(pt,2),S=o(c);lt(S,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var z=r(S,4);ge(z,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return t(q)},set value(N){w(q,N,!0)}}),s(c);var u=r(c,2),x=o(u);lt(x,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var p=r(x,4),P=o(p);{let N=a(()=>isNaN(Number(t(j))));ut(P,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(N)},get value(){return t(j)},set value(J){w(j,J,!0)}})}var V=r(P,2),tt=o(V,!0);s(V),s(p),s(u);var et=r(u,2),at=o(et);lt(at,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var xt=r(at,4),zt=o(xt);{let N=a(()=>isNaN(Number(t(D))));ut(zt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(N)},get value(){return t(D)},set value(J){w(D,J,!0)}})}var Qt=r(zt,2),ae=o(Qt,!0);s(Qt),s(xt),s(et);var At=r(et,2),jt=o(At);lt(jt,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var ue=r(jt,4),me=o(ue);{let N=a(()=>isNaN(Number(t(L))));ut(me,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return t(N)},get value(){return t(L)},set value(J){w(L,J,!0)}})}var fe=r(me,2),be=o(fe,!0);s(fe),s(ue),s(At);var ie=r(At,2),ye=o(ie);lt(ye,{for:"task-queue-name",label:"Task Queue Name"});var ke=r(ye,2);ut(ke,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return t(B)},set value(N){w(B,N,!0)}}),s(ie);var pe=r(ie,2);{let N=a(()=>n("activities.apply-to-all-activity-types",{type:t(K)}));Mt(pe,{get label(){return t(N)},get checked(){return t(G)},set checked(J){w(G,J,!0)}})}var xe=r(pe,2),_e=o(xe);Nt(_e,{type:"button",variant:"ghost",size:"sm",$$events:{click:vt},children:(N,J)=>{St();var dt=ht();O(Ct=>k(dt,Ct),[()=>n("common.cancel")]),h(N,dt)},$$slots:{default:!0}});var Te=r(_e,2);Nt(Te,{type:"submit",variant:"primary",size:"sm",children:(N,J)=>{St();var dt=ht();O(Ct=>k(dt,Ct),[()=>n("common.save")]),h(N,dt)},$$slots:{default:!0}}),s(xe),s(ft),O((N,J,dt,Ct,Ie)=>{k(ee,N),k(m,J),k(tt,dt),k(ae,Ct),k(be,Ie)},[()=>Dt(t(X)),()=>Dt(t(Y)),()=>Dt(t(j)),()=>Dt(t(D)),()=>Dt(t(L))]),Ce("submit",ft,Rt),h($t,ft)},$$slots:{default:!0}})},$$slots:{default:!0}})}kt()}var aa=W('<h3 slot="title"> </h3>'),ia=W('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ra(v,e){bt(e,!0);let l=Ot(e,"open",15),y=a(()=>e.activity.activityId),d=a(()=>e.activity.activityType),f=H(""),T=!1,g=H(""),I=H(!1);const Q=Xt(),A=()=>{l(!1),w(g,""),w(I,!1)},M=async()=>{await Xe({namespace:e.namespace,execution:e.execution,id:t(I)?void 0:t(y),reason:t(g),type:t(I)?t(d):void 0,identity:Q}),Jt(we.Pause),A()};{let E=a(()=>n("workflows.pause")),R=a(()=>n("common.cancel"));ve(v,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",loading:T,get confirmText(){return t(E)},get cancelText(){return t(R)},confirmType:"destructive",get error(){return t(f)},set error(b){w(f,b,!0)},get open(){return l()},set open(b){l(b)},$$events:{cancelModal:A,confirmModal:M},$$slots:{title:(b,U)=>{var _=aa(),C=o(_,!0);s(_),O(K=>k(C,K),[()=>n("activities.pause-modal-confirmation",{activityId:e.activity.id})]),h(b,_)},content:(b,U)=>{var _=ia(),C=o(_),K=o(C,!0);s(C);var B=r(C,2);{let D=a(()=>n("common.reason-placeholder")),L=a(()=>n("common.reason"));ut(B,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return t(D)},get label(){return t(L)},get value(){return t(g)},set value(X){w(g,X,!0)}})}var j=r(B,2);{let D=a(()=>n("activities.pause-all-activity-types",{type:t(d)??""}));Mt(j,{get label(){return t(D)},get checked(){return t(I)},set checked(L){w(I,L,!0)}})}s(_),O(D=>k(K,D),[()=>n("activities.pause-modal-description")]),h(b,_)}}})}kt()}var oa=W('<h3 slot="title"> </h3>'),sa=W('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function na(v,e){bt(e,!0);let l=Ot(e,"open",15),y=a(()=>e.activity.activityId),d=a(()=>e.activity.activityType),f=H(""),T=!1,g=H(!1),I=H(!1);const Q=Xt(),A=()=>{l(!1),w(g,!1),w(I,!1)},M=async()=>{await Ze({namespace:e.namespace,execution:e.execution,id:t(g)?void 0:t(y),resetHeartbeat:t(I),type:t(g)?t(d):void 0,identity:Q}),Jt(we.Reset),ce.push({variant:"success",message:n("activities.reset-success",{activityId:t(y)})}),A()};{let E=a(()=>n("workflows.reset")),R=a(()=>n("common.cancel"));ve(v,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",loading:T,get confirmText(){return t(E)},get cancelText(){return t(R)},confirmType:"destructive",get error(){return t(f)},set error(b){w(f,b,!0)},get open(){return l()},set open(b){l(b)},$$events:{cancelModal:A,confirmModal:M},$$slots:{title:(b,U)=>{var _=oa(),C=o(_,!0);s(_),O(K=>k(C,K),[()=>n("activities.reset-modal-confirmation",{activityId:e.activity.id})]),h(b,_)},content:(b,U)=>{var _=sa(),C=o(_),K=o(C,!0);s(C);var B=r(C,2);{let D=a(()=>n("activities.apply-to-all-activity-types",{type:t(d)}));Mt(B,{get label(){return t(D)},get checked(){return t(g)},set checked(L){w(g,L,!0)}})}var j=r(B,2);{let D=a(()=>n("activities.reset-heartbeat-details"));Mt(j,{get label(){return t(D)},get checked(){return t(I)},set checked(L){w(I,L,!0)}})}s(_),O(D=>k(K,D),[()=>n("activities.reset-modal-description")]),h(b,_)}}})}kt()}var la=W('<h3 slot="title"> </h3>'),ca=W('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function va(v,e){bt(e,!0);let l=Ot(e,"open",15),y=a(()=>e.activity.activityId),d=a(()=>e.activity.activityType),f=H(""),T=!1,g=H(!1);const I=Xt(),Q=()=>{l(!1),w(g,!1)},A=async()=>{await Ye({namespace:e.namespace,execution:e.execution,id:t(g)?void 0:t(y),type:t(g)?t(d):void 0,identity:I}),Jt(de.Unpause),Q()};{let M=a(()=>n("workflows.unpause")),E=a(()=>n("common.cancel"));ve(v,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",loading:T,get confirmText(){return t(M)},get cancelText(){return t(E)},confirmType:"destructive",get error(){return t(f)},set error(R){w(f,R,!0)},get open(){return l()},set open(R){l(R)},$$events:{cancelModal:Q,confirmModal:A},$$slots:{title:(R,b)=>{var U=la(),_=o(U,!0);s(U),O(C=>k(_,C),[()=>n("activities.pause-modal-confirmation",{activityId:e.activity.id})]),h(R,U)},content:(R,b)=>{var U=ca(),_=o(U),C=o(_,!0);s(_);var K=r(_,2);{let B=a(()=>n("activities.unpause-all-activity-types",{type:t(d)}));Mt(K,{get label(){return t(B)},get checked(){return t(g)},set checked(j){w(g,j,!0)}})}s(U),O(B=>k(C,B),[()=>n("activities.unpause-modal-description")]),h(R,U)}}})}kt()}var da=W("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function ua(v,e){bt(e,!0);let l=Ot(e,"class",3,"");const y=a(()=>Kt.params),d=a(()=>t(y).namespace),f=a(()=>t(y).workflow),T=a(()=>t(y).run),g=a(()=>({workflowId:t(f),runId:t(T)}));let I=H(!1),Q=H(!1),A=H(!1),M=H(!1);const E=async()=>{e.activity.paused?w(Q,!0):w(I,!0)},R=()=>{w(A,!0)},b=()=>{w(M,!0)};var U=da(),_=ot(U),C=o(_);{let q=a(()=>e.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");oe(C,{bottomLeft:!0,width:200,get text(){return t(q)},children:($,Y)=>{{let st=a(()=>e.activity.paused?"play":"pause");Nt($,{variant:"secondary",size:"sm",get leadingIcon(){return t(st)},$$events:{click:E},children:(G,it)=>{St();var ct=ht();O(vt=>k(ct,vt),[()=>e.activity.paused?n("workflows.unpause"):n("workflows.pause")]),h(G,ct)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var K=r(C,2);oe(K,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(q,$)=>{Nt(q,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:b},children:(Y,st)=>{St();var G=ht();O(it=>k(G,it),[()=>n("common.update")]),h(Y,G)},$$slots:{default:!0}})},$$slots:{default:!0}});var B=r(K,2);oe(B,{bottom:!0,width:200,text:"Reset this Activity.",children:(q,$)=>{Nt(q,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:R},children:(Y,st)=>{St();var G=ht();O(it=>k(G,it),[()=>n("workflows.reset")]),h(Y,G)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(_);var j=r(_,2);ra(j,{get namespace(){return t(d)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(I)},set open(q){w(I,q,!0)}});var D=r(j,2);va(D,{get namespace(){return t(d)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(Q)},set open(q){w(Q,q,!0)}});var L=r(D,2);na(L,{get namespace(){return t(d)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(A)},set open(q){w(A,q,!0)}});var X=r(L,2);le(X,()=>t(M),q=>{ea(q,{get namespace(){return t(d)},get execution(){return t(g)},get activity(){return e.activity},get open(){return t(M)},set open($){w(M,$,!0)}})}),O(()=>Se(_,1,`flex items-center gap-2 ${l()??""}`)),h(v,U),kt()}const ma=(v,e,l)=>!v.disableWriteActions&&!e.namespaceWriteDisabled(l)&&!e.isActivityCommandsDisabled&&!v.activityCommandsDisabled,Z=(v,e=wt,l=wt)=>{var y=fa(),d=o(y),f=o(d,!0);s(d);var T=r(d,2),g=o(T);{var I=A=>{var M=ht();O(()=>k(M,l())),h(A,M)},Q=A=>{var M=Et(),E=ot(M);Pe(E,()=>l()??wt),h(A,M)};F(g,A=>{typeof l()=="string"||typeof l()=="number"?A(I):A(Q,!1)})}s(T),s(y),O(()=>k(f,e())),h(v,y)};var fa=W('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),ya=W('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),pa=W('<p class="text-sm text-secondary/80"> </p> <!>',1),xa=W('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),_a=W('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),ga=W('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),ha=W("<!> ",1),wa=W('<p class="ml-1 text-sm text-secondary"> </p>'),ba=W('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),ka=W("<!> <!> <!>",1),Ta=W("<!> <!>",1),Ia=W('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function ni(v,e){bt(e,!0);const l=()=>re(Ue,"$workflowRun",f),y=()=>re(C,"$coreUser",f),d=()=>re(Be,"$timestamp",f),[f,T]=De(),g=i=>{var m=ya(),c=o(m),S=o(c,!0);s(c);var z=r(c,2);le(z,()=>e.activity.attempt,u=>{he(u,{get value(){return e.activity.heartbeatDetails},key:"payloads",children:(p,P=wt)=>{{let V=a(()=>n("common.copy-icon-title")),tt=a(()=>n("common.copy-success-icon-title"));ne(p,{get content(){return P()},maxHeight:384,get copyIconTitle(){return t(V)},get copySuccessIconTitle(){return t(tt)}})}},$$slots:{default:!0}})}),s(m),O(u=>k(S,u),[()=>n("workflows.heartbeat-details")]),h(i,m)},I=i=>{var m=_a(),c=o(m),S=o(c);{var z=p=>{var P=pa(),V=ot(P),tt=o(V,!0);s(V);var et=r(V,2);le(et,()=>e.activity.attempt,at=>{{const xt=(Qt,ae=wt)=>{{let At=a(()=>n("common.copy-icon-title")),jt=a(()=>n("common.copy-success-icon-title"));ne(Qt,{get content(){return ae()},maxHeight:384,get copyIconTitle(){return t(At)},get copySuccessIconTitle(){return t(jt)}})}};let zt=a(()=>Ge(e.activity.lastFailure,"stackTrace"));he(at,{get value(){return t(zt)},children:xt,$$slots:{default:!0}})}}),O(at=>k(tt,at),[()=>n("workflows.last-failure")]),h(p,P)};F(S,p=>{e.activity.lastFailure&&p(z)})}s(c);var u=r(c,2);{var x=p=>{var P=xa(),V=o(P),tt=o(V,!0);s(V);var et=r(V,2);{let at=a(()=>n("common.copy-icon-title")),xt=a(()=>n("common.copy-success-icon-title"));ne(et,{language:"text",maxHeight:384,get content(){return e.activity.lastFailure.stackTrace},get copyIconTitle(){return t(at)},get copySuccessIconTitle(){return t(xt)}})}s(P),O(at=>k(tt,at),[()=>n("common.stack-trace")]),h(p,P)};F(u,p=>{var P;(P=e.activity.lastFailure)!=null&&P.stackTrace&&p(x)})}s(m),h(i,m)},Q=i=>{{let m=a(()=>{var c;return(c=e.activity.lastFailure)!=null&&c.stackTrace?n("workflows.last-failure-with-stack-trace"):n("workflows.last-failure")});qe(i,{get title(){return t(m)},children:Ae,$$slots:{default:(c,S)=>{const z=a(()=>S.open);var u=Et(),x=ot(u);{var p=P=>{I(P)};F(x,P=>{t(z)&&P(p)})}h(c,u)}}})}},A=(i,m=wt)=>{var c=ga(),S=o(c),z=o(S,!0);s(S);var u=r(S,2),x=o(u),p=r(x),P=o(p);s(p),s(u),s(c),O((V,tt)=>{k(z,V),k(x,`${tt??""} `),k(P,`(${m()??""})`)},[()=>n("workflows.next-retry"),()=>d()(e.activity.scheduledTime,{relativeLabel:""})]),h(i,c)},M=i=>{var m=ba(),c=o(m);{let u=a(()=>t(b)?"danger":"default");ze(c,{get type(){return t(u)},children:(x,p)=>{var P=ha(),V=ot(P);{let et=a(()=>t(b)&&"font-bold text-red-400");Qe(V,{get class(){return`mr-1 ${t(et)??""}`},name:"retry"})}var tt=r(V);O(et=>k(tt,` ${e.activity.attempt??0??""} of ${et??""}`),[()=>Ee(e.activity.maximumAttempts)]),h(x,P)},$$slots:{default:!0}})}var S=r(c,2);{var z=u=>{var x=wa(),p=o(x);s(x),O(P=>k(p,`${P??""} remaining`),[()=>Ve(e.activity.maximumAttempts,e.activity.attempt)]),h(u,x)};F(S,u=>{e.activity.maximumAttempts&&u(z)})}s(m),h(i,m)};var E,R;const b=a(()=>e.activity.attempt>1&&!!e.activity.lastFailure),U=a(()=>(E=l()===null||l()===void 0?void 0:l().workflow)===null||E===void 0?void 0:E.isRunning),_=a(()=>(R=l()===null||l()===void 0?void 0:l().workflow)===null||R===void 0?void 0:R.isPaused);let C=je(),K=a(()=>ma(Kt.data.settings,y(),Kt.params.namespace)&&(t(U)||t(_)));var B=Ia(),j=o(B),D=o(j),L=o(D);{let i=a(()=>e.activity.paused?"Paused":e.activity.state);Le(L,{get status(){return t(i)}})}var X=r(L,2),q=o(X,!0);s(X),s(D);var $=r(D,2);{var Y=i=>{ua(i,{get activity(){return e.activity},class:"justify-end"})};F($,i=>{t(K)&&i(Y)})}s(j);var st=r(j,2),G=o(st),it=o(G);{let i=a(()=>n("workflows.activity-id"));Z(it,()=>t(i),()=>e.activity.activityId)}var ct=r(it,2);{var vt=i=>{var m=ka(),c=ot(m);{let u=a(()=>n("activities.paused-by"));Z(c,()=>t(u),()=>{var x,p;return((p=(x=e.activity.pauseInfo)==null?void 0:x.manual)==null?void 0:p.identity)||""})}var S=r(c,2);{let u=a(()=>n("activities.paused-since")),x=a(()=>{var p;return d()((p=e.activity.pauseInfo)==null?void 0:p.pauseTime)});Z(S,()=>t(u),()=>t(x))}var z=r(S,2);{let u=a(()=>n("activities.pause-reason"));Z(z,()=>t(u),()=>{var x,p;return((p=(x=e.activity.pauseInfo)==null?void 0:x.manual)==null?void 0:p.reason)||"-"})}h(i,m)};F(ct,i=>{e.activity.paused&&e.activity.pauseInfo&&i(vt)})}var Rt=r(ct,2);{let i=a(()=>n("workflows.attempt"));Z(Rt,()=>t(i),()=>M)}var mt=r(Rt,2);{var nt=i=>{const m=a(()=>Je({date:e.activity.scheduledTime,negativeDefault:""}));var c=Et(),S=ot(c);{var z=u=>{A(u,()=>t(m))};F(S,u=>{t(m)&&u(z)})}h(i,c)};F(mt,i=>{e.activity.scheduledTime&&i(nt)})}var Zt=r(mt,2);{var $t=i=>{{let m=a(()=>n("workflows.last-attempt-completed-time")),c=a(()=>d()(e.activity.lastAttemptCompleteTime));Z(i,()=>t(m),()=>t(c))}};F(Zt,i=>{e.activity.lastAttemptCompleteTime&&i($t)})}var te=r(Zt,2);{var ft=i=>{{let m=a(()=>n("workflows.retry-expiration")),c=a(()=>Ke(e.activity.maximumAttempts,Fe(We({start:Date.now(),end:e.activity.expirationTime}))));Z(i,()=>t(m),()=>t(c))}};F(te,i=>{e.activity.expirationTime&&i(ft)})}var yt=r(te,2);{var Ht=i=>{{let m=a(()=>n("workflows.last-heartbeat")),c=a(()=>d()(e.activity.lastHeartbeatTime));Z(i,()=>t(m),()=>t(c))}};F(yt,i=>{e.activity.lastHeartbeatTime&&i(Ht)})}var Tt=r(yt,2);{var Ut=i=>{{let m=a(()=>n("workflows.last-started-time")),c=a(()=>d()(e.activity.lastStartedTime));Z(i,()=>t(m),()=>t(c))}};F(Tt,i=>{e.activity.lastStartedTime&&i(Ut)})}var It=r(Tt,2);{var ee=i=>{{let m=a(()=>n("workflows.last-worker-identity"));Z(i,()=>t(m),()=>e.activity.lastWorkerIdentity)}};F(It,i=>{e.activity.lastWorkerIdentity&&i(ee)})}var Pt=r(It,2);{var Ft=i=>{var m=Ta(),c=ot(m);{var S=x=>{{let p=a(()=>n("workflows.priority"));Z(x,()=>t(p),()=>e.activity.priority.priorityKey)}};F(c,x=>{e.activity.priority.priorityKey&&x(S)})}var z=r(c,2);{var u=x=>{{let p=a(()=>n("workflows.fairness"));Z(x,()=>t(p),()=>e.activity.priority.fairnessKey)}};F(z,x=>{e.activity.priority.fairnessKey&&x(u)})}h(i,m)};F(Pt,i=>{e.activity.priority&&i(Ft)})}s(G);var Wt=r(G,2),pt=o(Wt);{var Bt=i=>{var m=Et(),c=ot(m);{var S=u=>{Q(u)},z=u=>{I(u)};F(c,u=>{e.totalPending>20?u(S):u(z,!1)})}h(i,m)};F(pt,i=>{t(b)&&i(Bt)})}var Lt=r(pt,2);{var qt=i=>{g(i)};F(Lt,i=>{e.activity.heartbeatDetails&&i(qt)})}s(Wt),s(st),s(B),O(()=>k(q,e.activity.activityType)),h(v,B),kt(),T()}export{ni as P,Je as t};
