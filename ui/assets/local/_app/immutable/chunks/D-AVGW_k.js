import"./Bzak7iHL.js";import{p as je,u as a,t as R,i as r,n as de,k as X,j as T,e as c,c as i,r as n,a8 as z,g as e,b as De,h as Me,f as ne,d as ya,o as ae,l as Te,s as ve,m as ye,M as Ie,a as gt,q as Bt,aj as mt,ag as jt,ah as ha}from"./C-0kx8Rl.js";import{s as k,d as wa,e as Dt}from"./B-1TjF6E.js";import{i as _}from"./DIXBMONz.js";import{e as qe,i as yt}from"./CdE3I_3f.js";import{c as Ut,a as st,s as ft}from"./DliSAU7O.js";import{s as ht,a as Ee,l as it,p as K,b as _t}from"./B0Wc33k0.js";import{o as ka}from"./Dl-yZlXH.js";import{p as Oe}from"./CKGmZGq4.js";import{B as Ve}from"./CqraL4jo.js";import{C as Be}from"./C7PnEZmO.js";import{I as Wt}from"./BQ19dEFL.js";import{L as Ue}from"./ChvstbSQ.js";import{T as pt}from"./D7zMa2zU.js";import{t as d}from"./BXv1jDVW.js";import{i as J,e as ba,a as Ta,b as Ia}from"./C_eOAcxb.js";import{i as Ea}from"./BnOeydbG.js";import{a as Aa}from"./CugiL4oY.js";import{f as $e,t as zt,r as Gt,a as Kt}from"./BnZXuwac.js";import{c as Pa,d as Sa}from"./B0FAIQ6D.js";import{a as Fa,b as Ca,g as La}from"./DnuAPUuI.js";import{b as Ma,f as ja,d as rt,s as Da,c as Ra,e as Ha,h as Na,j as Oa}from"./DwqrybW6.js";import{h as Se,F as qa}from"./Cw3mDAHj.js";import{s as Qt,f as lt}from"./ByTIZu23.js";import{t as Jt,f as Xt,P as Va}from"./BvJRisI2.js";import{y as Rt}from"./2uWpc1Jl.js";import{c as Ht,k as Ba,l as Ua,a as Wa,b as Nt}from"./Ri2stLMz.js";import{C as Fe}from"./CjXSN14h.js";import{o as za}from"./C8ejR22J.js";import{s as Ot}from"./BDfAQ6r3.js";import{T as Yt}from"./D-7Yb9FW.js";import{g as Zt}from"./C6L-01Dm.js";import"./69_IOA4Y.js";import{i as wt,t as xt}from"./DFzl7kYA.js";import{p as Ga}from"./Bk7ZBJgR.js";import"./D0Jyh3oV.js";import"./BuRZGomK.js";import{M as $t}from"./COAeoyVF.js";import{P as ot}from"./CjEjWnwt.js";const qt=async(b,t)=>{var y,h,x,w,l,f,S,M,C,I,D;if(!("eventType"in b)||!Se(b))return;const{namespace:o,settings:m,accessToken:u}=t,p={...m,codec:{...m==null?void 0:m.codec,endpoint:La(m),passAccessToken:Ca(m),includeCredentials:Fa(m)}};try{const O=await Pa(b.attributes,o,p,u),g=((x=(h=(y=b.markerRecordedEventAttributes)==null?void 0:y.details)==null?void 0:h.data)==null?void 0:x.payloads)||((f=(l=(w=b.markerRecordedEventAttributes)==null?void 0:w.details)==null?void 0:l.type)==null?void 0:f.payloads)||[];if(!(g!=null&&g.length))return;const E=Sa(O),q=(D=((M=(S=E==null?void 0:E.details)==null?void 0:S.data)==null?void 0:M.payloads)||((I=(C=E==null?void 0:E.details)==null?void 0:C.type)==null?void 0:I.payloads))==null?void 0:D[0],U=Ma(q);if(U)return ja("ActivityType",U)}catch(O){console.error("Failed to decode local activity type:",O)}},wr=b=>{if("eventList"in b)return b.eventList.find(Se);if(Se(b))return b},be=(b,t=z,o=z)=>{var m=Qa(),u=r(m),p=r(u,!0);n(u);var y=i(u,2),h=r(y);{var x=l=>{var f=X();T(()=>k(f,o())),c(l,f)},w=l=>{var f=Me(),S=ne(f);ya(S,()=>o()??z),c(l,f)};_(h,l=>{typeof o()=="string"||typeof o()=="number"?l(x):l(w,!1)})}n(y),n(m),T(()=>k(p,t())),c(b,m)};var Ka=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Qa=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ja=R("<!> ",1),Xa=R('<p class="text-sm text-secondary/80"> </p> <!>',1),Ya=R('<p class="text-sm text-secondary/80"> </p> <!>',1),Za=R('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),$a=R('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),en=R('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),tn=R('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function an(b,t){je(t,!0);const[o,m]=ht(),u=()=>Ee(Kt,"$timeFormat",o),p=()=>Ee(Gt,"$relativeTime",o),y=()=>Ee(zt,"$timestampFormat",o),h=(s,P=z)=>{var H=Ka(),re=r(H),Z=r(re,!0);n(re);var V=i(re,2),ie=r(V),me=i(ie),le=r(me);n(me),n(V),n(H),T((oe,pe)=>{k(Z,oe),k(ie,`${pe??""} `),k(le,`(${P()??""})`)},[()=>d("workflows.next-retry"),()=>$e(t.operation.nextAttemptScheduleTime,u(),{relative:p(),format:y(),relativeLabel:""})]),c(s,H)},x=s=>{const P=a(()=>e(l)?"danger":"default");Ve(s,{class:"mr-1",get type(){return e(P)},children:(H,re)=>{var Z=Ja(),V=ne(Z);const ie=a(()=>e(l)&&"font-bold text-red-400");Wt(V,{get class(){return`mr-1 ${e(ie)??""}`},name:"retry"});var me=i(V);T(()=>k(me,` ${t.operation.attempt??0}`)),c(H,Z)},$$slots:{default:!0}})},w=s=>{var P=Za(),H=r(P),re=r(H);{var Z=le=>{var oe=Xa(),pe=ne(oe),Ke=r(pe,!0);n(pe);var Qe=i(pe,2);const Le=a(()=>Ot(za(t.operation.lastAttemptFailure,"stackTrace"))),Je=a(()=>d("common.copy-icon-title")),Xe=a(()=>d("common.copy-success-icon-title"));Fe(Qe,{get content(){return e(Le)},maxHeight:384,get copyIconTitle(){return e(Je)},get copySuccessIconTitle(){return e(Xe)}}),T(vt=>k(Ke,vt),[()=>d("workflows.last-failure")]),c(le,oe)};_(re,le=>{t.operation.lastAttemptFailure&&le(Z)})}n(H);var V=i(H,2),ie=r(V);{var me=le=>{var oe=Ya(),pe=ne(oe),Ke=r(pe,!0);n(pe);var Qe=i(pe,2);const Le=a(()=>d("common.copy-icon-title")),Je=a(()=>d("common.copy-success-icon-title"));Fe(Qe,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(Le)},get copySuccessIconTitle(){return e(Je)}}),T(Xe=>k(Ke,Xe),[()=>d("common.stack-trace")]),c(le,oe)};_(ie,le=>{var oe;(oe=t.operation.lastAttemptFailure)!=null&&oe.stackTrace&&le(me)})}n(V),n(P),c(s,P)},l=a(()=>t.operation.attempt>1);var f=tn(),S=r(f),M=r(S),C=r(M);Ve(C,{children:(s,P)=>{de();var H=X();T(()=>k(H,t.operation.state)),c(s,H)},$$slots:{default:!0}});var I=i(C,2),D=r(I,!0);n(I),n(M),n(S);var O=i(S,2),g=r(O),E=r(g);{var q=s=>{var P=ae(()=>d("nexus.endpoint"));be(s,()=>e(P),()=>t.operation.endpoint)};_(E,s=>{t.operation.endpoint&&s(q)})}var U=i(E,2);{var B=s=>{var P=ae(()=>d("nexus.service"));be(s,()=>e(P),()=>t.operation.service)};_(U,s=>{t.operation.service&&s(B)})}var Q=i(U,2);{var W=s=>{var P=ae(()=>d("nexus.operation"));be(s,()=>e(P),()=>t.operation.operation)};_(Q,s=>{t.operation.operation&&s(W)})}var Y=i(Q,2);{var xe=s=>{var P=ae(()=>d("nexus.operation-token"));be(s,()=>e(P),()=>t.operation.operationToken)};_(Y,s=>{t.operation.operationToken&&s(xe)})}var he=i(Y,2),L=ae(()=>d("workflows.attempt"));be(he,()=>e(L),()=>x);var A=i(he,2);{var F=s=>{var P=Me();const H=a(()=>Jt({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var re=ne(P);{var Z=V=>{h(V,()=>e(H))};_(re,V=>{e(H)&&V(Z)})}c(s,P)};_(A,s=>{t.operation.nextAttemptScheduleTime&&s(F)})}var G=i(A,2);{var fe=s=>{var P=ae(()=>d("workflows.last-attempt-completed-time")),H=ae(()=>$e(t.operation.lastAttemptCompleteTime,u(),{relative:p(),format:y()}));be(s,()=>e(P),()=>e(H))};_(G,s=>{t.operation.lastAttemptCompleteTime&&s(fe)})}var Ce=i(G,2);{var We=s=>{var P=ae(()=>d("workflows.schedule-event-id"));be(s,()=>e(P),()=>t.operation.scheduledEventId)};_(Ce,s=>{t.operation.scheduledEventId&&s(We)})}var Re=i(Ce,2);{var ze=s=>{var P=ae(()=>d("workflows.scheduled-time")),H=ae(()=>$e(t.operation.scheduledTime,u(),{relative:p(),format:y()}));be(s,()=>e(P),()=>e(H))};_(Re,s=>{t.operation.scheduledTime&&s(ze)})}var ue=i(Re,2);{var se=s=>{var P=ae(()=>d("workflows.schedule-to-close-timeout"));be(s,()=>e(P),()=>t.operation.scheduleToCloseTimeout)};_(ue,s=>{t.operation.scheduleToCloseTimeout&&s(se)})}n(g);var _e=i(g,2),Ae=r(_e);{var we=s=>{w(s)};_(Ae,s=>{e(l)&&s(we)})}var Ge=i(Ae,2);{var ct=s=>{var P=$a(),H=r(P),re=r(H,!0);n(H);var Z=i(H,2);const V=a(()=>d("common.copy-icon-title")),ie=a(()=>d("common.copy-success-icon-title"));Fe(Z,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(ie)}}),n(P),T(me=>k(re,me),[()=>d("nexus.blocked-reason")]),c(s,P)};_(Ge,s=>{t.operation.blockedReason&&s(ct)})}var et=i(Ge,2);{var tt=s=>{var P=en(),H=r(P),re=r(H,!0);n(H);var Z=i(H,2);const V=a(()=>Ot(t.operation.cancellationInfo)),ie=a(()=>d("common.copy-icon-title")),me=a(()=>d("common.copy-success-icon-title"));Fe(Z,{language:"text",get content(){return e(V)},get copyIconTitle(){return e(ie)},get copySuccessIconTitle(){return e(me)}}),n(P),T(le=>k(re,le),[()=>d("nexus.cancellation-info")]),c(s,P)};_(et,s=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&s(tt)})}n(_e),n(O),n(f),T(s=>k(D,s),[()=>d("workflows.pending-nexus-operation")]),c(b,f),De(),m()}function ea(b,t){const o=it(t,["children","$$slots","$$events","$$legacy"]),m=it(o,["value","attributes","type"]);je(t,!1);const[u,p]=ht(),y=()=>Ee(Ga,"$page",u),h=ye(),x=ye(),w=ye(),l=ye(),f=ye(),S=ye(),M=ye(),C=ye();let I=K(t,"value",8),D=K(t,"attributes",8),O=K(t,"type",8);Te(()=>(e(h),e(x),y()),()=>{(g=>(ve(h,g.workflow),ve(x,g.namespace)))(y().params)}),Te(()=>(e(x),e(h),Ie(I())),()=>{ve(w,Ht({namespace:e(x),workflow:e(h),run:I()}))}),Te(()=>(e(x),Ie(I())),()=>{ve(l,Ba({namespace:e(x),queue:I()}))}),Te(()=>(e(x),Ie(D())),()=>{ve(f,Ht({namespace:e(x),workflow:D().workflowExecutionWorkflowId,run:D().workflowExecutionRunId}))}),Te(()=>Ie(I()),()=>{ve(S,Ua(I()))}),Te(()=>(e(w),e(l),e(f),e(S)),()=>{ve(M,{execution:e(w),"task-queue":e(l),"child-workflow":e(f),"nexus-endpoint":e(S)})}),Te(()=>(e(M),Ie(O())),()=>{ve(C,e(M)[O()])}),gt(),wt(),Ue(b,{get class(){return m.class},get href(){return e(C)},children:(g,E)=>{de();var q=X();T(()=>k(q,I())),c(g,q)},$$slots:{default:!0}}),De(),p()}const nn=(b,t=z)=>{var o=vn();const m=a(()=>Zt(t())),u=a(()=>{var l;return((l=e(m).split("workflows/"))==null?void 0:l[1])||e(m)});var p=r(o),y=r(p,!0);n(p);var h=i(p,2);const x=a(()=>d("common.copy-icon-title")),w=a(()=>d("common.copy-success-icon-title"));Be(h,{get copyIconTitle(){return e(x)},get copySuccessIconTitle(){return e(w)},get content(){return e(u)},children:(l,f)=>{Ue(l,{get href(){return e(m)},class:"whitespace-pre-line",children:(S,M)=>{de();var C=X();T(()=>k(C,e(u))),c(S,C)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(o),T(l=>k(y,l),[()=>d("nexus.link")]),c(b,o)},rn=(b,t=z)=>{var o=dn();const m=a(()=>Wa({namespace:t().workflowEvent.namespace}));var u=r(o),p=r(u,!0);n(u);var y=i(u,2);const h=a(()=>d("common.copy-icon-title")),x=a(()=>d("common.copy-success-icon-title"));Be(y,{get copyIconTitle(){return e(h)},get copySuccessIconTitle(){return e(x)},get content(){return t().workflowEvent.namespace},children:(w,l)=>{Ue(w,{get href(){return e(m)},class:"whitespace-pre-line",children:(f,S)=>{de();var M=X();T(()=>k(M,t().workflowEvent.namespace)),c(f,M)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(o),T(w=>k(p,w),[()=>d("nexus.link-namespace")]),c(b,o)},on=(b,t=z)=>{var o=Me(),m=ne(o);qe(m,17,t,yt,(u,p,y,h)=>{var x=un(),w=ne(x);nn(w,()=>e(p));var l=i(w,2);rn(l,()=>e(p)),c(u,x)}),c(b,o)},sn=(b,t=z)=>{var o=mn(),m=i(r(o),2),u=r(m);const p=a(()=>d("events.decode-failed"));$t(u,{get value(){return t()},get fallback(){return e(p)},children:Bt,$$slots:{default:(y,h)=>{const x=a(()=>h.decodedValue);de();var w=X();T(()=>k(w,e(x))),c(y,w)}}}),n(m),n(o),c(b,o)},ln=(b,t=z,o=z)=>{var m=_n();const u=a(()=>Ra(o())),p=a(()=>Ha(e(u)));var y=ne(m),h=r(y),x=r(h,!0);n(h);var w=i(h,2);{var l=C=>{ot(C,{get value(){return o()},key:"payloads",children:(D,O=z)=>{const g=a(()=>d("common.copy-icon-title")),E=a(()=>d("common.copy-success-icon-title"));Fe(D,{get content(){return O()},maxHeight:384,get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(E)}})},$$slots:{default:!0}})},f=(C,I)=>{{var D=g=>{const E=a(()=>({searchAttributes:e(u)}));ot(g,{key:"searchAttributes",get value(){return e(E)},children:(U,B=z)=>{const Q=a(()=>d("common.copy-icon-title")),W=a(()=>d("common.copy-success-icon-title"));Fe(U,{get content(){return B()},maxHeight:384,get copyIconTitle(){return e(Q)},get copySuccessIconTitle(){return e(W)}})},$$slots:{default:!0}})},O=g=>{ot(g,{get value(){return e(u)},children:(q,U=z)=>{const B=a(()=>d("common.copy-icon-title")),Q=a(()=>d("common.copy-success-icon-title"));Fe(q,{get content(){return U()},maxHeight:384,get copyIconTitle(){return e(B)},get copySuccessIconTitle(){return e(Q)}})},$$slots:{default:!0}})};_(C,g=>{t()==="searchAttributes"?g(D):g(O,!1)},I)}};_(w,C=>{var I;(I=o())!=null&&I.payloads?C(l):C(f,!1)})}n(y);var S=i(y,2);{var M=C=>{var I=fn(),D=r(I),O=r(D,!0);n(D);var g=i(D,2);const E=a(()=>d("common.copy-icon-title")),q=a(()=>d("common.copy-success-icon-title"));Fe(g,{get content(){return e(p)},language:"text",maxHeight:384,get copyIconTitle(){return e(E)},get copySuccessIconTitle(){return e(q)}}),n(I),T(U=>k(O,U),[()=>d("workflows.call-stack-tab")]),c(C,I)};_(S,C=>{e(p)&&C(M)})}T(C=>k(x,C),[()=>lt(t())]),c(b,m)},cn=(b,t=z,o=z)=>{var m=xn(),u=r(m),p=r(u,!0);n(u);var y=i(u,2),h=r(y);{var x=l=>{Yt(l,{get dateTime(){return o()}})},w=l=>{var f=X();T(()=>k(f,o())),c(l,f)};_(h,l=>{Da(t())?l(x):l(w,!1)})}n(y),n(m),T(l=>k(p,l),[()=>lt(t())]),c(b,m)};var vn=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),dn=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),un=R("<!> <!>",1),mn=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),fn=R('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),_n=R('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),pn=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),xn=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),gn=R('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),yn=R('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Vt(b,t){je(t,!0);const o=(L,A=z,F=z)=>{var G=pn(),fe=r(G),Ce=r(fe,!0);n(fe);var We=i(fe,2);const Re=a(()=>d("common.copy-icon-title")),ze=a(()=>d("common.copy-success-icon-title")),ue=a(()=>String(F()));Be(We,{get copyIconTitle(){return e(Re)},get copySuccessIconTitle(){return e(ze)},get content(){return e(ue)},children:(se,_e)=>{const Ae=a(()=>String(F())),we=a(()=>rt(A(),e(u)));ea(se,{get value(){return e(Ae)},get attributes(){return e(u)},get type(){return e(we)},class:"whitespace-pre-line"})},$$slots:{default:!0}}),n(G),T(se=>k(Ce,se),[()=>lt(A())]),c(L,G)},m=a(()=>Se(t.event)?d("events.category.local-activity"):Qt(t.event.name)),u=a(()=>Xt(t.event)),p=a(()=>Object.entries(e(u))),y=a(()=>e(p).filter(([L,A])=>typeof A=="object"&&Object.keys(A).length>0)),h=a(()=>e(p).filter(([L,A])=>rt(L,e(u))!=="none")),x=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),w=a(()=>e(p).filter(([L,A])=>typeof A!="object"&&rt(L,e(u))==="none"&&!e(x).includes(L)&&(L!=="namespace"||L==="namespace"&&Oe.params.namespace!==A)));var l=yn(),f=r(l),S=r(f),M=r(S),C=r(M,!0);n(M);var I=i(M,2),D=r(I,!0);n(I),n(S);var O=i(S,2);Yt(O,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),n(f);var g=i(f,2),E=r(g),q=r(E);{var U=L=>{on(L,()=>t.event.links)};_(q,L=>{var A,F;(F=(A=t.event)==null?void 0:A.links)!=null&&F.length&&L(U)})}var B=i(q,2);{var Q=L=>{sn(L,()=>t.event.userMetadata.summary)};_(B,L=>{var A,F;(F=(A=t.event)==null?void 0:A.userMetadata)!=null&&F.summary&&L(Q)})}var W=i(B,2);qe(W,17,()=>e(w),([L,A])=>L,(L,A)=>{cn(L,()=>e(A)[0],()=>e(A)[1])});var Y=i(W,2);qe(Y,17,()=>e(h),([L,A])=>L,(L,A)=>{o(L,()=>e(A)[0],()=>e(A)[1])}),n(E);var xe=i(E,2);{var he=L=>{var A=gn();qe(A,21,()=>e(y),([F,G])=>F,(F,G)=>{ln(F,()=>e(G)[0],()=>e(G)[1])}),n(A),c(L,A)};_(xe,L=>{e(y).length&&L(he)})}n(g),n(l),T(()=>{k(C,t.event.id),k(D,e(m))}),c(b,l),De()}var hn=R('<div class="flex flex-col overflow-hidden"><!> <!></div>');function wn(b,t){je(t,!0);let o=K(t,"group",3,void 0),m=K(t,"event",3,void 0);const u=a(()=>(o()===null||o()===void 0?void 0:o().pendingActivity)||(o()===null||o()===void 0?void 0:o().pendingNexusOperation)),p=a(()=>o()&&(o().eventList.length>1||e(u)));var y=Me(),h=ne(y);{var x=l=>{var f=hn(),S=r(f);{var M=D=>{Va(D,{get activity(){return o().pendingActivity}})},C=(D,O)=>{{var g=E=>{an(E,{get operation(){return o().pendingNexusOperation}})};_(D,E=>{var q;(q=o())!=null&&q.pendingNexusOperation&&E(g)},O)}};_(S,D=>{var O;(O=o())!=null&&O.pendingActivity?D(M):D(C,!1)})}var I=i(S,2);qe(I,17,()=>o().eventList,yt,(D,O)=>{Vt(D,{get event(){return e(O)}})}),n(f),c(l,f)},w=(l,f)=>{{var S=M=>{Vt(M,{get event(){return m()}})};_(l,M=>{m()&&M(S)},f)}};_(h,l=>{e(p)?l(x):l(w,!1)})}c(b,y),De()}var kn=R('<p class="whitespace-nowrap text-right text-xs"> </p>'),bn=R('<div><code class="svelte-1qb2863"><pre class="truncate svelte-1qb2863"> </pre></code></div>'),Tn=R('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),In=R('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function nt(b,t){const o=it(t,["children","$$slots","$$events","$$legacy"]);je(t,!1);const m=ye();let u=K(t,"key",8),p=K(t,"value",8),y=K(t,"attributes",8),h=K(t,"showKey",8,!0);Te(()=>(Ie(u()),Ie(y())),()=>{ve(m,rt(u(),y()))}),gt(),wt();var x=Me(),w=ne(x);{var l=f=>{var S=In(),M=r(S);{var C=g=>{var E=kn(),q=r(E,!0);n(E),T(U=>k(q,U),[()=>lt(u())],ae),c(g,E)};_(M,g=>{h()&&g(C)})}var I=i(M,2);{var D=g=>{var E=Tn(),q=r(E);ot(q,{get value(){return p()},key:"payloads",children:(B,Q=z)=>{var W=bn(),Y=r(W),xe=r(Y),he=r(xe,!0);n(xe),n(Y),n(W),T((L,A)=>{st(W,1,L,"svelte-1qb2863"),k(he,A)},[()=>Ut(xt("payload",o.class)),()=>Q().slice(0,60)],ae),c(B,W)},$$slots:{default:!0}}),n(E),c(g,E)},O=(g,E)=>{{var q=B=>{const Q=ae(()=>d("common.copy-icon-title")),W=ae(()=>d("common.copy-success-icon-title"));Be(B,{get copyIconTitle(){return e(Q)},get copySuccessIconTitle(){return e(W)},get content(){return p()},"container-class":"truncate",children:(Y,xe)=>{ea(Y,{get value(){return p()},get attributes(){return y()},get type(){return e(m)},class:"truncate"})},$$slots:{default:!0}})},U=B=>{Ve(B,{type:"subtle",class:"block select-none truncate",children:(Q,W)=>{de();var Y=X();T(()=>k(Y,p())),c(Q,Y)},$$slots:{default:!0}})};_(g,B=>{e(m)!=="none"?B(q):B(U,!1)},E)}};_(I,g=>{typeof p()=="object"?g(D):g(O,!1)})}n(S),c(f,S)};_(w,f=>{u()&&f(l)})}c(b,x),De()}var En=R('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function An(b,t){const o=it(t,["children","$$slots","$$events","$$legacy"]);je(t,!1);var m=ye();let u=K(t,"link",8),p=K(t,"value",28,()=>u().workflowEvent.workflowId),y=K(t,"label",24,()=>d("nexus.link")),h=K(t,"href",12,void 0);Te(()=>(Ie(h()),Ie(u()),mt(m)),()=>{h()||(h(Zt(u())),p((ve(m,h().split("workflows/"))===null||mt(m)===void 0?void 0:mt(m)[1])||h()))}),gt(),wt();var x=En(),w=r(x),l=r(w,!0);n(w);var f=i(w,2),S=r(f);Ue(S,{get href(){return h()},children:(M,C)=>{de();var I=X();T(()=>k(I,p())),c(M,I)},$$slots:{default:!0}}),n(f),n(x),T(()=>{st(x,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${o.class??""}`),k(l,y()),st(f,1,`overflow-hidden ${o.linkClass??""}`)}),c(b,x),De()}var Pn=R('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Sn=R('<td class="font-mono"><!></td>'),Fn=R(" <!>",1),Cn=R("<!> <!>",1),Ln=R('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Mn=R('<td><div class="flex justify-center gap-0.5"><!></div></td>'),jn=R('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Dn=R('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p class="whitespace-nowrap font-semibold md:text-base"> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function kr(b,t){je(t,!0);const[o,m]=ht(),u=()=>Ee(Kt,"$timeFormat",o),p=()=>Ee(Gt,"$relativeTime",o),y=()=>Ee(zt,"$timestampFormat",o),h=()=>Ee(Aa,"$authUser",o),x=()=>Ee(Ea,"$isCloud",o);var w,l,f,S,M,C,I,D;let O=K(t,"compact",3,!1),g=K(t,"expanded",3,!1),E=K(t,"onRowClick",3,()=>{}),q=K(t,"hoveredEventId",15),U=jt(ha(g())),B=jt(void 0);const Q=a(()=>J(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),W=a(()=>Oe.params),Y=a(()=>e(W).workflow),xe=a(()=>e(W).run),he=a(()=>e(W).namespace),L=a(()=>Nt({eventId:t.event.id,namespace:e(he),workflow:e(Y),run:e(xe)})),A=a(()=>Xt(t.event)),F=a(()=>J(t.event)?t.event.events.get(e(Q)):t.event),G=a(()=>Rt({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:J(e(F))?(w=e(F).initialEvent)===null||w===void 0?void 0:w.eventTime:e(F)===null||e(F)===void 0?void 0:e(F).eventTime,includeMillisecondsForUnderSecond:!0})),fe=a(()=>J(t.event)?Rt({start:(l=t.event.initialEvent)===null||l===void 0?void 0:l.eventTime,end:(f=t.event.lastEvent)===null||f===void 0?void 0:f.eventTime,includeMillisecondsForUnderSecond:!0}):""),Ce=a(()=>ba(t.event)),We=a(()=>Ta(t.event)),Re=a(()=>Ia(t.event)),ze=a(()=>J(t.event)?t.event.label:Se(t.event)?d("events.category.local-activity"):Qt(t.event.name)),ue=a(()=>Se(t.event)?void 0:Na(J(t.event)?t.event.initialEvent:t.event)),se=a(()=>Oa(J(t.event)?t.event.lastEvent:t.event,e(ue)===null||e(ue)===void 0?void 0:e(ue).key)),_e=a(()=>J(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),Ae=a(()=>e(_e)&&(e(_e)===null||e(_e)===void 0?void 0:e(_e).paused)),we=a(()=>J(t.event)&&t.event.isPending&&(((S=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||S===void 0?void 0:S.attempt)||((M=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||M===void 0?void 0:M.attempt))),Ge=a(()=>J(t.event)&&!t.event.isPending&&((I=(C=t.event.eventList.find(qa))===null||C===void 0?void 0:C.attributes)===null||I===void 0?void 0:I.attempt)),ct=a(()=>O()&&(e(se)===null||e(se)===void 0?void 0:e(se).key)&&(e(se)===null||e(se)===void 0?void 0:e(se).key)!==(e(ue)===null||e(ue)===void 0?void 0:e(ue).key)&&!(!((D=e(F)===null||e(F)===void 0?void 0:e(F).userMetadata)===null||D===void 0)&&D.summary)),et=a(()=>$e(e(F)===null||e(F)===void 0?void 0:e(F).eventTime,u(),{relative:p(),format:y()})),tt=a(()=>$e(e(F)===null||e(F)===void 0?void 0:e(F).eventTime,u(),{relative:p(),format:"short"})),s=v=>{ve(U,!e(U)),v.stopPropagation(),E()()},P=()=>{q(t.event.id)},H=()=>{q(void 0)};let re=(v,j)=>{var N;return(N=v==null?void 0:v.eventIds)===null||N===void 0?void 0:N.has(j)};ka(async()=>{Se(t.event)?ve(B,await qt(t.event,{namespace:Oe.params.namespace,settings:Oe.data.settings,accessToken:h().accessToken}),!0):J(t.event)&&Se(t.event.initialEvent)&&ve(B,await qt(t.event.initialEvent,{namespace:Oe.params.namespace,settings:Oe.data.settings,accessToken:h().accessToken}),!0)});var Z=Dn(),V=ne(Z);V.__click=s;var ie=r(V);{var me=v=>{var j=Pn(),N=r(j);qe(N,21,()=>t.event.eventList,yt,($,ee)=>{const te=a(()=>Nt({eventId:e(ee).id,namespace:e(he),workflow:e(Y),run:e(xe)}));Ue($,{"data-testid":"link",get href(){return e(te)},children:(ce,Pe)=>{de();var ge=X();T(()=>k(ge,e(ee).id)),c(ce,ge)},$$slots:{default:!0}})}),n(N),n(j),c(v,j)},le=v=>{var j=Sn(),N=r(j);Ue(N,{"data-testid":"link",get href(){return e(L)},children:($,ee)=>{de();var te=X();T(()=>k(te,t.event.id)),c($,te)},$$slots:{default:!0}}),n(j),c(v,j)};_(ie,v=>{J(t.event)?v(me):v(le,!1)})}var oe=i(ie),pe=r(oe);const Ke=a(()=>J(t.event)&&!e(fe)||!e(G)),Qe=a(()=>J(t.event)?`Duration: ${e(fe)}`:`+${e(G)}`);pt(pe,{get hide(){return e(Ke)},get text(){return e(Qe)},class:"block",bottom:!0,children:(v,j)=>{const N=a(()=>d("common.copy-icon-title")),$=a(()=>d("common.copy-success-icon-title"));Be(v,{get copyIconTitle(){return e(N)},get copySuccessIconTitle(){return e($)},get content(){return e(tt)},children:(ee,te)=>{de();var ce=X();T(()=>k(ce,e(tt))),c(ee,ce)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(oe);var Le=i(oe),Je=r(Le);const Xe=a(()=>J(t.event)&&!e(fe)||!e(G)),vt=a(()=>J(t.event)?`Duration: ${e(fe)}`:`+${e(G)}`);pt(Je,{get hide(){return e(Xe)},get text(){return e(vt)},class:"block",bottom:!0,children:(v,j)=>{const N=a(()=>d("common.copy-icon-title")),$=a(()=>d("common.copy-success-icon-title"));Be(v,{get copyIconTitle(){return e(N)},get copySuccessIconTitle(){return e($)},get content(){return e(et)},children:(ee,te)=>{de();var ce=X();T(()=>k(ce,e(et))),c(ee,ce)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(Le);var dt=i(Le),kt=r(dt),ta=r(kt,!0);n(kt),n(dt);var ut=i(dt),bt=r(ut),Tt=r(bt);{var aa=v=>{const j=a(()=>e(Ae)?"warning":e(we)>1?"danger":"default");Ve(v,{class:"mr-1",get type(){return e(j)},children:(N,$)=>{var ee=Cn(),te=ne(ee);const ce=a(()=>xt("mr-1 inline",e(we)>1&&"font-bold text-red-400",e(Ae)&&"font-bold text-yellow-700")),Pe=a(()=>e(Ae)?"pause":"retry");Wt(te,{get class(){return e(ce)},get name(){return e(Pe)}});var ge=i(te),Ye=i(ge);{var at=ke=>{var Ze=Fn(),Ft=ne(Ze),fa=i(Ft);{var _a=He=>{var Ct=Me();const Lt=a(()=>{var Ne;return Jt({date:(Ne=e(_e))==null?void 0:Ne.scheduledTime,negativeDefault:""})});var pa=ne(Ct);{var xa=Ne=>{var Mt=X();T(ga=>k(Mt,`• ${ga??""}
                ${e(Lt)??""}`),[()=>d("workflows.next-retry")]),c(Ne,Mt)};_(pa,Ne=>{e(Lt)&&Ne(xa)})}c(He,Ct)};_(fa,He=>{e(we)>1&&He(_a)})}T(()=>{var He;return k(Ft,`/ ${((He=e(_e))==null?void 0:He.maximumAttempts)||"∞"} `)}),c(ke,Ze)};_(Ye,ke=>{e(_e)&&ke(at)})}T(ke=>k(ge,` ${ke??""}
          ${e(we)??""} `),[()=>d("workflows.attempt")]),c(N,ee)},$$slots:{default:!0}})};_(Tt,v=>{e(we)&&v(aa)})}var It=i(Tt,2);{var na=v=>{nt(v,_t(()=>e(ue),{get attributes(){return e(A)}}))};_(It,v=>{var j;!e(B)&&((j=e(ue))!=null&&j.key)&&v(na)})}var Et=i(It,2);{var ra=v=>{nt(v,_t(()=>e(B),{get attributes(){return e(A)}}))};_(Et,v=>{e(B)&&e(B).key&&v(ra)})}var At=i(Et,2);{var oa=v=>{$t(v,{get value(){return e(F).userMetadata.summary},children:Bt,$$slots:{default:(j,N)=>{const $=a(()=>N.decodedValue);var ee=Me(),te=ne(ee);{var ce=Pe=>{var ge=Ln(),Ye=i(r(ge),2);Ve(Ye,{type:"secondary",class:"block select-none truncate",children:(at,ke)=>{de();var Ze=X();T(()=>k(Ze,e($))),c(at,Ze)},$$slots:{default:!0}}),n(ge),c(Pe,ge)};_(te,Pe=>{e($)&&Pe(ce)})}c(j,ee)}}})};_(At,v=>{var j,N;(N=(j=e(F))==null?void 0:j.userMetadata)!=null&&N.summary&&v(oa)})}var Pt=i(At,2);{var sa=v=>{An(v,{get link(){return e(F).links[0]},class:"max-w-xl",linkClass:"truncate"})};_(Pt,v=>{var j,N;(N=(j=e(F))==null?void 0:j.links)!=null&&N.length&&v(sa)})}var St=i(Pt,2);{var ia=v=>{const j=a(()=>e(Ge).toString());nt(v,{key:"attempt",get value(){return e(j)},get attributes(){return e(A)}})};_(St,v=>{e(Ge)&&v(ia)})}var la=i(St,2);{var ca=v=>{nt(v,_t(()=>e(se),{get attributes(){return e(A)}}))};_(la,v=>{e(ct)&&v(ca)})}n(bt),n(ut);var va=i(ut);{var da=v=>{var j=Mn(),N=r(j),$=r(N);{var ee=te=>{const ce=a(()=>d("workflows.estimated-billable-actions"));pt(te,{get text(){return e(ce)},topRight:!0,children:(Pe,ge)=>{Ve(Pe,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(Ye,at)=>{de();var ke=X();T(()=>k(ke,t.event.billableActions)),c(Ye,ke)},$$slots:{default:!0}})},$$slots:{default:!0}})};_($,te=>{t.event.billableActions&&te(ee)})}n(N),n(j),c(v,j)};_(va,v=>{x()&&v(da)})}n(V);var ua=i(V,2);{var ma=v=>{var j=jn(),N=r(j),$=r(N);wn($,{get group(){return t.group},get event(){return e(F)}}),n(N),n(j),T(()=>ft(N,"colspan",x()?5:4)),c(v,j)};_(ua,v=>{e(U)&&v(ma)})}T(v=>{st(V,1,v,"svelte-1cm88cy"),ft(V,"id",`${t.event.id}-${t.index}`),ft(V,"data-eventid",t.event.id),k(ta,e(ze))},[()=>Ut(xt("hover:cursor-pointer",e(Ce)&&"!bg-red-400/40 hover:!bg-red-400/60",e(We)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(Re)&&"!bg-pink-700/30 hover:!bg-pink-700/50",re(t.group,q())&&"active"))]),Dt("mouseenter",V,P),Dt("mouseleave",V,H),c(b,Z),De(),m()}wa(["click"]);export{kr as E,nt as a,wn as b,An as c,qt as d,wr as g};
