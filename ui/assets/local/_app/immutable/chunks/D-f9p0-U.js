import"./CWj6FrbW.js";import{p as ee,K as Oe,f as D,d as X,e as j,b as te,j as I,r as P,L as xe,i as ae,c as ce,u as Q,h as J,t as se,at as N,au as Se,aO as q,s as E,g as n,v as z,I as Me}from"./UnFCzZBm.js";import{s as Ae,o as he}from"./CX2avYX0.js";import{i as Y}from"./pI5hk1MB.js";import{a as R,C as ge,d as Ie,b as Pe}from"./fCvEOUPS.js";import{s as re,c as Te}from"./CDVS_aRO.js";import{p as h,s as de,r as ue,a as $,b as U}from"./GmGfGY7t.js";import{I as ve}from"./dWO51a22.js";import{t as K}from"./BBLBidKq.js";import{c as He}from"./CROwkM3p.js";import{b as Le}from"./BEPBwaRr.js";import{b as _e}from"./4awWeR2C.js";import{t as Ne,s as je}from"./D0i66SBM.js";import{a as ke}from"./B2F5qMuF.js";import{c as Be,g as Fe}from"./BhQADuZN.js";import{w as ie}from"./CDMQnRTF.js";const fe="menu-context";var ze=D("<div><!></div>");function ht(t,e){ee(e,!0);const i=()=>$(y(),"$open",l),[l,k]=de(),y=h(e,"open",19,()=>ie(!1)),g=ue(e,["$$slots","$$events","$$legacy","open","class","children","onclose"]),O=ie(!1),C=ie(null),p=()=>{i()&&(e.onclose===null||e.onclose===void 0||e.onclose(),U(y(),!1))};Oe(fe,{open:y(),keepOpen:O,menuElement:C});var u=ze();R(u,c=>({class:c,...g}),[()=>K("relative",e.class)]);var x=I(u);X(x,()=>e.children,i),P(u),ke(u,(c,S)=>{var f;return(f=Be)==null?void 0:f(c,S)},()=>p),j(t,u),te(),k()}const be='input, li[role="option"]:not([aria-disabled="true"]), li[role="menuitem"]:not([aria-disabled="true"])';var Xe=D("<a><div><!></div> <!></a>"),Ue=D("<div> </div>"),Ve=D('<li><!> <div class="grow"><div><!> <!></div> <!></div> <!></li>');function gt(t,e){ee(e,!0);const i=()=>$(S,"$keepOpen",l),[l,k]=de(),y=h(e,"destructive",3,!1),g=h(e,"disabled",3,!1),O=h(e,"href",3,null),C=h(e,"description",3,null),p=h(e,"centered",3,!1),u=h(e,"hoverable",3,!0),x=h(e,"newTab",3,!1),c=ue(e,["$$slots","$$events","$$legacy","class","selected","destructive","disabled","href","description","centered","hoverable","newTab","onclick","children","leading","trailing"]),{keepOpen:S,open:f}=xe(fe),_=b=>{switch(b.stopPropagation(),b.key){case"Escape":U(f,!1);break;case"ArrowDown":case"ArrowRight":w(b.currentTarget);break;case"ArrowUp":case"ArrowLeft":A(b.currentTarget);break;case" ":case"Enter":e.onclick===null||e.onclick===void 0||e.onclick(),i()||U(f,!1);break}},w=b=>{let s=b.nextElementSibling;for(;s&&!s.matches(be);)s=s.nextElementSibling;s&&s instanceof HTMLLIElement&&s.focus()},A=b=>{let s=b.previousElementSibling;for(;s&&!s.matches(be);)s=s.previousElementSibling;s&&s instanceof HTMLLIElement&&s.focus()},T=()=>{i()||U(f,!1),e.onclick===null||e.onclick===void 0||e.onclick()};var H=ae(),V=ce(H);{var G=b=>{var s=Xe();R(s,o=>({href:O(),target:x()?"_blank":null,rel:x()?"noreferrer":null,role:"menuitem",class:o,"aria-hidden":g()?"true":"false","aria-disabled":g(),tabindex:g()?-1:0,"data-track-name":"menuitem","data-track-intent":"navigate","data-track-text":"*textContent*",onkeydown:_,...c,[ge]:{disabled:g(),hoverable:u()}}),[()=>K("menu-item","m-1 px-3 py-2","flex items-center gap-2",p()?"justify-center":"justify-between",e.class)],void 0,void 0,"svelte-xmojui");var m=I(s),r=I(m);X(r,()=>e.children??Q),P(m);var d=J(m,2);{var v=o=>{ve(o,{height:20,width:20,name:"external-link"})};Y(d,o=>{x()&&o(v)})}P(s),j(b,s)},W=b=>{var s=Ve();R(s,M=>({role:"menuitem",class:M,"aria-hidden":g()?"true":"false","aria-disabled":g(),tabindex:g()?-1:0,"data-track-name":"menuitem","data-track-intent":"action","data-track-text":"*textContent*",onkeydown:_,onclick:T,...c,[ge]:{destructive:y(),disabled:g(),selected:e.selected,hoverable:u()}}),[()=>K("menu-item","m-1 px-3 py-2","flex items-center gap-2",e.class)],void 0,void 0,"svelte-xmojui");var m=I(s);X(m,()=>e.leading??Q);var r=J(m,2),d=I(r);let v;var o=I(d);X(o,()=>e.children??Q);var a=J(o,2);{var F=M=>{ve(M,{name:"checkmark",class:"shrink-0"})};Y(a,M=>{e.selected&&M(F)})}P(d);var L=J(d,2);{var B=M=>{var Z=Ue();let me;var Ee=I(Z,!0);P(Z),se(()=>{me=re(Z,1,"menu-item-description svelte-xmojui",null,me,{"text-center":p()}),Ae(Ee,C())}),j(M,Z)};Y(L,M=>{C()&&M(B)})}P(r);var ne=J(r,2);X(ne,()=>e.trailing??Q),P(s),se(()=>v=re(d,1,"menu-item-wrapper svelte-xmojui",null,v,{centered:p()})),j(b,s)};Y(V,b=>{O()?b(G):b(W,!1)})}j(t,H),te(),k()}function oe(t,e=document.body){const i=typeof e=="string"?document.querySelector(e):e;return i?(i.appendChild(t),{destroy(){t.parentNode&&t.parentNode.removeChild(t)}}):(console.warn("Portal target not found"),{destroy(){}})}function We(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight,right:window.innerWidth}}function le(t){const e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom,right:e.right}}function pe(t,e,i){return{top:{x:t.left+t.width/2-e.width/2,y:t.top-e.height},bottom:{x:t.left+t.width/2-e.width/2,y:t.bottom},left:{x:t.left-e.width,y:t.top+t.height/2-e.height/2},right:{x:t.right,y:t.top+t.height/2-e.height/2},"top-left":{x:t.left,y:t.top-e.height},"top-right":{x:t.right-e.width,y:t.top-e.height},"bottom-left":{x:t.left,y:t.bottom},"bottom-right":{x:t.right-e.width,y:t.bottom}}[i]}function we(t,e){return{x:t.x+(e.x??0),y:t.y+(e.y??0)}}function ye(t,e,i,l){return{top:e<l.top,bottom:e+i.height>l.bottom,left:t<l.left,right:t+i.width>l.right}}function Ye(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-left","top-right":"bottom-right","bottom-left":"top-left","bottom-right":"top-right"}[t]}function qe(t,e,i){const l={x:t.x??0,y:t.y??0};return(e.includes("top")&&i.includes("bottom")||e.includes("bottom")&&i.includes("top"))&&(l.y=t.y?-t.y:0),(e.includes("left")&&i.includes("right")||e.includes("right")&&i.includes("left"))&&(l.x=t.x?-t.x:0),l}function Ke(t,e,i,l){let k=t,y=e;return t<l.left?k=l.left:t+i.width>l.right&&(k=l.right-i.width),e<l.top?y=l.top:e+i.height>l.bottom&&(y=l.bottom-i.height),{x:k,y}}function De(t,e,i,l,k,y){const g=y||We(),O=pe(t,e,i);let C=we(O,l),p=!1,u=i;if(k){const c=ye(C.x,C.y,e,g);if(c.top||c.bottom||c.left||c.right){const S=Ye(i),f=qe(l,i,S),_=pe(t,e,S),w=we(_,f),A=ye(w.x,w.y,e,g),T=[c.top,c.bottom,c.left,c.right].filter(Boolean).length;[A.top,A.bottom,A.left,A.right].filter(Boolean).length<T&&(C=w,p=!0,u=S)}}const x=Ke(C.x,C.y,e,g);return{x:x.x,y:x.y,flipped:p,finalPosition:u}}var Ge=D('<div class="pointer-events-auto fixed left-0 top-0"><div><!></div></div>');function Je(t,e){ee(e,!0);let i=h(e,"open",3,!0),l=h(e,"position",3,"bottom"),k=h(e,"offset",19,()=>({})),y=h(e,"target",19,()=>document.body),g=h(e,"hideWhenAnchorHidden",3,!0),O=h(e,"scrollContainer",3,window),C=h(e,"flipOnCollision",3,!0),p=h(e,"class",3,""),u=N(void 0),x=N(!0),c=N(0),S=N(0),f=N(null),_=N(Se(window)),w=N(null);const A=z(()=>i()&&n(f)&&(!g()||n(x)));q(function(){typeof e.anchor=="string"?E(f,document.getElementById(e.anchor),!0):E(f,e.anchor,!0)}),q(function(){if(typeof O()=="string"){const r=document.getElementById(O());E(_,r||window,!0)}else E(_,O(),!0)}),q(function(){if(!n(f)||!g()){E(x,!0);return}const r=new IntersectionObserver(d=>{const v=d[0];E(x,v.isIntersecting,!0)},{threshold:0,root:n(_)!==window?n(_):null});return r.observe(n(f)),()=>{r.disconnect()}});function T(){if(!n(u)||!n(f))return;const m=le(n(f)),r=le(n(u)),d=n(_)!==window?le(n(_)):void 0,v=De(m,r,l(),k(),C(),d),o=Math.round(v.x),a=Math.round(v.y);n(c)!==o&&E(c,o,!0),n(S)!==a&&E(S,a,!0)}function H(){n(w)!==null&&cancelAnimationFrame(n(w)),E(w,requestAnimationFrame(()=>{T(),E(w,null)}),!0)}function V(m){const r=new Set([document]);let d=m.parentElement;for(;d;){const{overflow:v,overflowX:o,overflowY:a}=window.getComputedStyle(d);[v,o,a].some(L=>L==="auto"||L==="scroll"||L==="overlay")&&r.add(d),d=d.parentElement}return r}function G(m){if(!n(f))return;Me(()=>T());const r=new ResizeObserver(()=>{H()});r.observe(m),r.observe(n(f));const d=V(n(f)),v=he(document,"scroll",a=>{a.target&&d.has(a.target)&&H()},{passive:!0,capture:!0}),o=he(window,"resize",H,{passive:!0});return()=>{n(w)!==null&&(cancelAnimationFrame(n(w)),E(w,null)),r.disconnect(),v(),o()}}var W=ae(),b=ce(W);{var s=m=>{var r=Ge();let d;var v=I(r),o=I(v);X(o,()=>e.children),P(v),P(r),_e(r,a=>E(u,a),()=>n(u)),ke(r,(a,F)=>oe==null?void 0:oe(a,F),y),Ie(r,()=>G),se(a=>{d=Pe(r,"",d,{transform:`translate(${n(c)??""}px, ${n(S)??""}px)`,"will-change":"transform"}),re(v,1,a)},[()=>Te(K(p()))]),Ne(3,v,()=>je,()=>({duration:100,start:.95,opacity:0})),j(m,r)};Y(b,m=>{n(A)&&m(s)})}j(t,W),te()}const Ce=["surface-primary","min-w-fit","list-none","overflow-auto","border","border-subtle","text-primary","shadow","w-full"],Qe=He([...Ce,"absolute","z-20","mt-1","transition-all","duration-100","ease-out"],{variants:{position:{left:"left-0 origin-top-left",right:"right-0 origin-top-right","top-left":"left-0 origin-top-left","top-right":"right-0 origin-top-right"},state:{open:"visible scale-100 opacity-100",closed:"invisible scale-95 opacity-0"}}});var Ze=D("<ul><!></ul>");function vt(t,e){ee(e,!0);const i=()=>$(w,"$keepOpenCtx",k),l=()=>$(T,"$open",k),[k,y]=de(),g=(o,a)=>{let F=()=>a==null?void 0:a()._class,L=()=>a==null?void 0:a().style;var B=Ze();R(B,()=>({role:"menu",class:F(),"aria-labelledby":e.id,tabindex:-1,style:L(),id:e.id,onfocusout:W,onclick:b,...S}));var ne=I(B);X(ne,()=>e.children??Q),P(B),_e(B,M=>u(M),()=>u()),Le(B,"clientHeight",M=>E(f,M)),j(o,B)};let O=h(e,"class",3,""),C=h(e,"keepOpen",3,!1),p=h(e,"position",3,"left"),u=h(e,"menuElement",15,null),x=h(e,"maxHeight",3,"max-h-[20rem]"),c=h(e,"usePortal",3,!1),S=ue(e,["$$slots","$$events","$$legacy","class","id","keepOpen","position","menuElement","maxHeight","usePortal","scrollContainer","children"]),f=N(0),_=N(null);const{keepOpen:w,menuElement:A,open:T}=xe(fe);q(()=>{U(w,C())}),q(()=>{U(A,u())}),q(function(){c()&&e.id&&E(_,document.querySelector(`[aria-controls="${e.id}"]`),!0)});const H=z(()=>{if(c())return p().includes("top")?p():p()==="left"?"bottom-left":"bottom-right"}),V=z(()=>u()?Fe(u()):[]),G=z(()=>n(V)[n(V).length-1]),W=o=>{!i()&&o.target===n(G)&&U(T,!1)},b=o=>{o.stopPropagation()},s=z(()=>Qe({position:p(),state:l()?"open":"closed"}));var m=ae(),r=ce(m);{var d=o=>{Je(o,{get anchor(){return n(_)},get open(){return l()},get position(){return n(H)},get scrollContainer(){return e.scrollContainer},children:(a,F)=>{{let L=z(()=>({_class:K(Ce,x(),O())}));g(a,()=>n(L))}},$$slots:{default:!0}})},v=o=>{{let a=z(()=>({_class:K(n(s),x(),O()),style:p()==="top-right"||p()==="top-left"?`top: -${n(f)+16}px;`:void 0}));g(o,()=>n(a))}};Y(r,o=>{c()&&n(_)?o(d):o(v,!1)})}j(t,m),te(),y()}export{fe as M,be as a,gt as b,ht as c,vt as d};
