import"./Bzak7iHL.js";import{p as Le,u as a,t as j,i as n,n as ve,k as X,j as I,e as c,c as i,r,a8 as W,g as e,b as Me,h as Ce,f as re,d as ya,o as ae,l as ot,s as Ee,m as Ye,M as Fe,a as gt,q as Bt,aj as mt,ag as jt,ah as ha}from"./C-0kx8Rl.js";import{s as w,d as wa,e as Dt}from"./B-1TjF6E.js";import{i as f}from"./DIXBMONz.js";import{e as Ne,i as yt}from"./CdE3I_3f.js";import{c as Ut,a as st,s as ft}from"./DliSAU7O.js";import{s as ht,a as ke,l as it,p as K,b as _t}from"./B0Wc33k0.js";import{o as ka}from"./Dl-yZlXH.js";import{p as Re}from"./EwURvOBi.js";import{B as Oe}from"./CqraL4jo.js";import{C as qe}from"./C7PnEZmO.js";import{I as zt}from"./BQ19dEFL.js";import{L as Ve}from"./D4akwsN4.js";import{T as pt}from"./D7zMa2zU.js";import{t as d}from"./BXv1jDVW.js";import{i as J,e as ba,a as Ta,b as Ia}from"./CrB4ktaz.js";import{i as Aa}from"./ClpCRdvw.js";import{a as Ea}from"./CugiL4oY.js";import{f as Ze,t as Wt,r as Gt,a as Kt}from"./BnZXuwac.js";import{c as Pa,d as Sa}from"./ChUka4xP.js";import{a as Fa,b as Ca,g as La}from"./cWJbyEIX.js";import{b as Ma,f as ja,d as rt,s as Da,c as Ha,e as Ra,h as Na,j as Oa}from"./PXShEnOq.js";import{h as Ie,F as qa}from"./BiIdkX4r.js";import{s as Qt,f as lt}from"./ByTIZu23.js";import{t as Jt,f as Xt,P as Va}from"./BlbCUVSL.js";import{y as Ht}from"./2uWpc1Jl.js";import{c as Rt,k as Ba,l as Ua,a as za,b as Nt}from"./CTtNUWqp.js";import{C as Ae}from"./CjXSN14h.js";import{o as Wa}from"./C8ejR22J.js";import{s as Ot}from"./BDfAQ6r3.js";import{T as Yt}from"./D-7Yb9FW.js";import{g as Zt}from"./1oYrAA8G.js";import"./69_IOA4Y.js";import{i as wt,t as xt}from"./DFzl7kYA.js";import{p as Ga}from"./DRMse3no.js";import"./D0Jyh3oV.js";import"./BuRZGomK.js";import{M as $t}from"./DgtgIYBM.js";import{P as nt}from"./CtxkR3DC.js";const qt=async(T,t)=>{var y,h,k,b,l,_,F,D,x,H,C;if(!("eventType"in T)||!Ie(T))return;const{namespace:o,settings:m,accessToken:u}=t,p={...m,codec:{...m==null?void 0:m.codec,endpoint:La(m),passAccessToken:Ca(m),includeCredentials:Fa(m)}};try{const R=await Pa(T.attributes,o,p,u),g=((k=(h=(y=T.markerRecordedEventAttributes)==null?void 0:y.details)==null?void 0:h.data)==null?void 0:k.payloads)||((_=(l=(b=T.markerRecordedEventAttributes)==null?void 0:b.details)==null?void 0:l.type)==null?void 0:_.payloads)||[];if(!(g!=null&&g.length))return;const P=Sa(R),V=(C=((D=(F=P==null?void 0:P.details)==null?void 0:F.data)==null?void 0:D.payloads)||((H=(x=P==null?void 0:P.details)==null?void 0:x.type)==null?void 0:H.payloads))==null?void 0:C[0],U=Ma(V);if(U)return ja("ActivityType",U)}catch(R){console.error("Failed to decode local activity type:",R)}},wn=T=>{if("eventList"in T)return T.eventList.find(Ie);if(Ie(T))return T},we=(T,t=W,o=W)=>{var m=Qa(),u=n(m),p=n(u,!0);r(u);var y=i(u,2),h=n(y);{var k=l=>{var _=X();I(()=>w(_,o())),c(l,_)},b=l=>{var _=Ce(),F=re(_);ya(F,()=>o()??W),c(l,_)};f(h,l=>{typeof o()=="string"||typeof o()=="number"?l(k):l(b,!1)})}r(y),r(m),I(()=>w(p,t())),c(T,m)};var Ka=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Qa=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ja=j("<!> ",1),Xa=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Ya=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Za=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),$a=j('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),er=j('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),tr=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function ar(T,t){Le(t,!0);const[o,m]=ht(),u=()=>ke(Kt,"$timeFormat",o),p=()=>ke(Gt,"$relativeTime",o),y=()=>ke(Wt,"$timestampFormat",o),h=(s,E=W)=>{var N=Ka(),ne=n(N),Z=n(ne,!0);r(ne);var q=i(ne,2),ie=n(q),ue=i(ie),le=n(ue);r(ue),r(q),r(N),I((oe,_e)=>{w(Z,oe),w(ie,`${_e??""} `),w(le,`(${E()??""})`)},[()=>d("workflows.next-retry"),()=>Ze(t.operation.nextAttemptScheduleTime,u(),{relative:p(),format:y(),relativeLabel:""})]),c(s,N)},k=s=>{const E=a(()=>e(l)?"danger":"default");Oe(s,{class:"mr-1",get type(){return e(E)},children:(N,ne)=>{var Z=Ja(),q=re(Z);const ie=a(()=>e(l)&&"font-bold text-red-400");zt(q,{get class(){return`mr-1 ${e(ie)??""}`},name:"retry"});var ue=i(q);I(()=>w(ue,` ${t.operation.attempt??0}`)),c(N,Z)},$$slots:{default:!0}})},b=s=>{var E=Za(),N=n(E),ne=n(N);{var Z=le=>{var oe=Xa(),_e=re(oe),We=n(_e,!0);r(_e);var Ge=i(_e,2);const Se=a(()=>Ot(Wa(t.operation.lastAttemptFailure,"stackTrace"))),Ke=a(()=>d("common.copy-icon-title")),Qe=a(()=>d("common.copy-success-icon-title"));Ae(Ge,{get content(){return e(Se)},maxHeight:384,get copyIconTitle(){return e(Ke)},get copySuccessIconTitle(){return e(Qe)}}),I(vt=>w(We,vt),[()=>d("workflows.last-failure")]),c(le,oe)};f(ne,le=>{t.operation.lastAttemptFailure&&le(Z)})}r(N);var q=i(N,2),ie=n(q);{var ue=le=>{var oe=Ya(),_e=re(oe),We=n(_e,!0);r(_e);var Ge=i(_e,2);const Se=a(()=>d("common.copy-icon-title")),Ke=a(()=>d("common.copy-success-icon-title"));Ae(Ge,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(Se)},get copySuccessIconTitle(){return e(Ke)}}),I(Qe=>w(We,Qe),[()=>d("common.stack-trace")]),c(le,oe)};f(ie,le=>{var oe;(oe=t.operation.lastAttemptFailure)!=null&&oe.stackTrace&&le(ue)})}r(q),r(E),c(s,E)},l=a(()=>t.operation.attempt>1);var _=tr(),F=n(_),D=n(F),x=n(D);Oe(x,{children:(s,E)=>{ve();var N=X();I(()=>w(N,t.operation.state)),c(s,N)},$$slots:{default:!0}});var H=i(x,2),C=n(H,!0);r(H),r(D),r(F);var R=i(F,2),g=n(R),P=n(g);{var V=s=>{var E=ae(()=>d("nexus.endpoint"));we(s,()=>e(E),()=>t.operation.endpoint)};f(P,s=>{t.operation.endpoint&&s(V)})}var U=i(P,2);{var B=s=>{var E=ae(()=>d("nexus.service"));we(s,()=>e(E),()=>t.operation.service)};f(U,s=>{t.operation.service&&s(B)})}var Q=i(U,2);{var z=s=>{var E=ae(()=>d("nexus.operation"));we(s,()=>e(E),()=>t.operation.operation)};f(Q,s=>{t.operation.operation&&s(z)})}var Y=i(Q,2);{var pe=s=>{var E=ae(()=>d("nexus.operation-token"));we(s,()=>e(E),()=>t.operation.operationToken)};f(Y,s=>{t.operation.operationToken&&s(pe)})}var ge=i(Y,2),L=ae(()=>d("workflows.attempt"));we(ge,()=>e(L),()=>k);var A=i(ge,2);{var S=s=>{var E=Ce();const N=a(()=>Jt({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var ne=re(E);{var Z=q=>{h(q,()=>e(N))};f(ne,q=>{e(N)&&q(Z)})}c(s,E)};f(A,s=>{t.operation.nextAttemptScheduleTime&&s(S)})}var G=i(A,2);{var me=s=>{var E=ae(()=>d("workflows.last-attempt-completed-time")),N=ae(()=>Ze(t.operation.lastAttemptCompleteTime,u(),{relative:p(),format:y()}));we(s,()=>e(E),()=>e(N))};f(G,s=>{t.operation.lastAttemptCompleteTime&&s(me)})}var Pe=i(G,2);{var Be=s=>{var E=ae(()=>d("workflows.schedule-event-id"));we(s,()=>e(E),()=>t.operation.scheduledEventId)};f(Pe,s=>{t.operation.scheduledEventId&&s(Be)})}var je=i(Pe,2);{var Ue=s=>{var E=ae(()=>d("workflows.scheduled-time")),N=ae(()=>Ze(t.operation.scheduledTime,u(),{relative:p(),format:y()}));we(s,()=>e(E),()=>e(N))};f(je,s=>{t.operation.scheduledTime&&s(Ue)})}var de=i(je,2);{var se=s=>{var E=ae(()=>d("workflows.schedule-to-close-timeout"));we(s,()=>e(E),()=>t.operation.scheduleToCloseTimeout)};f(de,s=>{t.operation.scheduleToCloseTimeout&&s(se)})}r(g);var fe=i(g,2),be=n(fe);{var ye=s=>{b(s)};f(be,s=>{e(l)&&s(ye)})}var ze=i(be,2);{var ct=s=>{var E=$a(),N=n(E),ne=n(N,!0);r(N);var Z=i(N,2);const q=a(()=>d("common.copy-icon-title")),ie=a(()=>d("common.copy-success-icon-title"));Ae(Z,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(q)},get copySuccessIconTitle(){return e(ie)}}),r(E),I(ue=>w(ne,ue),[()=>d("nexus.blocked-reason")]),c(s,E)};f(ze,s=>{t.operation.blockedReason&&s(ct)})}var $e=i(ze,2);{var et=s=>{var E=er(),N=n(E),ne=n(N,!0);r(N);var Z=i(N,2);const q=a(()=>Ot(t.operation.cancellationInfo)),ie=a(()=>d("common.copy-icon-title")),ue=a(()=>d("common.copy-success-icon-title"));Ae(Z,{language:"text",get content(){return e(q)},get copyIconTitle(){return e(ie)},get copySuccessIconTitle(){return e(ue)}}),r(E),I(le=>w(ne,le),[()=>d("nexus.cancellation-info")]),c(s,E)};f($e,s=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&s(et)})}r(fe),r(R),r(_),I(s=>w(C,s),[()=>d("workflows.pending-nexus-operation")]),c(T,_),Me(),m()}function ea(T,t){const o=it(t,["children","$$slots","$$events","$$legacy"]),m=it(o,["value","attributes","type"]);Le(t,!1);const[u,p]=ht(),y=()=>ke(Ga,"$page",u),h=Ye(),k=Ye(),b=Ye();let l=K(t,"value",8),_=K(t,"attributes",8),F=K(t,"type",8);function D(x,H,C,R,g){return g==="execution"?Rt({namespace:x,workflow:H,run:R}):g==="task-queue"?Ba({namespace:x,queue:R}):g==="child-workflow"?Rt({namespace:x,workflow:C.workflowExecutionWorkflowId,run:C.workflowExecutionRunId}):g==="nexus-endpoint"?Ua(R):""}ot(()=>(e(h),e(k),y()),()=>{(x=>(Ee(h,x.workflow),Ee(k,x.namespace)))(y().params)}),ot(()=>(e(k),e(h),Fe(_()),Fe(l()),Fe(F())),()=>{Ee(b,D(e(k),e(h),_(),l(),F()))}),gt(),wt(),Ve(T,{get class(){return m.class},get href(){return e(b)},children:(x,H)=>{ve();var C=X();I(()=>w(C,l())),c(x,C)},$$slots:{default:!0}}),Me(),p()}const rr=(T,t=W)=>{var o=cr();const m=a(()=>Zt(t())),u=a(()=>{var l;return((l=e(m).split("workflows/"))==null?void 0:l[1])||e(m)});var p=n(o),y=n(p,!0);r(p);var h=i(p,2);const k=a(()=>d("common.copy-icon-title")),b=a(()=>d("common.copy-success-icon-title"));qe(h,{get copyIconTitle(){return e(k)},get copySuccessIconTitle(){return e(b)},get content(){return e(u)},children:(l,_)=>{Ve(l,{get href(){return e(m)},class:"whitespace-pre-line",children:(F,D)=>{ve();var x=X();I(()=>w(x,e(u))),c(F,x)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(o),I(l=>w(y,l),[()=>d("nexus.link")]),c(T,o)},nr=(T,t=W)=>{var o=vr();const m=a(()=>za({namespace:t().workflowEvent.namespace}));var u=n(o),p=n(u,!0);r(u);var y=i(u,2);const h=a(()=>d("common.copy-icon-title")),k=a(()=>d("common.copy-success-icon-title"));qe(y,{get copyIconTitle(){return e(h)},get copySuccessIconTitle(){return e(k)},get content(){return t().workflowEvent.namespace},children:(b,l)=>{Ve(b,{get href(){return e(m)},class:"whitespace-pre-line",children:(_,F)=>{ve();var D=X();I(()=>w(D,t().workflowEvent.namespace)),c(_,D)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(o),I(b=>w(p,b),[()=>d("nexus.link-namespace")]),c(T,o)},or=(T,t=W)=>{var o=Ce(),m=re(o);Ne(m,17,t,yt,(u,p,y,h)=>{var k=dr(),b=re(k);rr(b,()=>e(p));var l=i(b,2);nr(l,()=>e(p)),c(u,k)}),c(T,o)},sr=(T,t=W)=>{var o=ur(),m=i(n(o),2),u=n(m);const p=a(()=>d("events.decode-failed"));$t(u,{get value(){return t()},get fallback(){return e(p)},children:Bt,$$slots:{default:(y,h)=>{const k=a(()=>h.decodedValue);ve();var b=X();I(()=>w(b,e(k))),c(y,b)}}}),r(m),r(o),c(T,o)},ir=(T,t=W,o=W)=>{var m=fr();const u=a(()=>Ha(o())),p=a(()=>Ra(e(u)));var y=re(m),h=n(y),k=n(h,!0);r(h);var b=i(h,2);{var l=x=>{nt(x,{get value(){return o()},key:"payloads",children:(C,R=W)=>{const g=a(()=>d("common.copy-icon-title")),P=a(()=>d("common.copy-success-icon-title"));Ae(C,{get content(){return R()},maxHeight:384,get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(P)}})},$$slots:{default:!0}})},_=(x,H)=>{{var C=g=>{const P=a(()=>({searchAttributes:e(u)}));nt(g,{key:"searchAttributes",get value(){return e(P)},children:(U,B=W)=>{const Q=a(()=>d("common.copy-icon-title")),z=a(()=>d("common.copy-success-icon-title"));Ae(U,{get content(){return B()},maxHeight:384,get copyIconTitle(){return e(Q)},get copySuccessIconTitle(){return e(z)}})},$$slots:{default:!0}})},R=g=>{nt(g,{get value(){return e(u)},children:(V,U=W)=>{const B=a(()=>d("common.copy-icon-title")),Q=a(()=>d("common.copy-success-icon-title"));Ae(V,{get content(){return U()},maxHeight:384,get copyIconTitle(){return e(B)},get copySuccessIconTitle(){return e(Q)}})},$$slots:{default:!0}})};f(x,g=>{t()==="searchAttributes"?g(C):g(R,!1)},H)}};f(b,x=>{var H;(H=o())!=null&&H.payloads?x(l):x(_,!1)})}r(y);var F=i(y,2);{var D=x=>{var H=mr(),C=n(H),R=n(C,!0);r(C);var g=i(C,2);const P=a(()=>d("common.copy-icon-title")),V=a(()=>d("common.copy-success-icon-title"));Ae(g,{get content(){return e(p)},language:"text",maxHeight:384,get copyIconTitle(){return e(P)},get copySuccessIconTitle(){return e(V)}}),r(H),I(U=>w(R,U),[()=>d("workflows.call-stack-tab")]),c(x,H)};f(F,x=>{e(p)&&x(D)})}I(x=>w(k,x),[()=>lt(t())]),c(T,m)},lr=(T,t=W,o=W)=>{var m=pr(),u=n(m),p=n(u,!0);r(u);var y=i(u,2),h=n(y);{var k=l=>{Yt(l,{get dateTime(){return o()}})},b=l=>{var _=X();I(()=>w(_,o())),c(l,_)};f(h,l=>{Da(t())?l(k):l(b,!1)})}r(y),r(m),I(l=>w(p,l),[()=>lt(t())]),c(T,m)};var cr=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),vr=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),dr=j("<!> <!>",1),ur=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),mr=j('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),fr=j('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),_r=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),pr=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),xr=j('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),gr=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Vt(T,t){Le(t,!0);const o=(L,A=W,S=W)=>{var G=_r(),me=n(G),Pe=n(me,!0);r(me);var Be=i(me,2);const je=a(()=>d("common.copy-icon-title")),Ue=a(()=>d("common.copy-success-icon-title")),de=a(()=>String(S()));qe(Be,{get copyIconTitle(){return e(je)},get copySuccessIconTitle(){return e(Ue)},get content(){return e(de)},children:(se,fe)=>{const be=a(()=>String(S())),ye=a(()=>rt(A(),e(u)));ea(se,{get value(){return e(be)},get attributes(){return e(u)},get type(){return e(ye)},class:"whitespace-pre-line"})},$$slots:{default:!0}}),r(G),I(se=>w(Pe,se),[()=>lt(A())]),c(L,G)},m=a(()=>Ie(t.event)?d("events.category.local-activity"):Qt(t.event.name)),u=a(()=>Xt(t.event)),p=a(()=>Object.entries(e(u))),y=a(()=>e(p).filter(([L,A])=>typeof A=="object"&&Object.keys(A).length>0)),h=a(()=>e(p).filter(([L,A])=>rt(L,e(u))!=="none")),k=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),b=a(()=>e(p).filter(([L,A])=>typeof A!="object"&&rt(L,e(u))==="none"&&!e(k).includes(L)&&(L!=="namespace"||L==="namespace"&&Re.params.namespace!==A)));var l=gr(),_=n(l),F=n(_),D=n(F),x=n(D,!0);r(D);var H=i(D,2),C=n(H,!0);r(H),r(F);var R=i(F,2);Yt(R,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),r(_);var g=i(_,2),P=n(g),V=n(P);{var U=L=>{or(L,()=>t.event.links)};f(V,L=>{var A,S;(S=(A=t.event)==null?void 0:A.links)!=null&&S.length&&L(U)})}var B=i(V,2);{var Q=L=>{sr(L,()=>t.event.userMetadata.summary)};f(B,L=>{var A,S;(S=(A=t.event)==null?void 0:A.userMetadata)!=null&&S.summary&&L(Q)})}var z=i(B,2);Ne(z,17,()=>e(b),([L,A])=>L,(L,A)=>{lr(L,()=>e(A)[0],()=>e(A)[1])});var Y=i(z,2);Ne(Y,17,()=>e(h),([L,A])=>L,(L,A)=>{o(L,()=>e(A)[0],()=>e(A)[1])}),r(P);var pe=i(P,2);{var ge=L=>{var A=xr();Ne(A,21,()=>e(y),([S,G])=>S,(S,G)=>{ir(S,()=>e(G)[0],()=>e(G)[1])}),r(A),c(L,A)};f(pe,L=>{e(y).length&&L(ge)})}r(g),r(l),I(()=>{w(x,t.event.id),w(C,e(m))}),c(T,l),Me()}var yr=j('<div class="flex flex-col overflow-hidden"><!> <!></div>');function hr(T,t){Le(t,!0);let o=K(t,"group",3,void 0),m=K(t,"event",3,void 0);const u=a(()=>(o()===null||o()===void 0?void 0:o().pendingActivity)||(o()===null||o()===void 0?void 0:o().pendingNexusOperation)),p=a(()=>o()&&(o().eventList.length>1||e(u)));var y=Ce(),h=re(y);{var k=l=>{var _=yr(),F=n(_);{var D=C=>{Va(C,{get activity(){return o().pendingActivity}})},x=(C,R)=>{{var g=P=>{ar(P,{get operation(){return o().pendingNexusOperation}})};f(C,P=>{var V;(V=o())!=null&&V.pendingNexusOperation&&P(g)},R)}};f(F,C=>{var R;(R=o())!=null&&R.pendingActivity?C(D):C(x,!1)})}var H=i(F,2);Ne(H,17,()=>o().eventList,yt,(C,R)=>{Vt(C,{get event(){return e(R)}})}),r(_),c(l,_)},b=(l,_)=>{{var F=D=>{Vt(D,{get event(){return m()}})};f(l,D=>{m()&&D(F)},_)}};f(h,l=>{e(p)?l(k):l(b,!1)})}c(T,y),Me()}var wr=j('<p class="whitespace-nowrap text-right text-xs"> </p>'),kr=j('<div><code class="svelte-1qb2863"><pre class="truncate svelte-1qb2863"> </pre></code></div>'),br=j('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),Tr=j('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function at(T,t){const o=it(t,["children","$$slots","$$events","$$legacy"]);Le(t,!1);const m=Ye();let u=K(t,"key",8),p=K(t,"value",8),y=K(t,"attributes",8),h=K(t,"showKey",8,!0);ot(()=>(Fe(u()),Fe(y())),()=>{Ee(m,rt(u(),y()))}),gt(),wt();var k=Ce(),b=re(k);{var l=_=>{var F=Tr(),D=n(F);{var x=g=>{var P=wr(),V=n(P,!0);r(P),I(U=>w(V,U),[()=>lt(u())],ae),c(g,P)};f(D,g=>{h()&&g(x)})}var H=i(D,2);{var C=g=>{var P=br(),V=n(P);nt(V,{get value(){return p()},key:"payloads",children:(B,Q=W)=>{var z=kr(),Y=n(z),pe=n(Y),ge=n(pe,!0);r(pe),r(Y),r(z),I((L,A)=>{st(z,1,L,"svelte-1qb2863"),w(ge,A)},[()=>Ut(xt("payload",o.class)),()=>Q().slice(0,60)],ae),c(B,z)},$$slots:{default:!0}}),r(P),c(g,P)},R=(g,P)=>{{var V=B=>{const Q=ae(()=>d("common.copy-icon-title")),z=ae(()=>d("common.copy-success-icon-title"));qe(B,{get copyIconTitle(){return e(Q)},get copySuccessIconTitle(){return e(z)},get content(){return p()},"container-class":"truncate",children:(Y,pe)=>{ea(Y,{get value(){return p()},get attributes(){return y()},get type(){return e(m)},class:"truncate"})},$$slots:{default:!0}})},U=B=>{Oe(B,{type:"subtle",class:"block select-none truncate",children:(Q,z)=>{ve();var Y=X();I(()=>w(Y,p())),c(Q,Y)},$$slots:{default:!0}})};f(g,B=>{e(m)!=="none"?B(V):B(U,!1)},P)}};f(H,g=>{typeof p()=="object"?g(C):g(R,!1)})}r(F),c(_,F)};f(b,_=>{u()&&_(l)})}c(T,k),Me()}var Ir=j('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function Ar(T,t){const o=it(t,["children","$$slots","$$events","$$legacy"]);Le(t,!1);var m=Ye();let u=K(t,"link",8),p=K(t,"value",28,()=>u().workflowEvent.workflowId),y=K(t,"label",24,()=>d("nexus.link")),h=K(t,"href",12,void 0);ot(()=>(Fe(h()),Fe(u()),mt(m)),()=>{h()||(h(Zt(u())),p((Ee(m,h().split("workflows/"))===null||mt(m)===void 0?void 0:mt(m)[1])||h()))}),gt(),wt();var k=Ir(),b=n(k),l=n(b,!0);r(b);var _=i(b,2),F=n(_);Ve(F,{get href(){return h()},children:(D,x)=>{ve();var H=X();I(()=>w(H,p())),c(D,H)},$$slots:{default:!0}}),r(_),r(k),I(()=>{st(k,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${o.class??""}`),w(l,y()),st(_,1,`overflow-hidden ${o.linkClass??""}`)}),c(T,k),Me()}var Er=j('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Pr=j('<td class="font-mono"><!></td>'),Sr=j(" <!>",1),Fr=j("<!> <!>",1),Cr=j('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Lr=j('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Mr=j('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),jr=j('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p class="whitespace-nowrap font-semibold md:text-base"> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function kn(T,t){Le(t,!0);const[o,m]=ht(),u=()=>ke(Kt,"$timeFormat",o),p=()=>ke(Gt,"$relativeTime",o),y=()=>ke(Wt,"$timestampFormat",o),h=()=>ke(Ea,"$authUser",o),k=()=>ke(Aa,"$isCloud",o);var b,l,_,F,D,x,H,C;let R=K(t,"compact",3,!1),g=K(t,"expanded",3,!1),P=K(t,"onRowClick",3,()=>{}),V=K(t,"hoveredEventId",15),U=jt(ha(g())),B=jt(void 0);const Q=a(()=>J(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),z=a(()=>Re.params),Y=a(()=>e(z).workflow),pe=a(()=>e(z).run),ge=a(()=>e(z).namespace),L=a(()=>Nt({eventId:t.event.id,namespace:e(ge),workflow:e(Y),run:e(pe)})),A=a(()=>Xt(t.event)),S=a(()=>J(t.event)?t.event.events.get(e(Q)):t.event),G=a(()=>Ht({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:J(e(S))?(b=e(S).initialEvent)===null||b===void 0?void 0:b.eventTime:e(S)===null||e(S)===void 0?void 0:e(S).eventTime,includeMillisecondsForUnderSecond:!0})),me=a(()=>J(t.event)?Ht({start:(l=t.event.initialEvent)===null||l===void 0?void 0:l.eventTime,end:(_=t.event.lastEvent)===null||_===void 0?void 0:_.eventTime,includeMillisecondsForUnderSecond:!0}):""),Pe=a(()=>ba(t.event)),Be=a(()=>Ta(t.event)),je=a(()=>Ia(t.event)),Ue=a(()=>J(t.event)?t.event.label:Ie(t.event)?d("events.category.local-activity"):Qt(t.event.name)),de=a(()=>Ie(t.event)?void 0:Na(J(t.event)?t.event.initialEvent:t.event)),se=a(()=>Oa(J(t.event)?t.event.lastEvent:t.event,e(de)===null||e(de)===void 0?void 0:e(de).key)),fe=a(()=>J(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),be=a(()=>e(fe)&&(e(fe)===null||e(fe)===void 0?void 0:e(fe).paused)),ye=a(()=>J(t.event)&&t.event.isPending&&(((F=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||F===void 0?void 0:F.attempt)||((D=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||D===void 0?void 0:D.attempt))),ze=a(()=>J(t.event)&&!t.event.isPending&&((H=(x=t.event.eventList.find(qa))===null||x===void 0?void 0:x.attributes)===null||H===void 0?void 0:H.attempt)),ct=a(()=>R()&&(e(se)===null||e(se)===void 0?void 0:e(se).key)&&(e(se)===null||e(se)===void 0?void 0:e(se).key)!==(e(de)===null||e(de)===void 0?void 0:e(de).key)&&!(!((C=e(S)===null||e(S)===void 0?void 0:e(S).userMetadata)===null||C===void 0)&&C.summary)),$e=a(()=>Ze(e(S)===null||e(S)===void 0?void 0:e(S).eventTime,u(),{relative:p(),format:y()})),et=a(()=>Ze(e(S)===null||e(S)===void 0?void 0:e(S).eventTime,u(),{relative:p(),format:"short"})),s=v=>{Ee(U,!e(U)),v.stopPropagation(),P()()},E=()=>{V(t.event.id)},N=()=>{V(void 0)};let ne=(v,M)=>{var O;return(O=v==null?void 0:v.eventIds)===null||O===void 0?void 0:O.has(M)};ka(async()=>{Ie(t.event)?Ee(B,await qt(t.event,{namespace:Re.params.namespace,settings:Re.data.settings,accessToken:h().accessToken}),!0):J(t.event)&&Ie(t.event.initialEvent)&&Ee(B,await qt(t.event.initialEvent,{namespace:Re.params.namespace,settings:Re.data.settings,accessToken:h().accessToken}),!0)});var Z=jr(),q=re(Z);q.__click=s;var ie=n(q);{var ue=v=>{var M=Er(),O=n(M);Ne(O,21,()=>t.event.eventList,yt,($,ee)=>{const te=a(()=>Nt({eventId:e(ee).id,namespace:e(ge),workflow:e(Y),run:e(pe)}));Ve($,{"data-testid":"link",get href(){return e(te)},children:(ce,Te)=>{ve();var xe=X();I(()=>w(xe,e(ee).id)),c(ce,xe)},$$slots:{default:!0}})}),r(O),r(M),c(v,M)},le=v=>{var M=Pr(),O=n(M);Ve(O,{"data-testid":"link",get href(){return e(L)},children:($,ee)=>{ve();var te=X();I(()=>w(te,t.event.id)),c($,te)},$$slots:{default:!0}}),r(M),c(v,M)};f(ie,v=>{J(t.event)?v(ue):v(le,!1)})}var oe=i(ie),_e=n(oe);const We=a(()=>J(t.event)&&!e(me)||!e(G)),Ge=a(()=>J(t.event)?`Duration: ${e(me)}`:`+${e(G)}`);pt(_e,{get hide(){return e(We)},get text(){return e(Ge)},class:"block",bottom:!0,children:(v,M)=>{const O=a(()=>d("common.copy-icon-title")),$=a(()=>d("common.copy-success-icon-title"));qe(v,{get copyIconTitle(){return e(O)},get copySuccessIconTitle(){return e($)},get content(){return e(et)},children:(ee,te)=>{ve();var ce=X();I(()=>w(ce,e(et))),c(ee,ce)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(oe);var Se=i(oe),Ke=n(Se);const Qe=a(()=>J(t.event)&&!e(me)||!e(G)),vt=a(()=>J(t.event)?`Duration: ${e(me)}`:`+${e(G)}`);pt(Ke,{get hide(){return e(Qe)},get text(){return e(vt)},class:"block",bottom:!0,children:(v,M)=>{const O=a(()=>d("common.copy-icon-title")),$=a(()=>d("common.copy-success-icon-title"));qe(v,{get copyIconTitle(){return e(O)},get copySuccessIconTitle(){return e($)},get content(){return e($e)},children:(ee,te)=>{ve();var ce=X();I(()=>w(ce,e($e))),c(ee,ce)},$$slots:{default:!0}})},$$slots:{default:!0}}),r(Se);var dt=i(Se),kt=n(dt),ta=n(kt,!0);r(kt),r(dt);var ut=i(dt),bt=n(ut),Tt=n(bt);{var aa=v=>{const M=a(()=>e(be)?"warning":e(ye)>1?"danger":"default");Oe(v,{class:"mr-1",get type(){return e(M)},children:(O,$)=>{var ee=Fr(),te=re(ee);const ce=a(()=>xt("mr-1 inline",e(ye)>1&&"font-bold text-red-400",e(be)&&"font-bold text-yellow-700")),Te=a(()=>e(be)?"pause":"retry");zt(te,{get class(){return e(ce)},get name(){return e(Te)}});var xe=i(te),Je=i(xe);{var tt=he=>{var Xe=Sr(),Ft=re(Xe),fa=i(Ft);{var _a=De=>{var Ct=Ce();const Lt=a(()=>{var He;return Jt({date:(He=e(fe))==null?void 0:He.scheduledTime,negativeDefault:""})});var pa=re(Ct);{var xa=He=>{var Mt=X();I(ga=>w(Mt,`• ${ga??""}
                ${e(Lt)??""}`),[()=>d("workflows.next-retry")]),c(He,Mt)};f(pa,He=>{e(Lt)&&He(xa)})}c(De,Ct)};f(fa,De=>{e(ye)>1&&De(_a)})}I(()=>{var De;return w(Ft,`/ ${((De=e(fe))==null?void 0:De.maximumAttempts)||"∞"} `)}),c(he,Xe)};f(Je,he=>{e(fe)&&he(tt)})}I(he=>w(xe,` ${he??""}
          ${e(ye)??""} `),[()=>d("workflows.attempt")]),c(O,ee)},$$slots:{default:!0}})};f(Tt,v=>{e(ye)&&v(aa)})}var It=i(Tt,2);{var ra=v=>{at(v,_t(()=>e(de),{get attributes(){return e(A)}}))};f(It,v=>{var M;!e(B)&&((M=e(de))!=null&&M.key)&&v(ra)})}var At=i(It,2);{var na=v=>{at(v,_t(()=>e(B),{get attributes(){return e(A)}}))};f(At,v=>{e(B)&&e(B).key&&v(na)})}var Et=i(At,2);{var oa=v=>{$t(v,{get value(){return e(S).userMetadata.summary},children:Bt,$$slots:{default:(M,O)=>{const $=a(()=>O.decodedValue);var ee=Ce(),te=re(ee);{var ce=Te=>{var xe=Cr(),Je=i(n(xe),2);Oe(Je,{type:"secondary",class:"block select-none truncate",children:(tt,he)=>{ve();var Xe=X();I(()=>w(Xe,e($))),c(tt,Xe)},$$slots:{default:!0}}),r(xe),c(Te,xe)};f(te,Te=>{e($)&&Te(ce)})}c(M,ee)}}})};f(Et,v=>{var M,O;(O=(M=e(S))==null?void 0:M.userMetadata)!=null&&O.summary&&v(oa)})}var Pt=i(Et,2);{var sa=v=>{Ar(v,{get link(){return e(S).links[0]},class:"max-w-xl",linkClass:"truncate"})};f(Pt,v=>{var M,O;(O=(M=e(S))==null?void 0:M.links)!=null&&O.length&&v(sa)})}var St=i(Pt,2);{var ia=v=>{const M=a(()=>e(ze).toString());at(v,{key:"attempt",get value(){return e(M)},get attributes(){return e(A)}})};f(St,v=>{e(ze)&&v(ia)})}var la=i(St,2);{var ca=v=>{at(v,_t(()=>e(se),{get attributes(){return e(A)}}))};f(la,v=>{e(ct)&&v(ca)})}r(bt),r(ut);var va=i(ut);{var da=v=>{var M=Lr(),O=n(M),$=n(O);{var ee=te=>{const ce=a(()=>d("workflows.estimated-billable-actions"));pt(te,{get text(){return e(ce)},topRight:!0,children:(Te,xe)=>{Oe(Te,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(Je,tt)=>{ve();var he=X();I(()=>w(he,t.event.billableActions)),c(Je,he)},$$slots:{default:!0}})},$$slots:{default:!0}})};f($,te=>{t.event.billableActions&&te(ee)})}r(O),r(M),c(v,M)};f(va,v=>{k()&&v(da)})}r(q);var ua=i(q,2);{var ma=v=>{var M=Mr(),O=n(M),$=n(O);hr($,{get group(){return t.group},get event(){return e(S)}}),r(O),r(M),I(()=>ft(O,"colspan",k()?5:4)),c(v,M)};f(ua,v=>{e(U)&&v(ma)})}I(v=>{st(q,1,v,"svelte-1cm88cy"),ft(q,"id",`${t.event.id}-${t.index}`),ft(q,"data-eventid",t.event.id),w(ta,e(Ue))},[()=>Ut(xt("hover:cursor-pointer",e(Pe)&&"!bg-red-400/40 hover:!bg-red-400/60",e(Be)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(je)&&"!bg-pink-700/30 hover:!bg-pink-700/50",ne(t.group,V())&&"active"))]),Dt("mouseenter",q,E),Dt("mouseleave",q,N),c(T,Z),Me(),m()}wa(["click"]);export{kn as E,at as a,hr as b,Ar as c,qt as d,wn as g};
