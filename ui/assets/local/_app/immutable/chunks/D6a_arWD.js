import"./Bzak7iHL.js";import{p as vt,g as t,o as G,b as pt,u as o,t as b,f as C,i as r,c as u,r as a,d as Ot,j as f,e as p,n as ct,k as mt,ae as Et,h as St}from"./DtSMpxPp.js";import{s as c}from"./ChP_J8fE.js";import{i as F}from"./BUX2ey9N.js";import{e as Ut,i as At}from"./D_0FA0ti.js";import{p as Ht,s as qt,a as J}from"./QkTQNHha.js";import{p as Kt}from"./Bsqmelim.js";import{B as Xt}from"./CsMNScE5.js";import{E as Yt}from"./D2B4GuyQ.js";import{L as zt}from"./Crjj_4jy.js";import{T as Gt,a as Jt,b as Mt}from"./2DoZJ7NC.js";import{t as m}from"./BXv1jDVW.js";import{g as Zt}from"./DUvvEM66.js";import"./CoPSvM7r.js";import"./RhZmg00e.js";import{h as te}from"./BH--IcX0.js";import"./q2so_Oap.js";import"./oic-N-2-.js";import{f as ee,r as re,t as ae}from"./D8JWfvYP.js";import{w as se}from"./C2Ppw083.js";import{D as oe}from"./Dubt1UVH.js";import"./69_IOA4Y.js";import{i as ne}from"./DM92YGvC.js";import{I as ie}from"./Db7F_qcf.js";function M(V,w){vt(w,!1);let k=Ht(w,"includesTaskQueueType",8);ne();const j=G(()=>k()?"checkmark":"close"),L=G(()=>k()?"text-blue-700":"text-primary"),N=G(()=>k()?m("common.yes"):m("common.no"));ie(V,{get name(){return t(j)},get class(){return t(L)},get title(){return t(N)}}),pt()}var de=b("<p> </p>"),le=b("<p> </p>"),ue=b('<td class="select-all break-all" data-testid="worker-identity"> </td> <td class="select-all break-all" data-testid="worker-build-id"><div class="flex items-center gap-2"> <!></div></td> <td class="select-all break-all" data-testid="worker-deployment"><!></td> <td class="hidden md:table-cell" data-testid="worker-last-access-time"> </td> <td data-testid="workflow-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="activity-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="nexus-poller"><div class="flex items-center justify-center"><!></div></td>',1),ce=b('<tr class="w-full"><td colspan="7"><!></td></tr>'),me=b('<caption class="sr-only" slot="caption"> </caption>'),ve=b('<th> </th> <th> </th> <th> </th> <th class="hidden md:table-cell"> </th> <th class="!text-center xl:w-48"> </th> <th class="!text-center xl:w-36"> </th> <th class="!text-center xl:w-36"> </th>',1),pe=b('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function Ee(V,w){vt(w,!0);const[k,j]=qt(),L=()=>J(se,"$workflowRun",k),N=()=>J(ae,"$timeFormat",k),_t=()=>J(re,"$relativeTime",k),ft=o(()=>Kt.params),wt=o(()=>t(ft).namespace),kt=o(()=>L().workflow),h=o(()=>Zt(t(kt),w.workers)),Z=o(()=>t(h).pollers),ht=o(()=>t(h).pinned),gt=o(()=>t(h).autoUpgrade),xt=o(()=>t(h).currentBuildId),yt=o(()=>t(h).currentDeployment),bt=o(()=>t(h).rampingBuildId),$t=o(()=>t(h).rampingDeployment),O=e=>{var l,s,n;const i=(s=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.deploymentName)!==null&&s!==void 0?s:(n=e==null?void 0:e.workerVersionCapabilities)===null||n===void 0?void 0:n.deploymentSeriesName;return i??""},E=e=>{var l,s,n;const i=(s=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.buildId)!==null&&s!==void 0?s:(n=e==null?void 0:e.workerVersionCapabilities)===null||n===void 0?void 0:n.buildId;return i??""},Tt=e=>t(tt)(e)?"Current":t(et)(e)?"Ramping":void 0,It=e=>t(tt)(e)?m("deployments.current"):t(et)(e)?m("deployments.ramping-percentage",{percentage:w.workers.versioningInfo.rampingVersionPercentage}):"",tt=o(()=>e=>O(e)===t(yt)&&E(e)===t(xt)),et=o(()=>e=>O(e)===t($t)&&E(e)===t(bt));var rt=pe(),S=C(rt),at=r(S),Pt=u(at);Xt(Pt,{type:"count",children:(e,l)=>{ct();var s=mt();f(()=>{var n;return c(s,((n=t(Z))==null?void 0:n.length)||0)}),p(e,s)},$$slots:{default:!0}}),a(S);var st=u(S,2);Ot(st,()=>w.children??Et);var ot=u(st,2);{var Bt=e=>{var l=de(),s=r(l,!0);a(l),f(n=>c(s,n),[()=>m("workers.viewing-pinned-build-ids")]),p(e,l)},Dt=(e,l)=>{{var s=n=>{var i=le(),d=r(i,!0);a(i),f(v=>c(d,v),[()=>m("workers.viewing-auto-upgrade-build-ids")]),p(n,i)};F(e,n=>{t(gt)&&n(s)},l)}};F(ot,e=>{t(ht)?e(Bt):e(Dt,!1)})}var Qt=u(ot,2);Gt(Qt,{class:"mb-6",fixed:!0,children:(e,l)=>{var s=St(),n=C(s);Ut(n,17,()=>t(Z),At,(i,d)=>{const v=o(()=>O(t(d))),g=o(()=>E(t(d))),$=o(()=>Tt(t(d))),T=o(()=>It(t(d)));Mt(i,{"data-testid":"worker-row",children:(U,Q)=>{var W=ue(),x=C(W),A=r(x,!0);a(x);var y=u(x,2),R=r(y),I=r(R),H=u(I);{var q=_=>{oe(_,{get status(){return t($)},get label(){return t(T)}})};F(H,_=>{t($)&&_(q)})}a(R),a(y);var P=u(y,2),K=r(P);{var X=_=>{const Lt=o(()=>te({namespace:t(wt),deployment:t(v)}));zt(_,{get href(){return t(Lt)},children:(Nt,_e)=>{ct();var ut=mt();f(()=>c(ut,t(v))),p(Nt,ut)},$$slots:{default:!0}})};F(K,_=>{t(v)&&_(X)})}a(P);var B=u(P,2),Y=r(B,!0);a(B);var D=u(B,2),nt=r(D),Wt=r(nt);const Rt=o(()=>t(d).taskQueueTypes.includes("WORKFLOW"));M(Wt,{get includesTaskQueueType(){return t(Rt)}}),a(nt),a(D);var z=u(D,2),it=r(z),Ct=r(it);const Ft=o(()=>t(d).taskQueueTypes.includes("ACTIVITY"));M(Ct,{get includesTaskQueueType(){return t(Ft)}}),a(it),a(z);var dt=u(z,2),lt=r(dt),Vt=r(lt);const jt=o(()=>t(d).taskQueueTypes.includes("NEXUS"));M(Vt,{get includesTaskQueueType(){return t(jt)}}),a(lt),a(dt),f(_=>{c(A,t(d).identity),c(I,`${t(g)??""} `),c(Y,_)},[()=>ee(t(d).lastAccessTime,N(),{relative:_t()})]),p(U,W)},$$slots:{default:!0}})},i=>{var d=ce(),v=r(d),g=r(v);const $=o(()=>m("workflows.workers-empty-state"));Yt(g,{get title(){return t($)}}),a(v),a(d),p(i,d)}),p(e,s)},$$slots:{default:!0,caption:(e,l)=>{var s=me(),n=r(s,!0);a(s),f(i=>c(n,i),[()=>m("workflows.workers-tab")]),p(e,s)},headers:(e,l)=>{Jt(e,{slot:"headers",children:(s,n)=>{var i=ve(),d=C(i),v=r(d,!0);a(d);var g=u(d,2),$=r(g,!0);a(g);var T=u(g,2),U=r(T,!0);a(T);var Q=u(T,2),W=r(Q,!0);a(Q);var x=u(Q,2),A=r(x,!0);a(x);var y=u(x,2),R=r(y,!0);a(y);var I=u(y,2),H=r(I,!0);a(I),f((q,P,K,X,B,Y,D)=>{c(v,q),c($,P),c(U,K),c(W,X),c(A,B),c(R,Y),c(H,D)},[()=>m("common.id"),()=>m("workers.buildId"),()=>m("deployments.deployment"),()=>m("workflows.last-accessed"),()=>m("workflows.workflow-task-handler"),()=>m("workflows.activity-handler"),()=>m("workflows.nexus-handler")]),p(s,i)},$$slots:{default:!0}})}}}),f(e=>c(at,`${e??""} `),[()=>m("workers.workers")]),p(V,rt),pt(),j()}export{Ee as W};
