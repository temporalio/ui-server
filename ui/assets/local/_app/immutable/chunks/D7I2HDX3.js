import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{f as A,n as Ae,t as N,p as zt,l as ce,a as At,b as Ot,g as l,m as R,s as z,ah as E,ay as ke,c as S,e as j,r as F,d as V}from"./DYX0w8bX.js";import{s as Z}from"./CxFVcq4O.js";import{i as L}from"./B_BuKjdB.js";import{e as Be,i as Re}from"./CgLBepva.js";import{c as G,a as u,b as Oe,t as M}from"./Bz76f8pg.js";import{s as me,a as wt}from"./CFGOF_JX.js";import{r as It,c as Pt,s as je,b as Tt,C as Mt}from"./BoNO6UAY.js";import{e as ue}from"./B8vPeB6P.js";import{b as qt}from"./BqHg6EHm.js";import{s as fe}from"./Bfc47y5P.js";import{i as Et}from"./CZRFLhJG.js";import{p as r,l as Fe}from"./BrXzBH3h.js";import{s as Vt,a as Dt,b as ze}from"./CgU0heln.js";import{c as Ht,w as Kt}from"./DsexP6Wk.js";import{b as Bt}from"./CXVuWmQA.js";import{d as Rt,M as jt,a as Ft}from"./GkhcvAMc.js";import{L as Nt}from"./WwDu3wGH.js";import{B as Gt}from"./SNXFWeJi.js";import{B as Ne}from"./CVTkWxkl.js";import{C as Jt}from"./CzuY0ss4.js";import{I as Ge}from"./D-4DezxR.js";import{M as Qt}from"./BAn7Lbvw.js";import{T as Je}from"./ydDz8Yld.js";import{t as Qe}from"./Ds6tgvmq.js";function Y(ve,t){let $=r(t,"selected",8,!1),J=r(t,"disabled",8,!1),ge=r(t,"label",8);Rt(ve,{role:"option",class:"break-all",get"aria-selected"(){return $()},get"aria-disabled"(){return J()},get selected(){return $()},get disabled(){return J()},$$events:{click(O){Bt.call(this,t,O)}},children:(O,ee)=>{Ae();var f=Oe();N(()=>Z(f,ge())),u(O,f)},$$slots:{default:!0,leading:(O,ee)=>{var f=G(),P=A(f);me(P,t,"leading",{},null),u(O,f)},trailing:(O,ee)=>{var f=G(),P=A(f);me(P,t,"trailing",{},null),u(O,f)}}})}var Ut=M("<p> </p>"),Wt=M("<!> <!>",1),Xt=M('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),Yt=M('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),Zt=M("<!> <!> <!>",1),$t=M("<!> <!> <!>",1),el=M('<span class="error svelte-8g1t3z"> </span>'),tl=M("<!> <div><!> <div><!> <input></div> <!></div> <!> <!>",1);function Ol(ve,t){const $=wt(t),J=Fe(t,["children","$$slots","$$events","$$legacy"]),ge=Fe(J,["class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","displayChips","chipLimit","selectAllLabel","deselectAllLabel","removeChipLabel","actionTooltip","href","hrefDisabled","loading","loadingText","numberOfItemsSelectedLabel","open","maxMenuHeight"]);zt(t,!1);const[O,ee]=Vt(),f=()=>Dt(W(),"$open",O),P=R(),Q=Ht();let Ue=r(t,"class",8,""),U=r(t,"id",8),We=r(t,"label",8),_=r(t,"multiselect",8,!1),a=r(t,"value",28,()=>_()?[]:void 0),Xe=r(t,"noResultsText",8),be=r(t,"disabled",8,!1),Ye=r(t,"labelHidden",8,!1),D=r(t,"options",8),Ze=r(t,"placeholder",8,null),$e=r(t,"readonly",8,!1),_e=r(t,"required",8,!1),te=r(t,"leadingIcon",8,null),T=r(t,"optionValueKey",8,null),le=r(t,"optionLabelKey",24,T),he=r(t,"minSize",8,0),pe=r(t,"maxSize",8,120),we=r(t,"error",8,""),Ie=r(t,"valid",8,!0),et=r(t,"displayChips",8,!0),xe=r(t,"chipLimit",8,5),tt=r(t,"selectAllLabel",8,"Select All"),lt=r(t,"deselectAllLabel",8,"Deselect All"),at=r(t,"removeChipLabel",8,"Remove Option"),ae=r(t,"actionTooltip",8,""),ye=r(t,"href",8,""),Pe=r(t,"hrefDisabled",8,!1),Te=r(t,"loading",8,!1),rt=r(t,"loadingText",8,"Loading more results"),st=r(t,"numberOfItemsSelectedLabel",8,e=>`${e} option${e>1?"s":""} selected`),h=R(""),re=R(""),H=R(),Le=R(),c=R(),W=r(t,"open",24,()=>Kt(!1)),it=r(t,"maxMenuHeight",8,"max-h-[20rem]");const se=()=>{ze(W(),!0),z(re,""),l(c).focus(),l(c).select()},nt=()=>{f()&&(ze(W(),!1),Q("close",{selectedOption:l(H)}),Se())},ot=()=>{Q("close",{selectedOption:l(H)}),Se()},Se=()=>{z(h,Ce(l(H))),z(P,D())},w=e=>Array.isArray(e),K=e=>typeof e=="string",B=e=>typeof e=="object",X=e=>e===null||typeof e!="object"?!1:T()!==null&&le()!==null&&T()in e&&le()in e,Ce=e=>{if(!e)return w(a())?"":a()!==null&&a()!==void 0?a():"";if(K(e))return e;if(B(e)&&X(e))return String(e[le()])},dt=e=>{if(K(e)&&(w(a())?a().includes(e)?a(a().filter(o=>o!==e)):a([...a(),e]):a(e)),B(e)&&X(e)){const o=String(e[T()]);w(a())?a().includes(o)?a(a().filter(g=>g!==o)):a([...a(),o]):a(o)}},ct=e=>{dt(e),Q("change",{value:e}),_()||Se()},ut=e=>{w(a())&&a(a().filter(o=>o!==e))},ft=()=>{!_()||!w(a())||a(l(P).map(e=>{if(B(e)&&X(e))return String(e[T()]);if(K(e))return e}))},mt=()=>{a([])},Me=()=>{const e=l(Le).querySelector('li[role="option"]:not([aria-disabled="true"])');e&&requestAnimationFrame(()=>e.focus())},vt=e=>{switch(e.key){case"Escape":nt();break;case"ArrowDown":se(),Me();break;case"Enter":se(),Me();break}},gt=e=>{f()||ze(W(),!0),z(h,e.currentTarget.value),z(re,l(h)),Q("input",l(h))};function bt(e,o){return Q("filter",l(h)),o.filter(g=>{if(K(g))return g.toLowerCase().includes(e.toLowerCase());if(B(g)&&X(g))return String(g[le()]).toLowerCase().includes(e.toLowerCase())})}const _t=()=>{f()||se()},ht=(e,o)=>{if(B(e)){const g=String(e[T()]);return w(o)?o.includes(g):o===g}else if(K(e))return w(o)?o.includes(e):o===e;return!1};ce(()=>(f(),l(c)),()=>{f()&&l(c)&&document.activeElement!==l(c)&&(l(c).focus(),l(c).select())}),ce(()=>(l(re),E(D())),()=>{z(P,bt(l(re),D()))}),ce(()=>(E(_()),l(H),E(D()),E(a()),E(T())),()=>{_()||(z(H,D().find(e=>{if(K(e))return e===a();if(B(e)&&X(e))return e[T()]===a()})),z(h,Ce(l(H))))}),ce(()=>(l(c),l(h),E(he()),E(pe())),()=>{l(c)&&l(h)&&(l(h).length<he()?ke(c,l(c).size=he()):l(h).length>pe()?ke(c,l(c).size=pe()):ke(c,l(c).size=l(h).length))}),At(),Et(),jt(ve,{get open(){return W()},$$events:{close:ot},children:(e,o)=>{var g=tl(),qe=A(g);Nt(qe,{class:"pb-1",get hidden(){return Ye()},get required(){return _e()},get label(){return We()},get for(){return U()}});var ie=S(qe,2);let Ee;var Ve=j(ie);{var pt=s=>{Ge(s,{class:"ml-2 shrink-0",get name(){return te()}})};L(Ve,s=>{te()&&s(pt)})}var ne=S(Ve,2),De=j(ne);{var xt=s=>{var m=G(),p=A(m);{var x=d=>{var b=Wt(),C=A(b);Be(C,1,()=>a().slice(0,xe()),Re,(v,y)=>{Jt(v,{get removeButtonLabel(){return at()},$$events:{remove:()=>ut(l(y))},children:(k,oe)=>{Ae();var de=Oe();N(()=>Z(de,l(y))),u(k,de)},$$slots:{default:!0}})});var i=S(C,2);{var n=v=>{var y=Ut(),k=j(y);F(y),N(oe=>Z(k,`+${oe??""}`),[()=>a().slice(xe()).length],V),u(v,y)};L(i,v=>{a().length>xe()&&v(n)})}u(d,b)},I=d=>{Gt(d,{children:(b,C)=>{Ae();var i=Oe();N(n=>Z(i,n),[()=>st()(a().length)],V),u(b,i)},$$slots:{default:!0}})};L(p,d=>{et()?d(x):d(I,!1)})}u(s,m)};L(De,s=>{_()&&w(a())&&a().length>0&&s(xt)})}var q=S(De,2);It(q);let He;qt(q,s=>z(c,s),()=>l(c)),F(ne);var yt=S(ne,2);{var Lt=s=>{var m=Xt(),p=j(m);{var x=d=>{Je(d,{get text(){return ae()},right:!0,children:(b,C)=>{var i=G(),n=A(i);me(n,t,"action",{},null),u(b,i)},$$slots:{default:!0}})},I=d=>{var b=G(),C=A(b);me(C,t,"action",{},null),u(d,b)};L(p,d=>{ae()?d(x):d(I,!1)})}F(m),u(s,m)},St=(s,m)=>{{var p=x=>{var I=Yt(),d=j(I);{var b=i=>{Je(i,{get text(){return ae()},right:!0,children:(n,v)=>{Ne(n,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return Pe()},leadingIcon:"external-link"})},$$slots:{default:!0}})},C=i=>{Ne(i,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return Pe()},leadingIcon:"external-link"})};L(d,i=>{ae()?i(b):i(C,!1)})}F(I),u(x,I)};L(s,x=>{ye()&&x(p)},m)}};L(yt,s=>{$.action?s(Lt):s(St,!1)})}F(ie);var Ke=S(ie,2);Ft(Ke,{get keepOpen(){return _()},get id(){return`${U()??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return it()},get menuElement(){return l(Le)},set menuElement(s){z(Le,s)},children:(s,m)=>{var p=$t(),x=A(p);{var I=i=>{var n=Zt(),v=A(n);const y=V(()=>a().length===D().length);Y(v,{get disabled(){return l(y)},get label(){return tt()},$$events:{click:ft}});var k=S(v,2);const oe=V(()=>a().length===0);Y(k,{get disabled(){return l(oe)},get label(){return lt()},$$events:{click:mt}});var de=S(k,2);Qt(de),u(i,n)};L(x,i=>{_()&&w(a())&&i(I)})}var d=S(x,2);Be(d,1,()=>l(P),Re,(i,n)=>{const v=V(()=>ht(l(n),a())),y=V(()=>Ce(l(n)));Y(i,{get selected(){return l(v)},get label(){return l(y)},$$events:{click:()=>ct(l(n))}})},i=>{var n=G(),v=A(n);{var y=k=>{Y(k,{disabled:!0,get label(){return Xe()}})};L(v,k=>{Te()===!1&&k(y)})}u(i,n)});var b=S(d,2);{var C=i=>{Y(i,{disabled:!0,get label(){return rt()},$$slots:{leading:(n,v)=>{Ge(n,{slot:"leading",name:"spinner",class:"animate-spin"})}}})};L(b,i=>{Te()&&i(C)})}u(s,p)},$$slots:{default:!0},$$legacy:!0});var Ct=S(Ke,2);{var kt=s=>{var m=el(),p=j(m,!0);F(m),N(()=>Z(p,we())),u(s,m)};L(Ct,s=>{we()&&!Ie()&&s(kt)})}N((s,m,p,x)=>{Ee=je(ie,1,"combobox-wrapper svelte-8g1t3z",null,Ee,s),je(ne,1,m,"svelte-8g1t3z"),He=Tt(q,He,{id:U(),placeholder:Ze(),required:_e(),readonly:$e(),disabled:be(),type:"text",value:l(h),class:p,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${U()??""}-listbox`,"aria-expanded":f(),"aria-required":_e(),"aria-autocomplete":"list","data-testid":J["data-testid"]??U(),...ge,[Mt]:x},"svelte-8g1t3z")},[()=>({disabled:be(),invalid:!Ie()}),()=>Pt(Qe("input-wrapper",_()&&"gap-1",_()&&"m-1",te()&&_()&&"ml-2")),()=>Qe("combobox-input",_()?a().length>0||te()?"indent-0":"indent-1":"indent-2",Ue()),()=>({disabled:be()})],V),ue("focus",q,fe(se)),ue("input",q,fe(gt)),ue("keydown",q,fe(vt)),ue("click",q,fe(_t)),u(e,g)},$$slots:{default:!0}}),Ot(),ee()}export{Ol as C};
