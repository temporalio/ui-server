import{r as g,a as Q}from"./iQqSGAwV.js";const k=({activityPollers:u,nexusPollers:t,workflowPollers:s})=>{var m,y;s!=null&&s.pollers||(s.pollers=[]),u!=null&&u.pollers||(u.pollers=[]),t!=null&&t.pollers||(t.pollers=[]),u.pollers.forEach(e=>{e.taskQueueTypes=["ACTIVITY"]}),s.pollers.forEach(e=>{e.taskQueueTypes=["WORKFLOW"]}),t.pollers.forEach(e=>{e.taskQueueTypes=["NEXUS"]});const p=e=>(a,n)=>{const T=a[n.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return a[n.identity]={lastAccessTime:!T.lastAccessTime||T.lastAccessTime<n.lastAccessTime?n.lastAccessTime:T.lastAccessTime,taskQueueTypes:T.taskQueueTypes.concat([e])},a};u.pollers.filter(e=>s.pollers.some(a=>{if(e.identity===a.identity)return e.taskQueueTypes=[...a.taskQueueTypes,...e.taskQueueTypes],e})),u.pollers.filter(e=>t.pollers.some(a=>{if(a.identity===e.identity)return e.taskQueueTypes=[...e.taskQueueTypes,...a.taskQueueTypes],e})),t.pollers.filter(e=>s.pollers.some(a=>{if(e.identity===a.identity)return e.taskQueueTypes=[...a.taskQueueTypes,...e.taskQueueTypes],e})),(y=u.pollers)==null||y.reduce(p("ACTIVITY"),(m=t.pollers)==null?void 0:m.reduce(p("NEXUS"),s.pollers.reduce(p("WORKFLOW"),{})));const c=u.pollers.length?u.pollers:t.pollers.length?t.pollers:s.pollers,i=u.pollers.length||t.pollers.length?t.taskQueueStatus:s.taskQueueStatus,d=u.pollers.length||t.pollers.length?t.versioningInfo:s.versioningInfo;return{pollers:c,taskQueueStatus:i,versioningInfo:d}};async function I(u,t=fetch){const s=g("task-queue",u),p=await Q(s,{request:t,params:{taskQueueType:"1"}}),c=await Q(s,{request:t,params:{taskQueueType:"2"}}),i=await Q(s,{request:t,params:{taskQueueType:"3"}});return k({activityPollers:c,nexusPollers:i,workflowPollers:p})}export{I as g};
