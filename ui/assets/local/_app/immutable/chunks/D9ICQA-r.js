import"./Bzak7iHL.js";import{p as ve,ac as H,t as w,i as z,g as a,r as E,j as J,e as O,b as ke,d as he,c as G,aH as It,af as me,ah as ae,ai as Ot,aI as ce,s as ue,h as zt,f as Nt}from"./kQSYtCfc.js";import{d as be,e as Rt,s as wt}from"./DFbJB1Uf.js";import{i as X}from"./CpVHIMM-.js";import{e as Ht}from"./BGqzo1gH.js";import{c as P,s as V,b as Jt,C as Gt}from"./BWHJ-dez.js";import{b as Pt}from"./DK-i4VCv.js";import{p,s as Vt,a as Ie,r as Ut}from"./BLseHJlf.js";import{w as M,I as Ft,z as jt,j as Ke,A as Oe,E as b,B as We,D as U,S as qt,F as Kt,i as Wt,a as Qt,G as Qe,H as Xe,J as de,K as Ye,M as Xt,O as Yt,Q as Zt,R as ze,k as $t,U as en,l as tn,V as nn,W as on,X as rn,Y as sn,Z as ln,_ as an,$ as cn,a0 as un,n as Ne,a1 as dn,a2 as fn,a3 as hn,a4 as mn,a5 as gn}from"./B3pnqVkR.js";import{o as pn}from"./CJGTewo-.js";import{B as Re}from"./Cooxdd1T.js";import{I as yn}from"./CMCPNPYc.js";import{t as we}from"./BXv1jDVW.js";import{t as R}from"./mtgEvp4k.js";import{c as vn}from"./B1XwYLKu.js";import"./69_IOA4Y.js";import{u as kn}from"./DTr53upF.js";import{p as bn,s as Sn}from"./BDfAQ6r3.js";const ge=Xe.define(),xn=Xe.define(),Bn=Qe.define(),An=Qe.define({combine(e){return Zt(e,{minDepth:100,newGroupDelay:500,joinToEvent:(t,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,n)=>(o,r)=>t(o,r)||n(o,r)})}}),Dn=qt.define({create(){return A.empty},update(e,t){let n=t.state.facet(An),o=t.annotation(ge);if(o){let c=k.fromTransaction(t,o.selection),m=o.side,f=m==0?e.undone:e.done;return c?f=Y(f,f.length,n.minDepth,c):f=$e(f,t.startState.selection),new A(m==0?o.rest:f,m==0?f:o.rest)}let r=t.annotation(xn);if((r=="full"||r=="before")&&(e=e.isolate()),t.annotation(de.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let s=k.fromTransaction(t),i=t.annotation(de.time),l=t.annotation(de.userEvent);return s?e=e.addChanges(s,i,l,n,t):t.selection&&(e=e.addSelection(t.startState.selection,i,l,n.newGroupDelay)),(r=="full"||r=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new A(e.done.map(k.fromJSON),e.undone.map(k.fromJSON))}});function Z(e,t){return function({state:n,dispatch:o}){if(!t&&n.readOnly)return!1;let r=n.field(Dn,!1);if(!r)return!1;let s=r.pop(e,n,t);return s?(o(s),!0):!1}}const Cn=Z(0,!1),He=Z(1,!1),Tn=Z(0,!0),Mn=Z(1,!0);class k{constructor(t,n,o,r,s){this.changes=t,this.effects=n,this.mapped=o,this.startSelection=r,this.selectionsAfter=s}setSelAfter(t){return new k(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,n,o;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(o=this.startSelection)===null||o===void 0?void 0:o.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new k(t.changes&&Xt.fromJSON(t.changes),[],t.mapped&&Yt.fromJSON(t.mapped),t.startSelection&&b.fromJSON(t.startSelection),t.selectionsAfter.map(b.fromJSON))}static fromTransaction(t,n){let o=x;for(let r of t.startState.facet(Bn)){let s=r(t);s.length&&(o=o.concat(s))}return!o.length&&t.changes.empty?null:new k(t.changes.invert(t.startState.doc),o,void 0,n||t.startState.selection,x)}static selection(t){return new k(void 0,x,void 0,void 0,t)}}function Y(e,t,n,o){let r=t+1>n+20?t-n-1:0,s=e.slice(r,t);return s.push(o),s}function Ln(e,t){let n=[],o=!1;return e.iterChangedRanges((r,s)=>n.push(r,s)),t.iterChangedRanges((r,s,i,l)=>{for(let c=0;c<n.length;){let m=n[c++],f=n[c++];l>=m&&i<=f&&(o=!0)}}),o}function En(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((n,o)=>n.empty!=t.ranges[o].empty).length===0}function Ze(e,t){return e.length?t.length?e.concat(t):e:t}const x=[],_n=200;function $e(e,t){if(e.length){let n=e[e.length-1],o=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-_n));return o.length&&o[o.length-1].eq(t)?e:(o.push(t),Y(e,e.length-1,1e9,n.setSelAfter(o)))}else return[k.selection([t])]}function In(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function fe(e,t){if(!e.length)return e;let n=e.length,o=x;for(;n;){let r=On(e[n-1],t,o);if(r.changes&&!r.changes.empty||r.effects.length){let s=e.slice(0,n);return s[n-1]=r,s}else t=r.mapped,n--,o=r.selectionsAfter}return o.length?[k.selection(o)]:x}function On(e,t,n){let o=Ze(e.selectionsAfter.length?e.selectionsAfter.map(l=>l.map(t)):x,n);if(!e.changes)return k.selection(o);let r=e.changes.map(t),s=t.mapDesc(e.changes,!0),i=e.mapped?e.mapped.composeDesc(s):s;return new k(r,Ye.mapEffects(e.effects,t),i,e.startSelection.map(s),o)}const zn=/^(input\.type|delete)($|\.)/;class A{constructor(t,n,o=0,r=void 0){this.done=t,this.undone=n,this.prevTime=o,this.prevUserEvent=r}isolate(){return this.prevTime?new A(this.done,this.undone):this}addChanges(t,n,o,r,s){let i=this.done,l=i[i.length-1];return l&&l.changes&&!l.changes.empty&&t.changes&&(!o||zn.test(o))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Ln(l.changes,t.changes))||o=="input.type.compose")?i=Y(i,i.length-1,r.minDepth,new k(t.changes.compose(l.changes),Ze(Ye.mapEffects(t.effects,l.changes),l.effects),l.mapped,l.startSelection,x)):i=Y(i,i.length,r.minDepth,t),new A(i,x,n,o)}addSelection(t,n,o,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:x;return s.length>0&&n-this.prevTime<r&&o==this.prevUserEvent&&o&&/^select($|\.)/.test(o)&&En(s[s.length-1],t)?this:new A($e(this.done,t),this.undone,n,o)}addMapping(t){return new A(fe(this.done,t),fe(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,n,o){let r=t==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],i=s.selectionsAfter[0]||n.selection;if(o&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:ge.of({side:t,rest:In(r),selection:i}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=r.length==1?x:r.slice(0,r.length-1);return s.mapped&&(l=fe(l,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:ge.of({side:t,rest:l,selection:i}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}A.empty=new A(x,x);const Nn=[{key:"Mod-z",run:Cn,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:He,preventDefault:!0},{linux:"Ctrl-Shift-z",run:He,preventDefault:!0},{key:"Mod-u",run:Tn,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Mn,preventDefault:!0}];function Se(e,t){return b.create(e.ranges.map(t),e.mainIndex)}function N(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function L({state:e,dispatch:t},n){let o=Se(e.selection,n);return o.eq(e.selection,!0)?!1:(t(N(e,o)),!0)}function $(e,t){return b.cursor(t?e.to:e.from)}function et(e,t){return L(e,n=>n.empty?e.moveByChar(n,t):$(n,t))}function B(e){return e.textDirectionAt(e.state.selection.main.head)==Kt.LTR}const tt=e=>et(e,!B(e)),nt=e=>et(e,B(e));function ot(e,t){return L(e,n=>n.empty?e.moveByGroup(n,t):$(n,t))}const Rn=e=>ot(e,!B(e)),wn=e=>ot(e,B(e));function rt(e,t){return L(e,n=>{if(!n.empty)return $(n,t);let o=e.moveVertically(n,t);return o.head!=n.head?o:e.moveToLineBoundary(n,t)})}const st=e=>rt(e,!1),it=e=>rt(e,!0);function lt(e){let t=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,o=0,r;if(t){for(let s of e.state.facet(M.scrollMargins)){let i=s(e);i!=null&&i.top&&(n=Math.max(i==null?void 0:i.top,n)),i!=null&&i.bottom&&(o=Math.max(i==null?void 0:i.bottom,o))}r=e.scrollDOM.clientHeight-n-o}else r=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:o,selfScroll:t,height:Math.max(e.defaultLineHeight,r-5)}}function at(e,t){let n=lt(e),{state:o}=e,r=Se(o.selection,i=>i.empty?e.moveVertically(i,t,n.height):$(i,t));if(r.eq(o.selection))return!1;let s;if(n.selfScroll){let i=e.coordsAtPos(o.selection.main.head),l=e.scrollDOM.getBoundingClientRect(),c=l.top+n.marginTop,m=l.bottom-n.marginBottom;i&&i.top>c&&i.bottom<m&&(s=M.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-c}))}return e.dispatch(N(o,r),{effects:s}),!0}const Je=e=>at(e,!1),pe=e=>at(e,!0);function _(e,t,n){let o=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,n);if(r.head==t.head&&r.head!=(n?o.to:o.from)&&(r=e.moveToLineBoundary(t,n,!1)),!n&&r.head==o.from&&o.length){let s=/^\s*/.exec(e.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;s&&t.head!=o.from+s&&(r=b.cursor(o.from+s))}return r}const Hn=e=>L(e,t=>_(e,t,!0)),Jn=e=>L(e,t=>_(e,t,!1)),Gn=e=>L(e,t=>_(e,t,!B(e))),Pn=e=>L(e,t=>_(e,t,B(e))),Vn=e=>L(e,t=>b.cursor(e.lineBlockAt(t.head).from,1)),Un=e=>L(e,t=>b.cursor(e.lineBlockAt(t.head).to,-1));function D(e,t){let n=Se(e.state.selection,o=>{let r=t(o);return b.range(o.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(e.state.selection)?!1:(e.dispatch(N(e.state,n)),!0)}function ct(e,t){return D(e,n=>e.moveByChar(n,t))}const ut=e=>ct(e,!B(e)),dt=e=>ct(e,B(e));function ft(e,t){return D(e,n=>e.moveByGroup(n,t))}const Fn=e=>ft(e,!B(e)),jn=e=>ft(e,B(e));function ht(e,t){return D(e,n=>e.moveVertically(n,t))}const mt=e=>ht(e,!1),gt=e=>ht(e,!0);function pt(e,t){return D(e,n=>e.moveVertically(n,t,lt(e).height))}const Ge=e=>pt(e,!1),Pe=e=>pt(e,!0),qn=e=>D(e,t=>_(e,t,!0)),Kn=e=>D(e,t=>_(e,t,!1)),Wn=e=>D(e,t=>_(e,t,!B(e))),Qn=e=>D(e,t=>_(e,t,B(e))),Xn=e=>D(e,t=>b.cursor(e.lineBlockAt(t.head).from)),Yn=e=>D(e,t=>b.cursor(e.lineBlockAt(t.head).to)),Ve=({state:e,dispatch:t})=>(t(N(e,{anchor:0})),!0),Ue=({state:e,dispatch:t})=>(t(N(e,{anchor:e.doc.length})),!0),Fe=({state:e,dispatch:t})=>(t(N(e,{anchor:e.selection.main.anchor,head:0})),!0),je=({state:e,dispatch:t})=>(t(N(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Zn=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0);function F(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:o}=e,r=o.changeByRange(s=>{let{from:i,to:l}=s;if(i==l){let c=t(s);c<i?(n="delete.backward",c=Q(e,c,!1)):c>i&&(n="delete.forward",c=Q(e,c,!0)),i=Math.min(i,c),l=Math.max(l,c)}else i=Q(e,i,!1),l=Q(e,l,!0);return i==l?{range:s}:{changes:{from:i,to:l},range:b.cursor(i,i<s.head?-1:1)}});return r.changes.empty?!1:(e.dispatch(o.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?M.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function Q(e,t,n){if(e instanceof M)for(let o of e.state.facet(M.atomicRanges).map(r=>r(e)))o.between(t,t,(r,s)=>{r<t&&s>t&&(t=n?s:r)});return t}const yt=(e,t,n)=>F(e,o=>{let r=o.from,{state:s}=e,i=s.doc.lineAt(r),l,c;if(n&&!t&&r>i.from&&r<i.from+200&&!/[^ \t]/.test(l=i.text.slice(0,r-i.from))){if(l[l.length-1]=="	")return r-1;let m=Ke(l,s.tabSize),f=m%ze(s)||ze(s);for(let y=0;y<f&&l[l.length-1-y]==" ";y++)r--;c=r}else c=U(i.text,r-i.from,t,t)+i.from,c==r&&i.number!=(t?s.doc.lines:1)?c+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(i.text.slice(c-i.from,r-i.from))&&(c=U(i.text,c-i.from,!1,!1)+i.from);return c}),ye=e=>yt(e,!1,!0),vt=e=>yt(e,!0,!1),kt=(e,t)=>F(e,n=>{let o=n.head,{state:r}=e,s=r.doc.lineAt(o),i=r.charCategorizer(o);for(let l=null;;){if(o==(t?s.to:s.from)){o==n.head&&s.number!=(t?r.doc.lines:1)&&(o+=t?1:-1);break}let c=U(s.text,o-s.from,t)+s.from,m=s.text.slice(Math.min(o,c)-s.from,Math.max(o,c)-s.from),f=i(m);if(l!=null&&f!=l)break;(m!=" "||o!=n.head)&&(l=f),o=c}return o}),bt=e=>kt(e,!1),$n=e=>kt(e,!0),eo=e=>F(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),to=e=>F(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),no=e=>F(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),oo=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(o=>({changes:{from:o.from,to:o.to,insert:We.of(["",""])},range:b.cursor(o.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},ro=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(o=>{if(!o.empty||o.from==0||o.from==e.doc.length)return{range:o};let r=o.from,s=e.doc.lineAt(r),i=r==s.from?r-1:U(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:U(s.text,r-s.from,!0)+s.from;return{changes:{from:i,to:l,insert:e.doc.slice(r,l).append(e.doc.slice(i,r))},range:b.cursor(l)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function so(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n=Wt(e).resolveInner(t),o=n.childBefore(t),r=n.childAfter(t),s;return o&&r&&o.to<=t&&r.from>=t&&(s=o.type.prop(Qt.closedBy))&&s.indexOf(r.name)>-1&&e.doc.lineAt(o.to).from==e.doc.lineAt(r.from).from&&!/\S/.test(e.sliceDoc(o.to,r.from))?{from:o.to,to:r.from}:null}const qe=io(!1);function io(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let o=t.changeByRange(r=>{let{from:s,to:i}=r,l=t.doc.lineAt(s),c=!e&&s==i&&so(t,s);e&&(s=i=(i<=l.to?l:t.doc.lineAt(i)).to);let m=new Ft(t,{simulateBreak:s,simulateDoubleBreak:!!c}),f=jt(m,s);for(f==null&&(f=Ke(/^\s*/.exec(t.doc.lineAt(s).text)[0],t.tabSize));i<l.to&&/\s/.test(l.text[i-l.from]);)i++;c?{from:s,to:i}=c:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let y=["",Oe(t,f)];return c&&y.push(Oe(t,m.lineIndent(l.from,-1))),{changes:{from:s,to:i,insert:We.of(y)},range:b.cursor(s+1+y[1].length)}});return n(t.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}}const lo=[{key:"Ctrl-b",run:tt,shift:ut,preventDefault:!0},{key:"Ctrl-f",run:nt,shift:dt},{key:"Ctrl-p",run:st,shift:mt},{key:"Ctrl-n",run:it,shift:gt},{key:"Ctrl-a",run:Vn,shift:Xn},{key:"Ctrl-e",run:Un,shift:Yn},{key:"Ctrl-d",run:vt},{key:"Ctrl-h",run:ye},{key:"Ctrl-k",run:eo},{key:"Ctrl-Alt-h",run:bt},{key:"Ctrl-o",run:oo},{key:"Ctrl-t",run:ro},{key:"Ctrl-v",run:pe}],ao=[{key:"ArrowLeft",run:tt,shift:ut,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Rn,shift:Fn,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Gn,shift:Wn,preventDefault:!0},{key:"ArrowRight",run:nt,shift:dt,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:wn,shift:jn,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Pn,shift:Qn,preventDefault:!0},{key:"ArrowUp",run:st,shift:mt,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ve,shift:Fe},{mac:"Ctrl-ArrowUp",run:Je,shift:Ge},{key:"ArrowDown",run:it,shift:gt,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ue,shift:je},{mac:"Ctrl-ArrowDown",run:pe,shift:Pe},{key:"PageUp",run:Je,shift:Ge},{key:"PageDown",run:pe,shift:Pe},{key:"Home",run:Jn,shift:Kn,preventDefault:!0},{key:"Mod-Home",run:Ve,shift:Fe},{key:"End",run:Hn,shift:qn,preventDefault:!0},{key:"Mod-End",run:Ue,shift:je},{key:"Enter",run:qe,shift:qe},{key:"Mod-a",run:Zn},{key:"Backspace",run:ye,shift:ye},{key:"Delete",run:vt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bt},{key:"Mod-Delete",mac:"Alt-Delete",run:$n},{mac:"Mod-Backspace",run:to},{mac:"Mod-Delete",run:no}].concat(lo.map(e=>({mac:e.key,run:e.run,shift:e.shift})));var co=w("<button><!></button>");function uo(e,t){ve(t,!0);let n=p(t,"class",3,void 0);const o=we("common.minimize"),r=we("common.maximize"),s=H(()=>t.maximized?o:r),i=H(()=>t.maximized?"minimize":"expand");var l=co();l.__click=function(...m){var f;(f=t.onclick)==null||f.apply(this,m)};var c=z(l);yn(c,{get title(){return a(s)},get name(){return a(i)}}),E(l),J(m=>V(l,1,m),[()=>P(R("surface-interactive-secondary m-1 border border-[transparent] bg-transparent p-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/70",n()))]),O(e,l),ke()}be(["click"]);const fo=(e,t)=>{t()&&(!(e.currentTarget instanceof Element)||!(e.relatedTarget instanceof Element)||!e.currentTarget.contains(e.relatedTarget))&&t(!1)};var ho=w("<div><!> <div><!> <!></div></div>");function mo(e,t){ve(t,!0);let n=p(t,"maximized",15,!1),o=p(t,"class",3,void 0),r=p(t,"enabled",3,!0),s=p(t,"actions",3,void 0),i=v=>{n()&&v.key==="Escape"&&n(!1)};const l=()=>{n(!n())};var c=ho();Rt("keydown",It,i),c.__focusout=[fo,n];var m=z(c);he(m,()=>t.children);var f=G(m,2),y=z(f);he(y,()=>s()??me);var j=G(y,2);{var q=v=>{uo(v,{class:"m-0 rounded-full text-secondary",onclick:l,get maximized(){return n()}})};X(j,v=>{r()&&v(q)})}E(f),E(c),J((v,ee)=>{V(c,1,v),V(f,1,ee)},[()=>P(R("relative",n()&&"fixed bottom-0 left-0 right-0 top-0 z-100 h-full w-full overflow-y-auto bg-white dark:bg-black",o())),()=>P(R("absolute",n()&&"fixed","right-2 top-2 flex items-center"))]),O(e,c),ke()}be(["focusout"]);function go(e,t){if(!e)return"";let n="";try{const o=bn(e);n=Sn(o,void 0,t)}catch{n=e}return n}var po=(e,t,n)=>t(n()),yo=w("<button> </button>"),vo=w('<div class="flex flex-row items-center justify-between border-b border-subtle bg-code-block px-3"><div class="flex flex-row items-center gap-4"></div> <div class="flex flex-row items-center gap-4"><!> <!></div></div>'),ko=w("<div></div>"),bo=w("<div><!> <!></div>");function Jo(e,t){ve(t,!0);const[n,o]=Vt(),r=()=>Ie(kn,"$useDarkMode",n),s=()=>Ie(Dt,"$copied",n),i=(d,h=me)=>{var g=yo();g.__click=[po,xe,h];var S=z(g,!0);E(g),J(C=>{V(g,1,C),wt(S,h())},[()=>P(R("h-full border-b-2 border-transparent py-2",h()===xe()?"border-brand":""))]),O(d,g)};var l;let c=p(t,"language",3,"json"),m=p(t,"class",3,void 0),f=p(t,"editable",3,!1),y=p(t,"copyable",3,!0),j=p(t,"copyIconTitle",3,""),q=p(t,"copySuccessIconTitle",3,""),v=p(t,"inline",3,!1),ee=p(t,"testId",3,void 0),St=p(t,"minHeight",3,void 0),te=p(t,"maxHeight",3,void 0),xt=p(t,"label",3,""),ne=p(t,"onchange",3,void 0),xe=p(t,"activeTab",15),Bt=Ut(t,["$$slots","$$events","$$legacy","content","language","class","editable","copyable","copyIconTitle","copySuccessIconTitle","inline","testId","minHeight","maxHeight","label","onchange","tabs","activeTab","headerActions"]),oe=ae(void 0),u=ae(void 0);const{copy:At,copied:Dt}=vn(),Be=(d,h,g)=>h==="json"?go(d,g?0:2):d,Ae=()=>Be(t.content,c(),v()),re=()=>{var d;const h=(d=a(u)===null||a(u)===void 0?void 0:a(u).state)===null||d===void 0?void 0:d.doc;return h?Be(h.toString(),c(),v()):""},De=d=>{var h;const g=(h=a(u)===null||a(u)===void 0?void 0:a(u).state)===null||h===void 0?void 0:h.doc;g&&g.toString()!==d&&(a(u)===null||a(u)===void 0||a(u).dispatch({changes:{from:0,to:g.length,insert:d}}))},Ct=1e5,Ce=()=>{if(!a(u)||c()!=="json")return;const d=a(u).state.doc.length;if(!(d<Ct))try{gn(a(u).state,d,2e3)}catch{}},K=H(()=>!!t.tabs);let se=ae(!1);const ie=H(()=>(l=te()&&!a(K)&&(a(u)===null||a(u)===void 0?void 0:a(u).contentHeight)>te())!==null&&l!==void 0?l:!1),Te=Ot(new ln),Tt=[$t.of([...ao,...Nn]),en(an,{fallback:!0}),tn.of("  "),nn(),on(),rn(),sn()];let Me=H(()=>[cn(r(),a(K)),un({hasActions:y()||a(ie)}),Ne.readOnly.of(!f()),M.editable.of(f()),M.contentAttributes.of({"aria-label":xt()}),dn(f()),fn(c()),v()?void 0:M.lineWrapping,!v()&&!f()?hn():void 0,mn({maxHeight:te(),minHeight:St(),maximized:a(se)})].filter(d=>d!=null));const Mt=()=>new M({parent:a(oe),state:Ne.create({doc:Ae(),extensions:[Tt,Te.of(a(Me))]}),dispatch(d){a(u).update([d]),d.docChanged&&(ne()===null||ne()===void 0||ne()(re()))}});ce(()=>{a(u)===null||a(u)===void 0||a(u).dispatch({effects:Te.reconfigure(a(Me))})}),ce(()=>{var d,h;a(ie)?(d=a(u)===null||a(u)===void 0?void 0:a(u).scrollDOM)===null||d===void 0||d.setAttribute("tabindex","0"):(h=a(u)===null||a(u)===void 0?void 0:a(u).scrollDOM)===null||h===void 0||h.removeAttribute("tabindex")}),ce(()=>{var d;t.content,c(),v(),f(),a(u)===null||a(u)===void 0||a(u).hasFocus;const h=(d=a(u)===null||a(u)===void 0?void 0:a(u).state)===null||d===void 0?void 0:d.doc;if(!h)return;if(!(f()&&(a(u)===null||a(u)===void 0?void 0:a(u).hasFocus))){const S=Ae();h.toString()!==S&&De(S),Ce()}});const Le=d=>{At(d,re())},Ee=()=>{De(re())};pn(()=>(ue(u,Mt(),!0),a(u).contentDOM.onblur=Ee,Ce(),()=>{a(u)===null||a(u)===void 0||a(u).destroy()}));var W=bo(),_e=z(W);{var Lt=d=>{var h=vo(),g=z(h);Ht(g,20,()=>t.tabs,I=>I,(I,_t)=>{i(I,()=>_t)}),E(g);var S=G(g,2),C=z(S);he(C,()=>t.headerActions??me);var T=G(C,2);{var le=I=>{Re(I,{get copyIconTitle(){return j()},get copySuccessIconTitle(){return q()},class:"m-0 rounded-full text-secondary",get copied(){return s()},$$events:{click:Le}})};X(T,I=>{y()&&I(le)})}E(S),E(h),O(d,h)};X(_e,d=>{t.tabs&&t.tabs.length>0&&d(Lt)})}var Et=G(_e,2);mo(Et,{get enabled(){return a(ie)},get maximized(){return a(se)},set maximized(h){ue(se,h,!0)},actions:h=>{var g=zt(),S=Nt(g);{var C=T=>{Re(T,{get copyIconTitle(){return j()},get copySuccessIconTitle(){return q()},class:"m-0 rounded-full text-secondary",get copied(){return s()},$$events:{click:Le}})};X(S,T=>{y()&&!a(K)&&T(C)})}O(h,g)},children:(h,g)=>{var S=ko();let C;Pt(S,T=>ue(oe,T),()=>a(oe)),J((T,le)=>C=Jt(S,C,{class:T,"data-testid":ee(),...Bt,onblur:Ee,[Gt]:le}),[()=>R("h-full",m()),()=>({inline:v(),editable:f(),readOnly:!f()})]),O(h,S)},$$slots:{actions:!0,default:!0}}),E(W),J(d=>V(W,1,d),[()=>P(R("min-w-[80px] grow",a(K)&&["border border-subtle"]))]),O(e,W),ke(),o()}be(["click"]);export{Jo as C};
