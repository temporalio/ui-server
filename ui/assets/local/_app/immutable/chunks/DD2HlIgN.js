import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{a as A}from"./D7JzDj9r.js";import{p as F,f as P,c as H,j as b,r as x,h as y,t as S,e as D,b as L,l as J,O as _,a as K,K as C,g as N,o as B}from"./DZ1-1a5q.js";import{e as E,s as G}from"./DxwvfIkW.js";import{i as M}from"./DnKg3jxh.js";import{k as Q}from"./DhxkE7tO.js";import{s as k}from"./D3L9VHHD.js";import{s as W}from"./B3h3Bc2r.js";import{i as O}from"./Bby3K3wO.js";import{p as r}from"./TaaIktnz.js";import{C as X}from"./DRZCEzQy.js";import{I as Y}from"./BwERH40W.js";import{t as s}from"./DEjs8ZrU.js";import{t as Z}from"./Cc_MFLKO.js";import{L as $}from"./BO02Afj1.js";import{T as ee}from"./DM1_LFNw.js";var te=P('<label class="file-upload-label svelte-vg1zto"><!></label> <input class="hidden" type="file"/>',1);function ae(w,t){F(t,!1);let d=r(t,"id",8),l=r(t,"accept",8,".json"),a=r(t,"onUpload",8);const I=T=>{var v;const g=T.target,f=(v=g==null?void 0:g.files)===null||v===void 0?void 0:v[0],i=new FileReader;f&&(i.readAsText(f),i.onload=()=>{var n,c;try{const U=(c=(n=i==null?void 0:i.result)===null||n===void 0?void 0:n.toString())!==null&&c!==void 0?c:"";a()(U)}catch{Z.push({variant:"error",message:s("common.upload-error")})}})};O();var u=te(),o=H(u),p=b(o);Y(p,{name:"upload"}),x(o);var m=y(o,2);S(()=>{k(o,"for",d()),k(m,"id",d()),k(m,"accept",l())}),E("change",m,I),D(w,u),L()}var re=P('<div class="flex flex-col gap-2"><!> <div class="flex gap-2"><!> <!></div> <span> </span></div>');function ke(w,t){F(t,!1);let d=r(t,"id",24,()=>crypto.randomUUID()),l=r(t,"error",12,!1),a=r(t,"input",12),I=r(t,"label",24,()=>s("workflows.signal-payload-input-label")),u=r(t,"loading",12,!1),o=r(t,"hintText",24,()=>s("workflows.signal-payload-input-label-hint")),p=r(t,"editing",8,!0);const m=e=>{if(!a())return!0;try{return JSON.parse(e),!0}catch{return!1}},T=e=>{e!==a()&&a(e)},v=()=>{a(""),u(!1)},g=e=>{a(e)};A(v),J(()=>_(a()),()=>{l(!m(a()))}),K(),O();var f=re(),i=b(f);$(i,{get for(){return d()},get label(){return I()}});var n=y(i,2),c=b(n);Q(c,()=>[u(),p()],e=>{X(e,{get id(){return d()},maxHeight:320,get content(){return a()},onchange:T,get editable(){return p()},copyable:!1})});var U=y(c,2);{var R=e=>{{let q=B(()=>(_(s),C(()=>s("common.upload-json"))));ee(e,{get text(){return N(q)},topRight:!0,children:(z,le)=>{ae(z,{get id(){return`${d()??""}-input-file-upload`},onUpload:g})},$$slots:{default:!0}})}};M(U,e=>{p()&&e(R)})}x(n);var h=y(n,2);let j;var V=b(h,!0);x(h),x(f),S(e=>{j=W(h,1,`text-xs ${l()?"text-danger":"text-primary"} inline-block`,null,j,{hidden:!o()&&!l()}),k(h,"role",l()?"alert":null),G(V,e)},[()=>(_(l()),_(s),_(o()),C(()=>l()?s("common.input-valid-json"):o()))]),D(w,f),L()}export{ke as P};
