import"./CWj6FrbW.js";import{p as bt,al as W,am as st,f as j,j as s,h as r,s as w,g as e,u as a,r as n,n as Ot,k as wt,t as F,e as g,b as Tt,c as nt,a9 as ht,i as Kt,d as Ce,q as Se}from"./yn9lut7I.js";import{s as I,e as Ne}from"./B95CcGmx.js";import{i as U}from"./Bw1cG9kR.js";import{k as ve}from"./CfWyzvfP.js";import{p as Ft,s as Rt,c as Vt,a as Ct}from"./C6jR5PNA.js";import{p as ue}from"./CcthVPor.js";import{a as Oe}from"./BLNXIcBS.js";import{B as Mt}from"./B-XX65Ry.js";import{T as le}from"./8P15j799.js";import{t as o}from"./DEjs8ZrU.js";import{C as Ht}from"./C9xRwVpS.js";import{D as Me,a as He}from"./TDFGF3M5.js";import{I as dt}from"./Cp_MhjEx.js";import{N as be}from"./sj-u7dj_.js";import{L as ct}from"./pDH-5pWv.js";import{s as Gt}from"./rlUF3pky.js";import{r as Jt,a as Xt}from"./DnLgijVF.js";import{t as de}from"./D9gMh8gV.js";import{r as Yt,w as Fe}from"./CtmWgi5e.js";import{g as Zt}from"./D0XF6wMs.js";import{z as _t,d as St,c as gt,w as Re,A as We}from"./DL-sqeab.js";import{M as me}from"./BR5Fg7VU.js";import{P as Te}from"./BwkPBCHp.js";import{W as Be}from"./CzufdFBJ.js";import{A as Le}from"./B72w0wFi.js";import{B as Ue}from"./edr_GHSD.js";import{C as ce}from"./BvfO1iZi.js";import{I as je}from"./CX6FZu_7.js";import{c as ze}from"./OBxgwt-1.js";import{f as Nt,t as Qe,r as qe,a as Ee}from"./iS02Ws-X.js";import{c as ke}from"./ByTIZu23.js";import{k as Ke,l as Ve}from"./DeDv51Z9.js";import{o as Ge}from"./C8ejR22J.js";const Je=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),Xe=new Set(["maximumAttempts"]),Ye=(l,t)=>l===0?o("workflows.no-expiration"):t,Ze=(l,t)=>l?l-t:o("workflows.unlimited"),$e=l=>l||o("workflows.unlimited"),ta=(l,t)=>l==="maximumAttempts"&&!t?o("workflows.unlimited"):t,ea=(l,t)=>{if(Je.has(t)&&typeof l[t]=="object"){for(const[m,y]of Object.entries(l[t]))Ve(y)&&(Xe.has(m)?l[`${t}${ke(m)}`]=ta(m,y):l[`${t}${ke(m)}`]=y);delete l[t]}},mi=l=>{const t={};if(l.attributes)for(const[m,y]of Object.entries(l.attributes))Ke(m,y)&&(t[m]=y),ea(t,m);return t},aa=({date:l,now:t=Date.now(),negativeDefault:m})=>{if(!l)return"";const y=String(l);try{const f=(Number(new Date(y))-t)/1e3;return m!==void 0&&f<0?m:isNaN(f)?"":`${f.toFixed(0)}s`}catch{return""}},ia=async({namespace:l,execution:t,id:m,reason:y,type:c,identity:f})=>{const h=Jt("activity.pause",{namespace:l});return Xt(h,{options:{method:"POST",body:Gt({execution:t,reason:y,id:m,type:c,...f&&{identity:f}})}})},ra=async({namespace:l,execution:t,id:m,type:y,identity:c})=>{const f=Jt("activity.unpause",{namespace:l});return Xt(f,{options:{method:"POST",body:Gt({execution:t,id:m,type:y,...c&&{identity:c}})}})},oa=async({namespace:l,execution:t,id:m,type:y,resetHeartbeat:c,identity:f})=>{const h=Jt("activity.reset",{namespace:l});return Xt(h,{options:{method:"POST",body:Gt({execution:t,id:m,type:y,resetHeartbeat:c,...f&&{identity:f}})}})},sa=async({namespace:l,execution:t,id:m,type:y,activityOptions:c,identity:f})=>{const h=Jt("activity.update-options",{namespace:l});return Xt(h,{options:{method:"POST",body:Gt({execution:t,id:m,type:y,activityOptions:c,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts",...f&&{identity:f}})}})};var na=j(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function la(l,t){bt(t,!0);const[m,y]=Rt();var c,f,h,D,Q,k,_,S,q,Y,G,O,A,B;let b=Ft(t,"open",15),P=a(()=>t.activity.activityId),z=a(()=>t.activity.activityType),L=W(st((f=(c=t.activity.activityOptions)===null||c===void 0?void 0:c.taskQueue)===null||f===void 0?void 0:f.name)),E=W(st(_t(String((h=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||h===void 0?void 0:h.scheduleToCloseTimeout)))),M=W(st(_t(String((D=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||D===void 0?void 0:D.scheduleToStartTimeout)))),T=W(st(_t(String((Q=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||Q===void 0?void 0:Q.startToCloseTimeout)))),J=W(st(_t(String((k=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||k===void 0?void 0:k.heartbeatTimeout)))),tt=W(st((S=(_=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||_===void 0?void 0:_.retryPolicy)===null||S===void 0?void 0:S.maximumAttempts)),et=W(st((Y=(q=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||q===void 0?void 0:q.retryPolicy)===null||Y===void 0?void 0:Y.backoffCoefficient)),K=W(st(_t(String((O=(G=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||G===void 0?void 0:G.retryPolicy)===null||O===void 0?void 0:O.initialInterval)))),rt=st(_t(String((B=(A=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||A===void 0?void 0:A.retryPolicy)===null||B===void 0?void 0:B.maximumInterval))),at=W(!1);const kt=a(()=>({taskQueue:{name:e(L)},scheduleToCloseTimeout:gt(e(E)),scheduleToStartTimeout:gt(e(M)),startToCloseTimeout:gt(e(T)),heartbeatTimeout:gt(e(J)),retryPolicy:{maximumAttempts:e(tt),initialInterval:gt(e(K)),backoffCoefficient:e(et),maximumInterval:gt(rt)}})),Wt=Zt(),mt=()=>{b(!1)},$t=async ft=>{ft.preventDefault();try{await sa({namespace:t.namespace,execution:t.execution,id:e(at)?void 0:e(P),type:e(at)?e(z):void 0,activityOptions:e(kt),identity:Wt}),Vt(Yt,Date.now()),de.push({variant:"success",message:`Options for Activity ${e(P)} have been updated.`})}catch(lt){console.error("Error updating activity options:",lt),de.push({variant:"error",message:`Options for Activity ${e(P)} have been failed to update: ${lt==null?void 0:lt.message}`,duration:5e3})}finally{mt()}};{let ft=a(()=>o("common.close"));Me(l,{get open(){return b()},onClick:mt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e(ft)},class:"w-[480px]",children:(lt,te)=>{He(lt,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(ee,ae)=>{var yt=na(),pt=s(yt),Bt=s(pt);ct(Bt,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var At=r(Bt,4),Lt=s(At);{let N=a(()=>isNaN(Number(e(J))));dt(Lt,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(N)},get value(){return e(J)},set value(X){w(J,X,!0)}})}var Ut=r(Lt,2),ie=s(Ut,!0);n(Ut),n(At),n(pt);var xt=r(pt,2),It=s(xt);ct(It,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var re=r(It,4);be(re,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(et)},set value(N){w(et,N,!0)}}),n(xt);var Dt=r(xt,2),jt=s(Dt);ct(jt,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var i=r(jt,4),u=s(i);{let N=a(()=>isNaN(Number(e(K))));dt(u,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(N)},get value(){return e(K)},set value(X){w(K,X,!0)}})}var v=r(u,2),H=s(v,!0);n(v),n(i),n(Dt);var R=r(Dt,2),d=s(R);ct(d,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var x=r(d,4);be(x,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(tt)},set value(N){w(tt,N,!0)}}),n(R);var p=r(R,2),C=s(p);ct(C,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var V=r(C,4),Z=s(V);{let N=a(()=>isNaN(Number(e(E))));dt(Z,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(N)},get value(){return e(E)},set value(X){w(E,X,!0)}})}var it=r(Z,2),ot=s(it,!0);n(it),n(V),n(p);var vt=r(p,2),zt=s(vt);ct(zt,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var Qt=r(zt,4),qt=s(Qt);{let N=a(()=>isNaN(Number(e(M))));dt(qt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(N)},get value(){return e(M)},set value(X){w(M,X,!0)}})}var Et=r(qt,2),oe=s(Et,!0);n(Et),n(Qt),n(vt);var se=r(vt,2),fe=s(se);ct(fe,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var ye=r(fe,4),pe=s(ye);{let N=a(()=>isNaN(Number(e(T))));dt(pe,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(N)},get value(){return e(T)},set value(X){w(T,X,!0)}})}var xe=r(pe,2),Ae=s(xe,!0);n(xe),n(ye),n(se);var ne=r(se,2),_e=s(ne);ct(_e,{for:"task-queue-name",label:"Task Queue Name"});var Ie=r(_e,2);dt(Ie,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e(L)},set value(N){w(L,N,!0)}}),n(ne);var ge=r(ne,2);{let N=a(()=>o("activities.apply-to-all-activity-types",{type:e(z)}));Ht(ge,{get label(){return e(N)},get checked(){return e(at)},set checked(X){w(at,X,!0)}})}var we=r(ge,2),he=s(we);Mt(he,{type:"button",variant:"ghost",size:"sm",$$events:{click:mt},children:(N,X)=>{Ot();var ut=wt();F(Pt=>I(ut,Pt),[()=>o("common.cancel")]),g(N,ut)},$$slots:{default:!0}});var De=r(he,2);Mt(De,{type:"submit",variant:"primary",size:"sm",children:(N,X)=>{Ot();var ut=wt();F(Pt=>I(ut,Pt),[()=>o("common.save")]),g(N,ut)},$$slots:{default:!0}}),n(we),n(yt),F((N,X,ut,Pt,Pe)=>{I(ie,N),I(H,X),I(ot,ut),I(oe,Pt),I(Ae,Pe)},[()=>St(e(J)),()=>St(e(K)),()=>St(e(E)),()=>St(e(M)),()=>St(e(T))]),Ne("submit",yt,$t),g(ee,yt)},$$slots:{default:!0}})},$$slots:{default:!0}})}Tt(),y()}var ca=j('<h3 slot="title"> </h3>'),va=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ua(l,t){bt(t,!0);const[m,y]=Rt();let c=Ft(t,"open",15),f=a(()=>t.activity.activityId),h=a(()=>t.activity.activityType),D=W(""),Q=!1,k=W(""),_=W(!1);const S=Zt(),q=()=>{c(!1),w(k,""),w(_,!1)},Y=async()=>{await ia({namespace:t.namespace,execution:t.execution,id:e(_)?void 0:e(f),reason:e(k),type:e(_)?e(h):void 0,identity:S}),Vt(Yt,Date.now()),q()};{let G=a(()=>o("workflows.pause")),O=a(()=>o("common.cancel"));me(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",loading:Q,get confirmText(){return e(G)},get cancelText(){return e(O)},confirmType:"destructive",get error(){return e(D)},set error(A){w(D,A,!0)},get open(){return c()},set open(A){c(A)},$$events:{cancelModal:q,confirmModal:Y},$$slots:{title:(A,B)=>{var b=ca(),P=s(b,!0);n(b),F(z=>I(P,z),[()=>o("activities.pause-modal-confirmation",{activityId:t.activity.id})]),g(A,b)},content:(A,B)=>{var b=va(),P=s(b),z=s(P,!0);n(P);var L=r(P,2);{let M=a(()=>o("common.reason-placeholder")),T=a(()=>o("common.reason"));dt(L,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(M)},get label(){return e(T)},get value(){return e(k)},set value(J){w(k,J,!0)}})}var E=r(L,2);{let M=a(()=>o("activities.pause-all-activity-types",{type:e(h)}));Ht(E,{get label(){return e(M)},get checked(){return e(_)},set checked(T){w(_,T,!0)}})}n(b),F(M=>I(z,M),[()=>o("activities.pause-modal-description")]),g(A,b)}}})}Tt(),y()}var da=j('<h3 slot="title"> </h3>'),ma=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function fa(l,t){bt(t,!0);const[m,y]=Rt();let c=Ft(t,"open",15),f=a(()=>t.activity.activityId),h=a(()=>t.activity.activityType),D=W(""),Q=!1,k=W(!1),_=W(!1);const S=Zt(),q=()=>{c(!1),w(k,!1),w(_,!1)},Y=async()=>{await oa({namespace:t.namespace,execution:t.execution,id:e(k)?void 0:e(f),resetHeartbeat:e(_),type:e(k)?e(h):void 0,identity:S}),Vt(Yt,Date.now()),de.push({variant:"success",message:o("activities.reset-success",{activityId:e(f)})}),q()};{let G=a(()=>o("workflows.reset")),O=a(()=>o("common.cancel"));me(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",loading:Q,get confirmText(){return e(G)},get cancelText(){return e(O)},confirmType:"destructive",get error(){return e(D)},set error(A){w(D,A,!0)},get open(){return c()},set open(A){c(A)},$$events:{cancelModal:q,confirmModal:Y},$$slots:{title:(A,B)=>{var b=da(),P=s(b,!0);n(b),F(z=>I(P,z),[()=>o("activities.reset-modal-confirmation",{activityId:t.activity.id})]),g(A,b)},content:(A,B)=>{var b=ma(),P=s(b),z=s(P,!0);n(P);var L=r(P,2);{let M=a(()=>o("activities.apply-to-all-activity-types",{type:e(h)}));Ht(L,{get label(){return e(M)},get checked(){return e(k)},set checked(T){w(k,T,!0)}})}var E=r(L,2);{let M=a(()=>o("activities.reset-heartbeat-details"));Ht(E,{get label(){return e(M)},get checked(){return e(_)},set checked(T){w(_,T,!0)}})}n(b),F(M=>I(z,M),[()=>o("activities.reset-modal-description")]),g(A,b)}}})}Tt(),y()}var ya=j('<h3 slot="title"> </h3>'),pa=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function xa(l,t){bt(t,!0);const[m,y]=Rt();let c=Ft(t,"open",15),f=a(()=>t.activity.activityId),h=a(()=>t.activity.activityType),D=W(""),Q=!1,k=W(!1);const _=Zt(),S=()=>{c(!1),w(k,!1)},q=async()=>{await ra({namespace:t.namespace,execution:t.execution,id:e(k)?void 0:e(f),type:e(k)?e(h):void 0,identity:_}),Vt(Yt,Date.now()),S()};{let Y=a(()=>o("workflows.unpause")),G=a(()=>o("common.cancel"));me(l,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",loading:Q,get confirmText(){return e(Y)},get cancelText(){return e(G)},confirmType:"destructive",get error(){return e(D)},set error(O){w(D,O,!0)},get open(){return c()},set open(O){c(O)},$$events:{cancelModal:S,confirmModal:q},$$slots:{title:(O,A)=>{var B=ya(),b=s(B,!0);n(B),F(P=>I(b,P),[()=>o("activities.pause-modal-confirmation",{activityId:t.activity.id})]),g(O,B)},content:(O,A)=>{var B=pa(),b=s(B),P=s(b,!0);n(b);var z=r(b,2);{let L=a(()=>o("activities.unpause-all-activity-types",{type:e(h)}));Ht(z,{get label(){return e(L)},get checked(){return e(k)},set checked(E){w(k,E,!0)}})}n(B),F(L=>I(P,L),[()=>o("activities.unpause-modal-description")]),g(O,B)}}})}Tt(),y()}var _a=j("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function ga(l,t){bt(t,!0);let m=Ft(t,"class",3,"");const y=a(()=>ue.params),c=a(()=>e(y).namespace),f=a(()=>e(y).workflow),h=a(()=>e(y).run),D=a(()=>({workflowId:e(f),runId:e(h)}));let Q=W(!1),k=W(!1),_=W(!1),S=W(!1);const q=async()=>{t.activity.paused?w(k,!0):w(Q,!0)},Y=()=>{w(_,!0)},G=()=>{w(S,!0)};var O=_a(),A=nt(O),B=s(A);{let T=a(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");le(B,{bottomLeft:!0,width:200,get text(){return e(T)},children:(J,tt)=>{{let et=a(()=>t.activity.paused?"play":"pause");Mt(J,{variant:"secondary",size:"sm",get leadingIcon(){return e(et)},$$events:{click:q},children:(K,rt)=>{Ot();var at=wt();F(kt=>I(at,kt),[()=>t.activity.paused?o("workflows.unpause"):o("workflows.pause")]),g(K,at)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var b=r(B,2);le(b,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(T,J)=>{Mt(T,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:G},children:(tt,et)=>{Ot();var K=wt();F(rt=>I(K,rt),[()=>o("common.update")]),g(tt,K)},$$slots:{default:!0}})},$$slots:{default:!0}});var P=r(b,2);le(P,{bottom:!0,width:200,text:"Reset this Activity.",children:(T,J)=>{Mt(T,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:Y},children:(tt,et)=>{Ot();var K=wt();F(rt=>I(K,rt),[()=>o("workflows.reset")]),g(tt,K)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(A);var z=r(A,2);ua(z,{get namespace(){return e(c)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(Q)},set open(T){w(Q,T,!0)}});var L=r(z,2);xa(L,{get namespace(){return e(c)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(k)},set open(T){w(k,T,!0)}});var E=r(L,2);fa(E,{get namespace(){return e(c)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(_)},set open(T){w(_,T,!0)}});var M=r(E,2);ve(M,()=>e(S),T=>{la(T,{get namespace(){return e(c)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(S)},set open(J){w(S,J,!0)}})}),F(()=>Oe(A,1,`flex items-center gap-2 ${m()??""}`)),g(l,O),Tt()}const wa=(l,t,m)=>!l.disableWriteActions&&!t.namespaceWriteDisabled(m)&&!t.isActivityCommandsDisabled&&!l.activityCommandsDisabled,$=(l,t=ht,m=ht)=>{var y=ha(),c=s(y),f=s(c,!0);n(c);var h=r(c,2),D=s(h);{var Q=_=>{var S=wt();F(()=>I(S,m())),g(_,S)},k=_=>{var S=Kt(),q=nt(S);Ce(q,()=>m()??ht),g(_,S)};U(D,_=>{typeof m()=="string"||typeof m()=="number"?_(Q):_(k,!1)})}n(h),n(y),F(()=>I(f,t())),g(l,y)};var ha=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),ba=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Ta=j('<p class="text-sm text-secondary/80"> </p> <!>',1),ka=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Aa=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Ia=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Da=j("<!> ",1),Pa=j('<p class="ml-1 text-sm text-secondary"> </p>'),Ca=j('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Sa=j("<!> <!> <!>",1),Na=j("<!> <!>",1),Oa=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function fi(l,t){bt(t,!0);const m=()=>Ct(Fe,"$workflowRun",D),y=()=>Ct(B,"$coreUser",D),c=()=>Ct(Ee,"$timeFormat",D),f=()=>Ct(qe,"$relativeTime",D),h=()=>Ct(Qe,"$timestampFormat",D),[D,Q]=Rt(),k=i=>{var u=ba(),v=s(u),H=s(v,!0);n(v);var R=r(v,2);ve(R,()=>t.activity.attempt,d=>{Te(d,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:(p,C=ht)=>{{let V=a(()=>o("common.copy-icon-title")),Z=a(()=>o("common.copy-success-icon-title"));ce(p,{get content(){return C()},maxHeight:384,get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(Z)}})}},$$slots:{default:!0}})}),n(u),F(d=>I(H,d),[()=>o("workflows.heartbeat-details")]),g(i,u)},_=i=>{var u=Aa(),v=s(u),H=s(v);{var R=p=>{var C=Ta(),V=nt(C),Z=s(V,!0);n(V);var it=r(V,2);ve(it,()=>t.activity.attempt,ot=>{{const vt=(Qt,qt=ht)=>{{let Et=a(()=>o("common.copy-icon-title")),oe=a(()=>o("common.copy-success-icon-title"));ce(Qt,{get content(){return qt()},maxHeight:384,get copyIconTitle(){return e(Et)},get copySuccessIconTitle(){return e(oe)}})}};let zt=a(()=>Ge(t.activity.lastFailure,"stackTrace"));Te(ot,{get value(){return e(zt)},children:vt,$$slots:{default:!0}})}}),F(ot=>I(Z,ot),[()=>o("workflows.last-failure")]),g(p,C)};U(H,p=>{t.activity.lastFailure&&p(R)})}n(v);var d=r(v,2);{var x=p=>{var C=ka(),V=s(C),Z=s(V,!0);n(V);var it=r(V,2);{let ot=a(()=>o("common.copy-icon-title")),vt=a(()=>o("common.copy-success-icon-title"));ce(it,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(ot)},get copySuccessIconTitle(){return e(vt)}})}n(C),F(ot=>I(Z,ot),[()=>o("common.stack-trace")]),g(p,C)};U(d,p=>{var C;(C=t.activity.lastFailure)!=null&&C.stackTrace&&p(x)})}n(u),g(i,u)},S=i=>{{let u=a(()=>{var v;return(v=t.activity.lastFailure)!=null&&v.stackTrace?o("workflows.last-failure-with-stack-trace"):o("workflows.last-failure")});Le(i,{get title(){return e(u)},children:Se,$$slots:{default:(v,H)=>{const R=a(()=>H.open);var d=Kt(),x=nt(d);{var p=C=>{_(C)};U(x,C=>{e(R)&&C(p)})}g(v,d)}}})}},q=(i,u=ht)=>{var v=Ia(),H=s(v),R=s(H,!0);n(H);var d=r(H,2),x=s(d),p=r(x),C=s(p);n(p),n(d),n(v),F((V,Z)=>{I(R,V),I(x,`${Z??""} `),I(C,`(${u()??""})`)},[()=>o("workflows.next-retry"),()=>Nt(t.activity.scheduledTime,c(),{relative:f(),format:h(),relativeLabel:""})]),g(i,v)},Y=i=>{var u=Ca(),v=s(u);{let d=a(()=>e(O)?"danger":"default");Ue(v,{get type(){return e(d)},children:(x,p)=>{var C=Da(),V=nt(C);{let it=a(()=>e(O)&&"font-bold text-red-400");je(V,{get class(){return`mr-1 ${e(it)??""}`},name:"retry"})}var Z=r(V);F(it=>I(Z,` ${t.activity.attempt??0??""} of ${it??""}`),[()=>$e(t.activity.maximumAttempts)]),g(x,C)},$$slots:{default:!0}})}var H=r(v,2);{var R=d=>{var x=Pa(),p=s(x);n(x),F(C=>I(p,`${C??""} remaining`),[()=>Ze(t.activity.maximumAttempts,t.activity.attempt)]),g(d,x)};U(H,d=>{t.activity.maximumAttempts&&d(R)})}n(u),g(i,u)};var G;const O=a(()=>t.activity.attempt>1&&!!t.activity.lastFailure),A=a(()=>(G=m()===null||m()===void 0?void 0:m().workflow)===null||G===void 0?void 0:G.isRunning);let B=ze(),b=a(()=>wa(ue.data.settings,y(),ue.params.namespace)&&e(A));var P=Oa(),z=s(P),L=s(z),E=s(L);{let i=a(()=>t.activity.paused?"Paused":t.activity.state);Be(E,{get status(){return e(i)}})}var M=r(E,2),T=s(M,!0);n(M),n(L);var J=r(L,2);{var tt=i=>{ga(i,{get activity(){return t.activity},class:"justify-end"})};U(J,i=>{e(b)&&i(tt)})}n(z);var et=r(z,2),K=s(et),rt=s(K);{let i=a(()=>o("workflows.activity-id"));$(rt,()=>e(i),()=>t.activity.activityId)}var at=r(rt,2);{var kt=i=>{var u=Sa(),v=nt(u);{let d=a(()=>o("activities.paused-by"));$(v,()=>e(d),()=>{var x,p;return((p=(x=t.activity.pauseInfo)==null?void 0:x.manual)==null?void 0:p.identity)||""})}var H=r(v,2);{let d=a(()=>o("activities.paused-since")),x=a(()=>{var p;return Nt((p=t.activity.pauseInfo)==null?void 0:p.pauseTime,c(),{relative:f(),format:h()})});$(H,()=>e(d),()=>e(x))}var R=r(H,2);{let d=a(()=>o("activities.pause-reason"));$(R,()=>e(d),()=>{var x,p;return((p=(x=t.activity.pauseInfo)==null?void 0:x.manual)==null?void 0:p.reason)||"-"})}g(i,u)};U(at,i=>{t.activity.paused&&t.activity.pauseInfo&&i(kt)})}var Wt=r(at,2);{let i=a(()=>o("workflows.attempt"));$(Wt,()=>e(i),()=>Y)}var mt=r(Wt,2);{var $t=i=>{const u=a(()=>aa({date:t.activity.scheduledTime,negativeDefault:""}));var v=Kt(),H=nt(v);{var R=d=>{q(d,()=>e(u))};U(H,d=>{e(u)&&d(R)})}g(i,v)};U(mt,i=>{t.activity.scheduledTime&&i($t)})}var ft=r(mt,2);{var lt=i=>{{let u=a(()=>o("workflows.last-attempt-completed-time")),v=a(()=>Nt(t.activity.lastAttemptCompleteTime,c(),{relative:f(),format:h()}));$(i,()=>e(u),()=>e(v))}};U(ft,i=>{t.activity.lastAttemptCompleteTime&&i(lt)})}var te=r(ft,2);{var ee=i=>{{let u=a(()=>o("workflows.retry-expiration")),v=a(()=>Ye(t.activity.maximumAttempts,Re(We({start:Date.now(),end:t.activity.expirationTime}))));$(i,()=>e(u),()=>e(v))}};U(te,i=>{t.activity.expirationTime&&i(ee)})}var ae=r(te,2);{var yt=i=>{{let u=a(()=>o("workflows.last-heartbeat")),v=a(()=>Nt(t.activity.lastHeartbeatTime,c(),{relative:f(),format:h()}));$(i,()=>e(u),()=>e(v))}};U(ae,i=>{t.activity.lastHeartbeatTime&&i(yt)})}var pt=r(ae,2);{var Bt=i=>{{let u=a(()=>o("workflows.last-started-time")),v=a(()=>Nt(t.activity.lastStartedTime,c(),{relative:f(),format:h()}));$(i,()=>e(u),()=>e(v))}};U(pt,i=>{t.activity.lastStartedTime&&i(Bt)})}var At=r(pt,2);{var Lt=i=>{{let u=a(()=>o("workflows.last-worker-identity"));$(i,()=>e(u),()=>t.activity.lastWorkerIdentity)}};U(At,i=>{t.activity.lastWorkerIdentity&&i(Lt)})}var Ut=r(At,2);{var ie=i=>{var u=Na(),v=nt(u);{var H=x=>{{let p=a(()=>o("workflows.priority"));$(x,()=>e(p),()=>t.activity.priority.priorityKey)}};U(v,x=>{t.activity.priority.priorityKey&&x(H)})}var R=r(v,2);{var d=x=>{{let p=a(()=>o("workflows.fairness"));$(x,()=>e(p),()=>t.activity.priority.fairnessKey)}};U(R,x=>{t.activity.priority.fairnessKey&&x(d)})}g(i,u)};U(Ut,i=>{t.activity.priority&&i(ie)})}n(K);var xt=r(K,2),It=s(xt);{var re=i=>{var u=Kt(),v=nt(u);{var H=d=>{S(d)},R=d=>{_(d)};U(v,d=>{t.totalPending>20?d(H):d(R,!1)})}g(i,u)};U(It,i=>{e(O)&&i(re)})}var Dt=r(It,2);{var jt=i=>{k(i)};U(Dt,i=>{t.activity.heartbeatDetails&&i(jt)})}n(xt),n(et),n(P),F(()=>I(T,t.activity.activityType)),g(l,P),Tt(),Q()}export{fi as P,mi as f,aa as t};
