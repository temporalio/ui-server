import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as $e,e as J,f as A,d as f,n as Ie,k as qe,i as K,g as l,j as q,b as et,l as ue,a as Vt,m as G,s as O,ac as H,aB as Oe,t as P,h as M,c as k,r as V}from"./DSxqszTl.js";import{s as te,e as Z}from"./CXaSvchK.js";import{i as x}from"./BAt4aHTa.js";import{e as Je,i as Qe}from"./B5GJuRxG.js";import{s as fe,a as Et}from"./Qdkaj6Y8.js";import{r as Dt,c as Ue,s as We,b as Ht,a as Kt}from"./DyEeuWnl.js";import{b as Bt}from"./K6Afqa47.js";import{s as $}from"./Bfc47y5P.js";import{i as tt}from"./BcaHj5WR.js";import{p as r,l as Xe}from"./Bp73-jql.js";import{s as Rt,a as jt,b as Ae}from"./CZBNCVvj.js";import{c as Ft,B as Nt}from"./-jFGsH1F.js";import{c as Gt,w as Jt}from"./Cb3VdkNs.js";import{b as Qt}from"./13eOOzQn.js";import{b as Ut,c as Wt,d as Xt}from"./BpCgdzWs.js";import{t as le}from"./Ds6tgvmq.js";import{L as Yt}from"./LntrTj2C.js";import{B as Ye}from"./ByUJZvZ-.js";import{C as Zt}from"./CZQakDau.js";import{I as ze}from"./Dc8cZy7F.js";import{M as $t}from"./O3lg-vfE.js";import{T as Ze}from"./CFAn1g9i.js";function ee(me,t){$e(t,!1);let re=r(t,"selected",8,!1),Q=r(t,"disabled",8,!1),ve=r(t,"label",8),ge=r(t,"class",8,"");tt();const be=q(()=>le("break-all",ge()));Ut(me,{role:"option",get class(){return l(be)},get"aria-selected"(){return re()},get"aria-disabled"(){return Q()},get selected(){return re()},get disabled(){return Q()},$$events:{click(d){Qt.call(this,t,d)}},children:(d,E)=>{Ie();var v=qe();K(()=>te(v,ve())),f(d,v)},$$slots:{default:!0,leading:(d,E)=>{var v=J(),B=A(v);fe(B,t,"leading",{},null),f(d,v)},trailing:(d,E)=>{var v=J(),B=A(v);fe(B,t,"trailing",{},null),f(d,v)}}}),et()}const el=Ft(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}});var tl=P("<p> </p>"),ll=P("<!> <!>",1),rl=P('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),al=P('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),sl=P('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),nl=P("<!> <!> <!>",1),il=P("<!> <!> <!>",1),ol=P('<span class="error svelte-1lqkhpx"> </span>'),dl=P('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input></div> <!> <!></div></div> <!> <!>',1);function Ml(me,t){const re=Et(t),Q=Xe(t,["children","$$slots","$$events","$$legacy"]),ve=Xe(Q,["class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","displayChips","chipLimit","selectAllLabel","deselectAllLabel","removeChipLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","optionClass","numberOfItemsSelectedLabel","open","maxMenuHeight"]);$e(t,!1);const[ge,be]=Rt(),d=()=>jt(W(),"$open",ge),E=G(),v=Gt();let B=r(t,"class",8,""),U=r(t,"id",8),lt=r(t,"label",8),p=r(t,"multiselect",8,!1),a=r(t,"value",28,()=>p()?[]:void 0),rt=r(t,"noResultsText",8),Pe=r(t,"disabled",8,!1),at=r(t,"labelHidden",8,!1),R=r(t,"options",8),st=r(t,"placeholder",8,null),nt=r(t,"readonly",8,!1),he=r(t,"required",8,!1),ae=r(t,"leadingIcon",8,null),it=r(t,"showChevron",8,!1),T=r(t,"optionValueKey",8,null),se=r(t,"optionLabelKey",24,T),_e=r(t,"minSize",8,0),xe=r(t,"maxSize",8,120),Te=r(t,"error",8,""),Me=r(t,"valid",8,!0),ot=r(t,"displayChips",8,!0),pe=r(t,"chipLimit",8,5),dt=r(t,"selectAllLabel",8,"Select All"),ct=r(t,"deselectAllLabel",8,"Deselect All"),ut=r(t,"removeChipLabel",8,"Remove Option"),ne=r(t,"actionTooltip",8,""),ye=r(t,"href",8,""),Ve=r(t,"hrefDisabled",8,!1),Ee=r(t,"loading",8,!1),ft=r(t,"loadingText",8,"Loading more results"),De=r(t,"variant",8,"default"),mt=r(t,"optionClass",8,""),vt=r(t,"numberOfItemsSelectedLabel",8,e=>`${e} option${e>1?"s":""} selected`),y=G(""),ie=G(""),j=G(),we=G(),m=G(),W=r(t,"open",24,()=>Jt(!1)),gt=r(t,"maxMenuHeight",8,"max-h-[20rem]");const X=()=>{Ae(W(),!0),O(ie,""),l(m).focus(),l(m).select()},He=()=>{d()&&(Ae(W(),!1),v("close",{selectedOption:l(j)}),Le())},bt=()=>{v("close",{selectedOption:l(j)}),Le()},Le=()=>{O(y,ke(l(j))),O(E,R())},z=e=>Array.isArray(e),F=e=>typeof e=="string",N=e=>typeof e=="object",Y=e=>e===null||typeof e!="object"?!1:T()!==null&&se()!==null&&T()in e&&se()in e,ke=e=>{if(!e)return z(a())?"":a()!==null&&a()!==void 0?a():"";if(F(e))return e;if(N(e)&&Y(e))return String(e[se()])},ht=e=>{if(F(e)&&(z(a())?a().includes(e)?a(a().filter(c=>c!==e)):a([...a(),e]):a(e)),N(e)&&Y(e)){const c=String(e[T()]);z(a())?a().includes(c)?a(a().filter(h=>h!==c)):a([...a(),c]):a(c)}},_t=e=>{ht(e),v("change",{value:e}),p()||Le()},xt=e=>{z(a())&&a(a().filter(c=>c!==e))},pt=()=>{!p()||!z(a())||a(l(E).map(e=>{if(N(e)&&Y(e))return String(e[T()]);if(F(e))return e}))},yt=()=>{a([])},Ke=()=>{const e=l(we).querySelector('li[role="option"]:not([aria-disabled="true"])');e&&requestAnimationFrame(()=>e.focus())},wt=e=>{switch(e.key){case"Escape":He();break;case"ArrowDown":X(),Ke();break;case"Enter":X(),Ke();break}},Lt=e=>{d()||Ae(W(),!0),O(y,e.currentTarget.value),O(ie,l(y)),v("input",l(y))};function kt(e,c){return v("filter",l(y)),c.filter(h=>{if(F(h))return h.toLowerCase().includes(e.toLowerCase());if(N(h)&&Y(h))return String(h[se()]).toLowerCase().includes(e.toLowerCase())})}const Ct=()=>{d()||X()},St=(e,c)=>{if(N(e)){const h=String(e[T()]);return z(c)?c.includes(h):c===h}else if(F(e))return z(c)?c.includes(e):c===e;return!1};ue(()=>(d(),l(m)),()=>{d()&&l(m)&&document.activeElement!==l(m)&&(l(m).focus(),l(m).select())}),ue(()=>(l(ie),H(R())),()=>{O(E,kt(l(ie),R()))}),ue(()=>(H(p()),l(j),H(R()),H(a()),H(T())),()=>{p()||(O(j,R().find(e=>{if(F(e))return e===a();if(N(e)&&Y(e))return e[T()]===a()})),O(y,ke(l(j))))}),ue(()=>(l(m),l(y),H(_e()),H(xe())),()=>{l(m)&&l(y)&&(l(y).length<_e()?Oe(m,l(m).size=_e()):l(y).length>xe()?Oe(m,l(m).size=xe()):Oe(m,l(m).size=l(y).length))}),Vt(),tt(),Wt(me,{get open(){return W()},$$events:{close:bt},children:(e,c)=>{var h=dl(),Ce=A(h),Be=M(Ce);Yt(Be,{get hidden(){return at()},get required(){return he()},get label(){return lt()},get for(){return U()}});var Se=k(Be,2),Re=M(Se);{var Ot=s=>{ze(s,{class:"ml-2 shrink-0",get name(){return ae()}})};x(Re,s=>{ae()&&s(Ot)})}var oe=k(Re,2),je=M(oe);{var At=s=>{var i=J(),g=A(i);{var w=u=>{var _=ll(),C=A(_);Je(C,1,()=>a().slice(0,pe()),Qe,(b,L)=>{Zt(b,{get removeButtonLabel(){return ut()},$$events:{remove:()=>xt(l(L))},children:(S,de)=>{Ie();var ce=qe();K(()=>te(ce,l(L))),f(S,ce)},$$slots:{default:!0}})});var n=k(C,2);{var o=b=>{var L=tl(),S=M(L);V(L),K(de=>te(S,`+${de??""}`),[()=>a().slice(pe()).length],q),f(b,L)};x(n,b=>{a().length>pe()&&b(o)})}f(u,_)},I=u=>{Nt(u,{children:(_,C)=>{Ie();var n=qe();K(o=>te(n,o),[()=>vt()(a().length)],q),f(_,n)},$$slots:{default:!0}})};x(g,u=>{ot()?u(w):u(I,!1)})}f(s,i)};x(je,s=>{p()&&z(a())&&a().length>0&&s(At)})}var D=k(je,2);Dt(D);let Fe;Bt(D,s=>O(m,s),()=>l(m)),V(oe);var Ne=k(oe,2);{var zt=s=>{var i=rl(),g=M(i);{var w=u=>{Ze(u,{get text(){return ne()},right:!0,children:(_,C)=>{var n=J(),o=A(n);fe(o,t,"action",{},null),f(_,n)},$$slots:{default:!0}})},I=u=>{var _=J(),C=A(_);fe(C,t,"action",{},null),f(u,_)};x(g,u=>{ne()?u(w):u(I,!1)})}V(i),f(s,i)},It=(s,i)=>{{var g=w=>{var I=al(),u=M(I);{var _=n=>{Ze(n,{get text(){return ne()},right:!0,children:(o,b)=>{Ye(o,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return Ve()},leadingIcon:"external-link"})},$$slots:{default:!0}})},C=n=>{Ye(n,{variant:"ghost",size:"xs",get href(){return ye()},get disabled(){return Ve()},leadingIcon:"external-link"})};x(u,n=>{ne()?n(_):n(C,!1)})}V(I),f(w,I)};x(s,w=>{ye()&&w(g)},i)}};x(Ne,s=>{re.action?s(zt):s(It,!1)})}var qt=k(Ne,2);{var Pt=s=>{var i=sl(),g=M(i);const w=q(()=>le("transition-transform duration-200",d()&&"rotate-180",!d()&&"rotate-0"));ze(g,{name:"chevron-down",get class(){return l(w)}}),V(i),K(()=>Kt(i,"aria-label",d()?"Close options":"Open options")),Z("click",i,$(()=>d()?He():X())),f(s,i)};x(qt,s=>{it()&&s(Pt)})}V(Se),V(Ce);var Ge=k(Ce,2);Xt(Ge,{get keepOpen(){return p()},get id(){return`${U()??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return gt()},get menuElement(){return l(we)},set menuElement(s){O(we,s)},children:(s,i)=>{var g=il(),w=A(g);{var I=n=>{var o=nl(),b=A(o);const L=q(()=>a().length===R().length);ee(b,{get disabled(){return l(L)},get label(){return dt()},$$events:{click:pt}});var S=k(b,2);const de=q(()=>a().length===0);ee(S,{get disabled(){return l(de)},get label(){return ct()},$$events:{click:yt}});var ce=k(S,2);$t(ce),f(n,o)};x(w,n=>{p()&&z(a())&&n(I)})}var u=k(w,2);Je(u,1,()=>l(E),Qe,(n,o)=>{const b=q(()=>St(l(o),a())),L=q(()=>ke(l(o)));ee(n,{get selected(){return l(b)},get label(){return l(L)},get class(){return mt()},$$events:{click:()=>_t(l(o))}})},n=>{var o=J(),b=A(o);{var L=S=>{ee(S,{disabled:!0,get label(){return rt()}})};x(b,S=>{Ee()===!1&&S(L)})}f(n,o)});var _=k(u,2);{var C=n=>{ee(n,{disabled:!0,get label(){return ft()},$$slots:{leading:(o,b)=>{ze(o,{slot:"leading",name:"spinner",class:"animate-spin"})}}})};x(_,n=>{Ee()&&n(C)})}f(s,g)},$$slots:{default:!0},$$legacy:!0});var Tt=k(Ge,2);{var Mt=s=>{var i=ol(),g=M(i,!0);V(i),K(()=>te(g,Te())),f(s,i)};x(Tt,s=>{Te()&&!Me()&&s(Mt)})}K((s,i,g)=>{We(Se,1,s,"svelte-1lqkhpx"),We(oe,1,i,"svelte-1lqkhpx"),Fe=Ht(D,Fe,{id:U(),placeholder:st(),required:he(),readonly:nt(),disabled:Pe(),type:"text",value:l(y),class:g,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${U()??""}-listbox`,"aria-expanded":d(),"aria-required":he(),"aria-autocomplete":"list","data-testid":Q["data-testid"]??U(),...ve},"svelte-1lqkhpx")},[()=>Ue(le(el({variant:De()}),!Me()&&De()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",Pe()&&"opacity-50",B())),()=>Ue(le("input-wrapper",p()&&"gap-1",p()&&"m-1",ae()&&p()&&"ml-2")),()=>le("combobox-input",p()?a().length>0||ae()?"indent-0":"indent-1":"indent-2",B())],q),Z("focus",D,$(X)),Z("input",D,$(Lt)),Z("keydown",D,$(wt)),Z("click",D,$(Ct)),f(e,h)},$$slots:{default:!0}}),et(),be()}export{Ml as C};
