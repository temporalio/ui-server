import"./CWj6FrbW.js";import{p as Te,f as de,c as H,h as Ie,g as e,v as n,e as m,b as Be,n as ce,k,t as b,i as ae,j as ve,r as ge,s as ke,ax as De}from"./DZ1-1a5q.js";import{s as h,d as Se,a as ie,e as se}from"./DxwvfIkW.js";import{i as E}from"./DnKg3jxh.js";import{p as me,s as _e,a as xe,b as be}from"./TaaIktnz.js";import{p as Fe}from"./BIQ0wFxb.js";import{T as j}from"./4Dr_hdgK.js";import{W as Ve}from"./DPVSJDnS.js";import{B as Ce}from"./CqqsKTDn.js";import{i as he,c as Oe,w as We}from"./DaA9kdqt.js";import{S as K}from"./S6Q2Q0ub.js";import{i as Ae}from"./Dzb719w0.js";import{k as pe}from"./CrZfxCV7.js";import{g as Ee}from"./BtlQSASF.js";import{d as ne,j as Re}from"./CxCHczd1.js";import{k as Pe}from"./lTEnnl0m.js";import{F as Le}from"./DdCUDxED.js";import{L as ye}from"./D-BhaAF-.js";import{T as Me}from"./DM1_LFNw.js";import{t as ue}from"./DEjs8ZrU.js";import{w as fe}from"./CplMuKiw.js";import{u as je}from"./kj09siZe.js";import{s as Ke}from"./ikbOq2O5.js";const Ue=(_,t=2)=>{if(!+_)return"0 Bytes";const w=1024,C=t<0?0:t,O=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],x=Math.floor(Math.log(_)/Math.log(w));return`${parseFloat((_/Math.pow(w,x)).toFixed(C))} ${O[x]}`};var Ye=de("<!> <!>",1);function I(_,t){Te(t,!0);const w=()=>xe(fe,"$workflowFilters",C),[C,O]=_e();let x=me(t,"filterOrCopyButtonsVisible",3,!1),W=me(t,"type",19,()=>K.KEYWORD);const A=f=>f.length>11?`${f.slice(0,4)}...${f.slice(-4)}`:f,o=t.attribute==="RunId",D=()=>{const f=w().find(T=>T.attribute===t.attribute),g=()=>w().filter(T=>T.attribute!==t.attribute);if(!f||f.value!==t.value){const T={attribute:t.attribute,type:W(),value:t.value,conditional:"=",operator:"",parenthesis:""};be(fe,[...g(),T])}else be(fe,[...g()]);je(Fe.url,w())};var R=Ye(),v=H(R);{var P=f=>{Me(f,{get text(){return t.value},top:!0,class:"min-w-0",children:(g,T)=>{ye(g,{get href(){return t.href},class:"cursor-help",children:(S,M)=>{ce();var B=k();b(d=>h(B,d),[()=>A(t.value)]),m(S,B)},$$slots:{default:!0}})},$$slots:{default:!0}})},L=f=>{ye(f,{get href(){return t.href},children:(g,T)=>{ce();var S=k();b(()=>h(S,t.value)),m(g,S)},$$slots:{default:!0}})},N=f=>{var g=k();b(()=>h(g,t.value)),m(f,g)};E(v,f=>{o?f(P):t.href?f(L,1):f(N,!1)})}var Q=Ie(v,2);{let f=n(()=>ue("common.copy-icon-title")),g=n(()=>ue("common.copy-success-icon-title")),T=n(()=>ue("common.filter-workflows")),S=n(()=>w().some(M=>M.attribute===t.attribute&&M.value===t.value));Le(Q,{get copyIconTitle(){return e(f)},get copySuccessIconTitle(){return e(g)},get filterIconTitle(){return e(T)},get show(){return x()},get content(){return t.value},onFilter:D,get filtered(){return e(S)}})}m(_,R),Be(),O()}var ze=de('<td class="workflows-summary-table-body-cell filterable svelte-da71jl" data-testid="workflows-summary-table-body-cell"><!></td>'),He=de('<td class="workflows-summary-table-body-cell svelte-da71jl" data-testid="workflows-summary-table-body-cell"><!></td>');function gt(_,t){Te(t,!0);const w=()=>xe(Oe,"$customSearchAttributes",C),[C,O]=_e();var x,W;let A=me(t,"archival",3,!1);const o=n(()=>t.column.label),D=n(()=>Fe.params.namespace),R=n(()=>he(e(o))&&(w()[e(o)]===K.KEYWORD||w()[e(o)]===K.TEXT)&&typeof((W=(x=t.workflow.searchAttributes)===null||x===void 0?void 0:x.indexedFields)===null||W===void 0?void 0:W[e(o)])=="string");let v=De(!1);const P=()=>ke(v,!0),L=()=>ke(v,!1),N=B=>{const d=B.relatedTarget;d&&!["filter-button","copy-button"].includes(d.id)&&L()},Q=["Type","Workflow ID","Run ID","Deployment","Versioning Behavior","Deployment Version","Build ID","Scheduled By ID"];var f=ae(),g=H(f);{var T=B=>{var d=ze(),G=ve(d);{var X=i=>{{let a=n(()=>ne({namespace:e(D),workflow:t.workflow.id,run:t.workflow.runId,archival:A()}));I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"WorkflowType",get value(){return t.workflow.name},get href(){return e(a)}})}},Z=i=>{{let a=n(()=>ne({namespace:e(D),workflow:t.workflow.id,run:t.workflow.runId,archival:A()}));I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"WorkflowId",get value(){return t.workflow.id},get href(){return e(a)}})}},q=i=>{{let a=n(()=>ne({namespace:e(D),workflow:t.workflow.id,run:t.workflow.runId,archival:A()}));I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"RunId",get value(){return t.workflow.runId},get href(){return e(a)}})}},J=i=>{const a=n(()=>{var s,c;return(c=(s=t.workflow.searchAttributes)==null?void 0:s.indexedFields)==null?void 0:c.TemporalWorkerDeployment});{let s=n(()=>e(a)&&typeof e(a)=="string"?e(a):""),c=n(()=>e(a)?Re({namespace:e(D),deployment:e(a)}):void 0);I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"TemporalWorkerDeployment",get value(){return e(s)},get href(){return e(c)}})}},$=i=>{const a=n(()=>{var s,c;return(c=(s=t.workflow.searchAttributes)==null?void 0:s.indexedFields)==null?void 0:c.TemporalWorkerDeploymentVersion});{let s=n(()=>e(a)&&typeof e(a)=="string"?e(a):"");I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"TemporalWorkerDeploymentVersion",get value(){return e(s)}})}},ee=i=>{const a=n(()=>{var s,c,U,Y,r;return((U=(c=(s=t.workflow)==null?void 0:s.searchAttributes)==null?void 0:c.indexedFields)==null?void 0:U.TemporalWorkerBuildId)||Ee((r=(Y=t.workflow.searchAttributes)==null?void 0:Y.indexedFields)==null?void 0:r.TemporalWorkerDeploymentVersion)});{let s=n(()=>e(a)&&typeof e(a)=="string"?e(a):"");I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"TemporalWorkerBuildId",get value(){return e(s)}})}},te=i=>{const a=n(()=>{var s,c;return(c=(s=t.workflow.searchAttributes)==null?void 0:s.indexedFields)==null?void 0:c.TemporalWorkflowVersioningBehavior});{let s=n(()=>e(a)&&typeof e(a)=="string"?e(a):"");I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"TemporalWorkflowVersioningBehavior",get value(){return e(s)}})}},re=i=>{const a=n(()=>{var s,c;return(c=(s=t.workflow.searchAttributes)==null?void 0:s.indexedFields)==null?void 0:c[e(o)]});I(i,{get filterOrCopyButtonsVisible(){return e(v)},get attribute(){return e(o)},get value(){return e(a)},get type(){return w()[e(o)]}})},oe=i=>{const a=n(()=>{var s,c;return(c=(s=t.workflow.searchAttributes)==null?void 0:s.indexedFields)==null?void 0:c.TemporalScheduledById});{let s=n(()=>e(a)&&typeof e(a)=="string"?e(a):"");I(i,{get filterOrCopyButtonsVisible(){return e(v)},attribute:"TemporalScheduledById",get value(){return e(s)}})}};E(G,i=>{e(o)==="Type"?i(X):e(o)==="Workflow ID"?i(Z,1):e(o)==="Run ID"?i(q,2):e(o)==="Deployment"?i(J,3):e(o)==="Deployment Version"?i($,4):e(o)==="Build ID"?i(ee,5):e(o)==="Versioning Behavior"?i(te,6):e(R)?i(re,7):e(o)==="Scheduled By ID"&&i(oe,8)})}ge(d),ie("mouseover",d,P),se("focus",d,P),ie("focusin",d,P),ie("focusout",d,N),se("mouseleave",d,L),se("blur",d,L),m(B,d)},S=n(()=>Q.includes(e(o))||e(R)),M=B=>{var d=He(),G=ve(d);{var X=r=>{{let l=n(()=>Ae(t.workflow)),u=n(()=>Pe(t.workflow));Ve(r,{get status(){return t.workflow.status},get delayed(){return e(l)},get taskFailure(){return e(u)}})}},Z=r=>{j(r,{get dateTime(){return t.workflow.endTime}})},q=r=>{j(r,{get dateTime(){return t.workflow.startTime}})},J=r=>{var l=k();b(()=>h(l,t.workflow.taskQueue)),m(r,l)},$=r=>{var l=k();b(()=>{var u;return h(l,((u=t.workflow)==null?void 0:u.parentNamespaceId)??"")}),m(r,l)},ee=r=>{var l=k();b(u=>h(l,u),[()=>Ue(parseInt(t.workflow.historySizeBytes,10))]),m(r,l)},te=r=>{var l=k();b(u=>h(l,u),[()=>parseInt(t.workflow.stateTransitionCount,10)>0?t.workflow.stateTransitionCount:""]),m(r,l)},re=r=>{j(r,{get dateTime(){return t.workflow.executionTime}})},oe=r=>{var l=k();b(u=>h(l,u),[()=>pe({start:t.workflow.startTime,end:t.workflow.endTime,includeMillisecondsForUnderSecond:!0})]),m(r,l)},i=r=>{var l=k();b(u=>h(l,u),[()=>parseInt(t.workflow.historyEvents,10)>0?t.workflow.historyEvents:""]),m(r,l)},a=r=>{var l=k();b(()=>{var u,F;return h(l,((F=(u=t.workflow.searchAttributes)==null?void 0:u.indexedFields)==null?void 0:F.TemporalScheduledById)??"")}),m(r,l)},s=r=>{const l=n(()=>{var V,z;return(z=(V=t.workflow.searchAttributes)==null?void 0:V.indexedFields)==null?void 0:z.TemporalScheduledStartTime});var u=ae(),F=H(u);{var le=V=>{j(V,{get dateTime(){return e(l)}})};E(F,V=>{e(l)&&typeof e(l)=="string"&&V(le)})}m(r,u)},c=r=>{var l=k();b(()=>{var u,F;return h(l,(F=(u=t.workflow.searchAttributes)==null?void 0:u.indexedFields)==null?void 0:F.TemporalChangeVersion)}),m(r,l)},U=r=>{const l=n(()=>{var y,p;return(p=(y=t.workflow.searchAttributes)==null?void 0:y.indexedFields)==null?void 0:p[e(o)]});var u=ae(),F=H(u);{var le=y=>{j(y,{get dateTime(){return e(l)}})},V=y=>{Ce(y,{children:(p,Ne)=>{ce();var we=k();b(()=>h(we,e(l))),m(p,we)},$$slots:{default:!0}})},z=y=>{var p=k();b(()=>h(p,e(l))),m(y,p)};E(F,y=>{w()[e(o)]===K.DATETIME&&typeof e(l)=="string"?y(le):w()[e(o)]===K.BOOL?y(V,1):y(z,!1)})}m(r,u)},Y=n(()=>he(e(o))&&We(t.workflow,e(o)));E(G,r=>{e(o)==="Status"?r(X):e(o)==="End"?r(Z,1):e(o)==="Start"?r(q,2):e(o)==="Task Queue"?r(J,3):e(o)==="Parent Namespace"?r($,4):e(o)==="History Size"?r(ee,5):e(o)==="State Transitions"?r(te,6):e(o)==="Execution Time"?r(re,7):e(o)==="Execution Duration"?r(oe,8):e(o)==="History Length"?r(i,9):e(o)==="Scheduled By ID"?r(a,10):e(o)==="Scheduled Start Time"?r(s,11):e(o)==="Change Version"?r(c,12):e(Y)&&r(U,13)})}ge(d),m(B,d)};E(g,B=>{e(S)?B(T):B(M,!1)})}m(_,f),Be(),O()}Se(["mouseover","focusin","focusout"]);const kt=(_,t)=>{const w=Ke({workflows:_},null,2),C=`workflows-${_.length}-${t}-${Date.now()}.json`;O(w,C,"text/plain");function O(x,W,A){const o=document.createElement("a"),D=new Blob([x],{type:A});o.href=URL.createObjectURL(D),o.download=W,o.click()}};export{gt as T,kt as e};
