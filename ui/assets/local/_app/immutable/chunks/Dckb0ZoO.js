import"./CWj6FrbW.js";import{p as Q,J as fe,f as H,d as y,e as C,b as V,j as f,r as v,K as le,i as ve,c as he,a9 as L,h as S,t as ee,aN as te,g as j,u as B,al as be,s as ge}from"./CckrFwdx.js";import{s as ke}from"./_IQD3yTx.js";import{i as z}from"./CoMawi-e.js";import{b as F,C as ae,a as ne}from"./CjYTZKiB.js";import{p as n,s as W,r as Y,a as K,c as k}from"./BioCYJcK.js";import{I as ie}from"./POwFeHBs.js";import{t as R}from"./ebNgFJjp.js";import{c as xe}from"./DlLJhG5Q.js";import{b as _e}from"./BteM-kHq.js";import{b as pe}from"./Cjp46PlA.js";import{c as we,g as Ee}from"./uVHWBtn_.js";import{a as ye}from"./CjBgVCzp.js";import{w as G}from"./DsVF0eUi.js";const Z="menu-context";var Ce=H("<div><!></div>");function qe(M,e){Q(e,!0);const h=()=>K(b(),"$open",O),[O,x]=W(),b=n(e,"open",19,()=>G(!1)),i=Y(e,["$$slots","$$events","$$legacy","open","class","children","onclose"]),_=G(!1),c=G(null),s=()=>{h()&&(e.onclose===null||e.onclose===void 0||e.onclose(),k(b(),!1))};fe(Z,{open:b(),keepOpen:_,menuElement:c});var l=Ce();F(l,o=>({class:o,...i}),[()=>R("relative",e.class)]);var g=f(l);y(g,()=>e.children,h),v(l),ye(l,(o,p)=>{var d;return(d=we)==null?void 0:d(o,p)},()=>s),C(M,l),V(),x()}const se='input, li[role="option"]:not([aria-disabled="true"]), li[role="menuitem"]:not([aria-disabled="true"])';var Me=H("<a><div><!></div> <!></a>"),Oe=H("<div> </div>"),Te=H('<li><!> <div class="grow"><div><!> <!></div> <!></div> <!></li>');function Be(M,e){Q(e,!0);const h=()=>K(p,"$keepOpen",O),[O,x]=W(),b=n(e,"destructive",3,!1),i=n(e,"disabled",3,!1),_=n(e,"href",3,null),c=n(e,"description",3,null),s=n(e,"centered",3,!1),l=n(e,"hoverable",3,!0),g=n(e,"newTab",3,!1),o=Y(e,["$$slots","$$events","$$legacy","class","selected","destructive","disabled","href","description","centered","hoverable","newTab","onclick","children","leading","trailing"]),{keepOpen:p,open:d}=le(Z),T=t=>{switch(t.stopPropagation(),t.key){case"Escape":k(d,!1);break;case"ArrowDown":case"ArrowRight":N(t.currentTarget);break;case"ArrowUp":case"ArrowLeft":D(t.currentTarget);break;case" ":case"Enter":e.onclick===null||e.onclick===void 0||e.onclick(),h()||k(d,!1);break}},N=t=>{let a=t.nextElementSibling;for(;a&&!a.matches(se);)a=a.nextElementSibling;a&&a instanceof HTMLLIElement&&a.focus()},D=t=>{let a=t.previousElementSibling;for(;a&&!a.matches(se);)a=a.previousElementSibling;a&&a instanceof HTMLLIElement&&a.focus()},J=()=>{h()||k(d,!1),e.onclick===null||e.onclick===void 0||e.onclick()};var A=ve(),X=he(A);{var m=t=>{var a=Me();F(a,u=>({href:_(),target:g()?"_blank":null,rel:g()?"noreferrer":null,role:"menuitem",class:u,"aria-hidden":i()?"true":"false","aria-disabled":i(),tabindex:i()?-1:0,"data-track-name":"menuitem","data-track-intent":"navigate","data-track-text":"*textContent*",onkeydown:T,...o,[ae]:{disabled:i(),hoverable:l()}}),[()=>R("menu-item","m-1 px-3 py-2","flex items-center gap-2",s()?"justify-center":"justify-between",e.class)],void 0,void 0,"svelte-xmojui");var w=f(a),I=f(w);y(I,()=>e.children??L),v(w);var E=S(w,2);{var P=u=>{ie(u,{height:20,width:20,name:"external-link"})};z(E,u=>{g()&&u(P)})}v(a),C(t,a)},q=t=>{var a=Te();F(a,r=>({role:"menuitem",class:r,"aria-hidden":i()?"true":"false","aria-disabled":i(),tabindex:i()?-1:0,"data-track-name":"menuitem","data-track-intent":"action","data-track-text":"*textContent*",onkeydown:T,onclick:J,...o,[ae]:{destructive:b(),disabled:i(),selected:e.selected,hoverable:l()}}),[()=>R("menu-item","m-1 px-3 py-2","flex items-center gap-2",e.class)],void 0,void 0,"svelte-xmojui");var w=f(a);y(w,()=>e.leading??L);var I=S(w,2),E=f(I);let P;var u=f(E);y(u,()=>e.children??L);var oe=S(u,2);{var re=r=>{ie(r,{name:"checkmark",class:"shrink-0"})};z(oe,r=>{e.selected&&r(re)})}v(E);var ce=S(E,2);{var de=r=>{var U=Oe();let $;var ue=f(U,!0);v(U),ee(()=>{$=ne(U,1,"menu-item-description svelte-xmojui",null,$,{"text-center":s()}),ke(ue,c())}),C(r,U)};z(ce,r=>{c()&&r(de)})}v(I);var me=S(I,2);y(me,()=>e.trailing??L),v(a),ee(()=>P=ne(E,1,"menu-item-wrapper svelte-xmojui",null,P,{centered:s()})),C(t,a)};z(X,t=>{_()?t(m):t(q,!1)})}C(M,A),V(),x()}const Ie=xe(["surface-primary","absolute","z-20","mt-1","min-w-fit","list-none","overflow-auto","border","border-subtle","text-primary","shadow","w-full","transition-all","duration-100","ease-out"],{variants:{position:{left:"left-0 origin-top-left",right:"right-0 origin-top-right","top-left":"left-0 origin-top-left","top-right":"right-0 origin-top-right"},state:{open:"visible scale-100 opacity-100",closed:"invisible scale-95 opacity-0"}}});var Se=H("<ul><!></ul>");function Ge(M,e){Q(e,!0);const h=()=>K(p,"$keepOpenCtx",x),O=()=>K(T,"$open",x),[x,b]=W();let i=n(e,"class",3,""),_=n(e,"keepOpen",3,!1),c=n(e,"position",3,"left"),s=n(e,"menuElement",15,null),l=n(e,"maxHeight",3,"max-h-[20rem]"),g=Y(e,["$$slots","$$events","$$legacy","class","id","keepOpen","position","menuElement","maxHeight","children"]),o=be(0);const{keepOpen:p,menuElement:d,open:T}=le(Z);te(()=>{k(p,_())}),te(()=>{k(d,s())});const N=B(()=>s()?Ee(s()):[]),D=B(()=>j(N)[j(N).length-1]),J=t=>{!h()&&t.target===j(D)&&k(T,!1)},A=t=>{t.stopPropagation()},X=B(()=>Ie({position:c(),state:O()?"open":"closed"}));var m=Se();F(m,t=>({role:"menu",class:t,"aria-labelledby":e.id,tabindex:-1,style:c()==="top-right"||c()==="top-left"?`top: -${j(o)+16}px;`:"",id:e.id,onfocusout:J,onclick:A,...g}),[()=>R(j(X),l(),i())]);var q=f(m);y(q,()=>e.children??L),v(m),pe(m,t=>s(t),()=>s()),_e(m,"clientHeight",t=>ge(o,t)),C(M,m),V(),b()}export{Z as M,se as a,Be as b,qe as c,Ge as d};
