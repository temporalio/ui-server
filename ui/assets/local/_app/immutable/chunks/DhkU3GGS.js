import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as j,b as R,t as T,i as _,r as h,j as x,o as i,e as y,s as r,m as b,g as n,c as O}from"./U_G9-AHJ.js";import{s as $}from"./CVVZ9xwv.js";import{i as q}from"./D2UjXFL6.js";import{p as m,s as H,b as N}from"./DNW1xCX_.js";import{M as z}from"./7A8CadnP.js";import{t as o}from"./D2OY9xdY.js";import{j as Q,t as S}from"./Azn1Z2hh.js";import{t as B}from"./CcnR8a6b.js";import{i as F}from"./V0ppeWDx.js";import{I as U}from"./qV-Nkp2E.js";import{g as V}from"./DkBKomtm.js";var X=T('<h3 slot="title"> </h3>'),Y=T("<p> </p>");function pe(a,e){j(e,!1);const[d,D]=H();let f=m(e,"open",12),W=m(e,"workflow",8),M=m(e,"namespace",8),C=m(e,"refresh",8),u=b(),l=b("");const p=async()=>{r(l,""),r(u,!0);try{await Q({namespace:M(),workflow:W()}),f(!1),N(C(),Date.now()),B.push({id:"workflow-cancelation-success-toast",message:o("workflows.cancel-success")})}catch(s){r(l,F(s)?s.message:o("common.unknown-error"))}finally{r(u,!1)}};q();const k=i(()=>o("common.confirm")),E=i(()=>o("common.cancel"));z(a,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return n(k)},get cancelText(){return n(E)},get loading(){return n(u)},confirmType:"destructive",get error(){return n(l)},set error(s){r(l,s)},get open(){return f()},set open(s){f(s)},$$events:{confirmModal:p},$$slots:{title:(s,P)=>{var c=X(),g=_(c,!0);h(c),x(t=>$(g,t),[()=>o("workflows.cancel-modal-title")],i),y(s,c)},content:(s,P)=>{var c=Y(),g=_(c,!0);h(c),x(t=>$(g,t),[()=>o("workflows.cancel-modal-confirmation")],i),y(s,c)}},$$legacy:!0}),R(),D()}var Z=T('<h3 slot="title"> </h3>'),ee=T('<div slot="content"><p> </p> <!></div>');function ue(a,e){j(e,!1);const[d,D]=H();let f=m(e,"open",12),W=m(e,"workflow",8),M=m(e,"namespace",8),C=m(e,"refresh",8),u=m(e,"first",8,void 0),l=b(""),p=b(""),k=b(!1);const E=V(),s=()=>{f(!1),r(l,"")},P=async()=>{r(p,""),r(k,!0);try{await S({workflow:W(),namespace:M(),reason:n(l),first:u(),identity:E}),f(!1),r(l,""),N(C(),Date.now()),B.push({id:"workflow-termination-success-toast",message:o("workflows.terminate-success")})}catch(t){r(p,F(t)?t.message:o("common.unknown-error"))}finally{r(k,!1)}};q();const c=i(()=>o("workflows.terminate")),g=i(()=>o("common.cancel"));z(a,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get loading(){return n(k)},get confirmText(){return n(c)},get cancelText(){return n(g)},confirmType:"destructive",get error(){return n(p)},set error(t){r(p,t)},get open(){return f()},set open(t){f(t)},$$events:{cancelModal:s,confirmModal:P},$$slots:{title:(t,G)=>{var w=Z(),v=_(w,!0);h(w),x(A=>$(v,A),[()=>o("workflows.terminate-modal-title")],i),y(t,w)},content:(t,G)=>{var w=ee(),v=_(w),A=_(v,!0);h(v);var J=O(v,2);const K=i(()=>o("common.reason-placeholder")),L=i(()=>o("common.reason-placeholder"));U(J,{id:"workflow-termination-reason",class:"mt-4",get placeholder(){return n(K)},get label(){return n(L)},labelHidden:!0,get value(){return n(l)},set value(I){r(l,I)},$$legacy:!0}),h(w),x(I=>$(A,I),[()=>o("workflows.terminate-modal-confirmation")],i),y(t,w)}},$$legacy:!0}),R(),D()}const ke=(a,e,d)=>!a.disableWriteActions&&!a.workflowCancelDisabled&&!e.namespaceWriteDisabled(d),ge=(a,e,d)=>!a.disableWriteActions&&!a.workflowResetDisabled&&!e.namespaceWriteDisabled(d),ve=(a,e,d)=>!a.disableWriteActions&&!a.workflowTerminateDisabled&&!e.namespaceWriteDisabled(d);export{pe as C,ue as T,ve as a,ge as b,ke as w};
