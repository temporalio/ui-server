import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Ht,l as $,s as m,m as x,M as s,g as t,a as Kt,bH as fe,j as g,h as w,r as c,e as v,b as Dt,o as D,I as Y,f as ct,t as z,at as Zt,au as te,c as dt,v as d,i as $t,n as St,k as yt,av as Ot,q as pe}from"./UnFCzZBm.js";import{i as E}from"./pI5hk1MB.js";import{e as Gt,i as ee}from"./DMsHiW-d.js";import{i as Bt,t as _e}from"./BBLBidKq.js";import{p as C,a as Z,s as Lt}from"./GmGfGY7t.js";import{p as Rt}from"./aJg2w3Uz.js";import{P as he}from"./O7TZnVsj.js";import{a as ye}from"./B-9qHBJy.js";import{t as P}from"./DEjs8ZrU.js";import{a as xe,b as Jt,i as Qt}from"./DCC7K_zt.js";import{g as Nt}from"./vaFzaDe7.js";import{i as At}from"./B8JSuTGJ.js";import{e as re,b as we,f as be,g as Ee}from"./BhFZKDwp.js";import{p as Ut,c as Vt}from"./BqK-bw6u.js";import{L as zt,D as Xt,g as Pe}from"./Dmr8S2x0.js";import{i as kt,b as xt}from"./D08Ff8iI.js";import{b as ke,s as lt}from"./fCvEOUPS.js";import{s as qt,c as ne}from"./CDVS_aRO.js";import{b as ae,i as Ie,H as oe,C as ie,E as se}from"./V97A3bB2.js";import{T as Te}from"./D2gItXgg.js";import{E as $e}from"./C2OodUaI.js";import{L as Ce}from"./gXUEJ3Qb.js";import{a as Se,e as le,E as Yt}from"./CmNhs-P9.js";import{d as de,s as tt}from"./CX2avYX0.js";import{t as ce}from"./DJTfxBJa.js";import{B as ve}from"./CROwkM3p.js";import{C as Ft}from"./CqMauwEX.js";import{I as Wt}from"./dWO51a22.js";import{L as ue}from"./D4-5kGRO.js";import{c as ge}from"./C5ft4-RO.js";import{t as me}from"./B5GLamg6.js";var He=fe('<g role="button" tabindex="0" class="relative cursor-pointer"><!><!><!><!></g>');function De(rt,e){Ht(e,!1);const L=()=>Z(re,"$eventFilterSort",O),[O,J]=Lt(),k=x(),W=x(),S=x(),H=x(),b=x(),u=x(),p=x(),K=x(),I=x(),R=x();let a=C(e,"event",8),i=C(e,"group",8),B=C(e,"history",8),M=C(e,"groups",8),F=C(e,"index",8),f=C(e,"canvasWidth",8);const{height:U,radius:_}=oe,G=_/2;$(()=>s(F()),()=>{m(k,F()*U+U/2)}),$(()=>(t(W),t(S),s(B()),s(a()),s(M()),L()),()=>{(y=>{m(W,y.nextDistance),m(S,y.offset)})(ae(B(),a(),M(),U,L()))}),$(()=>(t(S),t(W)),()=>{m(H,t(S)>0&&t(W))}),$(()=>(s(a()),xt),()=>{m(b,kt(a())||xt(a())?"pending":a()===null||a()===void 0?void 0:a().classification)}),$(()=>t(S),()=>{m(u,t(S)*1.75*_)}),$(()=>(s(a()),s(i())),()=>{m(p,Nt(a())&&(i()===null||i()===void 0?void 0:i().lastEvent.id)===(a()===null||a()===void 0?void 0:a().id)&&(i()===null||i()===void 0?void 0:i().isPending))}),$(()=>(s(a()),t(S),s(M())),()=>{m(K,kt(a())||xt(a())||t(S)===0?!1:!Ie(a(),M()))}),$(()=>(s(a()),t(p)),()=>{m(I,kt(a())||xt(a())?"pending":t(p)?a()===null||a()===void 0?void 0:a().category:void 0)}),$(()=>L(),()=>{m(R,L()==="descending")}),Kt(),Bt();var A=He(),q=g(A);{var nt=y=>{{let Q=D(()=>[f(),t(k)]),X=D(()=>[f()-t(u)-_,t(k)]);zt(y,{get startPoint(){return t(Q)},get endPoint(){return t(X)}})}};E(q,y=>{t(K)&&y(nt)})}var vt=w(q);{var gt=y=>{{let Q=D(()=>[f()-t(u),t(k)]);Xt(y,{get point(){return t(Q)},get classification(){return t(b)},strokeWidth:1})}};E(vt,y=>{t(R)||y(gt)})}var mt=w(vt);{var h=y=>{{let Q=D(()=>[f()-t(u)-_/2+G,t(k)+_+G/2]),X=D(()=>[f()-t(u)-_/2+G,t(k)+t(H)+_]),pt=D(()=>(s(i()),t(I),Y(()=>{var ut;return(ut=i())!=null&&ut.pendingActivity?Number(i().pendingActivity.attempt)>1?"retry":"pending":t(I)})));zt(y,{get startPoint(){return t(Q)},get endPoint(){return t(X)},get category(){return t(pt)},get pending(){return t(p)}})}};E(mt,y=>{t(H)&&y(h)})}var V=w(mt);{var ft=y=>{{let Q=D(()=>[f()-t(u),t(k)]);Xt(y,{get point(){return t(Q)},get classification(){return t(b)},strokeWidth:1})}};E(V,y=>{t(R)&&y(ft)})}c(A),v(rt,A),Dt(),J()}var Le=ct("<div><svg><!><svg></svg></svg></div>");function Fe(rt,e){Ht(e,!1);const L=()=>Z(we,"$filteredEventHistory",J),O=()=>Z(re,"$eventFilterSort",J),[J,k]=Lt(),W=x(),S=x(),H=x(),b=x();let u=C(e,"groups",8),p=C(e,"history",8);const{height:K,radius:I}=oe,R=4*I,a=600;let i=x(R),B=x(0);$(()=>(L(),O()),()=>{m(W,xe(L(),O()))}),$(()=>(t(W),s(u())),()=>{m(S,[...t(W),...u()])}),$(()=>s(p()),()=>{m(H,p().length*K)}),$(()=>(s(p()),s(u()),O(),t(i)),()=>{m(b,G=>{G.forEach(A=>{const{offset:q}=ae(p(),A,u(),K,O());m(i,Math.max(t(i),q*1.75*I+R)),m(B,Math.min(t(i)-2*I,a))})})}),$(()=>(t(b),s(p())),()=>{t(b)(p())}),Kt(),Bt();var M=Le();let F;var f=g(M),U=g(f);{let G=D(()=>[t(B),0]),A=D(()=>[t(B),t(H)]);zt(U,{get startPoint(){return t(G)},get endPoint(){return t(A)},strokeWidth:3})}var _=w(U);Gt(_,5,p,ee,(G,A,q)=>{const nt=D(()=>(s(Jt),t(S),t(A),Y(()=>Jt(t(S),t(A)))));De(G,{get event(){return t(A)},get group(){return t(nt)},get groups(){return t(S)},get history(){return p()},get canvasWidth(){return t(B)},index:q})}),c(_),c(f),c(M),z(()=>{F=qt(M,1,"hidden text-right xl:block",null,F,{"overflow-hidden":t(i)>a}),ke(M,`width: ${t(i)??""}px; max-width: 600px;`),lt(f,"viewBox",`0 0 ${t(i)??""} ${t(H)??""}`),lt(f,"height",t(H)),lt(f,"width",t(i)),lt(_,"viewBox",`0 0 ${t(i)??""} ${t(H)??""}`),lt(_,"height",t(H)),lt(_,"width",t(i))}),v(rt,M),Dt(),k()}var We=ct('<tr class="bg-primary"><td><!></td></tr>');function Be(rt,e){Ht(e,!1);const L=()=>Z(At,"$isCloud",O),[O,J]=Lt();let k=C(e,"loading",8,!1),W=C(e,"title",24,()=>P("events.empty-state-title")),S=C(e,"content",24,()=>P("events.empty-state-description"));Bt();var H=We(),b=g(H),u=g(b);{var p=I=>{Ce(I,{})},K=I=>{$e(I,{get title(){return W()},get content(){return S()}})};E(u,I=>{k()?I(p):I(K,!1)})}c(b),c(H),z(()=>lt(b,"colspan",L()?5:4)),v(rt,H),Dt(),J()}var Ae=ct("<!> <!>",1),Me=ct("<td></td>"),Oe=ct('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),Ge=ct('<tr class="hover:cursor-pointer" data-testid="pending-activity-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td><p><!> </p></td><td class="w-full overflow-hidden text-right font-normal xl:text-left"><div class="flex items-center gap-1"><!> <!></div></td><!></tr> <!>',1);function Ne(rt,e){Ht(e,!0);const L=()=>Z(Rt,"$page",k),O=()=>Z(ce,"$timestamp",k),J=()=>Z(At,"$isCloud",k),[k,W]=Lt(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let b=Zt(te(S())),u=d(()=>L().params),p=d(()=>t(u).workflow),K=d(()=>t(u).run),I=d(()=>t(u).namespace),R=d(()=>ge({eventId:e.group===null||e.group===void 0?void 0:e.group.id,namespace:t(I),workflow:t(p),run:t(K)})),a=d(()=>O()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),i=d(()=>O()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const B=r=>{r.stopPropagation(),m(b,!t(b)),H()()};var M=Ge(),F=dt(M);F.__click=B;var f=g(F),U=g(f);{var _=r=>{ue(r,{"data-testid":"link",get href(){return t(R)},children:(l,j)=>{St();var T=yt();z(()=>tt(T,e.group.id)),v(l,T)},$$slots:{default:!0}})},G=r=>{var l=yt();z(()=>tt(l,e.event.id)),v(r,l)};E(U,r=>{var l;(l=e.group)!=null&&l.id?r(_):r(G,!1)})}c(f);var A=w(f),q=g(A);{var nt=r=>{{let l=d(()=>P("common.copy-icon-title")),j=d(()=>P("common.copy-success-icon-title"));Ft(r,{get copyIconTitle(){return t(l)},get copySuccessIconTitle(){return t(j)},get content(){return t(i)},children:(T,_t)=>{St();var N=yt();z(()=>tt(N,t(i))),v(T,N)},$$slots:{default:!0}})}};E(q,r=>{t(i)&&r(nt)})}c(A);var vt=w(A),gt=g(vt);{var mt=r=>{{let l=d(()=>P("common.copy-icon-title")),j=d(()=>P("common.copy-success-icon-title"));Ft(r,{get copyIconTitle(){return t(l)},get copySuccessIconTitle(){return t(j)},get content(){return t(a)},children:(T,_t)=>{St();var N=yt();z(()=>tt(N,t(a))),v(T,N)},$$slots:{default:!0}})}};E(gt,r=>{t(a)&&r(mt)})}c(vt);var h=w(vt),V=g(h),ft=g(V);Wt(ft,{get name(){return ie.activity},class:"mr-1 inline animate-pulse"});var y=w(ft);c(V),c(h);var Q=w(h),X=g(Q),pt=g(X);{let r=d(()=>e.event.paused?"warning":e.event.attempt>1?"danger":"default");ve(pt,{class:"mr-1",get type(){return t(r)},children:(l,j)=>{var T=Ae(),_t=dt(T);{let et=d(()=>_e("mr-1 inline",e.event.attempt>1&&"font-bold text-red-400",e.event.paused&&"font-bold text-yellow-700")),ht=d(()=>e.event.paused?"pause":"retry");Wt(_t,{get class(){return t(et)},get name(){return t(ht)}})}var N=w(_t),bt=w(N);{var at=et=>{const ht=d(()=>me({date:e.event.scheduledTime,negativeDefault:""}));var ot=$t(),Et=dt(ot);{var it=st=>{var Ct=yt();z(Pt=>tt(Ct,`• ${Pt??""}
            ${t(ht)??""}`),[()=>P("workflows.next-retry")]),v(st,Ct)};E(Et,st=>{t(ht)&&st(it)})}v(et,ot)};E(bt,et=>{e.event.attempt>1&&et(at)})}z(et=>tt(N,` ${et??""}
        ${e.event.attempt??""} / ${(e.event.maximumAttempts||"∞")??""} `),[()=>P("workflows.attempt")]),v(l,T)},$$slots:{default:!0}})}var ut=w(pt,2);Se(ut,{key:"activityType",get value(){return e.event.activityType},showKey:!0,get attributes(){return e.event}}),c(X),c(Q);var It=w(Q);{var wt=r=>{var l=Me();v(r,l)};E(It,r=>{J()&&r(wt)})}c(F);var o=w(F,2);{var n=r=>{var l=Oe(),j=g(l),T=g(j);se(T,{get group(){return e.group}}),c(j),c(l),z(()=>lt(j,"colspan",J()?5:4)),v(r,l)};E(o,r=>{t(b)&&r(n)})}z((r,l)=>{lt(F,"id",`${e.event.id}-${e.index}`),qt(V,1,r),tt(y,` ${l??""}`)},[()=>ne(le({category:"activity"})),()=>P("workflows.pending-activity")]),v(rt,M),Dt(),W()}de(["click"]);var ze=ct("<!> <!>",1),Ke=ct("<td></td>"),Re=ct('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),qe=ct('<tr class="hover:cursor-pointer" data-testid="pending-nexus-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="w-full overflow-hidden text-right text-sm font-normal xl:text-left"><div class="flex"><div class="flex w-full items-center gap-2"><p><!> </p> <!></div></div></td><td></td><!></tr> <!>',1);function je(rt,e){Ht(e,!0);const L=()=>Z(Rt,"$page",k),O=()=>Z(ce,"$timestamp",k),J=()=>Z(At,"$isCloud",k),[k,W]=Lt(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let b=Zt(te(S())),u=d(()=>L().params),p=d(()=>t(u).workflow),K=d(()=>t(u).run),I=d(()=>t(u).namespace),R=d(()=>ge({eventId:String(e.event.scheduledEventId),namespace:t(I),workflow:t(p),run:t(K)})),a=d(()=>O()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),i=d(()=>O()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const B=o=>{o.stopPropagation(),m(b,!t(b)),H()()};var M=qe(),F=dt(M);F.__click=B;var f=g(F),U=g(f);ue(U,{"data-testid":"link",get href(){return t(R)},children:(o,n)=>{St();var r=yt();z(()=>tt(r,e.event.scheduledEventId||"")),v(o,r)},$$slots:{default:!0}}),c(f);var _=w(f),G=g(_);{var A=o=>{{let n=d(()=>P("common.copy-icon-title")),r=d(()=>P("common.copy-success-icon-title"));Ft(o,{get copyIconTitle(){return t(n)},get copySuccessIconTitle(){return t(r)},get content(){return t(i)},children:(l,j)=>{St();var T=yt();z(()=>tt(T,t(i))),v(l,T)},$$slots:{default:!0}})}};E(G,o=>{t(i)&&o(A)})}c(_);var q=w(_),nt=g(q);{var vt=o=>{{let n=d(()=>P("common.copy-icon-title")),r=d(()=>P("common.copy-success-icon-title"));Ft(o,{get copyIconTitle(){return t(n)},get copySuccessIconTitle(){return t(r)},get content(){return t(a)},children:(l,j)=>{St();var T=yt();z(()=>tt(T,t(a))),v(l,T)},$$slots:{default:!0}})}};E(nt,o=>{t(a)&&o(vt)})}c(q);var gt=w(q),mt=g(gt),h=g(mt),V=g(h),ft=g(V);Wt(ft,{get name(){return ie.nexus},class:"mr-1 inline animate-pulse"});var y=w(ft);c(V);var Q=w(V,2);{var X=o=>{{let n=d(()=>e.event.attempt>1?"danger":"default");ve(o,{class:"mx-1",get type(){return t(n)},children:(r,l)=>{var j=ze(),T=dt(j);{let at=d(()=>e.event.attempt>1&&"font-bold text-red-400");Wt(T,{get class(){return`mr-1 inline ${t(at)??""}`},name:"retry"})}var _t=w(T),N=w(_t);{var bt=at=>{const et=d(()=>me({date:e.event.nextAttemptScheduleTime,negativeDefault:""}));var ht=$t(),ot=dt(ht);{var Et=it=>{var st=yt();z(Ct=>tt(st,`• ${Ct??""}
                ${t(et)??""}`),[()=>P("workflows.next-retry")]),v(it,st)};E(ot,it=>{t(et)&&it(Et)})}v(at,ht)};E(N,at=>{e.event.attempt>1&&at(bt)})}z(at=>tt(_t,` ${at??""}
            ${e.event.attempt??""} `),[()=>P("workflows.attempt")]),v(r,j)},$$slots:{default:!0}})}};E(Q,o=>{e.event.attempt&&o(X)})}c(h),c(mt),c(gt);var pt=w(gt,2);{var ut=o=>{var n=Ke();v(o,n)};E(pt,o=>{J()&&o(ut)})}c(F);var It=w(F,2);{var wt=o=>{var n=Re(),r=g(n),l=g(r);se(l,{get group(){return e.group}}),c(r),c(n),z(()=>lt(r,"colspan",J()?5:4)),v(o,n)};E(It,o=>{t(b)&&o(wt)})}z((o,n)=>{lt(F,"id",`${e.event.scheduledEventId}-${e.index}`),qt(V,1,o),tt(y,` ${n??""}`)},[()=>ne(le({category:"nexus"})),()=>P("workflows.pending-nexus-operation")]),v(rt,M),Dt(),W()}de(["click"]);var Je=ct('<div class="flex"><div class="pt-9"><!></div> <!></div>');function Tr(rt,e){Ht(e,!1);const L=()=>Z(be,"$fullEventHistory",W),O=()=>Z(Rt,"$page",W),J=()=>Z(Ee,"$eventStatusFilter",W),k=()=>Z(At,"$isCloud",W),[W,S]=Lt(),H=x(),b=x(),u=x(),p=x(),K=x(),I=x(),R=x();var a=x();let i=C(e,"items",8),B=C(e,"groups",24,()=>[]),M=C(e,"updating",8,!1),F=C(e,"loading",8,!1),f=C(e,"compact",8,!1),U=C(e,"minimized",8,!0),_=C(e,"hoveredEventId",12,void 0);const G=[{label:"Event ID"},{label:"Timestamp"},{label:"Event Type"},{label:"Details"}],A=h=>xt(h)?`pending-nexus-${h.scheduledEventId}`:kt(h)?`pending-activity-${h.id}`:`event-${h.id}`;$(()=>(s(U()),s(f())),()=>{m(H,!U()&&!f())}),$(()=>L(),()=>{m(b,L()===null||L()===void 0?void 0:L()[0])}),$(()=>O(),()=>{m(u,O().url)}),$(()=>(Ot(a),t(u),Ut),()=>{m(p,m(a,t(u).searchParams.get(Ut))!==null&&Ot(a)!==void 0?Ot(a):"100")}),$(()=>(t(u),Vt),()=>{m(K,t(u).searchParams.get(Vt)||"1")}),$(()=>J(),()=>{m(R,h=>Pe(h,J()))}),$(()=>(t(R),t(K),t(p)),()=>{m(I,h=>t(R)(h).slice((parseInt(t(K))-1)*parseInt(t(p)),parseInt(t(K))*parseInt(t(p))))}),$(()=>k(),()=>{k()&&G.length===4&&G.push({label:"Billable Actions"})}),Kt(),Bt();var q=Je(),nt=g(q),vt=g(nt);{var gt=h=>{{let V=D(()=>(t(I),s(i()),Y(()=>t(I)(i()))));Fe(h,{get groups(){return B()},get history(){return t(V)}})}};E(vt,h=>{t(H)&&h(gt)})}c(nt);var mt=w(nt,2);{let h=D(()=>(s(P),Y(()=>P("common.per-page")))),V=D(()=>(s(P),Y(()=>P("common.next-page")))),ft=D(()=>(s(P),Y(()=>P("common.previous-page")))),y=D(()=>(t(R),s(i()),Y(()=>t(R)(i())))),Q=D(()=>U()?"calc(100vh - 555px)":"20000px");he(mt,{get perPageLabel(){return t(h)},get nextPageButtonLabel(){return t(V)},get previousPageButtonLabel(){return t(ft)},pageButtonLabel:X=>P("common.go-to-page",{page:X}),get updating(){return M()},get items(){return t(y)},get maxHeight(){return t(Q)},children:pe,$$slots:{default:(X,pt)=>{const ut=D(()=>pt.visibleItems);var It=$t(),wt=dt(It);Gt(wt,3,()=>t(ut),o=>A(o),(o,n,r)=>{var l=$t(),j=dt(l);{var T=N=>{Yt(N,{get event(){return t(n)},get index(){return t(r)},get group(){return t(n)},get compact(){return f()},get initialItem(){return t(b)},get hoveredEventId(){return _()},set hoveredEventId(bt){_(bt)},$$legacy:!0})},_t=N=>{var bt=$t(),at=dt(bt);{var et=ot=>{{let Et=D(()=>(s(B()),s(kt),t(n),Y(()=>B().find(it=>{var st;return kt(t(n))&&((st=it==null?void 0:it.pendingActivity)==null?void 0:st.id)===t(n).id}))));Ne(ot,{get event(){return t(n)},get index(){return t(r)},get group(){return t(Et)}})}},ht=ot=>{var Et=$t(),it=dt(Et);{var st=Pt=>{{let Mt=D(()=>(s(B()),s(xt),t(n),Y(()=>B().find(Tt=>{var jt;return xt(t(n))&&((jt=Tt==null?void 0:Tt.pendingNexusOperation)==null?void 0:jt.scheduledEventId)===t(n).scheduledEventId}))));je(Pt,{get event(){return t(n)},get index(){return t(r)},get group(){return t(Mt)}})}},Ct=Pt=>{{let Mt=D(()=>(s(B()),s(Nt),t(n),Y(()=>B().find(Tt=>Nt(t(n))&&Tt.eventIds.has(t(n).id)))));Yt(Pt,{get event(){return t(n)},get index(){return t(r)},get group(){return t(Mt)},get compact(){return f()},get initialItem(){return t(b)},get hoveredEventId(){return _()},set hoveredEventId(Tt){_(Tt)},$$legacy:!0})}};E(it,Pt=>{s(xt),t(n),Y(()=>xt(t(n)))?Pt(st):Pt(Ct,!1)},!0)}v(ot,Et)};E(at,ot=>{s(kt),t(n),Y(()=>kt(t(n)))?ot(et):ot(ht,!1)},!0)}v(N,bt)};E(j,N=>{s(Qt),t(n),Y(()=>Qt(t(n)))?N(T):N(_t,!1)})}v(o,l)},o=>{{let n=D(()=>(L(),s(F()),Y(()=>!L().length||F())));Be(o,{get loading(){return t(n)}})}}),v(X,It)},headers:(X,pt)=>{ye(X,{slot:"headers",class:"!h-8",children:(ut,It)=>{var wt=$t(),o=dt(wt);Gt(o,1,()=>G,ee,(n,r)=>{Te(n,{get column(){return t(r)}})}),v(ut,wt)},$$slots:{default:!0}})}}})}c(q),v(rt,q),Dt(),S()}export{Tr as E};
