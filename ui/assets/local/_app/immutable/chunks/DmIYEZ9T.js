import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as Ct,l as $,s as m,m as w,M as i,g as t,a as zt,bK as ge,j as g,h as E,r as c,e as d,b as St,o as F,I as V,f as vt,t as R,at as Zt,au as te,c as nt,v as l,i as kt,n as $t,k as wt,av as Mt,q as me}from"./BzuLCQNf.js";import{i as b}from"./Be-bjpec.js";import{e as Gt,i as fe}from"./DHcq7Esf.js";import{i as At,t as pe}from"./W-5sOwmb.js";import{p as C,a as Z,s as Ht}from"./DdNojIXk.js";import{p as Rt}from"./Ddb5Lgoz.js";import{L as Kt,D as Jt,g as _e,E as he}from"./DalMAARF.js";import{P as ye}from"./D7BdBsua.js";import{a as xe}from"./B9roKCXq.js";import{t as k}from"./DEjs8ZrU.js";import{c as we,d as Qt,i as Ut}from"./rd2aUq1f.js";import{g as Nt}from"./ChkBNbMB.js";import{i as Ot}from"./BtnwA5jS.js";import{e as ee,b as Ee,f as be,g as Pe}from"./D3M6aU_b.js";import{p as Vt,c as Xt}from"./BXZ3g64y.js";import{i as It,c as Et}from"./DApLu5Ge.js";import{b as ke,s as ct}from"./Brfhuxqj.js";import{s as qt,c as re}from"./wWuJlbLq.js";import{g as ne,i as Ie,H as ae,C as Ft,e as oe,a as ie}from"./DzT2JAAi.js";import{T as Te}from"./D4gdcw4P.js";import{E as $e}from"./Cb6V4jI0.js";import{L as Ce}from"./C2lQ5hJF.js";import{a as Se,E as Yt}from"./B6bRpk9N.js";import{d as se,s as et}from"./HOnlAALn.js";import{t as le}from"./pi-WXkM0.js";import{B as de}from"./BvcST-tr.js";import{C as Wt}from"./Vk2HnYFn.js";import{I as Bt}from"./CKL6Zfw6.js";import{L as ce}from"./nJbdlWkZ.js";import{c as ve}from"./SXF6YGv9.js";import{t as ue}from"./CG0S0rFB.js";var He=ge('<g role="button" tabindex="0" class="relative cursor-pointer"><!><!><!><!></g>');function De(at,e){Ct(e,!1);const D=()=>Z(ee,"$eventFilterSort",N),[N,U]=Ht(),I=w(),W=w(),S=w(),H=w(),P=w(),v=w(),p=w(),q=w(),T=w(),j=w();let a=C(e,"event",8),o=C(e,"group",8),B=C(e,"history",8),K=C(e,"groups",8),L=C(e,"index",8),f=C(e,"canvasWidth",8);const{height:tt,radius:_}=ae,z=_/2;$(()=>i(L()),()=>{m(I,L()*tt+tt/2)}),$(()=>(t(W),t(S),i(B()),i(a()),i(K()),D()),()=>{(y=>{m(W,y.nextDistance),m(S,y.offset)})(ne(B(),a(),K(),tt,D()))}),$(()=>(t(S),t(W)),()=>{m(H,t(S)>0&&t(W))}),$(()=>(i(a()),Et),()=>{m(P,It(a())||Et(a())?"pending":a()===null||a()===void 0?void 0:a().classification)}),$(()=>t(S),()=>{m(v,t(S)*1.75*_)}),$(()=>(i(a()),i(o())),()=>{m(p,Nt(a())&&(o()===null||o()===void 0?void 0:o().lastEvent.id)===(a()===null||a()===void 0?void 0:a().id)&&(o()===null||o()===void 0?void 0:o().isPending))}),$(()=>(i(a()),t(S),i(K())),()=>{m(q,It(a())||Et(a())||t(S)===0?!1:!Ie(a(),K()))}),$(()=>(i(a()),t(p)),()=>{m(T,It(a())||Et(a())?"pending":t(p)?a()===null||a()===void 0?void 0:a().category:void 0)}),$(()=>D(),()=>{m(j,D()==="descending")}),zt(),At();var A=He(),J=g(A);{var ot=y=>{{let O=F(()=>[f(),t(I)]),it=F(()=>[f()-t(v)-_,t(I)]);Kt(y,{get startPoint(){return t(O)},get endPoint(){return t(it)}})}};b(J,y=>{t(q)&&y(ot)})}var ut=E(J);{var pt=y=>{{let O=F(()=>[f()-t(v),t(I)]);Jt(y,{get point(){return t(O)},get classification(){return t(P)},strokeWidth:1})}};b(ut,y=>{t(j)||y(pt)})}var _t=E(ut);{var h=y=>{{let O=F(()=>[f()-t(v)-_/2+z,t(I)+_+z/2]),it=F(()=>[f()-t(v)-_/2+z,t(I)+t(H)+_]),gt=F(()=>(i(o()),t(T),V(()=>{var mt;return(mt=o())!=null&&mt.pendingActivity?Number(o().pendingActivity.attempt)>1?"retry":"pending":t(T)})));Kt(y,{get startPoint(){return t(O)},get endPoint(){return t(it)},get category(){return t(gt)},get pending(){return t(p)}})}};b(_t,y=>{t(H)&&y(h)})}var X=E(_t);{var ht=y=>{{let O=F(()=>[f()-t(v),t(I)]);Jt(y,{get point(){return t(O)},get classification(){return t(P)},strokeWidth:1})}};b(X,y=>{t(j)&&y(ht)})}c(A),d(at,A),St(),U()}var Le=vt("<div><svg><!><svg></svg></svg></div>");function Fe(at,e){Ct(e,!1);const D=()=>Z(Ee,"$filteredEventHistory",U),N=()=>Z(ee,"$eventFilterSort",U),[U,I]=Ht(),W=w(),S=w(),H=w(),P=w();let v=C(e,"groups",8),p=C(e,"history",8);const{height:q,radius:T}=ae,j=4*T,a=600;let o=w(j),B=w(0);$(()=>(D(),N()),()=>{m(W,we(D(),N()))}),$(()=>(t(W),i(v())),()=>{m(S,[...t(W),...v()])}),$(()=>i(p()),()=>{m(H,p().length*q)}),$(()=>(i(p()),i(v()),N(),t(o)),()=>{m(P,z=>{z.forEach(A=>{const{offset:J}=ne(p(),A,v(),q,N());m(o,Math.max(t(o),J*1.75*T+j)),m(B,Math.min(t(o)-2*T,a))})})}),$(()=>(t(P),i(p())),()=>{t(P)(p())}),zt(),At();var K=Le();let L;var f=g(K),tt=g(f);{let z=F(()=>[t(B),0]),A=F(()=>[t(B),t(H)]);Kt(tt,{get startPoint(){return t(z)},get endPoint(){return t(A)},strokeWidth:3})}var _=E(tt);Gt(_,5,p,fe,(z,A,J)=>{const ot=F(()=>(i(Qt),t(S),t(A),V(()=>Qt(t(S),t(A)))));De(z,{get event(){return t(A)},get group(){return t(ot)},get groups(){return t(S)},get history(){return p()},get canvasWidth(){return t(B)},index:J})}),c(_),c(f),c(K),R(()=>{L=qt(K,1,"hidden text-right xl:block",null,L,{"overflow-hidden":t(o)>a}),ke(K,`width: ${t(o)??""}px; max-width: 600px;`),ct(f,"viewBox",`0 0 ${t(o)??""} ${t(H)??""}`),ct(f,"height",t(H)),ct(f,"width",t(o)),ct(_,"viewBox",`0 0 ${t(o)??""} ${t(H)??""}`),ct(_,"height",t(H)),ct(_,"width",t(o))}),d(at,K),St(),I()}var We=vt('<tr class="bg-primary"><td><!></td></tr>');function Be(at,e){Ct(e,!1);const D=()=>Z(Ot,"$isCloud",N),[N,U]=Ht();let I=C(e,"loading",8,!1),W=C(e,"title",24,()=>k("events.empty-state-title")),S=C(e,"content",24,()=>k("events.empty-state-description"));At();var H=We(),P=g(H),v=g(P);{var p=T=>{Ce(T,{})},q=T=>{$e(T,{get title(){return W()},get content(){return S()}})};b(v,T=>{I()?T(p):T(q,!1)})}c(P),c(H),R(()=>ct(P,"colspan",D()?5:4)),d(at,H),St(),U()}var Ae=vt("<!> <!>",1),Oe=vt("<td></td>"),Me=vt('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),Ge=vt('<tr class="hover:cursor-pointer" data-testid="pending-activity-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td><p><!> </p></td><td class="w-full overflow-hidden text-right font-normal xl:text-left"><div class="flex items-center gap-1"><!> <!></div></td><!></tr> <!>',1);function Ke(at,e){Ct(e,!0);const D=()=>Z(Rt,"$page",I),N=()=>Z(le,"$timestamp",I),U=()=>Z(Ot,"$isCloud",I),[I,W]=Ht(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let P=Zt(te(S())),v=l(()=>D().params),p=l(()=>t(v).workflow),q=l(()=>t(v).run),T=l(()=>t(v).namespace),j=l(()=>ve({eventId:e.group===null||e.group===void 0?void 0:e.group.id,namespace:t(T),workflow:t(p),run:t(q)})),a=l(()=>N()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),o=l(()=>N()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const B=n=>{n.stopPropagation(),m(P,!t(P)),H()()};var K=Ge(),L=nt(K);L.__click=B;var f=g(L),tt=g(f);{var _=n=>{ce(n,{"data-testid":"link",get href(){return t(j)},children:(s,M)=>{$t();var x=wt();R(()=>et(x,e.group.id)),d(s,x)},$$slots:{default:!0}})},z=n=>{var s=wt();R(()=>et(s,e.event.id)),d(n,s)};b(tt,n=>{var s;(s=e.group)!=null&&s.id?n(_):n(z,!1)})}c(f);var A=E(f),J=g(A);{var ot=n=>{{let s=l(()=>k("common.copy-icon-title")),M=l(()=>k("common.copy-success-icon-title"));Wt(n,{get copyIconTitle(){return t(s)},get copySuccessIconTitle(){return t(M)},get content(){return t(o)},children:(x,Q)=>{$t();var G=wt();R(()=>et(G,t(o))),d(x,G)},$$slots:{default:!0}})}};b(J,n=>{t(o)&&n(ot)})}c(A);var ut=E(A),pt=g(ut);{var _t=n=>{{let s=l(()=>k("common.copy-icon-title")),M=l(()=>k("common.copy-success-icon-title"));Wt(n,{get copyIconTitle(){return t(s)},get copySuccessIconTitle(){return t(M)},get content(){return t(a)},children:(x,Q)=>{$t();var G=wt();R(()=>et(G,t(a))),d(x,G)},$$slots:{default:!0}})}};b(pt,n=>{t(a)&&n(_t)})}c(ut);var h=E(ut),X=g(h),ht=g(X);Bt(ht,{get name(){return Ft.activity.name},get title(){return Ft.activity.title},class:"mr-1 inline animate-pulse"});var y=E(ht);c(X),c(h);var O=E(h),it=g(O),gt=g(it);{let n=l(()=>e.event.paused?"warning":e.event.attempt>1?"danger":"default");de(gt,{class:"mr-1",get type(){return t(n)},children:(s,M)=>{var x=Ae(),Q=nt(x);{let rt=l(()=>pe("mr-1 inline",e.event.attempt>1&&"font-bold text-red-400",e.event.paused&&"font-bold text-yellow-700")),Y=l(()=>e.event.paused?"pause":"retry");Bt(Q,{get class(){return t(rt)},get name(){return t(Y)}})}var G=E(Q),Dt=E(G);{var lt=rt=>{const Y=l(()=>ue({date:e.event.scheduledTime,negativeDefault:""}));var yt=kt(),xt=nt(yt);{var ft=Pt=>{var dt=wt();R(Lt=>et(dt,`• ${Lt??""}
            ${t(Y)??""}`),[()=>k("workflows.next-retry")]),d(Pt,dt)};b(xt,Pt=>{t(Y)&&Pt(ft)})}d(rt,yt)};b(Dt,rt=>{e.event.attempt>1&&rt(lt)})}R(rt=>et(G,` ${rt??""}
        ${e.event.attempt??""} / ${(e.event.maximumAttempts||"∞")??""} `),[()=>k("workflows.attempt")]),d(s,x)},$$slots:{default:!0}})}var mt=E(gt,2);Se(mt,{key:"activityType",get value(){return e.event.activityType},showKey:!0,get attributes(){return e.event}}),c(it),c(O);var bt=E(O);{var st=n=>{var s=Oe();d(n,s)};b(bt,n=>{U()&&n(st)})}c(L);var r=E(L,2);{var u=n=>{var s=Me(),M=g(s),x=g(M);ie(x,{get group(){return e.group}}),c(M),c(s),R(()=>ct(M,"colspan",U()?5:4)),d(n,s)};b(r,n=>{t(P)&&n(u)})}R((n,s)=>{ct(L,"id",`${e.event.id}-${e.index}`),qt(X,1,n),et(y,` ${s??""}`)},[()=>re(oe({category:"activity"})),()=>k("workflows.pending-activity")]),d(at,K),St(),W()}se(["click"]);var Ne=vt("<!> <!>",1),ze=vt("<td></td>"),Re=vt('<tr class="w-full px-2 text-sm no-underline"><td class="!p-0"><!></td></tr>'),qe=vt('<tr class="hover:cursor-pointer" data-testid="pending-nexus-summary-row"><td class="font-mono"><!></td><td class="table-cell text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="w-full overflow-hidden text-right text-sm font-normal xl:text-left"><div class="flex"><div class="flex w-full items-center gap-2"><p><!> </p> <!></div></div></td><td></td><!></tr> <!>',1);function je(at,e){Ct(e,!0);const D=()=>Z(Rt,"$page",I),N=()=>Z(le,"$timestamp",I),U=()=>Z(Ot,"$isCloud",I),[I,W]=Ht(),S=C(e,"expanded",3,!1),H=C(e,"onRowClick",3,()=>{});let P=Zt(te(S())),v=l(()=>D().params),p=l(()=>t(v).workflow),q=l(()=>t(v).run),T=l(()=>t(v).namespace),j=l(()=>ve({eventId:String(e.event.scheduledEventId),namespace:t(T),workflow:t(p),run:t(q)})),a=l(()=>N()(e.group===null||e.group===void 0?void 0:e.group.eventTime)),o=l(()=>N()(e.group===null||e.group===void 0?void 0:e.group.eventTime,{format:"short"}));const B=r=>{r.stopPropagation(),m(P,!t(P)),H()()};var K=qe(),L=nt(K);L.__click=B;var f=g(L),tt=g(f);ce(tt,{"data-testid":"link",get href(){return t(j)},children:(r,u)=>{$t();var n=wt();R(()=>et(n,e.event.scheduledEventId||"")),d(r,n)},$$slots:{default:!0}}),c(f);var _=E(f),z=g(_);{var A=r=>{{let u=l(()=>k("common.copy-icon-title")),n=l(()=>k("common.copy-success-icon-title"));Wt(r,{get copyIconTitle(){return t(u)},get copySuccessIconTitle(){return t(n)},get content(){return t(o)},children:(s,M)=>{$t();var x=wt();R(()=>et(x,t(o))),d(s,x)},$$slots:{default:!0}})}};b(z,r=>{t(o)&&r(A)})}c(_);var J=E(_),ot=g(J);{var ut=r=>{{let u=l(()=>k("common.copy-icon-title")),n=l(()=>k("common.copy-success-icon-title"));Wt(r,{get copyIconTitle(){return t(u)},get copySuccessIconTitle(){return t(n)},get content(){return t(a)},children:(s,M)=>{$t();var x=wt();R(()=>et(x,t(a))),d(s,x)},$$slots:{default:!0}})}};b(ot,r=>{t(a)&&r(ut)})}c(J);var pt=E(J),_t=g(pt),h=g(_t),X=g(h),ht=g(X);Bt(ht,{get name(){return Ft.nexus.name},get title(){return Ft.nexus.title},class:"mr-1 inline animate-pulse"});var y=E(ht);c(X);var O=E(X,2);{var it=r=>{{let u=l(()=>e.event.attempt>1?"danger":"default");de(r,{class:"mx-1",get type(){return t(u)},children:(n,s)=>{var M=Ne(),x=nt(M);{let lt=l(()=>e.event.attempt>1&&"font-bold text-red-400");Bt(x,{get class(){return`mr-1 inline ${t(lt)??""}`},name:"retry"})}var Q=E(x),G=E(Q);{var Dt=lt=>{const rt=l(()=>ue({date:e.event.nextAttemptScheduleTime,negativeDefault:""}));var Y=kt(),yt=nt(Y);{var xt=ft=>{var Pt=wt();R(dt=>et(Pt,`• ${dt??""}
                ${t(rt)??""}`),[()=>k("workflows.next-retry")]),d(ft,Pt)};b(yt,ft=>{t(rt)&&ft(xt)})}d(lt,Y)};b(G,lt=>{e.event.attempt>1&&lt(Dt)})}R(lt=>et(Q,` ${lt??""}
            ${e.event.attempt??""} `),[()=>k("workflows.attempt")]),d(n,M)},$$slots:{default:!0}})}};b(O,r=>{e.event.attempt&&r(it)})}c(h),c(_t),c(pt);var gt=E(pt,2);{var mt=r=>{var u=ze();d(r,u)};b(gt,r=>{U()&&r(mt)})}c(L);var bt=E(L,2);{var st=r=>{var u=Re(),n=g(u),s=g(n);ie(s,{get group(){return e.group}}),c(n),c(u),R(()=>ct(n,"colspan",U()?5:4)),d(r,u)};b(bt,r=>{t(P)&&r(st)})}R((r,u)=>{ct(L,"id",`${e.event.scheduledEventId}-${e.index}`),qt(X,1,r),et(y,` ${u??""}`)},[()=>re(oe({category:"nexus"})),()=>k("workflows.pending-nexus-operation")]),d(at,K),St(),W()}se(["click"]);var Je=vt('<div class="flex"><div class="pt-9"><!></div> <!></div>');function Tr(at,e){Ct(e,!1);const D=()=>Z(be,"$fullEventHistory",W),N=()=>Z(Rt,"$page",W),U=()=>Z(Pe,"$eventStatusFilter",W),I=()=>Z(Ot,"$isCloud",W),[W,S]=Ht(),H=w(),P=w(),v=w(),p=w(),q=w(),T=w(),j=w();var a=w();let o=C(e,"items",8),B=C(e,"groups",24,()=>[]),K=C(e,"updating",8,!1),L=C(e,"loading",8,!1),f=C(e,"compact",8,!1),tt=C(e,"minimized",8,!0),_=C(e,"hoveredEventId",12,void 0);const z=[{label:"Event ID"},{label:"Timestamp"},{label:"Event Type"},{label:"Details"}],A=h=>Et(h)?`pending-nexus-${h.scheduledEventId}`:It(h)?`pending-activity-${h.id}`:`event-${h.id}`;$(()=>(i(tt()),i(f())),()=>{m(H,!tt()&&!f())}),$(()=>D(),()=>{m(P,D()===null||D()===void 0?void 0:D()[0])}),$(()=>N(),()=>{m(v,N().url)}),$(()=>(Mt(a),t(v),Vt),()=>{m(p,m(a,t(v).searchParams.get(Vt))!==null&&Mt(a)!==void 0?Mt(a):"100")}),$(()=>(t(v),Xt),()=>{m(q,t(v).searchParams.get(Xt)||"1")}),$(()=>U(),()=>{m(j,h=>_e(h,U()))}),$(()=>(t(j),t(q),t(p)),()=>{m(T,h=>t(j)(h).slice((parseInt(t(q))-1)*parseInt(t(p)),parseInt(t(q))*parseInt(t(p))))}),$(()=>I(),()=>{I()&&z.length===4&&z.push({label:"Billable Actions"})}),zt(),At();var J=Je(),ot=g(J),ut=g(ot);{var pt=h=>{{let X=F(()=>(t(T),i(o()),V(()=>t(T)(o()))));Fe(h,{get groups(){return B()},get history(){return t(X)}})}};b(ut,h=>{t(H)&&h(pt)})}c(ot);var _t=E(ot,2);{let h=F(()=>(i(k),V(()=>k("common.per-page")))),X=F(()=>(i(k),V(()=>k("common.next-page")))),ht=F(()=>(i(k),V(()=>k("common.previous-page")))),y=F(()=>(t(j),i(o()),V(()=>t(j)(o()))));ye(_t,{get perPageLabel(){return t(h)},get nextPageButtonLabel(){return t(X)},get previousPageButtonLabel(){return t(ht)},pageButtonLabel:O=>k("common.go-to-page",{page:O}),get updating(){return K()},get items(){return t(y)},maxHeight:"none",children:me,$$slots:{default:(O,it)=>{const gt=F(()=>it.visibleItems);var mt=kt(),bt=nt(mt);Gt(bt,3,()=>t(gt),st=>A(st),(st,r,u)=>{var n=kt(),s=nt(n);{var M=Q=>{Yt(Q,{get event(){return t(r)},get index(){return t(u)},get group(){return t(r)},get compact(){return f()},get initialItem(){return t(P)},get hoveredEventId(){return _()},set hoveredEventId(G){_(G)},$$legacy:!0})},x=Q=>{var G=kt(),Dt=nt(G);{var lt=Y=>{{let yt=F(()=>(i(B()),i(It),t(r),V(()=>B().find(xt=>{var ft;return It(t(r))&&((ft=xt==null?void 0:xt.pendingActivity)==null?void 0:ft.id)===t(r).id}))));Ke(Y,{get event(){return t(r)},get index(){return t(u)},get group(){return t(yt)}})}},rt=Y=>{var yt=kt(),xt=nt(yt);{var ft=dt=>{{let Lt=F(()=>(i(B()),i(Et),t(r),V(()=>B().find(Tt=>{var jt;return Et(t(r))&&((jt=Tt==null?void 0:Tt.pendingNexusOperation)==null?void 0:jt.scheduledEventId)===t(r).scheduledEventId}))));je(dt,{get event(){return t(r)},get index(){return t(u)},get group(){return t(Lt)}})}},Pt=dt=>{{let Lt=F(()=>(i(B()),i(Nt),t(r),V(()=>B().find(Tt=>Nt(t(r))&&Tt.eventIds.has(t(r).id)))));Yt(dt,{get event(){return t(r)},get index(){return t(u)},get group(){return t(Lt)},get compact(){return f()},get initialItem(){return t(P)},get hoveredEventId(){return _()},set hoveredEventId(Tt){_(Tt)},$$legacy:!0})}};b(xt,dt=>{i(Et),t(r),V(()=>Et(t(r)))?dt(ft):dt(Pt,!1)},!0)}d(Y,yt)};b(Dt,Y=>{i(It),t(r),V(()=>It(t(r)))?Y(lt):Y(rt,!1)},!0)}d(Q,G)};b(s,Q=>{i(Ut),t(r),V(()=>Ut(t(r)))?Q(M):Q(x,!1)})}d(st,n)},st=>{{let r=F(()=>(D(),i(L()),V(()=>!D().length||L())));Be(st,{get loading(){return t(r)}})}}),d(O,mt)},headers:(O,it)=>{xe(O,{slot:"headers",class:"!h-8",children:(gt,mt)=>{var bt=kt(),st=nt(bt);Gt(st,3,()=>z,(r,u)=>`${r.label}:${u}`,(r,u)=>{Te(r,{get column(){return t(u)},children:(n,s)=>{var M=kt(),x=nt(M);{var Q=G=>{he(G,{eventTypesOnly:!0})};b(x,G=>{t(u),V(()=>t(u).label==="Event Type")&&G(Q)})}d(n,M)}})}),d(gt,bt)},$$slots:{default:!0}})}}})}c(J),d(at,J),St(),S()}export{Tr as E};
