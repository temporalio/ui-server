import"./CWj6FrbW.js";import{p as ee,J as Ce,f as K,d as z,e as N,b as te,j as P,r as T,K as pe,i as ae,c as ce,a9 as Q,h as J,t as se,al as H,am as Oe,aN as X,s as E,g as i,u as F,G as Se}from"./CckrFwdx.js";import{s as Me}from"./_IQD3yTx.js";import{i as Y}from"./CoMawi-e.js";import{b as R,C as he,a as re,c as Ae,e as Ie}from"./CjYTZKiB.js";import{p as m,s as de,r as ue,a as $,c as U}from"./BioCYJcK.js";import{I as ve}from"./POwFeHBs.js";import{t as q}from"./ebNgFJjp.js";import{c as Pe}from"./DlLJhG5Q.js";import{b as Te}from"./BteM-kHq.js";import{b as xe}from"./Cjp46PlA.js";import{t as Le,s as He}from"./Do-UwQxE.js";import{a as _e}from"./CjBgVCzp.js";import{c as Ne,g as je}from"./uVHWBtn_.js";import{w as ie}from"./DsVF0eUi.js";const fe="menu-context";var Be=K("<div><!></div>");function ut(t,e){ee(e,!0);const o=()=>$(w(),"$open",s),[s,_]=de(),w=m(e,"open",19,()=>ie(!1)),h=ue(e,["$$slots","$$events","$$legacy","open","class","children","onclose"]),C=ie(!1),k=ie(null),g=()=>{o()&&(e.onclose===null||e.onclose===void 0||e.onclose(),U(w(),!1))};Ce(fe,{open:w(),keepOpen:C,menuElement:k});var a=Be();R(a,d=>({class:d,...h}),[()=>q("relative",e.class)]);var y=P(a);z(y,()=>e.children,o),T(a),_e(a,(d,O)=>{var f;return(f=Ne)==null?void 0:f(d,O)},()=>g),N(t,a),te(),_()}const ge='input, li[role="option"]:not([aria-disabled="true"]), li[role="menuitem"]:not([aria-disabled="true"])';var Fe=K("<a><div><!></div> <!></a>"),ze=K("<div> </div>"),Xe=K('<li><!> <div class="grow"><div><!> <!></div> <!></div> <!></li>');function ft(t,e){ee(e,!0);const o=()=>$(O,"$keepOpen",s),[s,_]=de(),w=m(e,"destructive",3,!1),h=m(e,"disabled",3,!1),C=m(e,"href",3,null),k=m(e,"description",3,null),g=m(e,"centered",3,!1),a=m(e,"hoverable",3,!0),y=m(e,"newTab",3,!1),d=ue(e,["$$slots","$$events","$$legacy","class","selected","destructive","disabled","href","description","centered","hoverable","newTab","onclick","children","leading","trailing"]),{keepOpen:O,open:f}=pe(fe),p=v=>{switch(v.stopPropagation(),v.key){case"Escape":U(f,!1);break;case"ArrowDown":case"ArrowRight":b(v.currentTarget);break;case"ArrowUp":case"ArrowLeft":A(v.currentTarget);break;case" ":case"Enter":e.onclick===null||e.onclick===void 0||e.onclick(),o()||U(f,!1);break}},b=v=>{let n=v.nextElementSibling;for(;n&&!n.matches(ge);)n=n.nextElementSibling;n&&n instanceof HTMLLIElement&&n.focus()},A=v=>{let n=v.previousElementSibling;for(;n&&!n.matches(ge);)n=n.previousElementSibling;n&&n instanceof HTMLLIElement&&n.focus()},L=()=>{o()||U(f,!1),e.onclick===null||e.onclick===void 0||e.onclick()};var I=ae(),V=ce(I);{var W=v=>{var n=Fe();R(n,l=>({href:C(),target:y()?"_blank":null,rel:y()?"noreferrer":null,role:"menuitem",class:l,"aria-hidden":h()?"true":"false","aria-disabled":h(),tabindex:h()?-1:0,"data-track-name":"menuitem","data-track-intent":"navigate","data-track-text":"*textContent*",onkeydown:p,...d,[he]:{disabled:h(),hoverable:a()}}),[()=>q("menu-item","m-1 px-3 py-2","flex items-center gap-2",g()?"justify-center":"justify-between",e.class)],void 0,void 0,"svelte-xmojui");var r=P(n),u=P(r);z(u,()=>e.children??Q),T(r);var c=J(r,2);{var S=l=>{ve(l,{height:20,width:20,name:"external-link"})};Y(c,l=>{y()&&l(S)})}T(n),N(v,n)},D=v=>{var n=Xe();R(n,M=>({role:"menuitem",class:M,"aria-hidden":h()?"true":"false","aria-disabled":h(),tabindex:h()?-1:0,"data-track-name":"menuitem","data-track-intent":"action","data-track-text":"*textContent*",onkeydown:p,onclick:L,...d,[he]:{destructive:w(),disabled:h(),selected:e.selected,hoverable:a()}}),[()=>q("menu-item","m-1 px-3 py-2","flex items-center gap-2",e.class)],void 0,void 0,"svelte-xmojui");var r=P(n);z(r,()=>e.leading??Q);var u=J(r,2),c=P(u);let S;var l=P(c);z(l,()=>e.children??Q);var x=J(l,2);{var j=M=>{ve(M,{name:"checkmark",class:"shrink-0"})};Y(x,M=>{e.selected&&M(j)})}T(c);var G=J(c,2);{var B=M=>{var Z=ze();let me;var Ee=P(Z,!0);T(Z),se(()=>{me=re(Z,1,"menu-item-description svelte-xmojui",null,me,{"text-center":g()}),Me(Ee,k())}),N(M,Z)};Y(G,M=>{k()&&M(B)})}T(u);var ne=J(u,2);z(ne,()=>e.trailing??Q),T(n),se(()=>S=re(c,1,"menu-item-wrapper svelte-xmojui",null,S,{centered:g()})),N(v,n)};Y(V,v=>{C()?v(W):v(D,!1)})}N(t,I),te(),_()}function oe(t,e=document.body){const o=typeof e=="string"?document.querySelector(e):e;return o?(o.appendChild(t),{destroy(){t.parentNode&&t.parentNode.removeChild(t)}}):(console.warn("Portal target not found"),{destroy(){}})}function Ue(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight,right:window.innerWidth}}function le(t){const e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom,right:e.right}}function be(t,e,o){return{top:{x:t.left+t.width/2-e.width/2,y:t.top-e.height},bottom:{x:t.left+t.width/2-e.width/2,y:t.bottom},left:{x:t.left-e.width,y:t.top+t.height/2-e.height/2},right:{x:t.right,y:t.top+t.height/2-e.height/2},"top-left":{x:t.left,y:t.top-e.height},"top-right":{x:t.right-e.width,y:t.top-e.height},"bottom-left":{x:t.left,y:t.bottom},"bottom-right":{x:t.right-e.width,y:t.bottom}}[o]}function we(t,e){return{x:t.x+(e.x??0),y:t.y+(e.y??0)}}function ye(t,e,o,s){return{top:e<s.top,bottom:e+o.height>s.bottom,left:t<s.left,right:t+o.width>s.right}}function Ve(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-left","top-right":"bottom-right","bottom-left":"top-left","bottom-right":"top-right"}[t]}function We(t,e,o){const s={x:t.x??0,y:t.y??0};return(e.includes("top")&&o.includes("bottom")||e.includes("bottom")&&o.includes("top"))&&(s.y=t.y?-t.y:0),(e.includes("left")&&o.includes("right")||e.includes("right")&&o.includes("left"))&&(s.x=t.x?-t.x:0),s}function Ye(t,e,o,s){let _=t,w=e;return t<s.left?_=s.left:t+o.width>s.right&&(_=s.right-o.width),e<s.top?w=s.top:e+o.height>s.bottom&&(w=s.bottom-o.height),{x:_,y:w}}function qe(t,e,o,s,_,w){const h=w||Ue(),C=be(t,e,o);let k=we(C,s),g=!1,a=o;if(_){const d=ye(k.x,k.y,e,h);if(d.top||d.bottom||d.left||d.right){const O=Ve(o),f=We(s,o,O),p=be(t,e,O),b=we(p,f),A=ye(b.x,b.y,e,h),L=[d.top,d.bottom,d.left,d.right].filter(Boolean).length;[A.top,A.bottom,A.left,A.right].filter(Boolean).length<L&&(k=b,g=!0,a=O)}}const y=Ye(k.x,k.y,e,h);return{x:y.x,y:y.y,flipped:g,finalPosition:a}}var Ke=K('<div class="pointer-events-auto fixed left-0 top-0"><div><!></div></div>');function De(t,e){ee(e,!0);let o=m(e,"open",3,!0),s=m(e,"position",3,"bottom"),_=m(e,"offset",19,()=>({})),w=m(e,"target",19,()=>document.body),h=m(e,"hideWhenAnchorHidden",3,!0),C=m(e,"scrollContainer",3,window),k=m(e,"flipOnCollision",3,!0),g=m(e,"class",3,""),a=H(void 0),y=H(!0),d=H(0),O=H(0),f=H(null),p=H(Oe(window)),b=H(null);const A=F(()=>o()&&i(f)&&(!h()||i(y)));X(function(){typeof e.anchor=="string"?E(f,document.getElementById(e.anchor),!0):E(f,e.anchor,!0)}),X(function(){if(typeof C()=="string"){const r=document.getElementById(C());E(p,r||window,!0)}else E(p,C(),!0)}),X(function(){if(!i(f)||!h()){E(y,!0);return}const r=new IntersectionObserver(u=>{const c=u[0];E(y,c.isIntersecting,!0)},{threshold:0,root:i(p)!==window?i(p):null});return r.observe(i(f)),()=>{r.disconnect()}});function L(){if(!i(a)||!i(f))return;const n=le(i(f)),r=le(i(a)),u=i(p)!==window?le(i(p)):void 0,c=qe(n,r,s(),_(),k(),u),S=Math.round(c.x),l=Math.round(c.y);i(d)!==S&&E(d,S,!0),i(O)!==l&&E(O,l,!0)}function I(){i(b)!==null&&cancelAnimationFrame(i(b)),E(b,requestAnimationFrame(()=>{L(),E(b,null)}),!0)}function V(n){const r=[window,document];let u=n.parentElement;for(;u;){const{overflow:c,overflowX:S,overflowY:l}=window.getComputedStyle(u);[c,S,l].some(j=>j==="auto"||j==="scroll"||j==="overlay")&&r.push(u),u=u.parentElement}return r}X(function(){if(!i(A)||!i(a)||!i(f))return;Se(()=>L());const r=new ResizeObserver(()=>{I()});r.observe(i(a)),r.observe(i(f));const u=V(i(f));return u.forEach(c=>{c.addEventListener("scroll",I,{passive:!0})}),window.addEventListener("resize",I,{passive:!0}),()=>{i(b)!==null&&(cancelAnimationFrame(i(b)),E(b,null)),r.disconnect(),u.forEach(c=>{c.removeEventListener("scroll",I)}),window.removeEventListener("resize",I)}});var W=ae(),D=ce(W);{var v=n=>{var r=Ke();let u;var c=P(r),S=P(c);z(S,()=>e.children),T(c),T(r),xe(r,l=>E(a,l),()=>i(a)),_e(r,(l,x)=>oe==null?void 0:oe(l,x),w),se(l=>{u=Ie(r,"",u,{transform:`translate(${i(d)??""}px, ${i(O)??""}px)`,"will-change":"transform"}),re(c,1,l)},[()=>Ae(q(g()))]),Le(3,c,()=>He,()=>({duration:100,start:.95,opacity:0})),N(n,r)};Y(D,n=>{i(A)&&n(v)})}N(t,W),te()}const ke=["surface-primary","min-w-fit","list-none","overflow-auto","border","border-subtle","text-primary","shadow","w-full"],Ge=Pe([...ke,"absolute","z-20","mt-1","transition-all","duration-100","ease-out"],{variants:{position:{left:"left-0 origin-top-left",right:"right-0 origin-top-right","top-left":"left-0 origin-top-left","top-right":"right-0 origin-top-right"},state:{open:"visible scale-100 opacity-100",closed:"invisible scale-95 opacity-0"}}});var Je=K("<ul><!></ul>");function mt(t,e){ee(e,!0);const o=()=>$(b,"$keepOpenCtx",_),s=()=>$(L,"$open",_),[_,w]=de(),h=(l,x)=>{let j=()=>x==null?void 0:x()._class,G=()=>x==null?void 0:x().style;var B=Je();R(B,()=>({role:"menu",class:j(),"aria-labelledby":e.id,tabindex:-1,style:G(),id:e.id,onfocusout:D,onclick:v,...O}));var ne=P(B);z(ne,()=>e.children??Q),T(B),xe(B,M=>a(M),()=>a()),Te(B,"clientHeight",M=>E(f,M)),N(l,B)};let C=m(e,"class",3,""),k=m(e,"keepOpen",3,!1),g=m(e,"position",3,"left"),a=m(e,"menuElement",15,null),y=m(e,"maxHeight",3,"max-h-[20rem]"),d=m(e,"usePortal",3,!1),O=ue(e,["$$slots","$$events","$$legacy","class","id","keepOpen","position","menuElement","maxHeight","usePortal","scrollContainer","children"]),f=H(0),p=H(null);const{keepOpen:b,menuElement:A,open:L}=pe(fe);X(()=>{U(b,k())}),X(()=>{U(A,a())}),X(()=>{d()&&e.id&&E(p,document.querySelector(`[aria-controls="${e.id}"]`),!0)});const I=F(()=>{if(d())return g().includes("top")?g():g()==="left"?"bottom-left":"bottom-right"}),V=F(()=>a()?je(a()):[]),W=F(()=>i(V)[i(V).length-1]),D=l=>{!o()&&l.target===i(W)&&U(L,!1)},v=l=>{l.stopPropagation()},n=F(()=>Ge({position:g(),state:s()?"open":"closed"}));var r=ae(),u=ce(r);{var c=l=>{De(l,{get anchor(){return i(p)},get open(){return s()},get position(){return i(I)},get scrollContainer(){return e.scrollContainer},children:(x,j)=>{{let G=F(()=>({_class:q(ke,y(),C())}));h(x,()=>i(G))}},$$slots:{default:!0}})},S=l=>{{let x=F(()=>({_class:q(i(n),y(),C()),style:g()==="top-right"||g()==="top-left"?`top: -${i(f)+16}px;`:void 0}));h(l,()=>i(x))}};Y(u,l=>{d()&&i(p)?l(c):l(S,!1)})}N(t,r),te(),w()}export{fe as M,ge as a,ft as b,ut as c,mt as d};
