import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as F,t as L,f as H,i as x,r as y,c as k,j as P,e as S,b as q,l as J,a as N,o as C,L as O,g as z}from"./BUtADDjV.js";import{e as B,s as E}from"./BIRKK4Cx.js";import{i as G}from"./Cx0Hed4m.js";import{k as K}from"./DN0UWYhh.js";import{a as w,s as M}from"./D8C9uSNL.js";import{i as D}from"./h9b1Gopq.js";import{p as a}from"./B1GMiS9d.js";import{a as Q}from"./BEyRdwvQ.js";import{C as W}from"./RQ9xl5jj.js";import{I as X}from"./BVWW46Sb.js";import{t as g}from"./D2OY9xdY.js";import{t as Y}from"./DdvxKEYX.js";import{L as Z}from"./DEcVbmPQ.js";import{T as $}from"./Bz2USGpB.js";var ee=L('<label class="file-upload-label svelte-quefyv"><!></label> <input class="hidden" type="file">',1);function te(I,e){F(e,!1);let s=a(e,"id",8),o=a(e,"accept",8,".json"),l=a(e,"onUpload",8);const T=U=>{var m;const v=U.target,d=(m=v==null?void 0:v.files)===null||m===void 0?void 0:m[0],r=new FileReader;d&&(r.readAsText(d),r.onload=()=>{var n,c;try{const _=(c=(n=r==null?void 0:r.result)===null||n===void 0?void 0:n.toString())!==null&&c!==void 0?c:"";l()(_)}catch{Y.push({variant:"error",message:g("common.upload-error")})}})};D();var f=ee(),i=H(f),p=x(i);X(p,{name:"upload"}),y(i);var u=k(i,2);P(()=>{w(i,"for",s()),w(u,"id",s()),w(u,"accept",o())}),B("change",u,T),S(I,f),q()}var ae=L('<div class="flex flex-col gap-2"><!> <div class="flex gap-2"><!> <!></div> <span> </span></div>');function xe(I,e){F(e,!1);let s=a(e,"id",24,()=>crypto.randomUUID()),o=a(e,"error",12,!1),l=a(e,"input",12),T=a(e,"label",24,()=>g("workflows.signal-payload-input-label")),f=a(e,"loading",12,!1),i=a(e,"hintText",24,()=>g("workflows.signal-payload-input-label-hint")),p=a(e,"editing",8,!0);const u=t=>{if(!l())return!0;try{return JSON.parse(t),!0}catch{return!1}},U=t=>{l(t)},m=()=>{l(""),f(!1)},v=t=>{l(t)};Q(m),J(()=>O(l()),()=>{o(!u(l()))}),N(),D();var d=ae(),r=x(d);Z(r,{get for(){return s()},get label(){return T()}});var n=k(r,2),c=x(n);K(c,()=>[f(),p()],t=>{W(t,{get id(){return s()},maxHeight:320,get content(){return l()},onchange:U,get editable(){return p()},copyable:!1})});var _=k(c,2);{var R=t=>{const h=C(()=>g("common.upload-json"));$(t,{get text(){return z(h)},topRight:!0,children:(A,le)=>{te(A,{get id(){return`${s()??""}-input-file-upload`},onUpload:v})},$$slots:{default:!0}})};G(_,t=>{p()&&t(R)})}y(n);var b=k(n,2);let j;var V=x(b,!0);y(b),y(d),P((t,h)=>{j=M(b,1,`text-xs ${(o()?"text-danger":"text-primary")??""} inline-block`,null,j,t),w(b,"role",o()?"alert":null),E(V,h)},[()=>({hidden:!i()&&!o()}),()=>o()?g("common.input-valid-json"):i()],C),S(I,d),q()}export{xe as P};
