import"./CWj6FrbW.js";import{o as ga}from"./DsVF0eUi.js";import{p as Re,f as R,j as i,n as de,k as Z,t as L,e as u,h as v,r as n,a9 as W,g as e,u as a,b as De,i as he,c as q,d as _a,l as st,s as Ae,m as Je,L as Y,a as wt,G as Ie,q as Vt,aP as ft,o as Ot,ao as mt,al as Rt,am as pa}from"./CckrFwdx.js";import{s as E,d as xa,e as Dt}from"./_IQD3yTx.js";import{i as k}from"./CoMawi-e.js";import{e as Ue,i as kt}from"./BTEtt5uP.js";import{c as yt,a as Ze,s as gt}from"./CjYTZKiB.js";import{s as bt,a as Ye,l as lt,p as Q,b as _t}from"./BioCYJcK.js";import{p as Ve}from"./BUhcbzda.js";import{t as Ut,T as qt}from"./Buiq-mNa.js";import{c as ya,B as qe}from"./DlLJhG5Q.js";import{C as We}from"./Dakcn231.js";import{I as ht}from"./POwFeHBs.js";import{L as Ke}from"./B_SqjjHL.js";import{T as pt}from"./IF1TuVBO.js";import{t as m}from"./DEjs8ZrU.js";import{b as Wt,i as J,e as ha,c as wa,d as ka}from"./BhJUzv4h.js";import{i as ba}from"./D-F0QYpO.js";import{a as Ta}from"./Bp7uNEFS.js";import{c as Ia,d as Ea}from"./B0Nc4gUu.js";import{a as Pa,b as Aa,g as Sa}from"./DU7kTy7U.js";import{c as Ca,f as La,d as ot,e as Fa,h as Ma,j as Oa,k as Ra,l as Da}from"./DCRkJDxb.js";import{g as Xe,h as Ee,F as Ha}from"./CpP-VKAC.js";import{f as $e,s as Kt}from"./ByTIZu23.js";import{t as Qt,f as Xt,P as ja}from"./CuOirZGE.js";import{n as Ht}from"./EZHNhN5g.js";import{c as jt,k as Na,l as Ga,a as za,b as Nt}from"./B5WGkR7a.js";import"./DAcYyk2F.js";import"./DynX2UVw.js";import"./DdySIf96.js";import"./CIlsHtsd.js";import"./BUApaBEI.js";import"./Dk2sa4cb.js";import{s as Gt}from"./DSbgyoV1.js";import{C as Pe}from"./CneSAwz0.js";import{o as Ba}from"./C8ejR22J.js";import{g as Jt}from"./BRHRGab_.js";import"./69_IOA4Y.js";import{i as Tt,t as ct}from"./ebNgFJjp.js";import{p as Va}from"./CxyV96G0.js";import{M as Yt}from"./BnZg_25a.js";import{P as it}from"./BbslnEsH.js";const rt=6,In={height:rt*4,gutter:rt*8,radius:rt*1.5,fontSizeRatio:rt*4},En={height:32,radius:4},Ua={workflow:"workflow",signal:"signal",activity:"activity",nexus:"nexus",timer:"retention","local-activity":"feather","child-workflow":"relationship",update:"update",other:"terminal"},Pn=(s,t,r,l,f)=>{const{radius:g}=f,d=s[0],x=s[s.length-1];let y=!1,b="start",c=0;const h=d>1/2*r;let P=!h&&x<2/3*r&&!l;h&&(b="end"),P&&(c=s.indexOf(x));const F=1.5*g;let w=P?x+F:d-F;if(!P&&!h&&(y=!0,P=!0,w=d+F,s.length===2&&l&&s[1]-s[0]<r-s[1]&&(c=1,w=s[1]+F),s.length>2)){const S=s[1]-s[0];s[2]-s[1]>S&&(c=1,w=s[1]+F)}return{textPosition:[w,t],textIndex:c,textAnchor:b,backdrop:y}},An=(s,t)=>{const r=t.find(f=>f.eventIds.has(s.id));return r?Array.from(r.eventIds).indexOf(s.id)===1&&r.eventList.length===3:!1},xt=(s,t)=>parseInt(s)===parseInt(t)-1,qa=s=>{const t=Array.from(s.eventIds);return t.length===1?!0:t.length===2?xt(t[0],t[1]):t.length===3?xt(t[0],t[1])&&xt(t[1],t[2]):!1},Wa=(s,t)=>{const r=Wt(t,s);if(!r)return 0;if(r.level!==void 0)return r.level;const l=t.filter(d=>d.isPending&&d.id!==r.id).filter(d=>parseInt(d.initialEvent.id)<parseInt(r.initialEvent.id)),f=t.filter(d=>d.eventList.length>1&&!d.isPending&&d.id!==r.id).filter(d=>parseInt(d.initialEvent.id)<parseInt(r.initialEvent.id)).filter(d=>parseInt(d.lastEvent.id)>parseInt(r.initialEvent.id)),g=[...l,...f];return!g.length&&qa(r)&&(r.level=0),r.level=g.length+1,r.level},Sn=(s,t,r,l,f)=>{const g=Wt(r,t);let d=0,x=0;if(!g)return{nextDistance:d,offset:x};if(g.eventList.length===1&&!g.isPending)return{nextDistance:d,offset:x};const y=Xe(t)?g.eventList.indexOf(t):-1,b=Xe(t)?g.eventList[y+1]:void 0;if((!Xe(t)||t.category!=="workflow")&&(x=Wa(t,r)),!b&&!g.isPending)return{nextDistance:d,offset:x};let c=0;b&&Xe(t)?c=parseInt(b.id)-parseInt(t.id):g.isPending&&Xe(t)&&(c=s.length-parseInt(t.id)+2);const h=c*l;return d=f==="ascending"?h:-h,{nextDistance:d,offset:x}},zt=async(s,t)=>{var d,x,y,b,c,h,P,F,w,D,S;if(!("eventType"in s)||!Ee(s))return;const{namespace:r,settings:l,accessToken:f}=t,g={...l,codec:{...l==null?void 0:l.codec,endpoint:Sa(l),passAccessToken:Aa(l),includeCredentials:Pa(l)}};try{const H=await Ia(s.attributes,r,g,f),M=((y=(x=(d=s.markerRecordedEventAttributes)==null?void 0:d.details)==null?void 0:x.data)==null?void 0:y.payloads)||((h=(c=(b=s.markerRecordedEventAttributes)==null?void 0:b.details)==null?void 0:c.type)==null?void 0:h.payloads)||[];if(!(M!=null&&M.length))return;const T=Ea(H),N=(S=((F=(P=T==null?void 0:T.details)==null?void 0:P.data)==null?void 0:F.payloads)||((D=(w=T==null?void 0:T.details)==null?void 0:w.type)==null?void 0:D.payloads))==null?void 0:S[0],B=Ca(N);if(B)return La("ActivityType",B)}catch(H){console.error("Failed to decode local activity type:",H)}},Cn=s=>{if("eventList"in s)return s.eventList.find(Ee);if(Ee(s))return s},Ka=ya(["whitespace-nowrap font-semibold md:text-base flex items-center gap-0.5"],{variants:{category:{workflow:"text-blue-700 dark:text-blue-400",activity:"text-purple-600 dark:text-purple-500","child-workflow":"text-cyan-600",timer:"text-yellow-600 dark:text-yellow-400",signal:"text-pink-600 dark:text-pink-400",update:"text-blue-600 dark:text-blue-400",other:"text-slate-700 dark:text-slate-300",nexus:"text-indigo-600 dark:text-indigo-400","local-activity":"text-slate-700 dark:text-slate-300",default:"text-purple-600 dark:text-purple-500"}}}),ye=(s,t=W,r=W)=>{var l=Xa(),f=i(l),g=i(f,!0);n(f);var d=v(f,2),x=i(d);{var y=c=>{var h=Z();L(()=>E(h,r())),u(c,h)},b=c=>{var h=he(),P=q(h);_a(P,()=>r()??W),u(c,h)};k(x,c=>{typeof r()=="string"||typeof r()=="number"?c(y):c(b,!1)})}n(d),n(l),L(()=>E(g,t())),u(s,l)};var Qa=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Xa=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ja=R("<!> ",1),Ya=R('<p class="text-sm text-secondary/80"> </p> <!>',1),Za=R('<p class="text-sm text-secondary/80"> </p> <!>',1),$a=R('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),er=R('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),tr=R('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),ar=R('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function rr(s,t){Re(t,!0);const r=()=>Ye(Ut,"$timestamp",l),[l,f]=bt(),g=(o,I=W)=>{var A=Qa(),ee=i(A),oe=i(ee,!0);n(ee);var z=v(ee,2),ie=i(z),we=v(ie),le=i(we);n(we),n(z),n(A),L((me,ce)=>{E(oe,me),E(ie,`${ce??""} `),E(le,`(${I()??""})`)},[()=>m("workflows.next-retry"),()=>r()(t.operation.nextAttemptScheduleTime,{relativeLabel:""})]),u(o,A)},d=o=>{{let I=a(()=>e(y)?"danger":"default");qe(o,{class:"mr-1",get type(){return e(I)},children:(A,ee)=>{var oe=Ja(),z=q(oe);{let we=a(()=>e(y)&&"font-bold text-red-400");ht(z,{get class(){return`mr-1 ${e(we)??""}`},name:"retry"})}var ie=v(z);L(()=>E(ie,` ${t.operation.attempt??0??""}`)),u(A,oe)},$$slots:{default:!0}})}},x=o=>{var I=$a(),A=i(I),ee=i(A);{var oe=le=>{var me=Ya(),ce=q(me),Fe=i(ce,!0);n(ce);var Ne=v(ce,2);{let be=a(()=>Gt(Ba(t.operation.lastAttemptFailure,"stackTrace"))),Me=a(()=>m("common.copy-icon-title")),tt=a(()=>m("common.copy-success-icon-title"));Pe(Ne,{get content(){return e(be)},maxHeight:384,get copyIconTitle(){return e(Me)},get copySuccessIconTitle(){return e(tt)}})}L(be=>E(Fe,be),[()=>m("workflows.last-failure")]),u(le,me)};k(ee,le=>{t.operation.lastAttemptFailure&&le(oe)})}n(A);var z=v(A,2),ie=i(z);{var we=le=>{var me=Za(),ce=q(me),Fe=i(ce,!0);n(ce);var Ne=v(ce,2);{let be=a(()=>m("common.copy-icon-title")),Me=a(()=>m("common.copy-success-icon-title"));Pe(Ne,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(be)},get copySuccessIconTitle(){return e(Me)}})}L(be=>E(Fe,be),[()=>m("common.stack-trace")]),u(le,me)};k(ie,le=>{var me;(me=t.operation.lastAttemptFailure)!=null&&me.stackTrace&&le(we)})}n(z),n(I),u(o,I)},y=a(()=>t.operation.attempt>1);var b=ar(),c=i(b),h=i(c),P=i(h);qe(P,{children:(o,I)=>{de();var A=Z();L(()=>E(A,t.operation.state)),u(o,A)},$$slots:{default:!0}});var F=v(P,2),w=i(F,!0);n(F),n(h),n(c);var D=v(c,2),S=i(D),H=i(S);{var M=o=>{{let I=a(()=>m("nexus.endpoint"));ye(o,()=>e(I),()=>t.operation.endpoint)}};k(H,o=>{t.operation.endpoint&&o(M)})}var T=v(H,2);{var N=o=>{{let I=a(()=>m("nexus.service"));ye(o,()=>e(I),()=>t.operation.service)}};k(T,o=>{t.operation.service&&o(N)})}var B=v(T,2);{var X=o=>{{let I=a(()=>m("nexus.operation"));ye(o,()=>e(I),()=>t.operation.operation)}};k(B,o=>{t.operation.operation&&o(X)})}var V=v(B,2);{var U=o=>{{let I=a(()=>m("nexus.operation-token"));ye(o,()=>e(I),()=>t.operation.operationToken)}};k(V,o=>{t.operation.operationToken&&o(U)})}var $=v(V,2);{let o=a(()=>m("workflows.attempt"));ye($,()=>e(o),()=>d)}var re=v($,2);{var _e=o=>{const I=a(()=>Qt({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var A=he(),ee=q(A);{var oe=z=>{g(z,()=>e(I))};k(ee,z=>{e(I)&&z(oe)})}u(o,A)};k(re,o=>{t.operation.nextAttemptScheduleTime&&o(_e)})}var _=v(re,2);{var O=o=>{{let I=a(()=>m("workflows.last-attempt-completed-time")),A=a(()=>r()(t.operation.lastAttemptCompleteTime));ye(o,()=>e(I),()=>e(A))}};k(_,o=>{t.operation.lastAttemptCompleteTime&&o(O)})}var G=v(_,2);{var ue=o=>{{let I=a(()=>m("workflows.schedule-event-id")),A=a(()=>String(t.operation.scheduledEventId));ye(o,()=>e(I),()=>e(A))}};k(G,o=>{t.operation.scheduledEventId&&o(ue)})}var se=v(G,2);{var He=o=>{{let I=a(()=>m("workflows.scheduled-time")),A=a(()=>r()(t.operation.scheduledTime));ye(o,()=>e(I),()=>e(A))}};k(se,o=>{t.operation.scheduledTime&&o(He)})}var Se=v(se,2);{var ne=o=>{{let I=a(()=>m("workflows.schedule-to-close-timeout"));ye(o,()=>e(I),()=>t.operation.scheduleToCloseTimeout)}};k(Se,o=>{t.operation.scheduleToCloseTimeout&&o(ne)})}var fe=v(Se,2);{var pe=o=>{{let I=a(()=>m("workflows.schedule-to-start-timeout"));ye(o,()=>e(I),()=>t.operation.scheduleToCloseTimeout)}};k(fe,o=>{t.operation.scheduleToStartTimeout&&o(pe)})}var Ce=v(fe,2);{var Te=o=>{{let I=a(()=>m("workflows.start-to-close-timeout"));ye(o,()=>e(I),()=>t.operation.startToCloseTimeout)}};k(Ce,o=>{t.operation.startToCloseTimeout&&o(Te)})}n(S);var Le=v(S,2),je=i(Le);{var et=o=>{x(o)};k(je,o=>{e(y)&&o(et)})}var Qe=v(je,2);{var vt=o=>{var I=er(),A=i(I),ee=i(A,!0);n(A);var oe=v(A,2);{let z=a(()=>m("common.copy-icon-title")),ie=a(()=>m("common.copy-success-icon-title"));Pe(oe,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(z)},get copySuccessIconTitle(){return e(ie)}})}n(I),L(z=>E(ee,z),[()=>m("nexus.blocked-reason")]),u(o,I)};k(Qe,o=>{t.operation.blockedReason&&o(vt)})}var dt=v(Qe,2);{var ut=o=>{var I=tr(),A=i(I),ee=i(A,!0);n(A);var oe=v(A,2);{let z=a(()=>Gt(t.operation.cancellationInfo)),ie=a(()=>m("common.copy-icon-title")),we=a(()=>m("common.copy-success-icon-title"));Pe(oe,{language:"text",get content(){return e(z)},get copyIconTitle(){return e(ie)},get copySuccessIconTitle(){return e(we)}})}n(I),L(z=>E(ee,z),[()=>m("nexus.cancellation-info")]),u(o,I)};k(dt,o=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&o(ut)})}n(Le),n(D),n(b),L(o=>E(w,o),[()=>m("workflows.pending-nexus-operation")]),u(s,b),De(),f()}function Zt(s,t){const r=lt(t,["children","$$slots","$$events","$$legacy"]),l=lt(r,["value","attributes","type"]);Re(t,!1);const f=()=>Ye(Va,"$page",g),[g,d]=bt(),x=Je(),y=Je(),b=Je();let c=Q(t,"value",8),h=Q(t,"attributes",8),P=Q(t,"type",8);function F(w,D,S,H,M){return M==="execution"?jt({namespace:w,workflow:D,run:H}):M==="task-queue"?Na({namespace:w,queue:H}):M==="child-workflow"?jt({namespace:w,workflow:S.workflowExecutionWorkflowId,run:S.workflowExecutionRunId}):M==="nexus-endpoint"?Ga(H):""}st(()=>(e(x),e(y),f()),()=>{(w=>{Ae(x,w.workflow),Ae(y,w.namespace)})(f().params)}),st(()=>(e(y),e(x),Y(h()),Y(c()),Y(P())),()=>{Ae(b,F(e(y),e(x),h(),c(),P()))}),wt(),Tt(),Ke(s,{get class(){return Y(l),Ie(()=>l.class)},get href(){return e(b)},children:(w,D)=>{de();var S=Z();L(()=>E(S,c())),u(w,S)},$$slots:{default:!0}}),De(),d()}const nr=(s,t=W)=>{const r=a(()=>Jt(t())),l=a(()=>{var y;return((y=e(r).split("workflows/"))==null?void 0:y[1])||e(r)});var f=vr(),g=i(f),d=i(g,!0);n(g);var x=v(g,2);{let y=a(()=>m("common.copy-icon-title")),b=a(()=>m("common.copy-success-icon-title"));We(x,{get copyIconTitle(){return e(y)},get copySuccessIconTitle(){return e(b)},get content(){return e(l)},children:(c,h)=>{Ke(c,{get href(){return e(r)},class:"whitespace-pre-line",children:(P,F)=>{de();var w=Z();L(()=>E(w,e(l))),u(P,w)},$$slots:{default:!0}})},$$slots:{default:!0}})}n(f),L(y=>E(d,y),[()=>m("nexus.link")]),u(s,f)},or=(s,t=W)=>{const r=a(()=>za({namespace:t().workflowEvent.namespace}));var l=dr(),f=i(l),g=i(f,!0);n(f);var d=v(f,2);{let x=a(()=>m("common.copy-icon-title")),y=a(()=>m("common.copy-success-icon-title"));We(d,{get copyIconTitle(){return e(x)},get copySuccessIconTitle(){return e(y)},get content(){return t().workflowEvent.namespace},children:(b,c)=>{Ke(b,{get href(){return e(r)},class:"whitespace-pre-line",children:(h,P)=>{de();var F=Z();L(()=>E(F,t().workflowEvent.namespace)),u(h,F)},$$slots:{default:!0}})},$$slots:{default:!0}})}n(l),L(x=>E(g,x),[()=>m("nexus.link-namespace")]),u(s,l)},ir=(s,t=W)=>{var r=he(),l=q(r);Ue(l,17,t,kt,(f,g,d,x)=>{var y=ur(),b=q(y);nr(b,()=>e(g));var c=v(b,2);or(c,()=>e(g)),u(f,y)}),u(s,r)},sr=(s,t=W)=>{var r=fr(),l=v(i(r),2),f=i(l);{let g=a(()=>m("events.decode-failed"));Yt(f,{get value(){return t()},get fallback(){return e(g)},children:Vt,$$slots:{default:(d,x)=>{const y=a(()=>x.decodedValue);de();var b=Z();L(()=>E(b,e(y))),u(d,b)}}})}n(l),n(r),u(s,r)},lr=(s,t=W,r=W)=>{const l=a(()=>Oa(r())),f=a(()=>Ma(e(l)));var g=gr(),d=q(g),x=i(d),y=i(x,!0);n(x);var b=v(x,2);{var c=w=>{it(w,{get value(){return r()},key:"payloads",children:(S,H=W)=>{{let M=a(()=>m("common.copy-icon-title")),T=a(()=>m("common.copy-success-icon-title"));Pe(S,{get content(){return H()},maxHeight:384,get copyIconTitle(){return e(M)},get copySuccessIconTitle(){return e(T)}})}},$$slots:{default:!0}})},h=w=>{var D=he(),S=q(D);{var H=T=>{{const N=(X,V=W)=>{{let U=a(()=>m("common.copy-icon-title")),$=a(()=>m("common.copy-success-icon-title"));Pe(X,{get content(){return V()},maxHeight:384,get copyIconTitle(){return e(U)},get copySuccessIconTitle(){return e($)}})}};let B=a(()=>({searchAttributes:e(l)}));it(T,{key:"searchAttributes",get value(){return e(B)},children:N,$$slots:{default:!0}})}},M=T=>{it(T,{get value(){return e(l)},children:(B,X=W)=>{{let V=a(()=>m("common.copy-icon-title")),U=a(()=>m("common.copy-success-icon-title"));Pe(B,{get content(){return X()},maxHeight:384,get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(U)}})}},$$slots:{default:!0}})};k(S,T=>{t()==="searchAttributes"?T(H):T(M,!1)},!0)}u(w,D)};k(b,w=>{var D;(D=r())!=null&&D.payloads?w(c):w(h,!1)})}n(d);var P=v(d,2);{var F=w=>{var D=mr(),S=i(D),H=i(S,!0);n(S);var M=v(S,2);{let T=a(()=>m("common.copy-icon-title")),N=a(()=>m("common.copy-success-icon-title"));Pe(M,{get content(){return e(f)},language:"text",maxHeight:384,get copyIconTitle(){return e(T)},get copySuccessIconTitle(){return e(N)}})}n(D),L(T=>E(H,T),[()=>m("workflows.call-stack-tab")]),u(w,D)};k(P,w=>{e(f)&&w(F)})}L(w=>E(y,w),[()=>$e(t())]),u(s,g)},cr=(s,t=W,r=W)=>{var l=pr(),f=i(l),g=i(f,!0);n(f);var d=v(f,2),x=i(d);{var y=c=>{qt(c,{get dateTime(){return r()}})},b=c=>{var h=Z();L(()=>E(h,r())),u(c,h)};k(x,c=>{Fa(t())?c(y):c(b,!1)})}n(d),n(l),L(c=>E(g,c),[()=>$e(t())]),u(s,l)};var vr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),dr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),ur=R("<!> <!>",1),fr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),mr=R('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),gr=R('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),_r=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),pr=R('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),xr=R('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),yr=R('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Bt(s,t){Re(t,!0);const r=(_,O=W,G=W)=>{var ue=_r(),se=i(ue),He=i(se,!0);n(se);var Se=v(se,2);{let ne=a(()=>m("common.copy-icon-title")),fe=a(()=>m("common.copy-success-icon-title")),pe=a(()=>String(G()));We(Se,{get copyIconTitle(){return e(ne)},get copySuccessIconTitle(){return e(fe)},get content(){return e(pe)},children:(Ce,Te)=>{{let Le=a(()=>String(G())),je=a(()=>ot(O(),e(f)));Zt(Ce,{get value(){return e(Le)},get attributes(){return e(f)},get type(){return e(je)},class:"whitespace-pre-line"})}},$$slots:{default:!0}})}n(ue),L(ne=>E(He,ne),[()=>$e(O())]),u(_,ue)},l=a(()=>Ee(t.event)?m("events.category.local-activity"):Kt(t.event.name)),f=a(()=>Xt(t.event)),g=a(()=>Object.entries(e(f))),d=a(()=>e(g).filter(([_,O])=>typeof O=="object"&&Object.keys(O).length>0)),x=a(()=>e(g).filter(([_,O])=>ot(_,e(f))!=="none")),y=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),b=a(()=>e(g).filter(([_,O])=>typeof O!="object"&&ot(_,e(f))==="none"&&!e(y).includes(_)&&(_!=="namespace"||_==="namespace"&&Ve.params.namespace!==O)));var c=yr(),h=i(c),P=i(h),F=i(P),w=i(F,!0);n(F);var D=v(F,2),S=i(D,!0);n(D),n(P);var H=v(P,2);qt(H,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),n(h);var M=v(h,2),T=i(M),N=i(T);{var B=_=>{ir(_,()=>t.event.links)};k(N,_=>{var O,G;(G=(O=t.event)==null?void 0:O.links)!=null&&G.length&&_(B)})}var X=v(N,2);{var V=_=>{sr(_,()=>t.event.userMetadata.summary)};k(X,_=>{var O,G;(G=(O=t.event)==null?void 0:O.userMetadata)!=null&&G.summary&&_(V)})}var U=v(X,2);Ue(U,17,()=>e(b),([_,O])=>_,(_,O)=>{var G=a(()=>ft(e(O),2));cr(_,()=>e(G)[0],()=>e(G)[1])});var $=v(U,2);Ue($,17,()=>e(x),([_,O])=>_,(_,O)=>{var G=a(()=>ft(e(O),2));r(_,()=>e(G)[0],()=>e(G)[1])}),n(T);var re=v(T,2);{var _e=_=>{var O=xr();Ue(O,21,()=>e(d),([G,ue])=>G,(G,ue)=>{var se=a(()=>ft(e(ue),2));lr(G,()=>e(se)[0],()=>e(se)[1])}),n(O),u(_,O)};k(re,_=>{e(d).length&&_(_e)})}n(M),n(c),L(()=>{E(w,t.event.id),E(S,e(l))}),u(s,c),De()}var hr=R('<div class="flex flex-col overflow-hidden"><!> <!></div>');function wr(s,t){Re(t,!0);let r=Q(t,"group",3,void 0),l=Q(t,"event",3,void 0);const f=a(()=>(r()===null||r()===void 0?void 0:r().pendingActivity)||(r()===null||r()===void 0?void 0:r().pendingNexusOperation)),g=a(()=>r()&&(r().eventList.length>1||e(f)));var d=he(),x=q(d);{var y=c=>{var h=hr(),P=i(h);{var F=S=>{ja(S,{get activity(){return r().pendingActivity}})},w=S=>{var H=he(),M=q(H);{var T=N=>{rr(N,{get operation(){return r().pendingNexusOperation}})};k(M,N=>{var B;(B=r())!=null&&B.pendingNexusOperation&&N(T)},!0)}u(S,H)};k(P,S=>{var H;(H=r())!=null&&H.pendingActivity?S(F):S(w,!1)})}var D=v(P,2);Ue(D,17,()=>r().eventList,kt,(S,H)=>{Bt(S,{get event(){return e(H)}})}),n(h),u(c,h)},b=c=>{var h=he(),P=q(h);{var F=w=>{Bt(w,{get event(){return l()}})};k(P,w=>{l()&&w(F)},!0)}u(c,h)};k(x,c=>{e(g)?c(y):c(b,!1)})}u(s,d),De()}var kr=R('<p class="whitespace-nowrap text-right text-xs"> </p>'),br=R('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),Tr=R('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),Ir=R('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function nt(s,t){const r=lt(t,["children","$$slots","$$events","$$legacy"]);Re(t,!1);const l=Je();let f=Q(t,"key",8),g=Q(t,"value",8),d=Q(t,"attributes",8),x=Q(t,"showKey",8,!0);st(()=>(Y(f()),Y(d())),()=>{Ae(l,ot(f(),d()))}),wt(),Tt();var y=he(),b=q(y);{var c=h=>{var P=Ir(),F=i(P);{var w=M=>{var T=kr(),N=i(T,!0);n(T),L(B=>E(N,B),[()=>(Y($e),Y(f()),Ie(()=>$e(f())))]),u(M,T)};k(F,M=>{x()&&M(w)})}var D=v(F,2);{var S=M=>{var T=Tr(),N=i(T);it(N,{get value(){return g()},key:"payloads",children:(X,V=W)=>{var U=br(),$=i(U),re=i($),_e=i(re,!0);n(re),n($),n(U),L((_,O)=>{Ze(U,1,_,"svelte-cy5z6t"),E(_e,O)},[()=>yt((Y(ct),Y(r),Ie(()=>ct("payload",r.class)))),()=>(V(),Ie(()=>V().slice(0,60)))]),u(X,U)},$$slots:{default:!0}}),n(T),u(M,T)},H=M=>{var T=he(),N=q(T);{var B=V=>{{let U=Ot(()=>(Y(m),Ie(()=>m("common.copy-icon-title")))),$=Ot(()=>(Y(m),Ie(()=>m("common.copy-success-icon-title"))));We(V,{get copyIconTitle(){return e(U)},get copySuccessIconTitle(){return e($)},get content(){return g()},"container-class":"truncate",children:(re,_e)=>{Zt(re,{get value(){return g()},get attributes(){return d()},get type(){return e(l)},class:"truncate"})},$$slots:{default:!0}})}},X=V=>{qe(V,{type:"subtle",class:"block select-none truncate",children:(U,$)=>{de();var re=Z();L(()=>E(re,g())),u(U,re)},$$slots:{default:!0}})};k(N,V=>{e(l)!=="none"?V(B):V(X,!1)},!0)}u(M,T)};k(D,M=>{typeof g()=="object"?M(S):M(H,!1)})}n(P),u(h,P)};k(b,h=>{f()&&h(c)})}u(s,y),De()}var Er=R('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function Pr(s,t){const r=lt(t,["children","$$slots","$$events","$$legacy"]);Re(t,!1);var l=Je();let f=Q(t,"link",8),g=Q(t,"value",28,()=>f().workflowEvent.workflowId),d=Q(t,"label",24,()=>m("nexus.link")),x=Q(t,"href",12,void 0);st(()=>(Y(x()),Y(f()),mt(l)),()=>{x()||(x(Jt(f())),g((Ae(l,x().split("workflows/"))===null||mt(l)===void 0?void 0:mt(l)[1])||x()))}),wt(),Tt();var y=Er(),b=i(y),c=i(b,!0);n(b);var h=v(b,2),P=i(h);Ke(P,{get href(){return x()},children:(F,w)=>{de();var D=Z();L(()=>E(D,g())),u(F,D)},$$slots:{default:!0}}),n(h),n(y),L(()=>{Ze(y,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${Y(r),Ie(()=>r.class)??""}`),E(c,d()),Ze(h,1,`overflow-hidden ${Y(r),Ie(()=>r.linkClass)??""}`)}),u(s,y),De()}var Ar=R('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Sr=R('<td class="font-mono"><!></td>'),Cr=R(" <!>",1),Lr=R("<!> <!>",1),Fr=R('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Mr=R('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Or=R('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Rr=R('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function Ln(s,t){Re(t,!0);const r=()=>Ye(Ut,"$timestamp",g),l=()=>Ye(Ta,"$authUser",g),f=()=>Ye(ba,"$isCloud",g),[g,d]=bt();var x,y,b,c,h,P,F,w;let D=Q(t,"compact",3,!1),S=Q(t,"expanded",3,!1),H=Q(t,"onRowClick",3,()=>{}),M=Q(t,"hoveredEventId",15),T=Rt(pa(S())),N=Rt(void 0);const B=a(()=>J(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),X=a(()=>Ve.params),V=a(()=>e(X).workflow),U=a(()=>e(X).run),$=a(()=>e(X).namespace),re=a(()=>Nt({eventId:t.event.id,namespace:e($),workflow:e(V),run:e(U)})),_e=a(()=>Xt(t.event)),_=a(()=>J(t.event)?t.event.events.get(e(B)):t.event),O=a(()=>Ht({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:J(e(_))?(x=e(_).initialEvent)===null||x===void 0?void 0:x.eventTime:e(_)===null||e(_)===void 0?void 0:e(_).eventTime,includeMillisecondsForUnderSecond:!0})),G=a(()=>J(t.event)?Ht({start:(y=t.event.initialEvent)===null||y===void 0?void 0:y.eventTime,end:(b=t.event.lastEvent)===null||b===void 0?void 0:b.eventTime,includeMillisecondsForUnderSecond:!0}):""),ue=a(()=>ha(t.event)),se=a(()=>wa(t.event)),He=a(()=>ka(t.event)),Se=a(()=>J(t.event)?t.event.label:Ee(t.event)?m("events.category.local-activity"):Kt(t.event.name)),ne=a(()=>Ee(t.event)?void 0:Ra(J(t.event)?t.event.initialEvent:t.event)),fe=a(()=>Da(J(t.event)?t.event.lastEvent:t.event,e(ne)===null||e(ne)===void 0?void 0:e(ne).key)),pe=a(()=>J(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),Ce=a(()=>e(pe)&&(e(pe)===null||e(pe)===void 0?void 0:e(pe).paused)),Te=a(()=>J(t.event)&&t.event.isPending&&(((c=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||c===void 0?void 0:c.attempt)||((h=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||h===void 0?void 0:h.attempt))),Le=a(()=>J(t.event)&&!t.event.isPending&&((F=(P=t.event.eventList.find(Ha))===null||P===void 0?void 0:P.attributes)===null||F===void 0?void 0:F.attempt)),je=a(()=>D()&&(e(fe)===null||e(fe)===void 0?void 0:e(fe).key)&&(e(fe)===null||e(fe)===void 0?void 0:e(fe).key)!==(e(ne)===null||e(ne)===void 0?void 0:e(ne).key)&&!(!((w=e(_)===null||e(_)===void 0?void 0:e(_).userMetadata)===null||w===void 0)&&w.summary)),et=a(()=>r()(e(_)===null||e(_)===void 0?void 0:e(_).eventTime)),Qe=a(()=>r()(e(_)===null||e(_)===void 0?void 0:e(_).eventTime,{format:"short"})),vt=p=>{Ae(T,!e(T)),p.stopPropagation(),H()()},dt=()=>{M(t.event.id)},ut=()=>{M(void 0)};let o=(p,C)=>{var j;return(j=p==null?void 0:p.eventIds)===null||j===void 0?void 0:j.has(C)};ga(async()=>{Ee(t.event)?Ae(N,await zt(t.event,{namespace:Ve.params.namespace,settings:Ve.data.settings,accessToken:l().accessToken}),!0):J(t.event)&&Ee(t.event.initialEvent)&&Ae(N,await zt(t.event.initialEvent,{namespace:Ve.params.namespace,settings:Ve.data.settings,accessToken:l().accessToken}),!0)});var I=Rr(),A=q(I);A.__click=vt;var ee=i(A);{var oe=p=>{var C=Ar(),j=i(C);Ue(j,21,()=>t.event.eventList,kt,(ve,te)=>{{let K=a(()=>Nt({eventId:e(te).id,namespace:e($),workflow:e(V),run:e(U)}));Ke(ve,{"data-testid":"link",get href(){return e(K)},children:(ge,ke)=>{de();var ae=Z();L(()=>E(ae,e(te).id)),u(ge,ae)},$$slots:{default:!0}})}}),n(j),n(C),u(p,C)},z=p=>{var C=Sr(),j=i(C);Ke(j,{"data-testid":"link",get href(){return e(re)},children:(ve,te)=>{de();var K=Z();L(()=>E(K,t.event.id)),u(ve,K)},$$slots:{default:!0}}),n(C),u(p,C)};k(ee,p=>{J(t.event)?p(oe):p(z,!1)})}var ie=v(ee),we=i(ie);{let p=a(()=>J(t.event)&&!e(G)||!e(O)),C=a(()=>J(t.event)?`Duration: ${e(G)}`:`+${e(O)}`);pt(we,{get hide(){return e(p)},get text(){return e(C)},class:"block",bottom:!0,children:(j,ve)=>{{let te=a(()=>m("common.copy-icon-title")),K=a(()=>m("common.copy-success-icon-title"));We(j,{get copyIconTitle(){return e(te)},get copySuccessIconTitle(){return e(K)},get content(){return e(Qe)},children:(ge,ke)=>{de();var ae=Z();L(()=>E(ae,e(Qe))),u(ge,ae)},$$slots:{default:!0}})}},$$slots:{default:!0}})}n(ie);var le=v(ie),me=i(le);{let p=a(()=>J(t.event)&&!e(G)||!e(O)),C=a(()=>J(t.event)?`Duration: ${e(G)}`:`+${e(O)}`);pt(me,{get hide(){return e(p)},get text(){return e(C)},class:"block",bottom:!0,children:(j,ve)=>{{let te=a(()=>m("common.copy-icon-title")),K=a(()=>m("common.copy-success-icon-title"));We(j,{get copyIconTitle(){return e(te)},get copySuccessIconTitle(){return e(K)},get content(){return e(et)},children:(ge,ke)=>{de();var ae=Z();L(()=>E(ae,e(et))),u(ge,ae)},$$slots:{default:!0}})}},$$slots:{default:!0}})}n(le);var ce=v(le),Fe=i(ce),Ne=i(Fe);ht(Ne,{get name(){return Ua[t.event.category]},class:"mr-1 inline"});var be=v(Ne);n(Fe),n(ce);var Me=v(ce),tt=i(Me),It=i(tt);{var $t=p=>{{let C=a(()=>e(Ce)?"warning":e(Te)>1?"danger":"default");qe(p,{class:"mr-1",get type(){return e(C)},children:(j,ve)=>{var te=Lr(),K=q(te);{let xe=a(()=>ct("mr-1 inline",e(Te)>1&&"font-bold text-red-400",e(Ce)&&"font-bold text-yellow-700")),Oe=a(()=>e(Ce)?"pause":"retry");ht(K,{get class(){return e(xe)},get name(){return e(Oe)}})}var ge=v(K),ke=v(ge);{var ae=xe=>{var Oe=Cr(),Ge=q(Oe),at=v(Ge);{var da=ze=>{const Lt=a(()=>{var Be;return Qt({date:(Be=e(pe))==null?void 0:Be.scheduledTime,negativeDefault:""})});var Ft=he(),ua=q(Ft);{var fa=Be=>{var Mt=Z();L(ma=>E(Mt,`• ${ma??""}
                ${e(Lt)??""}`),[()=>m("workflows.next-retry")]),u(Be,Mt)};k(ua,Be=>{e(Lt)&&Be(fa)})}u(ze,Ft)};k(at,ze=>{e(Te)>1&&ze(da)})}L(()=>{var ze;return E(Ge,`/ ${(((ze=e(pe))==null?void 0:ze.maximumAttempts)||"∞")??""} `)}),u(xe,Oe)};k(ke,xe=>{e(pe)&&xe(ae)})}L(xe=>E(ge,` ${xe??""}
          ${e(Te)??""} `),[()=>m("workflows.attempt")]),u(j,te)},$$slots:{default:!0}})}};k(It,p=>{e(Te)&&p($t)})}var Et=v(It,2);{var ea=p=>{nt(p,_t(()=>e(ne),{get attributes(){return e(_e)}}))};k(Et,p=>{var C;!e(N)&&((C=e(ne))!=null&&C.key)&&p(ea)})}var Pt=v(Et,2);{var ta=p=>{nt(p,_t(()=>e(N),{get attributes(){return e(_e)}}))};k(Pt,p=>{e(N)&&e(N).key&&p(ta)})}var At=v(Pt,2);{var aa=p=>{Yt(p,{get value(){return e(_).userMetadata.summary},children:Vt,$$slots:{default:(C,j)=>{const ve=a(()=>j.decodedValue);var te=he(),K=q(te);{var ge=ke=>{var ae=Fr(),xe=v(i(ae),2);qe(xe,{type:"secondary",class:"block select-none truncate",children:(Oe,Ge)=>{de();var at=Z();L(()=>E(at,e(ve))),u(Oe,at)},$$slots:{default:!0}}),n(ae),u(ke,ae)};k(K,ke=>{e(ve)&&ke(ge)})}u(C,te)}}})};k(At,p=>{var C,j;(j=(C=e(_))==null?void 0:C.userMetadata)!=null&&j.summary&&p(aa)})}var St=v(At,2);{var ra=p=>{Pr(p,{get link(){return e(_).links[0]},class:"max-w-xl",linkClass:"truncate"})};k(St,p=>{var C,j;(j=(C=e(_))==null?void 0:C.links)!=null&&j.length&&p(ra)})}var Ct=v(St,2);{var na=p=>{{let C=a(()=>e(Le).toString());nt(p,{key:"attempt",get value(){return e(C)},get attributes(){return e(_e)}})}};k(Ct,p=>{e(Le)&&p(na)})}var oa=v(Ct,2);{var ia=p=>{nt(p,_t(()=>e(fe),{get attributes(){return e(_e)}}))};k(oa,p=>{e(je)&&p(ia)})}n(tt),n(Me);var sa=v(Me);{var la=p=>{var C=Mr(),j=i(C),ve=i(j);{var te=K=>{{let ge=a(()=>m("workflows.estimated-billable-actions"));pt(K,{get text(){return e(ge)},topRight:!0,children:(ke,ae)=>{qe(ke,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(xe,Oe)=>{de();var Ge=Z();L(()=>E(Ge,t.event.billableActions)),u(xe,Ge)},$$slots:{default:!0}})},$$slots:{default:!0}})}};k(ve,K=>{t.event.billableActions&&K(te)})}n(j),n(C),u(p,C)};k(sa,p=>{f()&&p(la)})}n(A);var ca=v(A,2);{var va=p=>{var C=Or(),j=i(C),ve=i(j);wr(ve,{get group(){return t.group},get event(){return e(_)}}),n(j),n(C),L(()=>gt(j,"colspan",f()?5:4)),u(p,C)};k(ca,p=>{e(T)&&p(va)})}L((p,C)=>{Ze(A,1,p,"svelte-1cvp1uf"),gt(A,"id",`${t.event.id}-${t.index}`),gt(A,"data-eventid",t.event.id),Ze(Fe,1,C),E(be,` ${e(Se)??""}`)},[()=>yt(ct("hover:cursor-pointer",e(ue)&&"!bg-red-400/40 hover:!bg-red-400/60",e(se)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(He)&&"!bg-pink-700/30 hover:!bg-pink-700/50",o(t.group,M())&&"active")),()=>yt(Ka({category:t.event.category}))]),Dt("mouseenter",A,dt),Dt("mouseleave",A,ut),u(s,I),De(),d()}xa(["click"]);export{Ua as C,Ln as E,En as H,In as T,nt as a,wr as b,Cn as c,zt as d,Ka as e,Pr as f,Sn as g,An as i,Pn as t};
