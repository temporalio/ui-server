import"./CWj6FrbW.js";import{o as _a}from"./D12POdU-.js";import{p as He,f as D,j as n,n as ve,k as ee,t as I,e as i,h as l,r,a9 as Q,g as e,u as a,b as Re,i as ye,c as K,d as ga,l as ot,s as Se,m as Je,L as $,a as gt,G as Ae,q as Ot,aP as dt,o as Ft,ao as ut,al as Ct,am as pa}from"./yn9lut7I.js";import{s as k,d as xa,e as Lt}from"./B95CcGmx.js";import{i as _}from"./Bw1cG9kR.js";import{e as Ue,i as pt}from"./B0gjW5Lu.js";import{c as zt,a as it,s as mt}from"./BLNXIcBS.js";import{s as xt,a as Ie,l as st,p as X,b as ft}from"./C6jR5PNA.js";import{p as Ve}from"./CcthVPor.js";import{B as qe}from"./edr_GHSD.js";import{C as Ge}from"./5CVJZZ5q.js";import{I as Bt}from"./CX6FZu_7.js";import{L as We}from"./BD_wA4_4.js";import{T as _t}from"./8P15j799.js";import{t as v}from"./DEjs8ZrU.js";import{i as Z,e as ya,a as ha,b as wa}from"./Bwr3uHvu.js";import{i as ka}from"./BUmryCDV.js";import{a as ba}from"./j5XEhUQM.js";import{f as Xe,t as Vt,r as Ut,a as qt}from"./iS02Ws-X.js";import{c as Ta,d as Ia}from"./DwmzgdR0.js";import{a as Aa,b as Ea,g as Pa}from"./qAX2rAY8.js";import{b as Sa,f as Fa,d as rt,s as Ca,c as La,e as Ma,h as ja,j as Da}from"./DeDv51Z9.js";import{h as Ee,F as Ha}from"./G96JkwUg.js";import{f as Ye,s as Gt}from"./ByTIZu23.js";import{t as Wt,f as Kt,P as Ra}from"./DOoIMUeJ.js";import{y as Mt}from"./DL-sqeab.js";import{c as jt,k as Na,l as Oa,a as za,b as Dt}from"./BwgDh81C.js";import{C as Pe}from"./BvfO1iZi.js";import{o as Ba}from"./C8ejR22J.js";import{s as Ht}from"./rlUF3pky.js";import{T as Qt}from"./s8ol0nR7.js";import{g as Jt}from"./DHWpTIv5.js";import"./69_IOA4Y.js";import{i as yt,t as lt}from"./Bk16Yghv.js";import{p as Va}from"./DW0IBFoc.js";import"./DAcYyk2F.js";import"./CoOLeReu.js";import{M as Xt}from"./Un4jl7A8.js";import{P as nt}from"./BwkPBCHp.js";const Rt=async(b,t)=>{var T,g,y,A,u,f,C,R,p,j,L;if(!("eventType"in b)||!Ee(b))return;const{namespace:s,settings:c,accessToken:m}=t,x={...c,codec:{...c==null?void 0:c.codec,endpoint:Pa(c),passAccessToken:Ea(c),includeCredentials:Aa(c)}};try{const N=await Ta(b.attributes,s,x,m),P=((y=(g=(T=b.markerRecordedEventAttributes)==null?void 0:T.details)==null?void 0:g.data)==null?void 0:y.payloads)||((f=(u=(A=b.markerRecordedEventAttributes)==null?void 0:A.details)==null?void 0:u.type)==null?void 0:f.payloads)||[];if(!(P!=null&&P.length))return;const h=Ia(N),z=(L=((R=(C=h==null?void 0:h.details)==null?void 0:C.data)==null?void 0:R.payloads)||((j=(p=h==null?void 0:h.details)==null?void 0:p.type)==null?void 0:j.payloads))==null?void 0:L[0],B=Sa(z);if(B)return Fa("ActivityType",B)}catch(N){console.error("Failed to decode local activity type:",N)}},pn=b=>{if("eventList"in b)return b.eventList.find(Ee);if(Ee(b))return b},Te=(b,t=Q,s=Q)=>{var c=qa(),m=n(c),x=n(m,!0);r(m);var T=l(m,2),g=n(T);{var y=u=>{var f=ee();I(()=>k(f,s())),i(u,f)},A=u=>{var f=ye(),C=K(f);ga(C,()=>s()??Q),i(u,f)};_(g,u=>{typeof s()=="string"||typeof s()=="number"?u(y):u(A,!1)})}r(T),r(c),I(()=>k(x,t())),i(b,c)};var Ua=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),qa=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ga=D("<!> ",1),Wa=D('<p class="text-sm text-secondary/80"> </p> <!>',1),Ka=D('<p class="text-sm text-secondary/80"> </p> <!>',1),Qa=D('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <div class="flex flex-1 flex-col"><!></div></div>'),Ja=D('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),Xa=D('<div class="flex flex-1 flex-col"><p class="text-sm text-secondary/80"> </p> <!></div>'),Ya=D('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex-1"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!> <!></div></div></div>');function Za(b,t){He(t,!0);const s=()=>Ie(qt,"$timeFormat",x),c=()=>Ie(Ut,"$relativeTime",x),m=()=>Ie(Vt,"$timestampFormat",x),[x,T]=xt(),g=(o,E=Q)=>{var H=Ua(),ie=n(H),se=n(ie,!0);r(ie);var V=l(ie,2),G=n(V),ge=l(G),pe=n(ge);r(ge),r(V),r(H),I((me,le)=>{k(se,me),k(G,`${le??""} `),k(pe,`(${E()??""})`)},[()=>v("workflows.next-retry"),()=>Xe(t.operation.nextAttemptScheduleTime,s(),{relative:c(),format:m(),relativeLabel:""})]),i(o,H)},y=o=>{{let E=a(()=>e(u)?"danger":"default");qe(o,{class:"mr-1",get type(){return e(E)},children:(H,ie)=>{var se=Ga(),V=K(se);{let ge=a(()=>e(u)&&"font-bold text-red-400");Bt(V,{get class(){return`mr-1 ${e(ge)??""}`},name:"retry"})}var G=l(V);I(()=>k(G,` ${t.operation.attempt??0??""}`)),i(H,se)},$$slots:{default:!0}})}},A=o=>{var E=Qa(),H=n(E),ie=n(H);{var se=pe=>{var me=Wa(),le=K(me),Qe=n(le,!0);r(le);var Me=l(le,2);{let be=a(()=>Ht(Ba(t.operation.lastAttemptFailure,"stackTrace"))),je=a(()=>v("common.copy-icon-title")),et=a(()=>v("common.copy-success-icon-title"));Pe(Me,{get content(){return e(be)},maxHeight:384,get copyIconTitle(){return e(je)},get copySuccessIconTitle(){return e(et)}})}I(be=>k(Qe,be),[()=>v("workflows.last-failure")]),i(pe,me)};_(ie,pe=>{t.operation.lastAttemptFailure&&pe(se)})}r(H);var V=l(H,2),G=n(V);{var ge=pe=>{var me=Ka(),le=K(me),Qe=n(le,!0);r(le);var Me=l(le,2);{let be=a(()=>v("common.copy-icon-title")),je=a(()=>v("common.copy-success-icon-title"));Pe(Me,{language:"text",maxHeight:384,get content(){return t.operation.lastAttemptFailure.stackTrace},get copyIconTitle(){return e(be)},get copySuccessIconTitle(){return e(je)}})}I(be=>k(Qe,be),[()=>v("common.stack-trace")]),i(pe,me)};_(G,pe=>{var me;(me=t.operation.lastAttemptFailure)!=null&&me.stackTrace&&pe(ge)})}r(V),r(E),i(o,E)},u=a(()=>t.operation.attempt>1);var f=Ya(),C=n(f),R=n(C),p=n(R);qe(p,{children:(o,E)=>{ve();var H=ee();I(()=>k(H,t.operation.state)),i(o,H)},$$slots:{default:!0}});var j=l(p,2),L=n(j,!0);r(j),r(R),r(C);var N=l(C,2),P=n(N),h=n(P);{var z=o=>{{let E=a(()=>v("nexus.endpoint"));Te(o,()=>e(E),()=>t.operation.endpoint)}};_(h,o=>{t.operation.endpoint&&o(z)})}var B=l(h,2);{var W=o=>{{let E=a(()=>v("nexus.service"));Te(o,()=>e(E),()=>t.operation.service)}};_(B,o=>{t.operation.service&&o(W)})}var q=l(B,2);{var U=o=>{{let E=a(()=>v("nexus.operation"));Te(o,()=>e(E),()=>t.operation.operation)}};_(q,o=>{t.operation.operation&&o(U)})}var te=l(q,2);{var oe=o=>{{let E=a(()=>v("nexus.operation-token"));Te(o,()=>e(E),()=>t.operation.operationToken)}};_(te,o=>{t.operation.operationToken&&o(oe)})}var he=l(te,2);{let o=a(()=>v("workflows.attempt"));Te(he,()=>e(o),()=>y)}var S=l(he,2);{var M=o=>{const E=a(()=>Wt({date:t.operation.nextAttemptScheduleTime,negativeDefault:""}));var H=ye(),ie=K(H);{var se=V=>{g(V,()=>e(E))};_(ie,V=>{e(E)&&V(se)})}i(o,H)};_(S,o=>{t.operation.nextAttemptScheduleTime&&o(M)})}var w=l(S,2);{var ae=o=>{{let E=a(()=>v("workflows.last-attempt-completed-time")),H=a(()=>Xe(t.operation.lastAttemptCompleteTime,s(),{relative:c(),format:m()}));Te(o,()=>e(E),()=>e(H))}};_(w,o=>{t.operation.lastAttemptCompleteTime&&o(ae)})}var Y=l(w,2);{var Ne=o=>{{let E=a(()=>v("workflows.schedule-event-id")),H=a(()=>String(t.operation.scheduledEventId));Te(o,()=>e(E),()=>e(H))}};_(Y,o=>{t.operation.scheduledEventId&&o(Ne)})}var Fe=l(Y,2);{var Ce=o=>{{let E=a(()=>v("workflows.scheduled-time")),H=a(()=>Xe(t.operation.scheduledTime,s(),{relative:c(),format:m()}));Te(o,()=>e(E),()=>e(H))}};_(Fe,o=>{t.operation.scheduledTime&&o(Ce)})}var Ke=l(Fe,2);{var de=o=>{{let E=a(()=>v("workflows.schedule-to-close-timeout"));Te(o,()=>e(E),()=>t.operation.scheduleToCloseTimeout)}};_(Ke,o=>{t.operation.scheduleToCloseTimeout&&o(de)})}r(P);var ue=l(P,2),_e=n(ue);{var Le=o=>{A(o)};_(_e,o=>{e(u)&&o(Le)})}var we=l(_e,2);{var Ze=o=>{var E=Ja(),H=n(E),ie=n(H,!0);r(H);var se=l(H,2);{let V=a(()=>v("common.copy-icon-title")),G=a(()=>v("common.copy-success-icon-title"));Pe(se,{language:"text",get content(){return t.operation.blockedReason},get copyIconTitle(){return e(V)},get copySuccessIconTitle(){return e(G)}})}r(E),I(V=>k(ie,V),[()=>v("nexus.blocked-reason")]),i(o,E)};_(we,o=>{t.operation.blockedReason&&o(Ze)})}var ct=l(we,2);{var $e=o=>{var E=Xa(),H=n(E),ie=n(H,!0);r(H);var se=l(H,2);{let V=a(()=>Ht(t.operation.cancellationInfo)),G=a(()=>v("common.copy-icon-title")),ge=a(()=>v("common.copy-success-icon-title"));Pe(se,{language:"text",get content(){return e(V)},get copyIconTitle(){return e(G)},get copySuccessIconTitle(){return e(ge)}})}r(E),I(V=>k(ie,V),[()=>v("nexus.cancellation-info")]),i(o,E)};_(ct,o=>{Object.keys(t.operation.cancellationInfo??{}).length>0&&o($e)})}r(ue),r(N),r(f),I(o=>k(L,o),[()=>v("workflows.pending-nexus-operation")]),i(b,f),Re(),T()}function Yt(b,t){const s=st(t,["children","$$slots","$$events","$$legacy"]),c=st(s,["value","attributes","type"]);He(t,!1);const m=()=>Ie(Va,"$page",x),[x,T]=xt(),g=Je(),y=Je(),A=Je();let u=X(t,"value",8),f=X(t,"attributes",8),C=X(t,"type",8);function R(p,j,L,N,P){return P==="execution"?jt({namespace:p,workflow:j,run:N}):P==="task-queue"?Na({namespace:p,queue:N}):P==="child-workflow"?jt({namespace:p,workflow:L.workflowExecutionWorkflowId,run:L.workflowExecutionRunId}):P==="nexus-endpoint"?Oa(N):""}ot(()=>(e(g),e(y),m()),()=>{(p=>{Se(g,p.workflow),Se(y,p.namespace)})(m().params)}),ot(()=>(e(y),e(g),$(f()),$(u()),$(C())),()=>{Se(A,R(e(y),e(g),f(),u(),C()))}),gt(),yt(),We(b,{get class(){return $(c),Ae(()=>c.class)},get href(){return e(A)},children:(p,j)=>{ve();var L=ee();I(()=>k(L,u())),i(p,L)},$$slots:{default:!0}}),Re(),T()}const $a=(b,t=Q)=>{const s=a(()=>Jt(t())),c=a(()=>{var y;return((y=e(s).split("workflows/"))==null?void 0:y[1])||e(s)});var m=or(),x=n(m),T=n(x,!0);r(x);var g=l(x,2);{let y=a(()=>v("common.copy-icon-title")),A=a(()=>v("common.copy-success-icon-title"));Ge(g,{get copyIconTitle(){return e(y)},get copySuccessIconTitle(){return e(A)},get content(){return e(c)},children:(u,f)=>{We(u,{get href(){return e(s)},class:"whitespace-pre-line",children:(C,R)=>{ve();var p=ee();I(()=>k(p,e(c))),i(C,p)},$$slots:{default:!0}})},$$slots:{default:!0}})}r(m),I(y=>k(T,y),[()=>v("nexus.link")]),i(b,m)},er=(b,t=Q)=>{const s=a(()=>za({namespace:t().workflowEvent.namespace}));var c=ir(),m=n(c),x=n(m,!0);r(m);var T=l(m,2);{let g=a(()=>v("common.copy-icon-title")),y=a(()=>v("common.copy-success-icon-title"));Ge(T,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(y)},get content(){return t().workflowEvent.namespace},children:(A,u)=>{We(A,{get href(){return e(s)},class:"whitespace-pre-line",children:(f,C)=>{ve();var R=ee();I(()=>k(R,t().workflowEvent.namespace)),i(f,R)},$$slots:{default:!0}})},$$slots:{default:!0}})}r(c),I(g=>k(x,g),[()=>v("nexus.link-namespace")]),i(b,c)},tr=(b,t=Q)=>{var s=ye(),c=K(s);Ue(c,17,t,pt,(m,x,T,g)=>{var y=sr(),A=K(y);$a(A,()=>e(x));var u=l(A,2);er(u,()=>e(x)),i(m,y)}),i(b,s)},ar=(b,t=Q)=>{var s=lr(),c=l(n(s),2),m=n(c);{let x=a(()=>v("events.decode-failed"));Xt(m,{get value(){return t()},get fallback(){return e(x)},children:Ot,$$slots:{default:(T,g)=>{const y=a(()=>g.decodedValue);ve();var A=ee();I(()=>k(A,e(y))),i(T,A)}}})}r(c),r(s),i(b,s)},rr=(b,t=Q,s=Q)=>{const c=a(()=>Ma(s())),m=a(()=>La(e(c)));var x=vr(),T=K(x),g=n(T),y=n(g,!0);r(g);var A=l(g,2);{var u=p=>{nt(p,{get value(){return s()},key:"payloads",children:(L,N=Q)=>{{let P=a(()=>v("common.copy-icon-title")),h=a(()=>v("common.copy-success-icon-title"));Pe(L,{get content(){return N()},maxHeight:384,get copyIconTitle(){return e(P)},get copySuccessIconTitle(){return e(h)}})}},$$slots:{default:!0}})},f=p=>{var j=ye(),L=K(j);{var N=h=>{{const z=(W,q=Q)=>{{let U=a(()=>v("common.copy-icon-title")),te=a(()=>v("common.copy-success-icon-title"));Pe(W,{get content(){return q()},maxHeight:384,get copyIconTitle(){return e(U)},get copySuccessIconTitle(){return e(te)}})}};let B=a(()=>({searchAttributes:e(c)}));nt(h,{key:"searchAttributes",get value(){return e(B)},children:z,$$slots:{default:!0}})}},P=h=>{nt(h,{get value(){return e(c)},children:(B,W=Q)=>{{let q=a(()=>v("common.copy-icon-title")),U=a(()=>v("common.copy-success-icon-title"));Pe(B,{get content(){return W()},maxHeight:384,get copyIconTitle(){return e(q)},get copySuccessIconTitle(){return e(U)}})}},$$slots:{default:!0}})};_(L,h=>{t()==="searchAttributes"?h(N):h(P,!1)},!0)}i(p,j)};_(A,p=>{var j;(j=s())!=null&&j.payloads?p(u):p(f,!1)})}r(T);var C=l(T,2);{var R=p=>{var j=cr(),L=n(j),N=n(L,!0);r(L);var P=l(L,2);{let h=a(()=>v("common.copy-icon-title")),z=a(()=>v("common.copy-success-icon-title"));Pe(P,{get content(){return e(m)},language:"text",maxHeight:384,get copyIconTitle(){return e(h)},get copySuccessIconTitle(){return e(z)}})}r(j),I(h=>k(N,h),[()=>v("workflows.call-stack-tab")]),i(p,j)};_(C,p=>{e(m)&&p(R)})}I(p=>k(y,p),[()=>Ye(t())]),i(b,x)},nr=(b,t=Q,s=Q)=>{var c=ur(),m=n(c),x=n(m,!0);r(m);var T=l(m,2),g=n(T);{var y=u=>{Qt(u,{get dateTime(){return s()}})},A=u=>{var f=ee();I(()=>k(f,s())),i(u,f)};_(g,u=>{Ca(t())?u(y):u(A,!1)})}r(T),r(c),I(u=>k(x,u),[()=>Ye(t())]),i(b,c)};var or=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),ir=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),sr=D("<!> <!>",1),lr=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80">Summary</p> <p class="whitespace-pre-line"><!></p></div>'),cr=D('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div>'),vr=D('<div><p class="mb-1 min-w-56 text-sm text-secondary/80"> </p> <!></div> <!>',1),dr=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <!></div>'),ur=D('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="whitespace-pre-line break-all"><!></p></div>'),mr=D('<div class="flex w-full flex-col gap-1 xl:w-1/2"></div>'),fr=D('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-wrap items-center justify-between gap-2"><div class="flex items-center gap-2 text-base"><p class="font-mono"> </p> <p class="font-medium"> </p></div> <!></div> <div class="flex flex-col gap-1 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!></div> <!></div></div>');function Nt(b,t){He(t,!0);const s=(S,M=Q,w=Q)=>{var ae=dr(),Y=n(ae),Ne=n(Y,!0);r(Y);var Fe=l(Y,2);{let Ce=a(()=>v("common.copy-icon-title")),Ke=a(()=>v("common.copy-success-icon-title")),de=a(()=>String(w()));Ge(Fe,{get copyIconTitle(){return e(Ce)},get copySuccessIconTitle(){return e(Ke)},get content(){return e(de)},children:(ue,_e)=>{{let Le=a(()=>String(w())),we=a(()=>rt(M(),e(m)));Yt(ue,{get value(){return e(Le)},get attributes(){return e(m)},get type(){return e(we)},class:"whitespace-pre-line"})}},$$slots:{default:!0}})}r(ae),I(Ce=>k(Ne,Ce),[()=>Ye(M())]),i(S,ae)},c=a(()=>Ee(t.event)?v("events.category.local-activity"):Gt(t.event.name)),m=a(()=>Kt(t.event)),x=a(()=>Object.entries(e(m))),T=a(()=>e(x).filter(([S,M])=>typeof M=="object"&&Object.keys(M).length>0)),g=a(()=>e(x).filter(([S,M])=>rt(S,e(m))!=="none")),y=a(()=>t.event.category==="activity"?["scheduledEventId","startedEventId","namespaceId"]:t.event.category==="child-workflow"?["initiatedEventId","startedEventId","namespaceId"]:["namespaceId"]),A=a(()=>e(x).filter(([S,M])=>typeof M!="object"&&rt(S,e(m))==="none"&&!e(y).includes(S)&&(S!=="namespace"||S==="namespace"&&Ve.params.namespace!==M)));var u=fr(),f=n(u),C=n(f),R=n(C),p=n(R,!0);r(R);var j=l(R,2),L=n(j,!0);r(j),r(C);var N=l(C,2);Qt(N,{as:"p",class:"text-sm",get dateTime(){return t.event.eventTime}}),r(f);var P=l(f,2),h=n(P),z=n(h);{var B=S=>{tr(S,()=>t.event.links)};_(z,S=>{var M,w;(w=(M=t.event)==null?void 0:M.links)!=null&&w.length&&S(B)})}var W=l(z,2);{var q=S=>{ar(S,()=>t.event.userMetadata.summary)};_(W,S=>{var M,w;(w=(M=t.event)==null?void 0:M.userMetadata)!=null&&w.summary&&S(q)})}var U=l(W,2);Ue(U,17,()=>e(A),([S,M])=>S,(S,M)=>{var w=a(()=>dt(e(M),2));nr(S,()=>e(w)[0],()=>e(w)[1])});var te=l(U,2);Ue(te,17,()=>e(g),([S,M])=>S,(S,M)=>{var w=a(()=>dt(e(M),2));s(S,()=>e(w)[0],()=>e(w)[1])}),r(h);var oe=l(h,2);{var he=S=>{var M=mr();Ue(M,21,()=>e(T),([w,ae])=>w,(w,ae)=>{var Y=a(()=>dt(e(ae),2));rr(w,()=>e(Y)[0],()=>e(Y)[1])}),r(M),i(S,M)};_(oe,S=>{e(T).length&&S(he)})}r(P),r(u),I(()=>{k(p,t.event.id),k(L,e(c))}),i(b,u),Re()}var _r=D('<div class="flex flex-col overflow-hidden"><!> <!></div>');function gr(b,t){He(t,!0);let s=X(t,"group",3,void 0),c=X(t,"event",3,void 0);const m=a(()=>(s()===null||s()===void 0?void 0:s().pendingActivity)||(s()===null||s()===void 0?void 0:s().pendingNexusOperation)),x=a(()=>s()&&(s().eventList.length>1||e(m)));var T=ye(),g=K(T);{var y=u=>{var f=_r(),C=n(f);{var R=L=>{Ra(L,{get activity(){return s().pendingActivity}})},p=L=>{var N=ye(),P=K(N);{var h=z=>{Za(z,{get operation(){return s().pendingNexusOperation}})};_(P,z=>{var B;(B=s())!=null&&B.pendingNexusOperation&&z(h)},!0)}i(L,N)};_(C,L=>{var N;(N=s())!=null&&N.pendingActivity?L(R):L(p,!1)})}var j=l(C,2);Ue(j,17,()=>s().eventList,pt,(L,N)=>{Nt(L,{get event(){return e(N)}})}),r(f),i(u,f)},A=u=>{var f=ye(),C=K(f);{var R=p=>{Nt(p,{get event(){return c()}})};_(C,p=>{c()&&p(R)},!0)}i(u,f)};_(g,u=>{e(x)?u(y):u(A,!1)})}i(b,T),Re()}var pr=D('<p class="whitespace-nowrap text-right text-xs"> </p>'),xr=D('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),yr=D('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),hr=D('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function at(b,t){const s=st(t,["children","$$slots","$$events","$$legacy"]);He(t,!1);const c=Je();let m=X(t,"key",8),x=X(t,"value",8),T=X(t,"attributes",8),g=X(t,"showKey",8,!0);ot(()=>($(m()),$(T())),()=>{Se(c,rt(m(),T()))}),gt(),yt();var y=ye(),A=K(y);{var u=f=>{var C=hr(),R=n(C);{var p=P=>{var h=pr(),z=n(h,!0);r(h),I(B=>k(z,B),[()=>($(Ye),$(m()),Ae(()=>Ye(m())))]),i(P,h)};_(R,P=>{g()&&P(p)})}var j=l(R,2);{var L=P=>{var h=yr(),z=n(h);nt(z,{get value(){return x()},key:"payloads",children:(W,q=Q)=>{var U=xr(),te=n(U),oe=n(te),he=n(oe,!0);r(oe),r(te),r(U),I((S,M)=>{it(U,1,S,"svelte-cy5z6t"),k(he,M)},[()=>zt(($(lt),$(s),Ae(()=>lt("payload",s.class)))),()=>(q(),Ae(()=>q().slice(0,60)))]),i(W,U)},$$slots:{default:!0}}),r(h),i(P,h)},N=P=>{var h=ye(),z=K(h);{var B=q=>{{let U=Ft(()=>($(v),Ae(()=>v("common.copy-icon-title")))),te=Ft(()=>($(v),Ae(()=>v("common.copy-success-icon-title"))));Ge(q,{get copyIconTitle(){return e(U)},get copySuccessIconTitle(){return e(te)},get content(){return x()},"container-class":"truncate",children:(oe,he)=>{Yt(oe,{get value(){return x()},get attributes(){return T()},get type(){return e(c)},class:"truncate"})},$$slots:{default:!0}})}},W=q=>{qe(q,{type:"subtle",class:"block select-none truncate",children:(U,te)=>{ve();var oe=ee();I(()=>k(oe,x())),i(U,oe)},$$slots:{default:!0}})};_(z,q=>{e(c)!=="none"?q(B):q(W,!1)},!0)}i(P,h)};_(j,P=>{typeof x()=="object"?P(L):P(N,!1)})}r(C),i(f,C)};_(A,f=>{m()&&f(u)})}i(b,y),Re()}var wr=D('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function kr(b,t){const s=st(t,["children","$$slots","$$events","$$legacy"]);He(t,!1);var c=Je();let m=X(t,"link",8),x=X(t,"value",28,()=>m().workflowEvent.workflowId),T=X(t,"label",24,()=>v("nexus.link")),g=X(t,"href",12,void 0);ot(()=>($(g()),$(m()),ut(c)),()=>{g()||(g(Jt(m())),x((Se(c,g().split("workflows/"))===null||ut(c)===void 0?void 0:ut(c)[1])||g()))}),gt(),yt();var y=wr(),A=n(y),u=n(A,!0);r(A);var f=l(A,2),C=n(f);We(C,{get href(){return g()},children:(R,p)=>{ve();var j=ee();I(()=>k(j,x())),i(R,j)},$$slots:{default:!0}}),r(f),r(y),I(()=>{it(y,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${$(s),Ae(()=>s.class)??""}`),k(u,T()),it(f,1,`overflow-hidden ${$(s),Ae(()=>s.linkClass)??""}`)}),i(b,y),Re()}var br=D('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Tr=D('<td class="font-mono"><!></td>'),Ir=D(" <!>",1),Ar=D("<!> <!>",1),Er=D('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Pr=D('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Sr=D('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Fr=D('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p class="whitespace-nowrap font-semibold md:text-base"> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function xn(b,t){He(t,!0);const s=()=>Ie(qt,"$timeFormat",g),c=()=>Ie(Ut,"$relativeTime",g),m=()=>Ie(Vt,"$timestampFormat",g),x=()=>Ie(ba,"$authUser",g),T=()=>Ie(ka,"$isCloud",g),[g,y]=xt();var A,u,f,C,R,p,j,L;let N=X(t,"compact",3,!1),P=X(t,"expanded",3,!1),h=X(t,"onRowClick",3,()=>{}),z=X(t,"hoveredEventId",15),B=Ct(pa(P())),W=Ct(void 0);const q=a(()=>Z(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),U=a(()=>Ve.params),te=a(()=>e(U).workflow),oe=a(()=>e(U).run),he=a(()=>e(U).namespace),S=a(()=>Dt({eventId:t.event.id,namespace:e(he),workflow:e(te),run:e(oe)})),M=a(()=>Kt(t.event)),w=a(()=>Z(t.event)?t.event.events.get(e(q)):t.event),ae=a(()=>Mt({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:Z(e(w))?(A=e(w).initialEvent)===null||A===void 0?void 0:A.eventTime:e(w)===null||e(w)===void 0?void 0:e(w).eventTime,includeMillisecondsForUnderSecond:!0})),Y=a(()=>Z(t.event)?Mt({start:(u=t.event.initialEvent)===null||u===void 0?void 0:u.eventTime,end:(f=t.event.lastEvent)===null||f===void 0?void 0:f.eventTime,includeMillisecondsForUnderSecond:!0}):""),Ne=a(()=>ya(t.event)),Fe=a(()=>ha(t.event)),Ce=a(()=>wa(t.event)),Ke=a(()=>Z(t.event)?t.event.label:Ee(t.event)?v("events.category.local-activity"):Gt(t.event.name)),de=a(()=>Ee(t.event)?void 0:ja(Z(t.event)?t.event.initialEvent:t.event)),ue=a(()=>Da(Z(t.event)?t.event.lastEvent:t.event,e(de)===null||e(de)===void 0?void 0:e(de).key)),_e=a(()=>Z(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),Le=a(()=>e(_e)&&(e(_e)===null||e(_e)===void 0?void 0:e(_e).paused)),we=a(()=>Z(t.event)&&t.event.isPending&&(((C=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||C===void 0?void 0:C.attempt)||((R=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||R===void 0?void 0:R.attempt))),Ze=a(()=>Z(t.event)&&!t.event.isPending&&((j=(p=t.event.eventList.find(Ha))===null||p===void 0?void 0:p.attributes)===null||j===void 0?void 0:j.attempt)),ct=a(()=>N()&&(e(ue)===null||e(ue)===void 0?void 0:e(ue).key)&&(e(ue)===null||e(ue)===void 0?void 0:e(ue).key)!==(e(de)===null||e(de)===void 0?void 0:e(de).key)&&!(!((L=e(w)===null||e(w)===void 0?void 0:e(w).userMetadata)===null||L===void 0)&&L.summary)),$e=a(()=>Xe(e(w)===null||e(w)===void 0?void 0:e(w).eventTime,s(),{relative:c(),format:m()})),o=a(()=>Xe(e(w)===null||e(w)===void 0?void 0:e(w).eventTime,s(),{relative:c(),format:"short"})),E=d=>{Se(B,!e(B)),d.stopPropagation(),h()()},H=()=>{z(t.event.id)},ie=()=>{z(void 0)};let se=(d,F)=>{var O;return(O=d==null?void 0:d.eventIds)===null||O===void 0?void 0:O.has(F)};_a(async()=>{Ee(t.event)?Se(W,await Rt(t.event,{namespace:Ve.params.namespace,settings:Ve.data.settings,accessToken:x().accessToken}),!0):Z(t.event)&&Ee(t.event.initialEvent)&&Se(W,await Rt(t.event.initialEvent,{namespace:Ve.params.namespace,settings:Ve.data.settings,accessToken:x().accessToken}),!0)});var V=Fr(),G=K(V);G.__click=E;var ge=n(G);{var pe=d=>{var F=br(),O=n(F);Ue(O,21,()=>t.event.eventList,pt,(ce,re)=>{{let J=a(()=>Dt({eventId:e(re).id,namespace:e(he),workflow:e(te),run:e(oe)}));We(ce,{"data-testid":"link",get href(){return e(J)},children:(fe,ke)=>{ve();var ne=ee();I(()=>k(ne,e(re).id)),i(fe,ne)},$$slots:{default:!0}})}}),r(O),r(F),i(d,F)},me=d=>{var F=Tr(),O=n(F);We(O,{"data-testid":"link",get href(){return e(S)},children:(ce,re)=>{ve();var J=ee();I(()=>k(J,t.event.id)),i(ce,J)},$$slots:{default:!0}}),r(F),i(d,F)};_(ge,d=>{Z(t.event)?d(pe):d(me,!1)})}var le=l(ge),Qe=n(le);{let d=a(()=>Z(t.event)&&!e(Y)||!e(ae)),F=a(()=>Z(t.event)?`Duration: ${e(Y)}`:`+${e(ae)}`);_t(Qe,{get hide(){return e(d)},get text(){return e(F)},class:"block",bottom:!0,children:(O,ce)=>{{let re=a(()=>v("common.copy-icon-title")),J=a(()=>v("common.copy-success-icon-title"));Ge(O,{get copyIconTitle(){return e(re)},get copySuccessIconTitle(){return e(J)},get content(){return e(o)},children:(fe,ke)=>{ve();var ne=ee();I(()=>k(ne,e(o))),i(fe,ne)},$$slots:{default:!0}})}},$$slots:{default:!0}})}r(le);var Me=l(le),be=n(Me);{let d=a(()=>Z(t.event)&&!e(Y)||!e(ae)),F=a(()=>Z(t.event)?`Duration: ${e(Y)}`:`+${e(ae)}`);_t(be,{get hide(){return e(d)},get text(){return e(F)},class:"block",bottom:!0,children:(O,ce)=>{{let re=a(()=>v("common.copy-icon-title")),J=a(()=>v("common.copy-success-icon-title"));Ge(O,{get copyIconTitle(){return e(re)},get copySuccessIconTitle(){return e(J)},get content(){return e($e)},children:(fe,ke)=>{ve();var ne=ee();I(()=>k(ne,e($e))),i(fe,ne)},$$slots:{default:!0}})}},$$slots:{default:!0}})}r(Me);var je=l(Me),et=n(je),Zt=n(et,!0);r(et),r(je);var vt=l(je),ht=n(vt),wt=n(ht);{var $t=d=>{{let F=a(()=>e(Le)?"warning":e(we)>1?"danger":"default");qe(d,{class:"mr-1",get type(){return e(F)},children:(O,ce)=>{var re=Ar(),J=K(re);{let xe=a(()=>lt("mr-1 inline",e(we)>1&&"font-bold text-red-400",e(Le)&&"font-bold text-yellow-700")),De=a(()=>e(Le)?"pause":"retry");Bt(J,{get class(){return e(xe)},get name(){return e(De)}})}var fe=l(J),ke=l(fe);{var ne=xe=>{var De=Ir(),Oe=K(De),tt=l(Oe);{var da=ze=>{const Et=a(()=>{var Be;return Wt({date:(Be=e(_e))==null?void 0:Be.scheduledTime,negativeDefault:""})});var Pt=ye(),ua=K(Pt);{var ma=Be=>{var St=ee();I(fa=>k(St,`• ${fa??""}
                ${e(Et)??""}`),[()=>v("workflows.next-retry")]),i(Be,St)};_(ua,Be=>{e(Et)&&Be(ma)})}i(ze,Pt)};_(tt,ze=>{e(we)>1&&ze(da)})}I(()=>{var ze;return k(Oe,`/ ${(((ze=e(_e))==null?void 0:ze.maximumAttempts)||"∞")??""} `)}),i(xe,De)};_(ke,xe=>{e(_e)&&xe(ne)})}I(xe=>k(fe,` ${xe??""}
          ${e(we)??""} `),[()=>v("workflows.attempt")]),i(O,re)},$$slots:{default:!0}})}};_(wt,d=>{e(we)&&d($t)})}var kt=l(wt,2);{var ea=d=>{at(d,ft(()=>e(de),{get attributes(){return e(M)}}))};_(kt,d=>{var F;!e(W)&&((F=e(de))!=null&&F.key)&&d(ea)})}var bt=l(kt,2);{var ta=d=>{at(d,ft(()=>e(W),{get attributes(){return e(M)}}))};_(bt,d=>{e(W)&&e(W).key&&d(ta)})}var Tt=l(bt,2);{var aa=d=>{Xt(d,{get value(){return e(w).userMetadata.summary},children:Ot,$$slots:{default:(F,O)=>{const ce=a(()=>O.decodedValue);var re=ye(),J=K(re);{var fe=ke=>{var ne=Er(),xe=l(n(ne),2);qe(xe,{type:"secondary",class:"block select-none truncate",children:(De,Oe)=>{ve();var tt=ee();I(()=>k(tt,e(ce))),i(De,tt)},$$slots:{default:!0}}),r(ne),i(ke,ne)};_(J,ke=>{e(ce)&&ke(fe)})}i(F,re)}}})};_(Tt,d=>{var F,O;(O=(F=e(w))==null?void 0:F.userMetadata)!=null&&O.summary&&d(aa)})}var It=l(Tt,2);{var ra=d=>{kr(d,{get link(){return e(w).links[0]},class:"max-w-xl",linkClass:"truncate"})};_(It,d=>{var F,O;(O=(F=e(w))==null?void 0:F.links)!=null&&O.length&&d(ra)})}var At=l(It,2);{var na=d=>{{let F=a(()=>e(Ze).toString());at(d,{key:"attempt",get value(){return e(F)},get attributes(){return e(M)}})}};_(At,d=>{e(Ze)&&d(na)})}var oa=l(At,2);{var ia=d=>{at(d,ft(()=>e(ue),{get attributes(){return e(M)}}))};_(oa,d=>{e(ct)&&d(ia)})}r(ht),r(vt);var sa=l(vt);{var la=d=>{var F=Pr(),O=n(F),ce=n(O);{var re=J=>{{let fe=a(()=>v("workflows.estimated-billable-actions"));_t(J,{get text(){return e(fe)},topRight:!0,children:(ke,ne)=>{qe(ke,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(xe,De)=>{ve();var Oe=ee();I(()=>k(Oe,t.event.billableActions)),i(xe,Oe)},$$slots:{default:!0}})},$$slots:{default:!0}})}};_(ce,J=>{t.event.billableActions&&J(re)})}r(O),r(F),i(d,F)};_(sa,d=>{T()&&d(la)})}r(G);var ca=l(G,2);{var va=d=>{var F=Sr(),O=n(F),ce=n(O);gr(ce,{get group(){return t.group},get event(){return e(w)}}),r(O),r(F),I(()=>mt(O,"colspan",T()?5:4)),i(d,F)};_(ca,d=>{e(B)&&d(va)})}I(d=>{it(G,1,d,"svelte-1cvp1uf"),mt(G,"id",`${t.event.id}-${t.index}`),mt(G,"data-eventid",t.event.id),k(Zt,e(Ke))},[()=>zt(lt("hover:cursor-pointer",e(Ne)&&"!bg-red-400/40 hover:!bg-red-400/60",e(Fe)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(Ce)&&"!bg-pink-700/30 hover:!bg-pink-700/50",se(t.group,z())&&"active"))]),Lt("mouseenter",G,H),Lt("mouseleave",G,ie),i(b,V),Re(),y()}xa(["click"]);export{xn as E,at as a,gr as b,kr as c,Rt as d,pn as g};
