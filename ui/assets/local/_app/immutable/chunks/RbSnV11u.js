import"./CWj6FrbW.js";import{o as Rt}from"./D7JzDj9r.js";import{p as ot,l as Bt,s as fe,m as Kt,O as S,a as qt,i as Le,c as Y,e as s,b as lt,f as p,j as v,h as c,g as e,r as l,t as x,K as le,u as Nt,o as Ye,n as K,k as O,ax as Ze,ay as Ht,v as n,q as Vt}from"./DZ1-1a5q.js";import{s as h,d as Jt,e as $e,a as Qt}from"./DxwvfIkW.js";import{i as u}from"./DnKg3jxh.js";import{e as Wt,i as Xt}from"./DGhzC9On.js";import{s as Pe}from"./D3L9VHHD.js";import{c as Se,s as Oe}from"./B3h3Bc2r.js";import{l as Yt,p as D,a as Ie,s as Zt,c as Ce}from"./TaaIktnz.js";import{p as ve}from"./BkzJhme6.js";import{t as $t}from"./4Dr_hdgK.js";import{B as _e}from"./CqqsKTDn.js";import{C as De}from"./DTh3gV-B.js";import{I as et}from"./BwERH40W.js";import{L as tt}from"./Dcvk_bty.js";import{T as Me}from"./DM1_LFNw.js";import{t as w}from"./DEjs8ZrU.js";import{i as _,e as ea,a as ta,b as aa}from"./CCyjrG4D.js";import{i as na}from"./C8_MSmYv.js";import{a as ra}from"./urDygoU8.js";import{E as ia,d as at,C as nt,e as sa,M as oa,a as la,b as va}from"./C59phNuv.js";import{f as rt,s as da}from"./ByTIZu23.js";import{b as ca}from"./ClLOkiu-.js";import{g as it}from"./CrZfxCV7.js";import{d as ua,g as ma,b as fa}from"./Q8jblTft.js";import{h as ue,p as _a}from"./BeRQMQBb.js";import{c as st}from"./Cr_8nlrR.js";import{t as ga}from"./DsvYSrPH.js";import"./69_IOA4Y.js";import{i as ya,t as ge}from"./Bby3K3wO.js";import{P as xa}from"./_N_ov2A-.js";var ba=p('<p class="whitespace-nowrap text-right text-xs"> </p>'),ha=p('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),ka=p('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),wa=p('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function me(ye,t){const Z=Yt(t,["children","$$slots","$$events","$$legacy"]);ot(t,!1);const q=Kt();let C=D(t,"key",8),P=D(t,"value",8),$=D(t,"attributes",8),ee=D(t,"showKey",8,!0);Bt(()=>(S(C()),S($())),()=>{fe(q,ua(C(),$()))}),qt(),ya();var N=Le(),te=Y(N);{var ae=F=>{var U=wa(),H=v(U);{var ne=m=>{var d=ba(),M=v(d,!0);l(d),x(T=>h(M,T),[()=>(S(rt),S(C()),le(()=>rt(C())))]),s(m,d)};u(H,m=>{ee()&&m(ne)})}var xe=c(H,2);{var be=m=>{var d=ka(),M=v(d);xa(M,{get value(){return P()},key:"payloads",children:(ie,se=Nt)=>{var j=ha(),de=v(j),z=v(de),o=v(z,!0);l(z),l(de),l(j),x((V,J)=>{Oe(j,1,V,"svelte-cy5z6t"),h(o,J)},[()=>Se((S(ge),S(Z),le(()=>ge("payload",Z.class)))),()=>(se(),le(()=>se().slice(0,60)))]),s(ie,j)},$$slots:{default:!0}}),l(d),s(m,d)},he=m=>{{let d=Ye(()=>(S(w),le(()=>w("common.copy-icon-title")))),M=Ye(()=>(S(w),le(()=>w("common.copy-success-icon-title"))));De(m,{get copyIconTitle(){return e(d)},get copySuccessIconTitle(){return e(M)},get content(){return P()},"container-class":"truncate",children:(T,ie)=>{ia(T,{get value(){return P()},get attributes(){return $()},get type(){return e(q)},class:"truncate"})},$$slots:{default:!0}})}},re=m=>{_e(m,{type:"subtle",class:"block select-none truncate",children:(d,M)=>{K();var T=O();x(()=>h(T,P())),s(d,T)},$$slots:{default:!0}})};u(xe,m=>{typeof P()=="object"?m(be):e(q)!=="none"?m(he,1):m(re,!1)})}l(U),s(F,U)};u(te,F=>{C()&&F(ae)})}s(ye,N),lt()}var pa=p('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Ta=p('<td class="font-mono"><!></td>'),Ea=p(" <!>",1),Aa=p("<!> <!>",1),Pa=p('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Ia=p('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Ca=p('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),Ma=p('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function vn(ye,t){ot(t,!0);const Z=()=>Ie($t,"$timestamp",P),q=()=>Ie(ra,"$authUser",P),C=()=>Ie(na,"$isCloud",P),[P,$]=Zt();var ee,N,te,ae,F,U,H,ne;let xe=D(t,"compact",3,!1),be=D(t,"expanded",3,!1),he=D(t,"onRowClick",3,()=>{}),re=D(t,"hoveredEventId",15),m=Ze(Ht(be())),d=Ze(void 0);const M=n(()=>_(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),T=n(()=>ve.params),ie=n(()=>e(T).workflow),se=n(()=>e(T).run),j=n(()=>e(T).namespace),de=n(()=>st({eventId:t.event.id,namespace:e(j),workflow:e(ie),run:e(se)})),z=n(()=>ca(t.event)),o=n(()=>_(t.event)?t.event.events.get(e(M)):t.event),V=n(()=>it({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:_(e(o))?(ee=e(o).initialEvent)===null||ee===void 0?void 0:ee.eventTime:e(o)===null||e(o)===void 0?void 0:e(o).eventTime,includeMillisecondsForUnderSecond:!0})),J=n(()=>_(t.event)?it({start:(N=t.event.initialEvent)===null||N===void 0?void 0:N.eventTime,end:(te=t.event.lastEvent)===null||te===void 0?void 0:te.eventTime,includeMillisecondsForUnderSecond:!0}):""),vt=n(()=>ea(t.event)),dt=n(()=>ta(t.event)),ct=n(()=>aa(t.event)),ut=n(()=>_(t.event)?t.event.label:ue(t.event)?w("events.category.local-activity"):da(t.event.name)),L=n(()=>ue(t.event)?void 0:ma(_(t.event)?t.event.initialEvent:t.event)),G=n(()=>fa(_(t.event)?t.event.lastEvent:t.event,e(L)===null||e(L)===void 0?void 0:e(L).key)),R=n(()=>_(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),ke=n(()=>e(R)&&(e(R)===null||e(R)===void 0?void 0:e(R).paused)),oe=n(()=>_(t.event)&&t.event.isPending&&(((ae=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||ae===void 0?void 0:ae.attempt)||((F=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||F===void 0?void 0:F.attempt))),Fe=n(()=>_(t.event)&&!t.event.isPending&&((H=(U=t.event.eventList.find(_a))===null||U===void 0?void 0:U.attributes)===null||H===void 0?void 0:H.attempt)),mt=n(()=>xe()&&(e(G)===null||e(G)===void 0?void 0:e(G).key)&&(e(G)===null||e(G)===void 0?void 0:e(G).key)!==(e(L)===null||e(L)===void 0?void 0:e(L).key)&&!(!((ne=e(o)===null||e(o)===void 0?void 0:e(o).userMetadata)===null||ne===void 0)&&ne.summary)),Ue=n(()=>Z()(e(o)===null||e(o)===void 0?void 0:e(o).eventTime)),je=n(()=>Z()(e(o)===null||e(o)===void 0?void 0:e(o).eventTime,{format:"short"})),ft=a=>{fe(m,!e(m)),a.stopPropagation(),he()()},_t=()=>{re(t.event.id)},gt=()=>{re(void 0)};let yt=(a,r)=>{var i;return(i=a==null?void 0:a.eventIds)===null||i===void 0?void 0:i.has(r)};Rt(async()=>{ue(t.event)?fe(d,await at(t.event,{namespace:ve.params.namespace,settings:ve.data.settings,accessToken:q().accessToken}),!0):_(t.event)&&ue(t.event.initialEvent)&&fe(d,await at(t.event.initialEvent,{namespace:ve.params.namespace,settings:ve.data.settings,accessToken:q().accessToken}),!0)});var ze=Ma(),I=Y(ze),Ge=v(I);{var xt=a=>{var r=pa(),i=v(r);Wt(i,21,()=>t.event.eventList,Xt,(b,g)=>{{let f=n(()=>st({eventId:e(g).id,namespace:e(j),workflow:e(ie),run:e(se)}));tt(b,{"data-testid":"link",get href(){return e(f)},children:(k,A)=>{K();var y=O();x(()=>h(y,e(g).id)),s(k,y)},$$slots:{default:!0}})}}),l(i),l(r),s(a,r)},bt=n(()=>_(t.event)),ht=a=>{var r=Ta(),i=v(r);tt(i,{"data-testid":"link",get href(){return e(de)},children:(b,g)=>{K();var f=O();x(()=>h(f,t.event.id)),s(b,f)},$$slots:{default:!0}}),l(r),s(a,r)};u(Ge,a=>{e(bt)?a(xt):a(ht,!1)})}var we=c(Ge),kt=v(we);{let a=n(()=>_(t.event)&&!e(J)||!e(V)),r=n(()=>_(t.event)?`Duration: ${e(J)}`:`+${e(V)}`);Me(kt,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,b)=>{{let g=n(()=>w("common.copy-icon-title")),f=n(()=>w("common.copy-success-icon-title"));De(i,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(f)},get content(){return e(je)},children:(k,A)=>{K();var y=O();x(()=>h(y,e(je))),s(k,y)},$$slots:{default:!0}})}},$$slots:{default:!0}})}l(we);var pe=c(we),wt=v(pe);{let a=n(()=>_(t.event)&&!e(J)||!e(V)),r=n(()=>_(t.event)?`Duration: ${e(J)}`:`+${e(V)}`);Me(wt,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,b)=>{{let g=n(()=>w("common.copy-icon-title")),f=n(()=>w("common.copy-success-icon-title"));De(i,{get copyIconTitle(){return e(g)},get copySuccessIconTitle(){return e(f)},get content(){return e(Ue)},children:(k,A)=>{K();var y=O();x(()=>h(y,e(Ue))),s(k,y)},$$slots:{default:!0}})}},$$slots:{default:!0}})}l(pe);var Te=c(pe),Ee=v(Te),Re=v(Ee);et(Re,{get name(){return nt[t.event.category].name},get title(){return nt[t.event.category].title},class:"mr-1 inline"});var pt=c(Re);l(Ee),l(Te);var Ae=c(Te),Be=v(Ae),Ke=v(Be);{var Tt=a=>{{let r=n(()=>e(ke)?"warning":e(oe)>1?"danger":"default");_e(a,{class:"mr-1",get type(){return e(r)},children:(i,b)=>{var g=Aa(),f=Y(g);{let E=n(()=>ge("mr-1 inline",e(oe)>1&&"font-bold text-red-400",e(ke)&&"font-bold text-yellow-700")),B=n(()=>e(ke)?"pause":"retry");et(f,{get class(){return e(E)},get name(){return e(B)}})}var k=c(f),A=c(k);{var y=E=>{var B=Ea(),Q=Y(B),ce=c(Q);{var Ut=W=>{const Qe=n(()=>{var X;return ga({date:(X=e(R))==null?void 0:X.scheduledTime,negativeDefault:""})});var We=Le(),jt=Y(We);{var zt=X=>{var Xe=O();x(Gt=>h(Xe,`• ${Gt??""}
                ${e(Qe)??""}`),[()=>w("workflows.next-retry")]),s(X,Xe)};u(jt,X=>{e(Qe)&&X(zt)})}s(W,We)};u(ce,W=>{e(oe)>1&&W(Ut)})}x(()=>{var W;return h(Q,`/ ${(((W=e(R))==null?void 0:W.maximumAttempts)||"∞")??""} `)}),s(E,B)};u(A,E=>{e(R)&&E(y)})}x(E=>h(k,` ${E??""}
          ${e(oe)??""} `),[()=>w("workflows.attempt")]),s(i,g)},$$slots:{default:!0}})}};u(Ke,a=>{e(oe)&&a(Tt)})}var qe=c(Ke,2);{var Et=a=>{me(a,Ce(()=>e(L),{get attributes(){return e(z)}}))};u(qe,a=>{var r;!e(d)&&((r=e(L))!=null&&r.key)&&a(Et)})}var Ne=c(qe,2);{var At=a=>{me(a,Ce(()=>e(d),{get attributes(){return e(z)}}))};u(Ne,a=>{e(d)&&e(d).key&&a(At)})}var He=c(Ne,2);{var Pt=a=>{oa(a,{get value(){return e(o).userMetadata.summary},children:Vt,$$slots:{default:(r,i)=>{const b=n(()=>i.decodedValue);var g=Le(),f=Y(g);{var k=A=>{var y=Pa(),E=c(v(y),2);_e(E,{type:"secondary",class:"block select-none truncate",children:(B,Q)=>{K();var ce=O();x(()=>h(ce,e(b))),s(B,ce)},$$slots:{default:!0}}),l(y),s(A,y)};u(f,A=>{e(b)&&A(k)})}s(r,g)}}})};u(He,a=>{var r,i;(i=(r=e(o))==null?void 0:r.userMetadata)!=null&&i.summary&&a(Pt)})}var Ve=c(He,2);{var It=a=>{la(a,{get link(){return e(o).links[0]},class:"max-w-xl",linkClass:"truncate"})};u(Ve,a=>{var r,i;(i=(r=e(o))==null?void 0:r.links)!=null&&i.length&&a(It)})}var Je=c(Ve,2);{var Ct=a=>{{let r=n(()=>e(Fe).toString());me(a,{key:"attempt",get value(){return e(r)},get attributes(){return e(z)}})}};u(Je,a=>{e(Fe)&&a(Ct)})}var Mt=c(Je,2);{var Lt=a=>{me(a,Ce(()=>e(G),{get attributes(){return e(z)}}))};u(Mt,a=>{e(mt)&&a(Lt)})}l(Be),l(Ae);var St=c(Ae);{var Ot=a=>{var r=Ia(),i=v(r),b=v(i);{var g=f=>{{let k=n(()=>w("workflows.estimated-billable-actions"));Me(f,{get text(){return e(k)},topRight:!0,children:(A,y)=>{_e(A,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(E,B)=>{K();var Q=O();x(()=>h(Q,t.event.billableActions)),s(E,Q)},$$slots:{default:!0}})},$$slots:{default:!0}})}};u(b,f=>{t.event.billableActions&&f(g)})}l(i),l(r),s(a,r)};u(St,a=>{C()&&a(Ot)})}l(I);var Dt=c(I,2);{var Ft=a=>{var r=Ca(),i=v(r),b=v(i);va(b,{get group(){return t.group},get event(){return e(o)}}),l(i),l(r),x(()=>Pe(i,"colspan",C()?5:4)),s(a,r)};u(Dt,a=>{e(m)&&a(Ft)})}x((a,r)=>{Oe(I,1,a,"svelte-1cvp1uf"),Pe(I,"id",`${t.event.id}-${t.index}`),Pe(I,"data-eventid",t.event.id),Oe(Ee,1,r),h(pt,` ${e(ut)??""}`)},[()=>Se(ge("hover:cursor-pointer",e(vt)&&"!bg-red-400/40 hover:!bg-red-400/60",e(dt)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(ct)&&"!bg-pink-700/30 hover:!bg-pink-700/50",yt(t.group,re())&&"active")),()=>Se(sa({category:t.event.category}))]),$e("mouseenter",I,_t),$e("mouseleave",I,gt),Qt("click",I,ft),s(ye,ze),lt(),$()}Jt(["click"]);export{vn as E,me as a};
