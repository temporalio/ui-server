import"./CWj6FrbW.js";import{p as ee,K as Oe,f as K,d as z,e as N,b as te,j as I,r as P,L as xe,i as ae,c as ce,u as Q,h as J,t as se,at as L,au as Se,aO as X,s as E,g as i,v as F,I as Me}from"./DPYmeJXN.js";import{s as Ae,o as he}from"./DtOlEDQN.js";import{i as Y}from"./DqIiO-ir.js";import{a as R,C as ge,b as Ie}from"./DyeK8I2b.js";import{s as re,c as Pe}from"./BuyG_Alt.js";import{p as m,s as de,r as ue,a as $,b as U}from"./BkgVXhYA.js";import{I as ve}from"./iShetGdB.js";import{t as q}from"./VvTteBni.js";import{c as Te}from"./Bn2mFndZ.js";import{b as He}from"./C76d9DOq.js";import{b as _e}from"./C6vhGFP6.js";import{t as Le,s as Ne}from"./DEtyaa-H.js";import{a as ke}from"./UTQzsmPu.js";import{c as je,g as Be}from"./CveQyi1u.js";import{w as ie}from"./DIJxQKhU.js";const fe="menu-context";var Fe=K("<div><!></div>");function mt(t,e){ee(e,!0);const l=()=>$(p(),"$open",s),[s,k]=de(),p=m(e,"open",19,()=>ie(!1)),h=ue(e,["$$slots","$$events","$$legacy","open","class","children","onclose"]),O=ie(!1),C=ie(null),v=()=>{l()&&(e.onclose===null||e.onclose===void 0||e.onclose(),U(p(),!1))};Oe(fe,{open:p(),keepOpen:O,menuElement:C});var a=Fe();R(a,c=>({class:c,...h}),[()=>q("relative",e.class)]);var w=I(a);z(w,()=>e.children,l),P(a),ke(a,(c,S)=>{var d;return(d=je)==null?void 0:d(c,S)},()=>v),N(t,a),te(),k()}const be='input, li[role="option"]:not([aria-disabled="true"]), li[role="menuitem"]:not([aria-disabled="true"])';var ze=K("<a><div><!></div> <!></a>"),Xe=K("<div> </div>"),Ue=K('<li><!> <div class="grow"><div><!> <!></div> <!></div> <!></li>');function ht(t,e){ee(e,!0);const l=()=>$(S,"$keepOpen",s),[s,k]=de(),p=m(e,"destructive",3,!1),h=m(e,"disabled",3,!1),O=m(e,"href",3,null),C=m(e,"description",3,null),v=m(e,"centered",3,!1),a=m(e,"hoverable",3,!0),w=m(e,"newTab",3,!1),c=ue(e,["$$slots","$$events","$$legacy","class","selected","destructive","disabled","href","description","centered","hoverable","newTab","onclick","children","leading","trailing"]),{keepOpen:S,open:d}=xe(fe),y=g=>{switch(g.stopPropagation(),g.key){case"Escape":U(d,!1);break;case"ArrowDown":case"ArrowRight":b(g.currentTarget);break;case"ArrowUp":case"ArrowLeft":A(g.currentTarget);break;case" ":case"Enter":e.onclick===null||e.onclick===void 0||e.onclick(),l()||U(d,!1);break}},b=g=>{let n=g.nextElementSibling;for(;n&&!n.matches(be);)n=n.nextElementSibling;n&&n instanceof HTMLLIElement&&n.focus()},A=g=>{let n=g.previousElementSibling;for(;n&&!n.matches(be);)n=n.previousElementSibling;n&&n instanceof HTMLLIElement&&n.focus()},T=()=>{l()||U(d,!1),e.onclick===null||e.onclick===void 0||e.onclick()};var H=ae(),V=ce(H);{var W=g=>{var n=ze();R(n,o=>({href:O(),target:w()?"_blank":null,rel:w()?"noreferrer":null,role:"menuitem",class:o,"aria-hidden":h()?"true":"false","aria-disabled":h(),tabindex:h()?-1:0,"data-track-name":"menuitem","data-track-intent":"navigate","data-track-text":"*textContent*",onkeydown:y,...c,[ge]:{disabled:h(),hoverable:a()}}),[()=>q("menu-item","m-1 px-3 py-2","flex items-center gap-2",v()?"justify-center":"justify-between",e.class)],void 0,void 0,"svelte-xmojui");var r=I(n),u=I(r);z(u,()=>e.children??Q),P(r);var f=J(r,2);{var x=o=>{ve(o,{height:20,width:20,name:"external-link"})};Y(f,o=>{w()&&o(x)})}P(n),N(g,n)},D=g=>{var n=Ue();R(n,M=>({role:"menuitem",class:M,"aria-hidden":h()?"true":"false","aria-disabled":h(),tabindex:h()?-1:0,"data-track-name":"menuitem","data-track-intent":"action","data-track-text":"*textContent*",onkeydown:y,onclick:T,...c,[ge]:{destructive:p(),disabled:h(),selected:e.selected,hoverable:a()}}),[()=>q("menu-item","m-1 px-3 py-2","flex items-center gap-2",e.class)],void 0,void 0,"svelte-xmojui");var r=I(n);z(r,()=>e.leading??Q);var u=J(r,2),f=I(u);let x;var o=I(f);z(o,()=>e.children??Q);var _=J(o,2);{var j=M=>{ve(M,{name:"checkmark",class:"shrink-0"})};Y(_,M=>{e.selected&&M(j)})}P(f);var G=J(f,2);{var B=M=>{var Z=Xe();let me;var Ee=I(Z,!0);P(Z),se(()=>{me=re(Z,1,"menu-item-description svelte-xmojui",null,me,{"text-center":v()}),Ae(Ee,C())}),N(M,Z)};Y(G,M=>{C()&&M(B)})}P(u);var ne=J(u,2);z(ne,()=>e.trailing??Q),P(n),se(()=>x=re(f,1,"menu-item-wrapper svelte-xmojui",null,x,{centered:v()})),N(g,n)};Y(V,g=>{O()?g(W):g(D,!1)})}N(t,H),te(),k()}function oe(t,e=document.body){const l=typeof e=="string"?document.querySelector(e):e;return l?(l.appendChild(t),{destroy(){t.parentNode&&t.parentNode.removeChild(t)}}):(console.warn("Portal target not found"),{destroy(){}})}function Ve(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight,right:window.innerWidth}}function le(t){const e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.bottom,right:e.right}}function pe(t,e,l){return{top:{x:t.left+t.width/2-e.width/2,y:t.top-e.height},bottom:{x:t.left+t.width/2-e.width/2,y:t.bottom},left:{x:t.left-e.width,y:t.top+t.height/2-e.height/2},right:{x:t.right,y:t.top+t.height/2-e.height/2},"top-left":{x:t.left,y:t.top-e.height},"top-right":{x:t.right-e.width,y:t.top-e.height},"bottom-left":{x:t.left,y:t.bottom},"bottom-right":{x:t.right-e.width,y:t.bottom}}[l]}function we(t,e){return{x:t.x+(e.x??0),y:t.y+(e.y??0)}}function ye(t,e,l,s){return{top:e<s.top,bottom:e+l.height>s.bottom,left:t<s.left,right:t+l.width>s.right}}function We(t){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-left","top-right":"bottom-right","bottom-left":"top-left","bottom-right":"top-right"}[t]}function Ye(t,e,l){const s={x:t.x??0,y:t.y??0};return(e.includes("top")&&l.includes("bottom")||e.includes("bottom")&&l.includes("top"))&&(s.y=t.y?-t.y:0),(e.includes("left")&&l.includes("right")||e.includes("right")&&l.includes("left"))&&(s.x=t.x?-t.x:0),s}function qe(t,e,l,s){let k=t,p=e;return t<s.left?k=s.left:t+l.width>s.right&&(k=s.right-l.width),e<s.top?p=s.top:e+l.height>s.bottom&&(p=s.bottom-l.height),{x:k,y:p}}function Ke(t,e,l,s,k,p){const h=p||Ve(),O=pe(t,e,l);let C=we(O,s),v=!1,a=l;if(k){const c=ye(C.x,C.y,e,h);if(c.top||c.bottom||c.left||c.right){const S=We(l),d=Ye(s,l,S),y=pe(t,e,S),b=we(y,d),A=ye(b.x,b.y,e,h),T=[c.top,c.bottom,c.left,c.right].filter(Boolean).length;[A.top,A.bottom,A.left,A.right].filter(Boolean).length<T&&(C=b,v=!0,a=S)}}const w=qe(C.x,C.y,e,h);return{x:w.x,y:w.y,flipped:v,finalPosition:a}}var De=K('<div class="pointer-events-auto fixed left-0 top-0"><div><!></div></div>');function Ge(t,e){ee(e,!0);let l=m(e,"open",3,!0),s=m(e,"position",3,"bottom"),k=m(e,"offset",19,()=>({})),p=m(e,"target",19,()=>document.body),h=m(e,"hideWhenAnchorHidden",3,!0),O=m(e,"scrollContainer",3,window),C=m(e,"flipOnCollision",3,!0),v=m(e,"class",3,""),a=L(void 0),w=L(!0),c=L(0),S=L(0),d=L(null),y=L(Se(window)),b=L(null);const A=F(()=>l()&&i(d)&&(!h()||i(w)));X(function(){typeof e.anchor=="string"?E(d,document.getElementById(e.anchor),!0):E(d,e.anchor,!0)}),X(function(){if(typeof O()=="string"){const r=document.getElementById(O());E(y,r||window,!0)}else E(y,O(),!0)}),X(function(){if(!i(d)||!h()){E(w,!0);return}const r=new IntersectionObserver(u=>{const f=u[0];E(w,f.isIntersecting,!0)},{threshold:0,root:i(y)!==window?i(y):null});return r.observe(i(d)),()=>{r.disconnect()}});function T(){if(!i(a)||!i(d))return;const n=le(i(d)),r=le(i(a)),u=i(y)!==window?le(i(y)):void 0,f=Ke(n,r,s(),k(),C(),u),x=Math.round(f.x),o=Math.round(f.y);i(c)!==x&&E(c,x,!0),i(S)!==o&&E(S,o,!0)}function H(){i(b)!==null&&cancelAnimationFrame(i(b)),E(b,requestAnimationFrame(()=>{T(),E(b,null)}),!0)}function V(n){const r=new Set([document]);let u=n.parentElement;for(;u;){const{overflow:f,overflowX:x,overflowY:o}=window.getComputedStyle(u);[f,x,o].some(j=>j==="auto"||j==="scroll"||j==="overlay")&&r.add(u),u=u.parentElement}return r}X(function(){if(!i(A)||!i(a)||!i(d))return;Me(()=>T());const r=new ResizeObserver(()=>{H()});r.observe(i(a)),r.observe(i(d));const u=V(i(d)),f=he(document,"scroll",o=>{o.target&&u.has(o.target)&&H()},{passive:!0,capture:!0}),x=he(window,"resize",H,{passive:!0});return()=>{i(b)!==null&&(cancelAnimationFrame(i(b)),E(b,null)),r.disconnect(),f(),x()}});var W=ae(),D=ce(W);{var g=n=>{var r=De();let u;var f=I(r),x=I(f);z(x,()=>e.children),P(f),P(r),_e(r,o=>E(a,o),()=>i(a)),ke(r,(o,_)=>oe==null?void 0:oe(o,_),p),se(o=>{u=Ie(r,"",u,{transform:`translate(${i(c)??""}px, ${i(S)??""}px)`,"will-change":"transform"}),re(f,1,o)},[()=>Pe(q(v()))]),Le(3,f,()=>Ne,()=>({duration:100,start:.95,opacity:0})),N(n,r)};Y(D,n=>{i(A)&&n(g)})}N(t,W),te()}const Ce=["surface-primary","min-w-fit","list-none","overflow-auto","border","border-subtle","text-primary","shadow","w-full"],Je=Te([...Ce,"absolute","z-20","mt-1","transition-all","duration-100","ease-out"],{variants:{position:{left:"left-0 origin-top-left",right:"right-0 origin-top-right","top-left":"left-0 origin-top-left","top-right":"right-0 origin-top-right"},state:{open:"visible scale-100 opacity-100",closed:"invisible scale-95 opacity-0"}}});var Qe=K("<ul><!></ul>");function gt(t,e){ee(e,!0);const l=()=>$(b,"$keepOpenCtx",k),s=()=>$(T,"$open",k),[k,p]=de(),h=(o,_)=>{let j=()=>_==null?void 0:_()._class,G=()=>_==null?void 0:_().style;var B=Qe();R(B,()=>({role:"menu",class:j(),"aria-labelledby":e.id,tabindex:-1,style:G(),id:e.id,onfocusout:D,onclick:g,...S}));var ne=I(B);z(ne,()=>e.children??Q),P(B),_e(B,M=>a(M),()=>a()),He(B,"clientHeight",M=>E(d,M)),N(o,B)};let O=m(e,"class",3,""),C=m(e,"keepOpen",3,!1),v=m(e,"position",3,"left"),a=m(e,"menuElement",15,null),w=m(e,"maxHeight",3,"max-h-[20rem]"),c=m(e,"usePortal",3,!1),S=ue(e,["$$slots","$$events","$$legacy","class","id","keepOpen","position","menuElement","maxHeight","usePortal","scrollContainer","children"]),d=L(0),y=L(null);const{keepOpen:b,menuElement:A,open:T}=xe(fe);X(()=>{U(b,C())}),X(()=>{U(A,a())}),X(function(){c()&&e.id&&E(y,document.querySelector(`[aria-controls="${e.id}"]`),!0)});const H=F(()=>{if(c())return v().includes("top")?v():v()==="left"?"bottom-left":"bottom-right"}),V=F(()=>a()?Be(a()):[]),W=F(()=>i(V)[i(V).length-1]),D=o=>{!l()&&o.target===i(W)&&U(T,!1)},g=o=>{o.stopPropagation()},n=F(()=>Je({position:v(),state:s()?"open":"closed"}));var r=ae(),u=ce(r);{var f=o=>{Ge(o,{get anchor(){return i(y)},get open(){return s()},get position(){return i(H)},get scrollContainer(){return e.scrollContainer},children:(_,j)=>{{let G=F(()=>({_class:q(Ce,w(),O())}));h(_,()=>i(G))}},$$slots:{default:!0}})},x=o=>{{let _=F(()=>({_class:q(i(n),w(),O()),style:v()==="top-right"||v()==="top-left"?`top: -${i(d)+16}px;`:void 0}));h(o,()=>i(_))}};Y(u,o=>{c()&&i(y)?o(f):o(x,!1)})}N(t,r),te(),p()}export{fe as M,be as a,ht as b,mt as c,gt as d};
