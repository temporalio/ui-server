import{w as I}from"./SxBBeV83.js";import{p as S,s as p}from"./ikbOq2O5.js";const m=t=>typeof t=="function";function y(t,a,g=!1){var l,c;let i=m(a)?a():a,o;try{(l=window==null?void 0:window.localStorage)!=null&&l.getItem(t)&&(i=S(((c=window==null?void 0:window.localStorage)==null?void 0:c.getItem(t))??""))}catch{}const{subscribe:u,set:n,update:f}=I(i);if(g)try{o=new BroadcastChannel(`persist-store-${t}`),o==null||o.addEventListener("message",e=>{n(e.data)})}catch{console.error("Browser does not support BroadcastChannel")}return{subscribe:u,set:e=>{var r,s;o&&o.postMessage(e),e===null?(r=window==null?void 0:window.localStorage)==null||r.removeItem(t):(s=window==null?void 0:window.localStorage)==null||s.setItem(t,p(e)),n(e)},update:e=>{var r;(r=window==null?void 0:window.localStorage)==null||r.removeItem(t),f(s=>{var d;const w=e(s);return(d=window==null?void 0:window.localStorage)==null||d.setItem(t,p(w)),w})}}}export{m as i,y as p};
