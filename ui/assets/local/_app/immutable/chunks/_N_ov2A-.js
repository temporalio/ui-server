import"./CWj6FrbW.js";import{o as C}from"./D7JzDj9r.js";import{p as P,ax as b,ay as x,s as _,g as r,i as E,c as T,d as U,e as V,b as D}from"./DZ1-1a5q.js";import{p as I,a as l,s as W}from"./TaaIktnz.js";import{p as w}from"./DFkz0NIp.js";import{a as B}from"./urDygoU8.js";import{c as M,d as j}from"./CKDnmdS8.js";import{a as q,b as z,g as F}from"./DSWXFDzt.js";import{s as u}from"./ikbOq2O5.js";function X(m,e){P(e,!0);const t=()=>l(w,"$page",i),g=()=>l(B,"$authUser",i),[i,y]=W();let a=I(e,"key",3,""),v=a()&&(!(e.value===null||e.value===void 0)&&e.value[a()])?e.value[a()]:e.value,d=b(x(u(v)));C(()=>{f(e.value)});const f=async h=>{var n;const k={...t().data.settings,codec:{...(n=t().data.settings)===null||n===void 0?void 0:n.codec,endpoint:F(t().data.settings),passAccessToken:z(t().data.settings),includeCredentials:q(t().data.settings)}};try{const A=await M(h,t().params.namespace,k,g().accessToken),s=j(A);let o=a()&&(s==null?void 0:s[a()])?s[a()]:s;Array.isArray(o)&&o.length===1&&(o=o[0]),_(d,u(o),!0),e.onDecode&&e.onDecode(r(d))}catch{console.error("Could not decode payloads")}};var c=E(),p=T(c);U(p,()=>e.children,()=>r(d)),V(m,c),D(),y()}export{X as P};
