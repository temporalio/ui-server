import{a as A}from"./namespaces-service.6f8ef312.js";import{g as _}from"./workflow-service.b49fa907.js";const E=async function({params:e,url:d}){var c,n,l,f,g,h,w,u;const{searchParams:o}=d;o.has("time-range")||o.set("time-range","1 day");const y=o.get("workflow-id"),m=o.get("workflow-type"),v=o.get("time-range"),p=o.get("status"),t=await A(e.namespace),b=(l=(n=(c=t.config)==null?void 0:c.historyArchivalUri)==null?void 0:n.toLowerCase())==null?void 0:l.startsWith("s3://"),k=(h=(g=(f=t.config)==null?void 0:f.historyArchivalUri)==null?void 0:g.toLowerCase())==null?void 0:h.startsWith("gs://"),i=b||k,S=i?{}:{workflowId:y,workflowType:m,closeTime:v,executionStatus:p},a=((w=t==null?void 0:t.config)==null?void 0:w.historyArchivalState)==="Enabled",s=((u=t==null?void 0:t.config)==null?void 0:u.visibilityArchivalState)==="Enabled",r=a&&s?await _(e.namespace,S,fetch):null;return{workflows:r?r.workflows:[],namespace:t,archivalEnabled:a,visibilityArchivalEnabled:s,archivalQueryingNotSupported:i}},j=Object.freeze(Object.defineProperty({__proto__:null,load:E},Symbol.toStringTag,{value:"Module"}));export{j as _,E as l};
