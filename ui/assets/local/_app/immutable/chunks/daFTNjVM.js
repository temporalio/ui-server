import"./CWj6FrbW.js";import{o as Nt}from"./SxBBeV83.js";import{p as ze,l as dt,s as ue,m as ct,M as C,a as ut,i as he,c as ee,e as s,b as Ue,f as w,j as l,h as d,r as o,t as f,I as te,u as Vt,g as e,o as tt,n as V,k as q,av as Ce,at,au as Jt,v as n,q as Qt}from"./BzuLCQNf.js";import{s as y,d as Wt,e as nt}from"./HOnlAALn.js";import{i as c}from"./Be-bjpec.js";import{e as Xt,i as Yt}from"./DHcq7Esf.js";import{s as Me}from"./Brfhuxqj.js";import{c as Fe,s as me}from"./wWuJlbLq.js";import{l as mt,p as M,a as Le,s as Zt,c as Se}from"./DdNojIXk.js";import{p as ce}from"./v9VbdsiR.js";import{t as $t}from"./pi-WXkM0.js";import{B as xe}from"./BvcST-tr.js";import{C as Oe}from"./Vk2HnYFn.js";import{I as rt}from"./CKL6Zfw6.js";import{L as je}from"./BqNjae6c.js";import{T as De}from"./QGm-pl5O.js";import{t as k}from"./DEjs8ZrU.js";import{i as m,e as ea,a as ta,b as aa}from"./BPKezxaS.js";import{i as na}from"./BcR3wtht.js";import{a as ra}from"./ewzzm9Vv.js";import{E as ia,d as it,C as st,e as sa,M as oa,a as la}from"./BhQqttZh.js";import{f as ot,s as va}from"./ByTIZu23.js";import{b as da}from"./oNA5hRXf.js";import{j as lt}from"./vp2td3Dl.js";import{d as ca,g as ua,b as ma}from"./CufSigb6.js";import{h as ge,p as fa}from"./DblapY8m.js";import{c as vt}from"./Dfah5ZHD.js";import{t as _a}from"./DlVxM-e9.js";import"./69_IOA4Y.js";import{i as ft,t as be}from"./W-5sOwmb.js";import{P as ga}from"./B0ahM8Qd.js";import{g as ya}from"./CxYsc0Z2.js";var xa=w('<p class="whitespace-nowrap text-right text-xs"> </p>'),ha=w('<div><code class="svelte-cy5z6t"><pre class="truncate svelte-cy5z6t"> </pre></code></div>'),ba=w('<div class="flex max-w-sm items-center justify-between gap-2 overflow-hidden pr-1 xl:flex-nowrap"><!></div>'),ka=w('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><!> <!></div>');function ye(ve,t){const j=mt(t,["children","$$slots","$$events","$$legacy"]);ze(t,!1);const L=ct();let p=M(t,"key",8),T=M(t,"value",8),J=M(t,"attributes",8),E=M(t,"showKey",8,!0);dt(()=>(C(p()),C(J())),()=>{ue(L,ca(p(),J()))}),ut(),ft();var S=he(),U=ee(S);{var Q=D=>{var G=ka(),H=l(G);{var ae=x=>{var h=xa(),P=l(h,!0);o(h),f(re=>y(P,re),[()=>(C(ot),C(p()),te(()=>ot(p())))]),s(x,h)};c(H,x=>{E()&&x(ae)})}var ne=d(H,2);{var ke=x=>{var h=ba(),P=l(h);ga(P,{get value(){return T()},key:"payloads",children:(W,A=Vt)=>{var F=ha(),K=l(F),R=l(K),X=l(R,!0);o(R),o(K),o(F),f((v,ie)=>{me(F,1,v,"svelte-cy5z6t"),y(X,ie)},[()=>Fe((C(be),C(j),te(()=>be("payload",j.class)))),()=>(A(),te(()=>A().slice(0,60)))]),s(W,F)},$$slots:{default:!0}}),o(h),s(x,h)},we=x=>{var h=he(),P=ee(h);{var re=A=>{{let F=tt(()=>(C(k),te(()=>k("common.copy-icon-title")))),K=tt(()=>(C(k),te(()=>k("common.copy-success-icon-title"))));Oe(A,{get copyIconTitle(){return e(F)},get copySuccessIconTitle(){return e(K)},get content(){return T()},"container-class":"truncate",children:(R,X)=>{ia(R,{get value(){return T()},get attributes(){return J()},get type(){return e(L)},class:"truncate"})},$$slots:{default:!0}})}},W=A=>{xe(A,{type:"subtle",class:"block select-none truncate",children:(F,K)=>{V();var R=q();f(()=>y(R,T())),s(F,R)},$$slots:{default:!0}})};c(P,A=>{e(L)!=="none"?A(re):A(W,!1)},!0)}s(x,h)};c(ne,x=>{typeof T()=="object"?x(ke):x(we,!1)})}o(G),s(D,G)};c(U,D=>{p()&&D(Q)})}s(ve,S),Ue()}var wa=w('<div><p class="max-w-fit whitespace-nowrap text-right text-sm"> </p> <div><!></div></div>');function pa(ve,t){const j=mt(t,["children","$$slots","$$events","$$legacy"]);ze(t,!1);var L=ct();let p=M(t,"link",8),T=M(t,"value",28,()=>p().workflowEvent.workflowId),J=M(t,"label",24,()=>k("nexus.link")),E=M(t,"href",12,void 0);dt(()=>(C(E()),C(p()),Ce(L)),()=>{E()||(E(ya(p())),T((ue(L,E().split("workflows/"))===null||Ce(L)===void 0?void 0:Ce(L)[1])||E()))}),ut(),ft();var S=wa(),U=l(S),Q=l(U,!0);o(U);var D=d(U,2),G=l(D);je(G,{get href(){return E()},children:(H,ae)=>{V();var ne=q();f(()=>y(ne,T())),s(H,ne)},$$slots:{default:!0}}),o(D),o(S),f(()=>{me(S,1,`flex flex-row items-center gap-2 overflow-hidden first:pt-0 last:border-b-0 ${C(j),te(()=>j.class)??""}`),y(Q,J()),me(D,1,`overflow-hidden ${C(j),te(()=>j.linkClass)??""}`)}),s(ve,S),Ue()}var Ta=w('<td class="font-mono"><div class="flex items-center gap-0.5"></div></td>'),Ea=w('<td class="font-mono"><!></td>'),Pa=w(" <!>",1),Aa=w("<!> <!>",1),Ia=w('<div class="flex max-w-xl items-center gap-2 first:pt-0 last:border-b-0 md:w-auto"><p class="whitespace-nowrap text-right text-xs">Summary</p> <!></div>'),Ca=w('<td><div class="flex justify-center gap-0.5"><!></div></td>'),Ma=w('<tr class="w-full text-sm no-underline" data-testid="event-summary-row-expanded"><td class="!p-0"><!></td></tr>'),La=w('<tr data-testid="event-summary-row"><!><td class="text-right md:hidden"><!></td><td class="hidden text-right md:table-cell"><!></td><td class="truncate"><p><!> </p></td><td class="w-full items-center gap-2 text-right text-sm font-normal xl:text-left"><div class="flex items-center gap-2"><!> <!> <!> <!> <!> <!> <!></div></td><!></tr> <!>',1);function cn(ve,t){ze(t,!0);const j=()=>Le($t,"$timestamp",T),L=()=>Le(ra,"$authUser",T),p=()=>Le(na,"$isCloud",T),[T,J]=Zt();var E,S,U,Q,D,G,H,ae;let ne=M(t,"compact",3,!1),ke=M(t,"expanded",3,!1),we=M(t,"onRowClick",3,()=>{}),x=M(t,"hoveredEventId",15),h=at(Jt(ke())),P=at(void 0);const re=n(()=>m(t.event)?Array.from(t.event.events.keys()).shift():t.event.id),W=n(()=>ce.params),A=n(()=>e(W).workflow),F=n(()=>e(W).run),K=n(()=>e(W).namespace),R=n(()=>vt({eventId:t.event.id,namespace:e(K),workflow:e(A),run:e(F)})),X=n(()=>da(t.event)),v=n(()=>m(t.event)?t.event.events.get(e(re)):t.event),ie=n(()=>lt({start:t.initialItem===null||t.initialItem===void 0?void 0:t.initialItem.eventTime,end:m(e(v))?(E=e(v).initialEvent)===null||E===void 0?void 0:E.eventTime:e(v)===null||e(v)===void 0?void 0:e(v).eventTime,includeMillisecondsForUnderSecond:!0})),fe=n(()=>m(t.event)?lt({start:(S=t.event.initialEvent)===null||S===void 0?void 0:S.eventTime,end:(U=t.event.lastEvent)===null||U===void 0?void 0:U.eventTime,includeMillisecondsForUnderSecond:!0}):""),_t=n(()=>ea(t.event)),gt=n(()=>ta(t.event)),yt=n(()=>aa(t.event)),xt=n(()=>m(t.event)?t.event.label:ge(t.event)?k("events.category.local-activity"):va(t.event.name)),N=n(()=>ge(t.event)?void 0:ua(m(t.event)?t.event.initialEvent:t.event)),Y=n(()=>ma(m(t.event)?t.event.lastEvent:t.event,e(N)===null||e(N)===void 0?void 0:e(N).key)),Z=n(()=>m(t.event)&&(t.event===null||t.event===void 0?void 0:t.event.pendingActivity)),pe=n(()=>e(Z)&&(e(Z)===null||e(Z)===void 0?void 0:e(Z).paused)),de=n(()=>m(t.event)&&t.event.isPending&&(((Q=t.event===null||t.event===void 0?void 0:t.event.pendingActivity)===null||Q===void 0?void 0:Q.attempt)||((D=t.event===null||t.event===void 0?void 0:t.event.pendingNexusOperation)===null||D===void 0?void 0:D.attempt))),Ge=n(()=>m(t.event)&&!t.event.isPending&&((H=(G=t.event.eventList.find(fa))===null||G===void 0?void 0:G.attributes)===null||H===void 0?void 0:H.attempt)),ht=n(()=>ne()&&(e(Y)===null||e(Y)===void 0?void 0:e(Y).key)&&(e(Y)===null||e(Y)===void 0?void 0:e(Y).key)!==(e(N)===null||e(N)===void 0?void 0:e(N).key)&&!(!((ae=e(v)===null||e(v)===void 0?void 0:e(v).userMetadata)===null||ae===void 0)&&ae.summary)),Re=n(()=>j()(e(v)===null||e(v)===void 0?void 0:e(v).eventTime)),Be=n(()=>j()(e(v)===null||e(v)===void 0?void 0:e(v).eventTime,{format:"short"})),bt=a=>{ue(h,!e(h)),a.stopPropagation(),we()()},kt=()=>{x(t.event.id)},wt=()=>{x(void 0)};let pt=(a,r)=>{var i;return(i=a==null?void 0:a.eventIds)===null||i===void 0?void 0:i.has(r)};Nt(async()=>{ge(t.event)?ue(P,await it(t.event,{namespace:ce.params.namespace,settings:ce.data.settings,accessToken:L().accessToken}),!0):m(t.event)&&ge(t.event.initialEvent)&&ue(P,await it(t.event.initialEvent,{namespace:ce.params.namespace,settings:ce.data.settings,accessToken:L().accessToken}),!0)});var qe=La(),B=ee(qe);B.__click=bt;var He=l(B);{var Tt=a=>{var r=Ta(),i=l(r);Xt(i,21,()=>t.event.eventList,Yt,(b,_)=>{{let u=n(()=>vt({eventId:e(_).id,namespace:e(K),workflow:e(A),run:e(F)}));je(b,{"data-testid":"link",get href(){return e(u)},children:(I,z)=>{V();var g=q();f(()=>y(g,e(_).id)),s(I,g)},$$slots:{default:!0}})}}),o(i),o(r),s(a,r)},Et=a=>{var r=Ea(),i=l(r);je(i,{"data-testid":"link",get href(){return e(R)},children:(b,_)=>{V();var u=q();f(()=>y(u,t.event.id)),s(b,u)},$$slots:{default:!0}}),o(r),s(a,r)};c(He,a=>{m(t.event)?a(Tt):a(Et,!1)})}var Te=d(He),Pt=l(Te);{let a=n(()=>m(t.event)&&!e(fe)||!e(ie)),r=n(()=>m(t.event)?`Duration: ${e(fe)}`:`+${e(ie)}`);De(Pt,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,b)=>{{let _=n(()=>k("common.copy-icon-title")),u=n(()=>k("common.copy-success-icon-title"));Oe(i,{get copyIconTitle(){return e(_)},get copySuccessIconTitle(){return e(u)},get content(){return e(Be)},children:(I,z)=>{V();var g=q();f(()=>y(g,e(Be))),s(I,g)},$$slots:{default:!0}})}},$$slots:{default:!0}})}o(Te);var Ee=d(Te),At=l(Ee);{let a=n(()=>m(t.event)&&!e(fe)||!e(ie)),r=n(()=>m(t.event)?`Duration: ${e(fe)}`:`+${e(ie)}`);De(At,{get hide(){return e(a)},get text(){return e(r)},class:"block",bottom:!0,children:(i,b)=>{{let _=n(()=>k("common.copy-icon-title")),u=n(()=>k("common.copy-success-icon-title"));Oe(i,{get copyIconTitle(){return e(_)},get copySuccessIconTitle(){return e(u)},get content(){return e(Re)},children:(I,z)=>{V();var g=q();f(()=>y(g,e(Re))),s(I,g)},$$slots:{default:!0}})}},$$slots:{default:!0}})}o(Ee);var Pe=d(Ee),Ae=l(Pe),Ke=l(Ae);rt(Ke,{get name(){return st[t.event.category].name},get title(){return st[t.event.category].title},class:"mr-1 inline"});var It=d(Ke);o(Ae),o(Pe);var Ie=d(Pe),Ne=l(Ie),Ve=l(Ne);{var Ct=a=>{{let r=n(()=>e(pe)?"warning":e(de)>1?"danger":"default");xe(a,{class:"mr-1",get type(){return e(r)},children:(i,b)=>{var _=Aa(),u=ee(_);{let O=n(()=>be("mr-1 inline",e(de)>1&&"font-bold text-red-400",e(pe)&&"font-bold text-yellow-700")),$=n(()=>e(pe)?"pause":"retry");rt(u,{get class(){return e(O)},get name(){return e($)}})}var I=d(u),z=d(I);{var g=O=>{var $=Pa(),se=ee($),_e=d(se);{var Bt=oe=>{const Ze=n(()=>{var le;return _a({date:(le=e(Z))==null?void 0:le.scheduledTime,negativeDefault:""})});var $e=he(),qt=ee($e);{var Ht=le=>{var et=q();f(Kt=>y(et,`• ${Kt??""}
                ${e(Ze)??""}`),[()=>k("workflows.next-retry")]),s(le,et)};c(qt,le=>{e(Ze)&&le(Ht)})}s(oe,$e)};c(_e,oe=>{e(de)>1&&oe(Bt)})}f(()=>{var oe;return y(se,`/ ${(((oe=e(Z))==null?void 0:oe.maximumAttempts)||"∞")??""} `)}),s(O,$)};c(z,O=>{e(Z)&&O(g)})}f(O=>y(I,` ${O??""}
          ${e(de)??""} `),[()=>k("workflows.attempt")]),s(i,_)},$$slots:{default:!0}})}};c(Ve,a=>{e(de)&&a(Ct)})}var Je=d(Ve,2);{var Mt=a=>{ye(a,Se(()=>e(N),{get attributes(){return e(X)}}))};c(Je,a=>{var r;!e(P)&&((r=e(N))!=null&&r.key)&&a(Mt)})}var Qe=d(Je,2);{var Lt=a=>{ye(a,Se(()=>e(P),{get attributes(){return e(X)}}))};c(Qe,a=>{e(P)&&e(P).key&&a(Lt)})}var We=d(Qe,2);{var St=a=>{oa(a,{get value(){return e(v).userMetadata.summary},children:Qt,$$slots:{default:(r,i)=>{const b=n(()=>i.decodedValue);var _=he(),u=ee(_);{var I=z=>{var g=Ia(),O=d(l(g),2);xe(O,{type:"secondary",class:"block select-none truncate",children:($,se)=>{V();var _e=q();f(()=>y(_e,e(b))),s($,_e)},$$slots:{default:!0}}),o(g),s(z,g)};c(u,z=>{e(b)&&z(I)})}s(r,_)}}})};c(We,a=>{var r,i;(i=(r=e(v))==null?void 0:r.userMetadata)!=null&&i.summary&&a(St)})}var Xe=d(We,2);{var Dt=a=>{pa(a,{get link(){return e(v).links[0]},class:"max-w-xl",linkClass:"truncate"})};c(Xe,a=>{var r,i;(i=(r=e(v))==null?void 0:r.links)!=null&&i.length&&a(Dt)})}var Ye=d(Xe,2);{var Ft=a=>{{let r=n(()=>e(Ge).toString());ye(a,{key:"attempt",get value(){return e(r)},get attributes(){return e(X)}})}};c(Ye,a=>{e(Ge)&&a(Ft)})}var Ot=d(Ye,2);{var jt=a=>{ye(a,Se(()=>e(Y),{get attributes(){return e(X)}}))};c(Ot,a=>{e(ht)&&a(jt)})}o(Ne),o(Ie);var zt=d(Ie);{var Ut=a=>{var r=Ca(),i=l(r),b=l(i);{var _=u=>{{let I=n(()=>k("workflows.estimated-billable-actions"));De(u,{get text(){return e(I)},topRight:!0,children:(z,g)=>{xe(z,{type:"subtle",class:"text-bold shrink-0 gap-1 px-1.5",children:(O,$)=>{V();var se=q();f(()=>y(se,t.event.billableActions)),s(O,se)},$$slots:{default:!0}})},$$slots:{default:!0}})}};c(b,u=>{t.event.billableActions&&u(_)})}o(i),o(r),s(a,r)};c(zt,a=>{p()&&a(Ut)})}o(B);var Gt=d(B,2);{var Rt=a=>{var r=Ma(),i=l(r),b=l(i);la(b,{get group(){return t.group},get event(){return e(v)}}),o(i),o(r),f(()=>Me(i,"colspan",p()?5:4)),s(a,r)};c(Gt,a=>{e(h)&&a(Rt)})}f((a,r)=>{me(B,1,a,"svelte-1cvp1uf"),Me(B,"id",`${t.event.id}-${t.index}`),Me(B,"data-eventid",t.event.id),me(Ae,1,r),y(It,` ${e(xt)??""}`)},[()=>Fe(be("hover:cursor-pointer",e(_t)&&"!bg-red-400/40 hover:!bg-red-400/60",e(gt)&&"!bg-yellow-400/30 hover:!bg-yellow-400/50",e(yt)&&"!bg-pink-700/30 hover:!bg-pink-700/50",pt(t.group,x())&&"active")),()=>Fe(sa({category:t.event.category}))]),nt("mouseenter",B,kt),nt("mouseleave",B,wt),s(ve,qe),Ue(),J()}Wt(["click"]);export{cn as E,ye as a};
