import{z as i}from"./scheduler.LRpOgQOC.js";import{t as n}from"./translate.HrioCK44.js";import{f as y,r as h,t as w}from"./time-format.y43ZUqso.js";import{c as m}from"./format-camel-case.GLYQBque.js";import{s as p,a as b,b as k,p as f,c as d}from"./index.Ob3ncJfM.js";const l=new Set(["header"]),D=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),O=new Set(["maximumAttempts"]),$=(a,t)=>a===0?n("workflows.no-expiration"):t,L=(a,t)=>a?a-t:n("workflows.unlimited"),Q=a=>a||n("workflows.unlimited"),x=(a,t)=>a==="maximumAttempts"&&!t?n("workflows.unlimited"):t,c=(a,t)=>{if(D.has(t)&&typeof a[t]=="object"){for(const[s,e]of Object.entries(a[t]))b(e)&&(O.has(s)?a[`${t}${m(s)}`]=x(s,e):a[`${t}${m(s)}`]=e);delete a[t]}},V=(a,{compact:t}={compact:!1})=>{const s={};t&&(s.eventTime=y(a.eventTime,i(w),{relative:i(h)}));for(const[e,o]of Object.entries(a.attributes)){const r=p(e,o);!l.has(e)&&r&&(s[e]=o),c(s,e)}return s},g=a=>{const t={};return a.eventList.forEach(s=>{for(const[e,o]of Object.entries(s.attributes)){const r=p(e,o);!l.has(e)&&r&&(t[e]=o),c(t,e)}}),Object.keys(t).forEach(s=>{k(s,t[s])||delete t[s]}),t},z=a=>{const t={},s=Object.entries(a).sort(([e],[o])=>f.indexOf(e)-f.indexOf(o));for(const[e,o]of s){const r=d(e),v=e.toLowerCase().includes("time")?y(String(o),i(w),{relative:i(h)}):o;!l.has(e)&&r&&(t[e]=v),c(t,e)}return t},u=["summary","parent","activity","taskQueue","schedule","retryPolicy","workflow","searchAttributes"],F={activity:{label:"events.attribute-group.activity"},parent:{label:"events.attribute-group.parent"},retryPolicy:{label:"events.attribute-group.retry-policy"},schedule:{label:"events.attribute-group.schedule"},searchAttributes:{label:"events.attribute-group.search-attributes"},summary:{label:"events.attribute-group.summary"},taskQueue:{label:"events.attribute-group.task-queue"},workflow:{label:"events.attribute-group.workflow"}},j=(a,t)=>{var s,e;a.category==="activity"&&((s=t==null?void 0:t.activity)!=null&&s.length)&&(t.summary=[...t.activity,...t.summary],t.activity=[]),a.category==="activity"&&((e=t==null?void 0:t.workflow)!=null&&e.length)&&(t.summary=[...t.summary,...t.workflow],t.workflow=[])},E=a=>{const t=new Set(["summary","searchAttributes"]);for(const[s,e]of Object.entries(a))e.length===1&&!t.has(s)&&(a.summary=[...a.summary,...e],a[s]=[])},I=(a,t)=>{const s={};u.forEach(e=>{e==="summary"?s[e]=Object.keys(t):s[e]=[]});for(const e in t){const o=u.find(r=>e.includes(r));o&&(s[o]=[e,...s[o]],s.summary=s.summary.filter(r=>r!==e))}return j(a,s),E(s),s};export{Q as a,$ as b,F as c,V as d,I as e,L as f,g,z as h};
