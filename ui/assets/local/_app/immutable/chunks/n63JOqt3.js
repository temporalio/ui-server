import"./CWj6FrbW.js";import{c as St,B as Ot}from"./CqqsKTDn.js";import{p as Re,k as be,t as H,e as c,g as a,v as w,b as Fe,n as he,aS as Me,ax as ve,f as I,c as z,j as P,h as x,i as $,s as E,r as T,d as Ve}from"./DZ1-1a5q.js";import{s as N,d as At,a as It}from"./DxwvfIkW.js";import{i as y}from"./DnKg3jxh.js";import{e as Ee,i as He}from"./DGhzC9On.js";import{a as qt,s as zt}from"./D3L9VHHD.js";import{c as Ke,s as De}from"./B3h3Bc2r.js";import{b as Pt}from"./CpT1VbVb.js";import{p as l,a as Tt,s as Mt,r as Vt,b as me}from"./TaaIktnz.js";import{w as Et}from"./D7JzDj9r.js";import{b as Ht,c as Kt,d as Dt}from"./CnHlilQN.js";import{t as G}from"./Bby3K3wO.js";import{L as Bt}from"./BO02Afj1.js";import{B as Be}from"./D5BzRETI.js";import{C as jt}from"./ZI3Xs3fh.js";import{I as ge}from"./BwERH40W.js";import{M as Rt}from"./B1qTrUHR.js";import{T as je}from"./DM1_LFNw.js";function p(ee,e){Re(e,!0);let m=l(e,"selected",3,!1),J=l(e,"disabled",3,!1),te=l(e,"class",3,"");{let b=w(()=>G("break-all",te()));Ht(ee,{role:"option",get class(){return a(b)},get"aria-selected"(){return m()},get"aria-disabled"(){return J()},get onclick(){return e.onclick},get selected(){return m()},get disabled(){return J()},get leading(){return e.leading},get trailing(){return e.trailing},children:(r,ae)=>{he();var Q=be();H(()=>N(Q,e.label)),c(r,Q)},$$slots:{default:!0}})}Fe()}const Ft=St(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}});var pt=I("<p> </p>"),Nt=I("<!> <!>",1),Gt=I('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),Jt=I('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),Qt=I('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),Ut=I("<!> <!> <!>",1),Wt=I("<!> <!> <!>",1),Xt=I('<span class="error svelte-kqcnue"> </span>'),Yt=I('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input/></div> <!> <!></div></div> <!> <!>',1);function ha(ee,e){Re(e,!0);const m=()=>Tt(j(),"$open",J),[J,te]=Mt();let b=l(e,"multiselect",3,!1),r=l(e,"value",15),ae=l(e,"disabled",3,!1),Q=l(e,"labelHidden",3,!1),pe=l(e,"placeholder",3,null),Ne=l(e,"readonly",3,!1),re=l(e,"required",3,!1),U=l(e,"leadingIcon",3,null),Ge=l(e,"showChevron",3,!1),M=l(e,"optionValueKey",3,null),W=l(e,"optionLabelKey",19,M),_e=l(e,"minSize",3,0),xe=l(e,"maxSize",3,120),ye=l(e,"error",3,""),we=l(e,"valid",3,!0),j=l(e,"open",19,()=>Et(!1)),Je=l(e,"maxMenuHeight",3,"max-h-[20rem]"),le=l(e,"chipLimit",3,5),Qe=l(e,"displayChips",3,!0),Ue=l(e,"selectAllLabel",3,"Select All"),We=l(e,"deselectAllLabel",3,"Deselect All"),Xe=l(e,"removeChipLabel",3,"Remove Option"),Ye=l(e,"numberOfItemsSelectedLabel",3,t=>`${t} option${t>1?"s":""} selected`),X=l(e,"actionTooltip",3,""),ne=l(e,"href",3,""),ke=l(e,"hrefDisabled",3,!1),Le=l(e,"loading",3,!1),Ze=l(e,"loadingText",3,"Loading more results"),Ce=l(e,"variant",3,"default"),$e=l(e,"optionClass",3,""),et=l(e,"data-testid",19,()=>e.id),tt=Vt(e,["$$slots","$$events","$$legacy","class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","open","maxMenuHeight","action","chipLimit","displayChips","selectAllLabel","deselectAllLabel","removeChipLabel","numberOfItemsSelectedLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","optionClass","onchange","onclose","oninput","data-testid"]),ie=ve(""),se=ve(null),h=ve(null);const Y=w(()=>rt(e.options));let oe=w(()=>ft(a(ie),e.options)),C=w(()=>b()?void 0:ue(a(Y)));Me(()=>{m()&&a(h)&&document.activeElement!==a(h)&&(a(h).focus(),a(h).select())}),Me(()=>{a(h)&&a(C)&&(a(C).length<_e()?a(h).size=_e():a(C).length>xe()?a(h).size=xe():a(h).size=a(C).length)});const R=()=>{m()||(me(j(),!0),E(ie,""),a(h).focus(),a(h).select())},Se=()=>{m()&&(me(j(),!1),e.onclose===null||e.onclose===void 0||e.onclose(a(Y)),de())},at=()=>{e.onclose===null||e.onclose===void 0||e.onclose(a(Y)),de()},de=()=>{E(C,ue(a(Y))),E(oe,e.options)},S=t=>Array.isArray(t),K=t=>typeof t=="string",D=t=>typeof t=="object",F=t=>t===null||typeof t!="object"?!1:M()!==null&&W()!==null&&M()in t&&W()in t;function ue(t){if(!t)return S(r())?"":r()!==null&&r()!==void 0?r():"";if(K(t))return t;if(D(t)&&F(t))return String(t[W()])}function rt(t){return t.find(i=>{if(K(i))return i===r();if(D(i)&&F(i))return i[M()]===r()})}const lt=t=>{if(K(t)&&(S(r())?r().includes(t)?r(r().filter(i=>i!==t)):r([...r(),t]):r(t)),D(t)&&F(t)){const i=String(t[M()]);S(r())?r().includes(i)?r(r().filter(g=>g!==i)):r([...r(),i]):r(i)}},nt=t=>{lt(t),e.onchange===null||e.onchange===void 0||e.onchange(t),b()||de()},it=t=>{S(r())&&r(r().filter(i=>i!==t))},st=()=>{!b()||!S(r())||r(a(oe).map(t=>{if(D(t)&&F(t))return String(t[M()]);if(K(t))return t}))},ot=()=>{r([])},Oe=()=>{const t=a(se).querySelector('li[role="option"]:not([aria-disabled="true"])');t&&requestAnimationFrame(()=>t.focus())},dt=t=>{switch(t.stopPropagation(),t.key){case"Escape":Se();break;case"ArrowDown":R(),Oe();break;case"Enter":R(),Oe();break}},ut=t=>{t.stopPropagation(),R()},ct=t=>{t.stopPropagation(),m()||me(j(),!0),E(C,t.currentTarget.value),E(ie,a(C),!0),e.oninput===null||e.oninput===void 0||e.oninput(a(C))};function ft(t,i){return i.filter(g=>{if(K(g))return g.toLowerCase().includes(t.toLowerCase());if(D(g)&&F(g))return String(g[W()]).toLowerCase().includes(t.toLowerCase())})}const vt=t=>{t.stopPropagation(),m()||R()},mt=t=>{t.stopPropagation(),m()?Se():R()},gt=(t,i)=>{if(D(t)){const g=String(t[M()]);return S(i)?i.includes(g):i===g}else if(K(t))return S(i)?i.includes(t):i===t;return!1};Kt(ee,{get open(){return j()},onclose:at,children:(t,i)=>{var g=Yt(),ce=z(g),Ae=P(ce);Bt(Ae,{get hidden(){return Q()},get required(){return re()},get label(){return e.label},get for(){return e.id}});var fe=x(Ae,2),Ie=P(fe);{var bt=n=>{ge(n,{class:"ml-2 shrink-0",get name(){return U()}})};y(Ie,n=>{U()&&n(bt)})}var Z=x(Ie,2),qe=P(Z);{var ht=n=>{var s=$(),_=z(s);{var k=o=>{var v=Nt(),O=z(v);Ee(O,17,()=>r().slice(0,le()),He,(u,f)=>{jt(u,{onremove:()=>it(a(f)),get removeButtonLabel(){return Xe()},children:(L,q)=>{he();var B=be();H(()=>N(B,a(f))),c(L,B)},$$slots:{default:!0}})});var A=x(O,2);{var d=u=>{var f=pt(),L=P(f);T(f),H(q=>N(L,`+${q??""}`),[()=>r().slice(le()).length]),c(u,f)};y(A,u=>{r().length>le()&&u(d)})}c(o,v)},V=o=>{Ot(o,{children:(v,O)=>{he();var A=be();H(d=>N(A,d),[()=>Ye()(r().length)]),c(v,A)},$$slots:{default:!0}})};y(_,o=>{Qe()?o(k):o(V,!1)})}c(n,s)},_t=w(()=>b()&&S(r())&&r().length>0);y(qe,n=>{a(_t)&&n(ht)})}var ze=x(qe,2);qt(ze,n=>({id:e.id,placeholder:pe(),required:re(),readonly:Ne(),disabled:ae(),type:"text",value:a(C),class:n,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${e.id??""}-listbox`,"aria-expanded":m(),"aria-required":re(),"aria-autocomplete":"list",onfocus:ut,oninput:ct,onkeydown:dt,onclick:vt,"data-testid":et(),...tt}),[()=>G("combobox-input",b()?r().length>0||U()?"indent-0":"indent-1":"indent-2",e.class)],void 0,void 0,"svelte-kqcnue",!0),Pt(ze,n=>E(h,n),()=>a(h)),T(Z);var Pe=x(Z,2);{var xt=n=>{var s=Gt(),_=P(s);{var k=o=>{je(o,{get text(){return X()},right:!0,children:(v,O)=>{var A=$(),d=z(A);Ve(d,()=>e.action),c(v,A)},$$slots:{default:!0}})},V=o=>{var v=$(),O=z(v);Ve(O,()=>e.action),c(o,v)};y(_,o=>{X()?o(k):o(V,!1)})}T(s),c(n,s)},yt=n=>{var s=Jt(),_=P(s);{var k=o=>{je(o,{get text(){return X()},right:!0,children:(v,O)=>{Be(v,{variant:"ghost",size:"xs",get href(){return ne()},get disabled(){return ke()},leadingIcon:"external-link"})},$$slots:{default:!0}})},V=o=>{Be(o,{variant:"ghost",size:"xs",get href(){return ne()},get disabled(){return ke()},leadingIcon:"external-link"})};y(_,o=>{X()?o(k):o(V,!1)})}T(s),c(n,s)};y(Pe,n=>{e.action?n(xt):ne()&&n(yt,1)})}var wt=x(Pe,2);{var kt=n=>{var s=Qt(),_=P(s);{let k=w(()=>G("transition-transform duration-200",m()&&"rotate-180",!m()&&"rotate-0"));ge(_,{name:"chevron-down",get class(){return a(k)}})}T(s),H(()=>zt(s,"aria-label",m()?"Close options":"Open options")),It("click",s,mt),c(n,s)};y(wt,n=>{Ge()&&n(kt)})}T(fe),T(ce);var Te=x(ce,2);Dt(Te,{get keepOpen(){return b()},get id(){return`${e.id??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return Je()},get menuElement(){return a(se)},set menuElement(n){E(se,n,!0)},children:(n,s)=>{var _=Wt(),k=z(_);{var V=d=>{var u=Ut(),f=z(u);{let B=w(()=>r().length===e.options.length);p(f,{get disabled(){return a(B)},onclick:st,get label(){return Ue()}})}var L=x(f,2);{let B=w(()=>r().length===0);p(L,{get disabled(){return a(B)},onclick:ot,get label(){return We()}})}var q=x(L,2);Rt(q),c(d,u)},o=w(()=>b()&&S(r()));y(k,d=>{a(o)&&d(V)})}var v=x(k,2);Ee(v,17,()=>a(oe),He,(d,u)=>{{let f=w(()=>gt(a(u),r())),L=w(()=>ue(a(u)));p(d,{onclick:()=>nt(a(u)),get selected(){return a(f)},get label(){return a(L)},get class(){return $e()}})}},d=>{var u=$(),f=z(u);{var L=q=>{p(q,{disabled:!0,get label(){return e.noResultsText}})};y(f,q=>{Le()===!1&&q(L)})}c(d,u)});var O=x(v,2);{var A=d=>{p(d,{disabled:!0,get label(){return Ze()},leading:f=>{ge(f,{name:"spinner",class:"animate-spin"})},$$slots:{leading:!0}})};y(O,d=>{Le()&&d(A)})}c(n,_)},$$slots:{default:!0}});var Lt=x(Te,2);{var Ct=n=>{var s=Xt(),_=P(s,!0);T(s),H(()=>N(_,ye())),c(n,s)};y(Lt,n=>{ye()&&!we()&&n(Ct)})}H((n,s)=>{De(fe,1,n,"svelte-kqcnue"),De(Z,1,s,"svelte-kqcnue")},[()=>Ke(G(Ft({variant:Ce()}),!we()&&Ce()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",ae()&&"opacity-50",e.class)),()=>Ke(G("input-wrapper",b()&&"gap-1",b()&&"m-1",U()&&b()&&"ml-2"))]),c(t,g)},$$slots:{default:!0}}),Fe(),te()}At(["click"]);export{ha as C};
