import{n as c}from"./namespaces.DqOZF4Yg.js";import{t as m}from"./toaster.B-NOX7AZ.js";import{p as u}from"./paginated.qsQVEinR.js";import{r as p,a as f}from"./route-for-api.bNue0qLp.js";import{t as i,a as y}from"./screaming-enums.w0zEi9dM.js";const v={namespaces:[]},h=t=>{var e;return t.config&&(t.config.historyArchivalState=i(t.config.historyArchivalState),t.config.visibilityArchivalState=i(t.config.visibilityArchivalState)),t.namespaceInfo&&(t.namespaceInfo.state=y((e=t.namespaceInfo)==null?void 0:e.state)),t};async function I(t,e=fetch){const{showTemporalSystemNamespace:o,runtimeEnvironment:r}=t;if(r.isCloud){c.set([]);return}try{const s=p("namespaces"),a=await u(async n=>f(s,{request:e,token:n,onError:()=>m.push({variant:"error",message:"Unable to fetch namespaces"})})),l=((a==null?void 0:a.namespaces)??[]).filter(n=>o||n.namespaceInfo.name!=="temporal-system").map(h);c.set(l)}catch{c.set([])}}async function d(t,e,o=fetch){const[r]=v.namespaces,s=p("namespace",{namespace:t}),a=await f(s,{request:o,onError:()=>m.push({variant:"error",message:"Unable to fetch namespaces"})});return a?h(a):r}export{I as a,d as f};
