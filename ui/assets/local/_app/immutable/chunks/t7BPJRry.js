import"./Bzak7iHL.js";import{p as ct,g as t,o as G,b as mt,u as o,t as y,f as C,i as s,c as u,r as a,d as Vt,j as _,e as p,n as lt,k as ut,ac as Lt,h as Nt}from"./CYx2j9em.js";import{s as m}from"./BjCW00Pv.js";import{i as V}from"./DeQvpgQS.js";import{e as Ot,i as Et}from"./C1OgRA7l.js";import{p as St,s as Ut,a as At}from"./DnRAdnAf.js";import{p as Ft}from"./B1z_XXAr.js";import{B as Ht}from"./B5FQmuB7.js";import{E as qt}from"./BJQQDmwL.js";import{L as Kt}from"./CwxeZer1.js";import{T as Xt,a as Yt,b as zt}from"./BDvrbBIF.js";import{t as c}from"./BXv1jDVW.js";import{g as Gt}from"./ivn_wdJo.js";import"./DTBKjfP9.js";import"./CM4UClqV.js";import{j as Jt}from"./CFXiJeAk.js";import"./BDKvaX8s.js";import"./CArENVfQ.js";import{w as Mt}from"./WemCyz5V.js";import{D as Zt}from"./q8n6Td4-.js";import"./69_IOA4Y.js";import{i as te}from"./HoZrOv-6.js";import{I as ee}from"./Cgy7lDWn.js";import{T as re}from"./Dyr7Vk7o.js";function J(L,f){ct(f,!1);let $=St(f,"includesTaskQueueType",8);te();const N=G(()=>$()?"checkmark":"close"),O=G(()=>$()?"text-blue-700":"text-primary"),E=G(()=>$()?c("common.yes"):c("common.no"));ee(L,{get name(){return t(N)},get class(){return t(O)},get title(){return t(E)}}),mt()}var se=y("<p> </p>"),ae=y("<p> </p>"),oe=y('<td class="select-all break-all" data-testid="worker-identity"> </td> <td class="select-all break-all" data-testid="worker-build-id"><div class="flex items-center gap-2"> <!></div></td> <td class="select-all break-all" data-testid="worker-deployment"><!></td> <!> <td data-testid="workflow-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="activity-poller"><div class="flex items-center justify-center"><!></div></td> <td data-testid="nexus-poller"><div class="flex items-center justify-center"><!></div></td>',1),ne=y('<tr class="w-full"><td colspan="7"><!></td></tr>'),ie=y('<caption class="sr-only" slot="caption"> </caption>'),de=y('<th> </th> <th> </th> <th> </th> <th class="hidden md:table-cell"> </th> <th class="!text-center xl:w-48"> </th> <th class="!text-center xl:w-36"> </th> <th class="!text-center xl:w-36"> </th>',1),le=y('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function Ve(L,f){ct(f,!0);const[$,N]=Ut(),O=()=>At(Mt,"$workflowRun",$),E=o(()=>Ft.params),vt=o(()=>t(E).namespace),pt=o(()=>O().workflow),w=o(()=>Gt(t(pt),f.workers)),M=o(()=>t(w).pollers),_t=o(()=>t(w).pinned),ft=o(()=>t(w).autoUpgrade),wt=o(()=>t(w).currentBuildId),kt=o(()=>t(w).currentDeployment),gt=o(()=>t(w).rampingBuildId),ht=o(()=>t(w).rampingDeployment),S=e=>{var l,r,n;const i=(r=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.deploymentName)!==null&&r!==void 0?r:(n=e==null?void 0:e.workerVersionCapabilities)===null||n===void 0?void 0:n.deploymentSeriesName;return i??""},U=e=>{var l,r,n;const i=(r=(l=e==null?void 0:e.deploymentOptions)===null||l===void 0?void 0:l.buildId)!==null&&r!==void 0?r:(n=e==null?void 0:e.workerVersionCapabilities)===null||n===void 0?void 0:n.buildId;return i??""},xt=e=>t(Z)(e)?"Current":t(tt)(e)?"Ramping":void 0,yt=e=>t(Z)(e)?c("deployments.current"):t(tt)(e)?c("deployments.ramping-percentage",{percentage:f.workers.versioningInfo.rampingVersionPercentage}):"",Z=o(()=>e=>S(e)===t(kt)&&U(e)===t(wt)),tt=o(()=>e=>S(e)===t(ht)&&U(e)===t(gt));var et=le(),A=C(et),rt=s(A),bt=u(rt);Ht(bt,{type:"count",children:(e,l)=>{lt();var r=ut();_(()=>{var n;return m(r,((n=t(M))==null?void 0:n.length)||0)}),p(e,r)},$$slots:{default:!0}}),a(A);var st=u(A,2);Vt(st,()=>f.children??Lt);var at=u(st,2);{var $t=e=>{var l=se(),r=s(l,!0);a(l),_(n=>m(r,n),[()=>c("workers.viewing-pinned-build-ids")]),p(e,l)},Tt=(e,l)=>{{var r=n=>{var i=ae(),d=s(i,!0);a(i),_(v=>m(d,v),[()=>c("workers.viewing-auto-upgrade-build-ids")]),p(n,i)};V(e,n=>{t(ft)&&n(r)},l)}};V(at,e=>{t(_t)?e($t):e(Tt,!1)})}var It=u(at,2);Xt(It,{class:"mb-6",fixed:!0,children:(e,l)=>{var r=Nt(),n=C(r);Ot(n,17,()=>t(M),Et,(i,d)=>{const v=o(()=>S(t(d))),k=o(()=>U(t(d))),b=o(()=>xt(t(d))),T=o(()=>yt(t(d)));zt(i,{"data-testid":"worker-row",children:(F,D)=>{var Q=oe(),g=C(Q),H=s(g,!0);a(g);var h=u(g,2),W=s(h),I=s(W),q=u(I);{var K=x=>{Zt(x,{get status(){return t(b)},get label(){return t(T)}})};V(q,x=>{t(b)&&x(K)})}a(W),a(h);var P=u(h,2),X=s(P);{var Y=x=>{const jt=o(()=>Jt({namespace:t(vt),deployment:t(v)}));Kt(x,{get href(){return t(jt)},children:(Ct,ue)=>{lt();var dt=ut();_(()=>m(dt,t(v))),p(Ct,dt)},$$slots:{default:!0}})};V(X,x=>{t(v)&&x(Y)})}a(P);var R=u(P,2);re(R,{as:"td",get dateTime(){return t(d).lastAccessTime},class:"hidden md:table-cell","data-testid":"worker-last-access-time"});var B=u(R,2),j=s(B),Pt=s(j);const Bt=o(()=>t(d).taskQueueTypes.includes("WORKFLOW"));J(Pt,{get includesTaskQueueType(){return t(Bt)}}),a(j),a(B);var z=u(B,2),ot=s(z),Dt=s(ot);const Qt=o(()=>t(d).taskQueueTypes.includes("ACTIVITY"));J(Dt,{get includesTaskQueueType(){return t(Qt)}}),a(ot),a(z);var nt=u(z,2),it=s(nt),Wt=s(it);const Rt=o(()=>t(d).taskQueueTypes.includes("NEXUS"));J(Wt,{get includesTaskQueueType(){return t(Rt)}}),a(it),a(nt),_(()=>{m(H,t(d).identity),m(I,`${t(k)??""} `)}),p(F,Q)},$$slots:{default:!0}})},i=>{var d=ne(),v=s(d),k=s(v);const b=o(()=>c("workflows.workers-empty-state"));qt(k,{get title(){return t(b)}}),a(v),a(d),p(i,d)}),p(e,r)},$$slots:{default:!0,caption:(e,l)=>{var r=ie(),n=s(r,!0);a(r),_(i=>m(n,i),[()=>c("workflows.workers-tab")]),p(e,r)},headers:(e,l)=>{Yt(e,{slot:"headers",children:(r,n)=>{var i=de(),d=C(i),v=s(d,!0);a(d);var k=u(d,2),b=s(k,!0);a(k);var T=u(k,2),F=s(T,!0);a(T);var D=u(T,2),Q=s(D,!0);a(D);var g=u(D,2),H=s(g,!0);a(g);var h=u(g,2),W=s(h,!0);a(h);var I=u(h,2),q=s(I,!0);a(I),_((K,P,X,Y,R,B,j)=>{m(v,K),m(b,P),m(F,X),m(Q,Y),m(H,R),m(W,B),m(q,j)},[()=>c("common.id"),()=>c("workers.buildId"),()=>c("deployments.deployment"),()=>c("workflows.last-accessed"),()=>c("workflows.workflow-task-handler"),()=>c("workflows.activity-handler"),()=>c("workflows.nexus-handler")]),p(r,i)},$$slots:{default:!0}})}}}),_(e=>m(rt,`${e??""} `),[()=>c("workers.workers")]),p(L,et),mt(),N()}export{Ve as W};
