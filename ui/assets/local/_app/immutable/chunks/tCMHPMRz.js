import"./Bzak7iHL.js";import{p as Re,u as A,n as he,k as _e,j as q,e as c,g as r,b as Fe,ag as ge,aH as pe,t as I,f as P,i as T,c as L,r as M,h as te,s as p,d as qe}from"./C-0kx8Rl.js";import{s as G,d as kt}from"./B-1TjF6E.js";import{i as h}from"./DIXBMONz.js";import{e as Ee,i as He}from"./CdE3I_3f.js";import{r as St,c as Ke,a as De,b as zt,s as Ot}from"./DliSAU7O.js";import{b as At}from"./B9s8aHCz.js";import{p as n,s as It,r as Pt,a as Tt,c as me}from"./B0Wc33k0.js";import{c as Mt,B as Vt}from"./CqraL4jo.js";import{w as pt}from"./Dl-yZlXH.js";import{b as qt,c as Et,d as Ht}from"./BSdQFxOj.js";import{t as J}from"./DFzl7kYA.js";import{L as Kt}from"./CGLMDN_1.js";import{B as Be}from"./BWI3V0Ry.js";import{C as Dt}from"./DzvncnuN.js";import{I as be}from"./BQ19dEFL.js";import{M as Bt}from"./DyhNL4tU.js";import{T as je}from"./D7zMa2zU.js";function N(B,e){Re(e,!0);let j=n(e,"selected",3,!1),E=n(e,"disabled",3,!1),v=n(e,"class",3,"");const _=A(()=>J("break-all",v()));qt(B,{role:"option",get class(){return r(_)},get"aria-selected"(){return j()},get"aria-disabled"(){return E()},get onclick(){return e.onclick},get selected(){return j()},get disabled(){return E()},get leading(){return e.leading},get trailing(){return e.trailing},children:(a,ae)=>{he();var Q=_e();q(()=>G(Q,e.label)),c(a,Q)},$$slots:{default:!0}}),Fe()}const jt=Mt(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}}),Rt=(B,e,j,E,v)=>{B.stopPropagation(),e()?E():v()};var Ft=I("<p> </p>"),Nt=I("<!> <!>",1),Gt=I('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),Jt=I('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),Qt=I('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),Ut=I("<!> <!> <!>",1),Wt=I("<!> <!> <!>",1),Xt=I('<span class="error svelte-8zxxzt"> </span>'),Yt=I('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input></div> <!> <!></div></div> <!> <!>',1);function ba(B,e){Re(e,!0);const[j,E]=It(),v=()=>Tt(H(),"$open",j);let _=n(e,"multiselect",3,!1),a=n(e,"value",15),ae=n(e,"disabled",3,!1),Q=n(e,"labelHidden",3,!1),Ne=n(e,"placeholder",3,null),Ge=n(e,"readonly",3,!1),re=n(e,"required",3,!1),U=n(e,"leadingIcon",3,null),Je=n(e,"showChevron",3,!1),V=n(e,"optionValueKey",3,null),W=n(e,"optionLabelKey",19,V),xe=n(e,"minSize",3,0),ye=n(e,"maxSize",3,120),we=n(e,"error",3,""),Le=n(e,"valid",3,!0),H=n(e,"open",19,()=>pt(!1)),Qe=n(e,"maxMenuHeight",3,"max-h-[20rem]"),ne=n(e,"chipLimit",3,5),Ue=n(e,"displayChips",3,!0),We=n(e,"selectAllLabel",3,"Select All"),Xe=n(e,"deselectAllLabel",3,"Deselect All"),Ye=n(e,"removeChipLabel",3,"Remove Option"),Ze=n(e,"numberOfItemsSelectedLabel",3,t=>`${t} option${t>1?"s":""} selected`),X=n(e,"actionTooltip",3,""),le=n(e,"href",3,""),Ce=n(e,"hrefDisabled",3,!1),ke=n(e,"loading",3,!1),$e=n(e,"loadingText",3,"Loading more results"),Se=n(e,"variant",3,"default"),et=n(e,"optionClass",3,""),tt=n(e,"data-testid",19,()=>e.id),at=Pt(e,["$$slots","$$events","$$legacy","class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","open","maxMenuHeight","action","chipLimit","displayChips","selectAllLabel","deselectAllLabel","removeChipLabel","numberOfItemsSelectedLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","optionClass","onchange","onclose","oninput","data-testid"]),ie=ge(""),se=ge(null),x=ge(null);const Y=A(()=>nt(e.options));let oe=A(()=>vt(r(ie),e.options)),S=A(()=>_()?void 0:ue(r(Y)));pe(()=>{v()&&r(x)&&document.activeElement!==r(x)&&(r(x).focus(),r(x).select())}),pe(()=>{r(x)&&r(S)&&(r(S).length<xe()?r(x).size=xe():r(S).length>ye()?r(x).size=ye():r(x).size=r(S).length)});const R=()=>{v()||(me(H(),!0),p(ie,""),r(x).focus(),r(x).select())},ze=()=>{v()&&(me(H(),!1),e.onclose===null||e.onclose===void 0||e.onclose(r(Y)),de())},rt=()=>{e.onclose===null||e.onclose===void 0||e.onclose(r(Y)),de()},de=()=>{p(S,ue(r(Y)),!0),p(oe,e.options,!0)},z=t=>Array.isArray(t),K=t=>typeof t=="string",D=t=>typeof t=="object",F=t=>t===null||typeof t!="object"?!1:V()!==null&&W()!==null&&V()in t&&W()in t;function ue(t){if(!t)return z(a())?"":a()!==null&&a()!==void 0?a():"";if(K(t))return t;if(D(t)&&F(t))return String(t[W()])}function nt(t){return t.find(s=>{if(K(s))return s===a();if(D(s)&&F(s))return s[V()]===a()})}const lt=t=>{if(K(t)&&(z(a())?a().includes(t)?a(a().filter(s=>s!==t)):a([...a(),t]):a(t)),D(t)&&F(t)){const s=String(t[V()]);z(a())?a().includes(s)?a(a().filter(m=>m!==s)):a([...a(),s]):a(s)}},it=t=>{lt(t),e.onchange===null||e.onchange===void 0||e.onchange(t),_()||de()},st=t=>{z(a())&&a(a().filter(s=>s!==t))},ot=()=>{!_()||!z(a())||a(r(oe).map(t=>{if(D(t)&&F(t))return String(t[V()]);if(K(t))return t}))},dt=()=>{a([])},Oe=()=>{const t=r(se).querySelector('li[role="option"]:not([aria-disabled="true"])');t&&requestAnimationFrame(()=>t.focus())},ut=t=>{switch(t.stopPropagation(),t.key){case"Escape":ze();break;case"ArrowDown":R(),Oe();break;case"Enter":R(),Oe();break}},ct=t=>{t.stopPropagation(),R()},ft=t=>{t.stopPropagation(),v()||me(H(),!0),p(S,t.currentTarget.value,!0),p(ie,r(S),!0),e.oninput===null||e.oninput===void 0||e.oninput(r(S))};function vt(t,s){return s.filter(m=>{if(K(m))return m.toLowerCase().includes(t.toLowerCase());if(D(m)&&F(m))return String(m[W()]).toLowerCase().includes(t.toLowerCase())})}const gt=t=>{t.stopPropagation(),v()||R()},mt=(t,s)=>{if(D(t)){const m=String(t[V()]);return z(s)?s.includes(m):s===m}else if(K(t))return z(s)?s.includes(t):s===t;return!1};Et(B,{get open(){return H()},onclose:rt,children:(t,s)=>{var m=Yt(),ce=P(m),Ae=T(ce);Kt(Ae,{get hidden(){return Q()},get required(){return re()},get label(){return e.label},get for(){return e.id}});var fe=L(Ae,2),Ie=T(fe);{var bt=l=>{be(l,{class:"ml-2 shrink-0",get name(){return U()}})};h(Ie,l=>{U()&&l(bt)})}var Z=L(Ie,2),Pe=T(Z);{var ht=l=>{var o=te(),g=P(o);{var y=d=>{var b=Nt(),C=P(b);Ee(C,17,()=>a().slice(0,ne()),He,(f,w)=>{Dt(f,{get removeButtonLabel(){return Ye()},$$events:{remove:()=>st(r(w))},children:(k,$)=>{he();var ee=_e();q(()=>G(ee,r(w))),c(k,ee)},$$slots:{default:!0}})});var i=L(C,2);{var u=f=>{var w=Ft(),k=T(w);M(w),q($=>G(k,`+${$??""}`),[()=>a().slice(ne()).length]),c(f,w)};h(i,f=>{a().length>ne()&&f(u)})}c(d,b)},O=d=>{Vt(d,{children:(b,C)=>{he();var i=_e();q(u=>G(i,u),[()=>Ze()(a().length)]),c(b,i)},$$slots:{default:!0}})};h(g,d=>{Ue()?d(y):d(O,!1)})}c(l,o)};h(Pe,l=>{_()&&z(a())&&a().length>0&&l(ht)})}var ve=L(Pe,2);St(ve);let Te;At(ve,l=>p(x,l),()=>r(x)),M(Z);var Me=L(Z,2);{var _t=l=>{var o=Gt(),g=T(o);{var y=d=>{je(d,{get text(){return X()},right:!0,children:(b,C)=>{var i=te(),u=P(i);qe(u,()=>e.action),c(b,i)},$$slots:{default:!0}})},O=d=>{var b=te(),C=P(b);qe(C,()=>e.action),c(d,b)};h(g,d=>{X()?d(y):d(O,!1)})}M(o),c(l,o)},xt=(l,o)=>{{var g=y=>{var O=Jt(),d=T(O);{var b=i=>{je(i,{get text(){return X()},right:!0,children:(u,f)=>{Be(u,{variant:"ghost",size:"xs",get href(){return le()},get disabled(){return Ce()},leadingIcon:"external-link"})},$$slots:{default:!0}})},C=i=>{Be(i,{variant:"ghost",size:"xs",get href(){return le()},get disabled(){return Ce()},leadingIcon:"external-link"})};h(d,i=>{X()?i(b):i(C,!1)})}M(O),c(y,O)};h(l,y=>{le()&&y(g)},o)}};h(Me,l=>{e.action?l(_t):l(xt,!1)})}var yt=L(Me,2);{var wt=l=>{var o=Qt();o.__click=[Rt,v,H,ze,R];var g=T(o);const y=A(()=>J("transition-transform duration-200",v()&&"rotate-180",!v()&&"rotate-0"));be(g,{name:"chevron-down",get class(){return r(y)}}),M(o),q(()=>Ot(o,"aria-label",v()?"Close options":"Open options")),c(l,o)};h(yt,l=>{Je()&&l(wt)})}M(fe),M(ce);var Ve=L(ce,2);Ht(Ve,{get keepOpen(){return _()},get id(){return`${e.id??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return Qe()},get menuElement(){return r(se)},set menuElement(l){p(se,l,!0)},children:(l,o)=>{var g=Wt(),y=P(g);{var O=i=>{var u=Ut(),f=P(u);const w=A(()=>a().length===e.options.length);N(f,{get disabled(){return r(w)},onclick:ot,get label(){return We()}});var k=L(f,2);const $=A(()=>a().length===0);N(k,{get disabled(){return r($)},onclick:dt,get label(){return Xe()}});var ee=L(k,2);Bt(ee),c(i,u)};h(y,i=>{_()&&z(a())&&i(O)})}var d=L(y,2);Ee(d,17,()=>r(oe),He,(i,u)=>{const f=A(()=>mt(r(u),a())),w=A(()=>ue(r(u)));N(i,{onclick:()=>it(r(u)),get selected(){return r(f)},get label(){return r(w)},get class(){return et()}})},i=>{var u=te(),f=P(u);{var w=k=>{N(k,{disabled:!0,get label(){return e.noResultsText}})};h(f,k=>{ke()===!1&&k(w)})}c(i,u)});var b=L(d,2);{var C=i=>{N(i,{disabled:!0,get label(){return $e()},leading:f=>{be(f,{name:"spinner",class:"animate-spin"})},$$slots:{leading:!0}})};h(b,i=>{ke()&&i(C)})}c(l,g)},$$slots:{default:!0}});var Lt=L(Ve,2);{var Ct=l=>{var o=Xt(),g=T(o,!0);M(o),q(()=>G(g,we())),c(l,o)};h(Lt,l=>{we()&&!Le()&&l(Ct)})}q((l,o,g)=>{De(fe,1,l,"svelte-8zxxzt"),De(Z,1,o,"svelte-8zxxzt"),Te=zt(ve,Te,{id:e.id,placeholder:Ne(),required:re(),readonly:Ge(),disabled:ae(),type:"text",value:r(S),class:g,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${e.id??""}-listbox`,"aria-expanded":v(),"aria-required":re(),"aria-autocomplete":"list",onfocus:ct,oninput:ft,onkeydown:ut,onclick:gt,"data-testid":tt(),...at},"svelte-8zxxzt")},[()=>Ke(J(jt({variant:Se()}),!Le()&&Se()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",ae()&&"opacity-50",e.class)),()=>Ke(J("input-wrapper",_()&&"gap-1",_()&&"m-1",U()&&_()&&"ml-2")),()=>J("combobox-input",_()?a().length>0||U()?"indent-0":"indent-1":"indent-2",e.class)]),c(t,m)},$$slots:{default:!0}}),Fe(),E()}kt(["click"]);export{ba as C};
