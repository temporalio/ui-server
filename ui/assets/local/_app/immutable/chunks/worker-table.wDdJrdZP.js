import{s as ue,e as w,t as O,a as P,b as k,d as T,f as F,h as D,g as c,j as $,k as _,l as g,c as ee,n as J,x as te,y as pe,v as M}from"./scheduler.IHo1m08M.js";import{S as fe,i as me,c as L,a as S,m as Y,t as H,b as V,d as j,g as se,e as le}from"./index.uEw0cz3N.js";import{e as ae}from"./each.Z6OXf_o8.js";import{B as de}from"./badge.nXN9BZbm.js";import{E as _e}from"./empty-state.Z6IKk8N3.js";import{T as $e,a as he}from"./table-header-row.sYVXHC5F.js";import{T as we}from"./table-row.IPqPT-c9.js";import{t as C}from"./translate.HrioCK44.js";import"./auth-user.G1HN5Ov8.js";import"./toaster.y-9iO7N6.js";import"./paths.X-KxDb9I.js";import"./entry.ZPUnEpKF.js";import{t as ke,r as Te,f as re}from"./time-format.MHGWBFVS.js";import{I as ge}from"./icon.CXCYK_-s.js";function ve(u){let e,l;return e=new ge({props:{name:u[0]?"checkmark":"close",class:"m-auto "+(u[0]?"text-blue-700":"text-primary"),title:u[0]?C("common.yes"):C("common.no")}}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,[s]){const r={};s&1&&(r.name=t[0]?"checkmark":"close"),s&1&&(r.class="m-auto "+(t[0]?"text-blue-700":"text-primary")),s&1&&(r.title=t[0]?C("common.yes"):C("common.no")),e.$set(r)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function be(u,e,l){let{includesTaskQueueType:t}=e;return u.$$set=s=>{"includesTaskQueueType"in s&&l(0,t=s.includesTaskQueueType)},[t]}class oe extends fe{constructor(e){super(),me(this,e,be,ve,ue,{includesTaskQueueType:0})}}function ne(u,e,l){const t=u.slice();return t[3]=e[l],t}function Ee(u){var t,s;let e=(((s=(t=u[0])==null?void 0:t.pollers)==null?void 0:s.length)||0)+"",l;return{c(){l=O(e)},l(r){l=F(r,e)},m(r,a){_(r,l,a)},p(r,a){var f,n;a&1&&e!==(e=(((n=(f=r[0])==null?void 0:f.pollers)==null?void 0:n.length)||0)+"")&&J(l,e)},d(r){r&&c(l)}}}function ce(u){let e,l,t,s,r;return t=new _e({props:{title:C("workflows.workers-empty-state")}}),{c(){e=w("tr"),l=w("td"),L(t.$$.fragment),s=P(),this.h()},l(a){e=k(a,"TR",{class:!0});var f=T(e);l=k(f,"TD",{colspan:!0});var n=T(l);S(t.$$.fragment,n),n.forEach(c),s=D(f),f.forEach(c),this.h()},h(){$(l,"colspan",6),$(e,"class","w-full")},m(a,f){_(a,e,f),g(e,l),Y(t,l,null),g(e,s),r=!0},p:M,i(a){r||(H(t.$$.fragment,a),r=!0)},o(a){V(t.$$.fragment,a),r=!1},d(a){a&&c(e),j(t)}}}function ye(u){var b,z;let e,l,t=u[3].identity+"",s,r,a,f,n=(((z=(b=u[3])==null?void 0:b.workerVersionCapabilities)==null?void 0:z.buildId)??"")+"",o,p,m,v,y=re(u[3].lastAccessTime,u[1],{relative:u[2]})+"",W,q,x,Q,I,E,A,B,d;return Q=new oe({props:{includesTaskQueueType:u[3].taskQueueTypes.includes("WORKFLOW")}}),A=new oe({props:{includesTaskQueueType:u[3].taskQueueTypes.includes("ACTIVITY")}}),{c(){e=w("td"),l=w("p"),s=O(t),r=P(),a=w("td"),f=w("p"),o=O(n),p=P(),m=w("td"),v=w("p"),W=O(y),q=P(),x=w("td"),L(Q.$$.fragment),I=P(),E=w("td"),L(A.$$.fragment),B=P(),this.h()},l(i){e=k(i,"TD",{class:!0,"data-testid":!0});var h=T(e);l=k(h,"P",{class:!0});var N=T(l);s=F(N,t),N.forEach(c),h.forEach(c),r=D(i),a=k(i,"TD",{class:!0,"data-testid":!0});var R=T(a);f=k(R,"P",{class:!0});var K=T(f);o=F(K,n),K.forEach(c),R.forEach(c),p=D(i),m=k(i,"TD",{class:!0,"data-testid":!0});var G=T(m);v=k(G,"P",{class:!0});var U=T(v);W=F(U,y),U.forEach(c),G.forEach(c),q=D(i),x=k(i,"TD",{"data-testid":!0});var X=T(x);S(Q.$$.fragment,X),X.forEach(c),I=D(i),E=k(i,"TD",{"data-testid":!0});var Z=T(E);S(A.$$.fragment,Z),Z.forEach(c),B=D(i),this.h()},h(){$(l,"class","select-all"),$(e,"class","text-left"),$(e,"data-testid","worker-identity"),$(f,"class","select-all break-all"),$(a,"class","text-left"),$(a,"data-testid","worker-build-id"),$(v,"class","select-all"),$(m,"class","text-left"),$(m,"data-testid","worker-last-access-time"),$(x,"data-testid","workflow-poller"),$(E,"data-testid","activity-poller")},m(i,h){_(i,e,h),g(e,l),g(l,s),_(i,r,h),_(i,a,h),g(a,f),g(f,o),_(i,p,h),_(i,m,h),g(m,v),g(v,W),_(i,q,h),_(i,x,h),Y(Q,x,null),_(i,I,h),_(i,E,h),Y(A,E,null),_(i,B,h),d=!0},p(i,h){var K,G;(!d||h&1)&&t!==(t=i[3].identity+"")&&J(s,t),(!d||h&1)&&n!==(n=(((G=(K=i[3])==null?void 0:K.workerVersionCapabilities)==null?void 0:G.buildId)??"")+"")&&J(o,n),(!d||h&7)&&y!==(y=re(i[3].lastAccessTime,i[1],{relative:i[2]})+"")&&J(W,y);const N={};h&1&&(N.includesTaskQueueType=i[3].taskQueueTypes.includes("WORKFLOW")),Q.$set(N);const R={};h&1&&(R.includesTaskQueueType=i[3].taskQueueTypes.includes("ACTIVITY")),A.$set(R)},i(i){d||(H(Q.$$.fragment,i),H(A.$$.fragment,i),d=!0)},o(i){V(Q.$$.fragment,i),V(A.$$.fragment,i),d=!1},d(i){i&&(c(e),c(r),c(a),c(p),c(m),c(q),c(x),c(I),c(E),c(B)),j(Q),j(A)}}}function ie(u){let e,l;return e=new we({props:{"data-testid":"worker-row",$$slots:{default:[ye]},$$scope:{ctx:u}}}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const r={};s&71&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function Qe(u){var f;let e,l,t=ae((f=u[0])==null?void 0:f.pollers),s=[];for(let n=0;n<t.length;n+=1)s[n]=ie(ne(u,t,n));const r=n=>V(s[n],1,1,()=>{s[n]=null});let a=null;return t.length||(a=ce()),{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=te(),a&&a.c()},l(n){for(let o=0;o<s.length;o+=1)s[o].l(n);e=te(),a&&a.l(n)},m(n,o){for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(n,o);_(n,e,o),a&&a.m(n,o),l=!0},p(n,o){var p;if(o&7){t=ae((p=n[0])==null?void 0:p.pollers);let m;for(m=0;m<t.length;m+=1){const v=ne(n,t,m);s[m]?(s[m].p(v,o),H(s[m],1)):(s[m]=ie(v),s[m].c(),H(s[m],1),s[m].m(e.parentNode,e))}for(se(),m=t.length;m<s.length;m+=1)r(m);le(),!t.length&&a?a.p(n,o):t.length?a&&(se(),V(a,1,1,()=>{a=null}),le()):(a=ce(),a.c(),H(a,1),a.m(e.parentNode,e))}},i(n){if(!l){for(let o=0;o<t.length;o+=1)H(s[o]);l=!0}},o(n){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)V(s[o]);l=!1},d(n){n&&c(e),pe(s,n),a&&a.d(n)}}}function Ie(u){let e,l=C("workflows.workers-tab")+"",t;return{c(){e=w("caption"),t=O(l),this.h()},l(s){e=k(s,"CAPTION",{class:!0,slot:!0});var r=T(e);t=F(r,l),r.forEach(c),this.h()},h(){$(e,"class","sr-only"),$(e,"slot","caption")},m(s,r){_(s,e,r),g(e,t)},p:M,d(s){s&&c(e)}}}function Pe(u){let e,l=C("common.id")+"",t,s,r,a=C("workers.buildId")+"",f,n,o,p=C("workflows.last-accessed")+"",m,v,y,W,q=C("workflows.workflow-task-handler")+"",x,Q,I,E,A=C("workflows.activity-handler")+"",B;return{c(){e=w("th"),t=O(l),s=P(),r=w("th"),f=O(a),n=P(),o=w("th"),m=O(p),v=P(),y=w("th"),W=w("p"),x=O(q),Q=P(),I=w("th"),E=w("p"),B=O(A),this.h()},l(d){e=k(d,"TH",{class:!0});var b=T(e);t=F(b,l),b.forEach(c),s=D(d),r=k(d,"TH",{class:!0});var z=T(r);f=F(z,a),z.forEach(c),n=D(d),o=k(d,"TH",{class:!0});var i=T(o);m=F(i,p),i.forEach(c),v=D(d),y=k(d,"TH",{class:!0});var h=T(y);W=k(h,"P",{class:!0});var N=T(W);x=F(N,q),N.forEach(c),h.forEach(c),Q=D(d),I=k(d,"TH",{class:!0});var R=T(I);E=k(R,"P",{class:!0});var K=T(E);B=F(K,A),K.forEach(c),R.forEach(c),this.h()},h(){$(e,"class","w-4/12"),$(r,"class","w-3/12"),$(o,"class","w-2/12"),$(W,"class","text-center"),$(y,"class","w-2/12"),$(E,"class","text-center"),$(I,"class","w-2/12 text-center")},m(d,b){_(d,e,b),g(e,t),_(d,s,b),_(d,r,b),g(r,f),_(d,n,b),_(d,o,b),g(o,m),_(d,v,b),_(d,y,b),g(y,W),g(W,x),_(d,Q,b),_(d,I,b),g(I,E),g(E,B)},p:M,d(d){d&&(c(e),c(s),c(r),c(n),c(o),c(v),c(y),c(Q),c(I))}}}function De(u){let e,l;return e=new he({props:{slot:"headers",$$slots:{default:[Pe]},$$scope:{ctx:u}}}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const r={};s&64&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function Ce(u){let e,l=C("workers.workers")+"",t,s,r,a,f,n;return r=new de({props:{type:"count",class:"rounded-sm",$$slots:{default:[Ee]},$$scope:{ctx:u}}}),f=new $e({props:{class:"mb-6 w-full min-w-[600px] table-fixed",$$slots:{headers:[De],caption:[Ie],default:[Qe]},$$scope:{ctx:u}}}),{c(){e=w("h2"),t=O(l),s=P(),L(r.$$.fragment),a=P(),L(f.$$.fragment),this.h()},l(o){e=k(o,"H2",{class:!0,"data-testid":!0});var p=T(e);t=F(p,l),s=D(p),S(r.$$.fragment,p),p.forEach(c),a=D(o),S(f.$$.fragment,o),this.h()},h(){$(e,"class","flex items-center gap-2 text-base font-medium"),$(e,"data-testid","workers")},m(o,p){_(o,e,p),g(e,t),g(e,s),Y(r,e,null),_(o,a,p),Y(f,o,p),n=!0},p(o,[p]){const m={};p&65&&(m.$$scope={dirty:p,ctx:o}),r.$set(m);const v={};p&71&&(v.$$scope={dirty:p,ctx:o}),f.$set(v)},i(o){n||(H(r.$$.fragment,o),H(f.$$.fragment,o),n=!0)},o(o){V(r.$$.fragment,o),V(f.$$.fragment,o),n=!1},d(o){o&&(c(e),c(a)),j(r),j(f,o)}}}function He(u,e,l){let t,s;ee(u,ke,a=>l(1,t=a)),ee(u,Te,a=>l(2,s=a));let{workers:r}=e;return u.$$set=a=>{"workers"in a&&l(0,r=a.workers)},[r,t,s]}class qe extends fe{constructor(e){super(),me(this,e,He,Ce,ue,{workers:0})}}export{oe as P,qe as W};
