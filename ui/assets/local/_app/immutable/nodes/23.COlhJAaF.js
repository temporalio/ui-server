import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as J,t as D,i as e,r as t,c as r,j as E,o as O,e as I,b as K,n as pe,k as ve,g as a,u as U,aJ as te,h as we,f as re,m as oe,s as V,l as ne,a as ze}from"../chunks/DOHD4F2H.js";import{i as X}from"../chunks/DX2YhGcN.js";import{p as W,a as H,s as Y,c as Te}from"../chunks/CgvkIcHY.js";import{p as je}from"../chunks/B-B77sFQ.js";import{P as Re}from"../chunks/DF9GLY19.js";import{t as u}from"../chunks/BXv1jDVW.js";import{s as o}from"../chunks/iKtCZmbp.js";import{a as Pe}from"../chunks/nKAPFlJB.js";import{k as Ce}from"../chunks/CcfqsO14.js";import{f as le,t as Ie,r as Oe}from"../chunks/BDFbSVAj.js";import{i as Fe}from"../chunks/4jpKiR-7.js";import{c as Be}from"../chunks/BsnfN2fh.js";import{B as Ne}from"../chunks/DNNN8brD.js";import{T as Ae}from"../chunks/asConXZ9.js";import{T as Se}from"../chunks/DDAbZD-1.js";import{a as se,d as Ue}from"../chunks/BFJaCs5E.js";import{d as ae,s as De}from"../chunks/BhNSfKsb.js";import{C as ce}from"../chunks/BbX9Dj4u.js";import{L as Le}from"../chunks/CMqSCarD.js";import{s as qe}from"../chunks/9YCTf7pV.js";var Ee=D('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div></div>');function He(T,c){J(c,!1);const[b,y]=Y(),p=()=>H(Ie,"$timeFormat",b),s=()=>H(Oe,"$relativeTime",b);let v=W(c,"operation",8);X();var i=Ee(),f=e(i),g=e(f,!0);t(f);var m=r(f,2),_=e(m),x=e(_,!0);t(_);var k=r(_,2),j=e(k,!0);t(k),t(m);var w=r(m,2),n=e(w),R=e(n,!0);t(n);var $=r(n,2),l=e($,!0);t($),t(w);var d=r(w,2),h=e(d),P=e(h,!0);t(h);var C=r(h,2),F=e(C,!0);t(C),t(d);var z=r(d,2),B=e(z),M=e(B,!0);t(B);var L=r(B,2),Z=e(L,!0);t(L),t(z);var N=r(z,2),A=e(N),S=e(A,!0);t(A);var G=r(A,2),ee=e(G,!0);t(G),t(N);var Q=r(N,2),q=e(Q),de=e(q,!0);t(q);var ie=r(q,2),ue=e(ie,!0);t(ie),t(Q),t(i),E((fe,me,_e,he,be,ge,xe,$e,ye,ke)=>{o(g,fe),o(x,me),o(j,v().operationType),o(R,_e),o(l,v().identity),o(P,he),o(F,v().reason),o(M,be),o(Z,ge),o(S,xe),o(ee,$e),o(de,ye),o(ue,ke)},[()=>u("batch.details"),()=>u("batch.operation-type"),()=>u("batch.identity"),()=>u("common.reason"),()=>u("common.start-time"),()=>le(v().startTime,p(),{relative:s()}),()=>u("common.close-time"),()=>le(v().closeTime,p(),{relative:s()}),()=>u("batch.total-operations"),()=>Intl.NumberFormat("en-US").format(v().totalOperationCount)],O),I(T,i),K(),y()}var Je=D('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function Ke(T,c){J(c,!1);const[b,y]=Y(),p=()=>H(se,"$autoRefresh",b);let s=W(c,"operation",8);const v=Be(),i=l=>{const{checked:d}=l.target;v("toggleAutoRefresh",{checked:d}),Te(se,d)},f={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};X();var g=Je(),m=e(g),_=e(m),x=e(_),k=e(x,!0);t(x);var j=r(x,2);Ne(j,{get type(){return f[s().state]},children:(l,d)=>{pe();var h=ve();E(()=>o(h,s().state)),I(l,h)},$$slots:{default:!0}}),t(_);var w=r(_,2),n=e(w,!0);t(w),t(m);var R=r(m,2);{var $=l=>{const d=O(()=>u("common.auto-refresh-tooltip",{interval:"5"}));Se(l,{top:!0,get text(){return a(d)},children:(h,P)=>{const C=O(()=>u("common.auto-refresh"));Ae(h,{id:"batch-operation-auto-refresh",get label(){return a(C)},labelPosition:"left",get checked(){return p()},$$events:{change:i}})},$$slots:{default:!0}})};Fe(R,l=>{s().state==="Running"&&l($)})}t(g),E(l=>{o(k,l),o(n,s().jobId)},[()=>u("batch.describe-page-title")],O),I(T,g),K(),y()}var Me=D('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class="text-xs font-semibold text-success"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function Ge(T,c){J(c,!0);let b=U(()=>te(c.operation.completeOperationCount,0)),y=U(()=>te(c.operation.failureOperationCount,0)),p=U(()=>te(c.operation.totalOperationCount,0));const s=(N,A)=>{const S=Math.round(N/A*100);return isNaN(S)?0:S};let v=U(()=>s(a(b),a(p))),i=U(()=>s(a(y),a(p))),f=U(()=>s(a(b)+a(y),a(p)));var g=Me(),m=e(g),_=e(m,!0);t(m);var x=r(m,2),k=e(x),j=e(k),w=e(j,!0);t(j);var n=r(j,2),R=e(n);t(n),t(k);var $=r(k,2),l=e($);t($),t(x);var d=r(x,2),h=e(d),P=e(h),C=e(P,!0);t(P);var F=r(P,2);let z;var B=e(F,!0);t(F),t(h);var M=r(h,2),L=e(M),Z=r(L,2);t(M),t(d),t(g),E((N,A,S,G,ee,Q,q)=>{o(_,N),o(w,A),o(R,`${S??""} / ${G??""}`),ae(l,`width:${a(f)??""}%;`),o(C,ee),z=De(F,1,"text-xs font-semibold",null,z,Q),o(B,q),ae(L,`width:${a(v)??""}%;`),ae(Z,`width:${a(i)??""}%;`)},[()=>u("batch.results"),()=>u("batch.operations-progress",{percent:a(f)}),()=>Intl.NumberFormat("en-US").format(a(b)),()=>Intl.NumberFormat("en-US").format(a(p)),()=>u("batch.operations-succeeded",{count:a(b)}),()=>({"text-red-700":a(i)>0}),()=>u("batch.operations-failed",{count:a(y)})]),I(T,g),K()}var Qe=D("<!> <!> <!>",1),Ve=D('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function We(T,c){J(c,!1);const[b,y]=Y(),p=()=>H(se,"$autoRefresh",b);let s=W(c,"namespace",8),v=W(c,"jobId",8),i=oe(0),f;const g=n=>{n.detail.checked?V(i,a(i)+1):f&&window.clearTimeout(f)},m=()=>Ue({jobId:v(),namespace:s()}).then(n=>(p()&&n.state==="Running"&&(f=window.setTimeout(()=>{V(i,a(i)+1)},5e3)),n));X();var _=Ve(),x=e(_),k=e(x);const j=O(()=>qe({namespace:s()}));Le(k,{get href(){return a(j)},icon:"chevron-left",children:(n,R)=>{pe();var $=ve();E(l=>o($,l),[()=>u("batch.back-link")],O),I(n,$)},$$slots:{default:!0}}),t(x);var w=r(x,2);Ce(w,()=>a(i),n=>{var R=we(),$=re(R);Pe($,m,null,(l,d)=>{var h=Qe(),P=re(h);Ke(P,{get operation(){return a(d)},$$events:{toggleAutoRefresh:g}});var C=r(P,2);ce(C,{children:(z,B)=>{He(z,{get operation(){return a(d)}})},$$slots:{default:!0}});var F=r(C,2);ce(F,{children:(z,B)=>{Ge(z,{get operation(){return a(d)}})},$$slots:{default:!0}}),I(l,h)}),I(n,R)}),t(_),I(T,_),K(),y()}var Xe=D("<!> <!>",1);function xt(T,c){J(c,!1);const[b,y]=Y(),p=()=>H(je,"$page",b),s=oe(),v=oe();ne(()=>p(),()=>{V(s,p().params.namespace)}),ne(()=>p(),()=>{V(v,p().params.jobId)}),ze(),X();var i=Xe(),f=re(i);const g=O(()=>u("batch.describe-page-title")),m=O(()=>a(v));Re(f,{get title(){return`${a(g)??""} | ${a(m)??""}`}});var _=r(f,2);We(_,{get jobId(){return a(v)},get namespace(){return a(s)}}),I(T,i),K(),y()}export{xt as component};
