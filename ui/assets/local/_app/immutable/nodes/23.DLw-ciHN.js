import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as G,t as N,h as e,r as t,c as a,i as E,j as O,d as C,b as J,n as ne,k as le,g as s,l as ee,s as S,m as M,ac as ke,a as pe,e as we,f as te}from"../chunks/CtXwlho8.js";import{i as Q}from"../chunks/D4D3ThYu.js";import{a as H,s as W,b as ze}from"../chunks/CI9zuxJp.js";import{p as Te}from"../chunks/CApUveYR.js";import{P as je}from"../chunks/BYpUB0sF.js";import{t as v}from"../chunks/D2OY9xdY.js";import{s as r}from"../chunks/BXc8M6y4.js";import{a as Re}from"../chunks/CHlFt2el.js";import{k as Ce}from"../chunks/CmcpgAEn.js";import{p as K}from"../chunks/DdhuX4yd.js";import{f as se,t as Oe,r as Pe}from"../chunks/cq7hwzrg.js";import{i as Ie}from"../chunks/yjFgoZ2z.js";import{c as Fe}from"../chunks/BBGlwGsK.js";import{B as Be}from"../chunks/Dvm4Bl2G.js";import{T as Ae}from"../chunks/Cfw4ovLt.js";import{T as Se}from"../chunks/DHeHXQSq.js";import{a as ae,d as Ue}from"../chunks/BRXx6hRT.js";import{d as Z,s as De}from"../chunks/CiDpyPci.js";import{C as ie}from"../chunks/uH6vHrjH.js";import{L as Me}from"../chunks/C1bW8zQ3.js";import{s as Ne}from"../chunks/BE9R_oLn.js";var Le=N('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div></div>');function qe(T,h){G(h,!1);const[d,k]=W(),u=()=>H(Oe,"$timeFormat",d),l=()=>H(Pe,"$relativeTime",d);let i=K(h,"operation",8);Q();var n=Le(),b=e(n),x=e(b,!0);t(b);var f=a(b,2),p=e(f),$=e(p,!0);t(p);var j=a(p,2),I=e(j,!0);t(j),t(f);var y=a(f,2),c=e(y),w=e(c,!0);t(c);var g=a(c,2),o=e(g,!0);t(g),t(y);var m=a(y,2),_=e(m),P=e(_,!0);t(_);var R=a(_,2),U=e(R,!0);t(R),t(m);var z=a(m,2),F=e(z),D=e(F,!0);t(F);var B=a(F,2),A=e(B,!0);t(B),t(z);var L=a(z,2),q=e(L),X=e(q,!0);t(q);var V=a(q,2),ce=e(V,!0);t(V),t(L);var re=a(L,2),Y=e(re),ve=e(Y,!0);t(Y);var oe=a(Y,2),de=e(oe,!0);t(oe),t(re),t(n),E((ue,fe,me,_e,he,be,xe,ge,$e,ye)=>{r(x,ue),r($,fe),r(I,i().operationType),r(w,me),r(o,i().identity),r(P,_e),r(U,i().reason),r(D,he),r(A,be),r(X,xe),r(ce,ge),r(ve,$e),r(de,ye)},[()=>v("batch.details"),()=>v("batch.operation-type"),()=>v("batch.identity"),()=>v("common.reason"),()=>v("common.start-time"),()=>se(i().startTime,u(),{relative:l()}),()=>v("common.close-time"),()=>se(i().closeTime,u(),{relative:l()}),()=>v("batch.total-operations"),()=>Intl.NumberFormat("en-US").format(i().totalOperationCount)],O),C(T,n),J(),k()}var Ee=N('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function He(T,h){G(h,!1);const[d,k]=W(),u=()=>H(ae,"$autoRefresh",d);let l=K(h,"operation",8);const i=Fe(),n=o=>{const{checked:m}=o.target;i("toggleAutoRefresh",{checked:m}),ze(ae,m)},b={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};Q();var x=Ee(),f=e(x),p=e(f),$=e(p),j=e($,!0);t($);var I=a($,2);Be(I,{get type(){return b[l().state]},children:(o,m)=>{ne();var _=le();E(()=>r(_,l().state)),C(o,_)},$$slots:{default:!0}}),t(p);var y=a(p,2),c=e(y,!0);t(y),t(f);var w=a(f,2);{var g=o=>{const m=O(()=>v("common.auto-refresh-tooltip",{interval:"5"}));Se(o,{top:!0,get text(){return s(m)},children:(_,P)=>{const R=O(()=>v("common.auto-refresh"));Ae(_,{id:"batch-operation-auto-refresh",get label(){return s(R)},labelPosition:"left",get checked(){return u()},$$events:{change:n}})},$$slots:{default:!0}})};Ie(w,o=>{l().state==="Running"&&o(g)})}t(x),E(o=>{r(j,o),r(c,l().jobId)},[()=>v("batch.describe-page-title")],O),C(T,x),J(),k()}var Ke=N('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class=" text-xs font-semibold text-green-700"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function Ge(T,h){G(h,!1);let d=K(h,"operation",8),k=M(),u=M(),l=M();ee(()=>ke(d()),()=>{const{completeOperationCount:D,failureOperationCount:B,totalOperationCount:A}=d();S(k,Math.round(D/A*100)),S(u,Math.round(B/A*100)),S(l,Math.round((D+B)/A*100))}),pe(),Q();var i=Ke(),n=e(i),b=e(n,!0);t(n);var x=a(n,2),f=e(x),p=e(f),$=e(p,!0);t(p);var j=a(p,2),I=e(j);t(j),t(f);var y=a(f,2),c=e(y);t(y),t(x);var w=a(x,2),g=e(w),o=e(g),m=e(o,!0);t(o);var _=a(o,2);let P;var R=e(_,!0);t(_),t(g);var U=a(g,2),z=e(U),F=a(z,2);t(U),t(w),t(i),E((D,B,A,L,q,X,V)=>{r(b,D),r($,B),r(I,`${A??""} / ${L??""}`),Z(c,`width:${s(l)??""}%;`),r(m,q),P=De(_,1," text-xs font-semibold",null,P,X),r(R,V),Z(z,`width:${s(k)??""}%;`),Z(F,`width:${s(u)??""}%;`)},[()=>v("batch.results"),()=>v("batch.operations-progress",{percent:s(l)}),()=>Intl.NumberFormat("en-US").format(d().completeOperationCount),()=>Intl.NumberFormat("en-US").format(d().totalOperationCount),()=>v("batch.operations-succeeded",{count:d().completeOperationCount}),()=>({"text-red-700":s(u)>0}),()=>v("batch.operations-failed",{count:d().failureOperationCount})],O),C(T,i),J()}var Je=N("<!> <!> <!>",1),Qe=N('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function Ve(T,h){G(h,!1);const[d,k]=W(),u=()=>H(ae,"$autoRefresh",d);let l=K(h,"namespace",8),i=K(h,"jobId",8),n=M(0),b;const x=c=>{c.detail.checked?S(n,s(n)+1):b&&window.clearTimeout(b)},f=()=>Ue({jobId:i(),namespace:l()}).then(c=>(u()&&c.state==="Running"&&(b=window.setTimeout(()=>{S(n,s(n)+1)},5e3)),c));Q();var p=Qe(),$=e(p),j=e($);const I=O(()=>Ne({namespace:l()}));Me(j,{get href(){return s(I)},icon:"chevron-left",children:(c,w)=>{ne();var g=le();E(o=>r(g,o),[()=>v("batch.back-link")],O),C(c,g)},$$slots:{default:!0}}),t($);var y=a($,2);Ce(y,()=>s(n),c=>{var w=we(),g=te(w);Re(g,f,null,(o,m)=>{var _=Je(),P=te(_);He(P,{get operation(){return s(m)},$$events:{toggleAutoRefresh:x}});var R=a(P,2);ie(R,{children:(z,F)=>{qe(z,{get operation(){return s(m)}})},$$slots:{default:!0}});var U=a(R,2);ie(U,{children:(z,F)=>{Ge(z,{get operation(){return s(m)}})},$$slots:{default:!0}}),C(o,_)}),C(c,w)}),t(p),C(T,p),J(),k()}var We=N("<!> <!>",1);function gt(T,h){G(h,!1);const[d,k]=W(),u=()=>H(Te,"$page",d),l=M(),i=M();ee(()=>u(),()=>{S(l,u().params.namespace)}),ee(()=>u(),()=>{S(i,u().params.jobId)}),pe(),Q();var n=We(),b=te(n);const x=O(()=>v("batch.describe-page-title")),f=O(()=>s(i));je(b,{get title(){return`${s(x)??""} | ${s(f)??""}`}});var p=a(b,2);Ve(p,{get jobId(){return s(i)},get namespace(){return s(l)}}),C(T,n),J(),k()}export{gt as component};
