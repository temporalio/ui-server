import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as q,t as U,i as e,r as t,c as r,j as L,o as O,e as P,b as E,n as ce,k as pe,g as a,u as S,aI as Z,h as _e,f as te,m as ae,s as G,l as ie,a as he}from"../chunks/C-0kx8Rl.js";import{i as Q}from"../chunks/DFzl7kYA.js";import{p as J,s as oe,a as se,c as be}from"../chunks/B0Wc33k0.js";import{p as ge}from"../chunks/BvOM9nF1.js";import{P as xe}from"../chunks/DMOchDbk.js";import{t as d}from"../chunks/BXv1jDVW.js";import{s as o}from"../chunks/B-1TjF6E.js";import{a as $e}from"../chunks/D7Rg7Pz7.js";import{k as ye}from"../chunks/B0kvq5Du.js";import{T as ne}from"../chunks/D-7Yb9FW.js";import{i as ke}from"../chunks/DIXBMONz.js";import{c as we}from"../chunks/Dl-yZlXH.js";import{B as Te}from"../chunks/CqraL4jo.js";import{T as ze}from"../chunks/CnNMSvOi.js";import{T as je}from"../chunks/D7zMa2zU.js";import{a as re,d as Re}from"../chunks/BlnqYnAk.js";import{d as ee,a as Pe}from"../chunks/DliSAU7O.js";import{C as le}from"../chunks/WYfh_BGa.js";import{L as Ie}from"../chunks/i5Lal6P3.js";import{u as Ce}from"../chunks/Dgnp7I2O.js";var Oe=U('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <!></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <!></div> <div class="batch-operation-detail svelte-z5po3c"><p class="batch-operation-key svelte-z5po3c"> </p> <p class="batch-operation-value svelte-z5po3c"> </p></div></div>');function Be(j,p){q(p,!1);let i=J(p,"operation",8);Q();var b=Oe(),n=e(b),v=e(n,!0);t(n);var g=r(n,2),l=e(g),x=e(l,!0);t(l);var _=r(l,2),$=e(_,!0);t(_),t(g);var u=r(g,2),f=e(u),R=e(f,!0);t(f);var T=r(f,2),I=e(T,!0);t(T),t(u);var c=r(u,2),y=e(c),k=e(y,!0);t(y);var s=r(y,2),h=e(s,!0);t(s),t(c);var m=r(c,2),w=e(m),C=e(w,!0);t(w);var B=r(w,2);ne(B,{as:"p",class:"col-span-8",get dateTime(){return i().startTime}}),t(m);var z=r(m,2),F=e(z),H=e(F,!0);t(F);var K=r(F,2);ne(K,{as:"p",class:"col-span-8",get dateTime(){return i().startTime}}),t(z);var M=r(z,2),N=e(M),D=e(N,!0);t(N);var A=r(N,2),V=e(A,!0);t(A),t(M),t(b),L((W,X,Y,ve,de,ue,fe,me)=>{o(v,W),o(x,X),o($,i().operationType),o(R,Y),o(I,i().identity),o(k,ve),o(h,i().reason),o(C,de),o(H,ue),o(D,fe),o(V,me)},[()=>d("batch.details"),()=>d("batch.operation-type"),()=>d("batch.identity"),()=>d("common.reason"),()=>d("common.start-time"),()=>d("common.close-time"),()=>d("batch.total-operations"),()=>Intl.NumberFormat("en-US").format(i().totalOperationCount)],O),P(j,b),E()}var Fe=U('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function Ne(j,p){q(p,!1);const[i,b]=oe(),n=()=>se(re,"$autoRefresh",i);let v=J(p,"operation",8);const g=we(),l=s=>{const{checked:h}=s.target;g("toggleAutoRefresh",{checked:h}),be(re,h)},x={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};Q();var _=Fe(),$=e(_),u=e($),f=e(u),R=e(f,!0);t(f);var T=r(f,2);Te(T,{get type(){return x[v().state]},children:(s,h)=>{ce();var m=pe();L(()=>o(m,v().state)),P(s,m)},$$slots:{default:!0}}),t(u);var I=r(u,2),c=e(I,!0);t(I),t($);var y=r($,2);{var k=s=>{const h=O(()=>d("common.auto-refresh-tooltip",{interval:"5"}));je(s,{top:!0,get text(){return a(h)},children:(m,w)=>{const C=O(()=>d("common.auto-refresh"));ze(m,{id:"batch-operation-auto-refresh",get label(){return a(C)},labelPosition:"left",get checked(){return n()},$$events:{change:l}})},$$slots:{default:!0}})};ke(y,s=>{v().state==="Running"&&s(k)})}t(_),L(s=>{o(R,s),o(c,v().jobId)},[()=>d("batch.describe-page-title")],O),P(j,_),E(),b()}var Ae=U('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class="text-xs font-semibold text-success"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function Se(j,p){q(p,!0);let i=S(()=>Z(p.operation.completeOperationCount,0)),b=S(()=>Z(p.operation.failureOperationCount,0)),n=S(()=>Z(p.operation.totalOperationCount,0));const v=(N,D)=>{const A=Math.round(N/D*100);return isNaN(A)?0:A};let g=S(()=>v(a(i),a(n))),l=S(()=>v(a(b),a(n))),x=S(()=>v(a(i)+a(b),a(n)));var _=Ae(),$=e(_),u=e($,!0);t($);var f=r($,2),R=e(f),T=e(R),I=e(T,!0);t(T);var c=r(T,2),y=e(c);t(c),t(R);var k=r(R,2),s=e(k);t(k),t(f);var h=r(f,2),m=e(h),w=e(m),C=e(w,!0);t(w);var B=r(w,2);let z;var F=e(B,!0);t(B),t(m);var H=r(m,2),K=e(H),M=r(K,2);t(H),t(h),t(_),L((N,D,A,V,W,X,Y)=>{o(u,N),o(I,D),o(y,`${A??""} / ${V??""}`),ee(s,`width:${a(x)??""}%;`),o(C,W),z=Pe(B,1,"text-xs font-semibold",null,z,X),o(F,Y),ee(K,`width:${a(g)??""}%;`),ee(M,`width:${a(l)??""}%;`)},[()=>d("batch.results"),()=>d("batch.operations-progress",{percent:a(x)}),()=>Intl.NumberFormat("en-US").format(a(i)),()=>Intl.NumberFormat("en-US").format(a(n)),()=>d("batch.operations-succeeded",{count:a(i)}),()=>({"text-red-700":a(l)>0}),()=>d("batch.operations-failed",{count:a(b)})]),P(j,_),E()}var Ue=U("<!> <!> <!>",1),De=U('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function Le(j,p){q(p,!1);const[i,b]=oe(),n=()=>se(re,"$autoRefresh",i);let v=J(p,"namespace",8),g=J(p,"jobId",8),l=ae(0),x;const _=c=>{c.detail.checked?G(l,a(l)+1):x&&window.clearTimeout(x)},$=()=>Re({jobId:g(),namespace:v()}).then(c=>(n()&&c.state==="Running"&&(x=window.setTimeout(()=>{G(l,a(l)+1)},5e3)),c));Q();var u=De(),f=e(u),R=e(f);const T=O(()=>Ce({namespace:v()}));Ie(R,{get href(){return a(T)},icon:"chevron-left",children:(c,y)=>{ce();var k=pe();L(s=>o(k,s),[()=>d("batch.back-link")],O),P(c,k)},$$slots:{default:!0}}),t(f);var I=r(f,2);ye(I,()=>a(l),c=>{var y=_e(),k=te(y);$e(k,$,null,(s,h)=>{var m=Ue(),w=te(m);Ne(w,{get operation(){return a(h)},$$events:{toggleAutoRefresh:_}});var C=r(w,2);le(C,{children:(z,F)=>{Be(z,{get operation(){return a(h)}})},$$slots:{default:!0}});var B=r(C,2);le(B,{children:(z,F)=>{Se(z,{get operation(){return a(h)}})},$$slots:{default:!0}}),P(s,m)}),P(c,y)}),t(u),P(j,u),E(),b()}var qe=U("<!> <!>",1);function pt(j,p){q(p,!1);const[i,b]=oe(),n=()=>se(ge,"$page",i),v=ae(),g=ae();ie(()=>n(),()=>{G(v,n().params.namespace)}),ie(()=>n(),()=>{G(g,n().params.jobId)}),he(),Q();var l=qe(),x=te(l);const _=O(()=>d("batch.describe-page-title")),$=O(()=>a(g));xe(x,{get title(){return`${a(_)??""} | ${a($)??""}`}});var u=r(x,2);Le(u,{get jobId(){return a(g)},get namespace(){return a(v)}}),P(j,l),E(),b()}export{pt as component};
