import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as H,f as L,j as e,r as t,h as o,G as i,L as l,t as E,e as B,b as K,n as pe,k as de,g as a,o as G,u as U,aO as ee,i as be,c as ae,m as re,s as Q,l as le,a as xe}from"../chunks/CckrFwdx.js";import{i as W}from"../chunks/ebNgFJjp.js";import{p as V,s as oe,a as ie,c as $e}from"../chunks/BioCYJcK.js";import{p as ye}from"../chunks/BDmH61WB.js";import{P as ke}from"../chunks/CuqmI6m2.js";import{t as r}from"../chunks/DEjs8ZrU.js";import{s as v}from"../chunks/_IQD3yTx.js";import{a as we}from"../chunks/BAVlD7Ho.js";import{k as Te}from"../chunks/DLKvYI2j.js";import{T as ne}from"../chunks/DYFacKo_.js";import{c as je}from"../chunks/DsVF0eUi.js";import{i as Re}from"../chunks/CoMawi-e.js";import{B as Pe}from"../chunks/DlLJhG5Q.js";import{T as Oe}from"../chunks/D6vhWBUC.js";import{T as Ce}from"../chunks/Bf95Vmcc.js";import{a as se,d as Ie}from"../chunks/OMUBXkWk.js";import{e as te,a as Be}from"../chunks/CjYTZKiB.js";import{C as ce}from"../chunks/DFcCgIa_.js";import{L as Fe}from"../chunks/BjTXDc0n.js";import{u as ve}from"../chunks/DGYqaFe3.js";var Ne=L('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <!></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <!></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div></div>');function Ae(O,d){H(d,!1);let s=V(d,"operation",8);W();var b=Ne(),h=e(b),n=e(h,!0);t(h);var x=o(h,2),p=e(x),$=e(p,!0);t(p);var g=o(p,2),y=e(g,!0);t(g),t(x);var u=o(x,2),f=e(u),C=e(f,!0);t(f);var R=o(f,2),m=e(R,!0);t(R),t(u);var k=o(u,2),P=e(k),T=e(P,!0);t(P);var c=o(P,2),w=e(c,!0);t(c),t(k);var _=o(k,2),j=e(_),N=e(j,!0);t(j);var I=o(j,2);ne(I,{as:"p",class:"col-span-8",get dateTime(){return l(s()),i(()=>s().startTime)}}),t(_);var F=o(_,2),D=e(F),M=e(D,!0);t(D);var z=o(D,2);ne(z,{as:"p",class:"col-span-8",get dateTime(){return l(s()),i(()=>s().closeTime)}}),t(F);var J=o(F,2),A=e(J),q=e(A,!0);t(A);var S=o(A,2),X=e(S,!0);t(S),t(J),t(b),E((Y,Z,ue,fe,me,_e,he,ge)=>{v(n,Y),v($,Z),v(y,(l(s()),i(()=>s().operationType))),v(C,ue),v(m,(l(s()),i(()=>s().identity))),v(T,fe),v(w,(l(s()),i(()=>s().reason))),v(N,me),v(M,_e),v(q,he),v(X,ge)},[()=>(l(r),i(()=>r("batch.details"))),()=>(l(r),i(()=>r("batch.operation-type"))),()=>(l(r),i(()=>r("batch.identity"))),()=>(l(r),i(()=>r("common.reason"))),()=>(l(r),i(()=>r("common.start-time"))),()=>(l(r),i(()=>r("common.close-time"))),()=>(l(r),i(()=>r("batch.total-operations"))),()=>(l(s()),i(()=>Intl.NumberFormat("en-US").format(s().totalOperationCount)))]),B(O,b),K()}var Se=L('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function Ue(O,d){H(d,!1);const s=()=>ie(se,"$autoRefresh",b),[b,h]=oe();let n=V(d,"operation",8);const x=je(),p=c=>{const{checked:w}=c.target;x("toggleAutoRefresh",{checked:w}),$e(se,w)},$={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};W();var g=Se(),y=e(g),u=e(y),f=e(u),C=e(f,!0);t(f);var R=o(f,2);Pe(R,{get type(){return l(n()),i(()=>$[n().state])},children:(c,w)=>{pe();var _=de();E(()=>v(_,(l(n()),i(()=>n().state)))),B(c,_)},$$slots:{default:!0}}),t(u);var m=o(u,2),k=e(m,!0);t(m),t(y);var P=o(y,2);{var T=c=>{{let w=G(()=>(l(r),i(()=>r("common.auto-refresh-tooltip",{interval:"5"}))));Ce(c,{top:!0,get text(){return a(w)},children:(_,j)=>{{let N=G(()=>(l(r),i(()=>r("common.auto-refresh"))));Oe(_,{id:"batch-operation-auto-refresh",get label(){return a(N)},labelPosition:"left",get checked(){return s()},$$events:{change:p}})}},$$slots:{default:!0}})}};Re(P,c=>{l(n()),i(()=>n().state==="Running")&&c(T)})}t(g),E(c=>{v(C,c),v(k,(l(n()),i(()=>n().jobId)))},[()=>(l(r),i(()=>r("batch.describe-page-title")))]),B(O,g),K(),h()}var Le=L('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class="text-xs font-semibold text-success"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function De(O,d){H(d,!0);let s=U(()=>ee(d.operation.completeOperationCount,0)),b=U(()=>ee(d.operation.failureOperationCount,0)),h=U(()=>ee(d.operation.totalOperationCount,0));const n=(A,q)=>{const S=Math.round(A/q*100);return isNaN(S)?0:S};let x=U(()=>n(a(s),a(h))),p=U(()=>n(a(b),a(h))),$=U(()=>n(a(s)+a(b),a(h)));var g=Le(),y=e(g),u=e(y,!0);t(y);var f=o(y,2),C=e(f),R=e(C),m=e(R,!0);t(R);var k=o(R,2),P=e(k);t(k),t(C);var T=o(C,2),c=e(T);t(T),t(f);var w=o(f,2),_=e(w),j=e(_),N=e(j,!0);t(j);var I=o(j,2);let F;var D=e(I,!0);t(I),t(_);var M=o(_,2),z=e(M),J=o(z,2);t(M),t(w),t(g),E((A,q,S,X,Y,Z)=>{v(u,A),v(m,q),v(P,`${S??""} / ${X??""}`),te(c,`width:${a($)??""}%;`),v(N,Y),F=Be(I,1,"text-xs font-semibold",null,F,{"text-red-700":a(p)>0}),v(D,Z),te(z,`width:${a(x)??""}%;`),te(J,`width:${a(p)??""}%;`)},[()=>r("batch.results"),()=>r("batch.operations-progress",{percent:a($)}),()=>Intl.NumberFormat("en-US").format(a(s)),()=>Intl.NumberFormat("en-US").format(a(h)),()=>r("batch.operations-succeeded",{count:a(s)}),()=>r("batch.operations-failed",{count:a(b)})]),B(O,g),K()}var qe=L("<!> <!> <!>",1),Ee=L('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function Ge(O,d){H(d,!1);const s=()=>ie(se,"$autoRefresh",b),[b,h]=oe();let n=V(d,"namespace",8),x=V(d,"jobId",8),p=re(0),$;const g=m=>{m.detail.checked?Q(p,a(p)+1):$&&window.clearTimeout($)},y=()=>Ie({jobId:x(),namespace:n()}).then(m=>(s()&&m.state==="Running"&&($=window.setTimeout(()=>{Q(p,a(p)+1)},5e3)),m));W();var u=Ee(),f=e(u),C=e(f);{let m=G(()=>(l(ve),l(n()),i(()=>ve({namespace:n()}))));Fe(C,{get href(){return a(m)},icon:"chevron-left",children:(k,P)=>{pe();var T=de();E(c=>v(T,c),[()=>(l(r),i(()=>r("batch.back-link")))]),B(k,T)},$$slots:{default:!0}})}t(f);var R=o(f,2);Te(R,()=>a(p),m=>{var k=be(),P=ae(k);we(P,()=>i(y),null,(T,c)=>{var w=qe(),_=ae(w);Ue(_,{get operation(){return a(c)},$$events:{toggleAutoRefresh:g}});var j=o(_,2);ce(j,{children:(I,F)=>{Ae(I,{get operation(){return a(c)}})},$$slots:{default:!0}});var N=o(j,2);ce(N,{children:(I,F)=>{De(I,{get operation(){return a(c)}})},$$slots:{default:!0}}),B(T,w)}),B(m,k)}),t(u),B(O,u),K(),h()}var He=L("<!> <!>",1);function dt(O,d){H(d,!1);const s=()=>ie(ye,"$page",b),[b,h]=oe(),n=re(),x=re();le(()=>s(),()=>{Q(n,s().params.namespace)}),le(()=>s(),()=>{Q(x,s().params.jobId)}),xe(),W();var p=He(),$=ae(p);{let y=G(()=>(l(r),i(()=>r("batch.describe-page-title")))),u=G(()=>a(x));ke($,{get title(){return`${a(y)??""} | ${a(u)??""}`}})}var g=o($,2);Ge(g,{get jobId(){return a(x)},get namespace(){return a(n)}}),B(O,p),K(),h()}export{dt as component};
