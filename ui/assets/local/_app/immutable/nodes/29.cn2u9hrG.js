import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as ge,u as a,g as e,t as v,h as Pe,f as ve,e as r,r as n,b as xe,i,n as Y,k as R,j as x,c as P,ag as Se,s as he,q as Ie}from"../chunks/DtSMpxPp.js";import{i as Be}from"../chunks/DM92YGvC.js";import{s as Ve,a as me}from"../chunks/QkTQNHha.js";import{p as we}from"../chunks/BlUk2Ne-.js";import{P as Ce}from"../chunks/zuYibhCe.js";import{s as h}from"../chunks/ChP_J8fE.js";import{i as g}from"../chunks/BUX2ey9N.js";import{k as Fe}from"../chunks/CdG1RbPO.js";import{e as fe,i as be}from"../chunks/D_0FA0ti.js";import{p as Le}from"../chunks/BrPm6bd9.js";import{L as ye}from"../chunks/B43-P-3-.js";import{t as o}from"../chunks/BXv1jDVW.js";import{f as ue,r as We,t as Ae}from"../chunks/D8JWfvYP.js";import{g as ke}from"../chunks/CT3a8W8Y.js";import{h as Ee,m as je}from"../chunks/DSTUhGSE.js";import{D as _e}from"../chunks/Cfli4QCS.js";import{A as qe}from"../chunks/CLx-KzwV.js";import{B as Me}from"../chunks/CsMNScE5.js";import{E as ze}from"../chunks/M6xuF3LI.js";import{A as Ne}from"../chunks/COc46pc6.js";import{f as Qe}from"../chunks/_t-TPE_z.js";var Re=v('<td class="py-1 text-left"><!></td>'),Ge=v('<div class="flex items-center gap-2"> <!></div>'),He=v('<div class="flex items-center gap-2"> <!></div>'),Je=v('<td class="whitespace-pre-line break-words py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <div class="flex items-center gap-2"> <!></div></div></td>'),Ke=v("<p> </p>"),Oe=v("<p> </p>"),Ue=v('<td class="truncate py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <p><!></p></div></td>'),Xe=v('<td class="w-24 truncate py-1"><!></td>'),Ye=v("<tr></tr>");function Ze(Z,t){ge(t,!0);const[V,G]=Ve(),H=()=>me(we,"$page",V),D=()=>me(Ae,"$timeFormat",V),T=()=>me(We,"$relativeTime",V);var S,$,I,B,ee,te,re,oe,ae,_;const b=a(()=>($=(S=t.deployment===null||t.deployment===void 0?void 0:t.deployment.latestVersionSummary)===null||S===void 0?void 0:S.deploymentVersion)===null||$===void 0?void 0:$.buildId),l=a(()=>((B=(I=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||I===void 0?void 0:I.deploymentVersion)===null||B===void 0?void 0:B.buildId)||ke((ee=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||ee===void 0?void 0:ee.rampingVersion)),c=a(()=>((te=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||te===void 0?void 0:te.createTime)||((re=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||re===void 0?void 0:re.rampingVersionChangedTime)),u=a(()=>((ae=(oe=t.deployment===null||t.deployment===void 0?void 0:t.deployment.currentVersionSummary)===null||oe===void 0?void 0:oe.deploymentVersion)===null||ae===void 0?void 0:ae.buildId)||ke((_=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||_===void 0?void 0:_.currentVersion)),k=a(()=>e(b)!==e(l)&&e(b)!==e(u)),p=a(()=>e(u)!=="__unversioned__"),C=a(()=>e(p)?e(u):o("deployments.unversioned"));var J=Ye();fe(J,21,()=>t.columns,({label:q})=>q,(q,M)=>{let z=()=>e(M).label;var ne=Pe(),ie=ve(ne);{var De=K=>{var le=Re(),pe=i(le);const ce=a(()=>Ee({namespace:H().params.namespace,deployment:t.deployment.name}));ye(pe,{get href(){return e(ce)},children:(W,O)=>{Y();var N=R();x(()=>h(N,t.deployment.name)),r(W,N)},$$slots:{default:!0}}),n(le),r(K,le)},Te=(K,le)=>{{var pe=W=>{var O=Je(),N=i(O),de=i(N);{var A=m=>{var y=Ge(),w=i(y),Q=P(w);const d=a(()=>o("deployments.latest"));_e(Q,{status:"Latest",get label(){return e(d)}}),n(y),x(()=>h(w,`${e(b)??""} `)),r(m,y)};g(de,m=>{e(b)&&e(k)&&m(A)})}var E=P(de,2);{var U=m=>{var y=He(),w=i(y),Q=P(w);{var d=s=>{const f=a(()=>o("deployments.ramping-percentage",{percentage:t.deployment.routingConfig.rampingVersionPercentage}));_e(s,{status:"Ramping",get label(){return e(f)}})};g(Q,s=>{var f,L;(L=(f=t.deployment)==null?void 0:f.routingConfig)!=null&&L.rampingVersionPercentage&&s(d)})}n(y),x(()=>h(w,`${e(l)??""} `)),r(m,y)};g(E,m=>{e(l)&&m(U)})}var F=P(E,2),j=i(F),X=P(j);{var se=m=>{const y=a(()=>o("deployments.current"));_e(m,{status:"Current",get label(){return e(y)}})};g(X,m=>{e(p)&&m(se)})}n(F),n(N),n(O),x(()=>h(j,`${e(C)??""} `)),r(W,O)},ce=(W,O)=>{{var N=A=>{var E=Ue(),U=i(E),F=i(U);{var j=d=>{var s=Ke(),f=i(s,!0);n(s),x(L=>h(f,L),[()=>ue(t.deployment.latestVersionSummary.createTime,D(),{relative:T()})]),r(d,s)};g(F,d=>{var s;e(b)&&e(k)&&((s=t.deployment.latestVersionSummary)!=null&&s.createTime)&&d(j)})}var X=P(F,2);{var se=d=>{var s=Oe(),f=i(s,!0);n(s),x(L=>h(f,L),[()=>ue(e(c),D(),{relative:T()})]),r(d,s)};g(X,d=>{e(l)&&e(c)&&d(se)})}var m=P(X,2),y=i(m);{var w=d=>{var s=R();x(f=>h(s,f),[()=>{var f,L;return ue(((L=(f=t.deployment)==null?void 0:f.currentVersionSummary)==null?void 0:L.createTime)||t.deployment.createTime,D(),{relative:T()})}]),r(d,s)},Q=d=>{var s=R("-");r(d,s)};g(y,d=>{e(p)?d(w):d(Q,!1)})}n(m),n(U),n(E),r(A,E)},de=(A,E)=>{{var U=F=>{var j=Xe(),X=i(j);const se=a(()=>je({namespace:H().params.namespace,query:`TemporalWorkerDeployment="${t.deployment.name}"`}));ye(X,{icon:"external-link",get href(){return e(se)},children:(m,y)=>{Y();var w=R();x(Q=>h(w,Q),[()=>o("deployments.go-to-workflows")]),r(m,w)},$$slots:{default:!0}}),n(j),r(F,j)};g(A,F=>{z()===o("deployments.actions")&&F(U)},E)}};g(W,A=>{z()===o("deployments.deployed")?A(N):A(de,!1)},O)}};g(K,W=>{z()===o("deployments.build-id")?W(pe):W(ce,!1)},le)}};g(ie,K=>{z()===o("deployments.name")?K(De):K(Te,!1)})}r(q,ne)}),n(J),r(Z,J),xe(),G()}var $e=v('<caption class="sr-only" slot="caption"> </caption>'),et=v('<div class="flex flex-col gap-4" slot="header"><div class="flex flex-wrap items-center gap-2"><h1> </h1> <!></div></div>'),tt=v("<th> </th>"),rt=v('<tr slot="headers" class="text-left"></tr>'),ot=v('<p class="text-center">Enable Worker Deployments to manage your workers more effectively. <!>.</p> <!>',1),at=v('<div class="flex flex-col gap-4"><!></div>');function nt(Z,t){ge(t,!0);let V=Se("");const G=a(()=>Le.params.namespace),H=a(()=>()=>(he(V,""),Qe(e(G),"",D))),D=I=>{var B;he(V,((B=I==null?void 0:I.body)===null||B===void 0?void 0:B.message)||o("deployments.error-message-fetching"),!0)},T=[{label:o("deployments.name")},{label:o("deployments.build-id")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var S=at(),$=i(S);Fe($,()=>[e(G)],I=>{const B=a(()=>o("deployments.deployments")),ee=a(()=>o("common.per-page")),te=a(()=>o("common.next")),re=a(()=>o("common.previous")),oe=a(()=>o("deployments.empty-state-title")),ae=a(()=>o("deployments.error-message-fetching"));Ne(I,{get onFetch(){return e(H)},onError:D,get"aria-label"(){return e(B)},get pageSizeSelectLabel(){return e(ee)},get nextButtonLabel(){return e(te)},get previousButtonLabel(){return e(re)},get emptyStateMessage(){return e(oe)},get errorMessage(){return e(ae)},children:Ie,$$slots:{default:(_,b)=>{const l=a(()=>b.visibleItems);var c=Pe(),u=ve(c);fe(u,17,()=>e(l),be,(k,p)=>{Ze(k,{get deployment(){return e(p)},columns:T})}),r(_,c)},caption:(_,b)=>{var l=$e(),c=i(l,!0);n(l),x(u=>h(c,u),[()=>o("deployments.deployments")]),r(_,l)},header:(_,b)=>{var l=et(),c=i(l),u=i(c),k=i(u,!0);n(u);var p=P(u,2);Me(p,{class:"shrink-0",children:(C,J)=>{Y();var q=R("Public Preview");r(C,q)},$$slots:{default:!0}}),n(c),n(l),x(C=>h(k,C),[()=>o("deployments.worker-deployments")]),r(_,l)},headers:(_,b)=>{var l=rt();fe(l,21,()=>T,be,(c,u)=>{let k=()=>e(u).label;var p=tt(),C=i(p,!0);n(p),x(()=>h(C,k())),r(c,p)}),n(l),r(_,l)},empty:(_,b)=>{const l=a(()=>o("deployments.empty-state-title"));ze(_,{get title(){return e(l)},class:"px-4",children:(c,u)=>{var k=ot(),p=ve(k),C=P(i(p));ye(C,{href:"https://docs.temporal.io/worker-deployments",newTab:!0,children:(M,z)=>{Y();var ne=R("Learn more");r(M,ne)},$$slots:{default:!0}}),Y(),n(p);var J=P(p,2);{var q=M=>{qe(M,{intent:"warning",icon:"warning",class:"px-12",children:(z,ne)=>{Y();var ie=R();x(()=>h(ie,e(V))),r(z,ie)},$$slots:{default:!0}})};g(J,M=>{e(V)&&M(q)})}r(c,k)},$$slots:{default:!0}})}}})}),n(S),r(Z,S),xe()}var lt=v("<!> <!>",1);function Bt(Z,t){ge(t,!1);const[V,G]=Ve(),H=()=>me(we,"$page",V);Be();var D=lt(),T=ve(D);Ce(T,{title:"Deployments",get url(){return H().url.href}});var S=P(T,2);nt(S,{}),r(Z,D),xe(),G()}export{Bt as component};
