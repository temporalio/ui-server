import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as ye,u as r,g as e,t as v,h as ke,f as de,e as a,r as l,b as _e,i,n as O,k as re,j as S,c as g,ag as Te,s as xe,q as De}from"../chunks/CYx2j9em.js";import{i as Se}from"../chunks/HoZrOv-6.js";import{s as Pe,a as Ve}from"../chunks/DnRAdnAf.js";import{p as we}from"../chunks/DKVY9787.js";import{P as Ie}from"../chunks/DN2Bw11a.js";import{s as I}from"../chunks/BjCW00Pv.js";import{i as y}from"../chunks/DeQvpgQS.js";import{k as Be}from"../chunks/Hbsv0g-K.js";import{e as ue,i as he}from"../chunks/C1OgRA7l.js";import{p as Ce}from"../chunks/ZUPUF7oX.js";import{T as pe}from"../chunks/Dyr7Vk7o.js";import{L as fe}from"../chunks/DNKpmWE1.js";import{t as o}from"../chunks/BXv1jDVW.js";import{g as be}from"../chunks/CT3a8W8Y.js";import{j as Le,o as Fe}from"../chunks/DQzcCMd8.js";import{D as ce}from"../chunks/q8n6Td4-.js";import{A as We}from"../chunks/TlAHMYQ6.js";import{B as Ae}from"../chunks/B5FQmuB7.js";import{E as Ee}from"../chunks/BJQQDmwL.js";import{A as je}from"../chunks/DzF3TJoF.js";import{f as qe}from"../chunks/7a9bG6xc.js";var Me=v('<td class="py-1 text-left"><!></td>'),ze=v('<div class="flex items-center gap-2"> <!></div>'),Ne=v('<div class="flex items-center gap-2"> <!></div>'),Qe=v('<td class="whitespace-pre-line break-words py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <div class="flex items-center gap-2"> <!></div></div></td>'),Re=v("<p>-</p>"),Ge=v('<td class="truncate py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <!></div></td>'),He=v('<td class="w-24 truncate py-1"><!></td>'),Je=v("<tr></tr>");function Ke(U,t){ye(t,!0);const[B,N]=Pe(),Q=()=>Ve(we,"$page",B);var k,P,V,X,w,T,Y,Z,$,ee;const q=r(()=>(P=(k=t.deployment===null||t.deployment===void 0?void 0:t.deployment.latestVersionSummary)===null||k===void 0?void 0:k.deploymentVersion)===null||P===void 0?void 0:P.buildId),p=r(()=>((X=(V=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||V===void 0?void 0:V.deploymentVersion)===null||X===void 0?void 0:X.buildId)||be((w=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||w===void 0?void 0:w.rampingVersion)),C=r(()=>((T=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||T===void 0?void 0:T.createTime)||((Y=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||Y===void 0?void 0:Y.rampingVersionChangedTime)),s=r(()=>(($=(Z=t.deployment===null||t.deployment===void 0?void 0:t.deployment.currentVersionSummary)===null||Z===void 0?void 0:Z.deploymentVersion)===null||$===void 0?void 0:$.buildId)||be((ee=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||ee===void 0?void 0:ee.currentVersion)),c=r(()=>e(q)!==e(p)&&e(q)!==e(s)),u=r(()=>e(s)!=="__unversioned__"),x=r(()=>e(u)?e(s):o("deployments.unversioned"));var d=Je();ue(d,21,()=>t.columns,({label:_})=>_,(_,ae)=>{let L=()=>e(ae).label;var F=ke(),ne=de(F);{var se=R=>{var te=Me(),me=i(te);const ve=r(()=>Le({namespace:Q().params.namespace,deployment:t.deployment.name}));fe(me,{get href(){return e(ve)},children:(W,G)=>{O();var M=re();S(()=>I(M,t.deployment.name)),a(W,M)},$$slots:{default:!0}}),l(te),a(R,te)},le=(R,te)=>{{var me=W=>{var G=Qe(),M=i(G),ie=i(M);{var A=m=>{var f=ze(),h=i(f),n=g(h);const b=r(()=>o("deployments.latest"));ce(n,{status:"Latest",get label(){return e(b)}}),l(f),S(()=>I(h,`${e(q)??""} `)),a(m,f)};y(ie,m=>{e(q)&&e(c)&&m(A)})}var E=g(ie,2);{var H=m=>{var f=Ne(),h=i(f),n=g(h);{var b=K=>{const z=r(()=>o("deployments.ramping-percentage",{percentage:t.deployment.routingConfig.rampingVersionPercentage}));ce(K,{status:"Ramping",get label(){return e(z)}})};y(n,K=>{var z,ge;(ge=(z=t.deployment)==null?void 0:z.routingConfig)!=null&&ge.rampingVersionPercentage&&K(b)})}l(f),S(()=>I(h,`${e(p)??""} `)),a(m,f)};y(E,m=>{e(p)&&m(H)})}var D=g(E,2),j=i(D),J=g(j);{var oe=m=>{const f=r(()=>o("deployments.current"));ce(m,{status:"Current",get label(){return e(f)}})};y(J,m=>{e(u)&&m(oe)})}l(D),l(M),l(G),S(()=>I(j,`${e(x)??""} `)),a(W,G)},ve=(W,G)=>{{var M=A=>{var E=Ge(),H=i(E),D=i(H);{var j=n=>{pe(n,{as:"p",get dateTime(){return t.deployment.latestVersionSummary.createTime}})};y(D,n=>{var b;e(q)&&e(c)&&((b=t.deployment.latestVersionSummary)!=null&&b.createTime)&&n(j)})}var J=g(D,2);{var oe=n=>{pe(n,{as:"p",get dateTime(){return e(C)}})};y(J,n=>{e(p)&&e(C)&&n(oe)})}var m=g(J,2);{var f=n=>{const b=r(()=>{var K,z;return((z=(K=t.deployment)==null?void 0:K.currentVersionSummary)==null?void 0:z.createTime)||t.deployment.createTime});pe(n,{as:"p",get dateTime(){return e(b)}})},h=n=>{var b=Re();a(n,b)};y(m,n=>{e(u)?n(f):n(h,!1)})}l(H),l(E),a(A,E)},ie=(A,E)=>{{var H=D=>{var j=He(),J=i(j);const oe=r(()=>Fe({namespace:Q().params.namespace,query:`TemporalWorkerDeployment="${t.deployment.name}"`}));fe(J,{icon:"external-link",get href(){return e(oe)},children:(m,f)=>{O();var h=re();S(n=>I(h,n),[()=>o("deployments.go-to-workflows")]),a(m,h)},$$slots:{default:!0}}),l(j),a(D,j)};y(A,D=>{L()===o("deployments.actions")&&D(H)},E)}};y(W,A=>{L()===o("deployments.deployed")?A(M):A(ie,!1)},G)}};y(R,W=>{L()===o("deployments.build-id")?W(me):W(ve,!1)},te)}};y(ne,R=>{L()===o("deployments.name")?R(se):R(le,!1)})}a(_,F)}),l(d),a(U,d),_e(),N()}var Oe=v('<caption class="sr-only" slot="caption"> </caption>'),Ue=v('<div class="flex flex-col gap-4" slot="header"><div class="flex flex-wrap items-center gap-2"><h1> </h1> <!></div></div>'),Xe=v("<th> </th>"),Ye=v('<tr slot="headers" class="text-left"></tr>'),Ze=v('<p class="text-center">Enable Worker Deployments to manage your workers more effectively. <!>.</p> <!>',1),$e=v('<div class="flex flex-col gap-4"><!></div>');function et(U,t){ye(t,!0);let B=Te("");const N=r(()=>Ce.params.namespace),Q=r(()=>()=>(xe(B,""),qe(e(N),"",k))),k=w=>{var T;xe(B,((T=w==null?void 0:w.body)===null||T===void 0?void 0:T.message)||o("deployments.error-message-fetching"),!0)},P=[{label:o("deployments.name")},{label:o("deployments.build-id")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var V=$e(),X=i(V);Be(X,()=>[e(N)],w=>{const T=r(()=>o("deployments.deployments")),Y=r(()=>o("common.per-page")),Z=r(()=>o("common.next")),$=r(()=>o("common.previous")),ee=r(()=>o("deployments.empty-state-title")),q=r(()=>o("deployments.error-message-fetching"));je(w,{get onFetch(){return e(Q)},onError:k,get"aria-label"(){return e(T)},get pageSizeSelectLabel(){return e(Y)},get nextButtonLabel(){return e(Z)},get previousButtonLabel(){return e($)},get emptyStateMessage(){return e(ee)},get errorMessage(){return e(q)},children:De,$$slots:{default:(p,C)=>{const s=r(()=>C.visibleItems);var c=ke(),u=de(c);ue(u,17,()=>e(s),he,(x,d)=>{Ke(x,{get deployment(){return e(d)},columns:P})}),a(p,c)},caption:(p,C)=>{var s=Oe(),c=i(s,!0);l(s),S(u=>I(c,u),[()=>o("deployments.deployments")]),a(p,s)},header:(p,C)=>{var s=Ue(),c=i(s),u=i(c),x=i(u,!0);l(u);var d=g(u,2);Ae(d,{class:"shrink-0",children:(_,ae)=>{O();var L=re("Public Preview");a(_,L)},$$slots:{default:!0}}),l(c),l(s),S(_=>I(x,_),[()=>o("deployments.worker-deployments")]),a(p,s)},headers:(p,C)=>{var s=Ye();ue(s,21,()=>P,he,(c,u)=>{let x=()=>e(u).label;var d=Xe(),_=i(d,!0);l(d),S(()=>I(_,x())),a(c,d)}),l(s),a(p,s)},empty:(p,C)=>{const s=r(()=>o("deployments.empty-state-title"));Ee(p,{get title(){return e(s)},class:"px-4",children:(c,u)=>{var x=Ze(),d=de(x),_=g(i(d));fe(_,{href:"https://docs.temporal.io/worker-deployments",newTab:!0,children:(F,ne)=>{O();var se=re("Learn more");a(F,se)},$$slots:{default:!0}}),O(),l(d);var ae=g(d,2);{var L=F=>{We(F,{intent:"warning",icon:"warning",class:"px-12",children:(ne,se)=>{O();var le=re();S(()=>I(le,e(B))),a(ne,le)},$$slots:{default:!0}})};y(ae,F=>{e(B)&&F(L)})}a(c,x)},$$slots:{default:!0}})}}})}),l(V),a(U,V),_e()}var tt=v("<!> <!>",1);function wt(U,t){ye(t,!1);const[B,N]=Pe(),Q=()=>Ve(we,"$page",B);Se();var k=tt(),P=de(k);Ie(P,{title:"Deployments",get url(){return Q().url.href}});var V=g(P,2);et(V,{}),a(U,k),_e(),N()}export{wt as component};
