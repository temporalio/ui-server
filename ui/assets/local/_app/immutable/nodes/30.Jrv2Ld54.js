import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as ge,u as a,g as e,t as v,h as Pe,f as ve,e as r,r as n,b as xe,i,n as Y,k as Q,j as g,c as k,ah as Ie,s as he,q as Se}from"../chunks/DbzSl5JP.js";import{i as Be}from"../chunks/0AwovCk4.js";import{s as Ve,a as me}from"../chunks/BV6aaRB7.js";import{p as we}from"../chunks/Cx8u6Y6Y.js";import{P as Ce}from"../chunks/DthXRT7N.js";import{s as x}from"../chunks/B3b0ZBK9.js";import{i as y}from"../chunks/BwgIsUu1.js";import{k as Fe}from"../chunks/D8vk1LEJ.js";import{e as fe,i as be}from"../chunks/DgMCLi2J.js";import{p as Le}from"../chunks/DL1rU2zU.js";import{L as ye}from"../chunks/C99DZWjn.js";import{t as o}from"../chunks/BXv1jDVW.js";import{f as ue,r as We,t as Ae}from"../chunks/ChxEr8nO.js";import{g as ke}from"../chunks/CT3a8W8Y.js";import{h as Ee,m as je}from"../chunks/BI3UX98R.js";import{D as _e}from"../chunks/DnhgISCW.js";import{A as qe}from"../chunks/B7uMlIQJ.js";import{B as Me}from"../chunks/CQ8G9PIZ.js";import{E as ze}from"../chunks/D1jnh8Fn.js";import{A as Ne}from"../chunks/DS7XtpPc.js";import{f as Qe}from"../chunks/FjWu3Hsj.js";var Re=v('<td class="py-1 text-left"><!></td>'),Ge=v('<div class="flex items-center gap-2"> <!></div>'),He=v('<div class="flex items-center gap-2"> <!></div>'),Je=v('<td class="whitespace-pre-line break-words py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <div class="flex items-center gap-2"> <!></div></div></td>'),Ke=v("<p> </p>"),Oe=v("<p> </p>"),Ue=v('<td class="truncate py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <p><!></p></div></td>'),Xe=v('<td class="w-24 truncate py-1"><!></td>'),Ye=v("<tr></tr>");function Ze(Z,t){ge(t,!0);const[P,R]=Ve(),G=()=>me(we,"$page",P),D=()=>me(Ae,"$timeFormat",P),T=()=>me(We,"$relativeTime",P);var I,$,S,B,ee,te,re,oe,ae,_;const h=a(()=>($=(I=t.deployment===null||t.deployment===void 0?void 0:t.deployment.latestVersionSummary)===null||I===void 0?void 0:I.deploymentVersion)===null||$===void 0?void 0:$.buildId),s=a(()=>((B=(S=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||S===void 0?void 0:S.deploymentVersion)===null||B===void 0?void 0:B.buildId)||ke((ee=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||ee===void 0?void 0:ee.rampingVersion)),c=a(()=>((te=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||te===void 0?void 0:te.createTime)||((re=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||re===void 0?void 0:re.rampingVersionChangedTime)),u=a(()=>((ae=(oe=t.deployment===null||t.deployment===void 0?void 0:t.deployment.currentVersionSummary)===null||oe===void 0?void 0:oe.deploymentVersion)===null||ae===void 0?void 0:ae.buildId)||ke((_=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||_===void 0?void 0:_.currentVersion)),b=a(()=>e(h)!==e(s)&&e(h)!==e(u)),p=a(()=>e(u)!=="__unversioned__"),C=a(()=>e(p)?e(u):o("deployments.unversioned"));var H=Ye();fe(H,21,()=>t.columns,({label:j})=>j,(j,q)=>{let M=()=>e(q).label;var ne=Pe(),ie=ve(ne);{var De=J=>{var se=Re(),pe=i(se);const ce=a(()=>Ee({namespace:G().params.namespace,deployment:t.deployment.name}));ye(pe,{get href(){return e(ce)},children:(L,K)=>{Y();var z=Q();g(()=>x(z,t.deployment.name)),r(L,z)},$$slots:{default:!0}}),n(se),r(J,se)},Te=(J,se)=>{{var pe=L=>{var K=Je(),z=i(K),de=i(z);{var W=m=>{var f=Ge(),V=i(f),N=k(V);const d=a(()=>o("deployments.latest"));_e(N,{status:"Latest",get label(){return e(d)}}),n(f),g(()=>x(V,`${e(h)??""} `)),r(m,f)};y(de,m=>{e(h)&&e(b)&&m(W)})}var A=k(de,2);{var O=m=>{var f=He(),V=i(f),N=k(V);{var d=l=>{const w=a(()=>o("deployments.ramping-percentage",{percentage:t.deployment.routingConfig.rampingVersionPercentage}));_e(l,{status:"Ramping",get label(){return e(w)}})};y(N,l=>{var w,X;(X=(w=t.deployment)==null?void 0:w.routingConfig)!=null&&X.rampingVersionPercentage&&l(d)})}n(f),g(()=>x(V,`${e(s)??""} `)),r(m,f)};y(A,m=>{e(s)&&m(O)})}var F=k(A,2),E=i(F),U=k(E);{var le=m=>{const f=a(()=>o("deployments.current"));_e(m,{status:"Current",get label(){return e(f)}})};y(U,m=>{e(p)&&m(le)})}n(F),n(z),n(K),g(()=>x(E,`${e(C)??""} `)),r(L,K)},ce=(L,K)=>{{var z=W=>{var A=Ue(),O=i(A),F=i(O);{var E=d=>{var l=Ke(),w=i(l,!0);n(l),g(X=>x(w,X),[()=>ue(t.deployment.latestVersionSummary.createTime,D(),{relative:T()})]),r(d,l)};y(F,d=>{var l;e(h)&&e(b)&&((l=t.deployment.latestVersionSummary)!=null&&l.createTime)&&d(E)})}var U=k(F,2);{var le=d=>{var l=Oe(),w=i(l,!0);n(l),g(X=>x(w,X),[()=>ue(e(c),D(),{relative:T()})]),r(d,l)};y(U,d=>{e(s)&&e(c)&&d(le)})}var m=k(U,2),f=i(m);{var V=d=>{var l=Q();g(w=>x(l,w),[()=>ue(t.deployment.createTime,D(),{relative:T()})]),r(d,l)},N=d=>{var l=Q("-");r(d,l)};y(f,d=>{e(p)?d(V):d(N,!1)})}n(m),n(O),n(A),r(W,A)},de=(W,A)=>{{var O=F=>{var E=Xe(),U=i(E);const le=a(()=>je({namespace:G().params.namespace,query:`TemporalWorkerDeployment="${t.deployment.name}"`}));ye(U,{icon:"external-link",get href(){return e(le)},children:(m,f)=>{Y();var V=Q();g(N=>x(V,N),[()=>o("deployments.go-to-workflows")]),r(m,V)},$$slots:{default:!0}}),n(E),r(F,E)};y(W,F=>{M()===o("deployments.actions")&&F(O)},A)}};y(L,W=>{M()===o("deployments.deployed")?W(z):W(de,!1)},K)}};y(J,L=>{M()===o("deployments.build-id")?L(pe):L(ce,!1)},se)}};y(ie,J=>{M()===o("deployments.name")?J(De):J(Te,!1)})}r(j,ne)}),n(H),r(Z,H),xe(),R()}var $e=v('<caption class="sr-only" slot="caption"> </caption>'),et=v('<div class="flex flex-col gap-4" slot="header"><div class="flex flex-wrap items-center gap-2"><h1> </h1> <!></div></div>'),tt=v("<th> </th>"),rt=v('<tr slot="headers" class="text-left"></tr>'),ot=v('<p class="text-center">Enable Worker Deployments to manage your workers more effectively. <!>.</p> <!>',1),at=v('<div class="flex flex-col gap-4"><!></div>');function nt(Z,t){ge(t,!0);let P=Ie("");const R=a(()=>Le.params.namespace),G=a(()=>()=>(he(P,""),Qe(e(R),"",D))),D=S=>{var B;he(P,((B=S==null?void 0:S.body)===null||B===void 0?void 0:B.message)||o("deployments.error-message-fetching"),!0)},T=[{label:o("deployments.name")},{label:o("deployments.build-id")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var I=at(),$=i(I);Fe($,()=>[e(R)],S=>{const B=a(()=>o("deployments.deployments")),ee=a(()=>o("common.per-page")),te=a(()=>o("common.next")),re=a(()=>o("common.previous")),oe=a(()=>o("deployments.empty-state-title")),ae=a(()=>o("deployments.error-message-fetching"));Ne(S,{get onFetch(){return e(G)},onError:D,get"aria-label"(){return e(B)},get pageSizeSelectLabel(){return e(ee)},get nextButtonLabel(){return e(te)},get previousButtonLabel(){return e(re)},get emptyStateMessage(){return e(oe)},get errorMessage(){return e(ae)},children:Se,$$slots:{default:(_,h)=>{const s=a(()=>h.visibleItems);var c=Pe(),u=ve(c);fe(u,17,()=>e(s),be,(b,p)=>{Ze(b,{get deployment(){return e(p)},columns:T})}),r(_,c)},caption:(_,h)=>{var s=$e(),c=i(s,!0);n(s),g(u=>x(c,u),[()=>o("deployments.deployments")]),r(_,s)},header:(_,h)=>{var s=et(),c=i(s),u=i(c),b=i(u,!0);n(u);var p=k(u,2);Me(p,{class:"shrink-0",children:(C,H)=>{Y();var j=Q("Public Preview");r(C,j)},$$slots:{default:!0}}),n(c),n(s),g(C=>x(b,C),[()=>o("deployments.worker-deployments")]),r(_,s)},headers:(_,h)=>{var s=rt();fe(s,21,()=>T,be,(c,u)=>{let b=()=>e(u).label;var p=tt(),C=i(p,!0);n(p),g(()=>x(C,b())),r(c,p)}),n(s),r(_,s)},empty:(_,h)=>{const s=a(()=>o("deployments.empty-state-title"));ze(_,{get title(){return e(s)},class:"px-4",children:(c,u)=>{var b=ot(),p=ve(b),C=k(i(p));ye(C,{href:"https://docs.temporal.io/worker-deployments",newTab:!0,children:(q,M)=>{Y();var ne=Q("Learn more");r(q,ne)},$$slots:{default:!0}}),Y(),n(p);var H=k(p,2);{var j=q=>{qe(q,{intent:"warning",icon:"warning",class:"px-12",children:(M,ne)=>{Y();var ie=Q();g(()=>x(ie,e(P))),r(M,ie)},$$slots:{default:!0}})};y(H,q=>{e(P)&&q(j)})}r(c,b)},$$slots:{default:!0}})}}})}),n(I),r(Z,I),xe()}var st=v("<!> <!>",1);function Bt(Z,t){ge(t,!1);const[P,R]=Ve(),G=()=>me(we,"$page",P);Be();var D=st(),T=ve(D);Ce(T,{title:"Deployments",get url(){return G().url.href}});var I=k(T,2);nt(I,{}),r(Z,D),xe(),R()}export{Bt as component};
