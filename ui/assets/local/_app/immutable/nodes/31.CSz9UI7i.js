import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as me,u as r,g as e,t as v,h as fe,f as H,e as a,r as s,b as de,i as l,j as B,c as b,n as se,k as ie,q as we}from"../chunks/C-0kx8Rl.js";import{i as De}from"../chunks/DFzl7kYA.js";import{s as ge,a as ye}from"../chunks/B0Wc33k0.js";import{p as _e}from"../chunks/CavoTono.js";import{P as ke}from"../chunks/DMOchDbk.js";import{s as V}from"../chunks/B-1TjF6E.js";import{a as Se}from"../chunks/D7Rg7Pz7.js";import{e as le,i as ce}from"../chunks/CdE3I_3f.js";import{p as ae}from"../chunks/DXuD1FF0.js";import{i as E}from"../chunks/DIXBMONz.js";import{T as ne}from"../chunks/D-7Yb9FW.js";import{L as be}from"../chunks/CuhWaN6l.js";import{t as o}from"../chunks/BXv1jDVW.js";import{a as Ve,i as R,g as Ie,b as Te}from"../chunks/CT3a8W8Y.js";import{o as xe,p as Pe}from"../chunks/BqOVK5u0.js";import{f as ue}from"../chunks/DNNVWk-J.js";import{D as Be}from"../chunks/DPEhLJpq.js";import{B as Ne}from"../chunks/96HHLak6.js";import{I as Ce}from"../chunks/BQ19dEFL.js";import{T as Fe}from"../chunks/DjGI41M3.js";import{P as Le}from"../chunks/DiQKhlTa.js";import{a as We}from"../chunks/MSIVqxIr.js";import{d as je}from"../chunks/vO_crHjm.js";var qe=v('<td class="text-left"> </td>'),Ee=v("Since <!>",1),Re=v("Since <!>",1),He=v('<td class="text-left"><div class="flex items-center gap-2"><!> <!></div></td>'),Qe=v('<td class="w-24 whitespace-pre-line break-words"><!></td>'),Ue=v("<tr></tr>");function ze(Q,t){me(t,!0);const[N,x]=ge(),C=()=>ye(_e,"$page",N);var I,h,y,w;const U=r(()=>(I=t.routingConfig.currentDeploymentVersion)===null||I===void 0?void 0:I.deploymentName),O=r(()=>(h=t.routingConfig.currentDeploymentVersion)===null||h===void 0?void 0:h.buildId),z=r(()=>(y=t.routingConfig.rampingDeploymentVersion)===null||y===void 0?void 0:y.deploymentName),X=r(()=>(w=t.routingConfig.rampingDeploymentVersion)===null||w===void 0?void 0:w.buildId),Y=r(()=>R(t.version)?t.version.deploymentVersion.deploymentName:Ve(t.version.version)),F=r(()=>R(t.version)?t.version.deploymentVersion.buildId:Ie(t.version.version)),A=r(()=>e(Y)===e(U)&&e(F)===e(O)),L=r(()=>e(Y)===e(z)&&e(F)===e(X)),D=r(()=>R(t.version)?t.version.status:t.version.drainageStatus),Z=r(()=>R(t.version)?"WorkerDeploymentVersionStatus":"VersionDrainageStatus"),te=r(()=>e(A)?o("deployments.current"):e(L)?o("deployments.ramping"):e(D)?ue(e(D),e(Z)):o("common.inactive")),$=r(()=>e(A)?o("deployments.current"):e(L)?o("deployments.ramping-percentage",{percentage:t.routingConfig.rampingVersionPercentage}):e(D)?ue(e(D),e(Z)):o("common.inactive"));var G=Ue();le(G,21,()=>t.columns,({label:m})=>m,(m,W)=>{let i=()=>e(W).label;var k=fe(),re=H(k);{var oe=c=>{var n=qe(),u=l(n,!0);s(n),B(()=>V(u,e(F))),a(c,n)},_=(c,n)=>{{var u=f=>{var d=He(),j=l(d),ee=l(j);Be(ee,{get status(){return e(te)},get label(){return e($)}});var S=b(ee,2);{var J=g=>{var p=Ee(),K=b(H(p));ne(K,{get dateTime(){return t.version.currentSinceTime}}),a(g,p)},q=(g,p)=>{{var K=M=>{var P=Re(),pe=b(H(P));ne(pe,{get dateTime(){return t.version.rampingSinceTime}}),a(M,P)};E(g,M=>{var P;e(L)&&R(t.version)&&((P=t.version)!=null&&P.rampingSinceTime)&&M(K)},p)}};E(S,g=>{var p;e(A)&&R(t.version)&&((p=t.version)!=null&&p.currentSinceTime)?g(J):g(q,!1)})}s(j),s(d),a(f,d)},T=(f,d)=>{{var j=S=>{const J=r(()=>{var q;return(q=t.version)==null?void 0:q.createTime});ne(S,{as:"td",class:"whitespace-pre-line break-words text-left",get dateTime(){return e(J)}})},ee=(S,J)=>{{var q=g=>{var p=Qe(),K=l(p);const M=r(()=>xe({namespace:C().params.namespace,query:`TemporalWorkerDeploymentVersion="${Te(t.version)}"`}));be(K,{icon:"external-link",get href(){return e(M)},children:(P,pe)=>{se();var ve=ie();B(he=>V(ve,he),[()=>o("deployments.go-to-workflows")]),a(P,ve)},$$slots:{default:!0}}),s(p),a(g,p)};E(S,g=>{i()===o("deployments.actions")&&g(q)},J)}};E(f,S=>{i()===o("deployments.deployed")?S(j):S(ee,!1)},d)}};E(c,f=>{i()===o("deployments.status")?f(u):f(T,!1)},n)}};E(re,c=>{i()===o("deployments.build-id")?c(oe):c(_,!1)})}a(m,k)}),s(G),a(Q,G),de(),x()}var Ae=v('<caption class="sr-only" slot="caption"> </caption>'),Ge=v("<th> </th>"),Je=v('<tr slot="headers"></tr>'),Ke=v('<header class="flex flex-row flex-wrap justify-between gap-8 border-b border-subtle px-4 pb-4 pt-8 md:pt-20 xl:px-8"><div class="relative flex w-full flex-col gap-4"><div class="flex items-center gap-2"><!> <!> </div> <div class="flex w-full items-center justify-between"><h1> </h1> <!></div></div></header> <div class="p-8"><!></div>',1);function Me(Q,t){me(t,!0);const N=r(()=>ae.params.namespace),x=r(()=>ae.params.deployment),C=r(()=>({namespace:e(N),deploymentName:je(e(x))})),I=r(()=>xe({namespace:ae.params.namespace,query:`TemporalWorkerDeployment="${e(x)}"`})),h=r(()=>We(e(C))),y=[{label:o("deployments.build-id")},{label:o("deployments.status")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var w=Ke(),U=H(w),O=l(U),z=l(O),X=l(z);const Y=r(()=>Pe({namespace:e(N)}));be(X,{get href(){return e(Y)},icon:"chevron-left",children:(m,W)=>{se();var i=ie();B(k=>V(i,k),[()=>o("deployments.back-to-deployments")]),a(m,i)},$$slots:{default:!0}});var F=b(X,2);Ce(F,{name:"chevron-left"});var A=b(F);s(z);var L=b(z,2),D=l(L),Z=l(D,!0);s(D);var te=b(D,2);Ne(te,{get href(){return e(I)},children:(m,W)=>{se();var i=ie();B(k=>V(i,k),[()=>o("deployments.go-to-workflows")]),a(m,i)},$$slots:{default:!0}}),s(L),s(O),s(U);var $=b(U,2),G=l($);Se(G,()=>e(h),m=>{Fe(m,{rows:15})},(m,W)=>{const i=r(()=>o("deployments.deployments")),k=r(()=>o("common.per-page")),re=r(()=>o("common.next-page")),oe=r(()=>o("common.previous-page"));Le(m,{get"aria-label"(){return e(i)},get perPageLabel(){return e(k)},get nextPageButtonLabel(){return e(re)},get previousPageButtonLabel(){return e(oe)},pageButtonLabel:_=>o("common.go-to-page",{page:_}),get items(){return e(W).workerDeploymentInfo.versionSummaries},children:we,$$slots:{default:(_,c)=>{const n=r(()=>c.visibleItems);var u=fe(),T=H(u);le(T,17,()=>e(n),ce,(f,d)=>{ze(f,{get routingConfig(){return e(W).workerDeploymentInfo.routingConfig},get version(){return e(d)},columns:y})}),a(_,u)},caption:(_,c)=>{var n=Ae(),u=l(n,!0);s(n),B(T=>V(u,T),[()=>o("deployments.deployments")]),a(_,n)},headers:(_,c)=>{var n=Je();le(n,21,()=>y,ce,(u,T)=>{let f=()=>e(T).label;var d=Ge(),j=l(d,!0);s(d),B(()=>V(j,f())),a(u,d)}),s(n),a(_,n)}}})}),s($),B(()=>{V(A,` ${e(x)??""}`),V(Z,e(x))}),a(Q,w),de()}var Oe=v("<!> <!>",1);function ht(Q,t){me(t,!1);const[N,x]=ge(),C=()=>ye(_e,"$page",N),I=C().params.deployment;De();var h=Oe(),y=H(h);ke(y,{title:`Deployment | ${I}`,get url(){return C().url.href}});var w=b(y,2);Me(w,{}),a(Q,h),de(),x()}export{ht as component};
