import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ge,az as a,g as e,t as v,e as Pe,f as ve,d as r,r as n,b as xe,h as i,n as Y,k as Q,i as g,c as k,aC as Ce,s as he,o as Ie}from"../chunks/CtXwlho8.js";import{i as Se}from"../chunks/D4D3ThYu.js";import{s as Ve,a as me}from"../chunks/CI9zuxJp.js";import{p as we}from"../chunks/JbyttEuE.js";import{P as Be}from"../chunks/BYpUB0sF.js";import{s as x}from"../chunks/BXc8M6y4.js";import{i as y}from"../chunks/yjFgoZ2z.js";import{k as Fe}from"../chunks/CmcpgAEn.js";import{e as fe,i as be}from"../chunks/DN_bdWMP.js";import{p as Le}from"../chunks/Z2tDCb64.js";import{L as ye}from"../chunks/AIwNqFoL.js";import{t as o}from"../chunks/D2OY9xdY.js";import{f as ue,r as We,t as Ae}from"../chunks/cq7hwzrg.js";import{g as ke}from"../chunks/CT3a8W8Y.js";import{h as Ee,m as ze}from"../chunks/yGVhH9us.js";import{D as _e}from"../chunks/CBuoHlZ0.js";import{A as Me}from"../chunks/Cb-Z4thM.js";import{B as je}from"../chunks/Dvm4Bl2G.js";import{E as qe}from"../chunks/Dij6HiAt.js";import{A as Ne}from"../chunks/DzRSaB0E.js";import{f as Qe}from"../chunks/C87PVE4j.js";var Re=v('<td class="py-1 text-left"><!></td>'),Ge=v('<div class="flex items-center gap-2"> <!></div>'),He=v('<div class="flex items-center gap-2"> <!></div>'),Je=v('<td class="whitespace-pre-line break-words py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <div class="flex items-center gap-2"> <!></div></div></td>'),Ke=v("<p> </p>"),Oe=v("<p> </p>"),Ue=v('<td class="truncate py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <p><!></p></div></td>'),Xe=v('<td class="w-24 truncate py-1"><!></td>'),Ye=v("<tr></tr>");function Ze(Z,t){ge(t,!0);const[P,R]=Ve(),G=()=>me(we,"$page",P),D=()=>me(Ae,"$timeFormat",P),T=()=>me(We,"$relativeTime",P);var C,$,I,S,ee,te,re,oe,ae,_;const h=a(()=>($=(C=t.deployment===null||t.deployment===void 0?void 0:t.deployment.latestVersionSummary)===null||C===void 0?void 0:C.deploymentVersion)===null||$===void 0?void 0:$.buildId),s=a(()=>((S=(I=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||I===void 0?void 0:I.deploymentVersion)===null||S===void 0?void 0:S.buildId)||ke((ee=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||ee===void 0?void 0:ee.rampingVersion)),c=a(()=>((te=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||te===void 0?void 0:te.createTime)||((re=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||re===void 0?void 0:re.rampingVersionChangedTime)),u=a(()=>((ae=(oe=t.deployment===null||t.deployment===void 0?void 0:t.deployment.currentVersionSummary)===null||oe===void 0?void 0:oe.deploymentVersion)===null||ae===void 0?void 0:ae.buildId)||ke((_=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||_===void 0?void 0:_.currentVersion)),b=a(()=>e(h)!==e(s)&&e(h)!==e(u)),p=a(()=>e(u)!=="__unversioned__"),B=a(()=>e(p)?e(u):o("deployments.unversioned"));var H=Ye();fe(H,21,()=>t.columns,({label:z})=>z,(z,M)=>{let j=()=>e(M).label;var ne=Pe(),ie=ve(ne);{var De=J=>{var se=Re(),pe=i(se);const ce=a(()=>Ee({namespace:G().params.namespace,deployment:t.deployment.name}));ye(pe,{get href(){return e(ce)},children:(L,K)=>{Y();var q=Q();g(()=>x(q,t.deployment.name)),r(L,q)},$$slots:{default:!0}}),n(se),r(J,se)},Te=(J,se)=>{{var pe=L=>{var K=Je(),q=i(K),de=i(q);{var W=m=>{var f=Ge(),V=i(f),N=k(V);const d=a(()=>o("deployments.latest"));_e(N,{status:"Latest",get label(){return e(d)}}),n(f),g(()=>x(V,`${e(h)??""} `)),r(m,f)};y(de,m=>{e(h)&&e(b)&&m(W)})}var A=k(de,2);{var O=m=>{var f=He(),V=i(f),N=k(V);{var d=l=>{const w=a(()=>o("deployments.ramping-percentage",{percentage:t.deployment.routingConfig.rampingVersionPercentage}));_e(l,{status:"Ramping",get label(){return e(w)}})};y(N,l=>{var w,X;(X=(w=t.deployment)==null?void 0:w.routingConfig)!=null&&X.rampingVersionPercentage&&l(d)})}n(f),g(()=>x(V,`${e(s)??""} `)),r(m,f)};y(A,m=>{e(s)&&m(O)})}var F=k(A,2),E=i(F),U=k(E);{var le=m=>{const f=a(()=>o("deployments.current"));_e(m,{status:"Current",get label(){return e(f)}})};y(U,m=>{e(p)&&m(le)})}n(F),n(q),n(K),g(()=>x(E,`${e(B)??""} `)),r(L,K)},ce=(L,K)=>{{var q=W=>{var A=Ue(),O=i(A),F=i(O);{var E=d=>{var l=Ke(),w=i(l,!0);n(l),g(X=>x(w,X),[()=>ue(t.deployment.latestVersionSummary.createTime,D(),{relative:T()})]),r(d,l)};y(F,d=>{var l;e(h)&&e(b)&&((l=t.deployment.latestVersionSummary)!=null&&l.createTime)&&d(E)})}var U=k(F,2);{var le=d=>{var l=Oe(),w=i(l,!0);n(l),g(X=>x(w,X),[()=>ue(e(c),D(),{relative:T()})]),r(d,l)};y(U,d=>{e(s)&&e(c)&&d(le)})}var m=k(U,2),f=i(m);{var V=d=>{var l=Q();g(w=>x(l,w),[()=>ue(t.deployment.createTime,D(),{relative:T()})]),r(d,l)},N=d=>{var l=Q("-");r(d,l)};y(f,d=>{e(p)?d(V):d(N,!1)})}n(m),n(O),n(A),r(W,A)},de=(W,A)=>{{var O=F=>{var E=Xe(),U=i(E);const le=a(()=>ze({namespace:G().params.namespace,query:`TemporalWorkerDeployment="${t.deployment.name}"`}));ye(U,{icon:"external-link",get href(){return e(le)},children:(m,f)=>{Y();var V=Q();g(N=>x(V,N),[()=>o("deployments.go-to-workflows")]),r(m,V)},$$slots:{default:!0}}),n(E),r(F,E)};y(W,F=>{j()===o("deployments.actions")&&F(O)},A)}};y(L,W=>{j()===o("deployments.deployed")?W(q):W(de,!1)},K)}};y(J,L=>{j()===o("deployments.build-id")?L(pe):L(ce,!1)},se)}};y(ie,J=>{j()===o("deployments.name")?J(De):J(Te,!1)})}r(z,ne)}),n(H),r(Z,H),xe(),R()}var $e=v('<caption class="sr-only" slot="caption"> </caption>'),et=v('<div class="flex flex-col gap-4" slot="header"><div class="flex flex-wrap items-center gap-2"><h1> </h1> <!></div></div>'),tt=v("<th> </th>"),rt=v('<tr slot="headers" class="text-left"></tr>'),ot=v('<p class="text-center">Enable Worker Deployments to manage your workers more effectively. <!>.</p> <!>',1),at=v('<div class="flex flex-col gap-4"><!></div>');function nt(Z,t){ge(t,!0);let P=Ce("");const R=a(()=>Le.params.namespace),G=a(()=>()=>(he(P,""),Qe(e(R),"",D))),D=I=>{var S;he(P,((S=I==null?void 0:I.body)===null||S===void 0?void 0:S.message)||o("deployments.error-message-fetching"),!0)},T=[{label:o("deployments.name")},{label:o("deployments.build-id")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var C=at(),$=i(C);Fe($,()=>[e(R)],I=>{const S=a(()=>o("deployments.deployments")),ee=a(()=>o("common.per-page")),te=a(()=>o("common.next")),re=a(()=>o("common.previous")),oe=a(()=>o("deployments.empty-state-title")),ae=a(()=>o("deployments.error-message-fetching"));Ne(I,{get onFetch(){return e(G)},onError:D,get"aria-label"(){return e(S)},get pageSizeSelectLabel(){return e(ee)},get nextButtonLabel(){return e(te)},get previousButtonLabel(){return e(re)},get emptyStateMessage(){return e(oe)},get errorMessage(){return e(ae)},children:Ie,$$slots:{default:(_,h)=>{const s=a(()=>h.visibleItems);var c=Pe(),u=ve(c);fe(u,17,()=>e(s),be,(b,p)=>{Ze(b,{get deployment(){return e(p)},columns:T})}),r(_,c)},caption:(_,h)=>{var s=$e(),c=i(s,!0);n(s),g(u=>x(c,u),[()=>o("deployments.deployments")]),r(_,s)},header:(_,h)=>{var s=et(),c=i(s),u=i(c),b=i(u,!0);n(u);var p=k(u,2);je(p,{class:"shrink-0",children:(B,H)=>{Y();var z=Q("Public Preview");r(B,z)},$$slots:{default:!0}}),n(c),n(s),g(B=>x(b,B),[()=>o("deployments.worker-deployments")]),r(_,s)},headers:(_,h)=>{var s=rt();fe(s,21,()=>T,be,(c,u)=>{let b=()=>e(u).label;var p=tt(),B=i(p,!0);n(p),g(()=>x(B,b())),r(c,p)}),n(s),r(_,s)},empty:(_,h)=>{const s=a(()=>o("deployments.empty-state-title"));qe(_,{get title(){return e(s)},class:"px-4",children:(c,u)=>{var b=ot(),p=ve(b),B=k(i(p));ye(B,{href:"https://docs.temporal.io/worker-deployments",newTab:!0,children:(M,j)=>{Y();var ne=Q("Learn more");r(M,ne)},$$slots:{default:!0}}),Y(),n(p);var H=k(p,2);{var z=M=>{Me(M,{intent:"warning",icon:"warning",class:"px-12",children:(j,ne)=>{Y();var ie=Q();g(()=>x(ie,e(P))),r(j,ie)},$$slots:{default:!0}})};y(H,M=>{e(P)&&M(z)})}r(c,b)},$$slots:{default:!0}})}}})}),n(C),r(Z,C),xe()}var st=v("<!> <!>",1);function St(Z,t){ge(t,!1);const[P,R]=Ve(),G=()=>me(we,"$page",P);Se();var D=st(),T=ve(D);Be(T,{title:"Deployments",get url(){return G().url.href}});var C=k(T,2);nt(C,{}),r(Z,D),xe(),R()}export{St as component};
