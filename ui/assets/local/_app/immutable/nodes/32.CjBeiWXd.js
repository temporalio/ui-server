import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as H,f as D,j as e,r as t,h as o,K as i,O as l,t as q,e as B,b as M,n as pe,k as de,g as a,o as E,v as U,aT as ee,i as be,c as ae,m as re,s as Q,l as le,a as xe}from"../chunks/DZ1-1a5q.js";import{i as W}from"../chunks/Bby3K3wO.js";import{p as V,s as oe,a as ie,b as $e}from"../chunks/TaaIktnz.js";import{p as ye}from"../chunks/Bm0Gpem_.js";import{P as ke}from"../chunks/BvHFjIFb.js";import{t as r}from"../chunks/DEjs8ZrU.js";import{s as c}from"../chunks/DxwvfIkW.js";import{a as we}from"../chunks/Ave-ZrbK.js";import{k as Te}from"../chunks/DhxkE7tO.js";import{T as ne}from"../chunks/4Dr_hdgK.js";import{c as je}from"../chunks/D7JzDj9r.js";import{i as Re}from"../chunks/DnKg3jxh.js";import{B as Pe}from"../chunks/CqqsKTDn.js";import{T as Oe}from"../chunks/BZoQ2uf-.js";import{T as Ce}from"../chunks/DM1_LFNw.js";import{a as se,d as Ie}from"../chunks/D4tbFlFf.js";import{s as Be}from"../chunks/B3h3Bc2r.js";import{b as te}from"../chunks/D3L9VHHD.js";import{C as ve}from"../chunks/uGY2KSKF.js";import{L as Fe}from"../chunks/GwTckd-2.js";import{v as ce}from"../chunks/Bzxzd4dC.js";var Ne=D('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <!></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <!></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div></div>');function Ae(O,d){H(d,!1);let s=V(d,"operation",8);W();var b=Ne(),h=e(b),n=e(h,!0);t(h);var x=o(h,2),p=e(x),$=e(p,!0);t(p);var g=o(p,2),y=e(g,!0);t(g),t(x);var u=o(x,2),f=e(u),C=e(f,!0);t(f);var R=o(f,2),m=e(R,!0);t(R),t(u);var k=o(u,2),P=e(k),T=e(P,!0);t(P);var v=o(P,2),w=e(v,!0);t(v),t(k);var _=o(k,2),j=e(_),N=e(j,!0);t(j);var I=o(j,2);ne(I,{as:"p",class:"col-span-8",get dateTime(){return l(s()),i(()=>s().startTime)}}),t(_);var F=o(_,2),K=e(F),z=e(K,!0);t(K);var G=o(K,2);ne(G,{as:"p",class:"col-span-8",get dateTime(){return l(s()),i(()=>s().closeTime)}}),t(F);var J=o(F,2),A=e(J),L=e(A,!0);t(A);var S=o(A,2),X=e(S,!0);t(S),t(J),t(b),q((Y,Z,ue,fe,me,_e,he,ge)=>{c(n,Y),c($,Z),c(y,(l(s()),i(()=>s().operationType))),c(C,ue),c(m,(l(s()),i(()=>s().identity))),c(T,fe),c(w,(l(s()),i(()=>s().reason))),c(N,me),c(z,_e),c(L,he),c(X,ge)},[()=>(l(r),i(()=>r("batch.details"))),()=>(l(r),i(()=>r("batch.operation-type"))),()=>(l(r),i(()=>r("batch.identity"))),()=>(l(r),i(()=>r("common.reason"))),()=>(l(r),i(()=>r("common.start-time"))),()=>(l(r),i(()=>r("common.close-time"))),()=>(l(r),i(()=>r("batch.total-operations"))),()=>(l(s()),i(()=>Intl.NumberFormat("en-US").format(s().totalOperationCount)))]),B(O,b),M()}var Se=D('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function Ue(O,d){H(d,!1);const s=()=>ie(se,"$autoRefresh",b),[b,h]=oe();let n=V(d,"operation",8);const x=je(),p=v=>{const{checked:w}=v.target;x("toggleAutoRefresh",{checked:w}),$e(se,w)},$={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};W();var g=Se(),y=e(g),u=e(y),f=e(u),C=e(f,!0);t(f);var R=o(f,2);Pe(R,{get type(){return l(n()),i(()=>$[n().state])},children:(v,w)=>{pe();var _=de();q(()=>c(_,(l(n()),i(()=>n().state)))),B(v,_)},$$slots:{default:!0}}),t(u);var m=o(u,2),k=e(m,!0);t(m),t(y);var P=o(y,2);{var T=v=>{{let w=E(()=>(l(r),i(()=>r("common.auto-refresh-tooltip",{interval:"5"}))));Ce(v,{top:!0,get text(){return a(w)},children:(_,j)=>{{let N=E(()=>(l(r),i(()=>r("common.auto-refresh"))));Oe(_,{id:"batch-operation-auto-refresh",get label(){return a(N)},labelPosition:"left",get checked(){return s()},$$events:{change:p}})}},$$slots:{default:!0}})}};Re(P,v=>{l(n()),i(()=>n().state==="Running")&&v(T)})}t(g),q(v=>{c(C,v),c(k,(l(n()),i(()=>n().jobId)))},[()=>(l(r),i(()=>r("batch.describe-page-title")))]),B(O,g),M(),h()}var De=D('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class="text-xs font-semibold text-success"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function Ke(O,d){H(d,!0);let s=U(()=>ee(d.operation.completeOperationCount,0)),b=U(()=>ee(d.operation.failureOperationCount,0)),h=U(()=>ee(d.operation.totalOperationCount,0));const n=(A,L)=>{const S=Math.round(A/L*100);return isNaN(S)?0:S};let x=U(()=>n(a(s),a(h))),p=U(()=>n(a(b),a(h))),$=U(()=>n(a(s)+a(b),a(h)));var g=De(),y=e(g),u=e(y,!0);t(y);var f=o(y,2),C=e(f),R=e(C),m=e(R,!0);t(R);var k=o(R,2),P=e(k);t(k),t(C);var T=o(C,2),v=e(T);t(T),t(f);var w=o(f,2),_=e(w),j=e(_),N=e(j,!0);t(j);var I=o(j,2);let F;var K=e(I,!0);t(I),t(_);var z=o(_,2),G=e(z),J=o(G,2);t(z),t(w),t(g),q((A,L,S,X,Y,Z)=>{c(u,A),c(m,L),c(P,`${S??""} / ${X??""}`),te(v,`width:${a($)??""}%;`),c(N,Y),F=Be(I,1,"text-xs font-semibold",null,F,{"text-red-700":a(p)>0}),c(K,Z),te(G,`width:${a(x)??""}%;`),te(J,`width:${a(p)??""}%;`)},[()=>r("batch.results"),()=>r("batch.operations-progress",{percent:a($)}),()=>Intl.NumberFormat("en-US").format(a(s)),()=>Intl.NumberFormat("en-US").format(a(h)),()=>r("batch.operations-succeeded",{count:a(s)}),()=>r("batch.operations-failed",{count:a(b)})]),B(O,g),M()}var Le=D("<!> <!> <!>",1),qe=D('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function Ee(O,d){H(d,!1);const s=()=>ie(se,"$autoRefresh",b),[b,h]=oe();let n=V(d,"namespace",8),x=V(d,"jobId",8),p=re(0),$;const g=m=>{m.detail.checked?Q(p,a(p)+1):$&&window.clearTimeout($)},y=()=>Ie({jobId:x(),namespace:n()}).then(m=>(s()&&m.state==="Running"&&($=window.setTimeout(()=>{Q(p,a(p)+1)},5e3)),m));W();var u=qe(),f=e(u),C=e(f);{let m=E(()=>(l(ce),l(n()),i(()=>ce({namespace:n()}))));Fe(C,{get href(){return a(m)},icon:"chevron-left",children:(k,P)=>{pe();var T=de();q(v=>c(T,v),[()=>(l(r),i(()=>r("batch.back-link")))]),B(k,T)},$$slots:{default:!0}})}t(f);var R=o(f,2);Te(R,()=>a(p),m=>{var k=be(),P=ae(k);we(P,()=>i(y),null,(T,v)=>{var w=Le(),_=ae(w);Ue(_,{get operation(){return a(v)},$$events:{toggleAutoRefresh:g}});var j=o(_,2);ve(j,{children:(I,F)=>{Ae(I,{get operation(){return a(v)}})},$$slots:{default:!0}});var N=o(j,2);ve(N,{children:(I,F)=>{Ke(I,{get operation(){return a(v)}})},$$slots:{default:!0}}),B(T,w)}),B(m,k)}),t(u),B(O,u),M(),h()}var He=D("<!> <!>",1);function ut(O,d){H(d,!1);const s=()=>ie(ye,"$page",b),[b,h]=oe(),n=re(),x=re();le(()=>s(),()=>{Q(n,s().params.namespace)}),le(()=>s(),()=>{Q(x,s().params.jobId)}),xe(),W();var p=He(),$=ae(p);{let y=E(()=>(l(r),i(()=>r("batch.describe-page-title")))),u=E(()=>a(x));ke($,{get title(){return`${a(y)??""} | ${a(u)??""}`}})}var g=o($,2);Ee(g,{get jobId(){return a(x)},get namespace(){return a(n)}}),B(O,p),M(),h()}export{ut as component};
