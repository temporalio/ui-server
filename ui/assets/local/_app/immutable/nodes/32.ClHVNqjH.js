import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as pe,ac as r,g as e,t as f,h as _e,f as se,e as a,r as s,b as ue,i as l,j as u,c as W,k as Z,n as ve,q as ke}from"../chunks/U_G9-AHJ.js";import{i as Se}from"../chunks/D2UjXFL6.js";import{s as be,a as ne}from"../chunks/DNW1xCX_.js";import{p as xe}from"../chunks/DGyp4Ojk.js";import{P as Ve}from"../chunks/Ck2hqwTx.js";import{s as p}from"../chunks/CVVZ9xwv.js";import{a as Ie}from"../chunks/B38O4Zli.js";import{e as ce,i as ge}from"../chunks/CbnBDLOu.js";import{p as me}from"../chunks/CM_2JwtB.js";import{i as Q}from"../chunks/DIFdH0Rm.js";import{L as he}from"../chunks/CHLpc3Ee.js";import{t as o}from"../chunks/D2OY9xdY.js";import{f as de,r as Pe,t as Te}from"../chunks/CqYY455h.js";import{a as Fe,i as U,g as Be,b as Ne}from"../chunks/CT3a8W8Y.js";import{m as we,n as Ce}from"../chunks/Cmlw1Sw9.js";import{f as ye}from"../chunks/DNNVWk-J.js";import{D as Le}from"../chunks/CczlDEFy.js";import{B as We}from"../chunks/BtZegsbD.js";import{I as je}from"../chunks/DP_ar0SN.js";import{T as qe}from"../chunks/BmH-7cQr.js";import{P as Ee}from"../chunks/BFdpFWtq.js";import{a as Re}from"../chunks/CNK0lMXR.js";import{d as He}from"../chunks/vO_crHjm.js";var Qe=f('<td class="text-left"> </td>'),Ue=f('<td class="text-left"><div class="flex items-center gap-2"><!> <!></div></td>'),ze=f('<td class="whitespace-pre-line break-words text-left"> </td>'),Ae=f('<td class="w-24 whitespace-pre-line break-words"><!></td>'),Ge=f("<tr></tr>");function Je(z,t){pe(t,!0);const[b,x]=be(),h=()=>ne(Te,"$timeFormat",b),I=()=>ne(Pe,"$relativeTime",b),j=()=>ne(xe,"$page",b);var g,w,P,q;const A=r(()=>(g=t.routingConfig.currentDeploymentVersion)===null||g===void 0?void 0:g.deploymentName),$=r(()=>(w=t.routingConfig.currentDeploymentVersion)===null||w===void 0?void 0:w.buildId),ie=r(()=>(P=t.routingConfig.rampingDeploymentVersion)===null||P===void 0?void 0:P.deploymentName),ee=r(()=>(q=t.routingConfig.rampingDeploymentVersion)===null||q===void 0?void 0:q.buildId),te=r(()=>U(t.version)?t.version.deploymentVersion.deploymentName:Fe(t.version.version)),E=r(()=>U(t.version)?t.version.deploymentVersion.buildId:Be(t.version.version)),T=r(()=>e(te)===e(A)&&e(E)===e($)),G=r(()=>e(te)===e(ie)&&e(E)===e(ee)),R=r(()=>U(t.version)?t.version.status:t.version.drainageStatus),J=r(()=>U(t.version)?"WorkerDeploymentVersionStatus":"VersionDrainageStatus"),le=r(()=>e(T)?o("deployments.current"):e(G)?o("deployments.ramping"):e(R)?ye(e(R),e(J)):o("common.inactive")),y=r(()=>e(T)?o("deployments.current"):e(G)?o("deployments.ramping-percentage",{percentage:t.routingConfig.rampingVersionPercentage}):e(R)?ye(e(R),e(J)):o("common.inactive"));var D=Ge();ce(D,21,()=>t.columns,({label:m})=>m,(m,F)=>{let H=()=>e(F).label;var re=_e(),_=se(re);{var K=i=>{var v=Qe(),B=l(v,!0);s(v),u(()=>p(B,e(E))),a(i,v)},d=(i,v)=>{{var B=k=>{var M=Ue(),oe=l(M),ae=l(oe);Le(ae,{get status(){return e(le)},get label(){return e(y)}});var S=W(ae,2);{var C=n=>{var c=Z();u(V=>p(c,`Since ${V??""}`),[()=>{var V;return de((V=t.version)==null?void 0:V.currentSinceTime,h(),{relative:I()})}]),a(n,c)},O=(n,c)=>{{var V=X=>{var L=Z();u(Y=>p(L,`Since ${Y??""}`),[()=>{var Y;return de((Y=t.version)==null?void 0:Y.rampingSinceTime,h(),{relative:I()})}]),a(X,L)};Q(n,X=>{var L;e(G)&&U(t.version)&&((L=t.version)!=null&&L.rampingSinceTime)&&X(V)},c)}};Q(S,n=>{var c;e(T)&&U(t.version)&&((c=t.version)!=null&&c.currentSinceTime)?n(C):n(O,!1)})}s(oe),s(M),a(k,M)},N=(k,M)=>{{var oe=S=>{var C=ze(),O=l(C,!0);s(C),u(n=>p(O,n),[()=>{var n;return de((n=t.version)==null?void 0:n.createTime,h(),{relative:I()})}]),a(S,C)},ae=(S,C)=>{{var O=n=>{var c=Ae(),V=l(c);const X=r(()=>we({namespace:j().params.namespace,query:`TemporalWorkerDeploymentVersion="${Ne(t.version)}"`}));he(V,{icon:"external-link",get href(){return e(X)},children:(L,Y)=>{ve();var fe=Z();u(De=>p(fe,De),[()=>o("deployments.go-to-workflows")]),a(L,fe)},$$slots:{default:!0}}),s(c),a(n,c)};Q(S,n=>{H()===o("deployments.actions")&&n(O)},C)}};Q(k,S=>{H()===o("deployments.deployed")?S(oe):S(ae,!1)},M)}};Q(i,k=>{H()===o("deployments.status")?k(B):k(N,!1)},v)}};Q(_,i=>{H()===o("deployments.build-id")?i(K):i(d,!1)})}a(m,re)}),s(D),a(z,D),ue(),x()}var Ke=f('<caption class="sr-only" slot="caption"> </caption>'),Me=f("<th> </th>"),Oe=f('<tr slot="headers"></tr>'),Xe=f('<header class="flex flex-row flex-wrap justify-between gap-8 border-b border-subtle px-4 pb-4 pt-8 md:pt-20 xl:px-8"><div class="relative flex w-full flex-col gap-4"><div class="flex items-center gap-2"><!> <!> </div> <div class="flex w-full items-center justify-between"><h1> </h1> <!></div></div></header> <div class="p-8"><!></div>',1);function Ye(z,t){pe(t,!0);const b=r(()=>me.params.namespace),x=r(()=>me.params.deployment),h=r(()=>({namespace:e(b),deploymentName:He(e(x))})),I=r(()=>we({namespace:me.params.namespace,query:`TemporalWorkerDeployment="${e(x)}"`})),j=r(()=>Re(e(h))),g=[{label:o("deployments.build-id")},{label:o("deployments.status")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var w=Xe(),P=se(w),q=l(P),A=l(q),$=l(A);const ie=r(()=>Ce({namespace:e(b)}));he($,{get href(){return e(ie)},icon:"chevron-left",children:(y,D)=>{ve();var m=Z();u(F=>p(m,F),[()=>o("deployments.back-to-deployments")]),a(y,m)},$$slots:{default:!0}});var ee=W($,2);je(ee,{name:"chevron-left"});var te=W(ee);s(A);var E=W(A,2),T=l(E),G=l(T,!0);s(T);var R=W(T,2);We(R,{get href(){return e(I)},children:(y,D)=>{ve();var m=Z();u(F=>p(m,F),[()=>o("deployments.go-to-workflows")]),a(y,m)},$$slots:{default:!0}}),s(E),s(q),s(P);var J=W(P,2),le=l(J);Ie(le,()=>e(j),y=>{qe(y,{rows:15})},(y,D)=>{const m=r(()=>o("deployments.deployments")),F=r(()=>o("common.per-page")),H=r(()=>o("common.next-page")),re=r(()=>o("common.previous-page"));Ee(y,{get"aria-label"(){return e(m)},get perPageLabel(){return e(F)},get nextPageButtonLabel(){return e(H)},get previousPageButtonLabel(){return e(re)},pageButtonLabel:_=>o("common.go-to-page",{page:_}),get items(){return e(D).workerDeploymentInfo.versionSummaries},children:ke,$$slots:{default:(_,K)=>{const d=r(()=>K.visibleItems);var i=_e(),v=se(i);ce(v,17,()=>e(d),ge,(B,N)=>{Je(B,{get routingConfig(){return e(D).workerDeploymentInfo.routingConfig},get version(){return e(N)},columns:g})}),a(_,i)},caption:(_,K)=>{var d=Ke(),i=l(d,!0);s(d),u(v=>p(i,v),[()=>o("deployments.deployments")]),a(_,d)},headers:(_,K)=>{var d=Oe();ce(d,21,()=>g,ge,(i,v)=>{let B=()=>e(v).label;var N=Me(),k=l(N,!0);s(N),u(()=>p(k,B())),a(i,N)}),s(d),a(_,d)}}})}),s(J),u(()=>{p(te,` ${e(x)??""}`),p(G,e(x))}),a(z,w),ue()}var Ze=f("<!> <!>",1);function kt(z,t){pe(t,!1);const[b,x]=be(),h=()=>ne(xe,"$page",b),I=h().params.deployment;Se();var j=Ze(),g=se(j);Ve(g,{title:`Deployment | ${I}`,get url(){return h().url.href}});var w=W(g,2);Ye(w,{}),a(z,j),ue(),x()}export{kt as component};
