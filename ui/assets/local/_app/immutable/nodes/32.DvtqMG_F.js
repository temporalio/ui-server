import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as H,f as D,j as e,r as t,h as o,I as i,M as l,t as q,e as B,b as K,n as pe,k as de,g as a,o as E,v as U,aO as ee,i as be,c as ae,m as re,s as Q,l as le,a as xe}from"../chunks/BBjqMsu1.js";import{i as W}from"../chunks/DIZ-FoJG.js";import{p as V,s as oe,a as ie,b as $e}from"../chunks/D42yUzBQ.js";import{p as ye}from"../chunks/oaW7T73P.js";import{P as ke}from"../chunks/BcjIxfWp.js";import{t as r}from"../chunks/DEjs8ZrU.js";import{s as c}from"../chunks/DHOm-mSm.js";import{a as we}from"../chunks/D7OjqCRS.js";import{k as Te}from"../chunks/C9OGzM-W.js";import{T as ne}from"../chunks/5sHaeCkN.js";import{c as je}from"../chunks/r33Ll6et.js";import{i as Re}from"../chunks/DrCjka1e.js";import{B as Pe}from"../chunks/CylVXXRZ.js";import{T as Ie}from"../chunks/x_H5-16D.js";import{T as Oe}from"../chunks/B-EYHHC0.js";import{a as se,d as Ce}from"../chunks/DFUWCjpx.js";import{s as Be}from"../chunks/Cd9fk9Xa.js";import{b as te}from"../chunks/CDFkFKEl.js";import{C as ve}from"../chunks/CTPlOYvl.js";import{L as Fe}from"../chunks/CSbGqH0-.js";import{u as ce}from"../chunks/DLSNOAeh.js";var Ne=D('<div class="flex flex-col gap-2"><p> </p> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <!></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <!></div> <div class="batch-operation-detail svelte-g9aet4"><p class="batch-operation-key svelte-g9aet4"> </p> <p class="batch-operation-value svelte-g9aet4"> </p></div></div>');function Ae(I,d){H(d,!1);let s=V(d,"operation",8);W();var b=Ne(),h=e(b),n=e(h,!0);t(h);var x=o(h,2),p=e(x),$=e(p,!0);t(p);var g=o(p,2),y=e(g,!0);t(g),t(x);var u=o(x,2),f=e(u),O=e(f,!0);t(f);var R=o(f,2),m=e(R,!0);t(R),t(u);var k=o(u,2),P=e(k),T=e(P,!0);t(P);var v=o(P,2),w=e(v,!0);t(v),t(k);var _=o(k,2),j=e(_),N=e(j,!0);t(j);var C=o(j,2);ne(C,{as:"p",class:"col-span-8",get dateTime(){return l(s()),i(()=>s().startTime)}}),t(_);var F=o(_,2),L=e(F),z=e(L,!0);t(L);var G=o(L,2);ne(G,{as:"p",class:"col-span-8",get dateTime(){return l(s()),i(()=>s().closeTime)}}),t(F);var J=o(F,2),A=e(J),M=e(A,!0);t(A);var S=o(A,2),X=e(S,!0);t(S),t(J),t(b),q((Y,Z,ue,fe,me,_e,he,ge)=>{c(n,Y),c($,Z),c(y,(l(s()),i(()=>s().operationType))),c(O,ue),c(m,(l(s()),i(()=>s().identity))),c(T,fe),c(w,(l(s()),i(()=>s().reason))),c(N,me),c(z,_e),c(M,he),c(X,ge)},[()=>(l(r),i(()=>r("batch.details"))),()=>(l(r),i(()=>r("batch.operation-type"))),()=>(l(r),i(()=>r("batch.identity"))),()=>(l(r),i(()=>r("common.reason"))),()=>(l(r),i(()=>r("common.start-time"))),()=>(l(r),i(()=>r("common.close-time"))),()=>(l(r),i(()=>r("batch.total-operations"))),()=>(l(s()),i(()=>Intl.NumberFormat("en-US").format(s().totalOperationCount)))]),B(I,b),K()}var Se=D('<div class="flex items-center justify-between"><div class="flex flex-col gap-2"><div class="flex flex-row items-center gap-2 max-sm:flex-col"><h1> </h1> <!></div> <p> </p></div> <!></div>');function Ue(I,d){H(d,!1);const s=()=>ie(se,"$autoRefresh",b),[b,h]=oe();let n=V(d,"operation",8);const x=je(),p=v=>{const{checked:w}=v.target;x("toggleAutoRefresh",{checked:w}),$e(se,w)},$={Completed:"success",Running:"primary",Failed:"danger",Unspecified:void 0};W();var g=Se(),y=e(g),u=e(y),f=e(u),O=e(f,!0);t(f);var R=o(f,2);Pe(R,{get type(){return l(n()),i(()=>$[n().state])},children:(v,w)=>{pe();var _=de();q(()=>c(_,(l(n()),i(()=>n().state)))),B(v,_)},$$slots:{default:!0}}),t(u);var m=o(u,2),k=e(m,!0);t(m),t(y);var P=o(y,2);{var T=v=>{{let w=E(()=>(l(r),i(()=>r("common.auto-refresh-tooltip",{interval:"5"}))));Oe(v,{top:!0,get text(){return a(w)},children:(_,j)=>{{let N=E(()=>(l(r),i(()=>r("common.auto-refresh"))));Ie(_,{id:"batch-operation-auto-refresh",get label(){return a(N)},labelPosition:"left",get checked(){return s()},$$events:{change:p}})}},$$slots:{default:!0}})}};Re(P,v=>{l(n()),i(()=>n().state==="Running")&&v(T)})}t(g),q(v=>{c(O,v),c(k,(l(n()),i(()=>n().jobId)))},[()=>(l(r),i(()=>r("batch.describe-page-title")))]),B(I,g),K(),h()}var De=D('<div class="flex flex-col gap-4"><p> </p> <div><div class="flex justify-between"><span class="text-xs font-semibold"> </span> <span class="text-xs font-semibold"> </span></div> <div class="relative h-2 w-full overflow-hidden rounded bg-indigo-100"><div class="absolute left-0 flex h-full items-center bg-indigo-600"></div></div></div> <div><div class="flex justify-between"><span class="text-xs font-semibold text-success"> </span> <span> </span></div> <div class="relative h-2 w-full overflow-hidden rounded"><div class="absolute left-0 flex h-full items-center bg-green-200"></div> <div class="absolute right-0 flex h-full items-center justify-end bg-red-200"></div></div></div></div>');function Le(I,d){H(d,!0);let s=U(()=>ee(d.operation.completeOperationCount,0)),b=U(()=>ee(d.operation.failureOperationCount,0)),h=U(()=>ee(d.operation.totalOperationCount,0));const n=(A,M)=>{const S=Math.round(A/M*100);return isNaN(S)?0:S};let x=U(()=>n(a(s),a(h))),p=U(()=>n(a(b),a(h))),$=U(()=>n(a(s)+a(b),a(h)));var g=De(),y=e(g),u=e(y,!0);t(y);var f=o(y,2),O=e(f),R=e(O),m=e(R,!0);t(R);var k=o(R,2),P=e(k);t(k),t(O);var T=o(O,2),v=e(T);t(T),t(f);var w=o(f,2),_=e(w),j=e(_),N=e(j,!0);t(j);var C=o(j,2);let F;var L=e(C,!0);t(C),t(_);var z=o(_,2),G=e(z),J=o(G,2);t(z),t(w),t(g),q((A,M,S,X,Y,Z)=>{c(u,A),c(m,M),c(P,`${S??""} / ${X??""}`),te(v,`width:${a($)??""}%;`),c(N,Y),F=Be(C,1,"text-xs font-semibold",null,F,{"text-red-700":a(p)>0}),c(L,Z),te(G,`width:${a(x)??""}%;`),te(J,`width:${a(p)??""}%;`)},[()=>r("batch.results"),()=>r("batch.operations-progress",{percent:a($)}),()=>Intl.NumberFormat("en-US").format(a(s)),()=>Intl.NumberFormat("en-US").format(a(h)),()=>r("batch.operations-succeeded",{count:a(s)}),()=>r("batch.operations-failed",{count:a(b)})]),B(I,g),K()}var Me=D("<!> <!> <!>",1),qe=D('<div class="flex flex-col gap-4"><div class="flex flex-row"><!></div> <!></div>');function Ee(I,d){H(d,!1);const s=()=>ie(se,"$autoRefresh",b),[b,h]=oe();let n=V(d,"namespace",8),x=V(d,"jobId",8),p=re(0),$;const g=m=>{m.detail.checked?Q(p,a(p)+1):$&&window.clearTimeout($)},y=()=>Ce({jobId:x(),namespace:n()}).then(m=>(s()&&m.state==="Running"&&($=window.setTimeout(()=>{Q(p,a(p)+1)},5e3)),m));W();var u=qe(),f=e(u),O=e(f);{let m=E(()=>(l(ce),l(n()),i(()=>ce({namespace:n()}))));Fe(O,{get href(){return a(m)},icon:"chevron-left",children:(k,P)=>{pe();var T=de();q(v=>c(T,v),[()=>(l(r),i(()=>r("batch.back-link")))]),B(k,T)},$$slots:{default:!0}})}t(f);var R=o(f,2);Te(R,()=>a(p),m=>{var k=be(),P=ae(k);we(P,()=>i(y),null,(T,v)=>{var w=Me(),_=ae(w);Ue(_,{get operation(){return a(v)},$$events:{toggleAutoRefresh:g}});var j=o(_,2);ve(j,{children:(C,F)=>{Ae(C,{get operation(){return a(v)}})},$$slots:{default:!0}});var N=o(j,2);ve(N,{children:(C,F)=>{Le(C,{get operation(){return a(v)}})},$$slots:{default:!0}}),B(T,w)}),B(m,k)}),t(u),B(I,u),K(),h()}var He=D("<!> <!>",1);function ut(I,d){H(d,!1);const s=()=>ie(ye,"$page",b),[b,h]=oe(),n=re(),x=re();le(()=>s(),()=>{Q(n,s().params.namespace)}),le(()=>s(),()=>{Q(x,s().params.jobId)}),xe(),W();var p=He(),$=ae(p);{let y=E(()=>(l(r),i(()=>r("batch.describe-page-title")))),u=E(()=>a(x));ke($,{get title(){return`${a(y)??""} | ${a(u)??""}`}})}var g=o($,2);Ee(g,{get jobId(){return a(x)},get namespace(){return a(n)}}),B(I,p),K(),h()}export{ut as component};
