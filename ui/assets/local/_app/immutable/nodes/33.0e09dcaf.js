import{S as D,b as K,a as M,C as v,D as b,E as k,j as g,g as h,F as E,K as d,e as w,f as P,z as $,aa as Q,ab as R,h as C,k as W,a5 as F,n as T}from"../chunks/index.9b814669.js";import{p as U}from"../chunks/stores.2a889eb1.js";import{E as V,a as X,b as Y}from"../chunks/event-summary-table.2be9399c.js";import{b as Z}from"../chunks/events-service.51a3a5dd.js";import{e as x,b as N}from"../chunks/event-view.bdeef931.js";import{f as S,e as ee}from"../chunks/events.b0b98ffc.js";function j(o,t,n){const e=o.slice();return e[18]=t[n],e}function q(o){let t,n;return t=new X({props:{loading:o[1]}}),{c(){v(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,i){k(t,e,i),n=!0},p(e,i){const r={};i&2&&(r.loading=e[1]),t.$set(r)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function z(o,t){let n,e,i;return e=new Y({props:{event:t[18],compact:t[0],expandAll:!0,initialItem:t[4],active:!0}}),{key:o,first:null,c(){n=w(),v(e.$$.fragment),this.h()},l(r){n=w(),b(e.$$.fragment,r),this.h()},h(){this.first=n},m(r,m){P(r,n,m),k(e,r,m),i=!0},p(r,m){t=r;const s={};m&4&&(s.event=t[18]),m&1&&(s.compact=t[0]),m&16&&(s.initialItem=t[4]),e.$set(s)},i(r){i||(g(e.$$.fragment,r),i=!0)},o(r){h(e.$$.fragment,r),i=!1},d(r){r&&W(n),E(e,r)}}}function te(o){let t=[],n=new Map,e,i,r=o[2];const m=l=>`${l[18].id}-${l[18].timestamp}`;for(let l=0;l<r.length;l+=1){let a=j(o,r,l),c=m(a);n.set(c,t[l]=z(c,a))}let s=null;return r.length||(s=q(o)),{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=w(),s&&s.c()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=w(),s&&s.l(l)},m(l,a){for(let c=0;c<t.length;c+=1)t[c].m(l,a);P(l,e,a),s&&s.m(l,a),i=!0},p(l,a){a&23&&(r=l[2],$(),t=Q(t,a,m,1,l,r,n,e.parentNode,R,z,e,j),C(),!r.length&&s?s.p(l,a):r.length?s&&($(),h(s,1,1,()=>{s=null}),C()):(s=q(l),s.c(),g(s,1),s.m(e.parentNode,e)))},i(l){if(!i){for(let a=0;a<r.length;a+=1)g(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)h(t[a]);i=!1},d(l){for(let a=0;a<t.length;a+=1)t[a].d(l);l&&W(e),s&&s.d(l)}}}function ne(o){let t,n;return t=new V({props:{updating:o[3],compact:o[0],$$slots:{default:[te]},$$scope:{ctx:o}}}),t.$on("expandAll",o[5]),{c(){v(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,i){k(t,e,i),n=!0},p(e,[i]){const r={};i&8&&(r.updating=e[3]),i&1&&(r.compact=e[0]),i&2097175&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function re(o,t,n){let e,i,r,m,s,l,a,c,_,u,p,I,A;d(o,U,f=>n(11,_=f)),d(o,S,f=>n(12,u=f)),d(o,ee,f=>n(13,p=f)),d(o,x,f=>n(14,I=f)),d(o,N,f=>n(15,A=f));let{compact:H=!1}=t,y=!1;const B=()=>{F(S,u=[],u),n(1,y=!0)},G=async(f,L,O)=>{u.length||(n(1,y=!0),B(),F(S,u=await Z({namespace:f,workflowId:L,runId:O}),u),n(1,y=!1))};function J(f){F(N,A=f.detail.expanded,A)}return o.$$set=f=>{"compact"in f&&n(0,H=f.compact)},o.$$.update=()=>{o.$$.dirty&2048&&n(10,{namespace:e,workflow:i,run:r}=_.params,e,(n(9,i),n(11,_)),(n(8,r),n(11,_))),o.$$.dirty&1792&&G(e,i,r),o.$$.dirty&24577&&n(7,m=I==="descending"&&!H?p==null?void 0:p.end:p==null?void 0:p.start),o.$$.dirty&4224&&n(6,s=u.length?u:m),o.$$.dirty&64&&n(4,l=s==null?void 0:s[0]),o.$$.dirty&4160&&n(3,a=s.length&&!u.length),o.$$.dirty&6144&&n(2,c=u.filter(f=>f.id===_.params.id))},[H,y,c,a,l,J,s,m,r,i,e,_,u,p,I]}class oe extends D{constructor(t){super(),K(this,t,re,ne,M,{compact:0})}}function le(o){let t,n;return t=new oe({}),{c(){v(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,i){k(t,e,i),n=!0},p:T,i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){h(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}class ce extends D{constructor(t){super(),K(this,t,null,le,M,{})}}export{ce as component};
