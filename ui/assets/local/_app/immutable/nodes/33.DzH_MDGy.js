import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ie,ae as Ae,l as z,a as _e,t as N,h as M,c as W,r as A,d as i,b as de,g as e,j as u,s as l,m as k,ac as he,f as Y,i as ae,aE as ge,e as $e,k as xe,n as Te,o as ct,ad as Bt}from"../chunks/DSxqszTl.js";import{i as ue}from"../chunks/BcaHj5WR.js";import{s as we,d as gt,a as s,b as D,m as be}from"../chunks/CZBNCVvj.js";import{p as qe}from"../chunks/BtfwzYDi.js";import{P as Mt}from"../chunks/DTWo_ajL.js";import{s as le,p as Rt,e as qt}from"../chunks/CXaSvchK.js";import{i as ee}from"../chunks/BAt4aHTa.js";import{s as Se,a as Lt}from"../chunks/Qdkaj6Y8.js";import{d as Qe,w as pe,o as Ot}from"../chunks/Cb3VdkNs.js";import{p as X,l as it,s as zt}from"../chunks/Bp73-jql.js";import{M as Ye}from"../chunks/YQwIlXEU.js";import{t as m}from"../chunks/D2OY9xdY.js";import{T as ke}from"../chunks/46pbi06Y.js";import{A as me}from"../chunks/TBME1SPK.js";import{b as Et,c as Dt,e as Qt}from"../chunks/BbHOVDBH.js";import{t as Ze}from"../chunks/DjXfOCsk.js";import{l as Le,x as et,r as Me,y as Ft,w as tt,z as Nt,q as ht,o as Ut,g as Ht}from"../chunks/BZC0vzqU.js";import{g as ot}from"../chunks/DxrQv2F8.js";import{i as rt}from"../chunks/V0ppeWDx.js";import{I as dt}from"../chunks/9Q2lRCWt.js";import{v as Re}from"../chunks/Dz_GI0CC.js";import{R as Jt,a as ut}from"../chunks/Cml8SAiC.js";import{w as Xt,a as Kt,b as Gt,T as Yt,C as Zt}from"../chunks/Chm47Ei7.js";import{S as eo,w as to,I as oo,C as ro}from"../chunks/Zp4YjUsI.js";import{W as ao,e as so,T as ft}from"../chunks/o1iUROHU.js";import{B as ye}from"../chunks/CL_ubUfG.js";import{T as Fe}from"../chunks/CFAn1g9i.js";import{w as Ke,g as mt,h as no}from"../chunks/Dnst3ETQ.js";import{W as lo}from"../chunks/BdQWynIl.js";import{k as co}from"../chunks/CvtqSEth.js";import{e as Ve,i as Be}from"../chunks/B5GJuRxG.js";import{a as Ne,d as io,s as pt}from"../chunks/DyEeuWnl.js";import{A as uo}from"../chunks/DlVC6YhT.js";import{L as wt}from"../chunks/DP7MG0sO.js";import{u as fo}from"../chunks/Bums2Kuk.js";import{I as Ge}from"../chunks/Dc8cZy7F.js";import{A as mo}from"../chunks/B3YCDKex.js";import{c as po,b as wo}from"../chunks/SYjrTX_k.js";import{T as vo}from"../chunks/BMCXpDf7.js";import{C as kt}from"../chunks/BKbjjHdT.js";import{i as $o,m as go}from"../chunks/BFTCjmKV.js";import{s as bt,i as _t}from"../chunks/CHG9V2Do.js";import{t as xt,s as ho}from"../chunks/FiZNlHGo.js";import{c as ko}from"../chunks/ChZF1bui.js";import{w as yt}from"../chunks/BlggzWwk.js";import{g as bo}from"../chunks/HcjG8CE9.js";import{z as It}from"../chunks/HDVswLBx.js";import{l as _o}from"../chunks/BeYH7yPO.js";import{s as xo}from"../chunks/80RifD-7.js";import{a as yo}from"../chunks/DQr5-uvh.js";const Io=!1,pa=Object.freeze(Object.defineProperty({__proto__:null,ssr:Io},Symbol.toStringTag,{value:"Module"}));var Co=N('<p class="mb-2"><!></p> <div class="surface-subtle mb-2 overflow-scroll whitespace-nowrap border border-subtle p-2"><code data-testid="batch-action-workflows-query"> </code></div> <span class="text-xs"><!></span>',1),Wo=N("<p><!></p>"),Po=N('<div class="mb-4 flex flex-col gap-4"><!> <!> <!> <!></div>');function at(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(I,"$allSelected",t),n=()=>s(Le,"$workflowsQuery",t),P=()=>s(e(j),"$operableWorkflowsCount",t),$=k(),j=k();let b=X(r,"action",8),T=X(r,"reason",12),p=X(r,"jobId",12),w=X(r,"reasonPlaceholder",8),c=X(r,"jobIdPlaceholder",8),y=X(r,"jobIdValid",12);const{allSelected:I,terminableWorkflows:_,cancelableWorkflows:U,selectedWorkflows:R}=Ae(je),Q=h=>{switch(h){case me.Cancel:return m("common.cancel");case me.Terminate:return m("workflows.terminate");case me.Reset:return m("workflows.reset")}},Z=h=>Qe([U,_,R],([H,F,te])=>{switch(h){case me.Cancel:return H.length;case me.Terminate:return F.length;case me.Reset:return te.length}}),d=h=>{y(/^[\w.~-]*$/.test(h.target.value))};z(()=>he(b()),()=>{l($,Q(b()))}),z(()=>he(b()),()=>{gt(l(j,Z(b())),"$operableWorkflowsCount",t)}),_e(),ue();var x=Po(),L=M(x);{var S=h=>{var H=Co(),F=Y(H),te=M(F);const se=u(()=>({action:e($)}));ke(te,{key:"workflows.batch-operation-confirmation-all",get replace(){return e(se)}}),A(F);var v=W(F,2),E=M(v),oe=M(E,!0);A(E),A(v);var re=W(v,2),ne=M(re);const ce=u(()=>({action:e($)}));ke(ne,{key:"workflows.batch-operation-count-disclaimer",get replace(){return e(ce)}}),A(re),ae(()=>le(oe,n())),i(h,H)},o=h=>{var H=Wo(),F=M(H);{var te=v=>{ke(v,{key:"workflows.batch-reset-confirmation",get count(){return P()}})},se=v=>{const E=u(()=>({action:e($)}));ke(v,{key:"workflows.batch-confirmation",get replace(){return e(E)},get count(){return P()}})};ee(F,v=>{b()===me.Reset?v(te):v(se,!1)})}A(H),i(h,H)};ee(L,h=>{f()?h(S):h(o,!1)})}var g=W(L,2);const a=u(()=>m("common.reason")),O=u(()=>m("workflows.batch-operation-confirmation-input-hint",{placeholder:w()}));dt(g,{get id(){return`bulk-action-reason-${b()??""}`},get label(){return e(a)},get hintText(){return e(O)},get placeholder(){return w()},get value(){return T()},set value(h){T(h)},$$legacy:!0});var C=W(g,2);const G=u(()=>m("common.job-id")),K=u(()=>y()?m("batch.job-id-input-hint"):m("batch.job-id-input-error"));dt(C,{id:"batch-operation-job-id",get label(){return e(G)},get hintText(){return e(K)},get placeholder(){return c()},get valid(){return y()},get value(){return p()},set value(h){p(h)},$$events:{input:d},$$legacy:!0});var J=W(C,2);Se(J,r,"default",{},null),A(x),i(q,x),de(),V()}var To=N('<h3 slot="title"><!></h3>');function jo(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(c,"$reason",t),n=()=>s(I,"$jobId",t),P=()=>s(_,"$jobIdValid",t),$=()=>s(Q,"$allSelected",t),j=()=>s(Le,"$workflowsQuery",t),b=()=>s(Z,"$cancelableWorkflows",t);let T=X(r,"namespace",8),p=X(r,"open",12);const w=ot(),c=pe(""),y=et(me.Cancel,w),I=pe(""),_=pe(!0);let U=k(Re()),R=k("");const{allSelected:Q,cancelableWorkflows:Z}=Ae(je),d=()=>{D(c,""),D(I,""),D(_,!0),l(U,Re())},x=async()=>{l(R,"");const o={namespace:T(),reason:f()?`${f()} ${y}`:y,jobId:n()||e(U),...$()?{query:j()}:{workflows:b()}};try{await Et(o),p(!1),d(),Ze.push({message:m("workflows.batch-cancel-all-success"),id:"batch-cancel-success-toast"})}catch(g){l(R,rt(g)?g.message:m("common.unknown-error"))}};z(()=>he(p()),()=>{p()&&d()}),_e(),ue();const L=u(()=>m("common.cancel")),S=u(()=>m("common.confirm"));Ye(q,{id:"batch-cancel-confirmation-modal","data-testid":"batch-cancel-confirmation",confirmType:"destructive",get cancelText(){return e(L)},confirmDisabled:!_,get confirmText(){return e(S)},get open(){return p()},set open(o){p(o)},get error(){return e(R)},set error(o){l(R,o)},$$events:{confirmModal:x},$$slots:{title:(o,g)=>{var a=To(),O=M(a);ke(O,{key:"workflows.batch-cancel-modal-title"}),A(a),i(o,a)},content:(o,g)=>{at(o,{get jobIdPlaceholder(){return e(U)},reasonPlaceholder:y,get action(){return me.Cancel},get reason(){return be(),f()},set reason(a){D(c,a)},get jobId(){return be(),n()},set jobId(a){D(I,a)},get jobIdValid(){return be(),P()},set jobIdValid(a){D(_,a)},$$legacy:!0})}},$$legacy:!0}),de(),V()}var So=N('<h3 slot="title"><!></h3>'),Ao=N("<!> <!>",1);function Vo(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(U,"$reason",t),n=()=>s(Q,"$jobId",t),P=()=>s(Z,"$jobIdValid",t),$=()=>s(e(I),"$resetType",t),j=()=>s(d,"$allSelected",t),b=()=>s(Le,"$workflowsQuery",t),T=()=>s(x,"$selectedWorkflows",t);let p=X(r,"namespace",8),w=X(r,"open",12,!1),c=k(""),y=k(Re()),I=k(pe("first"));const _=ot(),U=pe(""),R=et(me.Reset,_),Q=pe(""),Z=pe(!0),{allSelected:d,selectedWorkflows:x}=Ae(je),L=()=>{D(U,""),D(Q,""),D(Z,!0),l(y,Re())},S=async()=>{l(c,"");const a={namespace:p(),reason:f()?`${f()} ${R}`:R,jobId:n()||e(y),resetType:$(),...j()?{query:b()}:{workflows:T()}};try{await Dt(a),w(!1),L(),Ze.push({message:m("workflows.batch-reset-all-success"),id:"batch-reset-success-toast"})}catch(O){l(c,rt(O)?O.message:m("common.unknown-error"))}};z(()=>he(w()),()=>{w()&&L()}),_e(),ue();const o=u(()=>m("common.cancel")),g=u(()=>m("workflows.reset"));Ye(q,{get cancelText(){return e(o)},get confirmText(){return e(g)},id:"batch-reset-confirmation-modal",confirmType:"destructive",get error(){return e(c)},set error(a){l(c,a)},get open(){return w()},set open(a){w(a)},$$events:{confirmModal:S},$$slots:{title:(a,O)=>{var C=So(),G=M(C);ke(G,{key:"workflows.batch-reset-modal-title"}),A(C),i(a,C)},content:(a,O)=>{at(a,{get jobIdPlaceholder(){return e(y)},reasonPlaceholder:R,get action(){return me.Reset},get reason(){return be(),f()},set reason(C){D(U,C)},get jobId(){return be(),n()},set jobId(C){D(Q,C)},get jobIdValid(){return be(),P()},set jobIdValid(C){D(Z,C)},children:(C,G)=>{const K=u(()=>m("workflows.reset-event-radio-group-description"));Jt(C,{get description(){return e(K)},name:"reset-event",get group(){return e(I)},set group(J){gt(l(I,J),"$resetType",t)},children:(J,h)=>{var H=Ao(),F=Y(H);ut(F,{id:"reset-event-first",value:"first",label:"First Workflow task"});var te=W(F,2);ut(te,{id:"reset-event-last",value:"last",label:"Last Workflow task"}),i(J,H)},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0},$$legacy:!0})}},$$legacy:!0}),de(),V()}var Bo=N('<h3 slot="title"><!></h3>');function Mo(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(c,"$reason",t),n=()=>s(I,"$jobId",t),P=()=>s(_,"$jobIdValid",t),$=()=>s(Q,"$allSelected",t),j=()=>s(Le,"$workflowsQuery",t),b=()=>s(Z,"$terminableWorkflows",t);let T=X(r,"namespace",8),p=X(r,"open",12);const w=ot(),c=pe(""),y=et(me.Terminate,w),I=pe(""),_=pe(!0);let U=k(Re()),R=k("");const{allSelected:Q,terminableWorkflows:Z}=Ae(je),d=()=>{D(c,""),D(I,""),D(_,!0),l(U,Re())},x=async()=>{l(R,"");try{const o={namespace:T(),reason:f()?`${f()} ${y}`:y,jobId:n()||e(U),...$()?{query:j()}:{workflows:b()}};await Qt(o),p(!1),d(),Ze.push({message:m("workflows.batch-terminate-all-success"),id:"batch-terminate-success-toast"})}catch(o){l(R,rt(o)?o.message:m("common.unknown-error"))}};z(()=>he(p()),()=>{p()&&d()}),_e(),ue();const L=u(()=>m("common.cancel")),S=u(()=>m("workflows.terminate"));Ye(q,{id:"batch-terminate-confirmation-modal","data-testid":"batch-terminate-confirmation",confirmType:"destructive",get cancelText(){return e(L)},confirmDisabled:!_,get confirmText(){return e(S)},get open(){return p()},set open(o){p(o)},get error(){return e(R)},set error(o){l(R,o)},$$events:{confirmModal:x},$$slots:{title:(o,g)=>{var a=Bo(),O=M(a);ke(O,{key:"workflows.batch-terminate-modal-title"}),A(a),i(o,a)},content:(o,g)=>{at(o,{reasonPlaceholder:y,get jobIdPlaceholder(){return e(U)},get action(){return me.Terminate},get reason(){return be(),f()},set reason(a){D(c,a)},get jobId(){return be(),n()},set jobId(a){D(I,a)},get jobIdValid(){return be(),P()},set jobIdValid(a){D(_,a)},$$legacy:!0})}},$$legacy:!0}),de(),V()}var Ro=N('<div class="flex w-full items-start gap-1"><!> <!></div>');function qo(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(mt,"$searchInputViewOpen",t),n=()=>s(Ke,"$workflowFilters",t),P=k();var $=k();z(()=>ge($),()=>{l(P,to.match(l($,window==null?void 0:window.location)===null||ge($)===void 0?void 0:ge($).pathname))}),_e(),ue();var j=Ro(),b=M(j);{var T=c=>{const y=u(()=>m("workflows.close-search-input"));Fe(c,{get text(){return e(y)},topLeft:!0,children:(I,_)=>{ye(I,{"data-testid":"manual-search-toggle",id:"close-search-input",variant:"ghost",class:"mt-1",leadingIcon:"filter",size:"xs",$$events:{click:()=>D(mt,!1)}})},$$slots:{default:!0}})};ee(b,c=>{f()&&e(P)&&c(T)})}var p=W(b,2);const w=u(()=>!f());eo(p,{get showFilter(){return e(w)},refresh:()=>{D(Me,Date.now())},get filters(){return be(),n()},set filters(c){D(Ke,c)},children:(c,y)=>{var I=$e(),_=Y(I);{var U=R=>{ao(R,{})};ee(_,R=>{f()&&R(U)})}i(c,I)},$$slots:{default:!0},$$legacy:!0}),A(j),i(q,j),de(),V()}function Lo(q,r){ie(r,!1);const[t,V]=we();let f=X(r,"count",8,0);ue(),ye(q,{size:"xs",variant:"ghost",leadingIcon:"retry",$$events:{click:()=>D(Me,Date.now())},children:(n,P)=>{var $=$e(),j=Y($);{var b=p=>{var w=xe();ae(c=>le(w,`+${c??""}`),[()=>f().toLocaleString()],u),i(p,w)},T=(p,w)=>{{var c=y=>{var I=xe();ae(_=>le(I,_),[()=>f().toLocaleString()],u),i(y,I)};ee(p,y=>{f()<0&&y(c)},w)}};ee(j,p=>{f()>0?p(b):p(T,!1)})}i(n,$)},$$slots:{default:!0}}),de(),V()}const vt=""+new URL("../assets/empty-state-dark_2x.BtTCLk6j.png",import.meta.url).href,Xe=""+new URL("../assets/empty-state-light_2x.BAwLJnNu.png",import.meta.url).href;var Oo=N('<link rel="preload" as="image"> <link rel="preload" as="image">',1),zo=N("<p> </p> <p> </p>",1),Eo=N("<li><!></li>"),Do=N('<!> <p> <!>.</p> <ul class="flex flex-col gap-2"></ul>',1),Qo=N('<div class="h-auto w-full overflow-hidden xl:flex xl:min-h-[480px] xl:flex-row" aria-live="polite"><div class="surface-primary flex w-auto min-w-[280px] flex-col gap-4 p-8 xl:min-w-[520px] xl:flex-1"><h2><!></h2> <!></div> <div class="bg-[#DDD6FE] bg-contain bg-no-repeat xl:flex xl:min-h-full xl:max-w-[1050px] xl:flex-1 xl:items-stretch xl:justify-center"><img alt="" class="max-h-full max-w-full object-contain xl:hidden"></div></div>');function Fo(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(qe,"$page",t),n=()=>s(fo,"$useDarkMode",t),P=()=>s(Ft,"$workflowError",t),$=k(),j=k(),b=["samples-go","samples-java","samples-typescript","samples-python","samples-dotnet","samples-php"];z(()=>f(),()=>{l($,f().url.searchParams.get("query"))}),z(()=>(n(),Xe),()=>{l(j,n()?vt:Xe)}),_e(),ue();var T=Qo();Rt(d=>{var x=Oo(),L=Y(x);Ne(L,"href",vt);var S=W(L,2);Ne(S,"href",Xe),i(d,x)});var p=M(T),w=M(p),c=M(w);{var y=d=>{var x=xe();ae(L=>le(x,L),[()=>m("workflows.workflow-query-empty-state-title")],u),i(d,x)},I=d=>{var x=xe();ae(L=>le(x,L),[()=>m("workflows.workflow-empty-state-title")],u),i(d,x)};ee(c,d=>{e($)?d(y):d(I,!1)})}A(w);var _=W(w,2);{var U=d=>{const x=u(()=>m("workflows.workflow-query-error-state"));uo(d,{intent:"warning",icon:"warning",get title(){return e(x)},style:"overflow-wrap: anywhere",children:(L,S)=>{Te();var o=xe();ae(()=>le(o,P())),i(L,o)},$$slots:{default:!0}})},R=(d,x)=>{{var L=o=>{var g=zo(),a=Y(g),O=M(a,!0);A(a);var C=W(a,2),G=M(C,!0);A(C),ae((K,J)=>{le(O,K),le(G,J)},[()=>m("workflows.workflow-query-empty-state-preface"),()=>m("workflows.workflow-query-empty-state-postface")],u),i(o,g)},S=o=>{var g=Do(),a=Y(g);Se(a,r,"cloud",{},null);var O=W(a,2),C=M(O),G=W(C);wt(G,{newTab:!0,href:"https://github.com/temporalio",children:(J,h)=>{Te();var H=xe("github.com/temporalio");i(J,H)},$$slots:{default:!0}}),Te(),A(O);var K=W(O,2);Ve(K,5,()=>b,Be,(J,h)=>{var H=Eo(),F=M(H);wt(F,{icon:"github",newTab:!0,get href(){return`https://github.com/temporalio/${e(h)??""}`},children:(te,se)=>{Te();var v=xe();ae(()=>le(v,e(h))),i(te,v)},$$slots:{default:!0}}),A(H),i(J,H)}),A(K),ae(J=>le(C,`${J??""} `),[()=>m("workflows.workflow-empty-state-description")],u),i(o,g)};ee(d,o=>{e($)?o(L):o(S,!1)},x)}};ee(_,d=>{P()?d(U):d(R,!1)})}A(p);var Q=W(p,2),Z=M(Q);A(Q),A(T),ae(()=>{io(Q,`background-image: url(${e(j)??""});`),Ne(Z,"src",e(j))}),i(q,T),de(),V()}const No=["workflowCancelDisabled","workflowTerminateDisabled"],Uo=q=>q.disableWriteActions||q.batchActionsDisabled?!1:No.some(r=>!q[r]),Ct=Qe([xt,bt,ho,_t],([q,r,t,V])=>(V?!0:$o(q,"1.18.0"))&&r&&Uo(t));var Ho=N('<span class="font-medium"><!></span>'),Jo=N('<span> <button data-testid="select-all-workflows" class="cursor-pointer underline"><!></button> </span>'),Xo=N('<span class="font-medium"><!></span> <!>',1),Ko=N('<!> <div class="ml-4 inline-flex gap-2"><!> <!> <!></div>',1);function Go(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(R,"$selectedWorkflows",t),n=()=>s(qe,"$page",t),P=()=>s(o,"$coreUser",t),$=()=>s(_t,"$isCloud",t),j=()=>s(xt,"$temporalVersion",t),b=()=>s(Q,"$allSelected",t),T=()=>s(tt,"$workflowCount",t),p=()=>s(Le,"$workflowsQuery",t),w=()=>s(d,"$cancelableWorkflows",t),c=k(),y=k(),I=k();var _=k();let U=X(r,"workflows",8);const{selectedWorkflows:R,allSelected:Q,handleSelectAll:Z,cancelableWorkflows:d,openBatchCancelConfirmationModal:x,openBatchTerminateConfirmationModal:L,openBatchResetConfirmationModal:S}=Ae(je);let o=ko(),g=k();z(()=>(ge(_),f()),()=>{l(g,l(_,f()===null||f()===void 0?void 0:f().length)!==null&&ge(_)!==void 0?ge(_):0)}),z(()=>(n(),P()),()=>{l(c,Xt(n().data.settings,P(),n().params.namespace))}),z(()=>(n(),P()),()=>{l(y,Kt(n().data.settings,P(),n().params.namespace))}),z(()=>(n(),P(),$(),j()),()=>{l(I,Gt(n().data.settings,P(),n().params.namespace)&&$()?!0:go("1.23.0",j()))}),_e(),ue();var a=Ko(),O=Y(a);{var C=v=>{var E=Ho(),oe=M(E);ke(oe,{key:"workflows.all-selected",get count(){return T().count}}),A(E),i(v,E)},G=v=>{var E=Xo(),oe=Y(E),re=M(oe);ke(re,{key:"workflows.n-selected",get count(){return e(g)}}),A(oe);var ne=W(oe,2);{var ce=ve=>{var Ce=Jo(),We=M(Ce),Pe=W(We),Oe=M(Pe);ke(Oe,{key:"workflows.select-all",get count(){return T().count}}),A(Pe);var ze=W(Pe);A(Ce),ae((Ue,He)=>{le(We,`(${Ue??""} `),le(ze,` ${He??""})`)},[()=>m("workflows.select-all-leading"),()=>m("workflows.select-all-trailing")],u),qt("click",Pe,()=>Z(U())),i(ve,Ce)};ee(ne,ve=>{p()&&ve(ce)})}i(v,E)};ee(O,v=>{b()?v(C):v(G,!1)})}var K=W(O,2),J=M(K);{var h=v=>{const E=u(()=>!w().length);ye(v,{size:"xs",variant:"ghost",class:"focus-visible:border-table","data-testid":"bulk-cancel-button",get disabled(){return e(E)},$$events:{click:x},children:(oe,re)=>{Te();var ne=xe();ae(ce=>le(ne,ce),[()=>m("workflows.request-cancellation")],u),i(oe,ne)},$$slots:{default:!0}})};ee(J,v=>{e(y)&&v(h)})}var H=W(J,2);{var F=v=>{ye(v,{size:"xs",variant:"ghost",class:"focus-visible:border-table","data-testid":"bulk-reset-button",$$events:{click:S},children:(E,oe)=>{Te();var re=xe();ae(ne=>le(re,ne),[()=>m("workflows.reset")],u),i(E,re)},$$slots:{default:!0}})};ee(H,v=>{e(I)&&v(F)})}var te=W(H,2);{var se=v=>{ye(v,{size:"xs",variant:"destructive",class:"focus-visible:border-table","data-testid":"bulk-terminate-button",$$events:{click:L},children:(E,oe)=>{Te();var re=xe();ae(ne=>le(re,ne),[()=>m("workflows.terminate")],u),i(E,re)},$$slots:{default:!0}})};ee(te,v=>{e(c)&&v(se)})}A(K),i(q,a),de(),V()}var Yo=N('<th class="batch-actions-checkbox-table-cell svelte-zmv232"><!></th>'),Zo=N('<th class="batch-actions-table-cell svelte-zmv232"><!></th>'),er=N('<tr><!><th class="w-6"></th><!></tr>');function tr(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(y,"$selectedWorkflows",t),n=()=>s(Ct,"$supportsBulkActions",t),P=()=>s(I,"$pageSelected",t),$=()=>s(_,"$batchActionsVisible",t),j=k(),b=k();let T=X(r,"workflows",8),p=X(r,"empty",8),w=X(r,"columnsCount",8);const{handleSelectPage:c,selectedWorkflows:y,pageSelected:I,batchActionsVisible:_}=Ae(je),U=S=>{const{checked:o}=S.detail;c(o,T())};z(()=>(f(),he(T())),()=>{l(j,f().length>0&&f().length<T().length)}),z(()=>m,()=>{l(b,m("workflows.select-all-workflows"))}),_e(),ue();var R=er(),Q=M(R);{var Z=S=>{var o=Yo(),g=M(o);kt(g,{get label(){return e(b)},labelHidden:!0,id:"select-visible-workflows","data-testid":"batch-actions-checkbox",get indeterminate(){return e(j)},get checked(){return be(),P()},set checked(a){D(I,a)},$$events:{change:U},$$legacy:!0}),A(o),i(S,o)};ee(Q,S=>{!p()&&n()&&S(Z)})}var d=W(Q,2);{var x=S=>{var o=Zo(),g=M(o);Go(g,{get workflows(){return T()}}),A(o),ae(()=>Ne(o,"colspan",w())),i(S,o)},L=S=>{var o=$e(),g=Y(o);Se(g,r,"default",{},null),i(S,o)};ee(d,S=>{n()&&$()?S(x):S(L,!1)})}A(R),i(q,R),de(),V()}function or(q,r){const t=it(r,["children","$$slots","$$events","$$legacy"]),V=it(t,["namespace","workflowId","taskQueue","workflowType"]);ie(r,!1);const f=k();let n=X(r,"namespace",8),P=X(r,"workflowId",8),$=X(r,"taskQueue",8),j=X(r,"workflowType",8);z(()=>(he(n()),he(P()),he($()),he(j())),()=>{l(f,It({namespace:n(),workflowId:P(),taskQueue:$(),workflowType:j()}))}),_e(),ue();const b=u(()=>m("workflows.start-workflow-like-this-one"));Fe(q,{get text(){return e(b)},topLeft:!0,children:(T,p)=>{ye(T,zt({size:"xs",variant:"ghost",class:"start-button",leadingIcon:"lightning-bolt"},()=>V,{$$events:{click:()=>bo(e(f))}}))},$$slots:{default:!0}}),de()}var rr=N('<td class="relative"><!></td> <td><!> <!></td>',1),ar=N("<td></td>"),sr=N('<tr data-testid="workflows-summary-configurable-table-row"><!><!></tr>');function $t(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(qe,"$page",t),n=()=>s(Ct,"$supportsBulkActions",t),P=()=>s(R,"$selectedWorkflows",t),$=()=>s(U,"$allSelected",t),j=()=>s(no,"$hideChildWorkflows",t),b=k(),T=k(),p=k();let w=X(r,"workflow",8,void 0),c=X(r,"empty",8,!1),y=X(r,"viewChildren",8,()=>{}),I=X(r,"childCount",8,void 0),_=X(r,"child",8,!1);const{allSelected:U,selectedWorkflows:R}=Ae(je);z(()=>(e(b),f()),()=>{(o=>l(b,o.namespace))(f().params)}),z(()=>he(w()),()=>{l(T,m("workflows.select-workflow",{workflow:w()===null||w()===void 0?void 0:w().id}))}),z(()=>he(I()),()=>{l(p,I()!==void 0)}),_e(),ue();var Q=sr();let Z;var d=M(Q);{var x=o=>{var g=rr(),a=Y(g),O=M(a);kt(O,{get label(){return e(T)},labelHidden:!0,get value(){return w()},get disabled(){return $()},get"aria-label"(){return e(T)},get group(){return be(),P()},set group(h){D(R,h)},$$legacy:!0}),A(a);var C=W(a,2),G=M(C);{var K=h=>{or(h,{get namespace(){return e(b)},get workflowId(){return w().id},get taskQueue(){return w().taskQueue},get workflowType(){return w().name}})};ee(G,h=>{yt(f())||h(K)})}var J=W(G,2);oo(J,{minimumVersion:"1.23.0",children:(h,H)=>{var F=$e(),te=Y(F);{var se=v=>{const E=u(()=>e(p)?"primary":"ghost");ye(v,{size:"xs",get variant(){return e(E)},$$events:{click:()=>y()(w())},children:(oe,re)=>{const ne=u(()=>e(p)?m("workflows.children",{count:I()}):m("workflows.show-children"));Fe(oe,{get text(){return e(ne)},topLeft:!0,children:(ce,ve)=>{Ge(ce,{name:"relationship",class:"scale-80"})},$$slots:{default:!0}})},$$slots:{default:!0}})};ee(te,v=>{j()&&!_()&&v(se)})}i(h,F)},$$slots:{default:!0}}),A(C),ae(()=>pt(C,1,`cursor-point relative flex items-center justify-center gap-0.5 py-0.5 ${(j()||_()?"w-auto":"w-6")??""}`)),i(o,g)},L=o=>{var g=ar();i(o,g)};ee(d,o=>{!c()&&n()?o(x):o(L,!1)})}var S=W(d);Se(S,r,"default",{},null),A(Q),ae(o=>Z=pt(Q,1,"dense svelte-1j41e4d",null,Z,o),[()=>({empty:c(),child:_()})],u),i(q,Q),de(),V()}var nr=N("<!> <!>",1),lr=N('<caption class="sr-only" slot="caption"> </caption>'),cr=N("<!> <!>",1);function ir(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(qe,"$page",t),n=()=>s(po,"$configurableTableColumns",t),P=()=>s(Me,"$refresh",t),$=()=>s(ht,"$queryWithParentWorkflowId",t),j=()=>s(tt,"$workflowCount",t),b=k(),T=k(),p=k(),w=k();var c=k(),y=k();let I=X(r,"onClickConfigure",8),_=k([]);const U=()=>{l(_,[])},R=async d=>{if(e(p)(d))l(_,e(_).filter(x=>x.workflowId!==d.id&&x.runId!==d.runId));else{const x=await Ut(e(b),d.id,d.runId);l(_,[{workflowId:d.id,runId:d.runId,children:x},...e(_)])}};z(()=>(e(b),f()),()=>{(d=>l(b,d.namespace))(f().params)}),z(()=>(ge(y),ge(c),n(),e(b)),()=>{l(T,l(y,l(c,n()===null||n()===void 0?void 0:n()[e(b)])===null||ge(c)===void 0?void 0:ge(c).workflows)!==null&&ge(y)!==void 0?ge(y):[])}),z(()=>(P(),$()),()=>{P(),$(),U()}),z(()=>e(_),()=>{l(p,d=>e(_).find(x=>x.workflowId===d.id&&x.runId===d.runId))}),z(()=>(e(b),$()),()=>{l(w,()=>Nt(e(b),$()))}),_e(),ue();var Q=$e(),Z=Y(Q);co(Z,()=>[e(b),$(),P()],d=>{const x=u(()=>m("common.workflows")),L=u(()=>m("common.per-page")),S=u(()=>m("common.next")),o=u(()=>m("common.previous")),g=u(()=>m("workflows.empty-state-title"));mo(d,{get total(){return j().count},get onFetch(){return e(w)},get"aria-label"(){return e(x)},get pageSizeSelectLabel(){return e(L)},get nextButtonLabel(){return e(S)},get previousButtonLabel(){return e(o)},get emptyStateMessage(){return e(g)},children:ct,$$slots:{default:(a,O)=>{const C=u(()=>O.visibleItems);var G=$e(),K=Y(G);Ve(K,1,()=>e(C),Be,(J,h)=>{var H=nr(),F=Y(H);const te=u(()=>{var E;return(E=e(p)(e(h)))==null?void 0:E.children.length});$t(F,{get workflow(){return e(h)},viewChildren:R,get childCount(){return e(te)},children:(E,oe)=>{var re=$e(),ne=Y(re);Ve(ne,1,()=>e(T),Be,(ce,ve)=>{ft(ce,{get workflow(){return e(h)},get column(){return e(ve)}})}),i(E,re)},$$slots:{default:!0}});var se=W(F,2);{var v=E=>{var oe=$e(),re=Y(oe);Ve(re,1,()=>e(p)(e(h)).children,Be,(ne,ce)=>{$t(ne,{get workflow(){return e(ce)},child:!0,children:(ve,Ce)=>{var We=$e(),Pe=Y(We);Ve(Pe,1,()=>e(T),Be,(Oe,ze)=>{ft(Oe,{get workflow(){return e(ce)},get column(){return e(ze)}})}),i(ve,We)},$$slots:{default:!0}})}),i(E,oe)};ee(se,E=>{e(p)(e(h))&&E(v)})}i(J,H)}),i(a,G)},caption:(a,O)=>{var C=lr(),G=M(C,!0);A(C),ae(K=>le(G,K),[()=>m("common.workflows")],u),i(a,C)},headers:(a,O)=>{const C=u(()=>e(G).length===0),G=u(()=>O.visibleItems);tr(a,{get columnsCount(){return e(T).length},get empty(){return e(C)},slot:"headers",get workflows(){return e(G)},children:ct,$$slots:{default:(K,J)=>{var h=$e(),H=Y(h);Ve(H,1,()=>e(T),Be,(F,te)=>{vo(F,{get column(){return e(te)}})}),i(K,h)}}})},empty:(a,O)=>{Fo(a,{$$slots:{cloud:(C,G)=>{var K=$e(),J=Y(K);Se(J,r,"cloud",{},null),i(C,K)}}})},"actions-end-additional":(a,O)=>{const C=u(()=>O.visibleItems),G=u(()=>O.page);var K=cr(),J=Y(K);const h=u(()=>m("common.download-json"));Fe(J,{get text(){return e(h)},top:!0,children:(F,te)=>{ye(F,{"data-testid":"export-history-button",size:"xs",variant:"ghost",$$events:{click:()=>so(e(C),e(G))},children:(se,v)=>{Ge(se,{name:"download"})},$$slots:{default:!0}})},$$slots:{default:!0}});var H=W(J,2);Fe(H,{text:"Configure Columns",top:!0,children:(F,te)=>{ye(F,{"data-testid":"workflows-summary-table-configuration-button",size:"xs",variant:"ghost",$$events:{click(...se){var v;(v=I())==null||v.apply(this,se)}},children:(se,v)=>{Ge(se,{name:"settings"})},$$slots:{default:!0}})},$$slots:{default:!0}}),i(a,K)}}})}),i(q,Q),de(),V()}const je="BATCH_OPERATION_CONTEXT";var dr=N('<span data-testid="workflow-count"> </span> <!>',1),ur=N('<div class="flex items-center gap-4"><!> <!></div>'),fr=N('<!> <!> <!> <!> <!> <header class="flex flex-col gap-2"><div class="flex flex-col justify-between gap-2 md:flex-row"><h1 class="flex items-center gap-2" data-cy="workflows-title"><!> <!></h1> <!></div> <!></header> <!> <!> <!>',1);function mr(q,r){const t=Lt(r);ie(r,!1);const[V,f]=we(),n=()=>s(qe,"$page",V),P=()=>s(xo,"$searchAttributes",V),$=()=>s(g,"$selectedWorkflows",V),j=()=>s(ht,"$queryWithParentWorkflowId",V),b=()=>s(Me,"$refresh",V),T=()=>s(bt,"$supportsAdvancedVisibility",V),p=()=>s(tt,"$workflowCount",V),w=k(),c=k(),y=k(),I=k(),_=k(),U=k();Ot(()=>{D(_o,n().params.namespace),e(w)&&D(Ke,yo(e(w),P()))});const R=()=>{D(S,!1),D(o,!1),D(g,[])};let Q=k(!1),Z=k(!1),d=k(!1),x=k(!1),L=k(!1);const S=pe(!1),o=pe(!1),g=pe([]),a=Qe(g,B=>B.length>0),O=Qe(g,B=>B.filter(fe=>fe.canBeTerminated)),C=Qe(g,B=>B.filter(fe=>fe.status==="Running"));Bt(je,{allSelected:S,pageSelected:o,terminableWorkflows:O,cancelableWorkflows:C,selectedWorkflows:g,batchActionsVisible:a,openBatchCancelConfirmationModal:()=>{$().length>1?l(Z,!0):l(L,!0)},openBatchTerminateConfirmationModal:()=>{$().length>1?l(Q,!0):l(x,!0)},openBatchResetConfirmationModal:()=>{l(d,!0)},handleSelectAll:B=>{S.set(!0),g.set([...B])},handleSelectPage:(B,fe)=>{o.set(B),S&&S.set(!1),B?g.set([...fe]):g.set([])}});let F=k(!1);const te=()=>{l(F,!0)};z(()=>n(),()=>{l(w,n().url.searchParams.get("query"))}),z(()=>e(w),()=>{e(w),D(Le,e(w))}),z(()=>n(),()=>{l(c,n().params.namespace)}),z(()=>n(),()=>{l(y,n().url.searchParams.get("per-page"))}),z(()=>n(),()=>{l(I,n().url.searchParams.toString())}),z(()=>e(I),()=>{e(I),D(Ht,e(I))}),z(()=>(e(c),n()),()=>{l(_,wo(e(c),n().data.settings))}),z(()=>(e(c),j(),e(y),b()),()=>{e(c),j(),e(y),b(),R()}),z(()=>n(),()=>{l(U,!yt(n()))}),_e(),ue();var se=fr(),v=Y(se);Mo(v,{get namespace(){return e(c)},get open(){return e(Q)},set open(B){l(Q,B)},$$legacy:!0});var E=W(v,2);jo(E,{get namespace(){return e(c)},get open(){return e(Z)},set open(B){l(Z,B)},$$legacy:!0});var oe=W(E,2);Vo(oe,{get namespace(){return e(c)},get open(){return e(d)},set open(B){l(d,B)},$$legacy:!0});var re=W(oe,2);Yt(re,{refresh:Me,get namespace(){return e(c)},get workflow(){return $()[0]},get open(){return e(x)},set open(B){l(x,B)},$$legacy:!0});var ne=W(re,2);Zt(ne,{refresh:Me,get namespace(){return e(c)},get workflow(){return $()[0]},get open(){return e(L)},set open(B){l(L,B)},$$legacy:!0});var ce=W(ne,2),ve=M(ce),Ce=M(ve),We=M(Ce);{var Pe=B=>{var fe=dr(),Ie=Y(fe),Ee=M(Ie,!0);A(Ie);var Je=W(Ie,2);ke(Je,{key:"common.workflows-plural",get count(){return p().count}}),ae(De=>le(Ee,De),[()=>p().count.toLocaleString()],u),i(B,fe)},Oe=B=>{ke(B,{key:"workflows.recent-workflows"})};ee(We,B=>{T()?B(Pe):B(Oe,!1)})}var ze=W(We,2);Lo(ze,{get count(){return p().newCount}}),A(Ce);var Ue=W(Ce,2);{var He=B=>{var fe=ur(),Ie=M(fe);Se(Ie,r,"header-actions",{},null);var Ee=W(Ie,2);{var Je=De=>{const St=u(()=>It({namespace:e(c)}));ye(De,{leadingIcon:"lightning-bolt",get href(){return e(St)},children:(At,wr)=>{Te();var lt=xe();ae(Vt=>le(lt,Vt),[()=>m("workflows.start-workflow")],u),i(At,lt)},$$slots:{default:!0}})};ee(Ee,De=>{e(U)&&De(Je)})}A(fe),i(B,fe)};ee(Ue,B=>{(t["header-actions"]||e(U))&&B(He)})}A(ve);var Wt=W(ve,2);lo(Wt,{}),A(ce);var st=W(ce,2);qo(st,{});var nt=W(st,2);ir(nt,{onClickConfigure:te,$$slots:{cloud:(B,fe)=>{var Ie=$e(),Ee=Y(Ie);Se(Ee,r,"cloud",{},null),i(B,Ie)}}});var Pt=W(nt,2);const Tt=u(()=>m("common.columns")),jt=u(()=>m("common.workflows-table"));ro(Pt,{get availableColumns(){return e(_)},get type(){return e(Tt)},get title(){return e(jt)},get open(){return e(F)},set open(B){l(F,B)},$$legacy:!0}),i(q,se),de(),f()}var pr=N("<!> <!>",1);function wa(q,r){ie(r,!1);const[t,V]=we(),f=()=>s(qe,"$page",t);ue();var n=pr(),P=Y(n);const $=u(()=>`Workflows | ${f().params.namespace}`);Mt(P,{get title(){return e($)},get url(){return f().url.href}});var j=W(P,2);mr(j,{}),i(q,n),de(),V()}export{wa as component,pa as universal};
