import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as N,ac as r,ah as ne,aI as le,g as e,s as ie,t as R,i as y,r as b,e as p,b as O,h as Q,f as T,c as d,j,n as ce,k as me,o as fe}from"../chunks/kQSYtCfc.js";import{i as pe}from"../chunks/mtgEvp4k.js";import{a as $,s as V}from"../chunks/BLseHJlf.js";import{p as ue}from"../chunks/BbClJeH-.js";import{P as ve}from"../chunks/BW5xTiVz.js";import{t as o}from"../chunks/BXv1jDVW.js";import{W as we}from"../chunks/BlX4pZtz.js";import{s as U}from"../chunks/DFbJB1Uf.js";import{a as ke}from"../chunks/rA5XHaV_.js";import{i as z}from"../chunks/CpVHIMM-.js";import{p as J}from"../chunks/DFmLOLpq.js";import{A as K}from"../chunks/Ct3nl5pm.js";import{C as de}from"../chunks/CWm2krKn.js";import{E as M}from"../chunks/BvHcuwx3.js";import{L as _e}from"../chunks/D17MRw8s.js";import{S as B}from"../chunks/B_CHBn42.js";import{g as ge}from"../chunks/Cd0PkY6s.js";import{a as $e}from"../chunks/DHTi-o2-.js";import{f as he,t as xe,r as ye}from"../chunks/BD1pGni1.js";import{w as be,r as Te}from"../chunks/BQnEew7C.js";var Re=R('<!> <p> </p> <div class="my-2 flex h-full items-start"><!></div>',1),Ie=R('<div class="flex flex-col gap-2"><!> <!> <!></div>'),Pe=R("<p> <!> </p>"),Se=R("<section><!></section>");function qe(A,C){N(C,!0);const[w,E]=V(),h=()=>$(be,"$workflowRun",w),I=()=>$(Te,"$refresh",w),P=()=>$(xe,"$timeFormat",w),S=()=>$(ye,"$relativeTime",w),x=()=>$($e,"$authUser",w);let i=r(()=>h().workflow),q=r(()=>h().workers);const G=r(()=>J.params.namespace);let H=ne(void 0),X=r(()=>he(I()?new Date(I()):new Date,P(),{relative:S(),abbrFormat:!0}));const Y=()=>{var n;return ge({workflow:e(i),namespace:e(G)},(n=J.data)===null||n===void 0?void 0:n.settings,x()===null||x()===void 0?void 0:x().accessToken)};le(()=>{!(e(i)===null||e(i)===void 0)&&e(i).isRunning&&ie(H,Y(),!0)});var L=Se(),Z=y(L);{var ee=n=>{var k=Q(),_=T(k);ke(_,()=>e(H),c=>{var s=Ie(),m=y(s);B(m,{class:"h-16 w-1/3 rounded-sm"});var u=d(m,2);B(u,{class:"h-3 w-32"});var f=d(u,2);B(f,{class:"h-48 w-full rounded-sm"}),b(s),p(c,s)},(c,s)=>{var m=Q(),u=T(m);{var f=t=>{var l=Re(),D=T(l);const v=r(()=>o("workflows.call-stack-alert"));K(D,{intent:"info",get title(){return e(v)},class:"mb-4 w-fit"});var g=d(D,2),F=y(g);b(g);var W=d(g,2),re=y(W);const oe=r(()=>o("common.copy-icon-title")),se=r(()=>o("common.copy-success-icon-title"));de(re,{get content(){return e(s)},language:"text",testId:"query-call-stack",get copyIconTitle(){return e(oe)},get copySuccessIconTitle(){return e(se)}}),b(W),j(ae=>U(F,`${ae??""}
          ${e(X)??""}`),[()=>o("workflows.call-stack-at")]),p(t,l)},a=t=>{const l=r(()=>o("workflows.call-stack-error"));K(t,{intent:"warning",get title(){return e(l)},class:"mb-4 w-fit"})};z(u,t=>{typeof e(s)=="string"?t(f):t(a,!1)})}p(c,m)},(c,s)=>{const m=r(()=>o("common.error-occurred")),u=r(()=>o("workflows.no-workers-running-message")),f=r(()=>{var a;return(a=e(s))==null?void 0:a.message});M(c,{get title(){return e(m)},get content(){return e(u)},get error(){return e(f)}})}),p(n,k)},te=n=>{const k=r(()=>o("workflows.call-stack-empty-state"));M(n,{get title(){return e(k)},testId:"query-call-stack-empty",children:(_,c)=>{var s=Q(),m=T(s);{var u=f=>{var a=Pe(),t=y(a,!0),l=d(t);_e(l,{newTab:!0,href:"https://docs.temporal.io/workflows#stack-trace-query",children:(v,g)=>{ce();var F=me();j(W=>U(F,W),[()=>o("workflows.call-stack-link")]),p(v,F)},$$slots:{default:!0}});var D=d(l,1,!0);b(a),j((v,g)=>{U(t,v),U(D,g)},[()=>o("workflows.call-stack-link-preface"),()=>{var v;return o("workflows.call-stack-link-postface",{taskQueue:(v=e(i))==null?void 0:v.taskQueue})}]),p(f,a)};z(m,f=>{var a,t,l;(a=e(i))!=null&&a.isRunning&&((l=(t=e(q))==null?void 0:t.pollers)==null?void 0:l.length)===0&&f(u)})}p(_,s)},$$slots:{default:!0}})};z(Z,n=>{var k,_,c;(k=e(i))!=null&&k.isRunning&&((c=(_=e(q))==null?void 0:_.pollers)==null?void 0:c.length)>0?n(ee):n(te,!1)})}b(L),p(A,L),O(),E()}var De=R("<!> <!>",1);function et(A,C){N(C,!1);const[w,E]=V(),h=()=>$(ue,"$page",w),I=h().params.workflow;pe();var P=De(),S=T(P);const x=fe(()=>`${o("workflows.call-stack-tab")} | ${I}`);ve(S,{get title(){return e(x)},get url(){return h().url.href}});var i=d(S,2);we(i,{children:(q,G)=>{qe(q,{})},$$slots:{default:!0}}),p(A,P),O(),E()}export{et as component};
