import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as M,aN as ot,g as t,s as st,f as S,e as u,b as O,al as lt,u as r,j as T,r as b,i as W,c as R,h as d,t as j,n as nt,k as it,o as ct}from"../chunks/CckrFwdx.js";import{i as mt}from"../chunks/ebNgFJjp.js";import{s as V,a as $}from"../chunks/BioCYJcK.js";import{p as ft}from"../chunks/DtS45nWo.js";import{P as pt}from"../chunks/CuqmI6m2.js";import{t as a}from"../chunks/DEjs8ZrU.js";import{s as P}from"../chunks/_IQD3yTx.js";import{a as ut}from"../chunks/BAVlD7Ho.js";import{i as N}from"../chunks/CoMawi-e.js";import{p as H}from"../chunks/oGEk5UM3.js";import{A as J}from"../chunks/DQoxx6p8.js";import{C as vt}from"../chunks/CneSAwz0.js";import{E as K}from"../chunks/BhkSjr_9.js";import{L as wt}from"../chunks/CZKZw5Lg.js";import{S as z}from"../chunks/CfczflME.js";import{g as kt}from"../chunks/CRc-ZQWN.js";import{a as dt}from"../chunks/Bp7uNEFS.js";import{f as gt,r as _t,a as $t}from"../chunks/DBTYq7FH.js";import{w as ht,r as xt}from"../chunks/DiTAogHV.js";var yt=S('<!> <p> </p> <div class="my-2 flex h-full items-start"><!></div>',1),Tt=S('<div class="flex flex-col gap-2"><!> <!> <!></div>'),bt=S("<p> <!> </p>"),Rt=S("<section><!></section>");function St(F,U){M(U,!0);const h=()=>$(ht,"$workflowRun",v),q=()=>$(xt,"$refresh",v),A=()=>$($t,"$timeFormat",v),C=()=>$(_t,"$relativeTime",v),g=()=>$(dt,"$authUser",v),[v,E]=V();let c=r(()=>h().workflow),B=r(()=>h().workers);const X=r(()=>H.params.namespace);let G=lt(void 0),Y=r(()=>gt(q()?new Date(q()):new Date,A(),{relative:C(),format:"short"}));const Z=()=>{var l;return kt({workflow:t(c),namespace:t(X)},(l=H.data)===null||l===void 0?void 0:l.settings,g()===null||g()===void 0?void 0:g().accessToken)};ot(()=>{!(t(c)===null||t(c)===void 0)&&t(c).isRunning&&st(G,Z(),!0)});var L=Rt(),tt=T(L);{var et=l=>{var k=W(),_=R(k);ut(_,()=>t(G),m=>{var o=Tt(),f=T(o);z(f,{class:"h-16 w-1/3 rounded-sm"});var w=d(f,2);z(w,{class:"h-3 w-32"});var p=d(w,2);z(p,{class:"h-48 w-full rounded-sm"}),b(o),u(m,o)},(m,o)=>{var f=W(),w=R(f);{var p=e=>{var n=yt(),D=R(n);{let y=r(()=>a("workflows.call-stack-alert"));J(D,{intent:"info",get title(){return t(y)},class:"mb-4 w-fit"})}var i=d(D,2),I=T(i);b(i);var x=d(i,2),Q=T(x);{let y=r(()=>a("common.copy-icon-title")),at=r(()=>a("common.copy-success-icon-title"));vt(Q,{get content(){return t(o)},language:"text",testId:"query-call-stack",get copyIconTitle(){return t(y)},get copySuccessIconTitle(){return t(at)}})}b(x),j(y=>P(I,`${y??""}
          ${t(Y)??""}`),[()=>a("workflows.call-stack-at")]),u(e,n)},s=e=>{{let n=r(()=>a("workflows.call-stack-error"));J(e,{intent:"warning",get title(){return t(n)},class:"mb-4 w-fit"})}};N(w,e=>{typeof t(o)=="string"?e(p):e(s,!1)})}u(m,f)},(m,o)=>{{let f=r(()=>a("common.error-occurred")),w=r(()=>a("workflows.no-workers-running-message")),p=r(()=>{var s;return(s=t(o))==null?void 0:s.message});K(m,{get title(){return t(f)},get content(){return t(w)},get error(){return t(p)}})}}),u(l,k)},rt=l=>{{let k=r(()=>a("workflows.call-stack-empty-state"));K(l,{get title(){return t(k)},testId:"query-call-stack-empty",children:(_,m)=>{var o=W(),f=R(o);{var w=p=>{var s=bt(),e=T(s,!0),n=d(e);wt(n,{newTab:!0,href:"https://docs.temporal.io/workflows#stack-trace-query",children:(i,I)=>{nt();var x=it();j(Q=>P(x,Q),[()=>a("workflows.call-stack-link")]),u(i,x)},$$slots:{default:!0}});var D=d(n,1,!0);b(s),j((i,I)=>{P(e,i),P(D,I)},[()=>a("workflows.call-stack-link-preface"),()=>{var i;return a("workflows.call-stack-link-postface",{taskQueue:(i=t(c))==null?void 0:i.taskQueue})}]),u(p,s)};N(f,p=>{var s,e,n;(s=t(c))!=null&&s.isRunning&&((n=(e=t(B))==null?void 0:e.pollers)==null?void 0:n.length)===0&&p(w)})}u(_,o)},$$slots:{default:!0}})}};N(tt,l=>{var k,_,m;(k=t(c))!=null&&k.isRunning&&((m=(_=t(B))==null?void 0:_.pollers)==null?void 0:m.length)>0?l(et):l(rt,!1)})}b(L),u(F,L),O(),E()}var qt=S("<!> <!>",1);function Vt(F,U){M(U,!1);const h=()=>$(ft,"$page",q),[q,A]=V(),C=h().params.workflow;mt();var g=qt(),v=R(g);{let c=ct(()=>`${a("workflows.call-stack-tab")} | ${C}`);pt(v,{get title(){return t(c)},get url(){return h().url.href}})}var E=d(v,2);St(E,{}),u(F,g),O(),A()}export{Vt as component};
