import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as he,b as $e,g as e,o as r,l as I,a as Se,t as q,f as oe,i as $,r as k,c as i,e as l,s as u,m,aj as te,M as ie,n as me,k as ve,j as M,h as Oe,b8 as ze,aO as ur,q as Ct,u as pe,d as fr,ac as gr}from"../chunks/CYx2j9em.js";import{i as Te,s as Xe}from"../chunks/HoZrOv-6.js";import{a as Q,s as He,c as ke,m as mr,p as F,l as xt}from"../chunks/DnRAdnAf.js";import{p as Ke}from"../chunks/DKVY9787.js";import{P as pr}from"../chunks/DN2Bw11a.js";import{t as h}from"../chunks/BXv1jDVW.js";import{s as R,e as wt}from"../chunks/BjCW00Pv.js";import{i as Z}from"../chunks/DeQvpgQS.js";import{a as qe,s as ue,d as _r}from"../chunks/CHX8vcg8.js";import{b as xr}from"../chunks/5gYwJNb5.js";import{E as wr,C as lt,L as Ye,T as rt,D as kt,t as kr,g as hr}from"../chunks/CTn50R_G.js";import{T as $r,a as Pt}from"../chunks/DR1FCU1x.js";import{W as yr}from"../chunks/CiIaohzg.js";import{T as br}from"../chunks/CjUqx4mN.js";import{b as Jt,d as Rt,a as Tr,e as at,f as ht,h as tt,i as Ve,c as Be,p as it,j as Er,k as Lt,m as Ot,g as Pr}from"../chunks/Dw3KwSts.js";import{w as $t}from"../chunks/WemCyz5V.js";import{e as ot,i as yt}from"../chunks/C1OgRA7l.js";import{w as ct,g as Wt,a as Ir,o as Ar}from"../chunks/CzTm8X19.js";import{C as ut}from"../chunks/M2gwvNzl.js";import{I as Je}from"../chunks/Cgy7lDWn.js";import{M as Hr}from"../chunks/DaQ-F721.js";import{c as Wr,d as Sr,b as ft}from"../chunks/DejKAeDH.js";import{M as Cr}from"../chunks/_-wcB0IB.js";import{Y as Mt,l as It,I as Dt,F as Gt,o as Fr,Z as jr,_ as zr,$ as Rr,a0 as Qt,a1 as Lr,a2 as Or}from"../chunks/DE5dmXvD.js";import{t as Mr}from"../chunks/x8PoDPyN.js";import{i as Dr}from"../chunks/BgeXTt82.js";import{k as Ft}from"../chunks/Hbsv0g-K.js";import{b as Xt}from"../chunks/Cv4YkRYF.js";import{f as Ze,a as jt,r as Zt,t as Kt}from"../chunks/Cted96qS.js";import{i as er}from"../chunks/Dzb719w0.js";import{D as pt,y as tr}from"../chunks/2uWpc1Jl.js";import{b as Gr,g as Ur,d as Nr,c as gt}from"../chunks/D_m0CrUD.js";import{W as Vr}from"../chunks/C6aklHeg.js";import{B as Br}from"../chunks/B7wauYe2.js";import{a as qr}from"../chunks/LxxMQusO.js";import{g as rr}from"../chunks/XGHQuN6J.js";import{f as Yr,b as Jr}from"../chunks/C8XxLsQv.js";import{x as Qr}from"../chunks/Br_x4Rre.js";import{p as Ut}from"../chunks/ZUPUF7oX.js";import{M as Xr}from"../chunks/RG--_Xlm.js";import{a as nr}from"../chunks/DTBKjfP9.js";import{b as Zr}from"../chunks/B6Quk8MY.js";import{T as Kr}from"../chunks/Dyr7Vk7o.js";import{A as zt}from"../chunks/TlAHMYQ6.js";import{L as or}from"../chunks/DNKpmWE1.js";import{s as en}from"../chunks/ByTIZu23.js";import{A as sr}from"../chunks/CnoPspYK.js";import{C as _t}from"../chunks/CfzT86F3.js";import{B as Le}from"../chunks/B5FQmuB7.js";import{M as tn}from"../chunks/BmowrX72.js";import{R as rn,a as At}from"../chunks/UShUVu_D.js";import{c as nn,d as on}from"../chunks/BNquoXRb.js";import{g as sn,b as an,a as ln}from"../chunks/DVnpjG4R.js";import{s as St}from"../chunks/BDfAQ6r3.js";import{i as cn}from"../chunks/Dco9_tmD.js";import{c as Nt,a as Vt}from"../chunks/DQzcCMd8.js";import{I as Bt}from"../chunks/Dzv22M7X.js";import{t as dn,a as vn}from"../chunks/D_UiT1nZ.js";import{T as un,a as mt}from"../chunks/Cl6-S6DT.js";import{T as fn}from"../chunks/BgyxhB8O.js";function gn(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Jt,"$filteredEventHistory",o),a=()=>Q(Rt,"$decodeEventHistory",o);Te(),yr(y,{get events(){return c()},decode:n=>{const p=r(()=>h("events.decode-event-history"));br(n,{get label(){return e(p)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return mr(),a()},set checked(_){ke(Rt,_)},$$legacy:!0})},$$slots:{decode:!0}}),$e(),P()}var mn=q("<!> <!> <!>",1),pn=q('<div class="border-t border-subtle px-4"><!></div>'),_n=q('<div data-testid="event-summary-table"><!></div>'),xn=q('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function wn(y,t){he(t,!1);const[o,P]=He(),c=()=>Q($t,"$workflowRun",o),a=()=>Q(at,"$eventFilterSort",o),s=()=>Q(ht,"$fullEventHistory",o),n=()=>Q(tt,"$eventViewType",o),p=()=>Q(Ke,"$page",o),_=m(),f=m(),A=m(),T=m(),v=m(),d=m(),x=m();var C=m(),E=m(),w=m(),g=m();let j=F(t,"history",8),L=F(t,"groups",8),J=F(t,"minimized",8,!0);const O=()=>{ke(tt,"feed")},N=()=>{ke(tt,"compact")},V=()=>{ke(tt,"json")};I(()=>(e(_),c()),()=>{(B=>u(_,B.workflow))(c())}),I(()=>a(),()=>{u(f,a()==="descending")}),I(()=>s(),()=>{u(A,!s().length)}),I(()=>n(),()=>{u(T,n()==="compact")}),I(()=>(te(E),te(C),p(),te(g),te(w)),()=>{ke(Tr,!(u(E,u(C,p().url)===null||te(C)===void 0?void 0:te(C).searchParams)===null||te(E)===void 0)&&te(E).get("category")?u(g,u(w,p().url)===null||te(w)===void 0?void 0:te(w).searchParams)===null||te(g)===void 0?void 0:te(g).get("category").split(","):void 0)}),I(()=>e(_),()=>{u(v,e(_).pendingActivities)}),I(()=>e(_),()=>{u(d,e(_).pendingNexusOperations)}),I(()=>(e(T),ie(L()),e(f),e(d),e(v),ie(j())),()=>{u(x,e(T)?L():e(f)?[...e(d),...e(v),...j()]:[...j(),...e(v),...e(d)])}),Se(),Te();var G=xn(),b=oe(G),S=$(b),H=$(S);$r(H,{children:(B,z)=>{var Y=mn(),D=oe(Y);const W=r(()=>n()==="feed");Pt(D,{get active(){return e(W)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:O},children:(ye,Ce)=>{me();var Ie=ve("All");l(ye,Ie)},$$slots:{default:!0}});var K=i(D,2);const se=r(()=>n()==="compact");Pt(K,{get active(){return e(se)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:N},children:(ye,Ce)=>{me();var Ie=ve("Compact");l(ye,Ie)},$$slots:{default:!0}});var le=i(K,2);const xe=r(()=>n()==="json");Pt(le,{get active(){return e(xe)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:V},children:(ye,Ce)=>{me();var Ie=ve("JSON");l(ye,Ie)},$$slots:{default:!0}}),l(B,Y)},$$slots:{default:!0}}),k(S),k(b);var re=i(b,2);{var _e=B=>{var z=pn(),Y=$(z);gn(Y,{}),k(z),l(B,z)},fe=B=>{var z=_n(),Y=$(z);wr(Y,{get updating(){return e(A)},get items(){return e(x)},get groups(){return L()},get compact(){return e(T)},get minimized(){return J()}}),k(z),l(B,z)};Z(re,B=>{n()==="json"?B(_e):B(fe,!1)})}l(y,G),$e(),P()}const ar=200,kn=ct(0),hn=ct(ar),nt=ct([]),dt=ct(0),Ht=()=>{nt.set([]),dt.set(0),kn.set(0),hn.set(ar)},$n=()=>{nt.set([]),dt.set(0)},ir=y=>{Wt(nt).includes(y.id)?(dt.set(0),nt.set([])):nt.set([y.id])},yn=y=>y==null?void 0:y.nexus;var bn=q('<span class="hidden text-sm md:block"> </span>'),Tn=q('<div slot="leading"><!></div>'),En=q("<!> <!> <!> <!> <!>",1),Pn=q("<!> <!>",1);function In(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Mr,"$temporalVersion",o),a=()=>Q(Ke,"$page",o),s=()=>Q(Ve,"$eventTypeFilter",o),n=()=>Q(Be,"$eventStatusFilter",o),p=()=>Q(tt,"$eventViewType",o),_=m(),f=m(),A=m();var T=m();let v=F(t,"compact",8,!1),d=F(t,"minimized",8,!0),x=ct(!1);const C=({value:E})=>{$n(),ke(Ve,s().some(w=>w===E)?s().filter(w=>w!==E):[...s(),E])};I(()=>(ie(v()),It),()=>{u(_,v()?Mt.map(E=>E.value):It.map(E=>E.value))}),I(()=>(ie(v()),lt),()=>{u(f,[...(v()?Mt:It).map(E=>({...E,label:h(E.label),icon:lt[E.value],description:h(E.description)}))])}),I(()=>(c(),e(f)),()=>{Dr("1.21.0",c())&&u(f,e(f).filter(({value:E})=>E!=="update"))}),I(()=>(te(T),a(),e(f)),()=>{yn(u(T,a().data.systemInfo)===null||te(T)===void 0?void 0:te(T).capabilities)||u(f,e(f).filter(({value:E})=>E!=="nexus"))}),I(()=>(s(),e(_)),()=>{u(A,s().length<e(_).length)}),Se(),Te(),Wr(y,{open:x,children:(E,w)=>{var g=Pn(),j=oe(g);Hr(j,{controls:"status-menu",size:"sm",children:(O,N)=>{var V=bn(),G=$(V,!0);k(V),M(b=>R(G,b),[()=>h("common.filter")],r),l(O,V)},$$slots:{default:!0,leading:(O,N)=>{var V=Tn();let G;var b=$(V);const S=r(()=>e(A)&&"pt-0.5 text-white");Je(b,{name:"filter",get class(){return e(S)}}),k(V),M(H=>G=qe(V,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,G,H),[()=>({"bg-interactive":e(A)})],r),l(O,V)}}});var L=i(j,2);const J=r(()=>d()?"top-right":"right");Sr(L,{id:"event-type-menu",keepOpen:!0,get position(){return e(J)},class:"w-[220px] md:w-[360px]",children:(O,N)=>{var V=En(),G=oe(V);const b=r(()=>h("common.all"));ft(G,{get"data-testid"(){return e(b)},$$events:{click:()=>{ke(Ve,e(_)),ke(Be,!1)}},children:(z,Y)=>{me();var D=ve();M(W=>R(D,W),[()=>h("common.all")],r),l(z,D)},$$slots:{default:!0,leading:(z,Y)=>{const D=r(()=>!n()&&s().length===e(_).length),W=r(()=>h("common.all"));ut(z,{slot:"leading",get checked(){return e(D)},get label(){return e(W)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{ke(Ve,e(_)),ke(Be,!1)}}})}}});var S=i(G,2);{var H=z=>{const Y=r(()=>h("common.pending-and-failed")),D=r(()=>h("common.pending-and-failed-description"));ft(z,{get"data-testid"(){return e(Y)},get description(){return e(D)},class:"items-start",$$events:{click:()=>{ke(Ve,e(_)),ke(Be,!n())}},children:(W,K)=>{me();var se=ve();M(le=>R(se,le),[()=>h("common.pending-and-failed")],r),l(W,se)},$$slots:{default:!0,leading:(W,K)=>{const se=r(()=>h("common.all"));ut(W,{slot:"leading",get checked(){return n()},get label(){return e(se)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{ke(Ve,e(_)),ke(Be,!n())}}})}}})};Z(S,z=>{p()!=="json"&&z(H)})}var re=i(S,2);const _e=r(()=>h("common.none"));ft(re,{get"data-testid"(){return e(_e)},$$events:{click:()=>{ke(Ve,[]),ke(Be,!1)}},children:(z,Y)=>{me();var D=ve();M(W=>R(D,W),[()=>h("common.none")],r),l(z,D)},$$slots:{default:!0,leading:(z,Y)=>{const D=r(()=>!n()&&!s().length),W=r(()=>h("common.none"));ut(z,{slot:"leading",get checked(){return e(D)},get label(){return e(W)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{ke(Ve,[]),ke(Be,!1)}}})}}});var fe=i(re,2);Cr(fe);var B=i(fe,2);ot(B,1,()=>e(f),yt,(z,Y)=>{ft(z,{get"data-testid"(){return e(Y).label},get description(){return e(Y).description},class:"items-start",$$events:{click:()=>{C(e(Y))}},children:(D,W)=>{me();var K=ve();M(()=>R(K,e(Y).label)),l(D,K)},$$slots:{default:!0,leading:(D,W)=>{const K=r(()=>s().some(se=>se===e(Y).value));ut(D,{slot:"leading",get checked(){return e(K)},get label(){return e(Y).label},labelHidden:!0,class:"mt-px",$$events:{click:()=>C(e(Y))}})}}})}),l(O,V)},$$slots:{default:!0}}),l(E,g)},$$slots:{default:!0}}),$e(),P()}function An(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(it,"$pauseLiveUpdates",o),a=m(),s=m();let n=F(t,"workflow",8),p=F(t,"startTime",8);const _=()=>{const x=new Date;return x.setSeconds(x.getSeconds()+1),x};let f;const A=x=>{x&&(clearInterval(f),f=null)},T=x=>{x?(clearInterval(f),f=null):!f&&n().isRunning&&(f=setInterval(()=>{u(a,_())},1e3))};Ir(()=>{clearInterval(f),f=null,ke(it,!1)}),I(()=>ie(n()),()=>{u(a,(n()===null||n()===void 0?void 0:n().endTime)||_())}),I(()=>(ie(p()),e(a)),()=>{u(s,pt({start:p(),end:e(a),onlyUnderSecond:!1}))}),I(()=>ie(n()),()=>{A(n().endTime)}),I(()=>c(),()=>{T(c())}),Se(),Te();var v=Oe(),d=oe(v);Xe(d,t,"default",{get endTime(){return e(a)},get duration(){return e(s)}},null),l(y,v),$e(),P()}var Hn=q("<div><!></div>");function Wn(y,t){const o=xt(t,["children","$$slots","$$events","$$legacy"]),P=xt(o,["namespace","workflowId","runId","viewportHeight","onLoad"]);he(t,!1);let c=F(t,"namespace",8),a=F(t,"workflowId",8),s=F(t,"runId",8,""),n=F(t,"viewportHeight",8,360),p=F(t,"onLoad",8,()=>{});const _=async()=>{const[v,d]=await Promise.all([Qr({namespace:c(),workflowId:a(),runId:s()}),Yr({namespace:c(),workflowId:a(),runId:s()})]);return{workflow:v.workflow,history:d}},f=(v,d)=>{var x;p()();const C=(x=v==null?void 0:v.pendingActivities)!==null&&x!==void 0?x:[];return rr(d,"ascending",C)};Te();var A=Oe(),T=oe(A);qr(T,_,null,(v,d)=>{var x=r(()=>{var{workflow:L,history:J}=e(d);return{workflow:L,history:J}}),C=r(()=>e(x).workflow),E=r(()=>e(x).history),w=Hn(),g=$(w);const j=r(()=>f(e(C),e(E)));lr(g,{get viewportHeight(){return n()},get workflow(){return e(C)},get groups(){return e(j)},readOnly:!0}),k(w),M(()=>qe(w,1,`cursor-pointer overflow-auto ${P.class??""}`)),l(v,w)}),l(y,A),$e()}var Sn=q('<div class="flex items-center gap-1"><!> </div>'),Cn=q(" <!>",1),Fn=q('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),jn=ze('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function zn(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Ke,"$page",o),a=m(),s=m(),n=m(),p=m(),_=m(),f=m(),A=m();var T=m(),v=m();let d=F(t,"group",8),x=F(t,"canvasWidth",8),C=F(t,"x",8,0),E=F(t,"y",8),w=m();const g=W=>{ke(dt,W)},j=async()=>{await ur(),u(a,e(w))};I(()=>e(w),()=>{u(a,e(w)||0)}),I(()=>e(a),()=>{g(e(a)||0)}),I(()=>ie(d()),()=>{u(s,(d()===null||d()===void 0?void 0:d().finalClassification)||(d()===null||d()===void 0?void 0:d().classification))}),I(()=>(e(n),c()),()=>{(W=>u(n,W.namespace))(c().params)}),I(()=>ie(x()),()=>{u(p,x())}),I(()=>ie(d()),()=>{u(_,d().displayName)}),I(()=>(ie(d()),Dt),()=>{u(f,d()&&d().eventList.find(Dt))}),I(()=>(te(T),ie(d()),te(v)),()=>{u(A,tr({start:u(T,d()===null||d()===void 0?void 0:d().initialEvent)===null||te(T)===void 0?void 0:te(T).eventTime,end:u(v,d()===null||d()===void 0?void 0:d().lastEvent)===null||te(v)===void 0?void 0:te(v).eventTime,includeMilliseconds:!0}))}),I(()=>(ie(d()),h),()=>{!(d()===null||d()===void 0)&&d().pendingActivity&&(d().pendingActivity.paused?u(s,h("workflows.paused")):d().pendingActivity.attempt>1?u(s,h("events.event-classification.retrying")):u(s,h("events.event-classification.pending")))}),Se(),Te();var L=jn(),J=$(L),O=$(J),N=$(O),V=$(N),G=$(V);{var b=W=>{Vr(W,{get status(){return e(s)}})};Z(G,W=>{e(s)&&W(b)})}var S=i(G),H=i(S);{var re=W=>{var K=Sn(),se=$(K);Je(se,{name:"clock"});var le=i(se);k(K),M(()=>R(le,` ${e(A)??""}`)),l(W,K)};Z(H,W=>{e(A)&&W(re)})}k(V);var _e=i(V,2),fe=$(_e);Br(fe,{variant:"ghost",size:"xs",$$events:{click:()=>ir(d())},children:(W,K)=>{me();var se=Cn(),le=oe(se),xe=i(le);Je(xe,{name:"close"}),M(ye=>R(le,`${ye??""} `),[()=>h("common.close")],r),l(W,se)},$$slots:{default:!0}}),k(_e),k(N);var B=i(N,2),z=$(B);Gr(z,{get group(){return d()},get event(){return d().initialEvent}}),k(B);var Y=i(B,2);{var D=W=>{var K=Fn(),se=i($(K),2);Ft(se,()=>d().eventList.length,le=>{Wn(le,{get namespace(){return e(n)},get workflowId(){return e(f).attributes.workflowExecution.workflowId},get runId(){return e(f).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:j})}),k(K),l(W,K)};Z(Y,W=>{e(f)&&W(D)})}k(O),k(J),k(L),M(()=>{ue(J,"x",C()),ue(J,"y",E()),ue(J,"width",e(p)),ue(J,"height",e(a)),R(S,` ${e(_)??""} `)}),Xt(O,"offsetHeight",W=>u(w,W)),l(y,L),$e(),P()}var Rn=ze('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),Ln=ze("<!><!>",1),On=ze("<!><!>",1);function Mn(y,t){he(t,!1);const o=m(),P=m();let c=F(t,"x1",8,0),a=F(t,"x2",8,1e3),s=F(t,"timelineHeight",8,1e3),n=F(t,"startTime",8),p=F(t,"duration",8);const{radius:_}=rt,f=20;I(()=>(ie(a()),ie(c())),()=>{u(o,a()-c())}),I(()=>e(o),()=>{u(P,e(o)/f)}),Se(),Te();var A=On(),T=oe(A);const v=r(()=>[c(),s()]),d=r(()=>[c()+e(o),s()]);Ye(T,{strokeWidth:_/2,get startPoint(){return e(v)},get endPoint(){return e(d)}});var x=i(T);ot(x,1,()=>Array(f),yt,(C,E,w)=>{var g=Ln();const j=r(()=>c()+w*e(P)),L=r(()=>s()+_*2);var J=oe(g);{var O=G=>{const b=r(()=>[e(j),0]),S=r(()=>[e(j),s()]);Ye(G,{strokeWidth:.5,get startPoint(){return e(b)},get endPoint(){return e(S)}})};Z(J,G=>{w!==0&&G(O)})}var N=i(J);{var V=G=>{var b=Rn(),S=$(b,!0);k(b),M(H=>{ue(b,"transform",`rotate(90, ${e(j)??""}, ${e(L)??""})`),ue(b,"x",e(j)-_),ue(b,"y",e(L)),R(S,H)},[()=>tr({start:n(),end:new Date(new Date(n().toString()).getTime()+p()/f*w),includeMilliseconds:p()/f<1e3})],r),l(G,b)};Z(N,G=>{w!==0&&G(V)})}l(C,g)}),l(y,A),$e()}var Dn=ze("<text><!></text>"),Gn=ze("<!><!><!>",1);function Un(y,t){he(t,!1);const o=m(),P=m(),c=m(),a=m(),s=m(),n=m();var p=m();let _=F(t,"point",24,()=>[0,0]),f=F(t,"category",8,void 0),A=F(t,"status",8,"none"),T=F(t,"fontSize",8,"13px"),v=F(t,"fontWeight",8,"400"),d=F(t,"textAnchor",8,"start"),x=F(t,"backdrop",8,!1),C=F(t,"backdropHeight",8,0),E=F(t,"icon",8,void 0),w=F(t,"config",8,void 0),g=F(t,"label",8,!1),j=m();I(()=>(e(o),e(P),ie(_())),()=>{(b=>(u(o,b[0]),u(P,b[1])))(_())}),I(()=>(ie(E()),ie(w())),()=>{u(c,E()&&w())}),I(()=>(te(p),e(j)),()=>{u(a,(u(p,e(j)===null||e(j)===void 0?void 0:e(j).getBBox())===null||te(p)===void 0?void 0:te(p).width)||0)}),I(()=>(e(c),e(a)),()=>{u(s,e(c)?e(a)+36:e(a)+12)}),I(()=>(e(c),ie(d()),e(o),ie(w())),()=>{u(n,e(c)&&d()==="start"?e(o)+w().radius*2:e(o))}),Se(),Te();var L=Gn(),J=oe(L);{var O=b=>{const S=r(()=>[e(o)-C(),e(P)]),H=r(()=>[e(o)+e(s),e(P)]);Ye(b,{get startPoint(){return e(S)},get endPoint(){return e(H)},get status(){return A()},get strokeWidth(){return C()}})};Z(J,b=>{x()&&b(O)})}var N=i(J);{var V=b=>{const S=r(()=>d()==="end"?e(o)-e(a)-C():e(o)),H=r(()=>e(P)-8),re=r(()=>x()?"text-white":"text-primary");Je(b,{get name(){return E()},get x(){return e(S)},get y(){return e(H)},get class(){return e(re)}})};Z(N,b=>{e(c)&&b(V)})}var G=i(N);Ft(G,()=>e(n),b=>{var S=Dn();let H;var re=$(S);Xe(re,t,"default",{},null),k(S),Zr(S,_e=>u(j,_e),()=>e(j)),M(_e=>{H=qe(S,0,`cursor-pointer select-none outline-none ${f()??""} text-primary`,"svelte-ja82h2",H,_e),ue(S,"x",e(n)),ue(S,"y",e(P)+1),ue(S,"font-size",T()),ue(S,"font-weight",v()),ue(S,"text-anchor",d())},[()=>({label:g(),backdrop:x()})],r),l(b,S)}),l(y,L),$e()}var Nn=ze('<rect fill="transparent" pointer-events="all"></rect>'),Vn=ze("<!><!>",1),Bn=ze("<!><!><!><!>",1),qn=ze('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"><!><!></g>');function Yn(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(nr,"$authUser",o),a=m(),s=m(),n=m(),p=m(),_=m(),f=m(),A=m(),T=m(),v=m(),d=m(),x=m();var C=m(),E=m();let w=F(t,"y",8,0),g=F(t,"group",12),j=F(t,"activeGroups",24,()=>[]),L=F(t,"startTime",8),J=F(t,"endTime",8),O=F(t,"canvasWidth",8),N=F(t,"active",12,!0),V=F(t,"readOnly",8,!1);const{height:G,gutter:b,radius:S}=rt;let H=m();Ar(async()=>{const D=Ur(g());if(D)try{u(H,await Nr(D,{namespace:Ut.params.namespace,settings:Ut.data.settings,accessToken:c().accessToken})),e(H)&&g(g().decodedLocalActivity=e(H),!0)}catch(W){console.warn("Failed to decode local activity:",W)}});const re=(D,W,K)=>{const se=pt({start:L(),end:D,onlyUnderSecond:!1}),le=g().eventList.map(Me=>{const U=pt({start:L(),end:Me.eventTime,onlyUnderSecond:!1})/se;return Math.round(U*W)+b});if(e(n)){const ae=pt({start:L(),end:e(n),onlyUnderSecond:!1})/se,U=Math.round(ae*W)+b;le.push(U)}const{textAnchor:xe,textIndex:ye,textPosition:Ce,backdrop:Ie}=kr(le,K,W,g().isPending,rt);return{points:le,textAnchor:xe,textIndex:ye,textPosition:Ce,backdrop:Ie}},_e=()=>{V()||ir(g())};I(()=>ie(O()),()=>{u(a,O()-2*b)}),I(()=>(ie(j()),ie(g())),()=>{N(!j().length||j().includes(g().id))}),I(()=>ie(g()),()=>{u(s,g()===null||g()===void 0?void 0:g().pendingActivity)}),I(()=>(e(s),te(C)),()=>{u(n,e(s)&&(u(C,e(s).pauseInfo)===null||te(C)===void 0?void 0:te(C).pauseTime))}),I(()=>(e(p),e(_),e(f),e(A),e(T),ie(J()),e(a),ie(w())),()=>{(D=>(u(p,D.points),u(_,D.textAnchor),u(f,D.textIndex),u(A,D.textPosition),u(T,D.backdrop)))(re(J(),e(a),w()))}),I(()=>(ie(g()),Gt),()=>{u(v,g().eventList.find(Gt))}),I(()=>(e(v),te(E)),()=>{u(d,e(v)&&(u(E,e(v).attributes)===null||te(E)===void 0?void 0:te(E).attempt)>1)}),I(()=>(ie(g()),e(n)),()=>{u(x,g().isPending||!!e(n))}),Se(),Te();var fe=qn();ue(fe,"height",G);var B=$(fe);{var z=D=>{var W=Nn();const K=r(()=>e(n)?e(p)[1]-e(p)[0]:O()-2*b);ue(W,"height",G),M(()=>{ue(W,"y",w()-G/2),ue(W,"x",e(p)[0]),ue(W,"width",e(K))}),l(D,W)};Z(B,D=>{e(x)&&D(z)})}var Y=i(B);ot(Y,1,()=>e(p),yt,(D,W,K)=>{var se=Bn();const le=r(()=>e(p)[K+1]),xe=r(()=>e(f)===K);var ye=oe(se);{var Ce=de=>{const ne=r(()=>[e(W),w()]),Ee=r(()=>[e(le),w()]),We=r(()=>!!e(n)),be=r(()=>!!e(n)),Pe=r(()=>K===0&&g().lastEvent.classification==="Completed");Ye(de,{get startPoint(){return e(ne)},get endPoint(){return e(Ee)},get category(){return g().category},get classification(){return g().lastEvent.classification},get pending(){return e(We)},get paused(){return e(be)},strokeWidth:S*2,get retried(){return e(d)},get scheduling(){return e(Pe)}})};Z(ye,de=>{e(le)&&de(Ce)})}var Ie=i(ye);{var Me=de=>{var ne=Vn(),Ee=oe(ne);const We=r(()=>[e(W),w()]),be=r(()=>[O()-b,w()]),Pe=r(()=>e(s)?e(s).attempt>1?"retry":"pending":g().category),we=r(()=>!!e(n));Ye(Ee,{get startPoint(){return e(We)},get endPoint(){return e(be)},get category(){return e(Pe)},get classification(){return g().lastEvent.classification},pending:!0,get paused(){return e(we)},strokeWidth:S*2});var Fe=i(Ee);const Ae=r(()=>[e(W),w()]);kt(Fe,{get point(){return e(Ae)},get classification(){return g().lastEvent.classification},icon:"retry",r:S}),l(de,ne)};Z(Ie,de=>{!e(le)&&g().isPending&&!e(n)&&de(Me)})}var ae=i(Ie);{var U=de=>{const ne=r(()=>{var be,Pe;return(Pe=(be=g())==null?void 0:be.userMetadata)==null?void 0:Pe.summary}),Ee=r(()=>{var be;return Fr(g().initialEvent)?(be=g())==null?void 0:be.displayName:""}),We=r(()=>{var be;return e(H)?h("events.category.local-activity"):(be=g())==null?void 0:be.displayName});Xr(de,{get value(){return e(ne)},get prefix(){return e(Ee)},get fallback(){return e(We)},children:Ct,$$slots:{default:(be,Pe)=>{const we=r(()=>Pe.decodedValue),Fe=r(()=>e(s)&&!e(s).paused||e(d)?"retry":void 0);Un(be,{get point(){return e(A)},get textAnchor(){return e(_)},get backdrop(){return e(T)},backdropHeight:S*2,config:rt,get icon(){return e(Fe)},children:(Ae,De)=>{var Re=Oe(),Qe=oe(Re);{var bt=Ge=>{var je=ve();M(Ue=>R(je,`${Ue??""}
            ${e(s).attempt??""} / ${e(s).maximumAttempts||"∞"}
            • 
            ${e(we)??""}`),[()=>h("workflows.attempt")],r),l(Ge,je)},Tt=(Ge,je)=>{{var Ue=Ne=>{var vt=ve();M(()=>R(vt,`${e(v).attributes.attempt??""} • ${e(we)??""}`)),l(Ne,vt)},Et=(Ne,vt)=>{{var dr=et=>{var st=ve();M(()=>R(st,e(H).value)),l(et,st)},vr=et=>{var st=ve();M(()=>R(st,e(we))),l(et,st)};Z(Ne,et=>{e(H)?et(dr):et(vr,!1)},vt)}};Z(Ge,Ne=>{e(d)?Ne(Ue):Ne(Et,!1)},je)}};Z(Qe,Ge=>{e(s)?Ge(bt):Ge(Tt,!1)})}l(Ae,Re)},$$slots:{default:!0}})}}})};Z(ae,de=>{e(xe)&&de(U)})}var X=i(ae);const ce=r(()=>[e(W),w()]),ge=r(()=>{var de;return(de=g().eventList[K])==null?void 0:de.classification}),ee=r(()=>e(n)&&K!==0?"pause":e(H)?lt["local-activity"]:lt[g().category]);kt(X,{get point(){return e(ce)},get classification(){return e(ge)},get icon(){return e(ee)},r:S}),l(D,se)}),k(fe),wt("click",fe,_e),wt("keypress",fe,_e),l(y,fe),$e(),P()}var Jn=ze('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function Qn(y,t){he(t,!1);const o=m(),P=m();let c=F(t,"workflow",8),a=F(t,"length",8),s=F(t,"y",8);const{radius:n,height:p,gutter:_}=rt;I(()=>{},()=>{u(o,_)}),I(()=>(e(o),ie(a())),()=>{u(P,e(o)+a()-2*_)}),Se(),Te();var f=Jn();ue(f,"height",p);var A=$(f);const T=r(()=>[e(o),s()]),v=r(()=>[e(P),s()]),d=r(()=>er(c()));Ye(A,{get startPoint(){return e(T)},get endPoint(){return e(v)},get classification(){return c().status},strokeWidth:n*2,get pending(){return c().isRunning},get delayed(){return e(d)}});var x=i(A);const C=r(()=>[e(o),s()]);kt(x,{get point(){return e(C)},get classification(){return c().status},r:n});var E=i(x);const w=r(()=>e(o)-n/2),g=r(()=>s()-n/2);Je(E,{name:"workflow",get x(){return e(w)},get y(){return e(g)},width:n,height:n,strokeWidth:"4",class:"text-black"});var j=i(E);const L=r(()=>[e(P),s()]);kt(j,{get point(){return e(L)},get classification(){return c().status},r:n});var J=i(j);const O=r(()=>e(P)-n/2),N=r(()=>s()-n/2);Je(J,{name:"workflow",get x(){return e(O)},get y(){return e(N)},width:n,height:n,strokeWidth:"4",class:"text-black"}),k(f),l(y,f),$e()}var Xn=ze("<!><!>",1),Zn=q('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),Kn=q('<div id="event-history-timeline-graph" class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function lr(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(dt,"$activeGroupHeight",o),a=()=>Q(Be,"$eventStatusFilter",o),s=()=>Q(ht,"$fullEventHistory",o),n=()=>Q(nt,"$activeGroups",o),p=()=>Q(at,"$eventFilterSort",o),_=()=>Q(jt,"$timeFormat",o),f=m(),A=m(),T=m(),v=m(),d=m(),x=m(),C=m();var E=m(),w=m();let g=F(t,"x",8,0),j=F(t,"y",8,0),L=F(t,"workflow",8),J=F(t,"groups",8),O=F(t,"viewportHeight",8),N=F(t,"readOnly",8,!1),V=F(t,"error",8,!1);const{height:G,gutter:b,radius:S}=rt;let H=m(0),re=m(0);const _e=z=>{var Y;u(re,(Y=z==null?void 0:z.target)===null||Y===void 0?void 0:Y.scrollTop)};I(()=>(ie(N()),c()),()=>{u(f,N()?0:c())}),I(()=>(ie(J()),a()),()=>{u(A,hr(J(),a()))}),I(()=>(te(E),s(),ie(L()),te(w)),()=>{u(T,(u(E,s()[0])===null||te(E)===void 0?void 0:te(E).eventTime)<L().executionTime?u(w,s()[0])===null||te(w)===void 0?void 0:te(w).eventTime:L().executionTime)}),I(()=>(ie(L()),e(T)),()=>{u(v,!er(L())&&e(T)||L().startTime)}),I(()=>(e(A),e(f)),()=>{u(d,Math.max(G*(e(A).length+2),120)+e(f))}),I(()=>e(d),()=>{u(x,e(d)+120)}),I(()=>(n(),p(),e(f)),()=>{u(C,z=>{const Y=n()===null||n()===void 0?void 0:n().filter(D=>p()==="ascending"?parseInt(D)<parseInt(z.id):parseInt(D)>parseInt(z.id));return Y!=null&&Y.length?e(f):0})}),Se(),Te();var fe=Kn(),B=$(fe);An(B,{get workflow(){return L()},get startTime(){return e(v)},children:Ct,$$slots:{default:(z,Y)=>{const D=r(()=>Y.endTime),W=r(()=>Y.duration);var K=Zn(),se=oe(K);let le;var xe=$(se),ye=$(xe),Ce=$(ye,!0);k(ye);var Ie=i(ye,2),Me=$(Ie,!0);k(Ie),k(xe),k(se);var ae=i(se,2);let U;var X=$(ae);const ce=r(()=>[b,e(d)]);Ye(X,{startPoint:[b,0],get endPoint(){return e(ce)},strokeWidth:S/2});var ge=i(X);const ee=r(()=>[e(H)-b,0]),de=r(()=>[e(H)-b,e(d)]);Ye(ge,{get startPoint(){return e(ee)},get endPoint(){return e(de)},strokeWidth:S/2});var ne=i(ge);const Ee=r(()=>e(H)-b+S/4);Mn(ne,{x1:b-S/4,get x2(){return e(Ee)},get timelineHeight(){return e(d)},get startTime(){return e(v)},get duration(){return e(W)}});var We=i(ne);Qn(We,{get workflow(){return L()},y:G,get length(){return e(H)}});var be=i(We);ot(be,3,()=>e(A),Pe=>Pe.id,(Pe,we,Fe,Ae)=>{var De=Xn();const Re=r(()=>(e(Fe)+2)*G+e(C)(e(we)));var Qe=oe(De);{var bt=je=>{var Ue=Oe(),Et=oe(Ue);Ft(Et,()=>e(we).eventList.length,Ne=>{Yn(Ne,{get y(){return e(Re)},get group(){return e(we)},get activeGroups(){return n()},get canvasWidth(){return e(H)},get startTime(){return e(v)},get endTime(){return e(D)},get readOnly(){return N()}})}),l(je,Ue)};Z(Qe,je=>{(!O()||e(Re)>e(re)-2*G&&e(Re)<e(re)+O()*G)&&je(bt)})}var Tt=i(Qe);{var Ge=je=>{const Ue=r(()=>e(Re)+1.33*S);zn(je,{get y(){return e(Ue)},get group(){return e(we)},get canvasWidth(){return e(H)}})};Z(Tt,je=>{!N()&&n().includes(e(we).id)&&je(Ge)})}l(Pe,De)}),k(ae),M((Pe,we,Fe,Ae)=>{le=qe(se,1,"pointer-events-none sticky top-[120px]",null,le,Pe),R(Ce,we),R(Me,Fe),ue(ae,"x",g()),ue(ae,"y",j()),ue(ae,"viewBox",`0 0 ${e(H)??""} ${e(x)??""}`),ue(ae,"height",e(x)),ue(ae,"width",e(H)),U=qe(ae,0,"-mt-4 svelte-ta6k80",null,U,Ae)},[()=>({invisible:!!n().length}),()=>Ze(e(v),_(),{format:"short"}),()=>Ze(e(D),_(),{format:"short"}),()=>({error:V()})],r),l(z,K)}}}),k(fe),M(()=>_r(fe,O()?`max-height: ${O()}px;`:"")),Xt(fe,"clientWidth",z=>u(H,z)),wt("scroll",fe,_e),l(y,fe),$e(),P()}var eo=q('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function to(y,t){var o=eo(),P=$(o);Xe(P,t,"default",{},null),k(o),l(y,o)}var ro=q("<p> </p> <!>",1),no=q("<p> </p> <!>",1),oo=q('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),so=q('<div class="w-full text-right text-xs" slot="summary"> </div>'),ao=q("<!> <!>",1);function cr(y,t){he(t,!1);let o=F(t,"failure",8,void 0);Te();var P=ao(),c=oe(P);{var a=p=>{const _=r(()=>h("common.failure"));sr(p,{get title(){return e(_)},class:"text-sm",children:(f,A)=>{var T=oo(),v=$(T),d=$(v,!0);k(v);var x=i(v,2);const C=r(()=>{var O;return((O=o())==null?void 0:O.message)||""}),E=r(()=>h("common.copy-icon-title")),w=r(()=>h("common.copy-success-icon-title"));_t(x,{get content(){return e(C)},language:"text",get copyIconTitle(){return e(E)},get copySuccessIconTitle(){return e(w)}});var g=i(x,2);{var j=O=>{var N=ro(),V=oe(N),G=$(V,!0);k(V);var b=i(V,2);const S=r(()=>h("common.copy-icon-title")),H=r(()=>h("common.copy-success-icon-title"));_t(b,{get content(){return o().source},language:"text",get copyIconTitle(){return e(S)},get copySuccessIconTitle(){return e(H)}}),M(re=>R(G,re),[()=>h("common.source")],r),l(O,N)};Z(g,O=>{var N;(N=o())!=null&&N.source&&O(j)})}var L=i(g,2);{var J=O=>{var N=no(),V=oe(N),G=$(V,!0);k(V);var b=i(V,2);const S=r(()=>h("common.copy-icon-title")),H=r(()=>h("common.copy-success-icon-title"));_t(b,{get content(){return o().stackTrace},language:"text",get copyIconTitle(){return e(S)},get copySuccessIconTitle(){return e(H)}}),M(re=>R(G,re),[()=>h("common.stack-trace")],r),l(O,N)};Z(L,O=>{var N;(N=o())!=null&&N.stackTrace&&O(J)})}k(T),M(O=>R(d,O),[()=>h("common.message")],r),l(f,T)},$$slots:{default:!0,summary:(f,A)=>{var T=so(),v=$(T,!0);k(T),M(()=>{var d;return R(v,(d=o())==null?void 0:d.message)}),l(f,T)}}})};Z(c,p=>{o()&&p(a)})}var s=i(c,2);{var n=p=>{var _=Oe(),f=oe(_);cr(f,{get failure(){return o().cause}}),l(p,_)};Z(s,p=>{var _;(_=o())!=null&&_.cause&&p(n)})}l(y,P),$e()}var io=q('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function lo(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(jt,"$timeFormat",o),a=()=>Q(Zt,"$relativeTime",o),s=()=>Q(Kt,"$timestampFormat",o);let n=F(t,"pendingTask",8,void 0);Te();const p=r(()=>h("workflows.pending-workflow-task"));sr(y,{get title(){return e(p)},children:(_,f)=>{var A=io(),T=$(A),v=$(T),d=i(v);Le(d,{children:(b,S)=>{me();var H=ve();M(()=>R(H,n().state)),l(b,H)},$$slots:{default:!0}}),k(T);var x=i(T,2),C=$(x),E=i(C);Le(E,{children:(b,S)=>{me();var H=ve();M(()=>R(H,n().attempt)),l(b,H)},$$slots:{default:!0}}),k(x);var w=i(x,2),g=$(w),j=i(g);Le(j,{children:(b,S)=>{me();var H=ve();M(re=>R(H,re),[()=>Ze(n().originalScheduledTime,c(),{relative:a(),format:s()})],r),l(b,H)},$$slots:{default:!0}}),k(w);var L=i(w,2),J=$(L),O=i(J);Le(O,{children:(b,S)=>{me();var H=ve();M(re=>R(H,re),[()=>Ze(n().scheduledTime,c(),{relative:a(),format:s()})],r),l(b,H)},$$slots:{default:!0}}),k(L);var N=i(L,2),V=$(N),G=i(V);Le(G,{children:(b,S)=>{me();var H=ve();M(re=>R(H,re),[()=>Ze(n().startedTime,c(),{relative:a(),format:s()})],r),l(b,H)},$$slots:{default:!0}}),k(N),k(A),M((b,S,H,re,_e)=>{R(v,`${b??""} `),R(C,`${S??""} `),R(g,`${H??""} `),R(J,`${re??""} `),R(V,`${_e??""} `)},[()=>h("common.state"),()=>h("common.attempt"),()=>h("workflows.original-scheduled-time"),()=>h("workflows.scheduled-time"),()=>h("workflows.started-time")],r),l(_,A)},$$slots:{default:!0}}),$e(),P()}var co=q("<p> <!>.</p>"),vo=q('<p><span class="mr-2 text-secondary">Timeout Type</span> </p>'),uo=q("<!> <!>",1),fo=q('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> <!></div> <div class="flex flex-col gap-2 bg-primary p-4"><!> <!></div></div>',1);function go(y,t){he(t,!0);var o,P;let c=pe(()=>jr(t.error)),a=pe(()=>zr(t.error)&&((o=t.error.attributes)===null||o===void 0?void 0:o.failure)),s=pe(()=>Rr(t.error)&&((P=t.error.attributes)===null||P===void 0?void 0:P.timeoutType));var n=Oe(),p=oe(n);{var _=f=>{const A=pe(()=>h(`typed-errors.${e(c)}.title`));zt(f,{icon:"warning",intent:"warning",get title(){return e(A)},children:(T,v)=>{var d=fo(),x=oe(d),C=$(x,!0);k(x);var E=i(x,2);{var w=B=>{var z=co(),Y=$(z,!0),D=i(Y);const W=pe(()=>h(`typed-errors.${e(c)}.link`));or(D,{newTab:!0,get href(){return e(W)},children:(K,se)=>{me();var le=ve();M(xe=>R(le,xe),[()=>h(`typed-errors.${e(c)}.action`)]),l(K,le)},$$slots:{default:!0}}),me(),k(z),M(K=>R(Y,K),[()=>h("typed-errors.link-preface")]),l(B,z)};Z(E,B=>{(e(c)==="NonDeterministicError"||e(c)==="BadSearchAttributes")&&B(w)})}var g=i(E,2),j=$(g),L=$(j),J=$(L),O=i(J);Je(O,{get name(){return lt[t.error.category]}});var N=i(O,2),V=$(N,!0);k(N),k(L);var G=i(L,2);const b=pe(()=>{var B;return(B=t.error)==null?void 0:B.eventTime});Kr(G,{get dateTime(){return e(b)}}),k(j);var S=i(j,2),H=$(S);{var re=B=>{var z=vo(),Y=i($(z));k(z),M(()=>R(Y,` ${e(s)??""}`)),l(B,z)};Z(H,B=>{e(s)&&B(re)})}var _e=i(H,2);{var fe=B=>{to(B,{children:(z,Y)=>{var D=uo(),W=oe(D);{var K=xe=>{cr(xe,{get failure(){return e(a)}})};Z(W,xe=>{e(a)&&xe(K)})}var se=i(W,2);{var le=xe=>{lo(xe,{get pendingTask(){return t.pendingTask}})};Z(se,xe=>{t.pendingTask&&xe(le)})}l(z,D)},$$slots:{default:!0}})};Z(_e,B=>{(e(a)||t.pendingTask)&&B(fe)})}k(S),k(g),M((B,z)=>{R(C,B),R(J,`${t.error.id??""} `),R(V,z)},[()=>h(`typed-errors.${e(c)}.description`),()=>{var B;return en((B=t.error)==null?void 0:B.name)}]),l(T,d)},$$slots:{default:!0}})};Z(p,f=>{e(c)&&e(c)!=="ResetWorkflow"&&f(_)})}l(y,n),$e()}const mo=async(y,t,o)=>{const P=sn(t),c=an(t),a=ln(t),s={...t,codec:{...t==null?void 0:t.codec,endpoint:P,passAccessToken:c,includeCredentials:a}},n=!1;try{const p=await nn(y,Wt(Ke).params.namespace,s,Wt(nr).accessToken,o,n);return on(p,n)}catch{return y}};function qt(y,t,o){const P=St({events:y},null,2),c=document.createElement("a"),a=new Blob([P],{type:o});c.href=URL.createObjectURL(a),c.download=t,c.click()}const po=async({namespace:y,workflowId:t,runId:o,settings:P,decodeSetting:c})=>{try{const a=await Jr({namespace:y,workflowId:t,runId:o,sort:"ascending"});if(c==="encoded")qt(a,`${o}/events.json`,"text/plain");else{const s=[];for(const n of a){const p=await mo(n,P,c);s.push(p)}qt(s,`${o}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var _o=q('<div class="flex items-center space-x-4"><!></div>');function xo(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Er,"$parameters",o),a=()=>Q(cn,"$isCloud",o),s=m(),n=m(),{namespace:p,workflowId:_,runId:f}=c();I(()=>Nt,()=>{u(s,Nt({namespace:p,workflow:_,run:f}))}),I(()=>e(s),()=>{u(n,e(s)+".json")}),Se(),Te();var A=Oe(),T=oe(A);{var v=d=>{var x=_o(),C=$(x);or(C,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(n)},newTab:!0,"data-testid":"view-raw-event-history",children:(E,w)=>{me();var g=ve();M(j=>R(g,j),[()=>h("events.view-raw-history")],r),l(E,g)},$$slots:{default:!0}}),k(x),l(d,x)};Z(T,d=>{a()||d(v)})}l(y,A),$e(),P()}var wo=q('<h3 slot="title"> </h3>'),ko=q("<!> <!> <!>",1),ho=q('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function $o(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Ke,"$page",o),a=()=>Q(Lt,"$downloadEventHistorySetting",o);let s=F(t,"open",12,!1),n=F(t,"namespace",8),p=F(t,"workflowId",8),_=F(t,"runId",8);const f=()=>{s(!1),po({namespace:n(),workflowId:p(),runId:_(),settings:c().data.settings,decodeSetting:a()})};Te();const A=r(()=>h("common.download")),T=r(()=>h("common.cancel"));tn(y,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(A)},get cancelText(){return e(T)},get open(){return s()},set open(v){s(v)},$$events:{confirmModal:()=>f(),cancelModal:()=>s(!1)},$$slots:{title:(v,d)=>{var x=wo(),C=$(x,!0);k(x),M(E=>R(C,E),[()=>h("common.download-event-history-json")],r),l(v,x)},content:(v,d)=>{var x=ho(),C=$(x);rn(C,{group:Lt,name:"decode-setting",class:"h-auto overflow-auto",children:(w,g)=>{var j=ko(),L=oe(j);const J=r(()=>h("events.encoded"));At(L,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(J)}});var O=i(L,2);const N=r(()=>h("events.decoded")),V=r(()=>h("events.decoded-description"));At(O,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(N)},get description(){return e(V)}});var G=i(O,2);const b=r(()=>h("events.readable")),S=r(()=>h("events.readable-description"));At(G,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(b)},get description(){return e(S)}}),l(w,j)},$$slots:{default:!0}});var E=i(C,2);xo(E,{}),k(x),l(v,x)}},$$legacy:!0}),$e(),P()}const yo=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],bo=y=>!!y.workflowExecutionStartedEventAttributes,To=y=>{for(const t of yo)if(y.eventType===t)return!0;return!1},Eo=y=>Qt(y)?y.attributes.input:Lr(y)?y.attributes.result===null?null:y.attributes.result:y.attributes,Po=y=>{var s;let t,o,P=!1,c,a;for(const n of y)if(bo(n)){c=n;continue}else if(To(n)){a=n;continue}return c&&(t=St(((s=c==null?void 0:c.workflowExecutionStartedEventAttributes)==null?void 0:s.input)??null)),a&&(P=Qt(a),o=St(Eo(a))),{input:t,results:o,contAsNew:P}};var Io=q('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function Ao(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(ht,"$fullEventHistory",o),a=()=>Q($t,"$workflowRun",o),s=m(),n=m();I(()=>c(),()=>{u(s,Po(c()))}),I(()=>a(),()=>{u(n,a().workflow.isRunning)}),Se(),Te();var p=Io(),_=$(p);const f=r(()=>h("workflows.input"));Bt(_,{get title(){return e(f)},get content(){return e(s).input},get isRunning(){return e(n)}});var A=i(_,2);const T=r(()=>h("workflows.result"));Bt(A,{get title(){return e(T)},get content(){return e(s).results},get isRunning(){return e(n)}}),k(p),l(y,p),$e(),P()}var Ho=q('<div class="mb-4"><!></div>');function Wo(y,t){he(t,!1);const[o,P]=He(),c=()=>Q($t,"$workflowRun",o),a=m(),s=m(),n=m();var p=m();I(()=>(e(a),e(s),c()),()=>{(T=>(u(a,T.workflow),u(s,T.workers)))(c())}),I(()=>(e(a),te(p),e(s)),()=>{u(n,(e(a)===null||e(a)===void 0?void 0:e(a).isRunning)&&!(!(u(p,e(s)===null||e(s)===void 0?void 0:e(s).pollers)===null||te(p)===void 0)&&te(p).length))}),Se(),Te();var _=Oe(),f=oe(_);{var A=T=>{var v=Ho(),d=$(v);const x=r(()=>h("workflows.workflow-error-no-workers-title"));zt(d,{icon:"warning",intent:"warning",get title(){return e(x)},children:(C,E)=>{me();var w=ve();M(g=>R(w,g),[()=>{var g;return h("workflows.workflow-error-no-workers-description",{taskQueue:(g=e(a))==null?void 0:g.taskQueue})}],r),l(C,w)},$$slots:{default:!0}}),k(v),dn(1,v,()=>vn,()=>({duration:200,delay:100})),l(T,v)};Z(f,T=>{e(n)&&T(A)})}l(y,_),$e(),P()}var So=q('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Co(y,t){const o=xt(t,["children","$$slots","$$events","$$legacy"]),P=xt(o,["id","open","onToggle","icon"]);he(t,!1);let c=F(t,"id",24,()=>crypto.randomUUID()),a=F(t,"open",12,!1),s=F(t,"onToggle",8,void 0),n=F(t,"icon",8,void 0);const p=async()=>{s()&&await s()(),a(!a())};Te();var _=So(),f=$(_),A=$(f),T=$(A);Xe(T,t,"title",{},null);var v=i(T,2);Xe(v,t,"description",{},null);var d=i(v,2),x=$(d);Xe(x,t,"action",{},null);var C=i(x,2);const E=r(()=>n()?n():a()?"arrow-down":"arrow-right");Je(C,{get name(){return e(E)}}),k(d),k(A),k(f);var w=i(f,2);let g;var j=$(w);Xe(j,t,"default",{get open(){return a()}},null),k(w),k(_),M(L=>{qe(_,1,`w-full ${P.class??""}`),ue(f,"id",`${c()??""}-trigger`),ue(f,"aria-expanded",a()),ue(f,"aria-controls",`${c()??""}-content`),ue(w,"id",`${c()??""}-content`),ue(w,"aria-labelledby",`${c()??""}-trigger`),g=qe(w,1,"block w-full bg-primary p-2",null,g,L)},[()=>({hidden:!a()})],r),wt("click",f,p),l(y,_),$e()}var Fo=q("<!> <!>",1),jo=q("<!> <!>",1),zo=q('<p class="flex items-center gap-2"> <!></p>'),Ro=q('<p class="flex items-center gap-2"> <!></p>'),Lo=q('<p class="flex items-center gap-2"> <!></p>'),Oo=q('<p class="flex items-center gap-2"> <!></p>'),Mo=q('<p class="flex items-center gap-2"> <!></p>'),Do=q('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Go=q('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Yt(y,t){he(t,!0);const[o,P]=He(),c=()=>Q(jt,"$timeFormat",o),a=()=>Q(Zt,"$relativeTime",o),s=()=>Q(Kt,"$timestampFormat",o);var n,p,_,f;const A=pe(()=>Ze(t.callback.lastAttemptCompleteTime,c(),{relative:a(),format:s()})),T=pe(()=>Ze(t.callback.nextAttemptScheduleTime,c(),{relative:a(),format:s()})),v=pe(()=>(n=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||n===void 0?void 0:n.message),d=pe(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),x=pe(()=>(_=(p=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||p===void 0?void 0:p.nexus)===null||_===void 0?void 0:_.url),C={Standby:h("nexus.callback.standby"),Scheduled:h("nexus.callback.scheduled"),"Backing Off":h("nexus.callback.backing-off"),Failed:h("nexus.callback.failed"),Succeeded:h("nexus.callback.succeeded")},E="Failed",w=pe(()=>t.callback.state===E),g=pe(()=>C[t.callback.state]||h("nexus.nexus-callback")),j=pe(()=>((f=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||f===void 0?void 0:f.links)||[]),L=pe(()=>!e(j).length&&!t.link&&e(x)),J=pe(()=>e(w)?"error":"info");zt(y,{icon:"nexus",get intent(){return e(J)},get title(){return e(g)},children:(O,N)=>{var V=Go(),G=oe(V),b=$(G);{var S=U=>{var X=Oe(),ce=oe(X);ot(ce,17,()=>e(j),ge=>{var ee,de,ne;return((de=(ee=ge.workflowEvent)==null?void 0:ee.eventRef)==null?void 0:de.eventId)||((ne=ge.workflowEvent)==null?void 0:ne.requestIdRef.requestId)},(ge,ee,de,ne)=>{var Ee=Fo(),We=oe(Ee);gt(We,{get link(){return e(ee)}});var be=i(We,2);const Pe=pe(()=>h("nexus.link-namespace")),we=pe(()=>Vt({namespace:e(ee).workflowEvent.namespace}));gt(be,{get link(){return e(ee)},get label(){return e(Pe)},get value(){return e(ee).workflowEvent.namespace},get href(){return e(we)}}),l(ge,Ee)}),l(U,X)},H=(U,X)=>{{var ce=ge=>{var ee=jo(),de=oe(ee);gt(de,{get link(){return t.link}});var ne=i(de,2);const Ee=pe(()=>h("nexus.link-namespace")),We=pe(()=>Vt({namespace:t.link.workflowEvent.namespace}));gt(ne,{get link(){return t.link},get label(){return e(Ee)},get value(){return t.link.workflowEvent.namespace},get href(){return e(We)}}),l(ge,ee)};Z(U,ge=>{t.link&&ge(ce)},X)}};Z(b,U=>{e(j).length?U(S):U(H,!1)})}var re=i(b,2),_e=$(re),fe=$(_e,!0),B=i(fe);Le(B,{type:"subtle",children:(U,X)=>{me();var ce=ve();M(()=>R(ce,t.callback.state)),l(U,ce)},$$slots:{default:!0}}),k(_e);var z=i(_e,2);{var Y=U=>{var X=zo(),ce=$(X),ge=i(ce);Le(ge,{type:"subtle",children:(ee,de)=>{me();var ne=ve();M(()=>R(ne,t.callback.attempt)),l(ee,ne)},$$slots:{default:!0}}),k(X),M(ee=>R(ce,`${ee??""} `),[()=>h("common.attempt")]),l(U,X)};Z(z,U=>{t.callback.attempt&&U(Y)})}var D=i(z,2);{var W=U=>{var X=Ro(),ce=$(X),ge=i(ce);Le(ge,{type:"subtle",children:(ee,de)=>{me();var ne=ve();M(()=>R(ne,e(A))),l(ee,ne)},$$slots:{default:!0}}),k(X),M(ee=>R(ce,`${ee??""} `),[()=>h("nexus.last-attempt-completed-time")]),l(U,X)};Z(D,U=>{t.callback.lastAttemptCompleteTime&&U(W)})}var K=i(D,2);{var se=U=>{var X=Lo(),ce=$(X),ge=i(ce);Le(ge,{type:"subtle",children:(ee,de)=>{me();var ne=ve();M(()=>R(ne,e(T))),l(ee,ne)},$$slots:{default:!0}}),k(X),M(ee=>R(ce,`${ee??""} `),[()=>h("nexus.next-attempt-scheduled-time")]),l(U,X)};Z(K,U=>{t.callback.nextAttemptScheduleTime&&U(se)})}k(re);var le=i(re,2);{var xe=U=>{var X=Oo(),ce=$(X),ge=i(ce);Le(ge,{type:"subtle",children:(ee,de)=>{me();var ne=ve();M(()=>R(ne,e(x))),l(ee,ne)},$$slots:{default:!0}}),k(X),M(ee=>R(ce,`${ee??""} `),[()=>h("nexus.callback-url")]),l(U,X)};Z(le,U=>{e(L)&&U(xe)})}var ye=i(le,2);{var Ce=U=>{var X=Mo(),ce=$(X),ge=i(ce);Le(ge,{type:"subtle",children:(ee,de)=>{me();var ne=ve();M(()=>R(ne,e(d))),l(ee,ne)},$$slots:{default:!0}}),k(X),M(ee=>R(ce,`${ee??""} `),[()=>h("nexus.blocked-reason")]),l(U,X)};Z(ye,U=>{e(d)&&U(Ce)})}var Ie=i(ye,2);{var Me=U=>{var X=Do(),ce=$(X),ge=$(ce,!0);k(ce);var ee=i(ce,2);const de=pe(()=>h("common.copy-icon-title")),ne=pe(()=>h("common.copy-success-icon-title"));_t(ee,{get content(){return e(v)},language:"text",get copyIconTitle(){return e(de)},get copySuccessIconTitle(){return e(ne)}}),k(X),M(Ee=>R(ge,Ee),[()=>h("nexus.last-attempt-failure")]),l(U,X)};Z(Ie,U=>{e(v)&&U(Me)})}k(G);var ae=i(G,2);fr(ae,()=>t.children??gr),M(U=>R(fe,U),[()=>h("common.state")]),l(O,V)},$$slots:{default:!0}}),$e(),P()}var Uo=q('<div class="flex flex-col gap-2"></div>'),No=q('<p class="p-1" slot="title"> </p>'),Vo=q('<div class="py-2"><!></div>');function Bo(y,t){he(t,!0);const[o,P]=He(),c=()=>Q(ht,"$fullEventHistory",o);var a;const s=pe(()=>c()[0]),n=pe(()=>(a=e(s)===null||e(s)===void 0?void 0:e(s).links)===null||a===void 0?void 0:a[0]),p=pe(()=>t.callbacks[0]);Yt(y,{get callback(){return e(p)},get link(){return e(n)},children:(_,f)=>{var A=Oe(),T=oe(A);{var v=d=>{var x=Vo(),C=$(x);Co(C,{children:Ct,$$slots:{default:(E,w)=>{const g=pe(()=>w.open);var j=Oe(),L=oe(j);{var J=O=>{var N=Uo();ot(N,21,()=>t.callbacks.slice(1),yt,(V,G)=>{Yt(V,{get callback(){return e(G)}})}),k(N),l(O,N)};Z(L,O=>{e(g)&&O(J)})}l(E,j)},title:(E,w)=>{var g=No(),j=$(g);k(g),M(()=>R(j,`View ${t.callbacks.length-1} other Callbacks`)),l(E,g)}}}),k(x),l(d,x)};Z(T,d=>{t.callbacks.length>1&&d(v)})}l(_,A)},$$slots:{default:!0}}),$e(),P()}var qo=q("<!> <!> <!> <!> <!>",1),Yo=q('<div class="flex flex-col gap-0 pt-4"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative pb-24"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col"><!> <!></div></div> <!>',1);function Jo(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Ke,"$page",o),a=()=>Q($t,"$workflowRun",o),s=()=>Q(at,"$eventFilterSort",o),n=()=>Q(tt,"$eventViewType",o),p=()=>Q(Jt,"$filteredEventHistory",o),_=()=>Q(Pr,"$currentEventHistory",o),f=()=>Q(it,"$pauseLiveUpdates",o),A=()=>Q(Ot,"$minimizeEventView",o),T=m(),v=m(),d=m(),x=m(),C=m(),E=m(),w=m(),g=m(),j=m(),L=m();xr(()=>{Ht()});let J=m(!1);const O=()=>{e(C)?ke(at,"ascending"):ke(at,"descending")};I(()=>(e(T),c()),()=>{(ae=>u(T,ae.namespace))(c().params)}),I(()=>(e(v),a()),()=>{(ae=>u(v,ae.workflow))(a())}),I(()=>e(v),()=>{u(d,e(v)===null||e(v)===void 0?void 0:e(v).pendingActivities)}),I(()=>e(v),()=>{u(x,e(v)===null||e(v)===void 0?void 0:e(v).pendingNexusOperations)}),I(()=>s(),()=>{u(C,s()==="descending")}),I(()=>n(),()=>{u(E,n()==="compact")}),I(()=>(p(),e(d),e(x)),()=>{u(w,rr(p(),"ascending",e(d),e(x)))}),I(()=>(e(C),e(w)),()=>{u(g,e(C)?[...e(w)].reverse():e(w))}),I(()=>(e(C),p()),()=>{u(j,e(C)?[...p()].reverse():p())}),I(()=>_(),()=>{u(L,Or(_(),"ascending"))}),I(()=>(n(),Ht),()=>{n(),Ht()}),I(()=>(e(v),f()),()=>{!e(v).isRunning&&f()&&ke(it,!1)}),Se(),Te();var N=Yo(),V=oe(N),G=$(V);Wo(G,{});var b=i(G,2),S=$(b);Ao(S,{});var H=i(S,2);{var re=ae=>{const U=r(()=>{var X;return(X=e(v))==null?void 0:X.pendingWorkflowTask});go(ae,{get error(){return e(L)},get pendingTask(){return e(U)}})};Z(H,ae=>{e(L)&&ae(re)})}var _e=i(H,2);{var fe=ae=>{Bo(ae,{get callbacks(){return e(v).callbacks}})};Z(_e,ae=>{var U,X;(X=(U=e(v))==null?void 0:U.callbacks)!=null&&X.length&&ae(fe)})}k(b),k(V);var B=i(V,2),z=$(B);let Y;var D=$(z),W=$(D,!0);k(D);var K=i(D,2),se=$(K);un(se,{children:(ae,U)=>{var X=qo(),ce=oe(X);{var ge=we=>{const Fe=r(()=>e(C)?"descending":"ascending");mt(we,{get leadingIcon(){return e(Fe)},"data-testid":"zoom-in",size:"sm",$$events:{click:O},children:(Ae,De)=>{me();var Re=ve();M(()=>R(Re,e(C)?"Descending":"Ascending")),l(Ae,Re)},$$slots:{default:!0}})};Z(ce,we=>{n()!=="json"&&we(ge)})}var ee=i(ce,2);const de=r(()=>A()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");fn(ee,{get text(){return e(de)},top:!0,children:(we,Fe)=>{const Ae=r(()=>A()?"minimize":"expand");mt(we,{get leadingIcon(){return e(Ae)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>ke(Ot,!A())},children:(De,Re)=>{me();var Qe=ve();M(()=>R(Qe,A()?"Minimized":"Expanded")),l(De,Qe)},$$slots:{default:!0}})},$$slots:{default:!0}});var ne=i(ee,2);In(ne,{get compact(){return e(E)},get minimized(){return A()}});var Ee=i(ne,2);const We=r(()=>!e(v).isRunning),be=r(()=>f()?"play":"pause");mt(Ee,{get disabled(){return e(We)},get leadingIcon(){return e(be)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>ke(it,!f())},children:(we,Fe)=>{me();var Ae=ve();M(()=>R(Ae,f()?"Unfreeze":"Freeze")),l(we,Ae)},$$slots:{default:!0}});var Pe=i(Ee,2);mt(Pe,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>u(J,!0)},children:(we,Fe)=>{me();var Ae=ve();M(De=>R(Ae,De),[()=>h("common.download")],r),l(we,Ae)},$$slots:{default:!0}}),l(ae,X)},$$slots:{default:!0}}),k(K),k(z);var le=i(z,2),xe=$(le);const ye=r(()=>!!e(L)),Ce=r(()=>A()?360:void 0);lr(xe,{get workflow(){return e(v)},get groups(){return e(g)},get error(){return e(ye)},get viewportHeight(){return e(Ce)}});var Ie=i(xe,2);wn(Ie,{get groups(){return e(g)},get history(){return e(j)},get minimized(){return A()}}),k(le),k(B);var Me=i(B,2);$o(Me,{get namespace(){return e(T)},get workflowId(){return e(v).id},get runId(){return e(v).runId},get open(){return e(J)},set open(ae){u(J,ae)},$$legacy:!0}),M((ae,U)=>{Y=qe(z,1,"surface-background flex flex-wrap items-center justify-between gap-2 border-b border-subtle py-2 xl:gap-8 svelte-18jakp5",null,Y,ae),R(W,U)},[()=>({"sticky-header":!A()}),()=>h("workflows.event-history")],r),l(y,N),$e(),P()}var Qo=q("<!> <!>",1);function sa(y,t){he(t,!1);const[o,P]=He(),c=()=>Q(Ke,"$page",o),a=c().params.workflow;Te();var s=Qo(),n=oe(s);const p=r(()=>`${h("workflows.workflow-history")} | ${a}`);pr(n,{get title(){return e(p)},get url(){return c().url.href}});var _=i(n,2);Jo(_,{}),l(y,s),$e(),P()}export{sa as component};
