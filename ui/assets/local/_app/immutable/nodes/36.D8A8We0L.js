import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as he,b as $e,g as e,o as r,l as I,a as Se,t as q,f as ae,i as $,r as k,c as i,e as l,s as u,m,aj as te,M as le,n as pe,k as ve,j as L,h as Oe,b8 as ze,aO as ur,q as Ct,u as _e,d as fr,a8 as gr}from"../chunks/C-0kx8Rl.js";import{i as Te,s as Xe}from"../chunks/DFzl7kYA.js";import{a as X,s as He,c as ke,m as mr,p as F,l as xt}from"../chunks/B0Wc33k0.js";import{p as Ke}from"../chunks/Cp2j7rfy.js";import{P as pr}from"../chunks/DMOchDbk.js";import{t as h}from"../chunks/BXv1jDVW.js";import{s as z,e as wt}from"../chunks/B-1TjF6E.js";import{i as K}from"../chunks/DIXBMONz.js";import{a as qe,s as ue,d as _r}from"../chunks/DliSAU7O.js";import{b as xr}from"../chunks/C31mSu2e.js";import{E as wr,C as lt,L as Ye,T as rt,D as kt,t as kr,g as hr}from"../chunks/HrC_Oa0H.js";import{T as $r,a as Pt}from"../chunks/BKJvgzwp.js";import{W as yr}from"../chunks/CQ5ciH67.js";import{T as br}from"../chunks/CnNMSvOi.js";import{b as Jt,d as Rt,a as Tr,e as st,f as ht,h as tt,i as Ve,c as Be,p as it,j as Er,k as Lt,m as Ot,g as Pr}from"../chunks/Der_a4t4.js";import{w as $t}from"../chunks/D3po6tj5.js";import{e as ot,i as yt}from"../chunks/CdE3I_3f.js";import{w as ct,g as Wt,a as Ir,o as Ar}from"../chunks/Dl-yZlXH.js";import{C as ut}from"../chunks/B47b57DJ.js";import{I as Je}from"../chunks/BQ19dEFL.js";import{M as Hr}from"../chunks/BMNaZEO-.js";import{c as Wr,d as Sr,b as ft}from"../chunks/BSdQFxOj.js";import{M as Cr}from"../chunks/DyhNL4tU.js";import{Y as Mt,l as It,I as Dt,F as Gt,o as Fr,Z as jr,_ as zr,$ as Rr,a0 as Qt,a1 as Lr,a2 as Or}from"../chunks/Czygw8aY.js";import{t as Mr}from"../chunks/CQFuwC02.js";import{i as Dr}from"../chunks/CP0sehdm.js";import{k as Ft}from"../chunks/B0kvq5Du.js";import{b as Xt}from"../chunks/Dyi3syiU.js";import{f as Ze,a as jt,r as Zt,t as Kt}from"../chunks/BnZXuwac.js";import{i as er}from"../chunks/Dzb719w0.js";import{D as pt,y as tr}from"../chunks/2uWpc1Jl.js";import{b as Gr,g as Ur,d as Nr,c as gt}from"../chunks/DlH7AS0E.js";import{W as Vr}from"../chunks/rQ9pVa1K.js";import{B as Br}from"../chunks/C08ZmXky.js";import{a as qr}from"../chunks/D7Rg7Pz7.js";import{g as rr}from"../chunks/CpDY3vrN.js";import{f as Yr,b as Jr}from"../chunks/B1I6inWS.js";import{x as Qr}from"../chunks/CKmp34qk.js";import{p as Ut}from"../chunks/BTE2jmxu.js";import{M as Xr}from"../chunks/C5jxWr2R.js";import{a as nr}from"../chunks/CugiL4oY.js";import{b as Zr}from"../chunks/B9s8aHCz.js";import{T as Kr}from"../chunks/D-7Yb9FW.js";import{A as zt}from"../chunks/LaSHB24F.js";import{L as or}from"../chunks/Bmw4c8qK.js";import{s as en}from"../chunks/ByTIZu23.js";import{A as ar}from"../chunks/BEz0tgA7.js";import{C as _t}from"../chunks/CjXSN14h.js";import{B as Le}from"../chunks/CqraL4jo.js";import{M as tn}from"../chunks/BtZQVd3W.js";import{R as rn,a as At}from"../chunks/CZPG30hH.js";import{c as nn,d as on}from"../chunks/QWYRXpQB.js";import{g as an,b as sn,a as ln}from"../chunks/OHT_RUcf.js";import{s as St}from"../chunks/BDfAQ6r3.js";import{i as cn}from"../chunks/CB1A6H-o.js";import{c as Nt,a as Vt}from"../chunks/BXIlYRi3.js";import{I as Bt}from"../chunks/BfWttKZg.js";import{t as dn,a as vn}from"../chunks/DABdiynt.js";import{T as un,a as mt}from"../chunks/BdiOj3YC.js";import{T as fn}from"../chunks/D7zMa2zU.js";function gn(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Jt,"$filteredEventHistory",o),s=()=>X(Rt,"$decodeEventHistory",o);Te(),yr(y,{get events(){return c()},decode:n=>{const p=r(()=>h("events.decode-event-history"));br(n,{get label(){return e(p)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return mr(),s()},set checked(_){ke(Rt,_)},$$legacy:!0})},$$slots:{decode:!0}}),$e(),P()}var mn=q("<!> <!> <!>",1),pn=q('<div class="border-t border-subtle px-4"><!></div>'),_n=q('<div data-testid="event-summary-table"><!></div>'),xn=q('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function wn(y,t){he(t,!1);const[o,P]=He(),c=()=>X($t,"$workflowRun",o),s=()=>X(st,"$eventFilterSort",o),a=()=>X(ht,"$fullEventHistory",o),n=()=>X(tt,"$eventViewType",o),p=()=>X(Ke,"$page",o),_=m(),f=m(),A=m(),T=m(),v=m(),d=m(),x=m();var C=m(),E=m(),w=m(),g=m();let j=F(t,"history",8),R=F(t,"groups",8),Q=F(t,"minimized",8,!0);const M=()=>{ke(tt,"feed")},D=()=>{ke(tt,"compact")},Y=()=>{ke(tt,"json")};I(()=>(e(_),c()),()=>{(B=>u(_,B.workflow))(c())}),I(()=>s(),()=>{u(f,s()==="descending")}),I(()=>a(),()=>{u(A,!a().length)}),I(()=>n(),()=>{u(T,n()==="compact")}),I(()=>(te(E),te(C),p(),te(g),te(w)),()=>{ke(Tr,!(u(E,u(C,p().url)===null||te(C)===void 0?void 0:te(C).searchParams)===null||te(E)===void 0)&&te(E).get("category")?u(g,u(w,p().url)===null||te(w)===void 0?void 0:te(w).searchParams)===null||te(g)===void 0?void 0:te(g).get("category").split(","):void 0)}),I(()=>e(_),()=>{u(v,e(_).pendingActivities)}),I(()=>e(_),()=>{u(d,e(_).pendingNexusOperations)}),I(()=>(e(T),le(R()),e(f),e(d),e(v),le(j())),()=>{u(x,e(T)?R():e(f)?[...e(d),...e(v),...j()]:[...j(),...e(v),...e(d)])}),Se(),Te();var O=xn(),b=ae(O),H=$(b),S=$(H);$r(S,{children:(B,G)=>{var N=mn(),V=ae(N);const W=r(()=>n()==="feed");Pt(V,{get active(){return e(W)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:M},children:(ye,Ce)=>{pe();var Ie=ve("All");l(ye,Ie)},$$slots:{default:!0}});var J=i(V,2);const ne=r(()=>n()==="compact");Pt(J,{get active(){return e(ne)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:D},children:(ye,Ce)=>{pe();var Ie=ve("Compact");l(ye,Ie)},$$slots:{default:!0}});var ie=i(J,2);const ge=r(()=>n()==="json");Pt(ie,{get active(){return e(ge)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:Y},children:(ye,Ce)=>{pe();var Ie=ve("JSON");l(ye,Ie)},$$slots:{default:!0}}),l(B,N)},$$slots:{default:!0}}),k(H),k(b);var re=i(b,2);{var xe=B=>{var G=pn(),N=$(G);gn(N,{}),k(G),l(B,G)},fe=B=>{var G=_n(),N=$(G);wr(N,{get updating(){return e(A)},get items(){return e(x)},get groups(){return R()},get compact(){return e(T)},get minimized(){return Q()}}),k(G),l(B,G)};K(re,B=>{n()==="json"?B(xe):B(fe,!1)})}l(y,O),$e(),P()}const sr=200,kn=ct(0),hn=ct(sr),nt=ct([]),dt=ct(0),Ht=()=>{nt.set([]),dt.set(0),kn.set(0),hn.set(sr)},$n=()=>{nt.set([]),dt.set(0)},ir=y=>{Wt(nt).includes(y.id)?(dt.set(0),nt.set([])):nt.set([y.id])},yn=y=>y==null?void 0:y.nexus;var bn=q("<div><!></div>"),Tn=q('<span class="hidden text-sm md:block"> </span>'),En=q("<!> <!> <!> <!> <!>",1),Pn=q("<!> <!>",1);function In(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Mr,"$temporalVersion",o),s=()=>X(Ke,"$page",o),a=()=>X(Ve,"$eventTypeFilter",o),n=()=>X(Be,"$eventStatusFilter",o),p=()=>X(tt,"$eventViewType",o),_=m(),f=m(),A=m();var T=m();let v=F(t,"compact",8,!1),d=F(t,"minimized",8,!0),x=ct(!1);const C=({value:E})=>{$n(),ke(Ve,a().some(w=>w===E)?a().filter(w=>w!==E):[...a(),E])};I(()=>(le(v()),It),()=>{u(_,v()?Mt.map(E=>E.value):It.map(E=>E.value))}),I(()=>(le(v()),lt),()=>{u(f,[...(v()?Mt:It).map(E=>({...E,label:h(E.label),icon:lt[E.value],description:h(E.description)}))])}),I(()=>(c(),e(f)),()=>{Dr("1.21.0",c())&&u(f,e(f).filter(({value:E})=>E!=="update"))}),I(()=>(te(T),s(),e(f)),()=>{yn(u(T,s().data.systemInfo)===null||te(T)===void 0?void 0:te(T).capabilities)||u(f,e(f).filter(({value:E})=>E!=="nexus"))}),I(()=>(a(),e(_)),()=>{u(A,a().length<e(_).length)}),Se(),Te(),Wr(y,{open:x,children:(E,w)=>{var g=Pn(),j=ae(g);Hr(j,{controls:"status-menu",size:"sm",leading:D=>{var Y=bn();let O;var b=$(Y);const H=r(()=>e(A)&&"pt-0.5 text-white");Je(b,{name:"filter",get class(){return e(H)}}),k(Y),L(S=>O=qe(Y,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,O,S),[()=>({"bg-interactive":e(A)})],r),l(D,Y)},children:(D,Y)=>{var O=Tn(),b=$(O,!0);k(O),L(H=>z(b,H),[()=>h("common.filter")],r),l(D,O)},$$slots:{leading:!0,default:!0}});var R=i(j,2);const Q=r(()=>d()?"top-right":"right");Sr(R,{id:"event-type-menu",keepOpen:!0,get position(){return e(Q)},class:"w-[220px] md:w-[360px]",children:(M,D)=>{var Y=En(),O=ae(Y);const b=r(()=>h("common.all"));ft(O,{get"data-testid"(){return e(b)},onclick:()=>{ke(Ve,e(_)),ke(Be,!1)},leading:N=>{const V=r(()=>!n()&&a().length===e(_).length),W=r(()=>h("common.all"));ut(N,{get checked(){return e(V)},get label(){return e(W)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{ke(Ve,e(_)),ke(Be,!1)}}})},children:(N,V)=>{pe();var W=ve();L(J=>z(W,J),[()=>h("common.all")],r),l(N,W)},$$slots:{leading:!0,default:!0}});var H=i(O,2);{var S=G=>{const N=r(()=>h("common.pending-and-failed")),V=r(()=>h("common.pending-and-failed-description"));ft(G,{get"data-testid"(){return e(N)},get description(){return e(V)},onclick:()=>{ke(Ve,e(_)),ke(Be,!n())},class:"items-start",leading:J=>{const ne=r(()=>h("common.all"));ut(J,{get checked(){return n()},get label(){return e(ne)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{ke(Ve,e(_)),ke(Be,!n())}}})},children:(J,ne)=>{pe();var ie=ve();L(ge=>z(ie,ge),[()=>h("common.pending-and-failed")],r),l(J,ie)},$$slots:{leading:!0,default:!0}})};K(H,G=>{p()!=="json"&&G(S)})}var re=i(H,2);const xe=r(()=>h("common.none"));ft(re,{get"data-testid"(){return e(xe)},onclick:()=>{ke(Ve,[]),ke(Be,!1)},leading:N=>{const V=r(()=>!n()&&!a().length),W=r(()=>h("common.none"));ut(N,{get checked(){return e(V)},get label(){return e(W)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{ke(Ve,[]),ke(Be,!1)}}})},children:(N,V)=>{pe();var W=ve();L(J=>z(W,J),[()=>h("common.none")],r),l(N,W)},$$slots:{leading:!0,default:!0}});var fe=i(re,2);Cr(fe);var B=i(fe,2);ot(B,1,()=>e(f),yt,(G,N)=>{ft(G,{get"data-testid"(){return e(N).label},get description(){return e(N).description},onclick:()=>{C(e(N))},class:"items-start",leading:W=>{const J=r(()=>a().some(ne=>ne===e(N).value));ut(W,{get checked(){return e(J)},get label(){return e(N).label},labelHidden:!0,class:"mt-px",$$events:{click:()=>C(e(N))}})},children:(W,J)=>{pe();var ne=ve();L(()=>z(ne,e(N).label)),l(W,ne)},$$slots:{leading:!0,default:!0}})}),l(M,Y)},$$slots:{default:!0}}),l(E,g)},$$slots:{default:!0}}),$e(),P()}function An(y,t){he(t,!1);const[o,P]=He(),c=()=>X(it,"$pauseLiveUpdates",o),s=m(),a=m();let n=F(t,"workflow",8),p=F(t,"startTime",8);const _=()=>{const x=new Date;return x.setSeconds(x.getSeconds()+1),x};let f;const A=x=>{x&&(clearInterval(f),f=null)},T=x=>{x?(clearInterval(f),f=null):!f&&n().isRunning&&(f=setInterval(()=>{u(s,_())},1e3))};Ir(()=>{clearInterval(f),f=null,ke(it,!1)}),I(()=>le(n()),()=>{u(s,(n()===null||n()===void 0?void 0:n().endTime)||_())}),I(()=>(le(p()),e(s)),()=>{u(a,pt({start:p(),end:e(s),onlyUnderSecond:!1}))}),I(()=>le(n()),()=>{A(n().endTime)}),I(()=>c(),()=>{T(c())}),Se(),Te();var v=Oe(),d=ae(v);Xe(d,t,"default",{get endTime(){return e(s)},get duration(){return e(a)}},null),l(y,v),$e(),P()}var Hn=q("<div><!></div>");function Wn(y,t){const o=xt(t,["children","$$slots","$$events","$$legacy"]),P=xt(o,["namespace","workflowId","runId","viewportHeight","onLoad"]);he(t,!1);let c=F(t,"namespace",8),s=F(t,"workflowId",8),a=F(t,"runId",8,""),n=F(t,"viewportHeight",8,360),p=F(t,"onLoad",8,()=>{});const _=async()=>{const[v,d]=await Promise.all([Qr({namespace:c(),workflowId:s(),runId:a()}),Yr({namespace:c(),workflowId:s(),runId:a()})]);return{workflow:v.workflow,history:d}},f=(v,d)=>{var x;p()();const C=(x=v==null?void 0:v.pendingActivities)!==null&&x!==void 0?x:[];return rr(d,"ascending",C)};Te();var A=Oe(),T=ae(A);qr(T,_,null,(v,d)=>{var x=r(()=>{var{workflow:R,history:Q}=e(d);return{workflow:R,history:Q}}),C=r(()=>e(x).workflow),E=r(()=>e(x).history),w=Hn(),g=$(w);const j=r(()=>f(e(C),e(E)));lr(g,{get viewportHeight(){return n()},get workflow(){return e(C)},get groups(){return e(j)},readOnly:!0}),k(w),L(()=>qe(w,1,`cursor-pointer overflow-auto ${P.class??""}`)),l(v,w)}),l(y,A),$e()}var Sn=q('<div class="flex items-center gap-1"><!> </div>'),Cn=q(" <!>",1),Fn=q('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),jn=ze('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function zn(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Ke,"$page",o),s=m(),a=m(),n=m(),p=m(),_=m(),f=m(),A=m();var T=m(),v=m();let d=F(t,"group",8),x=F(t,"canvasWidth",8),C=F(t,"x",8,0),E=F(t,"y",8),w=m();const g=W=>{ke(dt,W)},j=async()=>{await ur(),u(s,e(w))};I(()=>e(w),()=>{u(s,e(w)||0)}),I(()=>e(s),()=>{g(e(s)||0)}),I(()=>le(d()),()=>{u(a,(d()===null||d()===void 0?void 0:d().finalClassification)||(d()===null||d()===void 0?void 0:d().classification))}),I(()=>(e(n),c()),()=>{(W=>u(n,W.namespace))(c().params)}),I(()=>le(x()),()=>{u(p,x())}),I(()=>le(d()),()=>{u(_,d().displayName)}),I(()=>(le(d()),Dt),()=>{u(f,d()&&d().eventList.find(Dt))}),I(()=>(te(T),le(d()),te(v)),()=>{u(A,tr({start:u(T,d()===null||d()===void 0?void 0:d().initialEvent)===null||te(T)===void 0?void 0:te(T).eventTime,end:u(v,d()===null||d()===void 0?void 0:d().lastEvent)===null||te(v)===void 0?void 0:te(v).eventTime,includeMilliseconds:!0}))}),I(()=>(le(d()),h),()=>{!(d()===null||d()===void 0)&&d().pendingActivity&&(d().pendingActivity.paused?u(a,h("workflows.paused")):d().pendingActivity.attempt>1?u(a,h("events.event-classification.retrying")):u(a,h("events.event-classification.pending")))}),Se(),Te();var R=jn(),Q=$(R),M=$(Q),D=$(M),Y=$(D),O=$(Y);{var b=W=>{Vr(W,{get status(){return e(a)}})};K(O,W=>{e(a)&&W(b)})}var H=i(O),S=i(H);{var re=W=>{var J=Sn(),ne=$(J);Je(ne,{name:"clock"});var ie=i(ne);k(J),L(()=>z(ie,` ${e(A)??""}`)),l(W,J)};K(S,W=>{e(A)&&W(re)})}k(Y);var xe=i(Y,2),fe=$(xe);Br(fe,{variant:"ghost",size:"xs",$$events:{click:()=>ir(d())},children:(W,J)=>{pe();var ne=Cn(),ie=ae(ne),ge=i(ie);Je(ge,{name:"close"}),L(ye=>z(ie,`${ye??""} `),[()=>h("common.close")],r),l(W,ne)},$$slots:{default:!0}}),k(xe),k(D);var B=i(D,2),G=$(B);Gr(G,{get group(){return d()},get event(){return d().initialEvent}}),k(B);var N=i(B,2);{var V=W=>{var J=Fn(),ne=i($(J),2);Ft(ne,()=>d().eventList.length,ie=>{Wn(ie,{get namespace(){return e(n)},get workflowId(){return e(f).attributes.workflowExecution.workflowId},get runId(){return e(f).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:j})}),k(J),l(W,J)};K(N,W=>{e(f)&&W(V)})}k(M),k(Q),k(R),L(()=>{ue(Q,"x",C()),ue(Q,"y",E()),ue(Q,"width",e(p)),ue(Q,"height",e(s)),z(H,` ${e(_)??""} `)}),Xt(M,"offsetHeight",W=>u(w,W)),l(y,R),$e(),P()}var Rn=ze('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),Ln=ze("<!><!>",1),On=ze("<!><!>",1);function Mn(y,t){he(t,!1);const o=m(),P=m();let c=F(t,"x1",8,0),s=F(t,"x2",8,1e3),a=F(t,"timelineHeight",8,1e3),n=F(t,"startTime",8),p=F(t,"duration",8);const{radius:_}=rt,f=20;I(()=>(le(s()),le(c())),()=>{u(o,s()-c())}),I(()=>e(o),()=>{u(P,e(o)/f)}),Se(),Te();var A=On(),T=ae(A);const v=r(()=>[c(),a()]),d=r(()=>[c()+e(o),a()]);Ye(T,{strokeWidth:_/2,get startPoint(){return e(v)},get endPoint(){return e(d)}});var x=i(T);ot(x,1,()=>Array(f),yt,(C,E,w)=>{var g=Ln();const j=r(()=>c()+w*e(P)),R=r(()=>a()+_*2);var Q=ae(g);{var M=O=>{const b=r(()=>[e(j),0]),H=r(()=>[e(j),a()]);Ye(O,{strokeWidth:.5,get startPoint(){return e(b)},get endPoint(){return e(H)}})};K(Q,O=>{w!==0&&O(M)})}var D=i(Q);{var Y=O=>{var b=Rn(),H=$(b,!0);k(b),L(S=>{ue(b,"transform",`rotate(90, ${e(j)??""}, ${e(R)??""})`),ue(b,"x",e(j)-_),ue(b,"y",e(R)),z(H,S)},[()=>tr({start:n(),end:new Date(new Date(n().toString()).getTime()+p()/f*w),includeMilliseconds:p()/f<1e3})],r),l(O,b)};K(D,O=>{w!==0&&O(Y)})}l(C,g)}),l(y,A),$e()}var Dn=ze("<text><!></text>"),Gn=ze("<!><!><!>",1);function Un(y,t){he(t,!1);const o=m(),P=m(),c=m(),s=m(),a=m(),n=m();var p=m();let _=F(t,"point",24,()=>[0,0]),f=F(t,"category",8,void 0),A=F(t,"status",8,"none"),T=F(t,"fontSize",8,"13px"),v=F(t,"fontWeight",8,"400"),d=F(t,"textAnchor",8,"start"),x=F(t,"backdrop",8,!1),C=F(t,"backdropHeight",8,0),E=F(t,"icon",8,void 0),w=F(t,"config",8,void 0),g=F(t,"label",8,!1),j=m();I(()=>(e(o),e(P),le(_())),()=>{(b=>(u(o,b[0]),u(P,b[1])))(_())}),I(()=>(le(E()),le(w())),()=>{u(c,E()&&w())}),I(()=>(te(p),e(j)),()=>{u(s,(u(p,e(j)===null||e(j)===void 0?void 0:e(j).getBBox())===null||te(p)===void 0?void 0:te(p).width)||0)}),I(()=>(e(c),e(s)),()=>{u(a,e(c)?e(s)+36:e(s)+12)}),I(()=>(e(c),le(d()),e(o),le(w())),()=>{u(n,e(c)&&d()==="start"?e(o)+w().radius*2:e(o))}),Se(),Te();var R=Gn(),Q=ae(R);{var M=b=>{const H=r(()=>[e(o)-C(),e(P)]),S=r(()=>[e(o)+e(a),e(P)]);Ye(b,{get startPoint(){return e(H)},get endPoint(){return e(S)},get status(){return A()},get strokeWidth(){return C()}})};K(Q,b=>{x()&&b(M)})}var D=i(Q);{var Y=b=>{const H=r(()=>d()==="end"?e(o)-e(s)-C():e(o)),S=r(()=>e(P)-8),re=r(()=>x()?"text-white":"text-primary");Je(b,{get name(){return E()},get x(){return e(H)},get y(){return e(S)},get class(){return e(re)}})};K(D,b=>{e(c)&&b(Y)})}var O=i(D);Ft(O,()=>e(n),b=>{var H=Dn();let S;var re=$(H);Xe(re,t,"default",{},null),k(H),Zr(H,xe=>u(j,xe),()=>e(j)),L(xe=>{S=qe(H,0,`cursor-pointer select-none outline-none ${f()??""} text-primary`,"svelte-ja82h2",S,xe),ue(H,"x",e(n)),ue(H,"y",e(P)+1),ue(H,"font-size",T()),ue(H,"font-weight",v()),ue(H,"text-anchor",d())},[()=>({label:g(),backdrop:x()})],r),l(b,H)}),l(y,R),$e()}var Nn=ze('<rect fill="transparent" pointer-events="all"></rect>'),Vn=ze("<!><!>",1),Bn=ze("<!><!><!><!>",1),qn=ze('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"><!><!></g>');function Yn(y,t){he(t,!1);const[o,P]=He(),c=()=>X(nr,"$authUser",o),s=m(),a=m(),n=m(),p=m(),_=m(),f=m(),A=m(),T=m(),v=m(),d=m(),x=m();var C=m(),E=m();let w=F(t,"y",8,0),g=F(t,"group",12),j=F(t,"activeGroups",24,()=>[]),R=F(t,"startTime",8),Q=F(t,"endTime",8),M=F(t,"canvasWidth",8),D=F(t,"active",12,!0),Y=F(t,"readOnly",8,!1);const{height:O,gutter:b,radius:H}=rt;let S=m();Ar(async()=>{const V=Ur(g());if(V)try{u(S,await Nr(V,{namespace:Ut.params.namespace,settings:Ut.data.settings,accessToken:c().accessToken})),e(S)&&g(g().decodedLocalActivity=e(S),!0)}catch(W){console.warn("Failed to decode local activity:",W)}});const re=(V,W,J)=>{const ne=pt({start:R(),end:V,onlyUnderSecond:!1}),ie=g().eventList.map(Me=>{const U=pt({start:R(),end:Me.eventTime,onlyUnderSecond:!1})/ne;return Math.round(U*W)+b});if(e(n)){const se=pt({start:R(),end:e(n),onlyUnderSecond:!1})/ne,U=Math.round(se*W)+b;ie.push(U)}const{textAnchor:ge,textIndex:ye,textPosition:Ce,backdrop:Ie}=kr(ie,J,W,g().isPending,rt);return{points:ie,textAnchor:ge,textIndex:ye,textPosition:Ce,backdrop:Ie}},xe=()=>{Y()||ir(g())};I(()=>le(M()),()=>{u(s,M()-2*b)}),I(()=>(le(j()),le(g())),()=>{D(!j().length||j().includes(g().id))}),I(()=>le(g()),()=>{u(a,g()===null||g()===void 0?void 0:g().pendingActivity)}),I(()=>(e(a),te(C)),()=>{u(n,e(a)&&(u(C,e(a).pauseInfo)===null||te(C)===void 0?void 0:te(C).pauseTime))}),I(()=>(e(p),e(_),e(f),e(A),e(T),le(Q()),e(s),le(w())),()=>{(V=>(u(p,V.points),u(_,V.textAnchor),u(f,V.textIndex),u(A,V.textPosition),u(T,V.backdrop)))(re(Q(),e(s),w()))}),I(()=>(le(g()),Gt),()=>{u(v,g().eventList.find(Gt))}),I(()=>(e(v),te(E)),()=>{u(d,e(v)&&(u(E,e(v).attributes)===null||te(E)===void 0?void 0:te(E).attempt)>1)}),I(()=>(le(g()),e(n)),()=>{u(x,g().isPending||!!e(n))}),Se(),Te();var fe=qn();ue(fe,"height",O);var B=$(fe);{var G=V=>{var W=Nn();const J=r(()=>e(n)?e(p)[1]-e(p)[0]:M()-2*b);ue(W,"height",O),L(()=>{ue(W,"y",w()-O/2),ue(W,"x",e(p)[0]),ue(W,"width",e(J))}),l(V,W)};K(B,V=>{e(x)&&V(G)})}var N=i(B);ot(N,1,()=>e(p),yt,(V,W,J)=>{var ne=Bn();const ie=r(()=>e(p)[J+1]),ge=r(()=>e(f)===J);var ye=ae(ne);{var Ce=de=>{const oe=r(()=>[e(W),w()]),Ee=r(()=>[e(ie),w()]),We=r(()=>!!e(n)),be=r(()=>!!e(n)),Pe=r(()=>J===0&&g().lastEvent.classification==="Completed");Ye(de,{get startPoint(){return e(oe)},get endPoint(){return e(Ee)},get category(){return g().category},get classification(){return g().lastEvent.classification},get pending(){return e(We)},get paused(){return e(be)},strokeWidth:H*2,get retried(){return e(d)},get scheduling(){return e(Pe)}})};K(ye,de=>{e(ie)&&de(Ce)})}var Ie=i(ye);{var Me=de=>{var oe=Vn(),Ee=ae(oe);const We=r(()=>[e(W),w()]),be=r(()=>[M()-b,w()]),Pe=r(()=>e(a)?e(a).attempt>1?"retry":"pending":g().category),we=r(()=>!!e(n));Ye(Ee,{get startPoint(){return e(We)},get endPoint(){return e(be)},get category(){return e(Pe)},get classification(){return g().lastEvent.classification},pending:!0,get paused(){return e(we)},strokeWidth:H*2});var Fe=i(Ee);const Ae=r(()=>[e(W),w()]);kt(Fe,{get point(){return e(Ae)},get classification(){return g().lastEvent.classification},icon:"retry",r:H}),l(de,oe)};K(Ie,de=>{!e(ie)&&g().isPending&&!e(n)&&de(Me)})}var se=i(Ie);{var U=de=>{const oe=r(()=>{var be,Pe;return(Pe=(be=g())==null?void 0:be.userMetadata)==null?void 0:Pe.summary}),Ee=r(()=>{var be;return Fr(g().initialEvent)?(be=g())==null?void 0:be.displayName:""}),We=r(()=>{var be;return e(S)?h("events.category.local-activity"):(be=g())==null?void 0:be.displayName});Xr(de,{get value(){return e(oe)},get prefix(){return e(Ee)},get fallback(){return e(We)},children:Ct,$$slots:{default:(be,Pe)=>{const we=r(()=>Pe.decodedValue),Fe=r(()=>e(a)&&!e(a).paused||e(d)?"retry":void 0);Un(be,{get point(){return e(A)},get textAnchor(){return e(_)},get backdrop(){return e(T)},backdropHeight:H*2,config:rt,get icon(){return e(Fe)},children:(Ae,De)=>{var Re=Oe(),Qe=ae(Re);{var bt=Ge=>{var je=ve();L(Ue=>z(je,`${Ue??""}
            ${e(a).attempt??""} / ${e(a).maximumAttempts||"∞"}
            • 
            ${e(we)??""}`),[()=>h("workflows.attempt")],r),l(Ge,je)},Tt=(Ge,je)=>{{var Ue=Ne=>{var vt=ve();L(()=>z(vt,`${e(v).attributes.attempt??""} • ${e(we)??""}`)),l(Ne,vt)},Et=(Ne,vt)=>{{var dr=et=>{var at=ve();L(()=>z(at,e(S).value)),l(et,at)},vr=et=>{var at=ve();L(()=>z(at,e(we))),l(et,at)};K(Ne,et=>{e(S)?et(dr):et(vr,!1)},vt)}};K(Ge,Ne=>{e(d)?Ne(Ue):Ne(Et,!1)},je)}};K(Qe,Ge=>{e(a)?Ge(bt):Ge(Tt,!1)})}l(Ae,Re)},$$slots:{default:!0}})}}})};K(se,de=>{e(ge)&&de(U)})}var Z=i(se);const ce=r(()=>[e(W),w()]),me=r(()=>{var de;return(de=g().eventList[J])==null?void 0:de.classification}),ee=r(()=>e(n)&&J!==0?"pause":e(S)?lt["local-activity"]:lt[g().category]);kt(Z,{get point(){return e(ce)},get classification(){return e(me)},get icon(){return e(ee)},r:H}),l(V,ne)}),k(fe),wt("click",fe,xe),wt("keypress",fe,xe),l(y,fe),$e(),P()}var Jn=ze('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function Qn(y,t){he(t,!1);const o=m(),P=m();let c=F(t,"workflow",8),s=F(t,"length",8),a=F(t,"y",8);const{radius:n,height:p,gutter:_}=rt;I(()=>{},()=>{u(o,_)}),I(()=>(e(o),le(s())),()=>{u(P,e(o)+s()-2*_)}),Se(),Te();var f=Jn();ue(f,"height",p);var A=$(f);const T=r(()=>[e(o),a()]),v=r(()=>[e(P),a()]),d=r(()=>er(c()));Ye(A,{get startPoint(){return e(T)},get endPoint(){return e(v)},get classification(){return c().status},strokeWidth:n*2,get pending(){return c().isRunning},get delayed(){return e(d)}});var x=i(A);const C=r(()=>[e(o),a()]);kt(x,{get point(){return e(C)},get classification(){return c().status},r:n});var E=i(x);const w=r(()=>e(o)-n/2),g=r(()=>a()-n/2);Je(E,{name:"workflow",get x(){return e(w)},get y(){return e(g)},width:n,height:n,strokeWidth:"4",class:"text-black"});var j=i(E);const R=r(()=>[e(P),a()]);kt(j,{get point(){return e(R)},get classification(){return c().status},r:n});var Q=i(j);const M=r(()=>e(P)-n/2),D=r(()=>a()-n/2);Je(Q,{name:"workflow",get x(){return e(M)},get y(){return e(D)},width:n,height:n,strokeWidth:"4",class:"text-black"}),k(f),l(y,f),$e()}var Xn=ze("<!><!>",1),Zn=q('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),Kn=q('<div id="event-history-timeline-graph" class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function lr(y,t){he(t,!1);const[o,P]=He(),c=()=>X(dt,"$activeGroupHeight",o),s=()=>X(Be,"$eventStatusFilter",o),a=()=>X(ht,"$fullEventHistory",o),n=()=>X(nt,"$activeGroups",o),p=()=>X(st,"$eventFilterSort",o),_=()=>X(jt,"$timeFormat",o),f=m(),A=m(),T=m(),v=m(),d=m(),x=m(),C=m();var E=m(),w=m();let g=F(t,"x",8,0),j=F(t,"y",8,0),R=F(t,"workflow",8),Q=F(t,"groups",8),M=F(t,"viewportHeight",8),D=F(t,"readOnly",8,!1),Y=F(t,"error",8,!1);const{height:O,gutter:b,radius:H}=rt;let S=m(0),re=m(0);const xe=G=>{var N;u(re,(N=G==null?void 0:G.target)===null||N===void 0?void 0:N.scrollTop)};I(()=>(le(D()),c()),()=>{u(f,D()?0:c())}),I(()=>(le(Q()),s()),()=>{u(A,hr(Q(),s()))}),I(()=>(te(E),a(),le(R()),te(w)),()=>{u(T,(u(E,a()[0])===null||te(E)===void 0?void 0:te(E).eventTime)<R().executionTime?u(w,a()[0])===null||te(w)===void 0?void 0:te(w).eventTime:R().executionTime)}),I(()=>(le(R()),e(T)),()=>{u(v,!er(R())&&e(T)||R().startTime)}),I(()=>(e(A),e(f)),()=>{u(d,Math.max(O*(e(A).length+2),120)+e(f))}),I(()=>e(d),()=>{u(x,e(d)+120)}),I(()=>(n(),p(),e(f)),()=>{u(C,G=>{const N=n()===null||n()===void 0?void 0:n().filter(V=>p()==="ascending"?parseInt(V)<parseInt(G.id):parseInt(V)>parseInt(G.id));return N!=null&&N.length?e(f):0})}),Se(),Te();var fe=Kn(),B=$(fe);An(B,{get workflow(){return R()},get startTime(){return e(v)},children:Ct,$$slots:{default:(G,N)=>{const V=r(()=>N.endTime),W=r(()=>N.duration);var J=Zn(),ne=ae(J);let ie;var ge=$(ne),ye=$(ge),Ce=$(ye,!0);k(ye);var Ie=i(ye,2),Me=$(Ie,!0);k(Ie),k(ge),k(ne);var se=i(ne,2);let U;var Z=$(se);const ce=r(()=>[b,e(d)]);Ye(Z,{startPoint:[b,0],get endPoint(){return e(ce)},strokeWidth:H/2});var me=i(Z);const ee=r(()=>[e(S)-b,0]),de=r(()=>[e(S)-b,e(d)]);Ye(me,{get startPoint(){return e(ee)},get endPoint(){return e(de)},strokeWidth:H/2});var oe=i(me);const Ee=r(()=>e(S)-b+H/4);Mn(oe,{x1:b-H/4,get x2(){return e(Ee)},get timelineHeight(){return e(d)},get startTime(){return e(v)},get duration(){return e(W)}});var We=i(oe);Qn(We,{get workflow(){return R()},y:O,get length(){return e(S)}});var be=i(We);ot(be,3,()=>e(A),Pe=>Pe.id,(Pe,we,Fe,Ae)=>{var De=Xn();const Re=r(()=>(e(Fe)+2)*O+e(C)(e(we)));var Qe=ae(De);{var bt=je=>{var Ue=Oe(),Et=ae(Ue);Ft(Et,()=>e(we).eventList.length,Ne=>{Yn(Ne,{get y(){return e(Re)},get group(){return e(we)},get activeGroups(){return n()},get canvasWidth(){return e(S)},get startTime(){return e(v)},get endTime(){return e(V)},get readOnly(){return D()}})}),l(je,Ue)};K(Qe,je=>{(!M()||e(Re)>e(re)-2*O&&e(Re)<e(re)+M()*O)&&je(bt)})}var Tt=i(Qe);{var Ge=je=>{const Ue=r(()=>e(Re)+1.33*H);zn(je,{get y(){return e(Ue)},get group(){return e(we)},get canvasWidth(){return e(S)}})};K(Tt,je=>{!D()&&n().includes(e(we).id)&&je(Ge)})}l(Pe,De)}),k(se),L((Pe,we,Fe,Ae)=>{ie=qe(ne,1,"pointer-events-none sticky top-[120px]",null,ie,Pe),z(Ce,we),z(Me,Fe),ue(se,"x",g()),ue(se,"y",j()),ue(se,"viewBox",`0 0 ${e(S)??""} ${e(x)??""}`),ue(se,"height",e(x)),ue(se,"width",e(S)),U=qe(se,0,"-mt-4 svelte-ta6k80",null,U,Ae)},[()=>({invisible:!!n().length}),()=>Ze(e(v),_(),{format:"short"}),()=>Ze(e(V),_(),{format:"short"}),()=>({error:Y()})],r),l(G,J)}}}),k(fe),L(()=>_r(fe,M()?`max-height: ${M()}px;`:"")),Xt(fe,"clientWidth",G=>u(S,G)),wt("scroll",fe,xe),l(y,fe),$e(),P()}var eo=q('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function to(y,t){var o=eo(),P=$(o);Xe(P,t,"default",{},null),k(o),l(y,o)}var ro=q("<p> </p> <!>",1),no=q("<p> </p> <!>",1),oo=q('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),ao=q('<div class="w-full text-right text-xs" slot="summary"> </div>'),so=q("<!> <!>",1);function cr(y,t){he(t,!1);let o=F(t,"failure",8,void 0);Te();var P=so(),c=ae(P);{var s=p=>{const _=r(()=>h("common.failure"));ar(p,{get title(){return e(_)},class:"text-sm",children:(f,A)=>{var T=oo(),v=$(T),d=$(v,!0);k(v);var x=i(v,2);const C=r(()=>{var M;return((M=o())==null?void 0:M.message)||""}),E=r(()=>h("common.copy-icon-title")),w=r(()=>h("common.copy-success-icon-title"));_t(x,{get content(){return e(C)},language:"text",get copyIconTitle(){return e(E)},get copySuccessIconTitle(){return e(w)}});var g=i(x,2);{var j=M=>{var D=ro(),Y=ae(D),O=$(Y,!0);k(Y);var b=i(Y,2);const H=r(()=>h("common.copy-icon-title")),S=r(()=>h("common.copy-success-icon-title"));_t(b,{get content(){return o().source},language:"text",get copyIconTitle(){return e(H)},get copySuccessIconTitle(){return e(S)}}),L(re=>z(O,re),[()=>h("common.source")],r),l(M,D)};K(g,M=>{var D;(D=o())!=null&&D.source&&M(j)})}var R=i(g,2);{var Q=M=>{var D=no(),Y=ae(D),O=$(Y,!0);k(Y);var b=i(Y,2);const H=r(()=>h("common.copy-icon-title")),S=r(()=>h("common.copy-success-icon-title"));_t(b,{get content(){return o().stackTrace},language:"text",get copyIconTitle(){return e(H)},get copySuccessIconTitle(){return e(S)}}),L(re=>z(O,re),[()=>h("common.stack-trace")],r),l(M,D)};K(R,M=>{var D;(D=o())!=null&&D.stackTrace&&M(Q)})}k(T),L(M=>z(d,M),[()=>h("common.message")],r),l(f,T)},$$slots:{default:!0,summary:(f,A)=>{var T=ao(),v=$(T,!0);k(T),L(()=>{var d;return z(v,(d=o())==null?void 0:d.message)}),l(f,T)}}})};K(c,p=>{o()&&p(s)})}var a=i(c,2);{var n=p=>{var _=Oe(),f=ae(_);cr(f,{get failure(){return o().cause}}),l(p,_)};K(a,p=>{var _;(_=o())!=null&&_.cause&&p(n)})}l(y,P),$e()}var io=q('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function lo(y,t){he(t,!1);const[o,P]=He(),c=()=>X(jt,"$timeFormat",o),s=()=>X(Zt,"$relativeTime",o),a=()=>X(Kt,"$timestampFormat",o);let n=F(t,"pendingTask",8,void 0);Te();const p=r(()=>h("workflows.pending-workflow-task"));ar(y,{get title(){return e(p)},children:(_,f)=>{var A=io(),T=$(A),v=$(T),d=i(v);Le(d,{children:(b,H)=>{pe();var S=ve();L(()=>z(S,n().state)),l(b,S)},$$slots:{default:!0}}),k(T);var x=i(T,2),C=$(x),E=i(C);Le(E,{children:(b,H)=>{pe();var S=ve();L(()=>z(S,n().attempt)),l(b,S)},$$slots:{default:!0}}),k(x);var w=i(x,2),g=$(w),j=i(g);Le(j,{children:(b,H)=>{pe();var S=ve();L(re=>z(S,re),[()=>Ze(n().originalScheduledTime,c(),{relative:s(),format:a()})],r),l(b,S)},$$slots:{default:!0}}),k(w);var R=i(w,2),Q=$(R),M=i(Q);Le(M,{children:(b,H)=>{pe();var S=ve();L(re=>z(S,re),[()=>Ze(n().scheduledTime,c(),{relative:s(),format:a()})],r),l(b,S)},$$slots:{default:!0}}),k(R);var D=i(R,2),Y=$(D),O=i(Y);Le(O,{children:(b,H)=>{pe();var S=ve();L(re=>z(S,re),[()=>Ze(n().startedTime,c(),{relative:s(),format:a()})],r),l(b,S)},$$slots:{default:!0}}),k(D),k(A),L((b,H,S,re,xe)=>{z(v,`${b??""} `),z(C,`${H??""} `),z(g,`${S??""} `),z(Q,`${re??""} `),z(Y,`${xe??""} `)},[()=>h("common.state"),()=>h("common.attempt"),()=>h("workflows.original-scheduled-time"),()=>h("workflows.scheduled-time"),()=>h("workflows.started-time")],r),l(_,A)},$$slots:{default:!0}}),$e(),P()}var co=q("<p> <!>.</p>"),vo=q('<p><span class="mr-2 text-secondary">Timeout Type</span> </p>'),uo=q("<!> <!>",1),fo=q('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> <!></div> <div class="flex flex-col gap-2 bg-primary p-4"><!> <!></div></div>',1);function go(y,t){he(t,!0);var o,P;let c=_e(()=>jr(t.error)),s=_e(()=>zr(t.error)&&((o=t.error.attributes)===null||o===void 0?void 0:o.failure)),a=_e(()=>Rr(t.error)&&((P=t.error.attributes)===null||P===void 0?void 0:P.timeoutType));var n=Oe(),p=ae(n);{var _=f=>{const A=_e(()=>h(`typed-errors.${e(c)}.title`));zt(f,{icon:"warning",intent:"warning",get title(){return e(A)},children:(T,v)=>{var d=fo(),x=ae(d),C=$(x,!0);k(x);var E=i(x,2);{var w=B=>{var G=co(),N=$(G,!0),V=i(N);const W=_e(()=>h(`typed-errors.${e(c)}.link`));or(V,{newTab:!0,get href(){return e(W)},children:(J,ne)=>{pe();var ie=ve();L(ge=>z(ie,ge),[()=>h(`typed-errors.${e(c)}.action`)]),l(J,ie)},$$slots:{default:!0}}),pe(),k(G),L(J=>z(N,J),[()=>h("typed-errors.link-preface")]),l(B,G)};K(E,B=>{(e(c)==="NonDeterministicError"||e(c)==="BadSearchAttributes")&&B(w)})}var g=i(E,2),j=$(g),R=$(j),Q=$(R),M=i(Q);Je(M,{get name(){return lt[t.error.category]}});var D=i(M,2),Y=$(D,!0);k(D),k(R);var O=i(R,2);const b=_e(()=>{var B;return(B=t.error)==null?void 0:B.eventTime});Kr(O,{get dateTime(){return e(b)}}),k(j);var H=i(j,2),S=$(H);{var re=B=>{var G=vo(),N=i($(G));k(G),L(()=>z(N,` ${e(a)??""}`)),l(B,G)};K(S,B=>{e(a)&&B(re)})}var xe=i(S,2);{var fe=B=>{to(B,{children:(G,N)=>{var V=uo(),W=ae(V);{var J=ge=>{cr(ge,{get failure(){return e(s)}})};K(W,ge=>{e(s)&&ge(J)})}var ne=i(W,2);{var ie=ge=>{lo(ge,{get pendingTask(){return t.pendingTask}})};K(ne,ge=>{t.pendingTask&&ge(ie)})}l(G,V)},$$slots:{default:!0}})};K(xe,B=>{(e(s)||t.pendingTask)&&B(fe)})}k(H),k(g),L((B,G)=>{z(C,B),z(Q,`${t.error.id??""} `),z(Y,G)},[()=>h(`typed-errors.${e(c)}.description`),()=>{var B;return en((B=t.error)==null?void 0:B.name)}]),l(T,d)},$$slots:{default:!0}})};K(p,f=>{e(c)&&e(c)!=="ResetWorkflow"&&f(_)})}l(y,n),$e()}const mo=async(y,t,o)=>{const P=an(t),c=sn(t),s=ln(t),a={...t,codec:{...t==null?void 0:t.codec,endpoint:P,passAccessToken:c,includeCredentials:s}},n=!1;try{const p=await nn(y,Wt(Ke).params.namespace,a,Wt(nr).accessToken,o,n);return on(p,n)}catch{return y}};function qt(y,t,o){const P=St({events:y},null,2),c=document.createElement("a"),s=new Blob([P],{type:o});c.href=URL.createObjectURL(s),c.download=t,c.click()}const po=async({namespace:y,workflowId:t,runId:o,settings:P,decodeSetting:c})=>{try{const s=await Jr({namespace:y,workflowId:t,runId:o,sort:"ascending"});if(c==="encoded")qt(s,`${o}/events.json`,"text/plain");else{const a=[];for(const n of s){const p=await mo(n,P,c);a.push(p)}qt(a,`${o}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var _o=q('<div class="flex items-center space-x-4"><!></div>');function xo(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Er,"$parameters",o),s=()=>X(cn,"$isCloud",o),a=m(),n=m(),{namespace:p,workflowId:_,runId:f}=c();I(()=>Nt,()=>{u(a,Nt({namespace:p,workflow:_,run:f}))}),I(()=>e(a),()=>{u(n,e(a)+".json")}),Se(),Te();var A=Oe(),T=ae(A);{var v=d=>{var x=_o(),C=$(x);or(C,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(n)},newTab:!0,"data-testid":"view-raw-event-history",children:(E,w)=>{pe();var g=ve();L(j=>z(g,j),[()=>h("events.view-raw-history")],r),l(E,g)},$$slots:{default:!0}}),k(x),l(d,x)};K(T,d=>{s()||d(v)})}l(y,A),$e(),P()}var wo=q('<h3 slot="title"> </h3>'),ko=q("<!> <!> <!>",1),ho=q('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function $o(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Ke,"$page",o),s=()=>X(Lt,"$downloadEventHistorySetting",o);let a=F(t,"open",12,!1),n=F(t,"namespace",8),p=F(t,"workflowId",8),_=F(t,"runId",8);const f=()=>{a(!1),po({namespace:n(),workflowId:p(),runId:_(),settings:c().data.settings,decodeSetting:s()})};Te();const A=r(()=>h("common.download")),T=r(()=>h("common.cancel"));tn(y,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(A)},get cancelText(){return e(T)},get open(){return a()},set open(v){a(v)},$$events:{confirmModal:()=>f(),cancelModal:()=>a(!1)},$$slots:{title:(v,d)=>{var x=wo(),C=$(x,!0);k(x),L(E=>z(C,E),[()=>h("common.download-event-history-json")],r),l(v,x)},content:(v,d)=>{var x=ho(),C=$(x);rn(C,{group:Lt,name:"decode-setting",class:"h-auto overflow-auto",children:(w,g)=>{var j=ko(),R=ae(j);const Q=r(()=>h("events.encoded"));At(R,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(Q)}});var M=i(R,2);const D=r(()=>h("events.decoded")),Y=r(()=>h("events.decoded-description"));At(M,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(D)},get description(){return e(Y)}});var O=i(M,2);const b=r(()=>h("events.readable")),H=r(()=>h("events.readable-description"));At(O,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(b)},get description(){return e(H)}}),l(w,j)},$$slots:{default:!0}});var E=i(C,2);xo(E,{}),k(x),l(v,x)}},$$legacy:!0}),$e(),P()}const yo=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],bo=y=>!!y.workflowExecutionStartedEventAttributes,To=y=>{for(const t of yo)if(y.eventType===t)return!0;return!1},Eo=y=>Qt(y)?y.attributes.input:Lr(y)?y.attributes.result===null?null:y.attributes.result:y.attributes,Po=y=>{var a;let t,o,P=!1,c,s;for(const n of y)if(bo(n)){c=n;continue}else if(To(n)){s=n;continue}return c&&(t=St(((a=c==null?void 0:c.workflowExecutionStartedEventAttributes)==null?void 0:a.input)??null)),s&&(P=Qt(s),o=St(Eo(s))),{input:t,results:o,contAsNew:P}};var Io=q('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function Ao(y,t){he(t,!1);const[o,P]=He(),c=()=>X(ht,"$fullEventHistory",o),s=()=>X($t,"$workflowRun",o),a=m(),n=m();I(()=>c(),()=>{u(a,Po(c()))}),I(()=>s(),()=>{u(n,s().workflow.isRunning)}),Se(),Te();var p=Io(),_=$(p);const f=r(()=>h("workflows.input"));Bt(_,{get title(){return e(f)},get content(){return e(a).input},get isRunning(){return e(n)}});var A=i(_,2);const T=r(()=>h("workflows.result"));Bt(A,{get title(){return e(T)},get content(){return e(a).results},get isRunning(){return e(n)}}),k(p),l(y,p),$e(),P()}var Ho=q('<div class="mb-4"><!></div>');function Wo(y,t){he(t,!1);const[o,P]=He(),c=()=>X($t,"$workflowRun",o),s=m(),a=m(),n=m();var p=m();I(()=>(e(s),e(a),c()),()=>{(T=>(u(s,T.workflow),u(a,T.workers)))(c())}),I(()=>(e(s),te(p),e(a)),()=>{u(n,(e(s)===null||e(s)===void 0?void 0:e(s).isRunning)&&!(!(u(p,e(a)===null||e(a)===void 0?void 0:e(a).pollers)===null||te(p)===void 0)&&te(p).length))}),Se(),Te();var _=Oe(),f=ae(_);{var A=T=>{var v=Ho(),d=$(v);const x=r(()=>h("workflows.workflow-error-no-workers-title"));zt(d,{icon:"warning",intent:"warning",get title(){return e(x)},children:(C,E)=>{pe();var w=ve();L(g=>z(w,g),[()=>{var g;return h("workflows.workflow-error-no-workers-description",{taskQueue:(g=e(s))==null?void 0:g.taskQueue})}],r),l(C,w)},$$slots:{default:!0}}),k(v),dn(1,v,()=>vn,()=>({duration:200,delay:100})),l(T,v)};K(f,T=>{e(n)&&T(A)})}l(y,_),$e(),P()}var So=q('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Co(y,t){const o=xt(t,["children","$$slots","$$events","$$legacy"]),P=xt(o,["id","open","onToggle","icon"]);he(t,!1);let c=F(t,"id",24,()=>crypto.randomUUID()),s=F(t,"open",12,!1),a=F(t,"onToggle",8,void 0),n=F(t,"icon",8,void 0);const p=async()=>{a()&&await a()(),s(!s())};Te();var _=So(),f=$(_),A=$(f),T=$(A);Xe(T,t,"title",{},null);var v=i(T,2);Xe(v,t,"description",{},null);var d=i(v,2),x=$(d);Xe(x,t,"action",{},null);var C=i(x,2);const E=r(()=>n()?n():s()?"arrow-down":"arrow-right");Je(C,{get name(){return e(E)}}),k(d),k(A),k(f);var w=i(f,2);let g;var j=$(w);Xe(j,t,"default",{get open(){return s()}},null),k(w),k(_),L(R=>{qe(_,1,`w-full ${P.class??""}`),ue(f,"id",`${c()??""}-trigger`),ue(f,"aria-expanded",s()),ue(f,"aria-controls",`${c()??""}-content`),ue(w,"id",`${c()??""}-content`),ue(w,"aria-labelledby",`${c()??""}-trigger`),g=qe(w,1,"block w-full bg-primary p-2",null,g,R)},[()=>({hidden:!s()})],r),wt("click",f,p),l(y,_),$e()}var Fo=q("<!> <!>",1),jo=q("<!> <!>",1),zo=q('<p class="flex items-center gap-2"> <!></p>'),Ro=q('<p class="flex items-center gap-2"> <!></p>'),Lo=q('<p class="flex items-center gap-2"> <!></p>'),Oo=q('<p class="flex items-center gap-2"> <!></p>'),Mo=q('<p class="flex items-center gap-2"> <!></p>'),Do=q('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Go=q('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Yt(y,t){he(t,!0);const[o,P]=He(),c=()=>X(jt,"$timeFormat",o),s=()=>X(Zt,"$relativeTime",o),a=()=>X(Kt,"$timestampFormat",o);var n,p,_,f;const A=_e(()=>Ze(t.callback.lastAttemptCompleteTime,c(),{relative:s(),format:a()})),T=_e(()=>Ze(t.callback.nextAttemptScheduleTime,c(),{relative:s(),format:a()})),v=_e(()=>(n=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||n===void 0?void 0:n.message),d=_e(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),x=_e(()=>(_=(p=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||p===void 0?void 0:p.nexus)===null||_===void 0?void 0:_.url),C={Standby:h("nexus.callback.standby"),Scheduled:h("nexus.callback.scheduled"),"Backing Off":h("nexus.callback.backing-off"),Failed:h("nexus.callback.failed"),Succeeded:h("nexus.callback.succeeded")},E="Failed",w=_e(()=>t.callback.state===E),g=_e(()=>C[t.callback.state]||h("nexus.nexus-callback")),j=_e(()=>((f=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||f===void 0?void 0:f.links)||[]),R=_e(()=>!e(j).length&&!t.link&&e(x)),Q=_e(()=>e(w)?"error":"info");zt(y,{icon:"nexus",get intent(){return e(Q)},get title(){return e(g)},children:(M,D)=>{var Y=Go(),O=ae(Y),b=$(O);{var H=U=>{var Z=Oe(),ce=ae(Z);ot(ce,17,()=>e(j),me=>{var ee,de,oe;return((de=(ee=me.workflowEvent)==null?void 0:ee.eventRef)==null?void 0:de.eventId)||((oe=me.workflowEvent)==null?void 0:oe.requestIdRef.requestId)},(me,ee,de,oe)=>{var Ee=Fo(),We=ae(Ee);gt(We,{get link(){return e(ee)}});var be=i(We,2);const Pe=_e(()=>h("nexus.link-namespace")),we=_e(()=>Vt({namespace:e(ee).workflowEvent.namespace}));gt(be,{get link(){return e(ee)},get label(){return e(Pe)},get value(){return e(ee).workflowEvent.namespace},get href(){return e(we)}}),l(me,Ee)}),l(U,Z)},S=(U,Z)=>{{var ce=me=>{var ee=jo(),de=ae(ee);gt(de,{get link(){return t.link}});var oe=i(de,2);const Ee=_e(()=>h("nexus.link-namespace")),We=_e(()=>Vt({namespace:t.link.workflowEvent.namespace}));gt(oe,{get link(){return t.link},get label(){return e(Ee)},get value(){return t.link.workflowEvent.namespace},get href(){return e(We)}}),l(me,ee)};K(U,me=>{t.link&&me(ce)},Z)}};K(b,U=>{e(j).length?U(H):U(S,!1)})}var re=i(b,2),xe=$(re),fe=$(xe,!0),B=i(fe);Le(B,{type:"subtle",children:(U,Z)=>{pe();var ce=ve();L(()=>z(ce,t.callback.state)),l(U,ce)},$$slots:{default:!0}}),k(xe);var G=i(xe,2);{var N=U=>{var Z=zo(),ce=$(Z),me=i(ce);Le(me,{type:"subtle",children:(ee,de)=>{pe();var oe=ve();L(()=>z(oe,t.callback.attempt)),l(ee,oe)},$$slots:{default:!0}}),k(Z),L(ee=>z(ce,`${ee??""} `),[()=>h("common.attempt")]),l(U,Z)};K(G,U=>{t.callback.attempt&&U(N)})}var V=i(G,2);{var W=U=>{var Z=Ro(),ce=$(Z),me=i(ce);Le(me,{type:"subtle",children:(ee,de)=>{pe();var oe=ve();L(()=>z(oe,e(A))),l(ee,oe)},$$slots:{default:!0}}),k(Z),L(ee=>z(ce,`${ee??""} `),[()=>h("nexus.last-attempt-completed-time")]),l(U,Z)};K(V,U=>{t.callback.lastAttemptCompleteTime&&U(W)})}var J=i(V,2);{var ne=U=>{var Z=Lo(),ce=$(Z),me=i(ce);Le(me,{type:"subtle",children:(ee,de)=>{pe();var oe=ve();L(()=>z(oe,e(T))),l(ee,oe)},$$slots:{default:!0}}),k(Z),L(ee=>z(ce,`${ee??""} `),[()=>h("nexus.next-attempt-scheduled-time")]),l(U,Z)};K(J,U=>{t.callback.nextAttemptScheduleTime&&U(ne)})}k(re);var ie=i(re,2);{var ge=U=>{var Z=Oo(),ce=$(Z),me=i(ce);Le(me,{type:"subtle",children:(ee,de)=>{pe();var oe=ve();L(()=>z(oe,e(x))),l(ee,oe)},$$slots:{default:!0}}),k(Z),L(ee=>z(ce,`${ee??""} `),[()=>h("nexus.callback-url")]),l(U,Z)};K(ie,U=>{e(R)&&U(ge)})}var ye=i(ie,2);{var Ce=U=>{var Z=Mo(),ce=$(Z),me=i(ce);Le(me,{type:"subtle",children:(ee,de)=>{pe();var oe=ve();L(()=>z(oe,e(d))),l(ee,oe)},$$slots:{default:!0}}),k(Z),L(ee=>z(ce,`${ee??""} `),[()=>h("nexus.blocked-reason")]),l(U,Z)};K(ye,U=>{e(d)&&U(Ce)})}var Ie=i(ye,2);{var Me=U=>{var Z=Do(),ce=$(Z),me=$(ce,!0);k(ce);var ee=i(ce,2);const de=_e(()=>h("common.copy-icon-title")),oe=_e(()=>h("common.copy-success-icon-title"));_t(ee,{get content(){return e(v)},language:"text",get copyIconTitle(){return e(de)},get copySuccessIconTitle(){return e(oe)}}),k(Z),L(Ee=>z(me,Ee),[()=>h("nexus.last-attempt-failure")]),l(U,Z)};K(Ie,U=>{e(v)&&U(Me)})}k(O);var se=i(O,2);fr(se,()=>t.children??gr),L(U=>z(fe,U),[()=>h("common.state")]),l(M,Y)},$$slots:{default:!0}}),$e(),P()}var Uo=q('<div class="flex flex-col gap-2"></div>'),No=q('<p class="p-1" slot="title"> </p>'),Vo=q('<div class="py-2"><!></div>');function Bo(y,t){he(t,!0);const[o,P]=He(),c=()=>X(ht,"$fullEventHistory",o);var s;const a=_e(()=>c()[0]),n=_e(()=>(s=e(a)===null||e(a)===void 0?void 0:e(a).links)===null||s===void 0?void 0:s[0]),p=_e(()=>t.callbacks[0]);Yt(y,{get callback(){return e(p)},get link(){return e(n)},children:(_,f)=>{var A=Oe(),T=ae(A);{var v=d=>{var x=Vo(),C=$(x);Co(C,{children:Ct,$$slots:{default:(E,w)=>{const g=_e(()=>w.open);var j=Oe(),R=ae(j);{var Q=M=>{var D=Uo();ot(D,21,()=>t.callbacks.slice(1),yt,(Y,O)=>{Yt(Y,{get callback(){return e(O)}})}),k(D),l(M,D)};K(R,M=>{e(g)&&M(Q)})}l(E,j)},title:(E,w)=>{var g=No(),j=$(g);k(g),L(()=>z(j,`View ${t.callbacks.length-1} other Callbacks`)),l(E,g)}}}),k(x),l(d,x)};K(T,d=>{t.callbacks.length>1&&d(v)})}l(_,A)},$$slots:{default:!0}}),$e(),P()}var qo=q("<!> <!> <!> <!> <!>",1),Yo=q('<div class="flex flex-col gap-0 pt-4"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative pb-24"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col"><!> <!></div></div> <!>',1);function Jo(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Ke,"$page",o),s=()=>X($t,"$workflowRun",o),a=()=>X(st,"$eventFilterSort",o),n=()=>X(tt,"$eventViewType",o),p=()=>X(Jt,"$filteredEventHistory",o),_=()=>X(Pr,"$currentEventHistory",o),f=()=>X(it,"$pauseLiveUpdates",o),A=()=>X(Ot,"$minimizeEventView",o),T=m(),v=m(),d=m(),x=m(),C=m(),E=m(),w=m(),g=m(),j=m(),R=m();xr(()=>{Ht()});let Q=m(!1);const M=()=>{e(C)?ke(st,"ascending"):ke(st,"descending")};I(()=>(e(T),c()),()=>{(se=>u(T,se.namespace))(c().params)}),I(()=>(e(v),s()),()=>{(se=>u(v,se.workflow))(s())}),I(()=>e(v),()=>{u(d,e(v)===null||e(v)===void 0?void 0:e(v).pendingActivities)}),I(()=>e(v),()=>{u(x,e(v)===null||e(v)===void 0?void 0:e(v).pendingNexusOperations)}),I(()=>a(),()=>{u(C,a()==="descending")}),I(()=>n(),()=>{u(E,n()==="compact")}),I(()=>(p(),e(d),e(x)),()=>{u(w,rr(p(),"ascending",e(d),e(x)))}),I(()=>(e(C),e(w)),()=>{u(g,e(C)?[...e(w)].reverse():e(w))}),I(()=>(e(C),p()),()=>{u(j,e(C)?[...p()].reverse():p())}),I(()=>_(),()=>{u(R,Or(_(),"ascending"))}),I(()=>(n(),Ht),()=>{n(),Ht()}),I(()=>(e(v),f()),()=>{!e(v).isRunning&&f()&&ke(it,!1)}),Se(),Te();var D=Yo(),Y=ae(D),O=$(Y);Wo(O,{});var b=i(O,2),H=$(b);Ao(H,{});var S=i(H,2);{var re=se=>{const U=r(()=>{var Z;return(Z=e(v))==null?void 0:Z.pendingWorkflowTask});go(se,{get error(){return e(R)},get pendingTask(){return e(U)}})};K(S,se=>{e(R)&&se(re)})}var xe=i(S,2);{var fe=se=>{Bo(se,{get callbacks(){return e(v).callbacks}})};K(xe,se=>{var U,Z;(Z=(U=e(v))==null?void 0:U.callbacks)!=null&&Z.length&&se(fe)})}k(b),k(Y);var B=i(Y,2),G=$(B);let N;var V=$(G),W=$(V,!0);k(V);var J=i(V,2),ne=$(J);un(ne,{children:(se,U)=>{var Z=qo(),ce=ae(Z);{var me=we=>{const Fe=r(()=>e(C)?"descending":"ascending");mt(we,{get leadingIcon(){return e(Fe)},"data-testid":"zoom-in",size:"sm",$$events:{click:M},children:(Ae,De)=>{pe();var Re=ve();L(()=>z(Re,e(C)?"Descending":"Ascending")),l(Ae,Re)},$$slots:{default:!0}})};K(ce,we=>{n()!=="json"&&we(me)})}var ee=i(ce,2);const de=r(()=>A()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");fn(ee,{get text(){return e(de)},top:!0,children:(we,Fe)=>{const Ae=r(()=>A()?"minimize":"expand");mt(we,{get leadingIcon(){return e(Ae)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>ke(Ot,!A())},children:(De,Re)=>{pe();var Qe=ve();L(()=>z(Qe,A()?"Minimized":"Expanded")),l(De,Qe)},$$slots:{default:!0}})},$$slots:{default:!0}});var oe=i(ee,2);In(oe,{get compact(){return e(E)},get minimized(){return A()}});var Ee=i(oe,2);const We=r(()=>!e(v).isRunning),be=r(()=>f()?"play":"pause");mt(Ee,{get disabled(){return e(We)},get leadingIcon(){return e(be)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>ke(it,!f())},children:(we,Fe)=>{pe();var Ae=ve();L(()=>z(Ae,f()?"Unfreeze":"Freeze")),l(we,Ae)},$$slots:{default:!0}});var Pe=i(Ee,2);mt(Pe,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>u(Q,!0)},children:(we,Fe)=>{pe();var Ae=ve();L(De=>z(Ae,De),[()=>h("common.download")],r),l(we,Ae)},$$slots:{default:!0}}),l(se,Z)},$$slots:{default:!0}}),k(J),k(G);var ie=i(G,2),ge=$(ie);const ye=r(()=>!!e(R)),Ce=r(()=>A()?360:void 0);lr(ge,{get workflow(){return e(v)},get groups(){return e(g)},get error(){return e(ye)},get viewportHeight(){return e(Ce)}});var Ie=i(ge,2);wn(Ie,{get groups(){return e(g)},get history(){return e(j)},get minimized(){return A()}}),k(ie),k(B);var Me=i(B,2);$o(Me,{get namespace(){return e(T)},get workflowId(){return e(v).id},get runId(){return e(v).runId},get open(){return e(Q)},set open(se){u(Q,se)},$$legacy:!0}),L((se,U)=>{N=qe(G,1,"surface-background flex flex-wrap items-center justify-between gap-2 border-b border-subtle py-2 xl:gap-8 svelte-18jakp5",null,N,se),z(W,U)},[()=>({"sticky-header":!A()}),()=>h("workflows.event-history")],r),l(y,D),$e(),P()}var Qo=q("<!> <!>",1);function as(y,t){he(t,!1);const[o,P]=He(),c=()=>X(Ke,"$page",o),s=c().params.workflow;Te();var a=Qo(),n=ae(a);const p=r(()=>`${h("workflows.workflow-history")} | ${s}`);pr(n,{get title(){return e(p)},get url(){return c().url.href}});var _=i(n,2);Jo(_,{}),l(y,a),$e(),P()}export{as as component};
