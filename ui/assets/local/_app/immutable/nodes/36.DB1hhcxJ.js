import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as ke,b as he,g as e,o as r,l as A,a as Ce,t as B,f as ne,i as $,r as k,c as i,e as l,s as v,m as p,ak as te,M as se,n as ge,k as ce,j as M,h as Me,P as Re,aP as dr,q as Ft,u as pe,d as vr,af as ur}from"../chunks/DbzSl5JP.js";import{i as Ee,s as Ze}from"../chunks/0AwovCk4.js";import{a as K,s as Ae,c as _e,m as fr,p as z,l as xt}from"../chunks/BV6aaRB7.js";import{p as Ke}from"../chunks/Cx8u6Y6Y.js";import{P as gr}from"../chunks/DthXRT7N.js";import{t as h}from"../chunks/BXv1jDVW.js";import{s as L,e as wt}from"../chunks/B3b0ZBK9.js";import{i as J}from"../chunks/BwgIsUu1.js";import{s as Ye,a as ve,d as mr}from"../chunks/TqT1w0aw.js";import{b as pr}from"../chunks/D3H4dvIJ.js";import{E as _r,C as lt,L as Je,T as rt,D as kt,t as xr,g as wr}from"../chunks/B5XL3pLn.js";import{T as kr,a as It}from"../chunks/Bacj5yy6.js";import{W as hr}from"../chunks/vqMUN6z1.js";import{T as $r}from"../chunks/3mpjcgLW.js";import{b as Jt,d as Rt,a as yr,e as at,f as ht,h as tt,i as Ve,c as Be,p as it,j as br,k as Lt,m as Ot,g as Tr}from"../chunks/KzmoqLw5.js";import{w as $t}from"../chunks/BrrWw5aB.js";import{e as ot,i as yt}from"../chunks/DgMCLi2J.js";import{w as ct,g as St,a as Er,o as Pr}from"../chunks/Bq4CR0Xw.js";import{C as ut}from"../chunks/CZ8_8ar3.js";import{I as Qe}from"../chunks/ZcSUWOp6.js";import{M as Ir}from"../chunks/C_x91vR-.js";import{c as Ar,d as Hr,b as ft}from"../chunks/CTUgCc7R.js";import{M as Wr}from"../chunks/CFXw04wB.js";import{Y as Mt,l as At,I as Gt,F as Dt,o as Sr,Z as Cr,_ as Fr,$ as jr,a0 as Qt,a1 as zr,a2 as Rr}from"../chunks/bJYvw_NA.js";import{t as Lr}from"../chunks/D1LIvDgn.js";import{i as Or}from"../chunks/fDrNxGEI.js";import{k as jt}from"../chunks/D8vk1LEJ.js";import{b as Xt}from"../chunks/BMmn8mK4.js";import{f as qe,t as bt,r as Mr}from"../chunks/ChxEr8nO.js";import{i as Zt}from"../chunks/Dzb719w0.js";import{q as pt,l as Kt}from"../chunks/CHqpB290.js";import{b as Gr,g as Dr,d as Ur,c as gt}from"../chunks/BluVyQp4.js";import{W as Nr}from"../chunks/B747axJq.js";import{B as Vr}from"../chunks/FJ2Z0WA4.js";import{a as Br}from"../chunks/DvSBBdSb.js";import{g as er}from"../chunks/gVx-8DGR.js";import{f as qr,b as Yr}from"../chunks/Bw_YBhcH.js";import{v as Jr}from"../chunks/BI9lBsvB.js";import{p as Ut}from"../chunks/DL1rU2zU.js";import{M as Qr}from"../chunks/DAn9bKsH.js";import{a as tr}from"../chunks/B8QFmZ5C.js";import{b as Xr}from"../chunks/BLxYvJTZ.js";import{A as zt}from"../chunks/B7uMlIQJ.js";import{L as rr}from"../chunks/C99DZWjn.js";import{s as Zr}from"../chunks/ByTIZu23.js";import{A as nr}from"../chunks/DEYh1TLQ.js";import{C as _t}from"../chunks/51NTAvwI.js";import{B as Oe}from"../chunks/CQ8G9PIZ.js";import{M as Kr}from"../chunks/DbPxwiqX.js";import{R as en,a as Ht}from"../chunks/BiCeoThc.js";import{c as tn,d as rn}from"../chunks/nypspFaC.js";import{g as nn,b as on,a as sn}from"../chunks/B_MiEN4X.js";import{s as Ct}from"../chunks/BDfAQ6r3.js";import{i as an}from"../chunks/BE9_sYR8.js";import{c as Nt,a as Vt}from"../chunks/BI3UX98R.js";import{I as Bt}from"../chunks/wXp9_QtQ.js";import{t as ln,a as cn}from"../chunks/isAOmgoW.js";import{T as dn,a as mt}from"../chunks/BWoYWBY0.js";import{T as vn}from"../chunks/DDNYcp7V.js";function un(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(Jt,"$filteredEventHistory",o),a=()=>K(Rt,"$decodeEventHistory",o);Ee(),hr(y,{get events(){return u()},decode:n=>{const f=r(()=>h("events.decode-event-history"));$r(n,{get label(){return e(f)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return fr(),a()},set checked(_){_e(Rt,_)},$$legacy:!0})},$$slots:{decode:!0}}),he(),W()}var fn=B("<!> <!> <!>",1),gn=B('<div class="border-t border-subtle px-4"><!></div>'),mn=B('<div data-testid="event-summary-table"><!></div>'),pn=B('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function _n(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K($t,"$workflowRun",o),a=()=>K(at,"$eventFilterSort",o),s=()=>K(ht,"$fullEventHistory",o),n=()=>K(tt,"$eventViewType",o),f=()=>K(Ke,"$page",o),_=p(),g=p(),H=p(),T=p(),d=p(),c=p(),b=p();var C=p(),P=p(),x=p(),m=p();let G=z(t,"history",8),D=z(t,"groups",8),Q=z(t,"minimized",8,!0);const R=()=>{_e(tt,"feed")},U=()=>{_e(tt,"compact")},j=()=>{_e(tt,"json")};A(()=>(e(_),u()),()=>{(ie=>v(_,ie.workflow))(u())}),A(()=>a(),()=>{v(g,a()==="descending")}),A(()=>s(),()=>{v(H,!s().length)}),A(()=>n(),()=>{v(T,n()==="compact")}),A(()=>(te(P),te(C),f(),te(m),te(x)),()=>{_e(yr,!(v(P,v(C,f().url)===null||te(C)===void 0?void 0:te(C).searchParams)===null||te(P)===void 0)&&te(P).get("category")?v(m,v(x,f().url)===null||te(x)===void 0?void 0:te(x).searchParams)===null||te(m)===void 0?void 0:te(m).get("category").split(","):void 0)}),A(()=>e(_),()=>{v(d,e(_).pendingActivities)}),A(()=>e(_),()=>{v(c,e(_).pendingNexusOperations)}),A(()=>(e(T),se(D()),e(g),e(c),e(d),se(G())),()=>{v(b,e(T)?D():e(g)?[...e(c),...e(d),...G()]:[...G(),...e(d),...e(c)])}),Ce(),Ee();var O=pn(),w=ne(O),S=$(w),N=$(S);kr(N,{children:(ie,V)=>{var X=fn(),I=ne(X);const E=r(()=>n()==="feed");It(I,{get active(){return e(E)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:R},children:(xe,Pe)=>{ge();var fe=ce("All");l(xe,fe)},$$slots:{default:!0}});var q=i(I,2);const re=r(()=>n()==="compact");It(q,{get active(){return e(re)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:U},children:(xe,Pe)=>{ge();var fe=ce("Compact");l(xe,fe)},$$slots:{default:!0}});var ae=i(q,2);const ye=r(()=>n()==="json");It(ae,{get active(){return e(ye)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:j},children:(xe,Pe)=>{ge();var fe=ce("JSON");l(xe,fe)},$$slots:{default:!0}}),l(ie,X)},$$slots:{default:!0}}),k(S),k(w);var ue=i(w,2);{var $e=ie=>{var V=gn(),X=$(V);un(X,{}),k(V),l(ie,V)},de=ie=>{var V=mn(),X=$(V);_r(X,{get updating(){return e(H)},get items(){return e(b)},get groups(){return D()},get compact(){return e(T)},get minimized(){return Q()}}),k(V),l(ie,V)};J(ue,ie=>{n()==="json"?ie($e):ie(de,!1)})}l(y,O),he(),W()}const or=200,xn=ct(0),wn=ct(or),nt=ct([]),dt=ct(0),Wt=()=>{nt.set([]),dt.set(0),xn.set(0),wn.set(or)},kn=()=>{nt.set([]),dt.set(0)},sr=y=>{St(nt).includes(y.id)?(dt.set(0),nt.set([])):nt.set([y.id])},hn=y=>y==null?void 0:y.nexus;var $n=B('<span class="hidden text-sm md:block"> </span>'),yn=B('<div slot="leading"><!></div>'),bn=B("<!> <!> <!> <!> <!>",1),Tn=B("<!> <!>",1);function En(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(Lr,"$temporalVersion",o),a=()=>K(Ke,"$page",o),s=()=>K(Ve,"$eventTypeFilter",o),n=()=>K(Be,"$eventStatusFilter",o),f=()=>K(tt,"$eventViewType",o),_=p(),g=p(),H=p();var T=p();let d=z(t,"compact",8,!1),c=z(t,"minimized",8,!0),b=ct(!1);const C=({value:P})=>{kn(),_e(Ve,s().some(x=>x===P)?s().filter(x=>x!==P):[...s(),P])};A(()=>(se(d()),At),()=>{v(_,d()?Mt.map(P=>P.value):At.map(P=>P.value))}),A(()=>(se(d()),lt),()=>{v(g,[...(d()?Mt:At).map(P=>({...P,label:h(P.label),icon:lt[P.value],description:h(P.description)}))])}),A(()=>(u(),e(g)),()=>{Or("1.21.0",u())&&v(g,e(g).filter(({value:P})=>P!=="update"))}),A(()=>(te(T),a(),e(g)),()=>{hn(v(T,a().data.systemInfo)===null||te(T)===void 0?void 0:te(T).capabilities)||v(g,e(g).filter(({value:P})=>P!=="nexus"))}),A(()=>(s(),e(_)),()=>{v(H,s().length<e(_).length)}),Ce(),Ee(),Ar(y,{open:b,children:(P,x)=>{var m=Tn(),G=ne(m);Ir(G,{controls:"status-menu",size:"sm",children:(R,U)=>{var j=$n(),O=$(j,!0);k(j),M(w=>L(O,w),[()=>h("common.filter")],r),l(R,j)},$$slots:{default:!0,leading:(R,U)=>{var j=yn();let O;var w=$(j);const S=r(()=>e(H)&&"pt-0.5 text-white");Qe(w,{name:"filter",get class(){return e(S)}}),k(j),M(N=>O=Ye(j,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,O,N),[()=>({"bg-interactive":e(H)})],r),l(R,j)}}});var D=i(G,2);const Q=r(()=>c()?"top-right":"right");Hr(D,{id:"event-type-menu",keepOpen:!0,get position(){return e(Q)},class:"w-[220px] md:w-[360px]",children:(R,U)=>{var j=bn(),O=ne(j);const w=r(()=>h("common.all"));ft(O,{get"data-testid"(){return e(w)},$$events:{click:()=>{_e(Ve,e(_)),_e(Be,!1)}},children:(V,X)=>{ge();var I=ce();M(E=>L(I,E),[()=>h("common.all")],r),l(V,I)},$$slots:{default:!0,leading:(V,X)=>{const I=r(()=>!n()&&s().length===e(_).length),E=r(()=>h("common.all"));ut(V,{slot:"leading",get checked(){return e(I)},get label(){return e(E)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{_e(Ve,e(_)),_e(Be,!1)}}})}}});var S=i(O,2);{var N=V=>{const X=r(()=>h("common.pending-and-failed")),I=r(()=>h("common.pending-and-failed-description"));ft(V,{get"data-testid"(){return e(X)},get description(){return e(I)},class:"items-start",$$events:{click:()=>{_e(Ve,e(_)),_e(Be,!n())}},children:(E,q)=>{ge();var re=ce();M(ae=>L(re,ae),[()=>h("common.pending-and-failed")],r),l(E,re)},$$slots:{default:!0,leading:(E,q)=>{const re=r(()=>h("common.all"));ut(E,{slot:"leading",get checked(){return n()},get label(){return e(re)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{_e(Ve,e(_)),_e(Be,!n())}}})}}})};J(S,V=>{f()!=="json"&&V(N)})}var ue=i(S,2);const $e=r(()=>h("common.none"));ft(ue,{get"data-testid"(){return e($e)},$$events:{click:()=>{_e(Ve,[]),_e(Be,!1)}},children:(V,X)=>{ge();var I=ce();M(E=>L(I,E),[()=>h("common.none")],r),l(V,I)},$$slots:{default:!0,leading:(V,X)=>{const I=r(()=>!n()&&!s().length),E=r(()=>h("common.none"));ut(V,{slot:"leading",get checked(){return e(I)},get label(){return e(E)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{_e(Ve,[]),_e(Be,!1)}}})}}});var de=i(ue,2);Wr(de);var ie=i(de,2);ot(ie,1,()=>e(g),yt,(V,X)=>{ft(V,{get"data-testid"(){return e(X).label},get description(){return e(X).description},class:"items-start",$$events:{click:()=>{C(e(X))}},children:(I,E)=>{ge();var q=ce();M(()=>L(q,e(X).label)),l(I,q)},$$slots:{default:!0,leading:(I,E)=>{const q=r(()=>s().some(re=>re===e(X).value));ut(I,{slot:"leading",get checked(){return e(q)},get label(){return e(X).label},labelHidden:!0,class:"mt-px",$$events:{click:()=>C(e(X))}})}}})}),l(R,j)},$$slots:{default:!0}}),l(P,m)},$$slots:{default:!0}}),he(),W()}function Pn(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(it,"$pauseLiveUpdates",o),a=p(),s=p();let n=z(t,"workflow",8),f=z(t,"startTime",8);const _=()=>{const b=new Date;return b.setSeconds(b.getSeconds()+1),b};let g;const H=b=>{b&&(clearInterval(g),g=null)},T=b=>{b?(clearInterval(g),g=null):!g&&n().isRunning&&(g=setInterval(()=>{v(a,_())},1e3))};Er(()=>{clearInterval(g),g=null,_e(it,!1)}),A(()=>se(n()),()=>{v(a,(n()===null||n()===void 0?void 0:n().endTime)||_())}),A(()=>(se(f()),e(a)),()=>{v(s,pt({start:f(),end:e(a),onlyUnderSecond:!1}))}),A(()=>se(n()),()=>{H(n().endTime)}),A(()=>u(),()=>{T(u())}),Ce(),Ee();var d=Me(),c=ne(d);Ze(c,t,"default",{get endTime(){return e(a)},get duration(){return e(s)}},null),l(y,d),he(),W()}var In=B("<div><!></div>");function An(y,t){const o=xt(t,["children","$$slots","$$events","$$legacy"]),W=xt(o,["namespace","workflowId","runId","viewportHeight","onLoad"]);ke(t,!1);let u=z(t,"namespace",8),a=z(t,"workflowId",8),s=z(t,"runId",8,""),n=z(t,"viewportHeight",8,360),f=z(t,"onLoad",8,()=>{});const _=async()=>{const[d,c]=await Promise.all([Jr({namespace:u(),workflowId:a(),runId:s()}),qr({namespace:u(),workflowId:a(),runId:s()})]);return{workflow:d.workflow,history:c}},g=(d,c)=>{var b;f()();const C=(b=d==null?void 0:d.pendingActivities)!==null&&b!==void 0?b:[];return er(c,"ascending",C)};Ee();var H=Me(),T=ne(H);Br(T,_,null,(d,c)=>{var b=r(()=>{var{workflow:D,history:Q}=e(c);return{workflow:D,history:Q}}),C=r(()=>e(b).workflow),P=r(()=>e(b).history),x=In(),m=$(x);const G=r(()=>g(e(C),e(P)));ar(m,{get viewportHeight(){return n()},get workflow(){return e(C)},get groups(){return e(G)},readOnly:!0}),k(x),M(()=>Ye(x,1,`cursor-pointer overflow-auto ${W.class??""}`)),l(d,x)}),l(y,H),he()}var Hn=B('<div class="flex items-center gap-1"><!> </div>'),Wn=B(" <!>",1),Sn=B('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),Cn=Re('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function Fn(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(Ke,"$page",o),a=p(),s=p(),n=p(),f=p(),_=p(),g=p(),H=p();var T=p(),d=p();let c=z(t,"group",8),b=z(t,"canvasWidth",8),C=z(t,"x",8,0),P=z(t,"y",8),x=p();const m=E=>{_e(dt,E)},G=async()=>{await dr(),v(a,e(x))};A(()=>e(x),()=>{v(a,e(x)||0)}),A(()=>e(a),()=>{m(e(a)||0)}),A(()=>se(c()),()=>{v(s,(c()===null||c()===void 0?void 0:c().finalClassification)||(c()===null||c()===void 0?void 0:c().classification))}),A(()=>(e(n),u()),()=>{(E=>v(n,E.namespace))(u().params)}),A(()=>se(b()),()=>{v(f,b())}),A(()=>se(c()),()=>{v(_,c().displayName)}),A(()=>(se(c()),Gt),()=>{v(g,c()&&c().eventList.find(Gt))}),A(()=>(te(T),se(c()),te(d)),()=>{v(H,Kt({start:v(T,c()===null||c()===void 0?void 0:c().initialEvent)===null||te(T)===void 0?void 0:te(T).eventTime,end:v(d,c()===null||c()===void 0?void 0:c().lastEvent)===null||te(d)===void 0?void 0:te(d).eventTime,includeMilliseconds:!0}))}),A(()=>(se(c()),h),()=>{!(c()===null||c()===void 0)&&c().pendingActivity&&(c().pendingActivity.paused?v(s,h("workflows.paused")):c().pendingActivity.attempt>1?v(s,h("events.event-classification.retrying")):v(s,h("events.event-classification.pending")))}),Ce(),Ee();var D=Cn(),Q=$(D),R=$(Q),U=$(R),j=$(U),O=$(j);{var w=E=>{Nr(E,{get status(){return e(s)}})};J(O,E=>{e(s)&&E(w)})}var S=i(O),N=i(S);{var ue=E=>{var q=Hn(),re=$(q);Qe(re,{name:"clock"});var ae=i(re);k(q),M(()=>L(ae,` ${e(H)??""}`)),l(E,q)};J(N,E=>{e(H)&&E(ue)})}k(j);var $e=i(j,2),de=$($e);Vr(de,{variant:"ghost",size:"xs",$$events:{click:()=>sr(c())},children:(E,q)=>{ge();var re=Wn(),ae=ne(re),ye=i(ae);Qe(ye,{name:"close"}),M(xe=>L(ae,`${xe??""} `),[()=>h("common.close")],r),l(E,re)},$$slots:{default:!0}}),k($e),k(U);var ie=i(U,2),V=$(ie);Gr(V,{get group(){return c()},get event(){return c().initialEvent}}),k(ie);var X=i(ie,2);{var I=E=>{var q=Sn(),re=i($(q),2);jt(re,()=>c().eventList.length,ae=>{An(ae,{get namespace(){return e(n)},get workflowId(){return e(g).attributes.workflowExecution.workflowId},get runId(){return e(g).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:G})}),k(q),l(E,q)};J(X,E=>{e(g)&&E(I)})}k(R),k(Q),k(D),M(()=>{ve(Q,"x",C()),ve(Q,"y",P()),ve(Q,"width",e(f)),ve(Q,"height",e(a)),L(S,` ${e(_)??""} `)}),Xt(R,"offsetHeight",E=>v(x,E)),l(y,D),he(),W()}var jn=Re('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),zn=Re("<!><!>",1),Rn=Re("<!><!>",1);function Ln(y,t){ke(t,!1);const o=p(),W=p();let u=z(t,"x1",8,0),a=z(t,"x2",8,1e3),s=z(t,"timelineHeight",8,1e3),n=z(t,"startTime",8),f=z(t,"duration",8);const{radius:_}=rt,g=20;A(()=>(se(a()),se(u())),()=>{v(o,a()-u())}),A(()=>e(o),()=>{v(W,e(o)/g)}),Ce(),Ee();var H=Rn(),T=ne(H);const d=r(()=>[u(),s()]),c=r(()=>[u()+e(o),s()]);Je(T,{strokeWidth:_/2,get startPoint(){return e(d)},get endPoint(){return e(c)}});var b=i(T);ot(b,1,()=>Array(g),yt,(C,P,x)=>{var m=zn();const G=r(()=>u()+x*e(W)),D=r(()=>s()+_*2);var Q=ne(m);{var R=O=>{const w=r(()=>[e(G),0]),S=r(()=>[e(G),s()]);Je(O,{strokeWidth:.5,get startPoint(){return e(w)},get endPoint(){return e(S)}})};J(Q,O=>{x!==0&&O(R)})}var U=i(Q);{var j=O=>{var w=jn(),S=$(w,!0);k(w),M(N=>{ve(w,"transform",`rotate(90, ${e(G)??""}, ${e(D)??""})`),ve(w,"x",e(G)-_),ve(w,"y",e(D)),L(S,N)},[()=>Kt({start:n(),end:new Date(new Date(n().toString()).getTime()+f()/g*x),includeMilliseconds:f()/g<1e3})],r),l(O,w)};J(U,O=>{x!==0&&O(j)})}l(C,m)}),l(y,H),he()}var On=Re("<text><!></text>"),Mn=Re("<!><!><!>",1);function Gn(y,t){ke(t,!1);const o=p(),W=p(),u=p(),a=p(),s=p(),n=p();var f=p();let _=z(t,"point",24,()=>[0,0]),g=z(t,"category",8,void 0),H=z(t,"status",8,"none"),T=z(t,"fontSize",8,"13px"),d=z(t,"fontWeight",8,"400"),c=z(t,"textAnchor",8,"start"),b=z(t,"backdrop",8,!1),C=z(t,"backdropHeight",8,0),P=z(t,"icon",8,void 0),x=z(t,"config",8,void 0),m=z(t,"label",8,!1),G=p();A(()=>(e(o),e(W),se(_())),()=>{(w=>(v(o,w[0]),v(W,w[1])))(_())}),A(()=>(se(P()),se(x())),()=>{v(u,P()&&x())}),A(()=>(te(f),e(G)),()=>{v(a,(v(f,e(G)===null||e(G)===void 0?void 0:e(G).getBBox())===null||te(f)===void 0?void 0:te(f).width)||0)}),A(()=>(e(u),e(a)),()=>{v(s,e(u)?e(a)+36:e(a)+12)}),A(()=>(e(u),se(c()),e(o),se(x())),()=>{v(n,e(u)&&c()==="start"?e(o)+x().radius*2:e(o))}),Ce(),Ee();var D=Mn(),Q=ne(D);{var R=w=>{const S=r(()=>[e(o)-C(),e(W)]),N=r(()=>[e(o)+e(s),e(W)]);Je(w,{get startPoint(){return e(S)},get endPoint(){return e(N)},get status(){return H()},get strokeWidth(){return C()}})};J(Q,w=>{b()&&w(R)})}var U=i(Q);{var j=w=>{const S=r(()=>c()==="end"?e(o)-e(a)-C():e(o)),N=r(()=>e(W)-8),ue=r(()=>b()?"text-white":"text-primary");Qe(w,{get name(){return P()},get x(){return e(S)},get y(){return e(N)},get class(){return e(ue)}})};J(U,w=>{e(u)&&w(j)})}var O=i(U);jt(O,()=>e(n),w=>{var S=On();let N;var ue=$(S);Ze(ue,t,"default",{},null),k(S),Xr(S,$e=>v(G,$e),()=>e(G)),M($e=>{N=Ye(S,0,`cursor-pointer select-none outline-none ${g()??""} text-primary`,"svelte-ja82h2",N,$e),ve(S,"x",e(n)),ve(S,"y",e(W)+1),ve(S,"font-size",T()),ve(S,"font-weight",d()),ve(S,"text-anchor",c())},[()=>({label:m(),backdrop:b()})],r),l(w,S)}),l(y,D),he()}var Dn=Re('<rect fill="transparent" pointer-events="all"></rect>'),Un=Re("<!><!>",1),Nn=Re("<!><!><!><!>",1),Vn=Re('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"><!><!></g>');function Bn(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(tr,"$authUser",o),a=p(),s=p(),n=p(),f=p(),_=p(),g=p(),H=p(),T=p(),d=p(),c=p(),b=p();var C=p(),P=p();let x=z(t,"y",8,0),m=z(t,"group",12),G=z(t,"activeGroups",24,()=>[]),D=z(t,"startTime",8),Q=z(t,"endTime",8),R=z(t,"canvasWidth",8),U=z(t,"active",12,!0),j=z(t,"readOnly",8,!1);const{height:O,gutter:w,radius:S}=rt;let N=p();Pr(async()=>{const I=Dr(m());if(I)try{v(N,await Ur(I,{namespace:Ut.params.namespace,settings:Ut.data.settings,accessToken:u().accessToken})),e(N)&&m(m().decodedLocalActivity=e(N),!0)}catch(E){console.warn("Failed to decode local activity:",E)}});const ue=(I,E,q)=>{const re=pt({start:D(),end:I,onlyUnderSecond:!1}),ae=m().eventList.map(Y=>{const Z=pt({start:D(),end:Y.eventTime,onlyUnderSecond:!1})/re;return Math.round(Z*E)+w});if(e(n)){const F=pt({start:D(),end:e(n),onlyUnderSecond:!1})/re,Z=Math.round(F*E)+w;ae.push(Z)}const{textAnchor:ye,textIndex:xe,textPosition:Pe,backdrop:fe}=xr(ae,q,E,m().isPending,rt);return{points:ae,textAnchor:ye,textIndex:xe,textPosition:Pe,backdrop:fe}},$e=()=>{j()||sr(m())};A(()=>se(R()),()=>{v(a,R()-2*w)}),A(()=>(se(G()),se(m())),()=>{U(!G().length||G().includes(m().id))}),A(()=>se(m()),()=>{v(s,m()===null||m()===void 0?void 0:m().pendingActivity)}),A(()=>(e(s),te(C)),()=>{v(n,e(s)&&(v(C,e(s).pauseInfo)===null||te(C)===void 0?void 0:te(C).pauseTime))}),A(()=>(e(f),e(_),e(g),e(H),e(T),se(Q()),e(a),se(x())),()=>{(I=>(v(f,I.points),v(_,I.textAnchor),v(g,I.textIndex),v(H,I.textPosition),v(T,I.backdrop)))(ue(Q(),e(a),x()))}),A(()=>(se(m()),Dt),()=>{v(d,m().eventList.find(Dt))}),A(()=>(e(d),te(P)),()=>{v(c,e(d)&&(v(P,e(d).attributes)===null||te(P)===void 0?void 0:te(P).attempt)>1)}),A(()=>(se(m()),e(n)),()=>{v(b,m().isPending||!!e(n))}),Ce(),Ee();var de=Vn();ve(de,"height",O);var ie=$(de);{var V=I=>{var E=Dn();const q=r(()=>e(n)?e(f)[1]-e(f)[0]:R()-2*w);ve(E,"height",O),M(()=>{ve(E,"y",x()-O/2),ve(E,"x",e(f)[0]),ve(E,"width",e(q))}),l(I,E)};J(ie,I=>{e(b)&&I(V)})}var X=i(ie);ot(X,1,()=>e(f),yt,(I,E,q)=>{var re=Nn();const ae=r(()=>e(f)[q+1]),ye=r(()=>e(g)===q);var xe=ne(re);{var Pe=me=>{const Ie=r(()=>[e(E),x()]),Se=r(()=>[e(ae),x()]),Fe=r(()=>!!e(n)),Te=r(()=>!!e(n)),He=r(()=>q===0&&m().lastEvent.classification==="Completed");Je(me,{get startPoint(){return e(Ie)},get endPoint(){return e(Se)},get category(){return m().category},get classification(){return m().lastEvent.classification},get pending(){return e(Fe)},get paused(){return e(Te)},strokeWidth:S*2,get retried(){return e(c)},get scheduling(){return e(He)}})};J(xe,me=>{e(ae)&&me(Pe)})}var fe=i(xe);{var Y=me=>{var Ie=Un(),Se=ne(Ie);const Fe=r(()=>[e(E),x()]),Te=r(()=>[R()-w,x()]),He=r(()=>e(s)?e(s).attempt>1?"retry":"pending":m().category),we=r(()=>!!e(n));Je(Se,{get startPoint(){return e(Fe)},get endPoint(){return e(Te)},get category(){return e(He)},get classification(){return m().lastEvent.classification},pending:!0,get paused(){return e(we)},strokeWidth:S*2});var je=i(Se);const We=r(()=>[e(E),x()]);kt(je,{get point(){return e(We)},get classification(){return m().lastEvent.classification},icon:"retry",r:S}),l(me,Ie)};J(fe,me=>{!e(ae)&&m().isPending&&!e(n)&&me(Y)})}var F=i(fe);{var Z=me=>{const Ie=r(()=>{var Te,He;return(He=(Te=m())==null?void 0:Te.userMetadata)==null?void 0:He.summary}),Se=r(()=>{var Te;return Sr(m().initialEvent)?(Te=m())==null?void 0:Te.displayName:""}),Fe=r(()=>{var Te;return e(N)?h("events.category.local-activity"):(Te=m())==null?void 0:Te.displayName});Qr(me,{get value(){return e(Ie)},get prefix(){return e(Se)},get fallback(){return e(Fe)},children:Ft,$$slots:{default:(Te,He)=>{const we=r(()=>He.decodedValue),je=r(()=>e(s)&&!e(s).paused||e(c)?"retry":void 0);Gn(Te,{get point(){return e(H)},get textAnchor(){return e(_)},get backdrop(){return e(T)},backdropHeight:S*2,config:rt,get icon(){return e(je)},children:(We,Ge)=>{var Le=Me(),Xe=ne(Le);{var Tt=De=>{var ze=ce();M(Ue=>L(ze,`${Ue??""}
            ${e(s).attempt??""} / ${e(s).maximumAttempts||"∞"}
            • 
            ${e(we)??""}`),[()=>h("workflows.attempt")],r),l(De,ze)},Et=(De,ze)=>{{var Ue=Ne=>{var vt=ce();M(()=>L(vt,`${e(d).attributes.attempt??""} • ${e(we)??""}`)),l(Ne,vt)},Pt=(Ne,vt)=>{{var lr=et=>{var st=ce();M(()=>L(st,e(N).value)),l(et,st)},cr=et=>{var st=ce();M(()=>L(st,e(we))),l(et,st)};J(Ne,et=>{e(N)?et(lr):et(cr,!1)},vt)}};J(De,Ne=>{e(c)?Ne(Ue):Ne(Pt,!1)},ze)}};J(Xe,De=>{e(s)?De(Tt):De(Et,!1)})}l(We,Le)},$$slots:{default:!0}})}}})};J(F,me=>{e(ye)&&me(Z)})}var oe=i(F);const ee=r(()=>[e(E),x()]),be=r(()=>{var me;return(me=m().eventList[q])==null?void 0:me.classification}),le=r(()=>e(n)&&q!==0?"pause":e(N)?lt["local-activity"]:lt[m().category]);kt(oe,{get point(){return e(ee)},get classification(){return e(be)},get icon(){return e(le)},r:S}),l(I,re)}),k(de),wt("click",de,$e),wt("keypress",de,$e),l(y,de),he(),W()}var qn=Re('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function Yn(y,t){ke(t,!1);const o=p(),W=p();let u=z(t,"workflow",8),a=z(t,"length",8),s=z(t,"y",8);const{radius:n,height:f,gutter:_}=rt;A(()=>{},()=>{v(o,_)}),A(()=>(e(o),se(a())),()=>{v(W,e(o)+a()-2*_)}),Ce(),Ee();var g=qn();ve(g,"height",f);var H=$(g);const T=r(()=>[e(o),s()]),d=r(()=>[e(W),s()]),c=r(()=>Zt(u()));Je(H,{get startPoint(){return e(T)},get endPoint(){return e(d)},get classification(){return u().status},strokeWidth:n*2,get pending(){return u().isRunning},get delayed(){return e(c)}});var b=i(H);const C=r(()=>[e(o),s()]);kt(b,{get point(){return e(C)},get classification(){return u().status},r:n});var P=i(b);const x=r(()=>e(o)-n/2),m=r(()=>s()-n/2);Qe(P,{name:"workflow",get x(){return e(x)},get y(){return e(m)},width:n,height:n,strokeWidth:"4",class:"text-black"});var G=i(P);const D=r(()=>[e(W),s()]);kt(G,{get point(){return e(D)},get classification(){return u().status},r:n});var Q=i(G);const R=r(()=>e(W)-n/2),U=r(()=>s()-n/2);Qe(Q,{name:"workflow",get x(){return e(R)},get y(){return e(U)},width:n,height:n,strokeWidth:"4",class:"text-black"}),k(g),l(y,g),he()}var Jn=Re("<!><!>",1),Qn=B('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),Xn=B('<div id="event-history-timeline-graph" class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function ar(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(dt,"$activeGroupHeight",o),a=()=>K(Be,"$eventStatusFilter",o),s=()=>K(ht,"$fullEventHistory",o),n=()=>K(nt,"$activeGroups",o),f=()=>K(at,"$eventFilterSort",o),_=()=>K(bt,"$timeFormat",o),g=p(),H=p(),T=p(),d=p(),c=p(),b=p(),C=p();var P=p(),x=p();let m=z(t,"x",8,0),G=z(t,"y",8,0),D=z(t,"workflow",8),Q=z(t,"groups",8),R=z(t,"viewportHeight",8),U=z(t,"readOnly",8,!1),j=z(t,"error",8,!1);const{height:O,gutter:w,radius:S}=rt;let N=p(0),ue=p(0);const $e=V=>{var X;v(ue,(X=V==null?void 0:V.target)===null||X===void 0?void 0:X.scrollTop)};A(()=>(se(U()),u()),()=>{v(g,U()?0:u())}),A(()=>(se(Q()),a()),()=>{v(H,wr(Q(),a()))}),A(()=>(te(P),s(),se(D()),te(x)),()=>{v(T,(v(P,s()[0])===null||te(P)===void 0?void 0:te(P).eventTime)<D().executionTime?v(x,s()[0])===null||te(x)===void 0?void 0:te(x).eventTime:D().executionTime)}),A(()=>(se(D()),e(T)),()=>{v(d,!Zt(D())&&e(T)||D().startTime)}),A(()=>(e(H),e(g)),()=>{v(c,Math.max(O*(e(H).length+2),120)+e(g))}),A(()=>e(c),()=>{v(b,e(c)+120)}),A(()=>(n(),f(),e(g)),()=>{v(C,V=>{const X=n()===null||n()===void 0?void 0:n().filter(I=>f()==="ascending"?parseInt(I)<parseInt(V.id):parseInt(I)>parseInt(V.id));return X!=null&&X.length?e(g):0})}),Ce(),Ee();var de=Xn(),ie=$(de);Pn(ie,{get workflow(){return D()},get startTime(){return e(d)},children:Ft,$$slots:{default:(V,X)=>{const I=r(()=>X.endTime),E=r(()=>X.duration);var q=Qn(),re=ne(q);let ae;var ye=$(re),xe=$(ye),Pe=$(xe,!0);k(xe);var fe=i(xe,2),Y=$(fe,!0);k(fe),k(ye),k(re);var F=i(re,2);let Z;var oe=$(F);const ee=r(()=>[w,e(c)]);Je(oe,{startPoint:[w,0],get endPoint(){return e(ee)},strokeWidth:S/2});var be=i(oe);const le=r(()=>[e(N)-w,0]),me=r(()=>[e(N)-w,e(c)]);Je(be,{get startPoint(){return e(le)},get endPoint(){return e(me)},strokeWidth:S/2});var Ie=i(be);const Se=r(()=>e(N)-w+S/4);Ln(Ie,{x1:w-S/4,get x2(){return e(Se)},get timelineHeight(){return e(c)},get startTime(){return e(d)},get duration(){return e(E)}});var Fe=i(Ie);Yn(Fe,{get workflow(){return D()},y:O,get length(){return e(N)}});var Te=i(Fe);ot(Te,3,()=>e(H),He=>He.id,(He,we,je,We)=>{var Ge=Jn();const Le=r(()=>(e(je)+2)*O+e(C)(e(we)));var Xe=ne(Ge);{var Tt=ze=>{var Ue=Me(),Pt=ne(Ue);jt(Pt,()=>e(we).eventList.length,Ne=>{Bn(Ne,{get y(){return e(Le)},get group(){return e(we)},get activeGroups(){return n()},get canvasWidth(){return e(N)},get startTime(){return e(d)},get endTime(){return e(I)},get readOnly(){return U()}})}),l(ze,Ue)};J(Xe,ze=>{(!R()||e(Le)>e(ue)-2*O&&e(Le)<e(ue)+R()*O)&&ze(Tt)})}var Et=i(Xe);{var De=ze=>{const Ue=r(()=>e(Le)+1.33*S);Fn(ze,{get y(){return e(Ue)},get group(){return e(we)},get canvasWidth(){return e(N)}})};J(Et,ze=>{!U()&&n().includes(e(we).id)&&ze(De)})}l(He,Ge)}),k(F),M((He,we,je,We)=>{ae=Ye(re,1,"pointer-events-none sticky top-[120px]",null,ae,He),L(Pe,we),L(Y,je),ve(F,"x",m()),ve(F,"y",G()),ve(F,"viewBox",`0 0 ${e(N)??""} ${e(b)??""}`),ve(F,"height",e(b)),ve(F,"width",e(N)),Z=Ye(F,0,"-mt-4 svelte-ta6k80",null,Z,We)},[()=>({invisible:!!n().length}),()=>qe(e(d),_()),()=>qe(e(I),_()),()=>({error:j()})],r),l(V,q)}}}),k(de),M(()=>mr(de,R()?`max-height: ${R()}px;`:"")),Xt(de,"clientWidth",V=>v(N,V)),wt("scroll",de,$e),l(y,de),he(),W()}var Zn=B('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function Kn(y,t){var o=Zn(),W=$(o);Ze(W,t,"default",{},null),k(o),l(y,o)}var eo=B("<p> </p> <!>",1),to=B("<p> </p> <!>",1),ro=B('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),no=B('<div class="w-full text-right text-xs" slot="summary"> </div>'),oo=B("<!> <!>",1);function ir(y,t){ke(t,!1);let o=z(t,"failure",8,void 0);Ee();var W=oo(),u=ne(W);{var a=f=>{const _=r(()=>h("common.failure"));nr(f,{get title(){return e(_)},class:"text-sm",children:(g,H)=>{var T=ro(),d=$(T),c=$(d,!0);k(d);var b=i(d,2);const C=r(()=>{var R;return((R=o())==null?void 0:R.message)||""}),P=r(()=>h("common.copy-icon-title")),x=r(()=>h("common.copy-success-icon-title"));_t(b,{get content(){return e(C)},language:"text",get copyIconTitle(){return e(P)},get copySuccessIconTitle(){return e(x)}});var m=i(b,2);{var G=R=>{var U=eo(),j=ne(U),O=$(j,!0);k(j);var w=i(j,2);const S=r(()=>h("common.copy-icon-title")),N=r(()=>h("common.copy-success-icon-title"));_t(w,{get content(){return o().source},language:"text",get copyIconTitle(){return e(S)},get copySuccessIconTitle(){return e(N)}}),M(ue=>L(O,ue),[()=>h("common.source")],r),l(R,U)};J(m,R=>{var U;(U=o())!=null&&U.source&&R(G)})}var D=i(m,2);{var Q=R=>{var U=to(),j=ne(U),O=$(j,!0);k(j);var w=i(j,2);const S=r(()=>h("common.copy-icon-title")),N=r(()=>h("common.copy-success-icon-title"));_t(w,{get content(){return o().stackTrace},language:"text",get copyIconTitle(){return e(S)},get copySuccessIconTitle(){return e(N)}}),M(ue=>L(O,ue),[()=>h("common.stack-trace")],r),l(R,U)};J(D,R=>{var U;(U=o())!=null&&U.stackTrace&&R(Q)})}k(T),M(R=>L(c,R),[()=>h("common.message")],r),l(g,T)},$$slots:{default:!0,summary:(g,H)=>{var T=no(),d=$(T,!0);k(T),M(()=>{var c;return L(d,(c=o())==null?void 0:c.message)}),l(g,T)}}})};J(u,f=>{o()&&f(a)})}var s=i(u,2);{var n=f=>{var _=Me(),g=ne(_);ir(g,{get failure(){return o().cause}}),l(f,_)};J(s,f=>{var _;(_=o())!=null&&_.cause&&f(n)})}l(y,W),he()}var so=B('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function ao(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(bt,"$timeFormat",o);let a=z(t,"pendingTask",8,void 0);Ee();const s=r(()=>h("workflows.pending-workflow-task"));nr(y,{get title(){return e(s)},children:(n,f)=>{var _=so(),g=$(_),H=$(g),T=i(H);Oe(T,{children:(j,O)=>{ge();var w=ce();M(()=>L(w,a().state)),l(j,w)},$$slots:{default:!0}}),k(g);var d=i(g,2),c=$(d),b=i(c);Oe(b,{children:(j,O)=>{ge();var w=ce();M(()=>L(w,a().attempt)),l(j,w)},$$slots:{default:!0}}),k(d);var C=i(d,2),P=$(C),x=i(P);Oe(x,{children:(j,O)=>{ge();var w=ce();M(S=>L(w,S),[()=>qe(a().originalScheduledTime,u())],r),l(j,w)},$$slots:{default:!0}}),k(C);var m=i(C,2),G=$(m),D=i(G);Oe(D,{children:(j,O)=>{ge();var w=ce();M(S=>L(w,S),[()=>qe(a().scheduledTime,u())],r),l(j,w)},$$slots:{default:!0}}),k(m);var Q=i(m,2),R=$(Q),U=i(R);Oe(U,{children:(j,O)=>{ge();var w=ce();M(S=>L(w,S),[()=>qe(a().startedTime,u())],r),l(j,w)},$$slots:{default:!0}}),k(Q),k(_),M((j,O,w,S,N)=>{L(H,`${j??""} `),L(c,`${O??""} `),L(P,`${w??""} `),L(G,`${S??""} `),L(R,`${N??""} `)},[()=>h("common.state"),()=>h("common.attempt"),()=>h("workflows.original-scheduled-time"),()=>h("workflows.scheduled-time"),()=>h("workflows.started-time")],r),l(n,_)},$$slots:{default:!0}}),he(),W()}var io=B("<p> <!>.</p>"),lo=B('<p><span class="mr-2 text-secondary">Timeout Type</span> </p>'),co=B("<!> <!>",1),vo=B('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> </div> <div class="flex flex-col gap-2 bg-primary p-4"><!> <!></div></div>',1);function uo(y,t){ke(t,!0);const[o,W]=Ae(),u=()=>K(bt,"$timeFormat",o),a=()=>K(Mr,"$relativeTime",o);var s,n;let f=pe(()=>Cr(t.error)),_=pe(()=>Fr(t.error)&&((s=t.error.attributes)===null||s===void 0?void 0:s.failure)),g=pe(()=>jr(t.error)&&((n=t.error.attributes)===null||n===void 0?void 0:n.timeoutType));var H=Me(),T=ne(H);{var d=c=>{const b=pe(()=>h(`typed-errors.${e(f)}.title`));zt(c,{icon:"warning",intent:"warning",get title(){return e(b)},children:(C,P)=>{var x=vo(),m=ne(x),G=$(m,!0);k(m);var D=i(m,2);{var Q=I=>{var E=io(),q=$(E,!0),re=i(q);const ae=pe(()=>h(`typed-errors.${e(f)}.link`));rr(re,{newTab:!0,get href(){return e(ae)},children:(ye,xe)=>{ge();var Pe=ce();M(fe=>L(Pe,fe),[()=>h(`typed-errors.${e(f)}.action`)]),l(ye,Pe)},$$slots:{default:!0}}),ge(),k(E),M(ye=>L(q,ye),[()=>h("typed-errors.link-preface")]),l(I,E)};J(D,I=>{(e(f)==="NonDeterministicError"||e(f)==="BadSearchAttributes")&&I(Q)})}var R=i(D,2),U=$(R),j=$(U),O=$(j),w=i(O);Qe(w,{get name(){return lt[t.error.category]}});var S=i(w,2),N=$(S,!0);k(S),k(j);var ue=i(j);k(U);var $e=i(U,2),de=$($e);{var ie=I=>{var E=lo(),q=i($(E));k(E),M(()=>L(q,` ${e(g)??""}`)),l(I,E)};J(de,I=>{e(g)&&I(ie)})}var V=i(de,2);{var X=I=>{Kn(I,{children:(E,q)=>{var re=co(),ae=ne(re);{var ye=fe=>{ir(fe,{get failure(){return e(_)}})};J(ae,fe=>{e(_)&&fe(ye)})}var xe=i(ae,2);{var Pe=fe=>{ao(fe,{get pendingTask(){return t.pendingTask}})};J(xe,fe=>{t.pendingTask&&fe(Pe)})}l(E,re)},$$slots:{default:!0}})};J(V,I=>{(e(_)||t.pendingTask)&&I(X)})}k($e),k(R),M((I,E,q)=>{L(G,I),L(O,`${t.error.id??""} `),L(N,E),L(ue,` ${q??""}`)},[()=>h(`typed-errors.${e(f)}.description`),()=>{var I;return Zr((I=t.error)==null?void 0:I.name)},()=>{var I;return qe((I=t.error)==null?void 0:I.eventTime,u(),{relative:a()})}]),l(C,x)},$$slots:{default:!0}})};J(T,c=>{e(f)&&e(f)!=="ResetWorkflow"&&c(d)})}l(y,H),he(),W()}const fo=async(y,t,o)=>{const W=nn(t),u=on(t),a=sn(t),s={...t,codec:{...t==null?void 0:t.codec,endpoint:W,passAccessToken:u,includeCredentials:a}},n=!1;try{const f=await tn(y,St(Ke).params.namespace,s,St(tr).accessToken,o,n);return rn(f,n)}catch{return y}};function qt(y,t,o){const W=Ct({events:y},null,2),u=document.createElement("a"),a=new Blob([W],{type:o});u.href=URL.createObjectURL(a),u.download=t,u.click()}const go=async({namespace:y,workflowId:t,runId:o,settings:W,decodeSetting:u})=>{try{const a=await Yr({namespace:y,workflowId:t,runId:o,sort:"ascending"});if(u==="encoded")qt(a,`${o}/events.json`,"text/plain");else{const s=[];for(const n of a){const f=await fo(n,W,u);s.push(f)}qt(s,`${o}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var mo=B('<div class="flex items-center space-x-4"><!></div>');function po(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(br,"$parameters",o),a=()=>K(an,"$isCloud",o),s=p(),n=p(),{namespace:f,workflowId:_,runId:g}=u();A(()=>Nt,()=>{v(s,Nt({namespace:f,workflow:_,run:g}))}),A(()=>e(s),()=>{v(n,e(s)+".json")}),Ce(),Ee();var H=Me(),T=ne(H);{var d=c=>{var b=mo(),C=$(b);rr(C,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(n)},newTab:!0,"data-testid":"view-raw-event-history",children:(P,x)=>{ge();var m=ce();M(G=>L(m,G),[()=>h("events.view-raw-history")],r),l(P,m)},$$slots:{default:!0}}),k(b),l(c,b)};J(T,c=>{a()||c(d)})}l(y,H),he(),W()}var _o=B('<h3 slot="title"> </h3>'),xo=B("<!> <!> <!>",1),wo=B('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function ko(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(Ke,"$page",o),a=()=>K(Lt,"$downloadEventHistorySetting",o);let s=z(t,"open",12,!1),n=z(t,"namespace",8),f=z(t,"workflowId",8),_=z(t,"runId",8);const g=()=>{s(!1),go({namespace:n(),workflowId:f(),runId:_(),settings:u().data.settings,decodeSetting:a()})};Ee();const H=r(()=>h("common.download")),T=r(()=>h("common.cancel"));Kr(y,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(H)},get cancelText(){return e(T)},get open(){return s()},set open(d){s(d)},$$events:{confirmModal:()=>g(),cancelModal:()=>s(!1)},$$slots:{title:(d,c)=>{var b=_o(),C=$(b,!0);k(b),M(P=>L(C,P),[()=>h("common.download-event-history-json")],r),l(d,b)},content:(d,c)=>{var b=wo(),C=$(b);en(C,{group:Lt,name:"decode-setting",class:"h-auto overflow-auto",children:(x,m)=>{var G=xo(),D=ne(G);const Q=r(()=>h("events.encoded"));Ht(D,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(Q)}});var R=i(D,2);const U=r(()=>h("events.decoded")),j=r(()=>h("events.decoded-description"));Ht(R,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(U)},get description(){return e(j)}});var O=i(R,2);const w=r(()=>h("events.readable")),S=r(()=>h("events.readable-description"));Ht(O,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(w)},get description(){return e(S)}}),l(x,G)},$$slots:{default:!0}});var P=i(C,2);po(P,{}),k(b),l(d,b)}},$$legacy:!0}),he(),W()}const ho=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],$o=y=>!!y.workflowExecutionStartedEventAttributes,yo=y=>{for(const t of ho)if(y.eventType===t)return!0;return!1},bo=y=>Qt(y)?y.attributes.input:zr(y)?y.attributes.result===null?null:y.attributes.result:y.attributes,To=y=>{var s;let t,o,W=!1,u,a;for(const n of y)if($o(n)){u=n;continue}else if(yo(n)){a=n;continue}return u&&(t=Ct(((s=u==null?void 0:u.workflowExecutionStartedEventAttributes)==null?void 0:s.input)??null)),a&&(W=Qt(a),o=Ct(bo(a))),{input:t,results:o,contAsNew:W}};var Eo=B('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function Po(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(ht,"$fullEventHistory",o),a=()=>K($t,"$workflowRun",o),s=p(),n=p();A(()=>u(),()=>{v(s,To(u()))}),A(()=>a(),()=>{v(n,a().workflow.isRunning)}),Ce(),Ee();var f=Eo(),_=$(f);const g=r(()=>h("workflows.input"));Bt(_,{get title(){return e(g)},get content(){return e(s).input},get isRunning(){return e(n)}});var H=i(_,2);const T=r(()=>h("workflows.result"));Bt(H,{get title(){return e(T)},get content(){return e(s).results},get isRunning(){return e(n)}}),k(f),l(y,f),he(),W()}var Io=B('<div class="mb-4"><!></div>');function Ao(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K($t,"$workflowRun",o),a=p(),s=p(),n=p();var f=p();A(()=>(e(a),e(s),u()),()=>{(T=>(v(a,T.workflow),v(s,T.workers)))(u())}),A(()=>(e(a),te(f),e(s)),()=>{v(n,(e(a)===null||e(a)===void 0?void 0:e(a).isRunning)&&!(!(v(f,e(s)===null||e(s)===void 0?void 0:e(s).pollers)===null||te(f)===void 0)&&te(f).length))}),Ce(),Ee();var _=Me(),g=ne(_);{var H=T=>{var d=Io(),c=$(d);const b=r(()=>h("workflows.workflow-error-no-workers-title"));zt(c,{icon:"warning",intent:"warning",get title(){return e(b)},children:(C,P)=>{ge();var x=ce();M(m=>L(x,m),[()=>{var m;return h("workflows.workflow-error-no-workers-description",{taskQueue:(m=e(a))==null?void 0:m.taskQueue})}],r),l(C,x)},$$slots:{default:!0}}),k(d),ln(1,d,()=>cn,()=>({duration:200,delay:100})),l(T,d)};J(g,T=>{e(n)&&T(H)})}l(y,_),he(),W()}var Ho=B('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Wo(y,t){const o=xt(t,["children","$$slots","$$events","$$legacy"]),W=xt(o,["id","open","onToggle","icon"]);ke(t,!1);let u=z(t,"id",24,()=>crypto.randomUUID()),a=z(t,"open",12,!1),s=z(t,"onToggle",8,void 0),n=z(t,"icon",8,void 0);const f=async()=>{s()&&await s()(),a(!a())};Ee();var _=Ho(),g=$(_),H=$(g),T=$(H);Ze(T,t,"title",{},null);var d=i(T,2);Ze(d,t,"description",{},null);var c=i(d,2),b=$(c);Ze(b,t,"action",{},null);var C=i(b,2);const P=r(()=>n()?n():a()?"arrow-down":"arrow-right");Qe(C,{get name(){return e(P)}}),k(c),k(H),k(g);var x=i(g,2);let m;var G=$(x);Ze(G,t,"default",{get open(){return a()}},null),k(x),k(_),M(D=>{Ye(_,1,`w-full ${W.class??""}`),ve(g,"id",`${u()??""}-trigger`),ve(g,"aria-expanded",a()),ve(g,"aria-controls",`${u()??""}-content`),ve(x,"id",`${u()??""}-content`),ve(x,"aria-labelledby",`${u()??""}-trigger`),m=Ye(x,1,"block w-full bg-primary p-2",null,m,D)},[()=>({hidden:!a()})],r),wt("click",g,f),l(y,_),he()}var So=B("<!> <!>",1),Co=B("<!> <!>",1),Fo=B('<p class="flex items-center gap-2"> <!></p>'),jo=B('<p class="flex items-center gap-2"> <!></p>'),zo=B('<p class="flex items-center gap-2"> <!></p>'),Ro=B('<p class="flex items-center gap-2"> <!></p>'),Lo=B('<p class="flex items-center gap-2"> <!></p>'),Oo=B('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Mo=B('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Yt(y,t){ke(t,!0);const[o,W]=Ae(),u=()=>K(bt,"$timeFormat",o);var a,s,n,f;const _=pe(()=>qe(t.callback.lastAttemptCompleteTime,u())),g=pe(()=>qe(t.callback.nextAttemptScheduleTime,u())),H=pe(()=>(a=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||a===void 0?void 0:a.message),T=pe(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),d=pe(()=>(n=(s=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||s===void 0?void 0:s.nexus)===null||n===void 0?void 0:n.url),c={Standby:h("nexus.callback.standby"),Scheduled:h("nexus.callback.scheduled"),"Backing Off":h("nexus.callback.backing-off"),Failed:h("nexus.callback.failed"),Succeeded:h("nexus.callback.succeeded")},b="Failed",C=pe(()=>t.callback.state===b),P=pe(()=>c[t.callback.state]||h("nexus.nexus-callback")),x=pe(()=>((f=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||f===void 0?void 0:f.links)||[]),m=pe(()=>!e(x).length&&!t.link&&e(d)),G=pe(()=>e(C)?"error":"info");zt(y,{icon:"nexus",get intent(){return e(G)},get title(){return e(P)},children:(D,Q)=>{var R=Mo(),U=ne(R),j=$(U);{var O=Y=>{var F=Me(),Z=ne(F);ot(Z,17,()=>e(x),oe=>{var ee,be,le;return((be=(ee=oe.workflowEvent)==null?void 0:ee.eventRef)==null?void 0:be.eventId)||((le=oe.workflowEvent)==null?void 0:le.requestIdRef.requestId)},(oe,ee,be,le)=>{var me=So(),Ie=ne(me);gt(Ie,{get link(){return e(ee)}});var Se=i(Ie,2);const Fe=pe(()=>h("nexus.link-namespace")),Te=pe(()=>Vt({namespace:e(ee).workflowEvent.namespace}));gt(Se,{get link(){return e(ee)},get label(){return e(Fe)},get value(){return e(ee).workflowEvent.namespace},get href(){return e(Te)}}),l(oe,me)}),l(Y,F)},w=(Y,F)=>{{var Z=oe=>{var ee=Co(),be=ne(ee);gt(be,{get link(){return t.link}});var le=i(be,2);const me=pe(()=>h("nexus.link-namespace")),Ie=pe(()=>Vt({namespace:t.link.workflowEvent.namespace}));gt(le,{get link(){return t.link},get label(){return e(me)},get value(){return t.link.workflowEvent.namespace},get href(){return e(Ie)}}),l(oe,ee)};J(Y,oe=>{t.link&&oe(Z)},F)}};J(j,Y=>{e(x).length?Y(O):Y(w,!1)})}var S=i(j,2),N=$(S),ue=$(N,!0),$e=i(ue);Oe($e,{type:"subtle",children:(Y,F)=>{ge();var Z=ce();M(()=>L(Z,t.callback.state)),l(Y,Z)},$$slots:{default:!0}}),k(N);var de=i(N,2);{var ie=Y=>{var F=Fo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,t.callback.attempt)),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("common.attempt")]),l(Y,F)};J(de,Y=>{t.callback.attempt&&Y(ie)})}var V=i(de,2);{var X=Y=>{var F=jo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(_))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.last-attempt-completed-time")]),l(Y,F)};J(V,Y=>{t.callback.lastAttemptCompleteTime&&Y(X)})}var I=i(V,2);{var E=Y=>{var F=zo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(g))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.next-attempt-scheduled-time")]),l(Y,F)};J(I,Y=>{t.callback.nextAttemptScheduleTime&&Y(E)})}k(S);var q=i(S,2);{var re=Y=>{var F=Ro(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(d))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.callback-url")]),l(Y,F)};J(q,Y=>{e(m)&&Y(re)})}var ae=i(q,2);{var ye=Y=>{var F=Lo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(T))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.blocked-reason")]),l(Y,F)};J(ae,Y=>{e(T)&&Y(ye)})}var xe=i(ae,2);{var Pe=Y=>{var F=Oo(),Z=$(F),oe=$(Z,!0);k(Z);var ee=i(Z,2);const be=pe(()=>h("common.copy-icon-title")),le=pe(()=>h("common.copy-success-icon-title"));_t(ee,{get content(){return e(H)},language:"text",get copyIconTitle(){return e(be)},get copySuccessIconTitle(){return e(le)}}),k(F),M(me=>L(oe,me),[()=>h("nexus.last-attempt-failure")]),l(Y,F)};J(xe,Y=>{e(H)&&Y(Pe)})}k(U);var fe=i(U,2);vr(fe,()=>t.children??ur),M(Y=>L(ue,Y),[()=>h("common.state")]),l(D,R)},$$slots:{default:!0}}),he(),W()}var Go=B('<div class="flex flex-col gap-2"></div>'),Do=B('<p class="p-1" slot="title"> </p>'),Uo=B('<div class="py-2"><!></div>');function No(y,t){ke(t,!0);const[o,W]=Ae(),u=()=>K(ht,"$fullEventHistory",o);var a;const s=pe(()=>u()[0]),n=pe(()=>(a=e(s)===null||e(s)===void 0?void 0:e(s).links)===null||a===void 0?void 0:a[0]),f=pe(()=>t.callbacks[0]);Yt(y,{get callback(){return e(f)},get link(){return e(n)},children:(_,g)=>{var H=Me(),T=ne(H);{var d=c=>{var b=Uo(),C=$(b);Wo(C,{children:Ft,$$slots:{default:(P,x)=>{const m=pe(()=>x.open);var G=Me(),D=ne(G);{var Q=R=>{var U=Go();ot(U,21,()=>t.callbacks.slice(1),yt,(j,O)=>{Yt(j,{get callback(){return e(O)}})}),k(U),l(R,U)};J(D,R=>{e(m)&&R(Q)})}l(P,G)},title:(P,x)=>{var m=Do(),G=$(m);k(m),M(()=>L(G,`View ${t.callbacks.length-1} other Callbacks`)),l(P,m)}}}),k(b),l(c,b)};J(T,c=>{t.callbacks.length>1&&c(d)})}l(_,H)},$$slots:{default:!0}}),he(),W()}var Vo=B("<!> <!> <!> <!> <!>",1),Bo=B('<div class="flex flex-col gap-0 px-4 pt-4 xl:px-8"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative px-4 pb-24 xl:px-8"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col"><!> <!></div></div> <!>',1);function qo(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(Ke,"$page",o),a=()=>K($t,"$workflowRun",o),s=()=>K(at,"$eventFilterSort",o),n=()=>K(tt,"$eventViewType",o),f=()=>K(Jt,"$filteredEventHistory",o),_=()=>K(Tr,"$currentEventHistory",o),g=()=>K(it,"$pauseLiveUpdates",o),H=()=>K(Ot,"$minimizeEventView",o),T=p(),d=p(),c=p(),b=p(),C=p(),P=p(),x=p(),m=p(),G=p(),D=p();pr(()=>{Wt()});let Q=p(!1);const R=()=>{e(C)?_e(at,"ascending"):_e(at,"descending")};A(()=>(e(T),u()),()=>{(F=>v(T,F.namespace))(u().params)}),A(()=>(e(d),a()),()=>{(F=>v(d,F.workflow))(a())}),A(()=>e(d),()=>{v(c,e(d)===null||e(d)===void 0?void 0:e(d).pendingActivities)}),A(()=>e(d),()=>{v(b,e(d)===null||e(d)===void 0?void 0:e(d).pendingNexusOperations)}),A(()=>s(),()=>{v(C,s()==="descending")}),A(()=>n(),()=>{v(P,n()==="compact")}),A(()=>(f(),e(c),e(b)),()=>{v(x,er(f(),"ascending",e(c),e(b)))}),A(()=>(e(C),e(x)),()=>{v(m,e(C)?[...e(x)].reverse():e(x))}),A(()=>(e(C),f()),()=>{v(G,e(C)?[...f()].reverse():f())}),A(()=>_(),()=>{v(D,Rr(_(),"ascending"))}),A(()=>(n(),Wt),()=>{n(),Wt()}),A(()=>(e(d),g()),()=>{!e(d).isRunning&&g()&&_e(it,!1)}),Ce(),Ee();var U=Bo(),j=ne(U),O=$(j);Ao(O,{});var w=i(O,2),S=$(w);Po(S,{});var N=i(S,2);{var ue=F=>{const Z=r(()=>{var oe;return(oe=e(d))==null?void 0:oe.pendingWorkflowTask});uo(F,{get error(){return e(D)},get pendingTask(){return e(Z)}})};J(N,F=>{e(D)&&F(ue)})}var $e=i(N,2);{var de=F=>{No(F,{get callbacks(){return e(d).callbacks}})};J($e,F=>{var Z,oe;(oe=(Z=e(d))==null?void 0:Z.callbacks)!=null&&oe.length&&F(de)})}k(w),k(j);var ie=i(j,2),V=$(ie);let X;var I=$(V),E=$(I,!0);k(I);var q=i(I,2),re=$(q);dn(re,{children:(F,Z)=>{var oe=Vo(),ee=ne(oe);{var be=we=>{const je=r(()=>e(C)?"descending":"ascending");mt(we,{get leadingIcon(){return e(je)},"data-testid":"zoom-in",size:"sm",$$events:{click:R},children:(We,Ge)=>{ge();var Le=ce();M(()=>L(Le,e(C)?"Descending":"Ascending")),l(We,Le)},$$slots:{default:!0}})};J(ee,we=>{n()!=="json"&&we(be)})}var le=i(ee,2);const me=r(()=>H()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");vn(le,{get text(){return e(me)},top:!0,children:(we,je)=>{const We=r(()=>H()?"minimize":"expand");mt(we,{get leadingIcon(){return e(We)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>_e(Ot,!H())},children:(Ge,Le)=>{ge();var Xe=ce();M(()=>L(Xe,H()?"Minimized":"Expanded")),l(Ge,Xe)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=i(le,2);En(Ie,{get compact(){return e(P)},get minimized(){return H()}});var Se=i(Ie,2);const Fe=r(()=>!e(d).isRunning),Te=r(()=>g()?"play":"pause");mt(Se,{get disabled(){return e(Fe)},get leadingIcon(){return e(Te)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>_e(it,!g())},children:(we,je)=>{ge();var We=ce();M(()=>L(We,g()?"Unfreeze":"Freeze")),l(we,We)},$$slots:{default:!0}});var He=i(Se,2);mt(He,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>v(Q,!0)},children:(we,je)=>{ge();var We=ce();M(Ge=>L(We,Ge),[()=>h("common.download")],r),l(we,We)},$$slots:{default:!0}}),l(F,oe)},$$slots:{default:!0}}),k(q),k(V);var ae=i(V,2),ye=$(ae);const xe=r(()=>!!e(D)),Pe=r(()=>H()?360:void 0);ar(ye,{get workflow(){return e(d)},get groups(){return e(m)},get error(){return e(xe)},get viewportHeight(){return e(Pe)}});var fe=i(ye,2);_n(fe,{get groups(){return e(m)},get history(){return e(G)},get minimized(){return H()}}),k(ae),k(ie);var Y=i(ie,2);ko(Y,{get namespace(){return e(T)},get workflowId(){return e(d).id},get runId(){return e(d).runId},get open(){return e(Q)},set open(F){v(Q,F)},$$legacy:!0}),M((F,Z)=>{X=Ye(V,1,"surface-background flex flex-wrap items-center justify-between gap-2 border-b border-subtle py-2 xl:gap-8 svelte-18jakp5",null,X,F),L(E,Z)},[()=>({"sticky-header":!H()}),()=>h("workflows.event-history")],r),l(y,U),he(),W()}var Yo=B("<!> <!>",1);function ra(y,t){ke(t,!1);const[o,W]=Ae(),u=()=>K(Ke,"$page",o),a=u().params.workflow;Ee();var s=Yo(),n=ne(s);const f=r(()=>`${h("workflows.workflow-history")} | ${a}`);gr(n,{get title(){return e(f)},get url(){return u().url.href}});var _=i(n,2);qo(_,{}),l(y,s),he(),W()}export{ra as component};
