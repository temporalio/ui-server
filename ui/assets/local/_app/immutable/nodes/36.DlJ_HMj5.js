import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as ke,b as he,g as e,o as r,l as I,a as Ce,t as B,f as ne,i as $,r as k,c as i,e as l,s as v,m as p,ak as te,L as se,n as ge,k as ce,j as M,h as Me,O as Re,aP as ir,q as Ht,ac as pe,d as lr,af as cr}from"../chunks/kQSYtCfc.js";import{i as Ee,s as Ze}from"../chunks/mtgEvp4k.js";import{a as K,s as Ie,b as _e,m as dr,p as z,l as mt}from"../chunks/BLseHJlf.js";import{p as Ke}from"../chunks/CCUe2pQz.js";import{P as vr}from"../chunks/BW5xTiVz.js";import{t as h}from"../chunks/BXv1jDVW.js";import{s as L,e as pt}from"../chunks/DFbJB1Uf.js";import{i as J}from"../chunks/CpVHIMM-.js";import{s as Qe,a as ve,d as ur}from"../chunks/BWHJ-dez.js";import{b as fr}from"../chunks/DfcffXfF.js";import{E as gr,C as it,L as Je,T as rt,D as _t,t as mr,g as pr}from"../chunks/DjdeAHv2.js";import{T as _r,a as Tt}from"../chunks/B-N0d-98.js";import{W as xr}from"../chunks/BjssVV-q.js";import{T as wr}from"../chunks/DzaPGj8A.js";import{b as Bt,d as Ct,a as kr,e as st,f as xt,h as tt,i as Ve,c as Be,p as at,j as hr,k as Ft,m as jt,g as $r}from"../chunks/9an0iubq.js";import{w as wt}from"../chunks/BQnEew7C.js";import{e as nt,i as kt}from"../chunks/BGqzo1gH.js";import{w as yr,a as br,o as Tr,g as zt}from"../chunks/CJGTewo-.js";import{C as ct}from"../chunks/BgVjny6e.js";import{I as Xe}from"../chunks/CMCPNPYc.js";import{M as Er}from"../chunks/B24m_iAD.js";import{c as Pr,d as Ar,b as dt}from"../chunks/CoGJxacb.js";import{M as Ir}from"../chunks/D7nSTjjE.js";import{Z as Rt,k as Et,Q as Lt,v as Ot,n as Hr,_ as qt,$ as Wr}from"../chunks/DPZf26_M.js";import{a as Sr,b as Qt,d as Jt,f as Cr,c as Pt}from"../chunks/D2ADTRFi.js";import{t as Fr}from"../chunks/DygpC1-0.js";import{i as jr}from"../chunks/CvWs5cMV.js";import{k as Wt}from"../chunks/s0WXrCnP.js";import{b as Xt}from"../chunks/C40_sF3X.js";import{f as qe,t as ht,r as zr}from"../chunks/BD1pGni1.js";import{i as Yt}from"../chunks/Dzb719w0.js";import{q as ft,l as Zt}from"../chunks/D1mJS6mY.js";import{b as Rr,g as Lr,d as Or,c as vt}from"../chunks/KpsL4jB4.js";import{W as Mr}from"../chunks/DgxkbWg0.js";import{B as Gr}from"../chunks/Csdr1G1k.js";import{a as Dr}from"../chunks/rA5XHaV_.js";import{g as Kt}from"../chunks/N7hxYonn.js";import{f as Ur,b as Nr}from"../chunks/CSTpg51l.js";import{v as Vr}from"../chunks/r1zKy0qM.js";import{p as Mt}from"../chunks/B6YIk4_O.js";import{M as Br}from"../chunks/JiTvuWH-.js";import{a as er}from"../chunks/DHTi-o2-.js";import{b as qr}from"../chunks/DK-i4VCv.js";import{A as St}from"../chunks/Ct3nl5pm.js";import{L as tr}from"../chunks/BEi1tdtZ.js";import{s as Qr}from"../chunks/ByTIZu23.js";import{g as Jr,a as Xr,b as Yr,c as Zr}from"../chunks/vNuyfdo4.js";import{A as rr}from"../chunks/DNtbsfFB.js";import{C as gt}from"../chunks/D9ICQA-r.js";import{B as Oe}from"../chunks/CycUBoIJ.js";import{M as Kr}from"../chunks/sJYVMbZm.js";import{R as en,a as At}from"../chunks/Clmulh9k.js";import{c as tn,d as rn}from"../chunks/CmWJDfIo.js";import{g as nn,b as on,a as sn}from"../chunks/DoXNP8xe.js";import{s as It}from"../chunks/BDfAQ6r3.js";import{i as an}from"../chunks/BNC96Orv.js";import{c as Gt,a as Dt}from"../chunks/DKzLdZAB.js";import{I as Ut}from"../chunks/yq6Qh5Of.js";import{t as ln,a as cn}from"../chunks/CZ5ypT75.js";import{T as dn,a as ut}from"../chunks/L2TLjjJr.js";import{T as vn}from"../chunks/Iq7FwrNY.js";function un(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Bt,"$filteredEventHistory",o),a=()=>K(Ct,"$decodeEventHistory",o);Ee(),xr(b,{get events(){return u()},decode:n=>{const f=r(()=>h("events.decode-event-history"));wr(n,{get label(){return e(f)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return dr(),a()},set checked(_){_e(Ct,_)},$$legacy:!0})},$$slots:{decode:!0}}),he(),W()}var fn=B("<!> <!> <!>",1),gn=B('<div class="border-t border-subtle px-4"><!></div>'),mn=B('<div data-testid="event-summary-table"><!></div>'),pn=B('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function _n(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(wt,"$workflowRun",o),a=()=>K(st,"$eventFilterSort",o),s=()=>K(xt,"$fullEventHistory",o),n=()=>K(tt,"$eventViewType",o),f=()=>K(Ke,"$page",o),_=p(),g=p(),H=p(),T=p(),d=p(),c=p(),y=p();var C=p(),P=p(),x=p(),m=p();let G=z(t,"history",8),D=z(t,"groups",8),X=z(t,"minimized",8,!0);const R=()=>{_e(tt,"feed")},U=()=>{_e(tt,"compact")},j=()=>{_e(tt,"json")};I(()=>(e(_),u()),()=>{(ie=>v(_,ie.workflow))(u())}),I(()=>a(),()=>{v(g,a()==="descending")}),I(()=>s(),()=>{v(H,!s().length)}),I(()=>n(),()=>{v(T,n()==="compact")}),I(()=>(te(P),te(C),f(),te(m),te(x)),()=>{_e(kr,!(v(P,v(C,f().url)===null||te(C)===void 0?void 0:te(C).searchParams)===null||te(P)===void 0)&&te(P).get("category")?v(m,v(x,f().url)===null||te(x)===void 0?void 0:te(x).searchParams)===null||te(m)===void 0?void 0:te(m).get("category").split(","):void 0)}),I(()=>e(_),()=>{v(d,e(_).pendingActivities)}),I(()=>e(_),()=>{v(c,e(_).pendingNexusOperations)}),I(()=>(e(T),se(D()),e(g),e(c),e(d),se(G())),()=>{v(y,e(T)?D():e(g)?[...e(c),...e(d),...G()]:[...G(),...e(d),...e(c)])}),Ce(),Ee();var O=pn(),w=ne(O),S=$(w),N=$(S);_r(N,{children:(ie,V)=>{var Y=fn(),A=ne(Y);const E=r(()=>n()==="feed");Tt(A,{get active(){return e(E)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:R},children:(xe,Pe)=>{ge();var fe=ce("All");l(xe,fe)},$$slots:{default:!0}});var q=i(A,2);const re=r(()=>n()==="compact");Tt(q,{get active(){return e(re)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:U},children:(xe,Pe)=>{ge();var fe=ce("Compact");l(xe,fe)},$$slots:{default:!0}});var ae=i(q,2);const ye=r(()=>n()==="json");Tt(ae,{get active(){return e(ye)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:j},children:(xe,Pe)=>{ge();var fe=ce("JSON");l(xe,fe)},$$slots:{default:!0}}),l(ie,Y)},$$slots:{default:!0}}),k(S),k(w);var ue=i(w,2);{var $e=ie=>{var V=gn(),Y=$(V);un(Y,{}),k(V),l(ie,V)},de=ie=>{var V=mn(),Y=$(V);gr(Y,{get updating(){return e(H)},get items(){return e(y)},get groups(){return D()},get compact(){return e(T)},get minimized(){return X()}}),k(V),l(ie,V)};J(ue,ie=>{n()==="json"?ie($e):ie(de,!1)})}l(b,O),he(),W()}const xn=b=>b==null?void 0:b.nexus;var wn=B('<span class="hidden text-sm md:block"> </span>'),kn=B('<div slot="leading"><!></div>'),hn=B("<!> <!> <!> <!> <!>",1),$n=B("<!> <!>",1);function yn(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Fr,"$temporalVersion",o),a=()=>K(Ke,"$page",o),s=()=>K(Ve,"$eventTypeFilter",o),n=()=>K(Be,"$eventStatusFilter",o),f=()=>K(tt,"$eventViewType",o),_=p(),g=p(),H=p();var T=p();let d=z(t,"compact",8,!1),c=z(t,"minimized",8,!0),y=yr(!1);const C=({value:P})=>{Sr(),_e(Ve,s().some(x=>x===P)?s().filter(x=>x!==P):[...s(),P])};I(()=>(se(d()),Et),()=>{v(_,d()?Rt.map(P=>P.value):Et.map(P=>P.value))}),I(()=>(se(d()),it),()=>{v(g,[...(d()?Rt:Et).map(P=>({...P,label:h(P.label),icon:it[P.value],description:h(P.description)}))])}),I(()=>(u(),e(g)),()=>{jr("1.21.0",u())&&v(g,e(g).filter(({value:P})=>P!=="update"))}),I(()=>(te(T),a(),e(g)),()=>{xn(v(T,a().data.systemInfo)===null||te(T)===void 0?void 0:te(T).capabilities)||v(g,e(g).filter(({value:P})=>P!=="nexus"))}),I(()=>(s(),e(_)),()=>{v(H,s().length<e(_).length)}),Ce(),Ee(),Pr(b,{open:y,children:(P,x)=>{var m=$n(),G=ne(m);Er(G,{controls:"status-menu",size:"sm",children:(R,U)=>{var j=wn(),O=$(j,!0);k(j),M(w=>L(O,w),[()=>h("common.filter")],r),l(R,j)},$$slots:{default:!0,leading:(R,U)=>{var j=kn();let O;var w=$(j);const S=r(()=>e(H)&&"pt-0.5 text-white");Xe(w,{name:"filter",get class(){return e(S)}}),k(j),M(N=>O=Qe(j,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,O,N),[()=>({"bg-interactive":e(H)})],r),l(R,j)}}});var D=i(G,2);const X=r(()=>c()?"top-right":"right");Ar(D,{id:"event-type-menu",keepOpen:!0,get position(){return e(X)},class:"w-[220px] md:w-[360px]",children:(R,U)=>{var j=hn(),O=ne(j);const w=r(()=>h("common.all"));dt(O,{get"data-testid"(){return e(w)},$$events:{click:()=>{_e(Ve,e(_)),_e(Be,!1)}},children:(V,Y)=>{ge();var A=ce();M(E=>L(A,E),[()=>h("common.all")],r),l(V,A)},$$slots:{default:!0,leading:(V,Y)=>{const A=r(()=>!n()&&s().length===e(_).length),E=r(()=>h("common.all"));ct(V,{slot:"leading",get checked(){return e(A)},get label(){return e(E)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{_e(Ve,e(_)),_e(Be,!1)}}})}}});var S=i(O,2);{var N=V=>{const Y=r(()=>h("common.pending-and-failed")),A=r(()=>h("common.pending-and-failed-description"));dt(V,{get"data-testid"(){return e(Y)},get description(){return e(A)},class:"items-start",$$events:{click:()=>{_e(Ve,e(_)),_e(Be,!n())}},children:(E,q)=>{ge();var re=ce();M(ae=>L(re,ae),[()=>h("common.pending-and-failed")],r),l(E,re)},$$slots:{default:!0,leading:(E,q)=>{const re=r(()=>h("common.all"));ct(E,{slot:"leading",get checked(){return n()},get label(){return e(re)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{_e(Ve,e(_)),_e(Be,!n())}}})}}})};J(S,V=>{f()!=="json"&&V(N)})}var ue=i(S,2);const $e=r(()=>h("common.none"));dt(ue,{get"data-testid"(){return e($e)},$$events:{click:()=>{_e(Ve,[]),_e(Be,!1)}},children:(V,Y)=>{ge();var A=ce();M(E=>L(A,E),[()=>h("common.none")],r),l(V,A)},$$slots:{default:!0,leading:(V,Y)=>{const A=r(()=>!n()&&!s().length),E=r(()=>h("common.none"));ct(V,{slot:"leading",get checked(){return e(A)},get label(){return e(E)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{_e(Ve,[]),_e(Be,!1)}}})}}});var de=i(ue,2);Ir(de);var ie=i(de,2);nt(ie,1,()=>e(g),kt,(V,Y)=>{dt(V,{get"data-testid"(){return e(Y).label},get description(){return e(Y).description},class:"items-start",$$events:{click:()=>{C(e(Y))}},children:(A,E)=>{ge();var q=ce();M(()=>L(q,e(Y).label)),l(A,q)},$$slots:{default:!0,leading:(A,E)=>{const q=r(()=>s().some(re=>re===e(Y).value));ct(A,{slot:"leading",get checked(){return e(q)},get label(){return e(Y).label},labelHidden:!0,class:"mt-px",$$events:{click:()=>C(e(Y))}})}}})}),l(R,j)},$$slots:{default:!0}}),l(P,m)},$$slots:{default:!0}}),he(),W()}function bn(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(at,"$pauseLiveUpdates",o),a=p(),s=p();let n=z(t,"workflow",8),f=z(t,"startTime",8);const _=()=>{const y=new Date;return y.setSeconds(y.getSeconds()+1),y};let g;const H=y=>{y&&(clearInterval(g),g=null)},T=y=>{y?(clearInterval(g),g=null):!g&&n().isRunning&&(g=setInterval(()=>{v(a,_())},1e3))};br(()=>{clearInterval(g),g=null,_e(at,!1)}),I(()=>se(n()),()=>{v(a,(n()===null||n()===void 0?void 0:n().endTime)||_())}),I(()=>(se(f()),e(a)),()=>{v(s,ft({start:f(),end:e(a),onlyUnderSecond:!1}))}),I(()=>se(n()),()=>{H(n().endTime)}),I(()=>u(),()=>{T(u())}),Ce(),Ee();var d=Me(),c=ne(d);Ze(c,t,"default",{get endTime(){return e(a)},get duration(){return e(s)}},null),l(b,d),he(),W()}var Tn=B("<div><!></div>");function En(b,t){const o=mt(t,["children","$$slots","$$events","$$legacy"]),W=mt(o,["namespace","workflowId","runId","viewportHeight","onLoad"]);ke(t,!1);let u=z(t,"namespace",8),a=z(t,"workflowId",8),s=z(t,"runId",8,""),n=z(t,"viewportHeight",8,360),f=z(t,"onLoad",8,()=>{});const _=async()=>{const[d,c]=await Promise.all([Vr({namespace:u(),workflowId:a(),runId:s()}),Ur({namespace:u(),workflowId:a(),runId:s()})]);return{workflow:d.workflow,history:c}},g=(d,c)=>{var y;f()();const C=(y=d==null?void 0:d.pendingActivities)!==null&&y!==void 0?y:[];return Kt(c,"ascending",C)};Ee();var H=Me(),T=ne(H);Dr(T,_,null,(d,c)=>{var y=r(()=>{var{workflow:D,history:X}=e(c);return{workflow:D,history:X}}),C=r(()=>e(y).workflow),P=r(()=>e(y).history),x=Tn(),m=$(x);const G=r(()=>g(e(C),e(P)));nr(m,{get viewportHeight(){return n()},get workflow(){return e(C)},get groups(){return e(G)},readOnly:!0}),k(x),M(()=>Qe(x,1,`cursor-pointer overflow-auto ${W.class??""}`)),l(d,x)}),l(b,H),he()}var Pn=B('<div class="flex items-center gap-1"><!> </div>'),An=B(" <!>",1),In=B('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),Hn=Re('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function Wn(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Ke,"$page",o),a=p(),s=p(),n=p(),f=p(),_=p(),g=p(),H=p();var T=p(),d=p();let c=z(t,"group",8),y=z(t,"canvasWidth",8),C=z(t,"x",8,0),P=z(t,"y",8),x=p();const m=E=>{_e(Jt,E)},G=async()=>{await ir(),v(a,e(x))};I(()=>e(x),()=>{v(a,e(x)||0)}),I(()=>e(a),()=>{m(e(a)||0)}),I(()=>se(c()),()=>{v(s,(c()===null||c()===void 0?void 0:c().finalClassification)||(c()===null||c()===void 0?void 0:c().classification))}),I(()=>(e(n),u()),()=>{(E=>v(n,E.namespace))(u().params)}),I(()=>se(y()),()=>{v(f,y())}),I(()=>se(c()),()=>{v(_,c().displayName)}),I(()=>(se(c()),Lt),()=>{v(g,c()&&c().eventList.find(Lt))}),I(()=>(te(T),se(c()),te(d)),()=>{v(H,Zt({start:v(T,c()===null||c()===void 0?void 0:c().initialEvent)===null||te(T)===void 0?void 0:te(T).eventTime,end:v(d,c()===null||c()===void 0?void 0:c().lastEvent)===null||te(d)===void 0?void 0:te(d).eventTime,includeMilliseconds:!0}))}),I(()=>(se(c()),h),()=>{!(c()===null||c()===void 0)&&c().pendingActivity&&(c().pendingActivity.paused?v(s,h("workflows.paused")):c().pendingActivity.attempt>1?v(s,h("events.event-classification.retrying")):v(s,h("events.event-classification.pending")))}),Ce(),Ee();var D=Hn(),X=$(D),R=$(X),U=$(R),j=$(U),O=$(j);{var w=E=>{Mr(E,{get status(){return e(s)}})};J(O,E=>{e(s)&&E(w)})}var S=i(O),N=i(S);{var ue=E=>{var q=Pn(),re=$(q);Xe(re,{name:"clock"});var ae=i(re);k(q),M(()=>L(ae,` ${e(H)??""}`)),l(E,q)};J(N,E=>{e(H)&&E(ue)})}k(j);var $e=i(j,2),de=$($e);Gr(de,{variant:"ghost",size:"xs",$$events:{click:()=>Qt(c())},children:(E,q)=>{ge();var re=An(),ae=ne(re),ye=i(ae);Xe(ye,{name:"close"}),M(xe=>L(ae,`${xe??""} `),[()=>h("common.close")],r),l(E,re)},$$slots:{default:!0}}),k($e),k(U);var ie=i(U,2),V=$(ie);Rr(V,{get group(){return c()},get event(){return c().initialEvent}}),k(ie);var Y=i(ie,2);{var A=E=>{var q=In(),re=i($(q),2);Wt(re,()=>c().eventList.length,ae=>{En(ae,{get namespace(){return e(n)},get workflowId(){return e(g).attributes.workflowExecution.workflowId},get runId(){return e(g).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:G})}),k(q),l(E,q)};J(Y,E=>{e(g)&&E(A)})}k(R),k(X),k(D),M(()=>{ve(X,"x",C()),ve(X,"y",P()),ve(X,"width",e(f)),ve(X,"height",e(a)),L(S,` ${e(_)??""} `)}),Xt(R,"offsetHeight",E=>v(x,E)),l(b,D),he(),W()}var Sn=Re('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),Cn=Re("<!><!>",1),Fn=Re("<!><!>",1);function jn(b,t){ke(t,!1);const o=p(),W=p();let u=z(t,"x1",8,0),a=z(t,"x2",8,1e3),s=z(t,"timelineHeight",8,1e3),n=z(t,"startTime",8),f=z(t,"duration",8);const{radius:_}=rt,g=20;I(()=>(se(a()),se(u())),()=>{v(o,a()-u())}),I(()=>e(o),()=>{v(W,e(o)/g)}),Ce(),Ee();var H=Fn(),T=ne(H);const d=r(()=>[u(),s()]),c=r(()=>[u()+e(o),s()]);Je(T,{strokeWidth:_/2,get startPoint(){return e(d)},get endPoint(){return e(c)}});var y=i(T);nt(y,1,()=>Array(g),kt,(C,P,x)=>{var m=Cn();const G=r(()=>u()+x*e(W)),D=r(()=>s()+_*2);var X=ne(m);{var R=O=>{const w=r(()=>[e(G),0]),S=r(()=>[e(G),s()]);Je(O,{strokeWidth:.5,get startPoint(){return e(w)},get endPoint(){return e(S)}})};J(X,O=>{x!==0&&O(R)})}var U=i(X);{var j=O=>{var w=Sn(),S=$(w,!0);k(w),M(N=>{ve(w,"transform",`rotate(90, ${e(G)??""}, ${e(D)??""})`),ve(w,"x",e(G)-_),ve(w,"y",e(D)),L(S,N)},[()=>Zt({start:n(),end:new Date(new Date(n().toString()).getTime()+f()/g*x),includeMilliseconds:f()/g<1e3})],r),l(O,w)};J(U,O=>{x!==0&&O(j)})}l(C,m)}),l(b,H),he()}var zn=Re("<text><!></text>"),Rn=Re("<!><!><!>",1);function Ln(b,t){ke(t,!1);const o=p(),W=p(),u=p(),a=p(),s=p(),n=p();var f=p();let _=z(t,"point",24,()=>[0,0]),g=z(t,"category",8,void 0),H=z(t,"status",8,"none"),T=z(t,"fontSize",8,"13px"),d=z(t,"fontWeight",8,"400"),c=z(t,"textAnchor",8,"start"),y=z(t,"backdrop",8,!1),C=z(t,"backdropHeight",8,0),P=z(t,"icon",8,void 0),x=z(t,"config",8,void 0),m=z(t,"label",8,!1),G=p();I(()=>(e(o),e(W),se(_())),()=>{(w=>(v(o,w[0]),v(W,w[1])))(_())}),I(()=>(se(P()),se(x())),()=>{v(u,P()&&x())}),I(()=>(te(f),e(G)),()=>{v(a,(v(f,e(G)===null||e(G)===void 0?void 0:e(G).getBBox())===null||te(f)===void 0?void 0:te(f).width)||0)}),I(()=>(e(u),e(a)),()=>{v(s,e(u)?e(a)+36:e(a)+12)}),I(()=>(e(u),se(c()),e(o),se(x())),()=>{v(n,e(u)&&c()==="start"?e(o)+x().radius*2:e(o))}),Ce(),Ee();var D=Rn(),X=ne(D);{var R=w=>{const S=r(()=>[e(o)-C(),e(W)]),N=r(()=>[e(o)+e(s),e(W)]);Je(w,{get startPoint(){return e(S)},get endPoint(){return e(N)},get status(){return H()},get strokeWidth(){return C()}})};J(X,w=>{y()&&w(R)})}var U=i(X);{var j=w=>{const S=r(()=>c()==="end"?e(o)-e(a)-C():e(o)),N=r(()=>e(W)-8),ue=r(()=>y()?"text-white":"text-primary");Xe(w,{get name(){return P()},get x(){return e(S)},get y(){return e(N)},get class(){return e(ue)}})};J(U,w=>{e(u)&&w(j)})}var O=i(U);Wt(O,()=>e(n),w=>{var S=zn();let N;var ue=$(S);Ze(ue,t,"default",{},null),k(S),qr(S,$e=>v(G,$e),()=>e(G)),M($e=>{N=Qe(S,0,`cursor-pointer select-none outline-none ${g()??""} text-primary`,"svelte-1kes4n8",N,$e),ve(S,"x",e(n)),ve(S,"y",e(W)+1),ve(S,"font-size",T()),ve(S,"font-weight",d()),ve(S,"text-anchor",c())},[()=>({label:m(),backdrop:y()})],r),l(w,S)}),l(b,D),he()}var On=Re('<rect fill="transparent" pointer-events="all"></rect>'),Mn=Re("<!><!>",1),Gn=Re("<!><!><!><!>",1),Dn=Re('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"><!><!></g>');function Un(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(er,"$authUser",o),a=p(),s=p(),n=p(),f=p(),_=p(),g=p(),H=p(),T=p(),d=p(),c=p(),y=p();var C=p(),P=p();let x=z(t,"y",8,0),m=z(t,"group",12),G=z(t,"activeGroups",24,()=>[]),D=z(t,"startTime",8),X=z(t,"endTime",8),R=z(t,"canvasWidth",8),U=z(t,"active",12,!0),j=z(t,"readOnly",8,!1);const{height:O,gutter:w,radius:S}=rt;let N=p();Tr(async()=>{const A=Lr(m());if(A)try{v(N,await Or(A,{namespace:Mt.params.namespace,settings:Mt.data.settings,accessToken:u().accessToken})),e(N)&&m(m().decodedLocalActivity=e(N),!0)}catch(E){console.warn("Failed to decode local activity:",E)}});const ue=(A,E,q)=>{const re=ft({start:D(),end:A,onlyUnderSecond:!1}),ae=m().eventList.map(Q=>{const Z=ft({start:D(),end:Q.eventTime,onlyUnderSecond:!1})/re;return Math.round(Z*E)+w});if(e(n)){const F=ft({start:D(),end:e(n),onlyUnderSecond:!1})/re,Z=Math.round(F*E)+w;ae.push(Z)}const{textAnchor:ye,textIndex:xe,textPosition:Pe,backdrop:fe}=mr(ae,q,E,m().isPending,rt);return{points:ae,textAnchor:ye,textIndex:xe,textPosition:Pe,backdrop:fe}},$e=()=>{j()||Qt(m())};I(()=>se(R()),()=>{v(a,R()-2*w)}),I(()=>(se(G()),se(m())),()=>{U(!G().length||G().includes(m().id))}),I(()=>se(m()),()=>{v(s,m()===null||m()===void 0?void 0:m().pendingActivity)}),I(()=>(e(s),te(C)),()=>{v(n,e(s)&&(v(C,e(s).pauseInfo)===null||te(C)===void 0?void 0:te(C).pauseTime))}),I(()=>(e(f),e(_),e(g),e(H),e(T),se(X()),e(a),se(x())),()=>{(A=>(v(f,A.points),v(_,A.textAnchor),v(g,A.textIndex),v(H,A.textPosition),v(T,A.backdrop)))(ue(X(),e(a),x()))}),I(()=>(se(m()),Ot),()=>{v(d,m().eventList.find(Ot))}),I(()=>(e(d),te(P)),()=>{v(c,e(d)&&(v(P,e(d).attributes)===null||te(P)===void 0?void 0:te(P).attempt)>1)}),I(()=>(se(m()),e(n)),()=>{v(y,m().isPending||!!e(n))}),Ce(),Ee();var de=Dn();ve(de,"height",O);var ie=$(de);{var V=A=>{var E=On();const q=r(()=>e(n)?e(f)[1]-e(f)[0]:R()-2*w);ve(E,"height",O),M(()=>{ve(E,"y",x()-O/2),ve(E,"x",e(f)[0]),ve(E,"width",e(q))}),l(A,E)};J(ie,A=>{e(y)&&A(V)})}var Y=i(ie);nt(Y,1,()=>e(f),kt,(A,E,q)=>{var re=Gn();const ae=r(()=>e(f)[q+1]),ye=r(()=>e(g)===q);var xe=ne(re);{var Pe=me=>{const Ae=r(()=>[e(E),x()]),Se=r(()=>[e(ae),x()]),Fe=r(()=>!!e(n)),Te=r(()=>!!e(n)),He=r(()=>q===0&&m().lastEvent.classification==="Completed");Je(me,{get startPoint(){return e(Ae)},get endPoint(){return e(Se)},get category(){return m().category},get classification(){return m().lastEvent.classification},get pending(){return e(Fe)},get paused(){return e(Te)},strokeWidth:S*2,get retried(){return e(c)},get scheduling(){return e(He)}})};J(xe,me=>{e(ae)&&me(Pe)})}var fe=i(xe);{var Q=me=>{var Ae=Mn(),Se=ne(Ae);const Fe=r(()=>[e(E),x()]),Te=r(()=>[R()-w,x()]),He=r(()=>e(s)?e(s).attempt>1?"retry":"pending":m().category),we=r(()=>!!e(n));Je(Se,{get startPoint(){return e(Fe)},get endPoint(){return e(Te)},get category(){return e(He)},get classification(){return m().lastEvent.classification},pending:!0,get paused(){return e(we)},strokeWidth:S*2});var je=i(Se);const We=r(()=>[e(E),x()]);_t(je,{get point(){return e(We)},get classification(){return m().lastEvent.classification},icon:"retry",r:S}),l(me,Ae)};J(fe,me=>{!e(ae)&&m().isPending&&!e(n)&&me(Q)})}var F=i(fe);{var Z=me=>{const Ae=r(()=>{var Te,He;return(He=(Te=m())==null?void 0:Te.userMetadata)==null?void 0:He.summary}),Se=r(()=>{var Te;return Hr(m().initialEvent)?(Te=m())==null?void 0:Te.displayName:""}),Fe=r(()=>{var Te;return e(N)?h("events.category.local-activity"):(Te=m())==null?void 0:Te.displayName});Br(me,{get value(){return e(Ae)},get prefix(){return e(Se)},get fallback(){return e(Fe)},children:Ht,$$slots:{default:(Te,He)=>{const we=r(()=>He.decodedValue),je=r(()=>e(s)&&!e(s).paused||e(c)?"retry":void 0);Ln(Te,{get point(){return e(H)},get textAnchor(){return e(_)},get backdrop(){return e(T)},backdropHeight:S*2,config:rt,get icon(){return e(je)},children:(We,Ge)=>{var Le=Me(),Ye=ne(Le);{var $t=De=>{var ze=ce();M(Ue=>L(ze,`${Ue??""}
            ${e(s).attempt??""} / ${e(s).maximumAttempts||"∞"}
            • 
            ${e(we)??""}`),[()=>h("workflows.attempt")],r),l(De,ze)},yt=(De,ze)=>{{var Ue=Ne=>{var lt=ce();M(()=>L(lt,`${e(d).attributes.attempt??""} • ${e(we)??""}`)),l(Ne,lt)},bt=(Ne,lt)=>{{var sr=et=>{var ot=ce();M(()=>L(ot,e(N).value)),l(et,ot)},ar=et=>{var ot=ce();M(()=>L(ot,e(we))),l(et,ot)};J(Ne,et=>{e(N)?et(sr):et(ar,!1)},lt)}};J(De,Ne=>{e(c)?Ne(Ue):Ne(bt,!1)},ze)}};J(Ye,De=>{e(s)?De($t):De(yt,!1)})}l(We,Le)},$$slots:{default:!0}})}}})};J(F,me=>{e(ye)&&me(Z)})}var oe=i(F);const ee=r(()=>[e(E),x()]),be=r(()=>{var me;return(me=m().eventList[q])==null?void 0:me.classification}),le=r(()=>e(n)&&q!==0?"pause":e(N)?it["local-activity"]:it[m().category]);_t(oe,{get point(){return e(ee)},get classification(){return e(be)},get icon(){return e(le)},r:S}),l(A,re)}),k(de),pt("click",de,$e),pt("keypress",de,$e),l(b,de),he(),W()}var Nn=Re('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function Vn(b,t){ke(t,!1);const o=p(),W=p();let u=z(t,"workflow",8),a=z(t,"length",8),s=z(t,"y",8);const{radius:n,height:f,gutter:_}=rt;I(()=>{},()=>{v(o,_)}),I(()=>(e(o),se(a())),()=>{v(W,e(o)+a()-2*_)}),Ce(),Ee();var g=Nn();ve(g,"height",f);var H=$(g);const T=r(()=>[e(o),s()]),d=r(()=>[e(W),s()]),c=r(()=>Yt(u()));Je(H,{get startPoint(){return e(T)},get endPoint(){return e(d)},get classification(){return u().status},strokeWidth:n*2,get pending(){return u().isRunning},get delayed(){return e(c)}});var y=i(H);const C=r(()=>[e(o),s()]);_t(y,{get point(){return e(C)},get classification(){return u().status},r:n});var P=i(y);const x=r(()=>e(o)-n/2),m=r(()=>s()-n/2);Xe(P,{name:"workflow",get x(){return e(x)},get y(){return e(m)},width:n,height:n,strokeWidth:"4",class:"text-black"});var G=i(P);const D=r(()=>[e(W),s()]);_t(G,{get point(){return e(D)},get classification(){return u().status},r:n});var X=i(G);const R=r(()=>e(W)-n/2),U=r(()=>s()-n/2);Xe(X,{name:"workflow",get x(){return e(R)},get y(){return e(U)},width:n,height:n,strokeWidth:"4",class:"text-black"}),k(g),l(b,g),he()}var Bn=Re("<!><!>",1),qn=B('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),Qn=B('<div class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function nr(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Jt,"$activeGroupHeight",o),a=()=>K(Be,"$eventStatusFilter",o),s=()=>K(xt,"$fullEventHistory",o),n=()=>K(Cr,"$activeGroups",o),f=()=>K(st,"$eventFilterSort",o),_=()=>K(ht,"$timeFormat",o),g=p(),H=p(),T=p(),d=p(),c=p(),y=p(),C=p();var P=p(),x=p();let m=z(t,"x",8,0),G=z(t,"y",8,0),D=z(t,"workflow",8),X=z(t,"groups",8),R=z(t,"viewportHeight",8),U=z(t,"readOnly",8,!1),j=z(t,"error",8,!1);const{height:O,gutter:w,radius:S}=rt;let N=p(0),ue=p(0);const $e=V=>{var Y;v(ue,(Y=V==null?void 0:V.target)===null||Y===void 0?void 0:Y.scrollTop)};I(()=>(se(U()),u()),()=>{v(g,U()?0:u())}),I(()=>(se(X()),a()),()=>{v(H,pr(X(),a()))}),I(()=>(te(P),s(),se(D()),te(x)),()=>{v(T,(v(P,s()[0])===null||te(P)===void 0?void 0:te(P).eventTime)<D().executionTime?v(x,s()[0])===null||te(x)===void 0?void 0:te(x).eventTime:D().executionTime)}),I(()=>(se(D()),e(T)),()=>{v(d,!Yt(D())&&e(T)||D().startTime)}),I(()=>(e(H),e(g)),()=>{v(c,Math.max(O*(e(H).length+2),120)+e(g))}),I(()=>e(c),()=>{v(y,e(c)+120)}),I(()=>(n(),f(),e(g)),()=>{v(C,V=>{const Y=n()===null||n()===void 0?void 0:n().filter(A=>f()==="ascending"?parseInt(A)<parseInt(V.id):parseInt(A)>parseInt(V.id));return Y!=null&&Y.length?e(g):0})}),Ce(),Ee();var de=Qn(),ie=$(de);bn(ie,{get workflow(){return D()},get startTime(){return e(d)},children:Ht,$$slots:{default:(V,Y)=>{const A=r(()=>Y.endTime),E=r(()=>Y.duration);var q=qn(),re=ne(q);let ae;var ye=$(re),xe=$(ye),Pe=$(xe,!0);k(xe);var fe=i(xe,2),Q=$(fe,!0);k(fe),k(ye),k(re);var F=i(re,2);let Z;var oe=$(F);const ee=r(()=>[w,e(c)]);Je(oe,{startPoint:[w,0],get endPoint(){return e(ee)},strokeWidth:S/2});var be=i(oe);const le=r(()=>[e(N)-w,0]),me=r(()=>[e(N)-w,e(c)]);Je(be,{get startPoint(){return e(le)},get endPoint(){return e(me)},strokeWidth:S/2});var Ae=i(be);const Se=r(()=>e(N)-w+S/4);jn(Ae,{x1:w-S/4,get x2(){return e(Se)},get timelineHeight(){return e(c)},get startTime(){return e(d)},get duration(){return e(E)}});var Fe=i(Ae);Vn(Fe,{get workflow(){return D()},y:O,get length(){return e(N)}});var Te=i(Fe);nt(Te,3,()=>e(H),He=>He.id,(He,we,je,We)=>{var Ge=Bn();const Le=r(()=>(e(je)+2)*O+e(C)(e(we)));var Ye=ne(Ge);{var $t=ze=>{var Ue=Me(),bt=ne(Ue);Wt(bt,()=>e(we).eventList.length,Ne=>{Un(Ne,{get y(){return e(Le)},get group(){return e(we)},get activeGroups(){return n()},get canvasWidth(){return e(N)},get startTime(){return e(d)},get endTime(){return e(A)},get readOnly(){return U()}})}),l(ze,Ue)};J(Ye,ze=>{(!R()||e(Le)>e(ue)-2*O&&e(Le)<e(ue)+R()*O)&&ze($t)})}var yt=i(Ye);{var De=ze=>{const Ue=r(()=>e(Le)+1.33*S);Wn(ze,{get y(){return e(Ue)},get group(){return e(we)},get canvasWidth(){return e(N)}})};J(yt,ze=>{!U()&&n().includes(e(we).id)&&ze(De)})}l(He,Ge)}),k(F),M((He,we,je,We)=>{ae=Qe(re,1,"pointer-events-none sticky top-[120px]",null,ae,He),L(Pe,we),L(Q,je),ve(F,"x",m()),ve(F,"y",G()),ve(F,"viewBox",`0 0 ${e(N)??""} ${e(y)??""}`),ve(F,"height",e(y)),ve(F,"width",e(N)),Z=Qe(F,0,"-mt-4 svelte-ta6k80",null,Z,We)},[()=>({invisible:!!n().length}),()=>qe(e(d),_()),()=>qe(e(A),_()),()=>({error:j()})],r),l(V,q)}}}),k(de),M(()=>ur(de,R()?`max-height: ${R()}px;`:"")),Xt(de,"clientWidth",V=>v(N,V)),pt("scroll",de,$e),l(b,de),he(),W()}var Jn=B('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function Xn(b,t){var o=Jn(),W=$(o);Ze(W,t,"default",{},null),k(o),l(b,o)}var Yn=B("<p> </p> <!>",1),Zn=B("<p> </p> <!>",1),Kn=B('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),eo=B('<div class="w-full text-right text-xs" slot="summary"> </div>'),to=B("<!> <!>",1);function or(b,t){ke(t,!1);let o=z(t,"failure",8,void 0);Ee();var W=to(),u=ne(W);{var a=f=>{const _=r(()=>h("common.failure"));rr(f,{get title(){return e(_)},class:"text-sm",children:(g,H)=>{var T=Kn(),d=$(T),c=$(d,!0);k(d);var y=i(d,2);const C=r(()=>{var R;return((R=o())==null?void 0:R.message)||""}),P=r(()=>h("common.copy-icon-title")),x=r(()=>h("common.copy-success-icon-title"));gt(y,{get content(){return e(C)},language:"text",get copyIconTitle(){return e(P)},get copySuccessIconTitle(){return e(x)}});var m=i(y,2);{var G=R=>{var U=Yn(),j=ne(U),O=$(j,!0);k(j);var w=i(j,2);const S=r(()=>h("common.copy-icon-title")),N=r(()=>h("common.copy-success-icon-title"));gt(w,{get content(){return o().source},language:"text",get copyIconTitle(){return e(S)},get copySuccessIconTitle(){return e(N)}}),M(ue=>L(O,ue),[()=>h("common.source")],r),l(R,U)};J(m,R=>{var U;(U=o())!=null&&U.source&&R(G)})}var D=i(m,2);{var X=R=>{var U=Zn(),j=ne(U),O=$(j,!0);k(j);var w=i(j,2);const S=r(()=>h("common.copy-icon-title")),N=r(()=>h("common.copy-success-icon-title"));gt(w,{get content(){return o().stackTrace},language:"text",get copyIconTitle(){return e(S)},get copySuccessIconTitle(){return e(N)}}),M(ue=>L(O,ue),[()=>h("common.stack-trace")],r),l(R,U)};J(D,R=>{var U;(U=o())!=null&&U.stackTrace&&R(X)})}k(T),M(R=>L(c,R),[()=>h("common.message")],r),l(g,T)},$$slots:{default:!0,summary:(g,H)=>{var T=eo(),d=$(T,!0);k(T),M(()=>{var c;return L(d,(c=o())==null?void 0:c.message)}),l(g,T)}}})};J(u,f=>{o()&&f(a)})}var s=i(u,2);{var n=f=>{var _=Me(),g=ne(_);or(g,{get failure(){return o().cause}}),l(f,_)};J(s,f=>{var _;(_=o())!=null&&_.cause&&f(n)})}l(b,W),he()}var ro=B('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function no(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(ht,"$timeFormat",o);let a=z(t,"pendingTask",8,void 0);Ee();const s=r(()=>h("workflows.pending-workflow-task"));rr(b,{get title(){return e(s)},children:(n,f)=>{var _=ro(),g=$(_),H=$(g),T=i(H);Oe(T,{children:(j,O)=>{ge();var w=ce();M(()=>L(w,a().state)),l(j,w)},$$slots:{default:!0}}),k(g);var d=i(g,2),c=$(d),y=i(c);Oe(y,{children:(j,O)=>{ge();var w=ce();M(()=>L(w,a().attempt)),l(j,w)},$$slots:{default:!0}}),k(d);var C=i(d,2),P=$(C),x=i(P);Oe(x,{children:(j,O)=>{ge();var w=ce();M(S=>L(w,S),[()=>qe(a().originalScheduledTime,u())],r),l(j,w)},$$slots:{default:!0}}),k(C);var m=i(C,2),G=$(m),D=i(G);Oe(D,{children:(j,O)=>{ge();var w=ce();M(S=>L(w,S),[()=>qe(a().scheduledTime,u())],r),l(j,w)},$$slots:{default:!0}}),k(m);var X=i(m,2),R=$(X),U=i(R);Oe(U,{children:(j,O)=>{ge();var w=ce();M(S=>L(w,S),[()=>qe(a().startedTime,u())],r),l(j,w)},$$slots:{default:!0}}),k(X),k(_),M((j,O,w,S,N)=>{L(H,`${j??""} `),L(c,`${O??""} `),L(P,`${w??""} `),L(G,`${S??""} `),L(R,`${N??""} `)},[()=>h("common.state"),()=>h("common.attempt"),()=>h("workflows.original-scheduled-time"),()=>h("workflows.scheduled-time"),()=>h("workflows.started-time")],r),l(n,_)},$$slots:{default:!0}}),he(),W()}var oo=B("<p> <!>.</p>"),so=B('<p><span class="mr-2 text-secondary">Timeout Type</span> </p>'),ao=B("<!> <!>",1),io=B('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> </div> <div class="flex flex-col gap-2 bg-primary p-4"><!> <!></div></div>',1);function lo(b,t){ke(t,!0);const[o,W]=Ie(),u=()=>K(ht,"$timeFormat",o),a=()=>K(zr,"$relativeTime",o);var s,n;let f=pe(()=>Jr(t.error)),_=pe(()=>Xr(t.error)&&((s=t.error.attributes)===null||s===void 0?void 0:s.failure)),g=pe(()=>Yr(t.error)&&((n=t.error.attributes)===null||n===void 0?void 0:n.timeoutType));var H=Me(),T=ne(H);{var d=c=>{const y=pe(()=>h(`typed-errors.${e(f)}.title`));St(c,{icon:"warning",intent:"warning",get title(){return e(y)},children:(C,P)=>{var x=io(),m=ne(x),G=$(m,!0);k(m);var D=i(m,2);{var X=A=>{var E=oo(),q=$(E,!0),re=i(q);const ae=pe(()=>h(`typed-errors.${e(f)}.link`));tr(re,{newTab:!0,get href(){return e(ae)},children:(ye,xe)=>{ge();var Pe=ce();M(fe=>L(Pe,fe),[()=>h(`typed-errors.${e(f)}.action`)]),l(ye,Pe)},$$slots:{default:!0}}),ge(),k(E),M(ye=>L(q,ye),[()=>h("typed-errors.link-preface")]),l(A,E)};J(D,A=>{(e(f)==="NonDeterministicError"||e(f)==="BadSearchAttributes")&&A(X)})}var R=i(D,2),U=$(R),j=$(U),O=$(j),w=i(O);Xe(w,{get name(){return it[t.error.category]}});var S=i(w,2),N=$(S,!0);k(S),k(j);var ue=i(j);k(U);var $e=i(U,2),de=$($e);{var ie=A=>{var E=so(),q=i($(E));k(E),M(()=>L(q,` ${e(g)??""}`)),l(A,E)};J(de,A=>{e(g)&&A(ie)})}var V=i(de,2);{var Y=A=>{Xn(A,{children:(E,q)=>{var re=ao(),ae=ne(re);{var ye=fe=>{or(fe,{get failure(){return e(_)}})};J(ae,fe=>{e(_)&&fe(ye)})}var xe=i(ae,2);{var Pe=fe=>{no(fe,{get pendingTask(){return t.pendingTask}})};J(xe,fe=>{t.pendingTask&&fe(Pe)})}l(E,re)},$$slots:{default:!0}})};J(V,A=>{(e(_)||t.pendingTask)&&A(Y)})}k($e),k(R),M((A,E,q)=>{L(G,A),L(O,`${t.error.id??""} `),L(N,E),L(ue,` ${q??""}`)},[()=>h(`typed-errors.${e(f)}.description`),()=>{var A;return Qr((A=t.error)==null?void 0:A.name)},()=>{var A;return qe((A=t.error)==null?void 0:A.eventTime,u(),{relative:a()})}]),l(C,x)},$$slots:{default:!0}})};J(T,c=>{e(f)&&e(f)!=="ResetWorkflow"&&c(d)})}l(b,H),he(),W()}const co=async(b,t,o)=>{const W=nn(t),u=on(t),a=sn(t),s={...t,codec:{...t==null?void 0:t.codec,endpoint:W,passAccessToken:u,includeCredentials:a}},n=!1;try{const f=await tn(b,zt(Ke).params.namespace,s,zt(er).accessToken,o,n);return rn(f,n)}catch{return b}};function Nt(b,t,o){const W=It({events:b},null,2),u=document.createElement("a"),a=new Blob([W],{type:o});u.href=URL.createObjectURL(a),u.download=t,u.click()}const vo=async({namespace:b,workflowId:t,runId:o,settings:W,decodeSetting:u})=>{try{const a=await Nr({namespace:b,workflowId:t,runId:o,sort:"ascending"});if(u==="encoded")Nt(a,`${o}/events.json`,"text/plain");else{const s=[];for(const n of a){const f=await co(n,W,u);s.push(f)}Nt(s,`${o}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var uo=B('<div class="flex items-center space-x-4"><!></div>');function fo(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(hr,"$parameters",o),a=()=>K(an,"$isCloud",o),s=p(),n=p(),{namespace:f,workflowId:_,runId:g}=u();I(()=>Gt,()=>{v(s,Gt({namespace:f,workflow:_,run:g}))}),I(()=>e(s),()=>{v(n,e(s)+".json")}),Ce(),Ee();var H=Me(),T=ne(H);{var d=c=>{var y=uo(),C=$(y);tr(C,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(n)},newTab:!0,"data-testid":"view-raw-event-history",children:(P,x)=>{ge();var m=ce();M(G=>L(m,G),[()=>h("events.view-raw-history")],r),l(P,m)},$$slots:{default:!0}}),k(y),l(c,y)};J(T,c=>{a()||c(d)})}l(b,H),he(),W()}var go=B('<h3 slot="title"> </h3>'),mo=B("<!> <!> <!>",1),po=B('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function _o(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Ke,"$page",o),a=()=>K(Ft,"$downloadEventHistorySetting",o);let s=z(t,"open",12,!1),n=z(t,"namespace",8),f=z(t,"workflowId",8),_=z(t,"runId",8);const g=()=>{s(!1),vo({namespace:n(),workflowId:f(),runId:_(),settings:u().data.settings,decodeSetting:a()})};Ee();const H=r(()=>h("common.download")),T=r(()=>h("common.cancel"));Kr(b,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(H)},get cancelText(){return e(T)},get open(){return s()},set open(d){s(d)},$$events:{confirmModal:()=>g(),cancelModal:()=>s(!1)},$$slots:{title:(d,c)=>{var y=go(),C=$(y,!0);k(y),M(P=>L(C,P),[()=>h("common.download-event-history-json")],r),l(d,y)},content:(d,c)=>{var y=po(),C=$(y);en(C,{group:Ft,name:"decode-setting",class:"h-auto overflow-auto",children:(x,m)=>{var G=mo(),D=ne(G);const X=r(()=>h("events.encoded"));At(D,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(X)}});var R=i(D,2);const U=r(()=>h("events.decoded")),j=r(()=>h("events.decoded-description"));At(R,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(U)},get description(){return e(j)}});var O=i(R,2);const w=r(()=>h("events.readable")),S=r(()=>h("events.readable-description"));At(O,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(w)},get description(){return e(S)}}),l(x,G)},$$slots:{default:!0}});var P=i(C,2);fo(P,{}),k(y),l(d,y)}},$$legacy:!0}),he(),W()}const xo=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],wo=b=>!!b.workflowExecutionStartedEventAttributes,ko=b=>{for(const t of xo)if(b.eventType===t)return!0;return!1},ho=b=>qt(b)?b.attributes.input:Wr(b)?b.attributes.result===null?null:b.attributes.result:b.attributes,$o=b=>{var s;let t,o,W=!1,u,a;for(const n of b)if(wo(n)){u=n;continue}else if(ko(n)){a=n;continue}return u&&(t=It(((s=u==null?void 0:u.workflowExecutionStartedEventAttributes)==null?void 0:s.input)??null)),a&&(W=qt(a),o=It(ho(a))),{input:t,results:o,contAsNew:W}};var yo=B('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function bo(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(xt,"$fullEventHistory",o),a=()=>K(wt,"$workflowRun",o),s=p(),n=p();I(()=>u(),()=>{v(s,$o(u()))}),I(()=>a(),()=>{v(n,a().workflow.isRunning)}),Ce(),Ee();var f=yo(),_=$(f);const g=r(()=>h("workflows.input"));Ut(_,{get title(){return e(g)},get content(){return e(s).input},get isRunning(){return e(n)}});var H=i(_,2);const T=r(()=>h("workflows.result"));Ut(H,{get title(){return e(T)},get content(){return e(s).results},get isRunning(){return e(n)}}),k(f),l(b,f),he(),W()}var To=B('<div class="mb-4"><!></div>');function Eo(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(wt,"$workflowRun",o),a=p(),s=p(),n=p();var f=p();I(()=>(e(a),e(s),u()),()=>{(T=>(v(a,T.workflow),v(s,T.workers)))(u())}),I(()=>(e(a),te(f),e(s)),()=>{v(n,(e(a)===null||e(a)===void 0?void 0:e(a).isRunning)&&!(!(v(f,e(s)===null||e(s)===void 0?void 0:e(s).pollers)===null||te(f)===void 0)&&te(f).length))}),Ce(),Ee();var _=Me(),g=ne(_);{var H=T=>{var d=To(),c=$(d);const y=r(()=>h("workflows.workflow-error-no-workers-title"));St(c,{icon:"warning",intent:"warning",get title(){return e(y)},children:(C,P)=>{ge();var x=ce();M(m=>L(x,m),[()=>{var m;return h("workflows.workflow-error-no-workers-description",{taskQueue:(m=e(a))==null?void 0:m.taskQueue})}],r),l(C,x)},$$slots:{default:!0}}),k(d),ln(1,d,()=>cn,()=>({duration:200,delay:100})),l(T,d)};J(g,T=>{e(n)&&T(H)})}l(b,_),he(),W()}var Po=B('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Ao(b,t){const o=mt(t,["children","$$slots","$$events","$$legacy"]),W=mt(o,["id","open","onToggle","icon"]);ke(t,!1);let u=z(t,"id",24,()=>crypto.randomUUID()),a=z(t,"open",12,!1),s=z(t,"onToggle",8,void 0),n=z(t,"icon",8,void 0);const f=async()=>{s()&&await s()(),a(!a())};Ee();var _=Po(),g=$(_),H=$(g),T=$(H);Ze(T,t,"title",{},null);var d=i(T,2);Ze(d,t,"description",{},null);var c=i(d,2),y=$(c);Ze(y,t,"action",{},null);var C=i(y,2);const P=r(()=>n()?n():a()?"arrow-down":"arrow-right");Xe(C,{get name(){return e(P)}}),k(c),k(H),k(g);var x=i(g,2);let m;var G=$(x);Ze(G,t,"default",{get open(){return a()}},null),k(x),k(_),M(D=>{Qe(_,1,`w-full ${W.class??""}`),ve(g,"id",`${u()??""}-trigger`),ve(g,"aria-expanded",a()),ve(g,"aria-controls",`${u()??""}-content`),ve(x,"id",`${u()??""}-content`),ve(x,"aria-labelledby",`${u()??""}-trigger`),m=Qe(x,1,"block w-full bg-primary p-2",null,m,D)},[()=>({hidden:!a()})],r),pt("click",g,f),l(b,_),he()}var Io=B("<!> <!>",1),Ho=B("<!> <!>",1),Wo=B('<p class="flex items-center gap-2"> <!></p>'),So=B('<p class="flex items-center gap-2"> <!></p>'),Co=B('<p class="flex items-center gap-2"> <!></p>'),Fo=B('<p class="flex items-center gap-2"> <!></p>'),jo=B('<p class="flex items-center gap-2"> <!></p>'),zo=B('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Ro=B('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Vt(b,t){ke(t,!0);const[o,W]=Ie(),u=()=>K(ht,"$timeFormat",o);var a,s,n,f;const _=pe(()=>qe(t.callback.lastAttemptCompleteTime,u())),g=pe(()=>qe(t.callback.nextAttemptScheduleTime,u())),H=pe(()=>(a=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||a===void 0?void 0:a.message),T=pe(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),d=pe(()=>(n=(s=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||s===void 0?void 0:s.nexus)===null||n===void 0?void 0:n.url),c={Standby:h("nexus.callback.standby"),Scheduled:h("nexus.callback.scheduled"),"Backing Off":h("nexus.callback.backing-off"),Failed:h("nexus.callback.failed"),Succeeded:h("nexus.callback.succeeded")},y="Failed",C=pe(()=>t.callback.state===y),P=pe(()=>c[t.callback.state]||h("nexus.nexus-callback")),x=pe(()=>((f=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||f===void 0?void 0:f.links)||[]),m=pe(()=>!e(x).length&&!t.link&&e(d)),G=pe(()=>e(C)?"error":"info");St(b,{icon:"nexus",get intent(){return e(G)},get title(){return e(P)},children:(D,X)=>{var R=Ro(),U=ne(R),j=$(U);{var O=Q=>{var F=Me(),Z=ne(F);nt(Z,17,()=>e(x),oe=>{var ee,be,le;return((be=(ee=oe.workflowEvent)==null?void 0:ee.eventRef)==null?void 0:be.eventId)||((le=oe.workflowEvent)==null?void 0:le.requestIdRef.requestId)},(oe,ee,be,le)=>{var me=Io(),Ae=ne(me);vt(Ae,{get link(){return e(ee)}});var Se=i(Ae,2);const Fe=pe(()=>h("nexus.link-namespace")),Te=pe(()=>Dt({namespace:e(ee).workflowEvent.namespace}));vt(Se,{get link(){return e(ee)},get label(){return e(Fe)},get value(){return e(ee).workflowEvent.namespace},get href(){return e(Te)}}),l(oe,me)}),l(Q,F)},w=(Q,F)=>{{var Z=oe=>{var ee=Ho(),be=ne(ee);vt(be,{get link(){return t.link}});var le=i(be,2);const me=pe(()=>h("nexus.link-namespace")),Ae=pe(()=>Dt({namespace:t.link.workflowEvent.namespace}));vt(le,{get link(){return t.link},get label(){return e(me)},get value(){return t.link.workflowEvent.namespace},get href(){return e(Ae)}}),l(oe,ee)};J(Q,oe=>{t.link&&oe(Z)},F)}};J(j,Q=>{e(x).length?Q(O):Q(w,!1)})}var S=i(j,2),N=$(S),ue=$(N,!0),$e=i(ue);Oe($e,{type:"subtle",children:(Q,F)=>{ge();var Z=ce();M(()=>L(Z,t.callback.state)),l(Q,Z)},$$slots:{default:!0}}),k(N);var de=i(N,2);{var ie=Q=>{var F=Wo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,t.callback.attempt)),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("common.attempt")]),l(Q,F)};J(de,Q=>{t.callback.attempt&&Q(ie)})}var V=i(de,2);{var Y=Q=>{var F=So(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(_))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.last-attempt-completed-time")]),l(Q,F)};J(V,Q=>{t.callback.lastAttemptCompleteTime&&Q(Y)})}var A=i(V,2);{var E=Q=>{var F=Co(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(g))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.next-attempt-scheduled-time")]),l(Q,F)};J(A,Q=>{t.callback.nextAttemptScheduleTime&&Q(E)})}k(S);var q=i(S,2);{var re=Q=>{var F=Fo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(d))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.callback-url")]),l(Q,F)};J(q,Q=>{e(m)&&Q(re)})}var ae=i(q,2);{var ye=Q=>{var F=jo(),Z=$(F),oe=i(Z);Oe(oe,{type:"subtle",children:(ee,be)=>{ge();var le=ce();M(()=>L(le,e(T))),l(ee,le)},$$slots:{default:!0}}),k(F),M(ee=>L(Z,`${ee??""} `),[()=>h("nexus.blocked-reason")]),l(Q,F)};J(ae,Q=>{e(T)&&Q(ye)})}var xe=i(ae,2);{var Pe=Q=>{var F=zo(),Z=$(F),oe=$(Z,!0);k(Z);var ee=i(Z,2);const be=pe(()=>h("common.copy-icon-title")),le=pe(()=>h("common.copy-success-icon-title"));gt(ee,{get content(){return e(H)},language:"text",get copyIconTitle(){return e(be)},get copySuccessIconTitle(){return e(le)}}),k(F),M(me=>L(oe,me),[()=>h("nexus.last-attempt-failure")]),l(Q,F)};J(xe,Q=>{e(H)&&Q(Pe)})}k(U);var fe=i(U,2);lr(fe,()=>t.children??cr),M(Q=>L(ue,Q),[()=>h("common.state")]),l(D,R)},$$slots:{default:!0}}),he(),W()}var Lo=B('<div class="flex flex-col gap-2"></div>'),Oo=B('<p class="p-1" slot="title"> </p>'),Mo=B('<div class="py-2"><!></div>');function Go(b,t){ke(t,!0);const[o,W]=Ie(),u=()=>K(xt,"$fullEventHistory",o);var a;const s=pe(()=>u()[0]),n=pe(()=>(a=e(s)===null||e(s)===void 0?void 0:e(s).links)===null||a===void 0?void 0:a[0]),f=pe(()=>t.callbacks[0]);Vt(b,{get callback(){return e(f)},get link(){return e(n)},children:(_,g)=>{var H=Me(),T=ne(H);{var d=c=>{var y=Mo(),C=$(y);Ao(C,{children:Ht,$$slots:{default:(P,x)=>{const m=pe(()=>x.open);var G=Me(),D=ne(G);{var X=R=>{var U=Lo();nt(U,21,()=>t.callbacks.slice(1),kt,(j,O)=>{Vt(j,{get callback(){return e(O)}})}),k(U),l(R,U)};J(D,R=>{e(m)&&R(X)})}l(P,G)},title:(P,x)=>{var m=Oo(),G=$(m);k(m),M(()=>L(G,`View ${t.callbacks.length-1} other Callbacks`)),l(P,m)}}}),k(y),l(c,y)};J(T,c=>{t.callbacks.length>1&&c(d)})}l(_,H)},$$slots:{default:!0}}),he(),W()}var Do=B("<!> <!> <!> <!> <!>",1),Uo=B('<div class="flex flex-col gap-0 px-4 pt-4 xl:px-8"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative px-4 pb-24 xl:px-8"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col border-t border-subtle"><!> <!></div></div> <!>',1);function No(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Ke,"$page",o),a=()=>K(wt,"$workflowRun",o),s=()=>K(st,"$eventFilterSort",o),n=()=>K(tt,"$eventViewType",o),f=()=>K(Bt,"$filteredEventHistory",o),_=()=>K($r,"$currentEventHistory",o),g=()=>K(at,"$pauseLiveUpdates",o),H=()=>K(jt,"$minimizeEventView",o),T=p(),d=p(),c=p(),y=p(),C=p(),P=p(),x=p(),m=p(),G=p(),D=p();fr(()=>{Pt()});let X=p(!1);const R=()=>{e(C)?_e(st,"ascending"):_e(st,"descending")};I(()=>(e(T),u()),()=>{(F=>v(T,F.namespace))(u().params)}),I(()=>(e(d),a()),()=>{(F=>v(d,F.workflow))(a())}),I(()=>e(d),()=>{v(c,e(d)===null||e(d)===void 0?void 0:e(d).pendingActivities)}),I(()=>e(d),()=>{v(y,e(d)===null||e(d)===void 0?void 0:e(d).pendingNexusOperations)}),I(()=>s(),()=>{v(C,s()==="descending")}),I(()=>n(),()=>{v(P,n()==="compact")}),I(()=>(f(),e(c),e(y)),()=>{v(x,Kt(f(),"ascending",e(c),e(y)))}),I(()=>(e(C),e(x)),()=>{v(m,e(C)?[...e(x)].reverse():e(x))}),I(()=>(e(C),f()),()=>{v(G,e(C)?[...f()].reverse():f())}),I(()=>_(),()=>{v(D,Zr(_(),"ascending"))}),I(()=>(n(),Pt),()=>{n(),Pt()}),I(()=>(e(d),g()),()=>{!e(d).isRunning&&g()&&_e(at,!1)}),Ce(),Ee();var U=Uo(),j=ne(U),O=$(j);Eo(O,{});var w=i(O,2),S=$(w);bo(S,{});var N=i(S,2);{var ue=F=>{const Z=r(()=>{var oe;return(oe=e(d))==null?void 0:oe.pendingWorkflowTask});lo(F,{get error(){return e(D)},get pendingTask(){return e(Z)}})};J(N,F=>{e(D)&&F(ue)})}var $e=i(N,2);{var de=F=>{Go(F,{get callbacks(){return e(d).callbacks}})};J($e,F=>{var Z,oe;(oe=(Z=e(d))==null?void 0:Z.callbacks)!=null&&oe.length&&F(de)})}k(w),k(j);var ie=i(j,2),V=$(ie);let Y;var A=$(V),E=$(A,!0);k(A);var q=i(A,2),re=$(q);dn(re,{children:(F,Z)=>{var oe=Do(),ee=ne(oe);{var be=we=>{const je=r(()=>e(C)?"descending":"ascending");ut(we,{get leadingIcon(){return e(je)},"data-testid":"zoom-in",size:"sm",$$events:{click:R},children:(We,Ge)=>{ge();var Le=ce();M(()=>L(Le,e(C)?"Descending":"Ascending")),l(We,Le)},$$slots:{default:!0}})};J(ee,we=>{n()!=="json"&&we(be)})}var le=i(ee,2);const me=r(()=>H()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");vn(le,{get text(){return e(me)},top:!0,children:(we,je)=>{const We=r(()=>H()?"minimize":"expand");ut(we,{get leadingIcon(){return e(We)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>_e(jt,!H())},children:(Ge,Le)=>{ge();var Ye=ce();M(()=>L(Ye,H()?"Minimized":"Expanded")),l(Ge,Ye)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ae=i(le,2);yn(Ae,{get compact(){return e(P)},get minimized(){return H()}});var Se=i(Ae,2);const Fe=r(()=>!e(d).isRunning),Te=r(()=>g()?"play":"pause");ut(Se,{get disabled(){return e(Fe)},get leadingIcon(){return e(Te)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>_e(at,!g())},children:(we,je)=>{ge();var We=ce();M(()=>L(We,g()?"Unfreeze":"Freeze")),l(we,We)},$$slots:{default:!0}});var He=i(Se,2);ut(He,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>v(X,!0)},children:(we,je)=>{ge();var We=ce();M(Ge=>L(We,Ge),[()=>h("common.download")],r),l(we,We)},$$slots:{default:!0}}),l(F,oe)},$$slots:{default:!0}}),k(q),k(V);var ae=i(V,2),ye=$(ae);const xe=r(()=>!!e(D)),Pe=r(()=>H()?360:void 0);nr(ye,{get workflow(){return e(d)},get groups(){return e(m)},get error(){return e(xe)},get viewportHeight(){return e(Pe)}});var fe=i(ye,2);_n(fe,{get groups(){return e(m)},get history(){return e(G)},get minimized(){return H()}}),k(ae),k(ie);var Q=i(ie,2);_o(Q,{get namespace(){return e(T)},get workflowId(){return e(d).id},get runId(){return e(d).runId},get open(){return e(X)},set open(F){v(X,F)},$$legacy:!0}),M((F,Z)=>{Y=Qe(V,1,"flex flex-wrap items-center justify-between gap-2 bg-off-white/50 py-2 xl:gap-8 dark:bg-space-black/50 svelte-18jakp5",null,Y,F),L(E,Z)},[()=>({"sticky-header":!H()}),()=>h("workflows.event-history")],r),l(b,U),he(),W()}var Vo=B("<!> <!>",1);function ta(b,t){ke(t,!1);const[o,W]=Ie(),u=()=>K(Ke,"$page",o),a=u().params.workflow;Ee();var s=Vo(),n=ne(s);const f=r(()=>`${h("workflows.workflow-history")} | ${a}`);vr(n,{get title(){return e(f)},get url(){return u().url.href}});var _=i(n,2);No(_,{}),l(b,s),he(),W()}export{ta as component};
