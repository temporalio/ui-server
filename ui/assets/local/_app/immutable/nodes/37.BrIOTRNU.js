import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as we,b as ke,g as e,o as r,l as A,a as Fe,t as N,f as re,i as h,r as w,c as i,e as l,s as f,m as _,ak as te,L as ce,n as ge,k as ue,j as M,h as Oe,O as je,aP as ir,q as It,ac as _e,d as lr,af as cr}from"../chunks/U_G9-AHJ.js";import{i as be,s as Je}from"../chunks/D2UjXFL6.js";import{a as X,s as He,b as xe,m as dr,p as j,l as pt}from"../chunks/DNW1xCX_.js";import{p as Xe}from"../chunks/vKsDjb1u.js";import{P as vr}from"../chunks/Ck2hqwTx.js";import{t as k}from"../chunks/D2OY9xdY.js";import{s as z,e as _t}from"../chunks/CVVZ9xwv.js";import{i as Q}from"../chunks/DIFdH0Rm.js";import{s as Be,a as fe,d as ur}from"../chunks/CAT1xLwG.js";import{b as fr}from"../chunks/CoPQkCPb.js";import{E as gr,C as lt,L as qe,T as rt,D as xt,t as mr,g as pr}from"../chunks/B80cxZ04.js";import{T as _r,a as bt}from"../chunks/BTQDJFY2.js";import{W as xr}from"../chunks/CCjGQZ_J.js";import{T as wr}from"../chunks/CXohCvgj.js";import{b as Vt,d as St,a as kr,e as at,f as wt,h as tt,i as Ue,c as Ne,p as it,j as hr,k as Ct,m as Ft,g as $r}from"../chunks/BvrAX0cQ.js";import{w as kt}from"../chunks/DzLug7L5.js";import{e as nt,i as ht}from"../chunks/CbnBDLOu.js";import{w as yr,a as br,o as Tr,g as jt}from"../chunks/D1QWZ-ZU.js";import{C as dt}from"../chunks/DEWWV-oi.js";import{I as Qe}from"../chunks/DP_ar0SN.js";import{M as Er}from"../chunks/iXRR2-1e.js";import{c as Pr,d as Ar,b as vt}from"../chunks/B-BStlvE.js";import{M as Ir}from"../chunks/CUSOyGK1.js";import{Z as zt,k as Tt,Q as Rt,v as Lt,n as Hr,_ as Bt,$ as Wr}from"../chunks/DPZf26_M.js";import{a as Sr,b as qt,d as Qt,f as Cr,c as Et}from"../chunks/BM6zGavl.js";import{t as Fr}from"../chunks/_veBEizm.js";import{i as jr}from"../chunks/U8uzBLhZ.js";import{k as Ht}from"../chunks/C7kHQaHu.js";import{b as Jt}from"../chunks/2raHQAFS.js";import{f as Ve,t as $t,r as zr}from"../chunks/CqYY455h.js";import{i as Xt}from"../chunks/Dzb719w0.js";import{q as gt,l as Yt}from"../chunks/CeMbHz9m.js";import{b as Rr,g as Lr,d as Or,c as ut}from"../chunks/CbVh51Lh.js";import{W as Mr}from"../chunks/HxYhkKgM.js";import{B as Gr}from"../chunks/0LWA5HOu.js";import{a as Dr}from"../chunks/B38O4Zli.js";import{g as Zt}from"../chunks/CwkIlfkh.js";import{f as Ur,b as Nr}from"../chunks/CM72xoSc.js";import{v as Vr}from"../chunks/2ww93jf_.js";import{p as Ot}from"../chunks/T6LMLOuX.js";import{M as Br}from"../chunks/CnOhs7g4.js";import{a as Kt}from"../chunks/brOJZyi7.js";import{b as qr}from"../chunks/CwPKiZxY.js";import{A as Wt}from"../chunks/kE1hueh6.js";import{L as er}from"../chunks/DzTUgVbj.js";import{s as Qr}from"../chunks/ByTIZu23.js";import{g as Jr,a as Xr,b as Yr,c as Zr}from"../chunks/B68D-daP.js";import{A as tr}from"../chunks/MdwM2jR7.js";import{C as mt}from"../chunks/ByQOI1WC.js";import{B as Le}from"../chunks/XTnGEnNK.js";import{M as Kr}from"../chunks/BZMDG41M.js";import{R as en,a as Pt}from"../chunks/O1YlQCrD.js";import{c as tn,d as rn}from"../chunks/p15EZxI6.js";import{g as nn,b as on,a as sn}from"../chunks/DX-N0CqY.js";import{s as At}from"../chunks/byHaz_JD.js";import{i as an}from"../chunks/l79RPD4c.js";import{c as Mt,a as Gt}from"../chunks/XX4SZKvx.js";import{I as Dt}from"../chunks/ZC5ZZfa4.js";import{t as ln,a as cn}from"../chunks/DRyPL1_K.js";import{T as dn,a as ft}from"../chunks/B8_7Uj24.js";import{T as vn}from"../chunks/_UkE7GgU.js";function un(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Vt,"$filteredEventHistory",o),a=()=>X(St,"$decodeEventHistory",o);be(),xr(T,{get events(){return v()},decode:n=>{const g=r(()=>k("events.decode-event-history"));wr(n,{get label(){return e(g)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return dr(),a()},set checked(p){xe(St,p)},$$legacy:!0})},$$slots:{decode:!0}}),ke(),I()}var fn=N("<!> <!> <!>",1),gn=N('<div class="border-t border-subtle px-4"><!></div>'),mn=N('<div data-testid="event-summary-table"><!></div>'),pn=N('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function _n(T,t){we(t,!1);const[o,I]=He(),v=()=>X(kt,"$workflowRun",o),a=()=>X(at,"$eventFilterSort",o),s=()=>X(wt,"$fullEventHistory",o),n=()=>X(tt,"$eventViewType",o),g=()=>X(Xe,"$page",o),p=_(),m=_(),P=_(),b=_(),c=_(),d=_(),E=_();var C=_(),H=_(),$=_(),u=_();let R=j(t,"history",8),U=j(t,"groups",8),B=j(t,"minimized",8,!0);const G=()=>{xe(tt,"feed")},D=()=>{xe(tt,"compact")},S=()=>{xe(tt,"json")};A(()=>(e(p),v()),()=>{(ee=>f(p,ee.workflow))(v())}),A(()=>a(),()=>{f(m,a()==="descending")}),A(()=>s(),()=>{f(P,!s().length)}),A(()=>n(),()=>{f(b,n()==="compact")}),A(()=>(te(H),te(C),g(),te(u),te($)),()=>{xe(kr,!(f(H,f(C,g().url)===null||te(C)===void 0?void 0:te(C).searchParams)===null||te(H)===void 0)&&te(H).get("category")?f(u,f($,g().url)===null||te($)===void 0?void 0:te($).searchParams)===null||te(u)===void 0?void 0:te(u).get("category").split(","):void 0)}),A(()=>e(p),()=>{f(c,e(p).pendingActivities)}),A(()=>e(p),()=>{f(d,e(p).pendingNexusOperations)}),A(()=>(e(b),ce(U()),e(m),e(d),e(c),ce(R())),()=>{f(E,e(b)?U():e(m)?[...e(d),...e(c),...R()]:[...R(),...e(c),...e(d)])}),Fe(),be();var L=pn(),x=re(L),F=h(x),Y=h(F);_r(Y,{children:(ee,J)=>{var se=fn(),W=re(se);const y=r(()=>n()==="feed");bt(W,{get active(){return e(y)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:G},children:($e,Ae)=>{ge();var ie=ue("All");l($e,ie)},$$slots:{default:!0}});var V=i(W,2);const ne=r(()=>n()==="compact");bt(V,{get active(){return e(ne)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:D},children:($e,Ae)=>{ge();var ie=ue("Compact");l($e,ie)},$$slots:{default:!0}});var ae=i(V,2);const ye=r(()=>n()==="json");bt(ae,{get active(){return e(ye)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:S},children:($e,Ae)=>{ge();var ie=ue("JSON");l($e,ie)},$$slots:{default:!0}}),l(ee,se)},$$slots:{default:!0}}),w(F),w(x);var de=i(x,2);{var he=ee=>{var J=gn(),se=h(J);un(se,{}),w(J),l(ee,J)},le=ee=>{var J=mn(),se=h(J);gr(se,{get updating(){return e(P)},get items(){return e(E)},get groups(){return U()},get compact(){return e(b)},get minimized(){return B()}}),w(J),l(ee,J)};Q(de,ee=>{n()==="json"?ee(he):ee(le,!1)})}l(T,L),ke(),I()}const xn=T=>T==null?void 0:T.nexus;var wn=N('<span class="hidden text-sm md:block"> </span>'),kn=N('<div slot="leading"><!></div>'),hn=N("<!> <!> <!> <!> <!>",1),$n=N("<!> <!>",1);function yn(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Fr,"$temporalVersion",o),a=()=>X(Xe,"$page",o),s=()=>X(Ue,"$eventTypeFilter",o),n=()=>X(Ne,"$eventStatusFilter",o),g=()=>X(tt,"$eventViewType",o),p=_(),m=_(),P=_();var b=_();let c=j(t,"compact",8,!1),d=j(t,"minimized",8,!0),E=yr(!1);const C=({value:H})=>{Sr(),xe(Ue,s().some($=>$===H)?s().filter($=>$!==H):[...s(),H])};A(()=>(ce(c()),Tt),()=>{f(p,c()?zt.map(H=>H.value):Tt.map(H=>H.value))}),A(()=>(ce(c()),lt),()=>{f(m,[...(c()?zt:Tt).map(H=>({...H,label:k(H.label),icon:lt[H.value],description:k(H.description)}))])}),A(()=>(v(),e(m)),()=>{jr("1.21.0",v())&&f(m,e(m).filter(({value:H})=>H!=="update"))}),A(()=>(te(b),a(),e(m)),()=>{xn(f(b,a().data.systemInfo)===null||te(b)===void 0?void 0:te(b).capabilities)||f(m,e(m).filter(({value:H})=>H!=="nexus"))}),A(()=>(s(),e(p)),()=>{f(P,s().length<e(p).length)}),Fe(),be(),Pr(T,{open:E,children:(H,$)=>{var u=$n(),R=re(u);Er(R,{controls:"status-menu",size:"sm",children:(G,D)=>{var S=wn(),L=h(S,!0);w(S),M(x=>z(L,x),[()=>k("common.filter")],r),l(G,S)},$$slots:{default:!0,leading:(G,D)=>{var S=kn();let L;var x=h(S);const F=r(()=>e(P)&&"pt-0.5 text-white");Qe(x,{name:"filter",get class(){return e(F)}}),w(S),M(Y=>L=Be(S,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,L,Y),[()=>({"bg-interactive":e(P)})],r),l(G,S)}}});var U=i(R,2);const B=r(()=>d()?"top-right":"right");Ar(U,{id:"event-type-menu",keepOpen:!0,get position(){return e(B)},class:"w-[220px] md:w-[360px]",children:(G,D)=>{var S=hn(),L=re(S);const x=r(()=>k("common.all"));vt(L,{get"data-testid"(){return e(x)},$$events:{click:()=>{xe(Ue,e(p)),xe(Ne,!1)}},children:(J,se)=>{ge();var W=ue();M(y=>z(W,y),[()=>k("common.all")],r),l(J,W)},$$slots:{default:!0,leading:(J,se)=>{const W=r(()=>!n()&&s().length===e(p).length),y=r(()=>k("common.all"));dt(J,{slot:"leading",get checked(){return e(W)},get label(){return e(y)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{xe(Ue,e(p)),xe(Ne,!1)}}})}}});var F=i(L,2);{var Y=J=>{const se=r(()=>k("common.pending-and-failed")),W=r(()=>k("common.pending-and-failed-description"));vt(J,{get"data-testid"(){return e(se)},get description(){return e(W)},class:"items-start",$$events:{click:()=>{xe(Ue,e(p)),xe(Ne,!n())}},children:(y,V)=>{ge();var ne=ue();M(ae=>z(ne,ae),[()=>k("common.pending-and-failed")],r),l(y,ne)},$$slots:{default:!0,leading:(y,V)=>{const ne=r(()=>k("common.all"));dt(y,{slot:"leading",get checked(){return n()},get label(){return e(ne)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{xe(Ue,e(p)),xe(Ne,!n())}}})}}})};Q(F,J=>{g()!=="json"&&J(Y)})}var de=i(F,2);const he=r(()=>k("common.none"));vt(de,{get"data-testid"(){return e(he)},$$events:{click:()=>{xe(Ue,[]),xe(Ne,!1)}},children:(J,se)=>{ge();var W=ue();M(y=>z(W,y),[()=>k("common.none")],r),l(J,W)},$$slots:{default:!0,leading:(J,se)=>{const W=r(()=>!n()&&!s().length),y=r(()=>k("common.none"));dt(J,{slot:"leading",get checked(){return e(W)},get label(){return e(y)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{xe(Ue,[]),xe(Ne,!1)}}})}}});var le=i(de,2);Ir(le);var ee=i(le,2);nt(ee,1,()=>e(m),ht,(J,se)=>{vt(J,{get"data-testid"(){return e(se).label},get description(){return e(se).description},class:"items-start",$$events:{click:()=>{C(e(se))}},children:(W,y)=>{ge();var V=ue();M(()=>z(V,e(se).label)),l(W,V)},$$slots:{default:!0,leading:(W,y)=>{const V=r(()=>s().some(ne=>ne===e(se).value));dt(W,{slot:"leading",get checked(){return e(V)},get label(){return e(se).label},labelHidden:!0,class:"mt-px",$$events:{click:()=>C(e(se))}})}}})}),l(G,S)},$$slots:{default:!0}}),l(H,u)},$$slots:{default:!0}}),ke(),I()}function bn(T,t){we(t,!1);const[o,I]=He(),v=()=>X(it,"$pauseLiveUpdates",o),a=_(),s=_();let n=j(t,"workflow",8),g=j(t,"startTime",8);const p=()=>{const E=new Date;return E.setSeconds(E.getSeconds()+1),E};let m;const P=E=>{E&&(clearInterval(m),m=null)},b=E=>{E?(clearInterval(m),m=null):!m&&n().isRunning&&(m=setInterval(()=>{f(a,p())},1e3))};br(()=>{clearInterval(m),m=null,xe(it,!1)}),A(()=>ce(n()),()=>{f(a,(n()===null||n()===void 0?void 0:n().endTime)||p())}),A(()=>(ce(g()),e(a)),()=>{f(s,gt({start:g(),end:e(a),onlyUnderSecond:!1}))}),A(()=>ce(n()),()=>{P(n().endTime)}),A(()=>v(),()=>{b(v())}),Fe(),be();var c=Oe(),d=re(c);Je(d,t,"default",{get endTime(){return e(a)},get duration(){return e(s)}},null),l(T,c),ke(),I()}var Tn=N("<div><!></div>");function En(T,t){const o=pt(t,["children","$$slots","$$events","$$legacy"]),I=pt(o,["namespace","workflowId","runId","viewportHeight","onLoad"]);we(t,!1);let v=j(t,"namespace",8),a=j(t,"workflowId",8),s=j(t,"runId",8,""),n=j(t,"viewportHeight",8,360),g=j(t,"onLoad",8,()=>{});const p=async()=>{const[c,d]=await Promise.all([Vr({namespace:v(),workflowId:a(),runId:s()}),Ur({namespace:v(),workflowId:a(),runId:s()})]);return{workflow:c.workflow,history:d}},m=(c,d)=>{var E;g()();const C=(E=c==null?void 0:c.pendingActivities)!==null&&E!==void 0?E:[];return Zt(d,"ascending",C)};be();var P=Oe(),b=re(P);Dr(b,p,null,(c,d)=>{var E=r(()=>{var{workflow:U,history:B}=e(d);return{workflow:U,history:B}}),C=r(()=>e(E).workflow),H=r(()=>e(E).history),$=Tn(),u=h($);const R=r(()=>m(e(C),e(H)));rr(u,{get viewportHeight(){return n()},get workflow(){return e(C)},get groups(){return e(R)},readOnly:!0}),w($),M(()=>Be($,1,`cursor-pointer overflow-auto ${I.class??""}`)),l(c,$)}),l(T,P),ke()}var Pn=N('<div class="flex items-center gap-1"><!> </div>'),An=N(" <!>",1),In=N('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),Hn=je('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function Wn(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Xe,"$page",o),a=_(),s=_(),n=_(),g=_(),p=_(),m=_(),P=_();var b=_(),c=_();let d=j(t,"group",8),E=j(t,"canvasWidth",8),C=j(t,"x",8,0),H=j(t,"y",8),$=_();const u=y=>{xe(Qt,y)},R=async()=>{await ir(),f(a,e($))};A(()=>e($),()=>{f(a,e($)||0)}),A(()=>e(a),()=>{u(e(a)||0)}),A(()=>ce(d()),()=>{f(s,(d()===null||d()===void 0?void 0:d().finalClassification)||(d()===null||d()===void 0?void 0:d().classification))}),A(()=>(e(n),v()),()=>{(y=>f(n,y.namespace))(v().params)}),A(()=>ce(E()),()=>{f(g,E())}),A(()=>ce(d()),()=>{f(p,d().displayName)}),A(()=>(ce(d()),Rt),()=>{f(m,d()&&d().eventList.find(Rt))}),A(()=>(te(b),ce(d()),te(c)),()=>{f(P,Yt({start:f(b,d()===null||d()===void 0?void 0:d().initialEvent)===null||te(b)===void 0?void 0:te(b).eventTime,end:f(c,d()===null||d()===void 0?void 0:d().lastEvent)===null||te(c)===void 0?void 0:te(c).eventTime,includeMilliseconds:!0}))}),A(()=>(ce(d()),k),()=>{!(d()===null||d()===void 0)&&d().pendingActivity&&(d().pendingActivity.paused?f(s,k("workflows.paused")):d().pendingActivity.attempt>1?f(s,k("events.event-classification.retrying")):f(s,k("events.event-classification.pending")))}),Fe(),be();var U=Hn(),B=h(U),G=h(B),D=h(G),S=h(D),L=h(S);{var x=y=>{Mr(y,{get status(){return e(s)}})};Q(L,y=>{e(s)&&y(x)})}var F=i(L),Y=i(F);{var de=y=>{var V=Pn(),ne=h(V);Qe(ne,{name:"clock"});var ae=i(ne);w(V),M(()=>z(ae,` ${e(P)??""}`)),l(y,V)};Q(Y,y=>{e(P)&&y(de)})}w(S);var he=i(S,2),le=h(he);Gr(le,{variant:"ghost",size:"xs",$$events:{click:()=>qt(d())},children:(y,V)=>{ge();var ne=An(),ae=re(ne),ye=i(ae);Qe(ye,{name:"close"}),M($e=>z(ae,`${$e??""} `),[()=>k("common.close")],r),l(y,ne)},$$slots:{default:!0}}),w(he),w(D);var ee=i(D,2),J=h(ee);Rr(J,{get group(){return d()},get event(){return d().initialEvent}}),w(ee);var se=i(ee,2);{var W=y=>{var V=In(),ne=i(h(V),2);Ht(ne,()=>d().eventList.length,ae=>{En(ae,{get namespace(){return e(n)},get workflowId(){return e(m).attributes.workflowExecution.workflowId},get runId(){return e(m).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:R})}),w(V),l(y,V)};Q(se,y=>{e(m)&&y(W)})}w(G),w(B),w(U),M(()=>{fe(B,"x",C()),fe(B,"y",H()),fe(B,"width",e(g)),fe(B,"height",e(a)),z(F,` ${e(p)??""} `)}),Jt(G,"offsetHeight",y=>f($,y)),l(T,U),ke(),I()}var Sn=je('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),Cn=je("<!><!>",1),Fn=je("<!><!>",1);function jn(T,t){we(t,!1);const o=_(),I=_();let v=j(t,"x1",8,0),a=j(t,"x2",8,1e3),s=j(t,"timelineHeight",8,1e3),n=j(t,"startTime",8),g=j(t,"duration",8);const{radius:p}=rt,m=20;A(()=>(ce(a()),ce(v())),()=>{f(o,a()-v())}),A(()=>e(o),()=>{f(I,e(o)/m)}),Fe(),be();var P=Fn(),b=re(P);const c=r(()=>[v(),s()]),d=r(()=>[v()+e(o),s()]);qe(b,{strokeWidth:p/2,get startPoint(){return e(c)},get endPoint(){return e(d)}});var E=i(b);nt(E,1,()=>Array(m),ht,(C,H,$)=>{var u=Cn();const R=r(()=>v()+$*e(I)),U=r(()=>s()+p*2);var B=re(u);{var G=L=>{const x=r(()=>[e(R),0]),F=r(()=>[e(R),s()]);qe(L,{strokeWidth:.5,get startPoint(){return e(x)},get endPoint(){return e(F)}})};Q(B,L=>{$!==0&&L(G)})}var D=i(B);{var S=L=>{var x=Sn(),F=h(x,!0);w(x),M(Y=>{fe(x,"transform",`rotate(90, ${e(R)??""}, ${e(U)??""})`),fe(x,"x",e(R)-p),fe(x,"y",e(U)),z(F,Y)},[()=>Yt({start:n(),end:new Date(new Date(n().toString()).getTime()+g()/m*$),includeMilliseconds:g()/m<1e3})],r),l(L,x)};Q(D,L=>{$!==0&&L(S)})}l(C,u)}),l(T,P),ke()}var zn=je("<text><!></text>"),Rn=je("<!><!><!>",1);function Ln(T,t){we(t,!1);const o=_(),I=_(),v=_(),a=_(),s=_(),n=_();var g=_();let p=j(t,"point",24,()=>[0,0]),m=j(t,"category",8,void 0),P=j(t,"status",8,"none"),b=j(t,"fontSize",8,"13px"),c=j(t,"fontWeight",8,"400"),d=j(t,"textAnchor",8,"start"),E=j(t,"backdrop",8,!1),C=j(t,"backdropHeight",8,0),H=j(t,"icon",8,void 0),$=j(t,"config",8,void 0),u=j(t,"label",8,!1),R=_();A(()=>(e(o),e(I),ce(p())),()=>{(x=>(f(o,x[0]),f(I,x[1])))(p())}),A(()=>(ce(H()),ce($())),()=>{f(v,H()&&$())}),A(()=>(te(g),e(R)),()=>{f(a,(f(g,e(R)===null||e(R)===void 0?void 0:e(R).getBBox())===null||te(g)===void 0?void 0:te(g).width)||0)}),A(()=>(e(v),e(a)),()=>{f(s,e(v)?e(a)+36:e(a)+12)}),A(()=>(e(v),ce(d()),e(o),ce($())),()=>{f(n,e(v)&&d()==="start"?e(o)+$().radius*2:e(o))}),Fe(),be();var U=Rn(),B=re(U);{var G=x=>{const F=r(()=>[e(o)-C(),e(I)]),Y=r(()=>[e(o)+e(s),e(I)]);qe(x,{get startPoint(){return e(F)},get endPoint(){return e(Y)},get status(){return P()},get strokeWidth(){return C()}})};Q(B,x=>{E()&&x(G)})}var D=i(B);{var S=x=>{const F=r(()=>d()==="end"?e(o)-e(a)-C():e(o)),Y=r(()=>e(I)-8),de=r(()=>E()?"text-white":"text-primary");Qe(x,{get name(){return H()},get x(){return e(F)},get y(){return e(Y)},get class(){return e(de)}})};Q(D,x=>{e(v)&&x(S)})}var L=i(D);Ht(L,()=>e(n),x=>{var F=zn();let Y;var de=h(F);Je(de,t,"default",{},null),w(F),qr(F,he=>f(R,he),()=>e(R)),M(he=>{Y=Be(F,0,`cursor-pointer select-none outline-none ${m()??""} text-primary`,"svelte-1kes4n8",Y,he),fe(F,"x",e(n)),fe(F,"y",e(I)+1),fe(F,"font-size",b()),fe(F,"font-weight",c()),fe(F,"text-anchor",d())},[()=>({label:u(),backdrop:E()})],r),l(x,F)}),l(T,U),ke()}var On=je('<rect fill="transparent" pointer-events="all"></rect>'),Mn=je("<!><!>",1),Gn=je("<!><!><!><!>",1),Dn=je('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"><!><!></g>');function Un(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Kt,"$authUser",o),a=_(),s=_(),n=_(),g=_(),p=_(),m=_(),P=_(),b=_(),c=_(),d=_(),E=_();var C=_(),H=_();let $=j(t,"y",8,0),u=j(t,"group",12),R=j(t,"activeGroups",24,()=>[]),U=j(t,"startTime",8),B=j(t,"endTime",8),G=j(t,"canvasWidth",8),D=j(t,"active",12,!0),S=j(t,"readOnly",8,!1);const{height:L,gutter:x,radius:F}=rt;let Y=_();Tr(async()=>{const W=Lr(u());if(W)try{f(Y,await Or(W,{namespace:Ot.params.namespace,settings:Ot.data.settings,accessToken:v().accessToken})),e(Y)&&u(u().decodedLocalActivity=e(Y),!0)}catch(y){console.warn("Failed to decode local activity:",y)}});const de=(W,y,V)=>{const ne=gt({start:U(),end:W,onlyUnderSecond:!1}),ae=u().eventList.map(q=>{const Z=gt({start:U(),end:q.eventTime,onlyUnderSecond:!1})/ne;return Math.round(Z*y)+x});if(e(n)){const O=gt({start:U(),end:e(n),onlyUnderSecond:!1})/ne,Z=Math.round(O*y)+x;ae.push(Z)}const{textAnchor:ye,textIndex:$e,textPosition:Ae,backdrop:ie}=mr(ae,V,y,u().isPending,rt);return{points:ae,textAnchor:ye,textIndex:$e,textPosition:Ae,backdrop:ie}},he=()=>{S()||qt(u())};A(()=>ce(G()),()=>{f(a,G()-2*x)}),A(()=>(ce(R()),ce(u())),()=>{D(!R().length||R().includes(u().id))}),A(()=>ce(u()),()=>{f(s,u()===null||u()===void 0?void 0:u().pendingActivity)}),A(()=>(e(s),te(C)),()=>{f(n,e(s)&&(f(C,e(s).pauseInfo)===null||te(C)===void 0?void 0:te(C).pauseTime))}),A(()=>(e(g),e(p),e(m),e(P),e(b),ce(B()),e(a),ce($())),()=>{(W=>(f(g,W.points),f(p,W.textAnchor),f(m,W.textIndex),f(P,W.textPosition),f(b,W.backdrop)))(de(B(),e(a),$()))}),A(()=>(ce(u()),Lt),()=>{f(c,u().eventList.find(Lt))}),A(()=>(e(c),te(H)),()=>{f(d,e(c)&&(f(H,e(c).attributes)===null||te(H)===void 0?void 0:te(H).attempt)>1)}),A(()=>(ce(u()),e(n)),()=>{f(E,u().isPending||!!e(n))}),Fe(),be();var le=Dn();fe(le,"height",L);var ee=h(le);{var J=W=>{var y=On();const V=r(()=>e(n)?e(g)[1]-e(g)[0]:G()-2*x);fe(y,"height",L),M(()=>{fe(y,"y",$()-L/2),fe(y,"x",e(g)[0]),fe(y,"width",e(V))}),l(W,y)};Q(ee,W=>{e(E)&&W(J)})}var se=i(ee);nt(se,1,()=>e(g),ht,(W,y,V)=>{var ne=Gn();const ae=r(()=>e(g)[V+1]),ye=r(()=>e(m)===V);var $e=re(ne);{var Ae=pe=>{const Ie=r(()=>[e(y),$()]),Ce=r(()=>[e(ae),$()]),We=r(()=>!!e(n)),me=r(()=>!!e(n)),Se=r(()=>V===0&&u().lastEvent.classification==="Completed");qe(pe,{get startPoint(){return e(Ie)},get endPoint(){return e(Ce)},get category(){return u().category},get classification(){return u().lastEvent.classification},get pending(){return e(We)},get paused(){return e(me)},strokeWidth:F*2,get retried(){return e(d)},get scheduling(){return e(Se)}})};Q($e,pe=>{e(ae)&&pe(Ae)})}var ie=i($e);{var q=pe=>{var Ie=Mn(),Ce=re(Ie);const We=r(()=>[e(y),$()]),me=r(()=>[G()-x,$()]),Se=r(()=>e(s)?e(s).attempt>1?"retry":"pending":u().category),Ee=r(()=>!!e(n));qe(Ce,{get startPoint(){return e(We)},get endPoint(){return e(me)},get category(){return e(Se)},get classification(){return u().lastEvent.classification},pending:!0,get paused(){return e(Ee)},strokeWidth:F*2});var ze=i(Ce);const Pe=r(()=>[e(y),$()]);xt(ze,{get point(){return e(Pe)},get classification(){return u().lastEvent.classification},icon:"retry",r:F}),l(pe,Ie)};Q(ie,pe=>{!e(ae)&&u().isPending&&!e(n)&&pe(q)})}var O=i(ie);{var Z=pe=>{const Ie=r(()=>{var me,Se;return(Se=(me=u())==null?void 0:me.userMetadata)==null?void 0:Se.summary}),Ce=r(()=>{var me;return Hr(u().initialEvent)?(me=u())==null?void 0:me.displayName:""}),We=r(()=>{var me;return e(Y)?k("events.category.local-activity"):(me=u())==null?void 0:me.displayName});Br(pe,{get value(){return e(Ie)},get prefix(){return e(Ce)},get fallback(){return e(We)},children:It,$$slots:{default:(me,Se)=>{const Ee=r(()=>Se.decodedValue),ze=r(()=>e(s)&&!e(s).paused||e(d)?"retry":void 0);Ln(me,{get point(){return e(P)},get textAnchor(){return e(p)},get backdrop(){return e(b)},backdropHeight:F*2,config:rt,get icon(){return e(ze)},children:(Pe,Ge)=>{var De=Oe(),Ye=re(De);{var yt=Re=>{var Ze=ue();M(ot=>z(Ze,`${ot??""}
            ${e(s).attempt??""} / ${e(s).maximumAttempts||"∞"}
            • 
            ${e(Ee)??""}`),[()=>k("workflows.attempt")],r),l(Re,Ze)},Me=(Re,Ze)=>{{var ot=Ke=>{var ct=ue();M(()=>z(ct,`${e(c).attributes.attempt??""} • ${e(Ee)??""}`)),l(Ke,ct)},or=(Ke,ct)=>{{var sr=et=>{var st=ue();M(()=>z(st,e(Y).value)),l(et,st)},ar=et=>{var st=ue();M(()=>z(st,e(Ee))),l(et,st)};Q(Ke,et=>{e(Y)?et(sr):et(ar,!1)},ct)}};Q(Re,Ke=>{e(d)?Ke(ot):Ke(or,!1)},Ze)}};Q(Ye,Re=>{e(s)?Re(yt):Re(Me,!1)})}l(Pe,De)},$$slots:{default:!0}})}}})};Q(O,pe=>{e(ye)&&pe(Z)})}var oe=i(O);const K=r(()=>[e(y),$()]),Te=r(()=>{var pe;return(pe=u().eventList[V])==null?void 0:pe.classification}),ve=r(()=>e(n)&&V!==0?"pause":e(Y)?lt["local-activity"]:lt[u().category]);xt(oe,{get point(){return e(K)},get classification(){return e(Te)},get icon(){return e(ve)},r:F}),l(W,ne)}),w(le),_t("click",le,he),_t("keypress",le,he),l(T,le),ke(),I()}var Nn=je('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function Vn(T,t){we(t,!1);const o=_(),I=_();let v=j(t,"workflow",8),a=j(t,"length",8),s=j(t,"y",8);const{radius:n,height:g,gutter:p}=rt;A(()=>{},()=>{f(o,p)}),A(()=>(e(o),ce(a())),()=>{f(I,e(o)+a()-2*p)}),Fe(),be();var m=Nn();fe(m,"height",g);var P=h(m);const b=r(()=>[e(o),s()]),c=r(()=>[e(I),s()]),d=r(()=>Xt(v()));qe(P,{get startPoint(){return e(b)},get endPoint(){return e(c)},get classification(){return v().status},strokeWidth:n*2,get pending(){return v().isRunning},get delayed(){return e(d)}});var E=i(P);const C=r(()=>[e(o),s()]);xt(E,{get point(){return e(C)},get classification(){return v().status},r:n});var H=i(E);const $=r(()=>e(o)-n/2),u=r(()=>s()-n/2);Qe(H,{name:"workflow",get x(){return e($)},get y(){return e(u)},width:n,height:n,strokeWidth:"4",class:"text-black"});var R=i(H);const U=r(()=>[e(I),s()]);xt(R,{get point(){return e(U)},get classification(){return v().status},r:n});var B=i(R);const G=r(()=>e(I)-n/2),D=r(()=>s()-n/2);Qe(B,{name:"workflow",get x(){return e(G)},get y(){return e(D)},width:n,height:n,strokeWidth:"4",class:"text-black"}),w(m),l(T,m),ke()}var Bn=je("<!><!>",1),qn=N('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),Qn=N('<div class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function rr(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Qt,"$activeGroupHeight",o),a=()=>X(Ne,"$eventStatusFilter",o),s=()=>X(wt,"$fullEventHistory",o),n=()=>X(Cr,"$activeGroups",o),g=()=>X(at,"$eventFilterSort",o),p=()=>X($t,"$timeFormat",o),m=_(),P=_(),b=_(),c=_(),d=_(),E=_();var C=_();let H=j(t,"x",8,0),$=j(t,"y",8,0),u=j(t,"workflow",8),R=j(t,"groups",8),U=j(t,"viewportHeight",8),B=j(t,"readOnly",8,!1),G=j(t,"error",8,!1);const{height:D,gutter:S,radius:L}=rt;let x=_(0),F=_(0);const Y=le=>{var ee;f(F,(ee=le==null?void 0:le.target)===null||ee===void 0?void 0:ee.scrollTop)};A(()=>(ce(B()),v()),()=>{f(m,B()?0:v())}),A(()=>(ce(R()),a()),()=>{f(P,pr(R(),a()))}),A(()=>(ce(u()),te(C),s()),()=>{f(b,!Xt(u())&&u().executionTime||(f(C,s()[0])===null||te(C)===void 0?void 0:te(C).eventTime)||u().startTime)}),A(()=>(e(P),e(m)),()=>{f(c,Math.max(D*(e(P).length+2),120)+e(m))}),A(()=>e(c),()=>{f(d,e(c)+120)}),A(()=>(n(),g(),e(m)),()=>{f(E,le=>{const ee=n()===null||n()===void 0?void 0:n().filter(J=>g()==="ascending"?parseInt(J)<parseInt(le.id):parseInt(J)>parseInt(le.id));return ee!=null&&ee.length?e(m):0})}),Fe(),be();var de=Qn(),he=h(de);bn(he,{get workflow(){return u()},get startTime(){return e(b)},children:It,$$slots:{default:(le,ee)=>{const J=r(()=>ee.endTime),se=r(()=>ee.duration);var W=qn(),y=re(W);let V;var ne=h(y),ae=h(ne),ye=h(ae,!0);w(ae);var $e=i(ae,2),Ae=h($e,!0);w($e),w(ne),w(y);var ie=i(y,2);let q;var O=h(ie);const Z=r(()=>[S,e(c)]);qe(O,{startPoint:[S,0],get endPoint(){return e(Z)},strokeWidth:L/2});var oe=i(O);const K=r(()=>[e(x)-S,0]),Te=r(()=>[e(x)-S,e(c)]);qe(oe,{get startPoint(){return e(K)},get endPoint(){return e(Te)},strokeWidth:L/2});var ve=i(oe);const pe=r(()=>e(x)-S+L/4);jn(ve,{x1:S-L/4,get x2(){return e(pe)},get timelineHeight(){return e(c)},get startTime(){return e(b)},get duration(){return e(se)}});var Ie=i(ve);Vn(Ie,{get workflow(){return u()},y:D,get length(){return e(x)}});var Ce=i(Ie);nt(Ce,3,()=>e(P),We=>We.id,(We,me,Se,Ee)=>{var ze=Bn();const Pe=r(()=>(e(Se)+2)*D+e(E)(e(me)));var Ge=re(ze);{var De=Me=>{var Re=Oe(),Ze=re(Re);Ht(Ze,()=>e(me).eventList.length,ot=>{Un(ot,{get y(){return e(Pe)},get group(){return e(me)},get activeGroups(){return n()},get canvasWidth(){return e(x)},get startTime(){return e(b)},get endTime(){return e(J)},get readOnly(){return B()}})}),l(Me,Re)};Q(Ge,Me=>{(!U()||e(Pe)>e(F)-2*D&&e(Pe)<e(F)+U()*D)&&Me(De)})}var Ye=i(Ge);{var yt=Me=>{const Re=r(()=>e(Pe)+1.33*L);Wn(Me,{get y(){return e(Re)},get group(){return e(me)},get canvasWidth(){return e(x)}})};Q(Ye,Me=>{!B()&&n().includes(e(me).id)&&Me(yt)})}l(We,ze)}),w(ie),M((We,me,Se,Ee)=>{V=Be(y,1,"pointer-events-none sticky top-[120px]",null,V,We),z(ye,me),z(Ae,Se),fe(ie,"x",H()),fe(ie,"y",$()),fe(ie,"viewBox",`0 0 ${e(x)??""} ${e(d)??""}`),fe(ie,"height",e(d)),fe(ie,"width",e(x)),q=Be(ie,0,"-mt-4 svelte-ta6k80",null,q,Ee)},[()=>({invisible:!!n().length}),()=>Ve(e(b),p()),()=>Ve(e(J),p()),()=>({error:G()})],r),l(le,W)}}}),w(de),M(()=>ur(de,U()?`max-height: ${U()}px;`:"")),Jt(de,"clientWidth",le=>f(x,le)),_t("scroll",de,Y),l(T,de),ke(),I()}var Jn=N('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function Xn(T,t){var o=Jn(),I=h(o);Je(I,t,"default",{},null),w(o),l(T,o)}var Yn=N("<p> </p> <!>",1),Zn=N("<p> </p> <!>",1),Kn=N('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),eo=N('<div class="w-full text-right text-xs" slot="summary"> </div>'),to=N("<!> <!>",1);function nr(T,t){we(t,!1);let o=j(t,"failure",8,void 0);be();var I=to(),v=re(I);{var a=g=>{const p=r(()=>k("common.failure"));tr(g,{get title(){return e(p)},class:"text-sm",children:(m,P)=>{var b=Kn(),c=h(b),d=h(c,!0);w(c);var E=i(c,2);const C=r(()=>{var G;return((G=o())==null?void 0:G.message)||""}),H=r(()=>k("common.copy-icon-title")),$=r(()=>k("common.copy-success-icon-title"));mt(E,{get content(){return e(C)},language:"text",get copyIconTitle(){return e(H)},get copySuccessIconTitle(){return e($)}});var u=i(E,2);{var R=G=>{var D=Yn(),S=re(D),L=h(S,!0);w(S);var x=i(S,2);const F=r(()=>k("common.copy-icon-title")),Y=r(()=>k("common.copy-success-icon-title"));mt(x,{get content(){return o().source},language:"text",get copyIconTitle(){return e(F)},get copySuccessIconTitle(){return e(Y)}}),M(de=>z(L,de),[()=>k("common.source")],r),l(G,D)};Q(u,G=>{var D;(D=o())!=null&&D.source&&G(R)})}var U=i(u,2);{var B=G=>{var D=Zn(),S=re(D),L=h(S,!0);w(S);var x=i(S,2);const F=r(()=>k("common.copy-icon-title")),Y=r(()=>k("common.copy-success-icon-title"));mt(x,{get content(){return o().stackTrace},language:"text",get copyIconTitle(){return e(F)},get copySuccessIconTitle(){return e(Y)}}),M(de=>z(L,de),[()=>k("common.stack-trace")],r),l(G,D)};Q(U,G=>{var D;(D=o())!=null&&D.stackTrace&&G(B)})}w(b),M(G=>z(d,G),[()=>k("common.message")],r),l(m,b)},$$slots:{default:!0,summary:(m,P)=>{var b=eo(),c=h(b,!0);w(b),M(()=>{var d;return z(c,(d=o())==null?void 0:d.message)}),l(m,b)}}})};Q(v,g=>{o()&&g(a)})}var s=i(v,2);{var n=g=>{var p=Oe(),m=re(p);nr(m,{get failure(){return o().cause}}),l(g,p)};Q(s,g=>{var p;(p=o())!=null&&p.cause&&g(n)})}l(T,I),ke()}var ro=N('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function no(T,t){we(t,!1);const[o,I]=He(),v=()=>X($t,"$timeFormat",o);let a=j(t,"pendingTask",8,void 0);be();const s=r(()=>k("workflows.pending-workflow-task"));tr(T,{get title(){return e(s)},children:(n,g)=>{var p=ro(),m=h(p),P=h(m),b=i(P);Le(b,{children:(S,L)=>{ge();var x=ue();M(()=>z(x,a().state)),l(S,x)},$$slots:{default:!0}}),w(m);var c=i(m,2),d=h(c),E=i(d);Le(E,{children:(S,L)=>{ge();var x=ue();M(()=>z(x,a().attempt)),l(S,x)},$$slots:{default:!0}}),w(c);var C=i(c,2),H=h(C),$=i(H);Le($,{children:(S,L)=>{ge();var x=ue();M(F=>z(x,F),[()=>Ve(a().originalScheduledTime,v())],r),l(S,x)},$$slots:{default:!0}}),w(C);var u=i(C,2),R=h(u),U=i(R);Le(U,{children:(S,L)=>{ge();var x=ue();M(F=>z(x,F),[()=>Ve(a().scheduledTime,v())],r),l(S,x)},$$slots:{default:!0}}),w(u);var B=i(u,2),G=h(B),D=i(G);Le(D,{children:(S,L)=>{ge();var x=ue();M(F=>z(x,F),[()=>Ve(a().startedTime,v())],r),l(S,x)},$$slots:{default:!0}}),w(B),w(p),M((S,L,x,F,Y)=>{z(P,`${S??""} `),z(d,`${L??""} `),z(H,`${x??""} `),z(R,`${F??""} `),z(G,`${Y??""} `)},[()=>k("common.state"),()=>k("common.attempt"),()=>k("workflows.original-scheduled-time"),()=>k("workflows.scheduled-time"),()=>k("workflows.started-time")],r),l(n,p)},$$slots:{default:!0}}),ke(),I()}var oo=N("<p> <!>.</p>"),so=N('<p><span class="mr-2 text-secondary">Timeout Type</span> </p>'),ao=N("<!> <!>",1),io=N('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> </div> <div class="flex flex-col gap-2 bg-primary p-4"><!> <!></div></div>',1);function lo(T,t){we(t,!0);const[o,I]=He(),v=()=>X($t,"$timeFormat",o),a=()=>X(zr,"$relativeTime",o);var s,n;let g=_e(()=>Jr(t.error)),p=_e(()=>Xr(t.error)&&((s=t.error.attributes)===null||s===void 0?void 0:s.failure)),m=_e(()=>Yr(t.error)&&((n=t.error.attributes)===null||n===void 0?void 0:n.timeoutType));var P=Oe(),b=re(P);{var c=d=>{const E=_e(()=>k(`typed-errors.${e(g)}.title`));Wt(d,{icon:"warning",intent:"warning",get title(){return e(E)},children:(C,H)=>{var $=io(),u=re($),R=h(u,!0);w(u);var U=i(u,2);{var B=W=>{var y=oo(),V=h(y,!0),ne=i(V);const ae=_e(()=>k(`typed-errors.${e(g)}.link`));er(ne,{newTab:!0,get href(){return e(ae)},children:(ye,$e)=>{ge();var Ae=ue();M(ie=>z(Ae,ie),[()=>k(`typed-errors.${e(g)}.action`)]),l(ye,Ae)},$$slots:{default:!0}}),ge(),w(y),M(ye=>z(V,ye),[()=>k("typed-errors.link-preface")]),l(W,y)};Q(U,W=>{(e(g)==="NonDeterministicError"||e(g)==="BadSearchAttributes")&&W(B)})}var G=i(U,2),D=h(G),S=h(D),L=h(S),x=i(L);Qe(x,{get name(){return lt[t.error.category]}});var F=i(x,2),Y=h(F,!0);w(F),w(S);var de=i(S);w(D);var he=i(D,2),le=h(he);{var ee=W=>{var y=so(),V=i(h(y));w(y),M(()=>z(V,` ${e(m)??""}`)),l(W,y)};Q(le,W=>{e(m)&&W(ee)})}var J=i(le,2);{var se=W=>{Xn(W,{children:(y,V)=>{var ne=ao(),ae=re(ne);{var ye=ie=>{nr(ie,{get failure(){return e(p)}})};Q(ae,ie=>{e(p)&&ie(ye)})}var $e=i(ae,2);{var Ae=ie=>{no(ie,{get pendingTask(){return t.pendingTask}})};Q($e,ie=>{t.pendingTask&&ie(Ae)})}l(y,ne)},$$slots:{default:!0}})};Q(J,W=>{(e(p)||t.pendingTask)&&W(se)})}w(he),w(G),M((W,y,V)=>{z(R,W),z(L,`${t.error.id??""} `),z(Y,y),z(de,` ${V??""}`)},[()=>k(`typed-errors.${e(g)}.description`),()=>{var W;return Qr((W=t.error)==null?void 0:W.name)},()=>{var W;return Ve((W=t.error)==null?void 0:W.eventTime,v(),{relative:a()})}]),l(C,$)},$$slots:{default:!0}})};Q(b,d=>{e(g)&&e(g)!=="ResetWorkflow"&&d(c)})}l(T,P),ke(),I()}const co=async(T,t,o)=>{const I=nn(t),v=on(t),a=sn(t),s={...t,codec:{...t==null?void 0:t.codec,endpoint:I,passAccessToken:v,includeCredentials:a}},n=!1;try{const g=await tn(T,jt(Xe).params.namespace,s,jt(Kt).accessToken,o,n);return rn(g,n)}catch{return T}};function Ut(T,t,o){const I=At({events:T},null,2),v=document.createElement("a"),a=new Blob([I],{type:o});v.href=URL.createObjectURL(a),v.download=t,v.click()}const vo=async({namespace:T,workflowId:t,runId:o,settings:I,decodeSetting:v})=>{try{const a=await Nr({namespace:T,workflowId:t,runId:o,sort:"ascending"});if(v==="encoded")Ut(a,`${o}/events.json`,"text/plain");else{const s=[];for(const n of a){const g=await co(n,I,v);s.push(g)}Ut(s,`${o}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var uo=N('<div class="flex items-center space-x-4"><!></div>');function fo(T,t){we(t,!1);const[o,I]=He(),v=()=>X(hr,"$parameters",o),a=()=>X(an,"$isCloud",o),s=_(),n=_(),{namespace:g,workflowId:p,runId:m}=v();A(()=>Mt,()=>{f(s,Mt({namespace:g,workflow:p,run:m}))}),A(()=>e(s),()=>{f(n,e(s)+".json")}),Fe(),be();var P=Oe(),b=re(P);{var c=d=>{var E=uo(),C=h(E);er(C,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(n)},newTab:!0,"data-testid":"view-raw-event-history",children:(H,$)=>{ge();var u=ue();M(R=>z(u,R),[()=>k("events.view-raw-history")],r),l(H,u)},$$slots:{default:!0}}),w(E),l(d,E)};Q(b,d=>{a()||d(c)})}l(T,P),ke(),I()}var go=N('<h3 slot="title"> </h3>'),mo=N("<!> <!> <!>",1),po=N('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function _o(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Xe,"$page",o),a=()=>X(Ct,"$downloadEventHistorySetting",o);let s=j(t,"open",12,!1),n=j(t,"namespace",8),g=j(t,"workflowId",8),p=j(t,"runId",8);const m=()=>{s(!1),vo({namespace:n(),workflowId:g(),runId:p(),settings:v().data.settings,decodeSetting:a()})};be();const P=r(()=>k("common.download")),b=r(()=>k("common.cancel"));Kr(T,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(P)},get cancelText(){return e(b)},get open(){return s()},set open(c){s(c)},$$events:{confirmModal:()=>m(),cancelModal:()=>s(!1)},$$slots:{title:(c,d)=>{var E=go(),C=h(E,!0);w(E),M(H=>z(C,H),[()=>k("common.download-event-history-json")],r),l(c,E)},content:(c,d)=>{var E=po(),C=h(E);en(C,{group:Ct,name:"decode-setting",class:"h-auto overflow-auto",children:($,u)=>{var R=mo(),U=re(R);const B=r(()=>k("events.encoded"));Pt(U,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(B)}});var G=i(U,2);const D=r(()=>k("events.decoded")),S=r(()=>k("events.decoded-description"));Pt(G,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(D)},get description(){return e(S)}});var L=i(G,2);const x=r(()=>k("events.readable")),F=r(()=>k("events.readable-description"));Pt(L,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(x)},get description(){return e(F)}}),l($,R)},$$slots:{default:!0}});var H=i(C,2);fo(H,{}),w(E),l(c,E)}},$$legacy:!0}),ke(),I()}const xo=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],wo=T=>!!T.workflowExecutionStartedEventAttributes,ko=T=>{for(const t of xo)if(T.eventType===t)return!0;return!1},ho=T=>Bt(T)?T.attributes.input:Wr(T)?T.attributes.result===null?null:T.attributes.result:T.attributes,$o=T=>{var s;let t,o,I=!1,v,a;for(const n of T)if(wo(n)){v=n;continue}else if(ko(n)){a=n;continue}return v&&(t=At(((s=v==null?void 0:v.workflowExecutionStartedEventAttributes)==null?void 0:s.input)??null)),a&&(I=Bt(a),o=At(ho(a))),{input:t,results:o,contAsNew:I}};var yo=N('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function bo(T,t){we(t,!1);const[o,I]=He(),v=()=>X(wt,"$fullEventHistory",o),a=()=>X(kt,"$workflowRun",o),s=_(),n=_();A(()=>v(),()=>{f(s,$o(v()))}),A(()=>a(),()=>{f(n,a().workflow.isRunning)}),Fe(),be();var g=yo(),p=h(g);const m=r(()=>k("workflows.input"));Dt(p,{get title(){return e(m)},get content(){return e(s).input},get isRunning(){return e(n)}});var P=i(p,2);const b=r(()=>k("workflows.result"));Dt(P,{get title(){return e(b)},get content(){return e(s).results},get isRunning(){return e(n)}}),w(g),l(T,g),ke(),I()}var To=N('<div class="mb-4"><!></div>');function Eo(T,t){we(t,!1);const[o,I]=He(),v=()=>X(kt,"$workflowRun",o),a=_(),s=_(),n=_();var g=_();A(()=>(e(a),e(s),v()),()=>{(b=>(f(a,b.workflow),f(s,b.workers)))(v())}),A(()=>(e(a),te(g),e(s)),()=>{f(n,(e(a)===null||e(a)===void 0?void 0:e(a).isRunning)&&!(!(f(g,e(s)===null||e(s)===void 0?void 0:e(s).pollers)===null||te(g)===void 0)&&te(g).length))}),Fe(),be();var p=Oe(),m=re(p);{var P=b=>{var c=To(),d=h(c);const E=r(()=>k("workflows.workflow-error-no-workers-title"));Wt(d,{icon:"warning",intent:"warning",get title(){return e(E)},children:(C,H)=>{ge();var $=ue();M(u=>z($,u),[()=>{var u;return k("workflows.workflow-error-no-workers-description",{taskQueue:(u=e(a))==null?void 0:u.taskQueue})}],r),l(C,$)},$$slots:{default:!0}}),w(c),ln(1,c,()=>cn,()=>({duration:200,delay:100})),l(b,c)};Q(m,b=>{e(n)&&b(P)})}l(T,p),ke(),I()}var Po=N('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Ao(T,t){const o=pt(t,["children","$$slots","$$events","$$legacy"]),I=pt(o,["id","open","onToggle","icon"]);we(t,!1);let v=j(t,"id",24,()=>crypto.randomUUID()),a=j(t,"open",12,!1),s=j(t,"onToggle",8,void 0),n=j(t,"icon",8,void 0);const g=async()=>{s()&&await s()(),a(!a())};be();var p=Po(),m=h(p),P=h(m),b=h(P);Je(b,t,"title",{},null);var c=i(b,2);Je(c,t,"description",{},null);var d=i(c,2),E=h(d);Je(E,t,"action",{},null);var C=i(E,2);const H=r(()=>n()?n():a()?"arrow-down":"arrow-right");Qe(C,{get name(){return e(H)}}),w(d),w(P),w(m);var $=i(m,2);let u;var R=h($);Je(R,t,"default",{get open(){return a()}},null),w($),w(p),M(U=>{Be(p,1,`w-full ${I.class??""}`),fe(m,"id",`${v()??""}-trigger`),fe(m,"aria-expanded",a()),fe(m,"aria-controls",`${v()??""}-content`),fe($,"id",`${v()??""}-content`),fe($,"aria-labelledby",`${v()??""}-trigger`),u=Be($,1,"block w-full bg-primary p-2",null,u,U)},[()=>({hidden:!a()})],r),_t("click",m,g),l(T,p),ke()}var Io=N("<!> <!>",1),Ho=N("<!> <!>",1),Wo=N('<p class="flex items-center gap-2"> <!></p>'),So=N('<p class="flex items-center gap-2"> <!></p>'),Co=N('<p class="flex items-center gap-2"> <!></p>'),Fo=N('<p class="flex items-center gap-2"> <!></p>'),jo=N('<p class="flex items-center gap-2"> <!></p>'),zo=N('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Ro=N('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Nt(T,t){we(t,!0);const[o,I]=He(),v=()=>X($t,"$timeFormat",o);var a,s,n,g;const p=_e(()=>Ve(t.callback.lastAttemptCompleteTime,v())),m=_e(()=>Ve(t.callback.nextAttemptScheduleTime,v())),P=_e(()=>(a=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||a===void 0?void 0:a.message),b=_e(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),c=_e(()=>(n=(s=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||s===void 0?void 0:s.nexus)===null||n===void 0?void 0:n.url),d={Standby:k("nexus.callback.standby"),Scheduled:k("nexus.callback.scheduled"),"Backing Off":k("nexus.callback.backing-off"),Failed:k("nexus.callback.failed"),Succeeded:k("nexus.callback.succeeded")},E="Failed",C=_e(()=>t.callback.state===E),H=_e(()=>d[t.callback.state]||k("nexus.nexus-callback")),$=_e(()=>((g=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||g===void 0?void 0:g.links)||[]),u=_e(()=>!e($).length&&!t.link&&e(c)),R=_e(()=>e(C)?"error":"info");Wt(T,{icon:"nexus",get intent(){return e(R)},get title(){return e(H)},children:(U,B)=>{var G=Ro(),D=re(G),S=h(D);{var L=q=>{var O=Oe(),Z=re(O);nt(Z,17,()=>e($),oe=>{var K,Te,ve;return((Te=(K=oe.workflowEvent)==null?void 0:K.eventRef)==null?void 0:Te.eventId)||((ve=oe.workflowEvent)==null?void 0:ve.requestIdRef.requestId)},(oe,K,Te,ve)=>{var pe=Io(),Ie=re(pe);ut(Ie,{get link(){return e(K)}});var Ce=i(Ie,2);const We=_e(()=>k("nexus.link-namespace")),me=_e(()=>Gt({namespace:e(K).workflowEvent.namespace}));ut(Ce,{get link(){return e(K)},get label(){return e(We)},get value(){return e(K).workflowEvent.namespace},get href(){return e(me)}}),l(oe,pe)}),l(q,O)},x=(q,O)=>{{var Z=oe=>{var K=Ho(),Te=re(K);ut(Te,{get link(){return t.link}});var ve=i(Te,2);const pe=_e(()=>k("nexus.link-namespace")),Ie=_e(()=>Gt({namespace:t.link.workflowEvent.namespace}));ut(ve,{get link(){return t.link},get label(){return e(pe)},get value(){return t.link.workflowEvent.namespace},get href(){return e(Ie)}}),l(oe,K)};Q(q,oe=>{t.link&&oe(Z)},O)}};Q(S,q=>{e($).length?q(L):q(x,!1)})}var F=i(S,2),Y=h(F),de=h(Y,!0),he=i(de);Le(he,{type:"subtle",children:(q,O)=>{ge();var Z=ue();M(()=>z(Z,t.callback.state)),l(q,Z)},$$slots:{default:!0}}),w(Y);var le=i(Y,2);{var ee=q=>{var O=Wo(),Z=h(O),oe=i(Z);Le(oe,{type:"subtle",children:(K,Te)=>{ge();var ve=ue();M(()=>z(ve,t.callback.attempt)),l(K,ve)},$$slots:{default:!0}}),w(O),M(K=>z(Z,`${K??""} `),[()=>k("common.attempt")]),l(q,O)};Q(le,q=>{t.callback.attempt&&q(ee)})}var J=i(le,2);{var se=q=>{var O=So(),Z=h(O),oe=i(Z);Le(oe,{type:"subtle",children:(K,Te)=>{ge();var ve=ue();M(()=>z(ve,e(p))),l(K,ve)},$$slots:{default:!0}}),w(O),M(K=>z(Z,`${K??""} `),[()=>k("nexus.last-attempt-completed-time")]),l(q,O)};Q(J,q=>{t.callback.lastAttemptCompleteTime&&q(se)})}var W=i(J,2);{var y=q=>{var O=Co(),Z=h(O),oe=i(Z);Le(oe,{type:"subtle",children:(K,Te)=>{ge();var ve=ue();M(()=>z(ve,e(m))),l(K,ve)},$$slots:{default:!0}}),w(O),M(K=>z(Z,`${K??""} `),[()=>k("nexus.next-attempt-scheduled-time")]),l(q,O)};Q(W,q=>{t.callback.nextAttemptScheduleTime&&q(y)})}w(F);var V=i(F,2);{var ne=q=>{var O=Fo(),Z=h(O),oe=i(Z);Le(oe,{type:"subtle",children:(K,Te)=>{ge();var ve=ue();M(()=>z(ve,e(c))),l(K,ve)},$$slots:{default:!0}}),w(O),M(K=>z(Z,`${K??""} `),[()=>k("nexus.callback-url")]),l(q,O)};Q(V,q=>{e(u)&&q(ne)})}var ae=i(V,2);{var ye=q=>{var O=jo(),Z=h(O),oe=i(Z);Le(oe,{type:"subtle",children:(K,Te)=>{ge();var ve=ue();M(()=>z(ve,e(b))),l(K,ve)},$$slots:{default:!0}}),w(O),M(K=>z(Z,`${K??""} `),[()=>k("nexus.blocked-reason")]),l(q,O)};Q(ae,q=>{e(b)&&q(ye)})}var $e=i(ae,2);{var Ae=q=>{var O=zo(),Z=h(O),oe=h(Z,!0);w(Z);var K=i(Z,2);const Te=_e(()=>k("common.copy-icon-title")),ve=_e(()=>k("common.copy-success-icon-title"));mt(K,{get content(){return e(P)},language:"text",get copyIconTitle(){return e(Te)},get copySuccessIconTitle(){return e(ve)}}),w(O),M(pe=>z(oe,pe),[()=>k("nexus.last-attempt-failure")]),l(q,O)};Q($e,q=>{e(P)&&q(Ae)})}w(D);var ie=i(D,2);lr(ie,()=>t.children??cr),M(q=>z(de,q),[()=>k("common.state")]),l(U,G)},$$slots:{default:!0}}),ke(),I()}var Lo=N('<div class="flex flex-col gap-2"></div>'),Oo=N('<p class="p-1" slot="title"> </p>'),Mo=N('<div class="py-2"><!></div>');function Go(T,t){we(t,!0);const[o,I]=He(),v=()=>X(wt,"$fullEventHistory",o);var a;const s=_e(()=>v()[0]),n=_e(()=>(a=e(s)===null||e(s)===void 0?void 0:e(s).links)===null||a===void 0?void 0:a[0]),g=_e(()=>t.callbacks[0]);Nt(T,{get callback(){return e(g)},get link(){return e(n)},children:(p,m)=>{var P=Oe(),b=re(P);{var c=d=>{var E=Mo(),C=h(E);Ao(C,{children:It,$$slots:{default:(H,$)=>{const u=_e(()=>$.open);var R=Oe(),U=re(R);{var B=G=>{var D=Lo();nt(D,21,()=>t.callbacks.slice(1),ht,(S,L)=>{Nt(S,{get callback(){return e(L)}})}),w(D),l(G,D)};Q(U,G=>{e(u)&&G(B)})}l(H,R)},title:(H,$)=>{var u=Oo(),R=h(u);w(u),M(()=>z(R,`View ${t.callbacks.length-1} other Callbacks`)),l(H,u)}}}),w(E),l(d,E)};Q(b,d=>{t.callbacks.length>1&&d(c)})}l(p,P)},$$slots:{default:!0}}),ke(),I()}var Do=N("<!> <!> <!> <!> <!>",1),Uo=N('<div class="flex flex-col gap-0 px-4 pt-4 xl:px-8"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative px-4 pb-24 xl:px-8"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col border-t border-subtle"><!> <!></div></div> <!>',1);function No(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Xe,"$page",o),a=()=>X(kt,"$workflowRun",o),s=()=>X(at,"$eventFilterSort",o),n=()=>X(tt,"$eventViewType",o),g=()=>X(Vt,"$filteredEventHistory",o),p=()=>X($r,"$currentEventHistory",o),m=()=>X(it,"$pauseLiveUpdates",o),P=()=>X(Ft,"$minimizeEventView",o),b=_(),c=_(),d=_(),E=_(),C=_(),H=_(),$=_(),u=_(),R=_(),U=_();fr(()=>{Et()});let B=_(!1);const G=()=>{e(C)?xe(at,"ascending"):xe(at,"descending")};A(()=>(e(b),v()),()=>{(O=>f(b,O.namespace))(v().params)}),A(()=>(e(c),a()),()=>{(O=>f(c,O.workflow))(a())}),A(()=>e(c),()=>{f(d,e(c)===null||e(c)===void 0?void 0:e(c).pendingActivities)}),A(()=>e(c),()=>{f(E,e(c)===null||e(c)===void 0?void 0:e(c).pendingNexusOperations)}),A(()=>s(),()=>{f(C,s()==="descending")}),A(()=>n(),()=>{f(H,n()==="compact")}),A(()=>(g(),e(d),e(E)),()=>{f($,Zt(g(),"ascending",e(d),e(E)))}),A(()=>(e(C),e($)),()=>{f(u,e(C)?[...e($)].reverse():e($))}),A(()=>(e(C),g()),()=>{f(R,e(C)?[...g()].reverse():g())}),A(()=>p(),()=>{f(U,Zr(p(),"ascending"))}),A(()=>(n(),Et),()=>{n(),Et()}),A(()=>(e(c),m()),()=>{!e(c).isRunning&&m()&&xe(it,!1)}),Fe(),be();var D=Uo(),S=re(D),L=h(S);Eo(L,{});var x=i(L,2),F=h(x);bo(F,{});var Y=i(F,2);{var de=O=>{const Z=r(()=>{var oe;return(oe=e(c))==null?void 0:oe.pendingWorkflowTask});lo(O,{get error(){return e(U)},get pendingTask(){return e(Z)}})};Q(Y,O=>{e(U)&&O(de)})}var he=i(Y,2);{var le=O=>{Go(O,{get callbacks(){return e(c).callbacks}})};Q(he,O=>{var Z,oe;(oe=(Z=e(c))==null?void 0:Z.callbacks)!=null&&oe.length&&O(le)})}w(x),w(S);var ee=i(S,2),J=h(ee);let se;var W=h(J),y=h(W,!0);w(W);var V=i(W,2),ne=h(V);dn(ne,{children:(O,Z)=>{var oe=Do(),K=re(oe);{var Te=Ee=>{const ze=r(()=>e(C)?"descending":"ascending");ft(Ee,{get leadingIcon(){return e(ze)},"data-testid":"zoom-in",size:"sm",$$events:{click:G},children:(Pe,Ge)=>{ge();var De=ue();M(()=>z(De,e(C)?"Descending":"Ascending")),l(Pe,De)},$$slots:{default:!0}})};Q(K,Ee=>{n()!=="json"&&Ee(Te)})}var ve=i(K,2);const pe=r(()=>P()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");vn(ve,{get text(){return e(pe)},top:!0,children:(Ee,ze)=>{const Pe=r(()=>P()?"minimize":"expand");ft(Ee,{get leadingIcon(){return e(Pe)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>xe(Ft,!P())},children:(Ge,De)=>{ge();var Ye=ue();M(()=>z(Ye,P()?"Minimized":"Expanded")),l(Ge,Ye)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ie=i(ve,2);yn(Ie,{get compact(){return e(H)},get minimized(){return P()}});var Ce=i(Ie,2);const We=r(()=>!e(c).isRunning),me=r(()=>m()?"play":"pause");ft(Ce,{get disabled(){return e(We)},get leadingIcon(){return e(me)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>xe(it,!m())},children:(Ee,ze)=>{ge();var Pe=ue();M(()=>z(Pe,m()?"Unfreeze":"Freeze")),l(Ee,Pe)},$$slots:{default:!0}});var Se=i(Ce,2);ft(Se,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>f(B,!0)},children:(Ee,ze)=>{ge();var Pe=ue();M(Ge=>z(Pe,Ge),[()=>k("common.download")],r),l(Ee,Pe)},$$slots:{default:!0}}),l(O,oe)},$$slots:{default:!0}}),w(V),w(J);var ae=i(J,2),ye=h(ae);const $e=r(()=>!!e(U)),Ae=r(()=>P()?360:void 0);rr(ye,{get workflow(){return e(c)},get groups(){return e(u)},get error(){return e($e)},get viewportHeight(){return e(Ae)}});var ie=i(ye,2);_n(ie,{get groups(){return e(u)},get history(){return e(R)},get minimized(){return P()}}),w(ae),w(ee);var q=i(ee,2);_o(q,{get namespace(){return e(b)},get workflowId(){return e(c).id},get runId(){return e(c).runId},get open(){return e(B)},set open(O){f(B,O)},$$legacy:!0}),M((O,Z)=>{se=Be(J,1,"flex flex-wrap items-center justify-between gap-2 bg-off-white/50 py-2 xl:gap-8 dark:bg-space-black/50 svelte-18jakp5",null,se,O),z(y,Z)},[()=>({"sticky-header":!P()}),()=>k("workflows.event-history")],r),l(T,D),ke(),I()}var Vo=N("<!> <!>",1);function ta(T,t){we(t,!1);const[o,I]=He(),v=()=>X(Xe,"$page",o),a=v().params.workflow;be();var s=Vo(),n=re(s);const g=r(()=>`${k("workflows.workflow-history")} | ${a}`);vr(n,{get title(){return e(g)},get url(){return v().url.href}});var p=i(n,2);No(p,{}),l(T,s),ke(),I()}export{ta as component};
