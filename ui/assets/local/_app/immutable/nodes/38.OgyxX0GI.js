import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as L,l as d,a as it,b as M,g as t,s,e as j,d as w,n as C,c as k,r as R,m as n,az as B,f as lt}from"../chunks/Dv5jDC8Z.js";import{a as I,t as Q,b as D}from"../chunks/BM_uyzAk.js";import{i as U}from"../chunks/CM2QeVoh.js";import{s as V,a as $,b as J}from"../chunks/CEr_ApTH.js";import{p as X}from"../chunks/Czn3SK-0.js";import{P as dt}from"../chunks/PLLlBlGt.js";import{t as ct}from"../chunks/CZMG2GAD.js";import{e as pt,i as ft}from"../chunks/CocFUsaO.js";import{E as ut}from"../chunks/B1jkW-Iw.js";import{B as K}from"../chunks/CYIbcSxW.js";import{g as mt}from"../chunks/Bu92rPrM.js";import{i as gt}from"../chunks/DvWFMoAQ.js";import{f as vt}from"../chunks/BDtVEjxn.js";import{f as O,e as wt}from"../chunks/BEr0IQGP.js";import{w as $t}from"../chunks/D6vOFxie.js";var _t=Q('<div class="flex flex-col gap-2 px-8 pb-24 pt-2" data-testid="event-summary-log"><!> <table><thead></thead><tbody class="svelte-4cez6d"></tbody></table> <!></div>');function ht(E,S){L(S,!1);const[f,P]=V(),u=()=>$(X,"$page",f),i=()=>$(O,"$fullEventHistory",f),_=()=>$($t,"$workflowRun",f),v=()=>$(wt,"$eventFilterSort",f),p=n(),m=n(),g=n(),h=n(),r=n(),c=n(),z=n(),F=n(),x=n(),T=n(),y=n(),H=n(),q=n();var b=n();const Y=()=>{J(O,[])},Z=async(e,o,a)=>{i().length||(Y(),J(O,await vt({namespace:e,workflowId:o,runId:a})))},tt=()=>{const e=parseInt(t(r)[0]),o=[],a=e-10;for(let l=0;l<10;l++)a+l>0&&o.push((a+l).toString());s(r,[...o,...t(r)])},et=()=>{const e=parseInt(t(r)[t(r).length-1]),o=[],a=e+1;for(let l=0;l<10;l++)a+l<=i().length&&o.push((a+l).toString());s(r,[...t(r),...o])};d(()=>(t(p),t(m),t(g),t(h),u()),()=>{(e=>(s(p,e.id),s(m,e.namespace),s(g,e.workflow),s(h,e.run)))(u().params)}),d(()=>t(p),()=>{s(r,[t(p)])}),d(()=>(t(m),t(g),t(h)),()=>{Z(t(m),t(g),t(h))}),d(()=>(t(c),_()),()=>{(e=>s(c,e.workflow))(_())}),d(()=>t(c),()=>{s(z,t(c)===null||t(c)===void 0?void 0:t(c).pendingActivities)}),d(()=>t(c),()=>{s(F,t(c)===null||t(c)===void 0?void 0:t(c).pendingNexusOperations)}),d(()=>(i(),t(z),t(F)),()=>{s(x,mt(i(),"ascending",t(z),t(F)))}),d(()=>(v(),t(x)),()=>{s(T,v()==="ascending"?t(x):[...t(x)].reverse())}),d(()=>(i(),t(r)),()=>{s(y,i().filter(e=>t(r).includes(e.id)))}),d(()=>t(y),()=>{s(H,!t(y).length)}),d(()=>(B(b),i()),()=>{s(q,s(b,i()[i().length-1])===null||B(b)===void 0?void 0:B(b).id)}),it(),U();var N=_t(),G=j(N);const st=w(()=>t(r)[0]==="1"||t(H));K(G,{variant:"secondary",size:"xs",leadingIcon:"arrow-up",get disabled(){return t(st)},"data-testid":"load-previous",$$events:{click:tt},children:(e,o)=>{C();var a=D("Show Previous 10");I(e,a)},$$slots:{default:!0}});var A=k(G,2),W=k(j(A));pt(W,5,()=>t(y),ft,(e,o,a)=>{const l=w(()=>t(o).id===t(p)),rt=w(()=>t(T).find(at=>gt(t(o))&&at.eventIds.has(t(o).id)));ut(e,{get event(){return t(o)},index:a,get expanded(){return t(l)},get group(){return t(rt)},get initialItem(){return i()[0]}})}),R(W),R(A);var ot=k(A,2);const nt=w(()=>t(r)[t(r).length-1]===t(q)||t(H));K(ot,{variant:"secondary",size:"xs",leadingIcon:"arrow-down",get disabled(){return t(nt)},"data-testid":"load-next",$$events:{click:et},children:(e,o)=>{C();var a=D("Show Next 10");I(e,a)},$$slots:{default:!0}}),R(N),I(E,N),M(),P()}var xt=Q("<!> <!>",1);function Gt(E,S){L(S,!1);const[f,P]=V(),u=()=>$(X,"$page",f),i=u().params.workflow,_=u().params.id;U();var v=xt(),p=lt(v);const m=w(()=>`${ct("workflows.workflow-history")} | ${i} | Event ${_}`);dt(p,{get title(){return t(m)},get url(){return u().url.href}});var g=k(p,2);ht(g,{}),I(E,v),M(),P()}export{Gt as component};
