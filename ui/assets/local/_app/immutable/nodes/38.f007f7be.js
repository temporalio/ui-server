import{S as H,b as J,a as M,ar as U,m as T,p as C,q as S,k as $,f as b,as as X,j as _,g,K as W,C as w,D as v,E as y,n as m,F as I,A as Z,a0 as x,c as L,d as F,u as B,L as D,a1 as ee,e as K,z as te,h as ne,a7 as oe,w as z,x as A}from"../chunks/index.9b814669.js";import{p as Y}from"../chunks/stores.37a36b51.js";import{P as re}from"../chunks/page-title.83a2b61d.js";import{t as q}from"../chunks/translate.c28e5b4f.js";import{B as le}from"../chunks/button.ae039a8f.js";import{C as ae}from"../chunks/code-block.3acfd3a4.js";import{E as se}from"../chunks/empty-state.f50463e1.js";import{L as ce}from"../chunks/loading.12386e1b.js";import{S as ie,a as ue}from"../chunks/simple-select.76f3af7d.js";import{T as fe}from"../chunks/toggle-switch.03367243.js";import{a as me,b as pe}from"../chunks/query-service.d76e3368.js";import{a as $e}from"../chunks/auth-user.2efaafbd.js";import{s as _e}from"../chunks/parse-with-big-int.0036a80a.js";function O(r){const t=typeof r[15]!="string"?_e(r[15]):r[15];r[16]=t}function R(r,t,o){const e=r.slice();return e[17]=t[o],e}function ge(r){var e;let t,o;return t=new se({props:{title:q("common.error-occurred"),content:q("workflows.no-workers-running-message"),error:(e=r[20])==null?void 0:e.message}}),{c(){w(t.$$.fragment)},l(n){v(t.$$.fragment,n)},m(n,l){y(t,n,l),o=!0},p:m,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){g(t.$$.fragment,n),o=!1},d(n){I(t,n)}}}function he(r){let t,o,e,n,l,a,i,s,u,k,h,E,j;function Q(c){r[5](c)}let N={id:"query-select",label:q("workflows.query-type"),"data-testid":"query-select",$$slots:{default:[ke]},$$scope:{ctx:r}};r[0]!==void 0&&(N.value=r[0]),e=new ie({props:N}),Z.push(()=>x(e,"value",Q)),a=new le({props:{leadingIcon:"retry",loading:Ee,$$slots:{default:[be]},$$scope:{ctx:r}}}),a.$on("click",r[6]),u=new fe({props:{label:q("workflows.json-formatting"),labelPosition:"left",id:"json-formatting",checked:r[2]}}),u.$on("change",r[7]);let p={ctx:r,current:null,token:null,hasCatch:!1,pending:ye,then:ve,catch:we,value:15,blocks:[,,,]};return U(E=r[1],p),{c(){t=T("div"),o=T("div"),w(e.$$.fragment),l=L(),w(a.$$.fragment),i=L(),s=T("div"),w(u.$$.fragment),k=L(),h=T("div"),p.block.c(),this.h()},l(c){t=C(c,"DIV",{class:!0});var f=S(t);o=C(f,"DIV",{class:!0});var d=S(o);v(e.$$.fragment,d),l=F(d),v(a.$$.fragment,d),d.forEach($),i=F(f),s=C(f,"DIV",{class:!0});var P=S(s);v(u.$$.fragment,P),P.forEach($),f.forEach($),k=F(c),h=C(c,"DIV",{class:!0});var V=S(h);p.block.l(V),V.forEach($),this.h()},h(){B(o,"class","flex items-center gap-4"),B(s,"class","flex justify-end"),B(t,"class","flex justify-between"),B(h,"class","my-2 flex h-full items-start")},m(c,f){b(c,t,f),D(t,o),y(e,o,null),D(o,l),y(a,o,null),D(t,i),D(t,s),y(u,s,null),b(c,k,f),b(c,h,f),p.block.m(h,p.anchor=null),p.mount=()=>h,p.anchor=null,j=!0},p(c,f){r=c;const d={};f&2097152&&(d.$$scope={dirty:f,ctx:r}),!n&&f&1&&(n=!0,d.value=r[0],ee(()=>n=!1)),e.$set(d);const P={};f&2097152&&(P.$$scope={dirty:f,ctx:r}),a.$set(P);const V={};f&4&&(V.checked=r[2]),u.$set(V),p.ctx=r,f&2&&E!==(E=r[1])&&U(E,p)||X(p,r,f)},i(c){j||(_(e.$$.fragment,c),_(a.$$.fragment,c),_(u.$$.fragment,c),_(p.block),j=!0)},o(c){g(e.$$.fragment,c),g(a.$$.fragment,c),g(u.$$.fragment,c);for(let f=0;f<3;f+=1){const d=p.blocks[f];g(d)}j=!1},d(c){c&&$(t),I(e),I(a),I(u),c&&$(k),c&&$(h),p.block.d(),p.token=null,p=null}}}function de(r){let t=r[17]+"",o;return{c(){o=z(t)},l(e){o=A(e,t)},m(e,n){b(e,o,n)},p:m,d(e){e&&$(o)}}}function G(r){let t,o;return t=new ue({props:{value:r[17],$$slots:{default:[de]},$$scope:{ctx:r}}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),o=!0},p(e,n){const l={};n&2097152&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){g(t.$$.fragment,e),o=!1},d(e){I(t,e)}}}function ke(r){let t,o,e=r[14],n=[];for(let a=0;a<e.length;a+=1)n[a]=G(R(r,e,a));const l=a=>g(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();t=K()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);t=K()},m(a,i){for(let s=0;s<n.length;s+=1)n[s].m(a,i);b(a,t,i),o=!0},p(a,i){if(i&8){e=a[14];let s;for(s=0;s<e.length;s+=1){const u=R(a,e,s);n[s]?(n[s].p(u,i),_(n[s],1)):(n[s]=G(u),n[s].c(),_(n[s],1),n[s].m(t.parentNode,t))}for(te(),s=e.length;s<n.length;s+=1)l(s);ne()}},i(a){if(!o){for(let i=0;i<e.length;i+=1)_(n[i]);o=!0}},o(a){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)g(n[i]);o=!1},d(a){oe(n,a),a&&$(t)}}}function be(r){let t=q("common.refresh")+"",o;return{c(){o=z(t)},l(e){o=A(e,t)},m(e,n){b(e,o,n)},p:m,d(e){e&&$(o)}}}function we(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ve(r){O(r);let t,o;return t=new ae({props:{content:r[16],language:r[2]?"json":"text",copyIconTitle:q("common.copy-icon-title"),copySuccessIconTitle:q("common.copy-success-icon-title")}}),{c(){w(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){y(t,e,n),o=!0},p(e,n){O(e);const l={};n&2&&(l.content=e[16]),n&4&&(l.language=e[2]?"json":"text"),t.$set(l)},i(e){o||(_(t.$$.fragment,e),o=!0)},o(e){g(t.$$.fragment,e),o=!1},d(e){I(t,e)}}}function ye(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ie(r){let t,o,e,n,l=q("workflows.no-workers-failure-message")+"",a,i;return o=new ce({}),{c(){t=T("div"),w(o.$$.fragment),e=L(),n=T("p"),a=z(l),this.h()},l(s){t=C(s,"DIV",{class:!0});var u=S(t);v(o.$$.fragment,u),e=F(u),n=C(u,"P",{});var k=S(n);a=A(k,l),k.forEach($),u.forEach($),this.h()},h(){B(t,"class","text-center")},m(s,u){b(s,t,u),y(o,t,null),D(t,e),D(t,n),D(n,a),i=!0},p:m,i(s){i||(_(o.$$.fragment,s),i=!0)},o(s){g(o.$$.fragment,s),i=!1},d(s){s&&$(t),I(o)}}}function qe(r){let t,o,e={ctx:r,current:null,token:null,hasCatch:!0,pending:Ie,then:he,catch:ge,value:14,error:20,blocks:[,,,]};return U(r[3],e),{c(){t=T("section"),e.block.c()},l(n){t=C(n,"SECTION",{});var l=S(t);e.block.l(l),l.forEach($)},m(n,l){b(n,t,l),e.block.m(t,e.anchor=null),e.mount=()=>t,e.anchor=null,o=!0},p(n,[l]){r=n,X(e,r,l)},i(n){o||(_(e.block),o=!0)},o(n){for(let l=0;l<3;l+=1){const a=e.blocks[l];g(a)}o=!1},d(n){n&&$(t),e.block.d(),e.token=null,e=null}}}let Ee=!1;function je(r,t,o){let e,n;W(r,$e,c=>o(8,e=c)),W(r,Y,c=>o(9,n=c));const{namespace:l,workflow:a,run:i}=n.params,s={id:a,runId:i};let u,k=me({namespace:l,workflow:s}).then(c=>(o(0,u=u||c[0]),c)),h;const E=c=>{var f;o(1,h=pe({namespace:l,workflow:s,queryType:c},(f=n.data)===null||f===void 0?void 0:f.settings,e==null?void 0:e.accessToken))};let j=!0;function Q(c){u=c,o(0,u)}const N=()=>E(u),p=()=>o(2,j=!j);return r.$$.update=()=>{r.$$.dirty&1&&u&&E(u)},[u,h,j,k,E,Q,N,p]}class Te extends H{constructor(t){super(),J(this,t,je,qe,M,{})}}function Ce(r){let t,o,e,n;return t=new re({props:{title:`${q("workflows.queries-tab")} | ${r[1]}`,url:r[0].url.href}}),e=new Te({}),{c(){w(t.$$.fragment),o=L(),w(e.$$.fragment)},l(l){v(t.$$.fragment,l),o=F(l),v(e.$$.fragment,l)},m(l,a){y(t,l,a),b(l,o,a),y(e,l,a),n=!0},p(l,[a]){const i={};a&1&&(i.url=l[0].url.href),t.$set(i)},i(l){n||(_(t.$$.fragment,l),_(e.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),g(e.$$.fragment,l),n=!1},d(l){I(t,l),l&&$(o),I(e,l)}}}function Se(r,t,o){let e;W(r,Y,l=>o(0,e=l));const n=e.params.workflow;return[e,n]}class Oe extends H{constructor(t){super(),J(this,t,Se,Ce,M,{})}}export{Oe as component};
