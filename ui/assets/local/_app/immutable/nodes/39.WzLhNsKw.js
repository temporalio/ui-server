import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as j,az as e,t as G,h as A,c as m,r as E,d as g,b as M,n as R,k as q,g as t,s as B,f as st,j as rt}from"../chunks/CtXwlho8.js";import{i as nt}from"../chunks/D4D3ThYu.js";import{s as W,a as $,b as O}from"../chunks/CI9zuxJp.js";import{p as it}from"../chunks/lx_gmyuu.js";import{P as at}from"../chunks/BYpUB0sF.js";import{t as lt}from"../chunks/D2OY9xdY.js";import{e as dt,i as pt}from"../chunks/DN_bdWMP.js";import{o as ct}from"../chunks/BBGlwGsK.js";import{p as vt}from"../chunks/BPJRIdRT.js";import{E as ut}from"../chunks/B8K0ihsC.js";import{B as T}from"../chunks/CWc85qTY.js";import{g as ft}from"../chunks/CqhZ5u8H.js";import{i as mt}from"../chunks/FWorHOUO.js";import{f as gt}from"../chunks/YscIJItO.js";import{f as S,e as $t}from"../chunks/C2YDySxp.js";import{w as wt}from"../chunks/D9pSO_rq.js";var ht=G('<div class="flex flex-col gap-2 px-8 pb-24 pt-2" data-testid="event-summary-log"><!> <table><thead></thead><tbody class="svelte-1gx2z22"></tbody></table> <!></div>');function xt(w,h){j(h,!0);const[c,x]=W(),i=()=>$(S,"$fullEventHistory",c),_=()=>$(wt,"$workflowRun",c),I=()=>$($t,"$eventFilterSort",c);var p;const l=e(()=>vt.params),v=e(()=>t(l).id),k=e(()=>t(l).namespace),C=e(()=>t(l).workflow),D=e(()=>t(l).run);let a=e(()=>[t(v)]);const J=()=>{O(S,[])},K=async(s,o,r)=>{i().length||(J(),O(S,await gt({namespace:s,workflowId:o,runId:r})))};ct(()=>{K(t(k),t(C),t(D))});const d=e(()=>_().workflow),L=e(()=>t(d)===null||t(d)===void 0?void 0:t(d).pendingActivities),Q=e(()=>t(d)===null||t(d)===void 0?void 0:t(d).pendingNexusOperations),P=e(()=>ft(i(),"ascending",t(L),t(Q))),U=e(()=>I()==="ascending"?t(P):[...t(P)].reverse()),u=e(()=>i().find(s=>{var o,r,n;return s.id===t(v)||s.id===((n=(r=(o=t(d).workflowExtendedInfo)===null||o===void 0?void 0:o.requestIdInfos)===null||r===void 0?void 0:r[t(v)])===null||n===void 0?void 0:n.eventId)})),z=e(()=>i().filter(s=>t(a).includes(s.id)||s.id===(t(u)===null||t(u)===void 0?void 0:t(u).id))),F=e(()=>!t(z).length),V=e(()=>(p=i()[i().length-1])===null||p===void 0?void 0:p.id),X=()=>{const s=parseInt(t(a)[0]),o=[],r=s-10;for(let n=0;n<10;n++)r+n>0&&o.push((r+n).toString());B(a,[...o,...t(a)],!0)},Y=()=>{const s=parseInt(t(a)[t(a).length-1]),o=[],r=s+1;for(let n=0;n<10;n++)r+n<=i().length&&o.push((r+n).toString());B(a,[...t(a),...o],!0)};var b=ht(),H=A(b);const Z=e(()=>t(a)[0]==="1"||t(F));T(H,{variant:"secondary",size:"xs",leadingIcon:"arrow-up",get disabled(){return t(Z)},"data-testid":"load-previous",$$events:{click:X},children:(s,o)=>{R();var r=q("Show Previous 10");g(s,r)},$$slots:{default:!0}});var y=m(H,2),N=m(A(y));dt(N,21,()=>t(z),pt,(s,o,r)=>{const n=e(()=>{var f;return t(o).id===((f=t(u))==null?void 0:f.id)}),ot=e(()=>t(U).find(f=>mt(t(o))&&f.eventIds.has(t(o).id)));ut(s,{get event(){return t(o)},index:r,get expanded(){return t(n)},get group(){return t(ot)},get initialItem(){return i()[0]}})}),E(N),E(y);var tt=m(y,2);const et=e(()=>t(a)[t(a).length-1]===t(V)||t(F));T(tt,{variant:"secondary",size:"xs",leadingIcon:"arrow-down",get disabled(){return t(et)},"data-testid":"load-next",$$events:{click:Y},children:(s,o)=>{R();var r=q("Show Next 10");g(s,r)},$$slots:{default:!0}}),E(b),g(w,b),M(),x()}var _t=G("<!> <!>",1);function Gt(w,h){j(h,!1);const[c,x]=W(),i=()=>$(it,"$page",c),_=i().params.workflow,I=i().params.id;nt();var p=_t(),l=st(p);const v=rt(()=>`${lt("workflows.workflow-history")} | ${_} | Event ${I}`);at(l,{get title(){return t(v)},get url(){return i().url.href}});var k=m(l,2);xt(k,{}),g(w,p),M(),x()}export{Gt as component};
