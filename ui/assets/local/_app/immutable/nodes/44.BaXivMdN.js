import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as Ht,u as i,t as b,i as r,r as a,c as s,j as w,e as n,b as At,g as t,f as A,h as gt,n as z,k as B,o as Dt}from"../chunks/CYx2j9em.js";import{i as Jt}from"../chunks/HoZrOv-6.js";import{s as Nt,a as $t}from"../chunks/DnRAdnAf.js";import{p as Kt}from"../chunks/DKVY9787.js";import{P as Mt}from"../chunks/DN2Bw11a.js";import{t as _}from"../chunks/BXv1jDVW.js";import{s as o}from"../chunks/BjCW00Pv.js";import{i as H}from"../chunks/DeQvpgQS.js";import{e as Et,i as bt}from"../chunks/C1OgRA7l.js";import{p as Qt}from"../chunks/ZUPUF7oX.js";import{L as C}from"../chunks/DNKpmWE1.js";import{T as Pt,a as It,b as yt}from"../chunks/BDvrbBIF.js";import{g as Ut}from"../chunks/XGHQuN6J.js";import{g as Vt,a as Xt}from"../chunks/78b2MrH2.js";import{f as Yt}from"../chunks/Dw3KwSts.js";import{w as Zt}from"../chunks/WemCyz5V.js";import{g as Rt}from"../chunks/y4tkuOQ8.js";import{k as te}from"../chunks/DE5dmXvD.js";import{b as Lt,c as Ot,a as Tt}from"../chunks/DQzcCMd8.js";import{f as ee}from"../chunks/DNNVWk-J.js";var re=b("<p> </p>"),ae=b('<td class="break-all text-left" data-testid="caller-event"><!></td> <td class="break-all text-left" data-testid="link-event"><!></td> <td class="break-all text-left" data-testid="link-namespace"><!></td> <td class="break-all text-left" data-testid="handler-event"><!></td>',1),oe=b('<caption class="sr-only" slot="caption"> </caption>'),se=b('<th class="w-24"> </th> <th> </th> <th> </th> <th> </th>',1),ne=b("<h3>Inbound</h3> <!>",1),le=b(" <!>",1),ie=b('<td class="break-all text-left" data-testid="link-event"><!></td> <td class="break-all text-left" data-testid="link-endpoint"> </td> <td class="break-all text-left" data-testid="link-service"> </td> <td class="break-all text-left" data-testid="link-operation"> </td> <td class="break-all text-left" data-testid="link-namespace"><!></td> <td class="break-all text-left" data-testid="link-href"><!></td> <td class="break-all text-left" data-testid="link-href"><!></td>',1),de=b('<caption class="sr-only" slot="caption"> </caption>'),ve=b('<th class="w-28"> </th> <th> </th> <th> </th> <th> </th> <th> </th> <th> </th> <th> </th>',1),fe=b("<h3>Outbound</h3> <!>",1),ue=b('<section class="flex flex-col gap-4"><h2 data-testid="nexus-links-title"> </h2> <!> <!> <!></section>');function pe(ft,ut){Ht(ut,!0);const[at,pt]=Nt(),ot=()=>$t(Zt,"$workflowRun",at),st=()=>$t(Yt,"$fullEventHistory",at),M=i(()=>Qt.params),Y=i(()=>t(M).namespace),nt=i(()=>t(M).workflow),lt=i(()=>t(M).run),Q=i(()=>ot().workflow),St=i(()=>t(Q)===null||t(Q)===void 0?void 0:t(Q).pendingActivities),Ft=i(()=>t(Q)===null||t(Q)===void 0?void 0:t(Q).pendingNexusOperations),qt=i(()=>Ut(st(),"ascending",t(St),t(Ft))),ct=i(()=>t(qt).filter(p=>{var d;return p.category==="nexus"&&((d=p.links)===null||d===void 0?void 0:d.length)})),wt=i(()=>Vt(st()));var _t=ue(),ht=r(_t),jt=r(ht,!0);a(ht);var kt=s(ht,2);{var Gt=p=>{var d=re(),Z=r(d,!0);a(d),w(m=>o(Z,m),[()=>_("nexus.links-empty-state")]),n(p,d)};H(kt,p=>{var d;!((d=t(wt))!=null&&d.length)&&!t(ct).length&&p(Gt)})}var mt=s(kt,2);{var Wt=p=>{var d=ne(),Z=s(A(d),2);Pt(Z,{class:"mb-6 w-full min-w-[600px]",fixed:!0,children:(m,tt)=>{var f=gt(),N=A(f);Et(N,17,()=>t(wt),bt,(x,h)=>{const e=i(()=>Xt(t(h)));yt(x,{"data-testid":"worker-row",children:($,P)=>{var I=ae(),T=A(I),g=r(T);{var D=u=>{const l=i(()=>Rt(t(e)));C(u,{get href(){return t(l)},children:(E,X)=>{z();var L=B();w(()=>{var it,dt;return o(L,(dt=(it=t(e).workflowEvent)==null?void 0:it.eventRef)==null?void 0:dt.eventId)}),n(E,L)},$$slots:{default:!0}})};H(g,u=>{var l;(l=t(e))!=null&&l.workflowEvent&&u(D)})}a(T);var y=s(T,2),S=r(y);{var F=u=>{const l=i(()=>Ot({namespace:t(e).workflowEvent.namespace,workflow:t(e).workflowEvent.workflowId,run:t(e).workflowEvent.runId}));C(u,{get href(){return t(l)},children:(E,X)=>{z();var L=B();w(()=>o(L,t(e).workflowEvent.workflowId)),n(E,L)},$$slots:{default:!0}})};H(S,u=>{var l;(l=t(e))!=null&&l.workflowEvent&&u(F)})}a(y);var R=s(y,2),U=r(R);{var J=u=>{const l=i(()=>Tt({namespace:t(e).workflowEvent.namespace}));C(u,{get href(){return t(l)},children:(E,X)=>{z();var L=B();w(()=>o(L,t(e).workflowEvent.namespace)),n(E,L)},$$slots:{default:!0}})};H(U,u=>{var l;(l=t(e))!=null&&l.workflowEvent&&u(J)})}a(R);var V=s(R,2),K=r(V);const et=i(()=>Lt({namespace:t(Y),workflow:t(nt),run:t(lt),eventId:t(h).id}));C(K,{get href(){return t(et)},children:(u,l)=>{z();var E=B();w(()=>o(E,`${t(h).name??""}
              (${t(h).id??""})`)),n(u,E)},$$slots:{default:!0}}),a(V),n($,I)},$$slots:{default:!0}})}),n(m,f)},$$slots:{default:!0,caption:(m,tt)=>{var f=oe(),N=r(f,!0);a(f),w(x=>o(N,x),[()=>_("workflows.workers-tab")]),n(m,f)},headers:(m,tt)=>{It(m,{slot:"headers",children:(f,N)=>{var x=se(),h=A(x),e=r(h,!0);a(h);var $=s(h,2),P=r($,!0);a($);var I=s($,2),T=r(I,!0);a(I);var g=s(I,2),D=r(g,!0);a(g),w((y,S,F,R)=>{o(e,y),o(P,S),o(T,F),o(D,R)},[()=>_("nexus.caller-event"),()=>_("nexus.caller-workflow"),()=>_("nexus.caller-namespace"),()=>_("nexus.handler-event")]),n(f,x)},$$slots:{default:!0}})}}}),n(p,d)};H(mt,p=>{var d;(d=t(wt))!=null&&d.length&&p(Wt)})}var zt=s(mt,2);{var Bt=p=>{var d=fe(),Z=s(A(d),2);Pt(Z,{class:"mb-6 w-full min-w-[600px]",fixed:!0,children:(m,tt)=>{var f=gt(),N=A(f);Et(N,17,()=>t(ct),bt,(x,h)=>{const e=i(()=>{var P;return(P=t(h).links)==null?void 0:P[0]}),$=i(()=>t(h).eventList.find(P=>te(P)));yt(x,{"data-testid":"worker-row",children:(P,I)=>{var T=ie(),g=A(T),D=r(g);const y=i(()=>Lt({namespace:t(Y),workflow:t(nt),run:t(lt),eventId:t($).id}));C(D,{get href(){return t(y)},children:(c,v)=>{z();var k=B();w(()=>o(k,t($).id)),n(c,k)},$$slots:{default:!0}}),a(g);var S=s(g,2),F=r(S,!0);a(S);var R=s(S,2),U=r(R,!0);a(R);var J=s(R,2),V=r(J,!0);a(J);var K=s(J,2),et=r(K);{var u=c=>{const v=i(()=>{var k,q;return Tt({namespace:(q=(k=t(e))==null?void 0:k.workflowEvent)==null?void 0:q.namespace})});C(c,{get href(){return t(v)},children:(k,q)=>{z();var O=B();w(()=>{var j,vt;return o(O,(vt=(j=t(e))==null?void 0:j.workflowEvent)==null?void 0:vt.namespace)}),n(k,O)},$$slots:{default:!0}})};H(et,c=>{var v;(v=t(e))!=null&&v.workflowEvent&&c(u)})}a(K);var l=s(K,2),E=r(l);{var X=c=>{const v=i(()=>Ot({namespace:t(e).workflowEvent.namespace,workflow:t(e).workflowEvent.workflowId,run:t(e).workflowEvent.runId}));C(c,{get href(){return t(v)},children:(k,q)=>{z();var O=B();w(()=>o(O,t(e).workflowEvent.workflowId)),n(k,O)},$$slots:{default:!0}})};H(E,c=>{var v;(v=t(e))!=null&&v.workflowEvent&&c(X)})}a(l);var L=s(l,2),it=r(L);{var dt=c=>{const v=i(()=>Rt(t(e)));C(c,{get href(){return t(v)},children:(k,q)=>{z();var O=le(),j=A(O),vt=s(j);{var Ct=G=>{var W=B();w(()=>o(W,`(${t(e).workflowEvent.eventRef.eventId??""})`)),n(G,W)};H(vt,G=>{var W,rt;(rt=(W=t(e).workflowEvent)==null?void 0:W.eventRef)!=null&&rt.eventId&&G(Ct)})}w(G=>o(j,`${G??""} `),[()=>{var G,W,rt,xt;return ee(((W=(G=t(e).workflowEvent)==null?void 0:G.eventRef)==null?void 0:W.eventType)||((xt=(rt=t(e).workflowEvent)==null?void 0:rt.requestIdRef)==null?void 0:xt.eventType),"EventType")}]),n(k,O)},$$slots:{default:!0}})};H(it,c=>{var v;(v=t(e))!=null&&v.workflowEvent&&c(dt)})}a(L),w(()=>{var c,v,k,q,O,j;o(F,(v=(c=t($))==null?void 0:c.nexusOperationScheduledEventAttributes)==null?void 0:v.endpoint),o(U,(q=(k=t($))==null?void 0:k.nexusOperationScheduledEventAttributes)==null?void 0:q.service),o(V,(j=(O=t($))==null?void 0:O.nexusOperationScheduledEventAttributes)==null?void 0:j.operation)}),n(P,T)},$$slots:{default:!0}})}),n(m,f)},$$slots:{default:!0,caption:(m,tt)=>{var f=de(),N=r(f,!0);a(f),w(x=>o(N,x),[()=>_("workflows.workers-tab")]),n(m,f)},headers:(m,tt)=>{It(m,{slot:"headers",children:(f,N)=>{var x=ve(),h=A(x),e=r(h,!0);a(h);var $=s(h,2),P=r($,!0);a($);var I=s($,2),T=r(I,!0);a(I);var g=s(I,2),D=r(g,!0);a(g);var y=s(g,2),S=r(y,!0);a(y);var F=s(y,2),R=r(F,!0);a(F);var U=s(F,2),J=r(U,!0);a(U),w((V,K,et,u,l,E,X)=>{o(e,V),o(P,K),o(T,et),o(D,u),o(S,l),o(R,E),o(J,X)},[()=>_("nexus.source-event"),()=>_("nexus.nexus-endpoint-simple"),()=>_("nexus.nexus-service"),()=>_("nexus.nexus-operation"),()=>_("nexus.handler-namespace"),()=>_("nexus.handler-workflow"),()=>_("nexus.handler-event")]),n(f,x)},$$slots:{default:!0}})}}}),n(p,d)};H(zt,p=>{t(ct).length&&p(Bt)})}a(_t),w(p=>o(jt,p),[()=>_("workflows.nexus-links-tab")]),n(ft,_t),At(),pt()}var ce=b("<!> <!>",1);function qe(ft,ut){Ht(ut,!1);const[at,pt]=Nt(),ot=()=>$t(Kt,"$page",at),st=ot().params.workflow;Jt();var M=ce(),Y=A(M);const nt=Dt(()=>`${_("workflows.nexus-links-tab")} | ${st}`);Mt(Y,{get title(){return t(nt)},get url(){return ot().url.href}});var lt=s(Y,2);pe(lt,{}),n(ft,M),At(),pt()}export{qe as component};
