import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as M,aS as at,g as t,s as ot,f as S,e as u,b as N,ax as st,v as r,j as y,r as b,i as j,c as T,h as d,t as z,n as lt,k as nt,o as it}from"../chunks/DZ1-1a5q.js";import{i as ct}from"../chunks/Bby3K3wO.js";import{s as O,a as R}from"../chunks/TaaIktnz.js";import{p as mt}from"../chunks/BrSpNkAu.js";import{P as ft}from"../chunks/BvHFjIFb.js";import{t as a}from"../chunks/DEjs8ZrU.js";import{s as A}from"../chunks/DxwvfIkW.js";import{a as pt}from"../chunks/Ave-ZrbK.js";import{i as B}from"../chunks/DnKg3jxh.js";import{p as H}from"../chunks/D_t7VQAt.js";import{t as ut}from"../chunks/4Dr_hdgK.js";import{A as J}from"../chunks/BxPfauF3.js";import{C as vt}from"../chunks/DRZCEzQy.js";import{E as K}from"../chunks/DEyS7vMf.js";import{L as wt}from"../chunks/f5RCgCKP.js";import{S as F}from"../chunks/BUscNSy1.js";import{g as kt}from"../chunks/DKnRd3w7.js";import{a as dt}from"../chunks/urDygoU8.js";import{w as gt,r as _t}from"../chunks/D3HmRl1U.js";var $t=S('<!> <p> </p> <div class="my-2 flex h-full items-start"><!></div>',1),ht=S('<div class="flex flex-col gap-2"><!> <!> <!></div>'),xt=S("<p> <!> </p>"),yt=S("<section><!></section>");function bt(C,E){M(E,!0);const _=()=>R(gt,"$workflowRun",w),L=()=>R(ut,"$timestamp",w),q=()=>R(_t,"$refresh",w),$=()=>R(dt,"$authUser",w),[w,I]=O();let c=r(()=>_().workflow),P=r(()=>_().workers);const V=r(()=>H.params.namespace);let G=st(void 0),X=r(()=>L()(q().timestamp?new Date(q().timestamp):new Date,{format:"short"}));const Y=()=>{var l;return kt({workflow:t(c),namespace:t(V)},(l=H.data)===null||l===void 0?void 0:l.settings,$()===null||$()===void 0?void 0:$().accessToken)};at(()=>{!(t(c)===null||t(c)===void 0)&&t(c).isRunning&&ot(G,Y(),!0)});var Q=yt(),Z=y(Q);{var tt=l=>{var k=j(),g=T(k);pt(g,()=>t(G),m=>{var o=ht(),f=y(o);F(f,{class:"h-16 w-1/3 rounded-sm"});var v=d(f,2);F(v,{class:"h-3 w-32"});var p=d(v,2);F(p,{class:"h-48 w-full rounded-sm"}),b(o),u(m,o)},(m,o)=>{var f=j(),v=T(f);{var p=e=>{var n=$t(),D=T(n);{let x=r(()=>a("workflows.call-stack-alert"));J(D,{intent:"info",get title(){return t(x)},class:"mb-4 w-fit"})}var i=d(D,2),U=y(i);b(i);var h=d(i,2),W=y(h);{let x=r(()=>a("common.copy-icon-title")),rt=r(()=>a("common.copy-success-icon-title"));vt(W,{get content(){return t(o)},language:"text",testId:"query-call-stack",get copyIconTitle(){return t(x)},get copySuccessIconTitle(){return t(rt)}})}b(h),z(x=>A(U,`${x??""}
          ${t(X)??""}`),[()=>a("workflows.call-stack-at")]),u(e,n)},s=e=>{{let n=r(()=>a("workflows.call-stack-error"));J(e,{intent:"warning",get title(){return t(n)},class:"mb-4 w-fit"})}};B(v,e=>{typeof t(o)=="string"?e(p):e(s,!1)})}u(m,f)},(m,o)=>{{let f=r(()=>a("common.error-occurred")),v=r(()=>a("workflows.no-workers-running-message")),p=r(()=>{var s;return(s=t(o))==null?void 0:s.message});K(m,{get title(){return t(f)},get content(){return t(v)},get error(){return t(p)}})}}),u(l,k)},et=l=>{{let k=r(()=>a("workflows.call-stack-empty-state"));K(l,{get title(){return t(k)},testId:"query-call-stack-empty",children:(g,m)=>{var o=j(),f=T(o);{var v=p=>{var s=xt(),e=y(s,!0),n=d(e);wt(n,{newTab:!0,href:"https://docs.temporal.io/workflows#stack-trace-query",children:(i,U)=>{lt();var h=nt();z(W=>A(h,W),[()=>a("workflows.call-stack-link")]),u(i,h)},$$slots:{default:!0}});var D=d(n,1,!0);b(s),z((i,U)=>{A(e,i),A(D,U)},[()=>a("workflows.call-stack-link-preface"),()=>{var i;return a("workflows.call-stack-link-postface",{taskQueue:(i=t(c))==null?void 0:i.taskQueue})}]),u(p,s)};B(f,p=>{var s,e,n;(s=t(c))!=null&&s.isRunning&&((n=(e=t(P))==null?void 0:e.pollers)==null?void 0:n.length)===0&&p(v)})}u(g,o)},$$slots:{default:!0}})}};B(Z,l=>{var k,g,m;(k=t(c))!=null&&k.isRunning&&((m=(g=t(P))==null?void 0:g.pollers)==null?void 0:m.length)>0?l(tt):l(et,!1)})}b(Q),u(C,Q),N(),I()}var Tt=S("<!> <!>",1);function Mt(C,E){M(E,!1);const _=()=>R(mt,"$page",L),[L,q]=O(),$=_().params.workflow;ct();var w=Tt(),I=T(w);{let P=it(()=>`${a("workflows.call-stack-tab")} | ${$}`);ft(I,{get title(){return t(P)},get url(){return _().url.href}})}var c=d(I,2);bt(c,{}),u(C,w),N(),q()}export{Mt as component};
