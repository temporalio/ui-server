import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as K,aN as at,g as t,s as ot,f as S,e as u,b as M,at as st,v as r,j as y,r as b,i as j,c as T,h as d,t as N,n as lt,k as nt,o as it}from"../chunks/BBjqMsu1.js";import{i as ct}from"../chunks/DIZ-FoJG.js";import{s as O,a as R}from"../chunks/D42yUzBQ.js";import{p as ft}from"../chunks/TevsZZmn.js";import{P as mt}from"../chunks/BcjIxfWp.js";import{t as a}from"../chunks/DEjs8ZrU.js";import{s as A}from"../chunks/DHOm-mSm.js";import{a as pt}from"../chunks/D7OjqCRS.js";import{i as z}from"../chunks/DrCjka1e.js";import{p as G}from"../chunks/C9vyLL99.js";import{t as ut}from"../chunks/5sHaeCkN.js";import{A as H}from"../chunks/BcDQnu-T.js";import{C as vt}from"../chunks/CuY3ug9w.js";import{E as J}from"../chunks/mUqVnzkg.js";import{L as wt}from"../chunks/CX_-61Jy.js";import{S as B}from"../chunks/BwPfwM7f.js";import{g as kt}from"../chunks/DjBdxLVX.js";import{a as dt}from"../chunks/DEsUSA2c.js";import{w as gt,r as _t}from"../chunks/7NVsSLBl.js";var $t=S('<!> <p> </p> <div class="my-2 flex h-full items-start"><!></div>',1),ht=S('<div class="flex flex-col gap-2"><!> <!> <!></div>'),xt=S("<p> <!> </p>"),yt=S("<section><!></section>");function bt(C,E){K(E,!0);const _=()=>R(gt,"$workflowRun",w),L=()=>R(ut,"$timestamp",w),q=()=>R(_t,"$refresh",w),$=()=>R(dt,"$authUser",w),[w,I]=O();let c=r(()=>_().workflow),P=r(()=>_().workers);const V=r(()=>G.params.namespace);let F=st(void 0),X=r(()=>L()(q()?new Date(q()):new Date,{format:"short"}));const Y=()=>{var l;return kt({workflow:t(c),namespace:t(V)},(l=G.data)===null||l===void 0?void 0:l.settings,$()===null||$()===void 0?void 0:$().accessToken)};at(()=>{!(t(c)===null||t(c)===void 0)&&t(c).isRunning&&ot(F,Y(),!0)});var Q=yt(),Z=y(Q);{var tt=l=>{var k=j(),g=T(k);pt(g,()=>t(F),f=>{var o=ht(),m=y(o);B(m,{class:"h-16 w-1/3 rounded-sm"});var v=d(m,2);B(v,{class:"h-3 w-32"});var p=d(v,2);B(p,{class:"h-48 w-full rounded-sm"}),b(o),u(f,o)},(f,o)=>{var m=j(),v=T(m);{var p=e=>{var n=$t(),D=T(n);{let x=r(()=>a("workflows.call-stack-alert"));H(D,{intent:"info",get title(){return t(x)},class:"mb-4 w-fit"})}var i=d(D,2),U=y(i);b(i);var h=d(i,2),W=y(h);{let x=r(()=>a("common.copy-icon-title")),rt=r(()=>a("common.copy-success-icon-title"));vt(W,{get content(){return t(o)},language:"text",testId:"query-call-stack",get copyIconTitle(){return t(x)},get copySuccessIconTitle(){return t(rt)}})}b(h),N(x=>A(U,`${x??""}
          ${t(X)??""}`),[()=>a("workflows.call-stack-at")]),u(e,n)},s=e=>{{let n=r(()=>a("workflows.call-stack-error"));H(e,{intent:"warning",get title(){return t(n)},class:"mb-4 w-fit"})}};z(v,e=>{typeof t(o)=="string"?e(p):e(s,!1)})}u(f,m)},(f,o)=>{{let m=r(()=>a("common.error-occurred")),v=r(()=>a("workflows.no-workers-running-message")),p=r(()=>{var s;return(s=t(o))==null?void 0:s.message});J(f,{get title(){return t(m)},get content(){return t(v)},get error(){return t(p)}})}}),u(l,k)},et=l=>{{let k=r(()=>a("workflows.call-stack-empty-state"));J(l,{get title(){return t(k)},testId:"query-call-stack-empty",children:(g,f)=>{var o=j(),m=T(o);{var v=p=>{var s=xt(),e=y(s,!0),n=d(e);wt(n,{newTab:!0,href:"https://docs.temporal.io/workflows#stack-trace-query",children:(i,U)=>{lt();var h=nt();N(W=>A(h,W),[()=>a("workflows.call-stack-link")]),u(i,h)},$$slots:{default:!0}});var D=d(n,1,!0);b(s),N((i,U)=>{A(e,i),A(D,U)},[()=>a("workflows.call-stack-link-preface"),()=>{var i;return a("workflows.call-stack-link-postface",{taskQueue:(i=t(c))==null?void 0:i.taskQueue})}]),u(p,s)};z(m,p=>{var s,e,n;(s=t(c))!=null&&s.isRunning&&((n=(e=t(P))==null?void 0:e.pollers)==null?void 0:n.length)===0&&p(v)})}u(g,o)},$$slots:{default:!0}})}};z(Z,l=>{var k,g,f;(k=t(c))!=null&&k.isRunning&&((f=(g=t(P))==null?void 0:g.pollers)==null?void 0:f.length)>0?l(tt):l(et,!1)})}b(Q),u(C,Q),M(),I()}var Tt=S("<!> <!>",1);function Kt(C,E){K(E,!1);const _=()=>R(ft,"$page",L),[L,q]=O(),$=_().params.workflow;ct();var w=Tt(),I=T(w);{let P=it(()=>`${a("workflows.call-stack-tab")} | ${$}`);mt(I,{get title(){return t(P)},get url(){return _().url.href}})}var c=d(I,2);bt(c,{}),u(C,w),M(),q()}export{Kt as component};
