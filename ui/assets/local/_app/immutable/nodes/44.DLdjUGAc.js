import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{p as At,u as i,t as b,i as r,r as a,c as s,j as w,e as n,b as Nt,g as t,f as A,h as Et,n as B,k as C,o as Dt}from"../chunks/DOHD4F2H.js";import{i as Jt}from"../chunks/DX2YhGcN.js";import{s as St,a as ht}from"../chunks/CgvkIcHY.js";import{p as Kt}from"../chunks/ClA4xhdn.js";import{P as Mt}from"../chunks/DF9GLY19.js";import{t as _}from"../chunks/BXv1jDVW.js";import{W as Qt}from"../chunks/Cj6Rta-F.js";import{s as o}from"../chunks/iKtCZmbp.js";import{i as H}from"../chunks/4jpKiR-7.js";import{e as bt,i as Pt}from"../chunks/h55qdt6V.js";import{p as Ut}from"../chunks/C_POtOFg.js";import{L as D}from"../chunks/DZKebhkx.js";import{T as It,a as yt,b as Rt}from"../chunks/BZNHyFfy.js";import{g as Vt}from"../chunks/B68hyqqZ.js";import{g as Xt,a as Yt}from"../chunks/B1syf6Or.js";import{f as Zt}from"../chunks/CQmKa_sE.js";import{w as te}from"../chunks/IKpWupzU.js";import{g as Lt}from"../chunks/hP0YkXcT.js";import{j as ee}from"../chunks/DPZf26_M.js";import{b as Ot,c as Tt,a as Ht}from"../chunks/C4FbUJpY.js";import{f as re}from"../chunks/DNNVWk-J.js";var ae=b("<p> </p>"),oe=b('<td class="break-all text-left" data-testid="caller-event"><!></td> <td class="break-all text-left" data-testid="link-event"><!></td> <td class="break-all text-left" data-testid="link-namespace"><!></td> <td class="break-all text-left" data-testid="handler-event"><!></td>',1),se=b('<caption class="sr-only" slot="caption"> </caption>'),ne=b('<th class="w-24"> </th> <th> </th> <th> </th> <th> </th>',1),le=b("<h3>Inbound</h3> <!>",1),ie=b(" <!>",1),de=b('<td class="break-all text-left" data-testid="link-event"><!></td> <td class="break-all text-left" data-testid="link-endpoint"> </td> <td class="break-all text-left" data-testid="link-service"> </td> <td class="break-all text-left" data-testid="link-operation"> </td> <td class="break-all text-left" data-testid="link-namespace"><!></td> <td class="break-all text-left" data-testid="link-href"><!></td> <td class="break-all text-left" data-testid="link-href"><!></td>',1),ve=b('<caption class="sr-only" slot="caption"> </caption>'),fe=b('<th class="w-28"> </th> <th> </th> <th> </th> <th> </th> <th> </th> <th> </th> <th> </th>',1),ue=b("<h3>Outbound</h3> <!>",1),pe=b('<section class="flex flex-col gap-4"><h2 data-testid="nexus-links-title"> </h2> <!> <!> <!></section>');function ce(ft,ut){At(ut,!0);const[at,pt]=St(),ot=()=>ht(te,"$workflowRun",at),st=()=>ht(Zt,"$fullEventHistory",at),Q=i(()=>Ut.params),Y=i(()=>t(Q).namespace),nt=i(()=>t(Q).workflow),lt=i(()=>t(Q).run),W=i(()=>ot().workflow),mt=i(()=>t(W)===null||t(W)===void 0?void 0:t(W).pendingActivities),Ft=i(()=>t(W)===null||t(W)===void 0?void 0:t(W).pendingNexusOperations),Wt=i(()=>Vt(st(),"ascending",t(mt),t(Ft))),ct=i(()=>t(Wt).filter(p=>{var d;return p.category==="nexus"&&((d=p.links)===null||d===void 0?void 0:d.length)})),wt=i(()=>Xt(st()));var _t=pe(),$t=r(_t),jt=r($t,!0);a($t);var kt=s($t,2);{var qt=p=>{var d=ae(),Z=r(d,!0);a(d),w(k=>o(Z,k),[()=>_("nexus.links-empty-state")]),n(p,d)};H(kt,p=>{var d;!((d=t(wt))!=null&&d.length)&&!t(ct).length&&p(qt)})}var xt=s(kt,2);{var Gt=p=>{var d=le(),Z=s(A(d),2);It(Z,{class:"mb-6 w-full min-w-[600px]",fixed:!0,children:(k,tt)=>{var f=Et(),N=A(f);bt(N,17,()=>t(wt),Pt,(x,$)=>{const e=i(()=>Yt(t($)));Rt(x,{"data-testid":"worker-row",children:(h,P)=>{var I=oe(),T=A(I),g=r(T);{var J=u=>{const l=i(()=>Lt(t(e)));D(u,{get href(){return t(l)},children:(E,X)=>{B();var L=C();w(()=>{var it,dt;return o(L,(dt=(it=t(e).workflowEvent)==null?void 0:it.eventRef)==null?void 0:dt.eventId)}),n(E,L)},$$slots:{default:!0}})};H(g,u=>{var l;(l=t(e))!=null&&l.workflowEvent&&u(J)})}a(T);var y=s(T,2),S=r(y);{var F=u=>{const l=i(()=>Tt({namespace:t(e).workflowEvent.namespace,workflow:t(e).workflowEvent.workflowId,run:t(e).workflowEvent.runId}));D(u,{get href(){return t(l)},children:(E,X)=>{B();var L=C();w(()=>o(L,t(e).workflowEvent.workflowId)),n(E,L)},$$slots:{default:!0}})};H(S,u=>{var l;(l=t(e))!=null&&l.workflowEvent&&u(F)})}a(y);var R=s(y,2),U=r(R);{var K=u=>{const l=i(()=>Ht({namespace:t(e).workflowEvent.namespace}));D(u,{get href(){return t(l)},children:(E,X)=>{B();var L=C();w(()=>o(L,t(e).workflowEvent.namespace)),n(E,L)},$$slots:{default:!0}})};H(U,u=>{var l;(l=t(e))!=null&&l.workflowEvent&&u(K)})}a(R);var V=s(R,2),M=r(V);const et=i(()=>Ot({namespace:t(Y),workflow:t(nt),run:t(lt),eventId:t($).id}));D(M,{get href(){return t(et)},children:(u,l)=>{B();var E=C();w(()=>o(E,`${t($).name??""}
              (${t($).id??""})`)),n(u,E)},$$slots:{default:!0}}),a(V),n(h,I)},$$slots:{default:!0}})}),n(k,f)},$$slots:{default:!0,caption:(k,tt)=>{var f=se(),N=r(f,!0);a(f),w(x=>o(N,x),[()=>_("workflows.workers-tab")]),n(k,f)},headers:(k,tt)=>{yt(k,{slot:"headers",children:(f,N)=>{var x=ne(),$=A(x),e=r($,!0);a($);var h=s($,2),P=r(h,!0);a(h);var I=s(h,2),T=r(I,!0);a(I);var g=s(I,2),J=r(g,!0);a(g),w((y,S,F,R)=>{o(e,y),o(P,S),o(T,F),o(J,R)},[()=>_("nexus.caller-event"),()=>_("nexus.caller-workflow"),()=>_("nexus.caller-namespace"),()=>_("nexus.handler-event")]),n(f,x)},$$slots:{default:!0}})}}}),n(p,d)};H(xt,p=>{var d;(d=t(wt))!=null&&d.length&&p(Gt)})}var zt=s(xt,2);{var Bt=p=>{var d=ue(),Z=s(A(d),2);It(Z,{class:"mb-6 w-full min-w-[600px]",fixed:!0,children:(k,tt)=>{var f=Et(),N=A(f);bt(N,17,()=>t(ct),Pt,(x,$)=>{const e=i(()=>{var P;return(P=t($).links)==null?void 0:P[0]}),h=i(()=>t($).eventList.find(P=>ee(P)));Rt(x,{"data-testid":"worker-row",children:(P,I)=>{var T=de(),g=A(T),J=r(g);const y=i(()=>Ot({namespace:t(Y),workflow:t(nt),run:t(lt),eventId:t(h).id}));D(J,{get href(){return t(y)},children:(c,v)=>{B();var m=C();w(()=>o(m,t(h).id)),n(c,m)},$$slots:{default:!0}}),a(g);var S=s(g,2),F=r(S,!0);a(S);var R=s(S,2),U=r(R,!0);a(R);var K=s(R,2),V=r(K,!0);a(K);var M=s(K,2),et=r(M);{var u=c=>{const v=i(()=>{var m,j;return Ht({namespace:(j=(m=t(e))==null?void 0:m.workflowEvent)==null?void 0:j.namespace})});D(c,{get href(){return t(v)},children:(m,j)=>{B();var O=C();w(()=>{var q,vt;return o(O,(vt=(q=t(e))==null?void 0:q.workflowEvent)==null?void 0:vt.namespace)}),n(m,O)},$$slots:{default:!0}})};H(et,c=>{var v;(v=t(e))!=null&&v.workflowEvent&&c(u)})}a(M);var l=s(M,2),E=r(l);{var X=c=>{const v=i(()=>Tt({namespace:t(e).workflowEvent.namespace,workflow:t(e).workflowEvent.workflowId,run:t(e).workflowEvent.runId}));D(c,{get href(){return t(v)},children:(m,j)=>{B();var O=C();w(()=>o(O,t(e).workflowEvent.workflowId)),n(m,O)},$$slots:{default:!0}})};H(E,c=>{var v;(v=t(e))!=null&&v.workflowEvent&&c(X)})}a(l);var L=s(l,2),it=r(L);{var dt=c=>{const v=i(()=>Lt(t(e)));D(c,{get href(){return t(v)},children:(m,j)=>{B();var O=ie(),q=A(O),vt=s(q);{var Ct=G=>{var z=C();w(()=>o(z,`(${t(e).workflowEvent.eventRef.eventId??""})`)),n(G,z)};H(vt,G=>{var z,rt;(rt=(z=t(e).workflowEvent)==null?void 0:z.eventRef)!=null&&rt.eventId&&G(Ct)})}w(G=>o(q,`${G??""} `),[()=>{var G,z,rt,gt;return re(((z=(G=t(e).workflowEvent)==null?void 0:G.eventRef)==null?void 0:z.eventType)||((gt=(rt=t(e).workflowEvent)==null?void 0:rt.requestIdRef)==null?void 0:gt.eventType),"EventType")}]),n(m,O)},$$slots:{default:!0}})};H(it,c=>{var v;(v=t(e))!=null&&v.workflowEvent&&c(dt)})}a(L),w(()=>{var c,v,m,j,O,q;o(F,(v=(c=t(h))==null?void 0:c.nexusOperationScheduledEventAttributes)==null?void 0:v.endpoint),o(U,(j=(m=t(h))==null?void 0:m.nexusOperationScheduledEventAttributes)==null?void 0:j.service),o(V,(q=(O=t(h))==null?void 0:O.nexusOperationScheduledEventAttributes)==null?void 0:q.operation)}),n(P,T)},$$slots:{default:!0}})}),n(k,f)},$$slots:{default:!0,caption:(k,tt)=>{var f=ve(),N=r(f,!0);a(f),w(x=>o(N,x),[()=>_("workflows.workers-tab")]),n(k,f)},headers:(k,tt)=>{yt(k,{slot:"headers",children:(f,N)=>{var x=fe(),$=A(x),e=r($,!0);a($);var h=s($,2),P=r(h,!0);a(h);var I=s(h,2),T=r(I,!0);a(I);var g=s(I,2),J=r(g,!0);a(g);var y=s(g,2),S=r(y,!0);a(y);var F=s(y,2),R=r(F,!0);a(F);var U=s(F,2),K=r(U,!0);a(U),w((V,M,et,u,l,E,X)=>{o(e,V),o(P,M),o(T,et),o(J,u),o(S,l),o(R,E),o(K,X)},[()=>_("nexus.source-event"),()=>_("nexus.nexus-endpoint-simple"),()=>_("nexus.nexus-service"),()=>_("nexus.nexus-operation"),()=>_("nexus.handler-namespace"),()=>_("nexus.handler-workflow"),()=>_("nexus.handler-event")]),n(f,x)},$$slots:{default:!0}})}}}),n(p,d)};H(zt,p=>{t(ct).length&&p(Bt)})}a(_t),w(p=>o(jt,p),[()=>_("workflows.nexus-links-tab")]),n(ft,_t),Nt(),pt()}var we=b("<!> <!>",1);function qe(ft,ut){At(ut,!1);const[at,pt]=St(),ot=()=>ht(Kt,"$page",at),st=ot().params.workflow;Jt();var Q=we(),Y=A(Q);const nt=Dt(()=>`${_("workflows.nexus-links-tab")} | ${st}`);Mt(Y,{get title(){return t(nt)},get url(){return ot().url.href}});var lt=s(Y,2);Qt(lt,{children:(W,mt)=>{ce(W,{})},$$slots:{default:!0}}),n(ft,Q),Nt(),pt()}export{qe as component};
