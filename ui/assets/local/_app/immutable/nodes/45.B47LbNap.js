import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as se,b as ae,g as e,o as ke,aO as D,f as b,c as F,t as L,e as i,v as r,h as l,j as $,s as me,k as C,at as Ue,r as g,n as I}from"../chunks/BzuLCQNf.js";import{i as xe,t as Je}from"../chunks/W-5sOwmb.js";import{a as p,s as ne,b as _,m as qe}from"../chunks/DdNojIXk.js";import{p as Ge}from"../chunks/DtEMrm9R.js";import{P as Me}from"../chunks/BX5rdQWZ.js";import{t as w}from"../chunks/DEjs8ZrU.js";import{s as U}from"../chunks/HOnlAALn.js";import{i as $e}from"../chunks/Be-bjpec.js";import{s as ge,c as Be}from"../chunks/wWuJlbLq.js";import{b as Ke,g as _e}from"../chunks/CKqP6R_E.js";import{p as A}from"../chunks/CBeG13Yt.js";import{E as Qe}from"../chunks/Cc3B3D8P.js";import{c as we,I as Xe,D as Ye,E as Ze}from"../chunks/C48wQRou.js";import{T as et,a as te}from"../chunks/BkkLdfek.js";import{T as tt,a as oe}from"../chunks/DldlCy3M.js";import{g as ot}from"../chunks/Cjtrpq_A.js";import{n as rt}from"../chunks/C3dhG0FN.js";import{W as st}from"../chunks/BlVvsGDz.js";import{T as at}from"../chunks/DPocYx42.js";import{b as Ee,d as he,a as nt,p as re,c as J,e as be,m as it,f as lt}from"../chunks/CBFTimE0.js";import{w as dt}from"../chunks/BGTvKxEd.js";import{p as ct,u as ye}from"../chunks/XB0XJHZA.js";function vt(E,P){se(P,!1);const y=()=>p(Ee,"$filteredEventHistory",u),T=()=>p(he,"$decodeEventHistory",u),[u,d]=ne();xe(),st(E,{get events(){return y()},decode:f=>{{let k=ke(()=>w("events.decode-event-history"));at(f,{get label(){return e(k)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return qe(),T()},set checked(c){_(he,c)},$$legacy:!0})}},$$slots:{decode:!0}}),ae(),d()}var pt=b("<!> <!> <!>",1),ut=b("<span></span> ",1),ft=b("<!> <!> <!> <!>",1),mt=b('<div class="border-t border-subtle px-4"><!></div>'),$t=b('<div data-testid="event-summary-table"><!></div>'),gt=b('<!> <div class="relative"><div><div class="items-bottom flex gap-4"><h2> </h2> <!></div> <div class="flex items-center gap-2 pb-2"><!></div></div> <div class="flex w-full flex-col"><!></div></div> <!>',1);function _t(E,P){se(P,!0);const y=()=>p(dt,"$workflowRun",c),T=()=>p(be,"$eventFilterSort",c),u=()=>p(re,"$pauseLiveUpdates",c),d=()=>p(J,"$eventViewType",c),H=()=>p(lt,"$fullEventHistory",c),f=()=>p(Ee,"$filteredEventHistory",c),k=()=>p(it,"$minimizeEventView",c),[c,Pe]=ne();var q,G;const Te=r(()=>A.params),He=r(()=>e(Te).namespace),a=r(()=>y().workflow),M=r(()=>(q=e(a)===null||e(a)===void 0?void 0:e(a).pendingActivities)!==null&&q!==void 0?q:[]),B=r(()=>(G=e(a)===null||e(a)===void 0?void 0:e(a).pendingNexusOperations)!==null&&G!==void 0?G:[]);D(()=>{const t=ct(A.url);_(be,t.sort),_(re,t.refresh_off)}),D(()=>{var t,s;const o=(s=(t=A.url)===null||t===void 0?void 0:t.searchParams)===null||s===void 0?void 0:s.get("category");_(nt,o?o.split(",").filter(rt):void 0)});let x=r(()=>T()==="descending"),K=r(()=>d()==="compact"),je=r(()=>!H().length),ie=r(()=>ot(f(),"ascending",e(M),e(B))),le=r(()=>e(x)?[...e(ie)].reverse():e(ie)),de=r(()=>e(x)?[...f()].reverse():f()),ze=r(()=>e(K)?e(le):e(x)?[...e(B),...e(M),...e(de)]:[...e(de),...e(M),...e(B)]);D(()=>{d(),we()}),Ke(()=>{we()}),D(()=>{!(!(e(a)===null||e(a)===void 0)&&e(a).isRunning)&&u()&&_(re,!1)});let Q=Ue(!1);const Re=()=>{const t=e(x)?"ascending":"descending";ye(A.url,{sort:t},_e)},Se=()=>{ye(A.url,{refresh_off:!u()},_e)},Ce=()=>{_(J,"feed")},Ie=()=>{_(J,"compact")},Ae=()=>{_(J,"json")};var ce=gt(),ve=F(ce);Xe(ve,{});var X=l(ve,2),V=$(X),Y=$(V),Z=$(Y),Fe=$(Z,!0);g(Z);var Ve=l(Z,2);et(Ve,{class:"relative top-[2px]",children:(t,s)=>{var o=pt(),j=F(o);{let m=r(()=>d()==="feed");te(j,{get active(){return e(m)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:Ce},children:(h,v)=>{I();var n=C("All");i(h,n)},$$slots:{default:!0}})}var N=l(j,2);{let m=r(()=>d()==="compact");te(N,{get active(){return e(m)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:Ie},children:(h,v)=>{I();var n=C("Compact");i(h,n)},$$slots:{default:!0}})}var O=l(N,2);{let m=r(()=>d()==="json");te(O,{get active(){return e(m)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:Ae},children:(h,v)=>{I();var n=C("JSON");i(h,n)},$$slots:{default:!0}})}i(t,o)},$$slots:{default:!0}}),g(Y);var pe=l(Y,2),Ne=$(pe);tt(Ne,{children:(t,s)=>{var o=ft(),j=F(o);{var N=v=>{{let n=r(()=>e(x)?"descending":"ascending");oe(v,{get leadingIcon(){return e(n)},"data-testid":"zoom-in",size:"sm",$$events:{click:Re},children:(z,R)=>{I();var S=C();L(ee=>U(S,ee),[()=>e(x)?w("common.descending"):w("common.ascending")]),i(z,S)},$$slots:{default:!0}})}};$e(j,v=>{d()!=="json"&&v(N)})}var O=l(j,2);Ze(O,{get compact(){return e(K)},get minimized(){return k()}});var m=l(O,2);{let v=r(()=>{var n;return!((n=e(a))!=null&&n.isRunning)});oe(m,{get disabled(){return e(v)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:Se},children:(n,z)=>{var R=ut(),S=F(R),ee=l(S);L(W=>{var fe;ge(S,1,`h-1.5 w-1.5 rounded-full ${u()||!((fe=e(a))!=null&&fe.isRunning)?"bg-slate-300":"bg-green-600"}`),U(ee,` ${W??""}`)},[()=>{var W;return u()||!((W=e(a))!=null&&W.isRunning)?w("workflows.auto-refresh-off"):w("workflows.auto-refresh-on")}]),i(n,R)},$$slots:{default:!0}})}var h=l(m,2);oe(h,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>me(Q,!0)},children:(v,n)=>{I();var z=C();L(R=>U(z,R),[()=>w("common.download")]),i(v,z)},$$slots:{default:!0}}),i(t,o)},$$slots:{default:!0}}),g(pe),g(V);var ue=l(V,2),Oe=$(ue);{var We=t=>{var s=mt(),o=$(s);vt(o,{}),g(s),i(t,s)},De=t=>{var s=$t(),o=$(s);Qe(o,{get updating(){return e(je)},get items(){return e(ze)},get groups(){return e(le)},get compact(){return e(K)}}),g(s),i(t,s)};$e(Oe,t=>{d()==="json"?t(We):t(De,!1)})}g(ue),g(X);var Le=l(X,2);{let t=r(()=>{var o;return(o=e(a))==null?void 0:o.id}),s=r(()=>{var o;return(o=e(a))==null?void 0:o.runId});Ye(Le,{get namespace(){return e(He)},get workflowId(){return e(t)},get runId(){return e(s)},get open(){return e(Q)},set open(o){me(Q,o,!0)}})}L((t,s)=>{ge(V,1,t),U(Fe,s)},[()=>Be(Je("surface-background flex flex-wrap items-center justify-between gap-2 border-b border-subtle xl:gap-8",!k()&&"sticky top-0 z-30 md:top-12")),()=>w("workflows.history-tab")]),i(E,ce),ae(),Pe()}var wt=b("<!> <!>",1);function Jt(E,P){se(P,!1);const y=()=>p(Ge,"$page",T),[T,u]=ne(),d=y().params.workflow;xe();var H=wt(),f=F(H);{let c=ke(()=>`${w("workflows.workflow-history")} | ${d}`);Me(f,{get title(){return e(c)},get url(){return y().url.href}})}var k=l(f,2);_t(k,{}),i(E,H),ae(),u()}export{Jt as component};
