import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as be,b as ye,g as e,o as A,l as re,a as Ne,f as Q,c as ne,e as l,m as N,av as ge,M as p,h as d,s as W,j as x,n as we,k as pe,r as h,t as S,I as w,i as Re,bL as ze,ac as hr,v as o,d as Zt,u as Kt,at as wt,aQ as xr,q as Lt,aO as Mt}from"../chunks/DPYmeJXN.js";import{i as Ce,t as br}from"../chunks/VvTteBni.js";import{a as ae,s as Le,b as he,m as yr,p as M,l as kt}from"../chunks/BkgVXhYA.js";import{p as rt}from"../chunks/CEsfqZ2A.js";import{P as Tr}from"../chunks/ChftV-ZE.js";import{t as r}from"../chunks/DEjs8ZrU.js";import{s as j,d as Er,e as lt}from"../chunks/DtOlEDQN.js";import{i as K}from"../chunks/DqIiO-ir.js";import{s as De,c as er}from"../chunks/BuyG_Alt.js";import{b as Pr}from"../chunks/6t1fKY0x.js";import{p as Wt}from"../chunks/Du4j6vrc.js";import{E as Ir,L as qe,D as ht,g as Ar}from"../chunks/CrQeOxhl.js";import{T as Wr,a as Pt}from"../chunks/DlI0-GTf.js";import{W as Hr}from"../chunks/Dw1ONrSW.js";import{T as Sr}from"../chunks/Bgzj9ug1.js";import{b as tr,d as Dt,e as it,f as xt,i as Ze,a as Cr,j as Ve,c as Be,p as ct,k as Lr,l as Gt,m as Nt,h as Rr}from"../chunks/DFxanS_P.js";import{w as bt}from"../chunks/BpV6waxz.js";import{e as nt,i as yt}from"../chunks/4Pdp5Dra.js";import{w as vt,g as Ht,a as jr,o as zr}from"../chunks/DIJxQKhU.js";import{C as ft}from"../chunks/BHcoTVMH.js";import{I as Qe}from"../chunks/AOc3ct3q.js";import{M as Or}from"../chunks/CNPR0pYi.js";import{c as Fr,d as Mr,b as gt}from"../chunks/C1fXkSjb.js";import{M as Dr}from"../chunks/VYL9lR52.js";import{l as It,Y as Ut,I as Vt,o as Gr,F as Nr,Z as Ur,_ as Vr,$ as Br,a0 as rr,a1 as qr,a2 as Qr}from"../chunks/wyUXFIex.js";import{t as Yr}from"../chunks/BX5syrkF.js";import{i as Jr}from"../chunks/B8ZQMCVE.js";import{C as dt,b as Xr,T as et,c as Zr,d as Kr,M as en,t as tn,f as mt}from"../chunks/BNQVHLvi.js";import{k as Rt}from"../chunks/DlFjb5xL.js";import{s as fe,b as rn}from"../chunks/DaRGTSNt.js";import{b as nr}from"../chunks/C76d9DOq.js";import{t as jt,T as nn}from"../chunks/CLtBfc7Y.js";import{i as St}from"../chunks/Dzb719w0.js";import{s as Ke}from"../chunks/B2YVu2ra.js";import{u as _t,o as ar}from"../chunks/CtQjrHKC.js";import{W as an}from"../chunks/Z9LHW962.js";import{B as on}from"../chunks/Dl8bQq-l.js";import{a as sn}from"../chunks/B9MblnVr.js";import{g as or}from"../chunks/C61JMAsa.js";import{f as ln,b as cn}from"../chunks/ctOPYH5F.js";import{x as dn}from"../chunks/Cb9JBHuB.js";import{c as vn,B as Fe}from"../chunks/Bn2mFndZ.js";import{a as sr}from"../chunks/Cr79p1AK.js";import{b as un}from"../chunks/C6vhGFP6.js";import{A as zt}from"../chunks/D7XaJJEl.js";import{L as lr}from"../chunks/DCGHJfsM.js";import{s as fn}from"../chunks/ByTIZu23.js";import{A as ir}from"../chunks/CIMK_y_c.js";import{C as $t}from"../chunks/Dla4Xpsa.js";import{M as gn}from"../chunks/DE1TNxiq.js";import{R as mn,a as At}from"../chunks/CUrUcSdf.js";import{c as pn,d as _n}from"../chunks/DLlx_8S1.js";import{g as $n,b as wn,a as kn}from"../chunks/BHHu_mPm.js";import{s as Ct}from"../chunks/ikbOq2O5.js";import{i as hn}from"../chunks/BrTuBoLo.js";import{d as Bt,a as qt}from"../chunks/C50B4Eam.js";import{I as Qt}from"../chunks/ljtjHlZR.js";import{t as xn,a as bn}from"../chunks/DEtyaa-H.js";import{T as yn,a as pt}from"../chunks/BLX88kCc.js";import{T as Tn}from"../chunks/DY9wv1RX.js";function En(b,t){be(t,!1);const i=()=>ae(tr,"$filteredEventHistory",s),P=()=>ae(Dt,"$decodeEventHistory",s),[s,n]=Le();Ce(),Hr(b,{get events(){return i()},decode:a=>{{let v=A(()=>r("events.decode-event-history"));Sr(a,{get label(){return e(v)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return yr(),P()},set checked(m){he(Dt,m)},$$legacy:!0})}},$$slots:{decode:!0}}),ye(),n()}var Pn=Q("<!> <!> <!>",1),In=Q('<div class="border-t border-subtle px-4"><!></div>'),An=Q('<div data-testid="event-summary-table"><!></div>'),Wn=Q('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function Hn(b,t){be(t,!1);const i=()=>ae(bt,"$workflowRun",a),P=()=>ae(it,"$eventFilterSort",a),s=()=>ae(xt,"$fullEventHistory",a),n=()=>ae(Ze,"$eventViewType",a),f=()=>ae(rt,"$page",a),[a,v]=Le(),m=N(),g=N(),I=N(),y=N(),u=N(),c=N(),$=N();var k=N(),_=N(),C=N(),z=N();let T=M(t,"history",8),L=M(t,"groups",8),F=M(t,"minimized",8,!0);const O=()=>{he(Ze,"feed")},D=()=>{he(Ze,"compact")},H=()=>{he(Ze,"json")};re(()=>(e(m),i()),()=>{(R=>{W(m,R.workflow)})(i())}),re(()=>P(),()=>{W(g,P()==="descending")}),re(()=>s(),()=>{W(I,!s().length)}),re(()=>n(),()=>{W(y,n()==="compact")}),re(()=>(ge(_),ge(k),f(),ge(z),ge(C)),()=>{he(Cr,!(W(_,W(k,f().url)===null||ge(k)===void 0?void 0:ge(k).searchParams)===null||ge(_)===void 0)&&ge(_).get("category")?W(z,W(C,f().url)===null||ge(C)===void 0?void 0:ge(C).searchParams)===null||ge(z)===void 0?void 0:ge(z).get("category").split(","):void 0)}),re(()=>e(m),()=>{W(u,e(m).pendingActivities)}),re(()=>e(m),()=>{W(c,e(m).pendingNexusOperations)}),re(()=>(e(y),p(L()),e(g),e(c),e(u),p(T())),()=>{W($,e(y)?L():e(g)?[...e(c),...e(u),...T()]:[...T(),...e(u),...e(c)])}),Ne(),Ce();var ee=Wn(),U=ne(ee),J=x(U),Y=x(J);Wr(Y,{children:(R,B)=>{var X=Pn(),te=ne(X);{let oe=A(()=>n()==="feed");Pt(te,{get active(){return e(oe)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:O},children:(ie,je)=>{we();var He=pe("All");l(ie,He)},$$slots:{default:!0}})}var q=d(te,2);{let oe=A(()=>n()==="compact");Pt(q,{get active(){return e(oe)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:D},children:(ie,je)=>{we();var He=pe("Compact");l(ie,He)},$$slots:{default:!0}})}var $e=d(q,2);{let oe=A(()=>n()==="json");Pt($e,{get active(){return e(oe)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:H},children:(ie,je)=>{we();var He=pe("JSON");l(ie,He)},$$slots:{default:!0}})}l(R,X)},$$slots:{default:!0}}),h(J),h(U);var _e=d(U,2);{var Ee=R=>{var B=In(),X=x(B);En(X,{}),h(B),l(R,B)},V=R=>{var B=An(),X=x(B);Ir(X,{get updating(){return e(I)},get items(){return e($)},get groups(){return L()},get compact(){return e(y)},get minimized(){return F()}}),h(B),l(R,B)};K(_e,R=>{n()==="json"?R(Ee):R(V,!1)})}l(b,ee),ye(),v()}const cr=200,Sn=vt(0),Cn=vt(cr),tt=vt([]),ut=vt(0),Yt=()=>{tt.set([]),ut.set(0),Sn.set(0),Cn.set(cr)},Ln=()=>{tt.set([]),ut.set(0)},dr=b=>{Ht(tt).includes(b.id)?(ut.set(0),tt.set([])):tt.set([b.id])},Rn=b=>b==null?void 0:b.nexus;var jn=Q("<div><!></div>"),zn=Q('<span class="hidden text-sm md:block"> </span>'),On=Q("<!> <!> <!> <!> <!>",1),Fn=Q("<!> <!>",1);function Mn(b,t){be(t,!1);const i=()=>ae(Yr,"$temporalVersion",a),P=()=>ae(rt,"$page",a),s=()=>ae(Ve,"$eventTypeFilter",a),n=()=>ae(Be,"$eventStatusFilter",a),f=()=>ae(Ze,"$eventViewType",a),[a,v]=Le(),m=N(),g=N(),I=N();var y=N();let u=M(t,"compact",8,!1),c=M(t,"minimized",8,!0),$=vt(!1);const k=({value:_})=>{Ln(),he(Ve,s().some(C=>C===_)?s().filter(C=>C!==_):[...s(),_])};re(()=>(p(u()),It),()=>{W(m,u()?Ut.map(_=>_.value):It.map(_=>_.value))}),re(()=>(p(u()),dt),()=>{W(g,[...(u()?Ut:It).map(_=>({..._,label:r(_.label),icon:dt[_.value],description:r(_.description)}))])}),re(()=>(i(),e(g)),()=>{Jr("1.21.0",i())&&W(g,e(g).filter(({value:_})=>_!=="update"))}),re(()=>(ge(y),P(),e(g)),()=>{Rn(W(y,P().data.systemInfo)===null||ge(y)===void 0?void 0:ge(y).capabilities)||W(g,e(g).filter(({value:_})=>_!=="nexus"))}),re(()=>(s(),e(m)),()=>{W(I,s().length<e(m).length)}),Ne(),Ce(),Fr(b,{get open(){return $},children:(_,C)=>{var z=Fn(),T=ne(z);Or(T,{controls:"status-menu",size:"sm",leading:O=>{var D=jn();let H;var ee=x(D);{let U=A(()=>e(I)&&"pt-0.5 text-white");Qe(ee,{name:"filter",get class(){return e(U)}})}h(D),S(()=>H=De(D,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,H,{"bg-interactive":e(I)})),l(O,D)},children:(O,D)=>{var H=zn(),ee=x(H,!0);h(H),S(U=>j(ee,U),[()=>(p(r),w(()=>r("common.filter")))]),l(O,H)},$$slots:{leading:!0,default:!0}});var L=d(T,2);{let F=A(()=>c()?"top-right":"right");Mr(L,{id:"event-type-menu",keepOpen:!0,get position(){return e(F)},class:"w-[220px] md:w-[360px]",children:(O,D)=>{var H=On(),ee=ne(H);{const V=B=>{{let X=A(()=>(n(),s(),e(m),w(()=>!n()&&s().length===e(m).length))),te=A(()=>(p(r),w(()=>r("common.all"))));ft(B,{get checked(){return e(X)},get label(){return e(te)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{he(Ve,e(m)),he(Be,!1)}}})}};let R=A(()=>(p(r),w(()=>r("common.all"))));gt(ee,{get"data-testid"(){return e(R)},onclick:()=>{he(Ve,e(m)),he(Be,!1)},leading:V,children:(B,X)=>{we();var te=pe();S(q=>j(te,q),[()=>(p(r),w(()=>r("common.all")))]),l(B,te)},$$slots:{leading:!0,default:!0}})}var U=d(ee,2);{var J=V=>{{const R=te=>{{let q=A(()=>(p(r),w(()=>r("common.all"))));ft(te,{get checked(){return n()},get label(){return e(q)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{he(Ve,e(m)),he(Be,!n())}}})}};let B=A(()=>(p(r),w(()=>r("common.pending-and-failed")))),X=A(()=>(p(r),w(()=>r("common.pending-and-failed-description"))));gt(V,{get"data-testid"(){return e(B)},get description(){return e(X)},onclick:()=>{he(Ve,e(m)),he(Be,!n())},class:"items-start",leading:R,children:(te,q)=>{we();var $e=pe();S(oe=>j($e,oe),[()=>(p(r),w(()=>r("common.pending-and-failed")))]),l(te,$e)},$$slots:{leading:!0,default:!0}})}};K(U,V=>{f()!=="json"&&V(J)})}var Y=d(U,2);{const V=B=>{{let X=A(()=>(n(),s(),w(()=>!n()&&!s().length))),te=A(()=>(p(r),w(()=>r("common.none"))));ft(B,{get checked(){return e(X)},get label(){return e(te)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{he(Ve,[]),he(Be,!1)}}})}};let R=A(()=>(p(r),w(()=>r("common.none"))));gt(Y,{get"data-testid"(){return e(R)},onclick:()=>{he(Ve,[]),he(Be,!1)},leading:V,children:(B,X)=>{we();var te=pe();S(q=>j(te,q),[()=>(p(r),w(()=>r("common.none")))]),l(B,te)},$$slots:{leading:!0,default:!0}})}var _e=d(Y,2);Dr(_e);var Ee=d(_e,2);nt(Ee,1,()=>e(g),yt,(V,R)=>{gt(V,{get"data-testid"(){return e(R),w(()=>e(R).label)},get description(){return e(R),w(()=>e(R).description)},onclick:()=>{k(e(R))},class:"items-start",leading:X=>{{let te=A(()=>(s(),e(R),w(()=>s().some(q=>q===e(R).value))));ft(X,{get checked(){return e(te)},get label(){return e(R),w(()=>e(R).label)},labelHidden:!0,class:"mt-px",$$events:{click:()=>k(e(R))}})}},children:(X,te)=>{we();var q=pe();S(()=>j(q,(e(R),w(()=>e(R).label)))),l(X,q)},$$slots:{leading:!0,default:!0}})}),l(O,H)},$$slots:{default:!0}})}l(_,z)},$$slots:{default:!0}}),ye(),v()}function Dn(b,t){be(t,!1);const i=()=>ae(ct,"$pauseLiveUpdates",P),[P,s]=Le(),n=N(),f=N();let a=M(t,"workflow",8),v=M(t,"startTime",8);const m=()=>{const $=new Date;return $.setSeconds($.getSeconds()+1),$};let g;const I=$=>{$&&(clearInterval(g),g=null)},y=$=>{$?(clearInterval(g),g=null):!g&&a().isRunning&&(g=setInterval(()=>{W(n,m())},1e3))};jr(()=>{clearInterval(g),g=null,he(ct,!1)}),re(()=>p(a()),()=>{W(n,(a()===null||a()===void 0?void 0:a().endTime)||m())}),re(()=>(p(v()),e(n)),()=>{W(f,_t({start:v(),end:e(n),onlyUnderSecond:!1}))}),re(()=>p(a()),()=>{I(a().endTime)}),re(()=>i(),()=>{y(i())}),Ne(),Ce();var u=Re(),c=ne(u);Ke(c,t,"default",{get endTime(){return e(n)},get duration(){return e(f)}},null),l(b,u),ye(),s()}var Gn=Q("<div><!></div>");function Nn(b,t){const i=kt(t,["children","$$slots","$$events","$$legacy"]),P=kt(i,["namespace","workflowId","runId","viewportHeight","onLoad"]);be(t,!1);let s=M(t,"namespace",8),n=M(t,"workflowId",8),f=M(t,"runId",8,""),a=M(t,"viewportHeight",8,360),v=M(t,"onLoad",8,()=>{});const m=async()=>{const[u,c]=await Promise.all([dn({namespace:s(),workflowId:n(),runId:f()}),ln({namespace:s(),workflowId:n(),runId:f()})]);return{workflow:u.workflow,history:c}},g=(u,c)=>{var $;v()();const k=($=u==null?void 0:u.pendingActivities)!==null&&$!==void 0?$:[];return or(c,"ascending",k)};Ce();var I=Re(),y=ne(I);sn(y,()=>w(m),null,(u,c)=>{var $=A(()=>{var{workflow:T,history:L}=e(c);return{workflow:T,history:L}}),k=A(()=>e($).workflow),_=A(()=>e($).history),C=Gn(),z=x(C);{let T=A(()=>(p(e(k)),p(e(_)),w(()=>g(e(k),e(_)))));vr(z,{get viewportHeight(){return a()},get workflow(){return e(k)},get groups(){return e(T)},readOnly:!0})}h(C),S(()=>De(C,1,`cursor-pointer overflow-auto ${p(P),w(()=>P.class)??""}`)),l(u,C)}),l(b,I),ye()}var Un=Q('<div class="flex items-center gap-1"><!> </div>'),Vn=Q(" <!>",1),Bn=Q('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),qn=ze('<g role="button" tabindex="0" class="relative z-50 svelte-1qsv8v3"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function Qn(b,t){be(t,!1);const i=()=>ae(rt,"$page",P),[P,s]=Le(),n=N(),f=N(),a=N(),v=N(),m=N(),g=N(),I=N();var y=N(),u=N();let c=M(t,"group",8),$=M(t,"canvasWidth",8),k=M(t,"x",8,0),_=M(t,"y",8),C=N();const z=q=>{he(ut,q)},T=async()=>{await hr(),W(n,e(C))};re(()=>e(C),()=>{W(n,e(C)||0)}),re(()=>e(n),()=>{z(e(n)||0)}),re(()=>p(c()),()=>{W(f,(c()===null||c()===void 0?void 0:c().finalClassification)||(c()===null||c()===void 0?void 0:c().classification))}),re(()=>(e(a),i()),()=>{(q=>{W(a,q.namespace)})(i().params)}),re(()=>p($()),()=>{W(v,$())}),re(()=>p(c()),()=>{W(m,c().displayName)}),re(()=>(p(c()),Vt),()=>{W(g,c()&&c().eventList.find(Vt))}),re(()=>(ge(y),p(c()),ge(u)),()=>{W(I,ar({start:W(y,c()===null||c()===void 0?void 0:c().initialEvent)===null||ge(y)===void 0?void 0:ge(y).eventTime,end:W(u,c()===null||c()===void 0?void 0:c().lastEvent)===null||ge(u)===void 0?void 0:ge(u).eventTime,includeMilliseconds:!0}))}),re(()=>(p(c()),r),()=>{!(c()===null||c()===void 0)&&c().pendingActivity&&(c().pendingActivity.paused?W(f,r("workflows.paused")):c().pendingActivity.attempt>1?W(f,r("events.event-classification.retrying")):W(f,r("events.event-classification.pending")))}),Ne(),Ce();var L=qn(),F=x(L),O=x(F),D=x(O),H=x(D),ee=x(H);{var U=q=>{an(q,{get status(){return e(f)}})};K(ee,q=>{e(f)&&q(U)})}var J=d(ee),Y=d(J);{var _e=q=>{var $e=Un(),oe=x($e);Qe(oe,{name:"clock"});var ie=d(oe);h($e),S(()=>j(ie,` ${e(I)??""}`)),l(q,$e)};K(Y,q=>{e(I)&&q(_e)})}h(H);var Ee=d(H,2),V=x(Ee);on(V,{variant:"ghost",size:"xs",$$events:{click:()=>dr(c())},children:(q,$e)=>{we();var oe=Vn(),ie=ne(oe),je=d(ie);Qe(je,{name:"close"}),S(He=>j(ie,`${He??""} `),[()=>(p(r),w(()=>r("common.close")))]),l(q,oe)},$$slots:{default:!0}}),h(Ee),h(D);var R=d(D,2),B=x(R);Xr(B,{get group(){return c()},get event(){return p(c()),w(()=>c().initialEvent)}}),h(R);var X=d(R,2);{var te=q=>{var $e=Bn(),oe=d(x($e),2);Rt(oe,()=>(p(c()),w(()=>c().eventList.length)),ie=>{Nn(ie,{get namespace(){return e(a)},get workflowId(){return e(g),w(()=>e(g).attributes.workflowExecution.workflowId)},get runId(){return e(g),w(()=>e(g).attributes.workflowExecution.runId)},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:T})}),h($e),l(q,$e)};K(X,q=>{e(g)&&q(te)})}h(O),h(F),h(L),S(()=>{fe(F,"x",k()),fe(F,"y",_()),fe(F,"width",e(v)),fe(F,"height",e(n)),j(J,` ${e(m)??""} `)}),nr(O,"offsetHeight",q=>W(C,q)),l(b,L),ye(),s()}var Yn=ze('<text fill="#fff" font-size="12" class="svelte-7nuc95"> </text>'),Jn=ze("<!><!>",1),Xn=ze("<!><!>",1);function Zn(b,t){be(t,!0);let i=M(t,"x1",3,0),P=M(t,"x2",3,1e3),s=M(t,"timelineHeight",3,1e3);const{radius:n}=et,f=20,a=o(()=>P()-i()),v=o(()=>e(a)/f);var m=Xn(),g=ne(m);{let y=o(()=>n/2),u=o(()=>[i(),s()]),c=o(()=>[i()+e(a),s()]);qe(g,{get strokeWidth(){return e(y)},get startPoint(){return e(u)},get endPoint(){return e(c)}})}var I=d(g);nt(I,17,()=>Array(f),yt,(y,u,c)=>{const $=o(()=>i()+c*e(v)),k=o(()=>s()+n*2);var _=Jn(),C=ne(_);{var z=F=>{{let O=o(()=>[e($),0]),D=o(()=>[e($),s()]);qe(F,{strokeWidth:.5,get startPoint(){return e(O)},get endPoint(){return e(D)},strokeDasharray:"2"})}};K(C,F=>{c!==0&&F(z)})}var T=d(C);{var L=F=>{var O=Yn(),D=x(O,!0);h(O),S(H=>{fe(O,"transform",`rotate(90, ${e($)??""}, ${e(k)??""})`),fe(O,"x",e($)-n),fe(O,"y",e(k)+3),j(D,H)},[()=>ar({start:t.startTime,end:new Date(new Date(t.startTime.toString()).getTime()+t.duration/f*c),includeMilliseconds:t.duration/f<1e3})]),l(F,O)};K(T,F=>{c!==0&&F(L)})}l(y,_)}),l(b,m),ye()}var Kn=ze("<text><!></text>"),ea=ze("<!><!><!>",1);function ta(b,t){be(t,!0);var i;let P=M(t,"point",19,()=>[0,0]),s=M(t,"category",3,void 0),n=M(t,"status",3,"none"),f=M(t,"fontSize",3,"13px"),a=M(t,"fontWeight",3,"400"),v=M(t,"textAnchor",3,"start"),m=M(t,"backdrop",3,!1),g=M(t,"backdropHeight",3,0),I=M(t,"icon",3,void 0),y=M(t,"config",3,void 0),u=M(t,"label",3,!1);const c=o(()=>xr(P(),2)),$=o(()=>e(c)[0]),k=o(()=>e(c)[1]);let _=wt(void 0);const C=o(()=>I()&&y()),z=o(()=>((i=e(_)===null||e(_)===void 0?void 0:e(_).getBBox())===null||i===void 0?void 0:i.width)||0),T=o(()=>e(C)?e(z)+36:e(z)+12),L=o(()=>e(C)&&v()==="start"?e($)+y().radius*2:e($));var F=ea(),O=ne(F);{var D=J=>{{let Y=o(()=>[e($)-g(),e(k)]),_e=o(()=>[e($)+e(T),e(k)]);qe(J,{get startPoint(){return e(Y)},get endPoint(){return e(_e)},get status(){return n()},get strokeWidth(){return g()}})}};K(O,J=>{m()&&J(D)})}var H=d(O);{var ee=J=>{{let Y=o(()=>v()==="end"?e($)-e(z)-g():e($)),_e=o(()=>e(k)-8),Ee=o(()=>m()?"text-white":"text-primary");Qe(J,{get name(){return I()},get x(){return e(Y)},get y(){return e(_e)},get class(){return e(Ee)}})}};K(H,J=>{e(C)&&J(ee)})}var U=d(H);Rt(U,()=>e(L),J=>{var Y=Kn();let _e;var Ee=x(Y);Zt(Ee,()=>t.children??Kt),h(Y),un(Y,V=>W(_,V),()=>e(_)),S(()=>{_e=De(Y,0,`cursor-pointer select-none outline-none ${s()??""} text-primary`,"svelte-gowbbf",_e,{label:u(),backdrop:m()}),fe(Y,"x",e(L)),fe(Y,"y",e(k)+1),fe(Y,"font-size",f()),fe(Y,"font-weight",a()),fe(Y,"text-anchor",v())}),l(J,Y)}),l(b,F),ye()}var ra=ze("<foreignObject><div></div></foreignObject>"),na=ze('<rect fill="transparent" pointer-events="all"></rect>'),aa=ze("<!><!>",1),oa=ze("<!><!><!><!>",1),sa=ze('<!><g role="button" tabindex="0" class="relative cursor-pointer svelte-1vsmkab"><!><!></g>',1);function la(b,t){be(t,!0);const i=()=>ae(sr,"$authUser",P),[P,s]=Le();var n,f;let a=M(t,"y",3,0),v=M(t,"group",7),m=M(t,"readOnly",3,!1);const{height:g,gutter:I,radius:y}=et;let u=wt(!1);const c=o(()=>t.canvasWidth-2*I),$=o(()=>v()===null||v()===void 0?void 0:v().pendingActivity),k=o(()=>e($)&&((n=e($).pauseInfo)===null||n===void 0?void 0:n.pauseTime));let _=wt(void 0);zr(async()=>{const ce=Zr(v());if(ce)try{W(_,await Kr(ce,{namespace:Wt.params.namespace,settings:Wt.data.settings,accessToken:i().accessToken}),!0),e(_)&&(v().decodedLocalActivity=e(_))}catch(se){console.warn("Failed to decode local activity:",se)}});const C=(ce,se,E)=>{const G=_t({start:t.startTime,end:ce,onlyUnderSecond:!1}),le=v().eventList.map(Te=>{const ve=_t({start:t.startTime,end:Te.eventTime,onlyUnderSecond:!1})/G;return Math.round(ve*se)+I});if(e(k)){const ue=_t({start:t.startTime,end:e(k),onlyUnderSecond:!1})/G,ve=Math.round(ue*se)+I;le.push(ve)}const{textAnchor:me,textIndex:Z,textPosition:ke,backdrop:de}=tn(le,E,se,v().isPending,et);return{points:le,textAnchor:me,textIndex:Z,textPosition:ke,backdrop:de}},z=o(()=>C(t.endTime,e(c),a())),T=o(()=>e(z).points),L=o(()=>e(z).textAnchor),F=o(()=>e(z).textIndex),O=o(()=>e(z).textPosition),D=o(()=>e(z).backdrop),H=()=>{m()||dr(v())},ee=()=>{m()||W(u,!0)},U=()=>{m()||W(u,!1)},J=o(()=>v().eventList.find(Nr)),Y=o(()=>e(J)&&((f=e(J).attributes)===null||f===void 0?void 0:f.attempt)>1),_e=o(()=>v().isPending||!!e(k)),Ee=o(()=>e(T).length>=2&&e(T)[e(T).length-1]-e(T)[0]+y*3),V=o(()=>v().isPending&&t.canvasWidth-e(T)[0]-y*1.5),R=o(()=>y*3),B=o(()=>e(V)||e(Ee)||e(R)),X=vn(["h-full w-full rounded-full border-2"],{variants:{category:{workflow:"border-blue-700 bg-blue-800/80 ",activity:"border-purple-700 bg-purple-800/80 ","child-workflow":"border-cyan-600  bg-cyan-600/80 ",timer:"border-yellow-700 bg-yellow-800/80",signal:"border-pink-700 bg-pink-800/80",update:"border-blue-700 bg-blue-800/80",other:"border-slate-700 bg-slate-800/80",nexus:"border-indigo-700 bg-indigo-800/80","local-activity":"border-slate-700 bg-slate-800/80",default:"border-purple-700 bg-purple-900/80"}}});var te=sa(),q=ne(te);{var $e=ce=>{var se=ra(),E=x(se);h(se),S(G=>{fe(se,"x",e(T)[0]-y*1.5),fe(se,"y",a()-y*1.5),fe(se,"width",e(B)),fe(se,"height",y*3),De(E,1,G)},[()=>er(X({category:v()?v().category:"default"}))]),l(ce,se)};K(q,ce=>{e(u)&&ce($e)})}var oe=d(q);oe.__click=H;var ie=x(oe);{var je=ce=>{const se=o(()=>e(k)?e(T)[1]-e(T)[0]:t.canvasWidth-2*I);var E=na();S(()=>{fe(E,"y",a()-g/2),fe(E,"x",e(T)[0]),fe(E,"width",e(se)),fe(E,"height",g)}),l(ce,E)};K(ie,ce=>{e(_e)&&ce(je)})}var He=d(ie);nt(He,17,()=>e(T),yt,(ce,se,E)=>{const G=o(()=>e(T)[E+1]),le=o(()=>e(F)===E);var me=oa(),Z=ne(me);{var ke=xe=>{{let Ae=o(()=>[e(se),a()]),Pe=o(()=>[e(G),a()]),Se=o(()=>!!e(k)),We=o(()=>!!e(k)),Me=o(()=>y*2),Ge=o(()=>E===0&&v().lastEvent.classification==="Completed");qe(xe,{get startPoint(){return e(Ae)},get endPoint(){return e(Pe)},get category(){return v().category},get classification(){return v().lastEvent.classification},get pending(){return e(Se)},get paused(){return e(We)},get strokeWidth(){return e(Me)},get retried(){return e(Y)},get scheduling(){return e(Ge)}})}};K(Z,xe=>{e(G)&&xe(ke)})}var de=d(Z);{var Te=xe=>{var Ae=aa(),Pe=ne(Ae);{let We=o(()=>[e(se),a()]),Me=o(()=>[t.canvasWidth-I,a()]),Ge=o(()=>e($)?e($).attempt>1?"retry":"pending":v().category),Oe=o(()=>!!e(k)),Ue=o(()=>y*2);qe(Pe,{get startPoint(){return e(We)},get endPoint(){return e(Me)},get category(){return e(Ge)},get classification(){return v().lastEvent.classification},pending:!0,get paused(){return e(Oe)},get strokeWidth(){return e(Ue)}})}var Se=d(Pe);{let We=o(()=>[e(se),a()]);ht(Se,{get point(){return e(We)},get classification(){return v().lastEvent.classification},icon:"retry",get r(){return y}})}l(xe,Ae)};K(de,xe=>{!e(G)&&v().isPending&&!e(k)&&xe(Te)})}var ue=d(de);{var ve=xe=>{{let Ae=o(()=>{var We,Me;return(Me=(We=v())==null?void 0:We.userMetadata)==null?void 0:Me.summary}),Pe=o(()=>{var We;return Gr(v().initialEvent)?(We=v())==null?void 0:We.displayName:""}),Se=o(()=>{var We;return e(_)?r("events.category.local-activity"):(We=v())==null?void 0:We.displayName});en(xe,{get value(){return e(Ae)},get prefix(){return e(Pe)},get fallback(){return e(Se)},children:Lt,$$slots:{default:(We,Me)=>{const Ge=o(()=>Me.decodedValue);{let Oe=o(()=>y*2),Ue=o(()=>e($)&&!e($).paused||e(Y)?"retry":void 0);ta(We,{get point(){return e(O)},get textAnchor(){return e(L)},get backdrop(){return e(D)},get backdropHeight(){return e(Oe)},get config(){return et},get icon(){return e(Ue)},children:(Tt,Ot)=>{var Ft=Re(),fr=ne(Ft);{var gr=Ye=>{var at=pe();S(Et=>j(at,`${Et??""}
            ${e($).attempt??""} / ${(e($).maximumAttempts||"∞")??""}
            • 
            ${e(Ge)??""}`),[()=>r("workflows.attempt")]),l(Ye,at)},mr=Ye=>{var at=Re(),Et=ne(at);{var pr=Je=>{var ot=pe();S(()=>j(ot,`${e(J).attributes.attempt??""} • ${e(Ge)??""}`)),l(Je,ot)},_r=Je=>{var ot=Re(),$r=ne(ot);{var wr=Xe=>{var st=pe();S(()=>j(st,e(_).value)),l(Xe,st)},kr=Xe=>{var st=pe();S(()=>j(st,e(Ge))),l(Xe,st)};K($r,Xe=>{e(_)?Xe(wr):Xe(kr,!1)},!0)}l(Je,ot)};K(Et,Je=>{e(Y)?Je(pr):Je(_r,!1)},!0)}l(Ye,at)};K(fr,Ye=>{e($)?Ye(gr):Ye(mr,!1)})}l(Tt,Ft)},$$slots:{default:!0}})}}}})}};K(ue,xe=>{e(le)&&xe(ve)})}var Ie=d(ue);{let xe=o(()=>[e(se),a()]),Ae=o(()=>{var Se;return(Se=v().eventList[E])==null?void 0:Se.classification}),Pe=o(()=>e(k)&&E!==0?"pause":e(_)?dt["local-activity"]:dt[v().category]);ht(Ie,{get point(){return e(xe)},get classification(){return e(Ae)},get icon(){return e(Pe)},get r(){return y}})}l(ce,me)}),h(oe),S(()=>fe(oe,"height",g)),lt("keypress",oe,H),lt("mouseenter",oe,ee),lt("mouseleave",oe,U),l(b,te),ye(),s()}Er(["click"]);var ia=ze('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1hb0j3w"><!><!><!><!><!></g>');function ca(b,t){be(t,!1);const i=N(),P=N();let s=M(t,"workflow",8),n=M(t,"length",8),f=M(t,"y",8);const{radius:a,height:v,gutter:m}=et;re(()=>{},()=>{W(i,m)}),re(()=>(e(i),p(n())),()=>{W(P,e(i)+n()-2*m)}),Ne(),Ce();var g=ia(),I=x(g);{let k=A(()=>[e(i),f()]),_=A(()=>[e(P),f()]),C=A(()=>a*2),z=A(()=>(p(St),p(s()),w(()=>St(s()))));qe(I,{get startPoint(){return e(k)},get endPoint(){return e(_)},get classification(){return p(s()),w(()=>s().status)},get strokeWidth(){return e(C)},get pending(){return p(s()),w(()=>s().isRunning)},get delayed(){return e(z)}})}var y=d(I);{let k=A(()=>[e(i),f()]);ht(y,{get point(){return e(k)},get classification(){return p(s()),w(()=>s().status)},get r(){return a}})}var u=d(y);{let k=A(()=>e(i)-a/2),_=A(()=>f()-a/2);Qe(u,{name:"workflow",get x(){return e(k)},get y(){return e(_)},get width(){return a},get height(){return a},strokeWidth:"4",class:"text-black"})}var c=d(u);{let k=A(()=>[e(P),f()]);ht(c,{get point(){return e(k)},get classification(){return p(s()),w(()=>s().status)},get r(){return a}})}var $=d(c);{let k=A(()=>e(P)-a/2),_=A(()=>f()-a/2);Qe($,{name:"workflow",get x(){return e(k)},get y(){return e(_)},get width(){return a},get height(){return a},strokeWidth:"4",class:"text-black"})}h(g),S(()=>fe(g,"height",v)),l(b,g),ye()}var da=ze("<!><!>",1),va=Q('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),ua=Q('<div id="event-history-timeline-graph" class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function vr(b,t){be(t,!1);const i=()=>ae(ut,"$activeGroupHeight",v),P=()=>ae(Be,"$eventStatusFilter",v),s=()=>ae(xt,"$fullEventHistory",v),n=()=>ae(tt,"$activeGroups",v),f=()=>ae(it,"$eventFilterSort",v),a=()=>ae(jt,"$timestamp",v),[v,m]=Le(),g=N(),I=N(),y=N(),u=N(),c=N(),$=N(),k=N();var _=N(),C=N();let z=M(t,"x",8,0),T=M(t,"y",8,0),L=M(t,"workflow",8),F=M(t,"groups",8),O=M(t,"viewportHeight",8),D=M(t,"readOnly",8,!1),H=M(t,"error",8,!1);const{height:ee,gutter:U,radius:J}=et;let Y=N(0),_e=N(0);const Ee=B=>{var X;W(_e,(X=B==null?void 0:B.target)===null||X===void 0?void 0:X.scrollTop)};re(()=>(p(D()),i()),()=>{W(g,D()?0:i())}),re(()=>(p(F()),P()),()=>{W(I,Ar(F(),P()))}),re(()=>(ge(_),s(),p(L()),ge(C)),()=>{W(y,(W(_,s()[0])===null||ge(_)===void 0?void 0:ge(_).eventTime)<L().executionTime?W(C,s()[0])===null||ge(C)===void 0?void 0:ge(C).eventTime:L().executionTime)}),re(()=>(p(L()),e(y)),()=>{W(u,!St(L())&&e(y)||L().startTime)}),re(()=>(e(I),e(g)),()=>{W(c,Math.max(ee*(e(I).length+2),120)+e(g))}),re(()=>e(c),()=>{W($,e(c)+120)}),re(()=>(n(),f(),e(g)),()=>{W(k,B=>{const X=n()===null||n()===void 0?void 0:n().filter(te=>f()==="ascending"?parseInt(te)<parseInt(B.id):parseInt(te)>parseInt(B.id));return X!=null&&X.length?e(g):0})}),Ne(),Ce();var V=ua(),R=x(V);Dn(R,{get workflow(){return L()},get startTime(){return e(u)},children:Lt,$$slots:{default:(B,X)=>{const te=A(()=>X.endTime),q=A(()=>X.duration);var $e=va(),oe=ne($e);let ie;var je=x(oe),He=x(je),ce=x(He,!0);h(He);var se=d(He,2),E=x(se,!0);h(se),h(je),h(oe);var G=d(oe,2);let le;var me=x(G);{let ue=A(()=>[U,0]),ve=A(()=>[U,e(c)]),Ie=A(()=>J/2);qe(me,{get startPoint(){return e(ue)},get endPoint(){return e(ve)},get strokeWidth(){return e(Ie)}})}var Z=d(me);{let ue=A(()=>[e(Y)-U,0]),ve=A(()=>[e(Y)-U,e(c)]),Ie=A(()=>J/2);qe(Z,{get startPoint(){return e(ue)},get endPoint(){return e(ve)},get strokeWidth(){return e(Ie)}})}var ke=d(Z);{let ue=A(()=>U-J/4),ve=A(()=>e(Y)-U+J/4);Zn(ke,{get x1(){return e(ue)},get x2(){return e(ve)},get timelineHeight(){return e(c)},get startTime(){return e(u)},get duration(){return e(q)}})}var de=d(ke);ca(de,{get workflow(){return L()},get y(){return ee},get length(){return e(Y)}});var Te=d(de);nt(Te,3,()=>e(I),ue=>ue.id,(ue,ve,Ie,xe)=>{const Ae=A(()=>(p(e(Ie)),e(k),e(ve),w(()=>(e(Ie)+2)*ee+e(k)(e(ve)))));var Pe=da(),Se=ne(Pe);{var We=Oe=>{var Ue=Re(),Tt=ne(Ue);Rt(Tt,()=>(e(ve),w(()=>e(ve).eventList.length)),Ot=>{la(Ot,{get y(){return e(Ae)},get group(){return e(ve)},get canvasWidth(){return e(Y)},get startTime(){return e(u)},get endTime(){return e(te)},get readOnly(){return D()}})}),l(Oe,Ue)};K(Se,Oe=>{(!O()||e(Ae)>e(_e)-2*ee&&e(Ae)<e(_e)+O()*ee)&&Oe(We)})}var Me=d(Se);{var Ge=Oe=>{{let Ue=A(()=>e(Ae)+1.33*J);Qn(Oe,{get y(){return e(Ue)},get group(){return e(ve)},get canvasWidth(){return e(Y)}})}};K(Me,Oe=>{p(D()),n(),e(ve),w(()=>!D()&&n().includes(e(ve).id))&&Oe(Ge)})}l(ue,Pe)}),h(G),S((ue,ve)=>{ie=De(oe,1,"pointer-events-none sticky top-[120px]",null,ie,{invisible:!!n().length}),j(ce,ue),j(E,ve),fe(G,"x",z()),fe(G,"y",T()),fe(G,"viewBox",`0 0 ${e(Y)??""} ${e($)??""}`),fe(G,"height",e($)),fe(G,"width",e(Y)),le=De(G,0,"-mt-4 svelte-1fw3am",null,le,{error:H()})},[()=>(a(),e(u),w(()=>a()(e(u),{format:"short"}))),()=>(a(),p(e(te)),w(()=>a()(e(te),{format:"short"})))]),l(B,$e)}}}),h(V),S(()=>rn(V,O()?`max-height: ${O()}px;`:"")),nr(V,"clientWidth",B=>W(Y,B)),lt("scroll",V,Ee),l(b,V),ye(),m()}var fa=Q('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function ga(b,t){var i=fa(),P=x(i);Ke(P,t,"default",{},null),h(i),l(b,i)}var ma=Q("<p> </p> <!>",1),pa=Q("<p> </p> <!>",1),_a=Q('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),$a=Q('<div class="w-full text-right text-xs" slot="summary"> </div>'),wa=Q("<!> <!>",1);function ur(b,t){be(t,!1);let i=M(t,"failure",8,void 0);Ce();var P=wa(),s=ne(P);{var n=v=>{{let m=A(()=>(p(r),w(()=>r("common.failure"))));ir(v,{get title(){return e(m)},class:"text-sm",children:(g,I)=>{var y=_a(),u=x(y),c=x(u,!0);h(u);var $=d(u,2);{let T=A(()=>(p(i()),w(()=>{var O;return((O=i())==null?void 0:O.message)||""}))),L=A(()=>(p(r),w(()=>r("common.copy-icon-title")))),F=A(()=>(p(r),w(()=>r("common.copy-success-icon-title"))));$t($,{get content(){return e(T)},language:"text",get copyIconTitle(){return e(L)},get copySuccessIconTitle(){return e(F)}})}var k=d($,2);{var _=T=>{var L=ma(),F=ne(L),O=x(F,!0);h(F);var D=d(F,2);{let H=A(()=>(p(r),w(()=>r("common.copy-icon-title")))),ee=A(()=>(p(r),w(()=>r("common.copy-success-icon-title"))));$t(D,{get content(){return p(i()),w(()=>i().source)},language:"text",get copyIconTitle(){return e(H)},get copySuccessIconTitle(){return e(ee)}})}S(H=>j(O,H),[()=>(p(r),w(()=>r("common.source")))]),l(T,L)};K(k,T=>{p(i()),w(()=>{var L;return(L=i())==null?void 0:L.source})&&T(_)})}var C=d(k,2);{var z=T=>{var L=pa(),F=ne(L),O=x(F,!0);h(F);var D=d(F,2);{let H=A(()=>(p(r),w(()=>r("common.copy-icon-title")))),ee=A(()=>(p(r),w(()=>r("common.copy-success-icon-title"))));$t(D,{get content(){return p(i()),w(()=>i().stackTrace)},language:"text",get copyIconTitle(){return e(H)},get copySuccessIconTitle(){return e(ee)}})}S(H=>j(O,H),[()=>(p(r),w(()=>r("common.stack-trace")))]),l(T,L)};K(C,T=>{p(i()),w(()=>{var L;return(L=i())==null?void 0:L.stackTrace})&&T(z)})}h(y),S(T=>j(c,T),[()=>(p(r),w(()=>r("common.message")))]),l(g,y)},$$slots:{default:!0,summary:(g,I)=>{var y=$a(),u=x(y,!0);h(y),S(()=>j(u,(p(i()),w(()=>{var c;return(c=i())==null?void 0:c.message})))),l(g,y)}}})}};K(s,v=>{i()&&v(n)})}var f=d(s,2);{var a=v=>{var m=Re(),g=ne(m);ur(g,{get failure(){return p(i()),w(()=>i().cause)}}),l(v,m)};K(f,v=>{p(i()),w(()=>{var m;return(m=i())==null?void 0:m.cause})&&v(a)})}l(b,P),ye()}var ka=Q('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function ha(b,t){be(t,!1);const i=()=>ae(jt,"$timestamp",P),[P,s]=Le();let n=M(t,"pendingTask",8,void 0);Ce();{let f=A(()=>(p(r),w(()=>r("workflows.pending-workflow-task"))));ir(b,{get title(){return e(f)},children:(a,v)=>{var m=ka(),g=x(m),I=x(g),y=d(I);Fe(y,{children:(H,ee)=>{we();var U=pe();S(()=>j(U,(p(n()),w(()=>n().state)))),l(H,U)},$$slots:{default:!0}}),h(g);var u=d(g,2),c=x(u),$=d(c);Fe($,{children:(H,ee)=>{we();var U=pe();S(()=>j(U,(p(n()),w(()=>n().attempt)))),l(H,U)},$$slots:{default:!0}}),h(u);var k=d(u,2),_=x(k),C=d(_);Fe(C,{children:(H,ee)=>{we();var U=pe();S(J=>j(U,J),[()=>(i(),p(n()),w(()=>i()(n().originalScheduledTime)))]),l(H,U)},$$slots:{default:!0}}),h(k);var z=d(k,2),T=x(z),L=d(T);Fe(L,{children:(H,ee)=>{we();var U=pe();S(J=>j(U,J),[()=>(i(),p(n()),w(()=>i()(n().scheduledTime)))]),l(H,U)},$$slots:{default:!0}}),h(z);var F=d(z,2),O=x(F),D=d(O);Fe(D,{children:(H,ee)=>{we();var U=pe();S(J=>j(U,J),[()=>(i(),p(n()),w(()=>i()(n().startedTime)))]),l(H,U)},$$slots:{default:!0}}),h(F),h(m),S((H,ee,U,J,Y)=>{j(I,`${H??""} `),j(c,`${ee??""} `),j(_,`${U??""} `),j(T,`${J??""} `),j(O,`${Y??""} `)},[()=>(p(r),w(()=>r("common.state"))),()=>(p(r),w(()=>r("common.attempt"))),()=>(p(r),w(()=>r("workflows.original-scheduled-time"))),()=>(p(r),w(()=>r("workflows.scheduled-time"))),()=>(p(r),w(()=>r("workflows.started-time")))]),l(a,m)},$$slots:{default:!0}})}ye(),s()}var xa=Q("<p> <!>.</p>"),ba=Q('<p><span class="mr-2 text-secondary">Timeout Type</span> </p>'),ya=Q("<!> <!>",1),Ta=Q('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> <!></div> <div class="flex flex-col gap-2 bg-primary p-4"><!> <!></div></div>',1);function Ea(b,t){be(t,!0);var i,P;let s=o(()=>Ur(t.error)),n=o(()=>Br(t.error)&&((i=t.error.attributes)===null||i===void 0?void 0:i.failure)),f=o(()=>Vr(t.error)&&((P=t.error.attributes)===null||P===void 0?void 0:P.timeoutType));var a=Re(),v=ne(a);{var m=g=>{{let I=o(()=>r(`typed-errors.${e(s)}.title`));zt(g,{icon:"warning",intent:"warning",get title(){return e(I)},children:(y,u)=>{var c=Ta(),$=ne(c),k=x($,!0);h($);var _=d($,2);{var C=V=>{var R=xa(),B=x(R,!0),X=d(B);{let te=o(()=>r(`typed-errors.${e(s)}.link`));lr(X,{newTab:!0,get href(){return e(te)},children:(q,$e)=>{we();var oe=pe();S(ie=>j(oe,ie),[()=>r(`typed-errors.${e(s)}.action`)]),l(q,oe)},$$slots:{default:!0}})}we(),h(R),S(te=>j(B,te),[()=>r("typed-errors.link-preface")]),l(V,R)};K(_,V=>{(e(s)==="NonDeterministicError"||e(s)==="BadSearchAttributes")&&V(C)})}var z=d(_,2),T=x(z),L=x(T),F=x(L),O=d(F);Qe(O,{get name(){return dt[t.error.category]}});var D=d(O,2),H=x(D,!0);h(D),h(L);var ee=d(L,2);{let V=o(()=>{var R;return(R=t.error)==null?void 0:R.eventTime});nn(ee,{get dateTime(){return e(V)}})}h(T);var U=d(T,2),J=x(U);{var Y=V=>{var R=ba(),B=d(x(R));h(R),S(()=>j(B,` ${e(f)??""}`)),l(V,R)};K(J,V=>{e(f)&&V(Y)})}var _e=d(J,2);{var Ee=V=>{ga(V,{children:(R,B)=>{var X=ya(),te=ne(X);{var q=ie=>{ur(ie,{get failure(){return e(n)}})};K(te,ie=>{e(n)&&ie(q)})}var $e=d(te,2);{var oe=ie=>{ha(ie,{get pendingTask(){return t.pendingTask}})};K($e,ie=>{t.pendingTask&&ie(oe)})}l(R,X)},$$slots:{default:!0}})};K(_e,V=>{(e(n)||t.pendingTask)&&V(Ee)})}h(U),h(z),S((V,R)=>{j(k,V),j(F,`${t.error.id??""} `),j(H,R)},[()=>r(`typed-errors.${e(s)}.description`),()=>{var V;return fn((V=t.error)==null?void 0:V.name)}]),l(y,c)},$$slots:{default:!0}})}};K(v,g=>{e(s)&&e(s)!=="ResetWorkflow"&&g(m)})}l(b,a),ye()}const Pa=async(b,t,i)=>{const P=$n(t),s=wn(t),n=kn(t),f={...t,codec:{...t==null?void 0:t.codec,endpoint:P,passAccessToken:s,includeCredentials:n}},a=!1;try{const v=await pn(b,Ht(rt).params.namespace,f,Ht(sr).accessToken,i,a);return _n(v,a)}catch{return b}};function Jt(b,t,i){const P=Ct({events:b},null,2),s=document.createElement("a"),n=new Blob([P],{type:i});s.href=URL.createObjectURL(n),s.download=t,s.click()}const Ia=async({namespace:b,workflowId:t,runId:i,settings:P,decodeSetting:s})=>{try{const n=await cn({namespace:b,workflowId:t,runId:i,sort:"ascending"});if(s==="encoded")Jt(n,`${i}/events.json`,"text/plain");else{const f=[];for(const a of n){const v=await Pa(a,P,s);f.push(v)}Jt(f,`${i}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var Aa=Q('<div class="flex items-center space-x-4"><!></div>');function Wa(b,t){be(t,!1);const i=()=>ae(Lr,"$parameters",s),P=()=>ae(hn,"$isCloud",s),[s,n]=Le(),f=N(),a=N(),{namespace:v,workflowId:m,runId:g}=i();re(()=>Bt,()=>{W(f,Bt({namespace:v,workflow:m,run:g}))}),re(()=>e(f),()=>{W(a,e(f)+".json")}),Ne(),Ce();var I=Re(),y=ne(I);{var u=c=>{var $=Aa(),k=x($);lr(k,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(a)},newTab:!0,"data-testid":"view-raw-event-history",children:(_,C)=>{we();var z=pe();S(T=>j(z,T),[()=>(p(r),w(()=>r("events.view-raw-history")))]),l(_,z)},$$slots:{default:!0}}),h($),l(c,$)};K(y,c=>{P()||c(u)})}l(b,I),ye(),n()}var Ha=Q('<h3 slot="title"> </h3>'),Sa=Q("<!> <!> <!>",1),Ca=Q('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function La(b,t){be(t,!1);const i=()=>ae(rt,"$page",s),P=()=>ae(Gt,"$downloadEventHistorySetting",s),[s,n]=Le();let f=M(t,"open",12,!1),a=M(t,"namespace",8),v=M(t,"workflowId",8),m=M(t,"runId",8);const g=()=>{f(!1),Ia({namespace:a(),workflowId:v(),runId:m(),settings:i().data.settings,decodeSetting:P()})};Ce();{let I=A(()=>(p(r),w(()=>r("common.download")))),y=A(()=>(p(r),w(()=>r("common.cancel"))));gn(b,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(I)},get cancelText(){return e(y)},get open(){return f()},set open(u){f(u)},$$events:{confirmModal:()=>g(),cancelModal:()=>f(!1)},$$slots:{title:(u,c)=>{var $=Ha(),k=x($,!0);h($),S(_=>j(k,_),[()=>(p(r),w(()=>r("common.download-event-history-json")))]),l(u,$)},content:(u,c)=>{var $=Ca(),k=x($);mn(k,{get group(){return Gt},name:"decode-setting",class:"h-auto overflow-auto",children:(C,z)=>{var T=Sa(),L=ne(T);{let D=A(()=>(p(r),w(()=>r("events.encoded"))));At(L,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(D)}})}var F=d(L,2);{let D=A(()=>(p(r),w(()=>r("events.decoded")))),H=A(()=>(p(r),w(()=>r("events.decoded-description"))));At(F,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(D)},get description(){return e(H)}})}var O=d(F,2);{let D=A(()=>(p(r),w(()=>r("events.readable")))),H=A(()=>(p(r),w(()=>r("events.readable-description"))));At(O,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(D)},get description(){return e(H)}})}l(C,T)},$$slots:{default:!0}});var _=d(k,2);Wa(_,{}),h($),l(u,$)}},$$legacy:!0})}ye(),n()}const Ra=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],ja=b=>!!b.workflowExecutionStartedEventAttributes,za=b=>{for(const t of Ra)if(b.eventType===t)return!0;return!1},Oa=b=>rr(b)?b.attributes.input:qr(b)?b.attributes.result===null?null:b.attributes.result:b.attributes,Fa=b=>{var f;let t,i,P=!1,s,n;for(const a of b)if(ja(a)){s=a;continue}else if(za(a)){n=a;continue}return s&&(t=Ct(((f=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:f.input)??null)),n&&(P=rr(n),i=Ct(Oa(n))),{input:t,results:i,contAsNew:P}};var Ma=Q('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function Da(b,t){be(t,!1);const i=()=>ae(xt,"$fullEventHistory",s),P=()=>ae(bt,"$workflowRun",s),[s,n]=Le(),f=N(),a=N();re(()=>i(),()=>{W(f,Fa(i()))}),re(()=>P(),()=>{W(a,P().workflow.isRunning)}),Ne(),Ce();var v=Ma(),m=x(v);{let I=A(()=>(p(r),w(()=>r("workflows.input"))));Qt(m,{get title(){return e(I)},get content(){return e(f),w(()=>e(f).input)},get isRunning(){return e(a)}})}var g=d(m,2);{let I=A(()=>(p(r),w(()=>r("workflows.result"))));Qt(g,{get title(){return e(I)},get content(){return e(f),w(()=>e(f).results)},get isRunning(){return e(a)}})}h(v),l(b,v),ye(),n()}var Ga=Q('<div class="mb-4"><!></div>');function Na(b,t){be(t,!1);const i=()=>ae(bt,"$workflowRun",P),[P,s]=Le(),n=N(),f=N(),a=N(),v=N();var m=N();re(()=>(e(n),e(f),e(a),i()),()=>{(u=>{W(n,u.workflow),W(f,u.workers),W(a,u.workersLoaded)})(i())}),re(()=>(e(a),e(n),ge(m),e(f)),()=>{W(v,e(a)&&(e(n)===null||e(n)===void 0?void 0:e(n).isRunning)&&!(!(W(m,e(f)===null||e(f)===void 0?void 0:e(f).pollers)===null||ge(m)===void 0)&&ge(m).length))}),Ne(),Ce();var g=Re(),I=ne(g);{var y=u=>{var c=Ga(),$=x(c);{let k=A(()=>(p(r),w(()=>r("workflows.workflow-error-no-workers-title"))));zt($,{icon:"warning",intent:"warning",get title(){return e(k)},children:(_,C)=>{we();var z=pe();S(T=>j(z,T),[()=>(p(r),e(n),w(()=>{var T;return r("workflows.workflow-error-no-workers-description",{taskQueue:((T=e(n))==null?void 0:T.taskQueue)??""})}))]),l(_,z)},$$slots:{default:!0}})}h(c),xn(1,c,()=>bn,()=>({duration:200,delay:100})),l(u,c)};K(I,u=>{e(v)&&u(y)})}l(b,g),ye(),s()}var Ua=Q('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Va(b,t){const i=kt(t,["children","$$slots","$$events","$$legacy"]),P=kt(i,["id","open","onToggle","icon"]);be(t,!1);let s=M(t,"id",24,()=>crypto.randomUUID()),n=M(t,"open",12,!1),f=M(t,"onToggle",8,void 0),a=M(t,"icon",8,void 0);const v=async()=>{f()&&await f()(),n(!n())};Ce();var m=Ua(),g=x(m),I=x(g),y=x(I);Ke(y,t,"title",{},null);var u=d(y,2);Ke(u,t,"description",{},null);var c=d(u,2),$=x(c);Ke($,t,"action",{},null);var k=d($,2);{let T=A(()=>a()?a():n()?"arrow-down":"arrow-right");Qe(k,{get name(){return e(T)}})}h(c),h(I),h(g);var _=d(g,2);let C;var z=x(_);Ke(z,t,"default",{get open(){return n()}},null),h(_),h(m),S(()=>{De(m,1,`w-full ${p(P),w(()=>P.class)??""}`),fe(g,"id",`${s()??""}-trigger`),fe(g,"aria-expanded",n()),fe(g,"aria-controls",`${s()??""}-content`),fe(_,"id",`${s()??""}-content`),fe(_,"aria-labelledby",`${s()??""}-trigger`),C=De(_,1,"block w-full bg-primary p-2",null,C,{hidden:!n()})}),lt("click",g,v),l(b,m),ye()}var Ba=Q("<!> <!>",1),qa=Q("<!> <!>",1),Qa=Q('<p class="flex items-center gap-2"> <!></p>'),Ya=Q('<p class="flex items-center gap-2"> <!></p>'),Ja=Q('<p class="flex items-center gap-2"> <!></p>'),Xa=Q('<p class="flex items-center gap-2"> <!></p>'),Za=Q('<p class="flex items-center gap-2"> <!></p>'),Ka=Q('<div class="flex flex-col gap-2"><p> </p> <!></div>'),eo=Q('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Xt(b,t){be(t,!0);const i=()=>ae(jt,"$timestamp",P),[P,s]=Le();var n,f,a,v;const m=o(()=>i()(t.callback.lastAttemptCompleteTime)),g=o(()=>i()(t.callback.nextAttemptScheduleTime)),I=o(()=>(n=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||n===void 0?void 0:n.message),y=o(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),u=o(()=>(a=(f=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||f===void 0?void 0:f.nexus)===null||a===void 0?void 0:a.url),c={Standby:r("nexus.callback.standby"),Scheduled:r("nexus.callback.scheduled"),"Backing Off":r("nexus.callback.backing-off"),Failed:r("nexus.callback.failed"),Succeeded:r("nexus.callback.succeeded")},$="Failed",k=o(()=>t.callback.state===$),_=o(()=>c[t.callback.state]||r("nexus.nexus-callback")),C=o(()=>((v=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||v===void 0?void 0:v.links)||[]),z=o(()=>!e(C).length&&!t.link&&e(u));{let T=o(()=>e(k)?"error":"info");zt(b,{icon:"nexus",get intent(){return e(T)},get title(){return e(_)},children:(L,F)=>{var O=eo(),D=ne(O),H=x(D);{var ee=E=>{var G=Re(),le=ne(G);nt(le,17,()=>e(C),me=>{var Z,ke,de;return((ke=(Z=me.workflowEvent)==null?void 0:Z.eventRef)==null?void 0:ke.eventId)||((de=me.workflowEvent)==null?void 0:de.requestIdRef.requestId)},(me,Z,ke,de)=>{var Te=Ba(),ue=ne(Te);mt(ue,{get link(){return e(Z)}});var ve=d(ue,2);{let Ie=o(()=>r("nexus.link-namespace")),xe=o(()=>qt({namespace:e(Z).workflowEvent.namespace}));mt(ve,{get link(){return e(Z)},get label(){return e(Ie)},get value(){return e(Z).workflowEvent.namespace},get href(){return e(xe)}})}l(me,Te)}),l(E,G)},U=E=>{var G=Re(),le=ne(G);{var me=Z=>{var ke=qa(),de=ne(ke);mt(de,{get link(){return t.link}});var Te=d(de,2);{let ue=o(()=>r("nexus.link-namespace")),ve=o(()=>qt({namespace:t.link.workflowEvent.namespace}));mt(Te,{get link(){return t.link},get label(){return e(ue)},get value(){return t.link.workflowEvent.namespace},get href(){return e(ve)}})}l(Z,ke)};K(le,Z=>{t.link&&Z(me)},!0)}l(E,G)};K(H,E=>{e(C).length?E(ee):E(U,!1)})}var J=d(H,2),Y=x(J),_e=x(Y,!0),Ee=d(_e);Fe(Ee,{type:"subtle",children:(E,G)=>{we();var le=pe();S(()=>j(le,t.callback.state)),l(E,le)},$$slots:{default:!0}}),h(Y);var V=d(Y,2);{var R=E=>{var G=Qa(),le=x(G),me=d(le);Fe(me,{type:"subtle",children:(Z,ke)=>{we();var de=pe();S(()=>j(de,t.callback.attempt)),l(Z,de)},$$slots:{default:!0}}),h(G),S(Z=>j(le,`${Z??""} `),[()=>r("common.attempt")]),l(E,G)};K(V,E=>{t.callback.attempt&&E(R)})}var B=d(V,2);{var X=E=>{var G=Ya(),le=x(G),me=d(le);Fe(me,{type:"subtle",children:(Z,ke)=>{we();var de=pe();S(()=>j(de,e(m))),l(Z,de)},$$slots:{default:!0}}),h(G),S(Z=>j(le,`${Z??""} `),[()=>r("nexus.last-attempt-completed-time")]),l(E,G)};K(B,E=>{t.callback.lastAttemptCompleteTime&&E(X)})}var te=d(B,2);{var q=E=>{var G=Ja(),le=x(G),me=d(le);Fe(me,{type:"subtle",children:(Z,ke)=>{we();var de=pe();S(()=>j(de,e(g))),l(Z,de)},$$slots:{default:!0}}),h(G),S(Z=>j(le,`${Z??""} `),[()=>r("nexus.next-attempt-scheduled-time")]),l(E,G)};K(te,E=>{t.callback.nextAttemptScheduleTime&&E(q)})}h(J);var $e=d(J,2);{var oe=E=>{var G=Xa(),le=x(G),me=d(le);Fe(me,{type:"subtle",children:(Z,ke)=>{we();var de=pe();S(()=>j(de,e(u))),l(Z,de)},$$slots:{default:!0}}),h(G),S(Z=>j(le,`${Z??""} `),[()=>r("nexus.callback-url")]),l(E,G)};K($e,E=>{e(z)&&E(oe)})}var ie=d($e,2);{var je=E=>{var G=Za(),le=x(G),me=d(le);Fe(me,{type:"subtle",children:(Z,ke)=>{we();var de=pe();S(()=>j(de,e(y))),l(Z,de)},$$slots:{default:!0}}),h(G),S(Z=>j(le,`${Z??""} `),[()=>r("nexus.blocked-reason")]),l(E,G)};K(ie,E=>{e(y)&&E(je)})}var He=d(ie,2);{var ce=E=>{var G=Ka(),le=x(G),me=x(le,!0);h(le);var Z=d(le,2);{let ke=o(()=>r("common.copy-icon-title")),de=o(()=>r("common.copy-success-icon-title"));$t(Z,{get content(){return e(I)},language:"text",get copyIconTitle(){return e(ke)},get copySuccessIconTitle(){return e(de)}})}h(G),S(ke=>j(me,ke),[()=>r("nexus.last-attempt-failure")]),l(E,G)};K(He,E=>{e(I)&&E(ce)})}h(D);var se=d(D,2);Zt(se,()=>t.children??Kt),S(E=>j(_e,E),[()=>r("common.state")]),l(L,O)},$$slots:{default:!0}})}ye(),s()}var to=Q('<div class="flex flex-col gap-2"></div>'),ro=Q('<p class="p-1" slot="title"> </p>'),no=Q('<div class="py-2"><!></div>');function ao(b,t){be(t,!0);const i=()=>ae(xt,"$fullEventHistory",P),[P,s]=Le();var n;const f=o(()=>i()[0]),a=o(()=>(n=e(f)===null||e(f)===void 0?void 0:e(f).links)===null||n===void 0?void 0:n[0]),v=o(()=>t.callbacks[0]);Xt(b,{get callback(){return e(v)},get link(){return e(a)},children:(m,g)=>{var I=Re(),y=ne(I);{var u=c=>{var $=no(),k=x($);Va(k,{children:Lt,$$slots:{default:(_,C)=>{const z=o(()=>C.open);var T=Re(),L=ne(T);{var F=O=>{var D=to();nt(D,21,()=>t.callbacks.slice(1),yt,(H,ee)=>{Xt(H,{get callback(){return e(ee)}})}),h(D),l(O,D)};K(L,O=>{e(z)&&O(F)})}l(_,T)},title:(_,C)=>{var z=ro(),T=x(z);h(z),S(()=>j(T,`View ${t.callbacks.length-1} other Callbacks`)),l(_,z)}}}),h($),l(c,$)};K(y,c=>{t.callbacks.length>1&&c(u)})}l(m,I)},$$slots:{default:!0}}),ye(),s()}var oo=Q("<span></span> ",1),so=Q("<!> <!> <!> <!> <!>",1),lo=Q('<div class="flex flex-col gap-0 pt-4"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative pb-24"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col"><!> <!></div></div> <!>',1);function io(b,t){be(t,!0);const i=()=>ae(bt,"$workflowRun",m),P=()=>ae(it,"$eventFilterSort",m),s=()=>ae(Ze,"$eventViewType",m),n=()=>ae(tr,"$filteredEventHistory",m),f=()=>ae(Rr,"$currentEventHistory",m),a=()=>ae(ct,"$pauseLiveUpdates",m),v=()=>ae(Nt,"$minimizeEventView",m),[m,g]=Le(),I=o(()=>Wt.params),y=o(()=>e(I).namespace),u=o(()=>i().workflow),c=o(()=>e(u)===null||e(u)===void 0?void 0:e(u).pendingActivities),$=o(()=>e(u)===null||e(u)===void 0?void 0:e(u).pendingNexusOperations);let k=o(()=>P()==="descending"),_=o(()=>s()==="compact"),C=o(()=>or(n(),"ascending",e(c),e($))),z=o(()=>e(k)?[...e(C)].reverse():e(C)),T=o(()=>e(k)?[...n()].reverse():n());const L=o(()=>Qr(f()));Mt(()=>{s(),Yt()}),Pr(()=>{Yt()}),Mt(()=>{!(!(e(u)===null||e(u)===void 0)&&e(u).isRunning)&&a()&&he(ct,!1)});let F=wt(!1);const O=()=>{e(k)?he(it,"ascending"):he(it,"descending")};var D=lo(),H=ne(D),ee=x(H);Na(ee,{});var U=d(ee,2),J=x(U);Da(J,{});var Y=d(J,2);{var _e=ce=>{{let se=o(()=>{var E;return(E=e(u))==null?void 0:E.pendingWorkflowTask});Ea(ce,{get error(){return e(L)},get pendingTask(){return e(se)}})}};K(Y,ce=>{e(L)&&ce(_e)})}var Ee=d(Y,2);{var V=ce=>{ao(ce,{get callbacks(){return e(u).callbacks}})};K(Ee,ce=>{var se,E;(E=(se=e(u))==null?void 0:se.callbacks)!=null&&E.length&&ce(V)})}h(U),h(H);var R=d(H,2),B=x(R),X=x(B),te=x(X,!0);h(X);var q=d(X,2),$e=x(q);yn($e,{children:(ce,se)=>{var E=so(),G=ne(E);{var le=Te=>{{let ue=o(()=>e(k)?"descending":"ascending");pt(Te,{get leadingIcon(){return e(ue)},"data-testid":"zoom-in",size:"sm",$$events:{click:O},children:(ve,Ie)=>{we();var xe=pe();S(Ae=>j(xe,Ae),[()=>e(k)?r("common.descending"):r("common.ascending")]),l(ve,xe)},$$slots:{default:!0}})}};K(G,Te=>{s()!=="json"&&Te(le)})}var me=d(G,2);{let Te=o(()=>v()?r("workflows.timeline-minimized"):r("workflows.timeline-expanded"));Tn(me,{get text(){return e(Te)},top:!0,children:(ue,ve)=>{{let Ie=o(()=>v()?"minimize":"expand");pt(ue,{get leadingIcon(){return e(Ie)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>he(Nt,!v())},children:(xe,Ae)=>{we();var Pe=pe();S(Se=>j(Pe,Se),[()=>v()?r("workflows.minimized"):r("workflows.expanded")]),l(xe,Pe)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var Z=d(me,2);Mn(Z,{get compact(){return e(_)},get minimized(){return v()}});var ke=d(Z,2);{let Te=o(()=>{var ue;return!((ue=e(u))!=null&&ue.isRunning)});pt(ke,{get disabled(){return e(Te)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>he(ct,!a())},children:(ue,ve)=>{var Ie=oo(),xe=ne(Ie),Ae=d(xe);S(Pe=>{var Se;De(xe,1,`h-1.5 w-1.5 rounded-full ${a()||!((Se=e(u))!=null&&Se.isRunning)?"bg-slate-300":"bg-green-600"}`),j(Ae,` ${Pe??""}`)},[()=>{var Pe;return a()||!((Pe=e(u))!=null&&Pe.isRunning)?r("workflows.auto-refresh-off"):r("workflows.auto-refresh-on")}]),l(ue,Ie)},$$slots:{default:!0}})}var de=d(ke,2);pt(de,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>W(F,!0)},children:(Te,ue)=>{we();var ve=pe();S(Ie=>j(ve,Ie),[()=>r("common.download")]),l(Te,ve)},$$slots:{default:!0}}),l(ce,E)},$$slots:{default:!0}}),h(q),h(B);var oe=d(B,2),ie=x(oe);{let ce=o(()=>!!e(L)),se=o(()=>v()?360:void 0);vr(ie,{get workflow(){return e(u)},get groups(){return e(z)},get error(){return e(ce)},get viewportHeight(){return e(se)}})}var je=d(ie,2);Hn(je,{get groups(){return e(z)},get history(){return e(T)},get minimized(){return v()}}),h(oe),h(R);var He=d(R,2);{let ce=o(()=>{var E;return(E=e(u))==null?void 0:E.id}),se=o(()=>{var E;return(E=e(u))==null?void 0:E.runId});La(He,{get namespace(){return e(y)},get workflowId(){return e(ce)},get runId(){return e(se)},get open(){return e(F)},set open(E){W(F,E,!0)}})}S((ce,se)=>{De(B,1,ce),j(te,se)},[()=>er(br("surface-background flex flex-wrap items-center justify-between gap-2 border-b border-subtle py-2 xl:gap-8",!v()&&"sticky top-0 z-30 md:top-12")),()=>r("workflows.event-history")]),l(b,D),ye(),g()}var co=Q("<!> <!>",1);function ws(b,t){be(t,!1);const i=()=>ae(rt,"$page",P),[P,s]=Le(),n=i().params.workflow;Ce();var f=co(),a=ne(f);{let m=A(()=>`${r("workflows.workflow-history")} | ${n}`);Tr(a,{get title(){return e(m)},get url(){return i().url.href}})}var v=d(a,2);io(v,{}),l(b,f),ye(),s()}export{ws as component};
