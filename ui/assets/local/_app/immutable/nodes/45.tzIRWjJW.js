import{r as ft}from"../chunks/index.aHWtvSLc.js";import{e as Qe,g as Be}from"../chunks/route-for.Ebs8MgF0.js";import{s as _e,M as te,h as F,b as V,j as O,k as L,d as E,f as b,m as D,i as C,n as w,T as re,x as Le,y as et,t as K,l as G,q as Ce,c as Ie,p as ct,o as pt,v as We,S as mt}from"../chunks/scheduler.1T9hOnFr.js";import{S as De,i as Ve,f as le,c as k,a as A,m as I,g as se,b as d,e as ue,t as m,d as T}from"../chunks/index.cVovwi_s.js";import{p as tt}from"../chunks/stores.kVU4QtkK.js";import{P as dt}from"../chunks/page-title.YnYjoVKm.js";import{g as _t}from"../chunks/entry.z6x9yPk5.js";import{e as je}from"../chunks/each.QHpLJPfe.js";import{B as Te}from"../chunks/button.weNX9UTi.js";import{c as rt}from"../chunks/search-attributes.21Oi_dD4.js";import{I as Se}from"../chunks/input.aUwX7NsP.js";import{S as lt,O as Re}from"../chunks/option.luAZ3n9c.js";import{A as nt}from"../chunks/alert.C7CK6hla.js";import{C as at}from"../chunks/code-block.ngWTTQUs.js";import{I as gt}from"../chunks/icon.w8eknFMq.js";import{t as ge}from"../chunks/translate.HrioCK44.js";import{t as $t,v as bt}from"../chunks/toaster.csZ4Nzbc.js";import{L as ot}from"../chunks/label.lHeqfppI.js";import{L as st}from"../chunks/link.DYqFrQLD.js";import{j as ht}from"../chunks/pollers-service.2j3Md_v-.js";import{w as wt,d as vt,s as kt}from"../chunks/workflows.uayvxFOX.js";import{p as ye}from"../chunks/format-time.PmxHXK_V.js";import{u as He}from"../chunks/update-query-parameters.f8zrEbj1.js";import{w as At}from"../chunks/workflow-create-disabled.uAN_epFl.js";const It=async function({params:a,parent:e}){if((await e()).settings.startWorkflowDisabled){const{namespace:r}=a;ft(302,Qe({namespace:r}))}},Ir=Object.freeze(Object.defineProperty({__proto__:null,load:It},Symbol.toStringTag,{value:"Module"}));function Me(a,e,t){const r=a.slice();return r[13]=e[t].value,r[14]=e[t].label,r[4]=e[t].type,r}function Tt(a){let e=a[14]+"",t;return{c(){t=K(e)},l(r){t=G(r,e)},m(r,o){C(r,t,o)},p(r,o){o&2&&e!==(e=r[14]+"")&&Ce(t,e)},d(r){r&&b(t)}}}function Ne(a){let e,t;return e=new Re({props:{disabled:a[3](a[13]),value:a[13],description:a[4],$$slots:{default:[Tt]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,o){I(e,r,o),t=!0},p(r,o){const n={};o&10&&(n.disabled=r[3](r[13])),o&2&&(n.value=r[13]),o&2&&(n.description=r[4]),o&131074&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function St(a){let e,t,r=je(a[1]),o=[];for(let l=0;l<r.length;l+=1)o[l]=Ne(Me(a,r,l));const n=l=>d(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=Le()},l(l){for(let s=0;s<o.length;s+=1)o[s].l(l);e=Le()},m(l,s){for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(l,s);C(l,e,s),t=!0},p(l,s){if(s&10){r=je(l[1]);let u;for(u=0;u<r.length;u+=1){const i=Me(l,r,u);o[u]?(o[u].p(i,s),m(o[u],1)):(o[u]=Ne(i),o[u].c(),m(o[u],1),o[u].m(e.parentNode,e))}for(se(),u=r.length;u<o.length;u+=1)n(u);ue()}},i(l){if(!t){for(let s=0;s<r.length;s+=1)m(o[s]);t=!0}},o(l){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)d(o[s]);t=!1},d(l){l&&b(e),et(o,l)}}}function Dt(a){let e,t,r;function o(l){a[11](l)}let n={label:"Value",id:"attribute-value",class:"w-full"};return a[0].value!==void 0&&(n.value=a[0].value),e=new Se({props:n}),te.push(()=>le(e,"value",o)),{c(){k(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){I(e,l,s),r=!0},p(l,s){const u={};!t&&s&1&&(t=!0,u.value=l[0].value,re(()=>t=!1)),e.$set(u)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){T(e,l)}}}function Vt(a){let e,t,r;function o(l){a[10](l)}let n={label:"Value",id:"attribute-value",type:"datetime-local",class:"w-full"};return a[0].value!==void 0&&(n.value=a[0].value),e=new Se({props:n}),te.push(()=>le(e,"value",o)),{c(){k(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){I(e,l,s),r=!0},p(l,s){const u={};!t&&s&1&&(t=!0,u.value=l[0].value,re(()=>t=!1)),e.$set(u)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){T(e,l)}}}function Et(a){let e,t,r;function o(l){a[9](l)}let n={class:"w-full",label:"Value",id:"attribute-value",$$slots:{default:[jt]},$$scope:{ctx:a}};return a[0].value!==void 0&&(n.value=a[0].value),e=new lt({props:n}),te.push(()=>le(e,"value",o)),{c(){k(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){I(e,l,s),r=!0},p(l,s){const u={};s&131072&&(u.$$scope={dirty:s,ctx:l}),!t&&s&1&&(t=!0,u.value=l[0].value,re(()=>t=!1)),e.$set(u)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){T(e,l)}}}function Pt(a){let e;return{c(){e=K("True")},l(t){e=G(t,"True")},m(t,r){C(t,e,r)},d(t){t&&b(e)}}}function Qt(a){let e;return{c(){e=K("False")},l(t){e=G(t,"False")},m(t,r){C(t,e,r)},d(t){t&&b(e)}}}function jt(a){let e,t,r,o;return e=new Re({props:{value:!0,$$slots:{default:[Pt]},$$scope:{ctx:a}}}),r=new Re({props:{value:!1,$$slots:{default:[Qt]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment),t=V(),k(r.$$.fragment)},l(n){A(e.$$.fragment,n),t=E(n),A(r.$$.fragment,n)},m(n,l){I(e,n,l),C(n,t,l),I(r,n,l),o=!0},p(n,l){const s={};l&131072&&(s.$$scope={dirty:l,ctx:n}),e.$set(s);const u={};l&131072&&(u.$$scope={dirty:l,ctx:n}),r.$set(u)},i(n){o||(m(e.$$.fragment,n),m(r.$$.fragment,n),o=!0)},o(n){d(e.$$.fragment,n),d(r.$$.fragment,n),o=!1},d(n){n&&b(t),T(e,n),T(r,n)}}}function Wt(a){let e,t,r,o,n,l,s,u,i;function f($){a[8]($)}let g={id:"search-attribute",label:"Custom Search Attribute",placeholder:"Select Attribute",$$slots:{default:[St]},$$scope:{ctx:a}};a[0].attribute!==void 0&&(g.value=a[0].attribute),t=new lt({props:g}),te.push(()=>le(t,"value",f));const v=[Et,Vt,Dt],S=[];function B($,p){return $[4]==="Bool"?0:$[4]==="Datetime"?1:2}return n=B(a),l=S[n]=v[n](a),u=new Te({props:{variant:"ghost",leadingIcon:"close",class:"mt-6 w-10 rounded-full"}}),u.$on("click",a[12]),{c(){e=F("div"),k(t.$$.fragment),o=V(),l.c(),s=V(),k(u.$$.fragment),this.h()},l($){e=O($,"DIV",{class:!0});var p=L(e);A(t.$$.fragment,p),o=E(p),l.l(p),s=E(p),A(u.$$.fragment,p),p.forEach(b),this.h()},h(){D(e,"class","flex items-end items-center justify-between gap-2")},m($,p){C($,e,p),I(t,e,null),w(e,o),S[n].m(e,null),w(e,s),I(u,e,null),i=!0},p($,[p]){const y={};p&131082&&(y.$$scope={dirty:p,ctx:$}),!r&&p&1&&(r=!0,y.value=$[0].attribute,re(()=>r=!1)),t.$set(y);let J=n;n=B($),n===J?S[n].p($,p):(se(),d(S[J],1,1,()=>{S[J]=null}),ue(),l=S[n],l?l.p($,p):(l=S[n]=v[n]($),l.c()),m(l,1),l.m(e,s))},i($){i||(m(t.$$.fragment,$),m(l),m(u.$$.fragment,$),i=!0)},o($){d(t.$$.fragment,$),d(l),d(u.$$.fragment,$),i=!1},d($){$&&b(e),T(t),S[n].d(),T(u)}}}function qt(a,e,t){let r,o;var n,l;let{attributesToAdd:s=[]}=e,{searchAttributes:u=[]}=e,{attribute:i}=e,{onRemove:f}=e;function g(p){a.$$.not_equal(i.attribute,p)&&(i.attribute=p,t(0,i))}function v(p){a.$$.not_equal(i.value,p)&&(i.value=p,t(0,i))}function S(p){a.$$.not_equal(i.value,p)&&(i.value=p,t(0,i))}function B(p){a.$$.not_equal(i.value,p)&&(i.value=p,t(0,i))}const $=()=>f(i.attribute);return a.$$set=p=>{"attributesToAdd"in p&&t(5,s=p.attributesToAdd),"searchAttributes"in p&&t(1,u=p.searchAttributes),"attribute"in p&&t(0,i=p.attribute),"onRemove"in p&&t(2,f=p.onRemove)},a.$$.update=()=>{a.$$.dirty&195&&t(4,r=t(7,l=t(6,n=u.find(p=>p.value===i.attribute))===null||n===void 0?void 0:n.type)!==null&&l!==void 0?l:""),a.$$.dirty&32&&t(3,o=p=>!!s.find(y=>y.attribute===p))},[i,u,f,o,r,s,n,l,g,v,S,B,$]}class Ct extends De{constructor(e){super(),Ve(this,e,qt,Wt,_e,{attributesToAdd:5,searchAttributes:1,attribute:0,onRemove:2})}}function ze(a,e,t){const r=a.slice();return r[6]=e[t],r[7]=e,r[8]=t,r}function Ke(a){let e,t,r;function o(l){a[5](l,a[6],a[7],a[8])}let n={attributesToAdd:a[0],searchAttributes:a[1],onRemove:a[3]};return a[6]!==void 0&&(n.attribute=a[6]),e=new Ct({props:n}),te.push(()=>le(e,"attribute",o)),{c(){k(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){I(e,l,s),r=!0},p(l,s){a=l;const u={};s&1&&(u.attributesToAdd=a[0]),s&2&&(u.searchAttributes=a[1]),!t&&s&1&&(t=!0,u.attribute=a[6],re(()=>t=!1)),e.$set(u)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){T(e,l)}}}function Rt(a){let e;return{c(){e=K("Add a Search Attribute")},l(t){e=G(t,"Add a Search Attribute")},m(t,r){C(t,e,r)},d(t){t&&b(e)}}}function Ut(a){let e,t,r,o=je(a[0]),n=[];for(let s=0;s<o.length;s+=1)n[s]=Ke(ze(a,o,s));const l=s=>d(n[s],1,1,()=>{n[s]=null});return t=new Te({props:{variant:"ghost",leadingIcon:"add",disabled:!a[1].length||a[0].length===a[1].length||a[0].filter(Ge).length>0,$$slots:{default:[Rt]},$$scope:{ctx:a}}}),t.$on("click",a[2]),{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=V(),k(t.$$.fragment)},l(s){for(let u=0;u<n.length;u+=1)n[u].l(s);e=E(s),A(t.$$.fragment,s)},m(s,u){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,u);C(s,e,u),I(t,s,u),r=!0},p(s,[u]){if(u&11){o=je(s[0]);let f;for(f=0;f<o.length;f+=1){const g=ze(s,o,f);n[f]?(n[f].p(g,u),m(n[f],1)):(n[f]=Ke(g),n[f].c(),m(n[f],1),n[f].m(e.parentNode,e))}for(se(),f=o.length;f<n.length;f+=1)l(f);ue()}const i={};u&3&&(i.disabled=!s[1].length||s[0].length===s[1].length||s[0].filter(Ge).length>0),u&512&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){if(!r){for(let u=0;u<o.length;u+=1)m(n[u]);m(t.$$.fragment,s),r=!0}},o(s){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);d(t.$$.fragment,s),r=!1},d(s){s&&b(e),et(n,s),T(t,s)}}}const Ge=a=>a.value==="";function Ft(a,e,t){let r,o;Ie(a,rt,i=>t(4,o=i));let{attributesToAdd:n=[]}=e;const l=()=>{t(0,n=[...n,{attribute:"",value:""}])},s=i=>{t(0,n=n.filter(f=>f.attribute!==i))};function u(i,f,g,v){g[v]=i,t(0,n)}return a.$$set=i=>{"attributesToAdd"in i&&t(0,n=i.attributesToAdd)},a.$$.update=()=>{a.$$.dirty&16&&t(1,r=[...Object.entries(o)].map(([i,f])=>({label:i,value:i,type:f})))},[n,r,l,s,o,u]}class Ot extends De{constructor(e){super(),Ve(this,e,Ft,Ut,_e,{attributesToAdd:0})}}function Bt(a){let e,t,r,o,n,l,s;return t=new gt({props:{name:"upload"}}),{c(){e=F("label"),k(t.$$.fragment),r=V(),o=F("input"),this.h()},l(u){e=O(u,"LABEL",{for:!0,class:!0});var i=L(e);A(t.$$.fragment,i),i.forEach(b),r=E(u),o=O(u,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),this.h()},h(){D(e,"for",a[0]),D(e,"class","file-upload-label svelte-nqh6y4"),D(o,"id",a[0]),D(o,"class","hidden"),D(o,"type","file"),D(o,"accept",a[1])},m(u,i){C(u,e,i),I(t,e,null),C(u,r,i),C(u,o,i),n=!0,l||(s=ct(o,"change",a[2]),l=!0)},p(u,[i]){(!n||i&1)&&D(e,"for",u[0]),(!n||i&1)&&D(o,"id",u[0]),(!n||i&2)&&D(o,"accept",u[1])},i(u){n||(m(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(b(e),b(r),b(o)),T(t),l=!1,s()}}}function Lt(a,e,t){let{id:r}=e,{accept:o=".json"}=e,{onUpload:n}=e;const l=async s=>{var u;const i=s.target,f=(u=i==null?void 0:i.files)===null||u===void 0?void 0:u[0],g=new FileReader;f&&(g.readAsText(f),g.onload=()=>{var v,S;try{const B=(S=(v=g==null?void 0:g.result)===null||v===void 0?void 0:v.toString())!==null&&S!==void 0?S:"";n(B)}catch{$t.push({variant:"error",message:ge("common.upload-error")})}})};return a.$$set=s=>{"id"in s&&t(0,r=s.id),"accept"in s&&t(1,o=s.accept),"onUpload"in s&&t(3,n=s.onUpload)},[r,o,l,n]}class yt extends De{constructor(e){super(),Ve(this,e,Lt,Bt,_e,{id:0,accept:1,onUpload:3})}}function Ht(a){let e=ge("workflows.back-to-workflows")+"",t;return{c(){t=K(e)},l(r){t=G(r,e)},m(r,o){C(r,t,o)},p:We,d(r){r&&b(t)}}}function Mt(a){let e;return{c(){e=K("Random UUID")},l(t){e=G(t,"Random UUID")},m(t,r){C(t,e,r)},d(t){t&&b(e)}}}function Je(a){let e,t;return e=new nt({props:{intent:a[7]>0?"success":"warning",title:a[7]?"Task Queue is Active":"Task Queue is Inactive",$$slots:{default:[zt]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,o){I(e,r,o),t=!0},p(r,o){const n={};o[0]&128&&(n.intent=r[7]>0?"success":"warning"),o[0]&128&&(n.title=r[7]?"Task Queue is Active":"Task Queue is Inactive"),o[0]&2178|o[1]&4&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function Nt(a){let e;return{c(){e=K("View Task Queue")},l(t){e=G(t,"View Task Queue")},m(t,r){C(t,e,r)},d(t){t&&b(e)}}}function zt(a){let e,t,r,o,n=ye("Worker",a[7])+"",l,s,u,i;return u=new st({props:{href:Be({namespace:a[11],queue:a[1]}),newTab:!0,$$slots:{default:[Nt]},$$scope:{ctx:a}}}),{c(){e=F("div"),t=F("p"),r=K(a[7]),o=V(),l=K(n),s=V(),k(u.$$.fragment),this.h()},l(f){e=O(f,"DIV",{class:!0});var g=L(e);t=O(g,"P",{});var v=L(t);r=G(v,a[7]),o=E(v),l=G(v,n),v.forEach(b),s=E(g),A(u.$$.fragment,g),g.forEach(b),this.h()},h(){D(e,"class","flex w-full items-center justify-between")},m(f,g){C(f,e,g),w(e,t),w(t,r),w(t,o),w(t,l),w(e,s),I(u,e,null),i=!0},p(f,g){(!i||g[0]&128)&&Ce(r,f[7]),(!i||g[0]&128)&&n!==(n=ye("Worker",f[7])+"")&&Ce(l,n);const v={};g[0]&2050&&(v.href=Be({namespace:f[11],queue:f[1]})),g[1]&4&&(v.$$scope={dirty:g,ctx:f}),u.$set(v)},i(f){i||(m(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&b(e),T(u)}}}function Xe(a){let e,t,r,o,n;return t=new ot({props:{class:"text-subtle",for:"workflow-example-input",label:ge("workflows.example-input")}}),o=new at({props:{id:"workflow-initial-input",minHeight:120,content:a[5],copyable:!0}}),{c(){e=F("div"),k(t.$$.fragment),r=V(),k(o.$$.fragment),this.h()},l(l){e=O(l,"DIV",{class:!0});var s=L(e);A(t.$$.fragment,s),r=E(s),A(o.$$.fragment,s),s.forEach(b),this.h()},h(){D(e,"class","flex w-full flex-col gap-2 md:w-1/2")},m(l,s){C(l,e,s),I(t,e,null),w(e,r),I(o,e,null),n=!0},p(l,s){const u={};s[0]&32&&(u.content=l[5]),o.$set(u)},i(l){n||(m(t.$$.fragment,l),m(o.$$.fragment,l),n=!0)},o(l){d(t.$$.fragment,l),d(o.$$.fragment,l),n=!1},d(l){l&&b(e),T(t),T(o)}}}function Ye(a){let e,t;return e=new at({props:{id:"workflow-input",minHeight:120,content:a[3],editable:!0,copyable:!1}}),e.$on("change",a[13]),{c(){k(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,o){I(e,r,o),t=!0},p(r,o){const n={};o[0]&8&&(n.content=r[3]),e.$set(n)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function Ze(a){let e,t,r;function o(l){a[26](l)}let n={};return a[9]!==void 0&&(n.attributesToAdd=a[9]),e=new Ot({props:n}),te.push(()=>le(e,"attributesToAdd",o)),{c(){k(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,s){I(e,l,s),r=!0},p(l,s){const u={};!t&&s[0]&512&&(t=!0,u.attributesToAdd=l[9],re(()=>t=!1)),e.$set(u)},i(l){r||(m(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){T(e,l)}}}function Kt(a){let e=ge("common.more-options")+"",t;return{c(){t=K(e)},l(r){t=G(r,e)},m(r,o){C(r,t,o)},p:We,d(r){r&&b(t)}}}function Gt(a){let e=ge("workflows.start-workflow")+"",t;return{c(){t=K(e)},l(r){t=G(r,e)},m(r,o){C(r,t,o)},p:We,d(r){r&&b(t)}}}function xe(a){let e,t;return e=new nt({props:{intent:"error",title:a[6]}}),{c(){k(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,o){I(e,r,o),t=!0},p(r,o){const n={};o[0]&64&&(n.title=r[6]),e.$set(n)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){T(e,r)}}}function Jt(a){let e,t,r,o,n,l,s="Start a Workflow",u,i,f,g,v,S,B,$,p,y,J,Y,R,$e,be,z,ce,M,H,Z,he,x,we,Ee=a[4],pe,ve,me,X,_,ee,U,ke,ne;r=new st({props:{href:`${Qe({namespace:a[11]})}?${a[12]}`,"data-testid":"back-to-workflows",icon:"chevron-left",$$slots:{default:[Ht]},$$scope:{ctx:a}}});function qe(c){a[20](c)}let Ue={id:"workflowId",required:!0,label:"Workflow ID",class:"w-full grow"};a[0]!==void 0&&(Ue.value=a[0]),f=new Se({props:Ue}),te.push(()=>le(f,"value",qe)),f.$on("blur",a[21]),S=new Te({props:{class:"mt-0 md:mt-6",variant:"secondary",leadingIcon:"retry",$$slots:{default:[Mt]},$$scope:{ctx:a}}}),S.$on("click",a[15]);function ut(c){a[22](c)}let Fe={id:"taskQueue",required:!0,label:"Task Queue",class:"grow"};a[1]!==void 0&&(Fe.value=a[1]),p=new Se({props:Fe}),te.push(()=>le(p,"value",ut)),p.$on("blur",a[23]);let Q=a[7]!==void 0&&Je(a);function it(c){a[24](c)}let Oe={id:"workflowType",required:!0,label:"Workflow Type"};a[2]!==void 0&&(Oe.value=a[2]),R=new Se({props:Oe}),te.push(()=>le(R,"value",it)),R.$on("blur",a[25]);let j=a[5]&&Xe(a);Z=new ot({props:{for:"workflow-input",label:ge("workflows.input")}}),x=new yt({props:{id:"start-workflow-input-file-upload",onUpload:a[17]}});let N=Ye(a),W=a[8]&&Ze(a);_=new Te({props:{variant:"ghost",trailingIcon:a[8]?"chevron-up":"chevron-down",$$slots:{default:[Kt]},$$scope:{ctx:a}}}),_.$on("click",a[27]),U=new Te({props:{disabled:!a[10],"data-testid":"start-workflow-button",$$slots:{default:[Gt]},$$scope:{ctx:a}}}),U.$on("click",a[14]);let q=a[6]&&xe(a);return{c(){e=F("div"),t=F("div"),k(r.$$.fragment),o=V(),n=F("div"),l=F("h1"),l.textContent=s,u=V(),i=F("div"),k(f.$$.fragment),v=V(),k(S.$$.fragment),B=V(),$=F("div"),k(p.$$.fragment),J=V(),Q&&Q.c(),Y=V(),k(R.$$.fragment),be=V(),z=F("div"),j&&j.c(),ce=V(),M=F("div"),H=F("div"),k(Z.$$.fragment),he=V(),k(x.$$.fragment),we=V(),N.c(),ve=V(),W&&W.c(),me=V(),X=F("div"),k(_.$$.fragment),ee=V(),k(U.$$.fragment),ke=V(),q&&q.c(),this.h()},l(c){e=O(c,"DIV",{class:!0});var h=L(e);t=O(h,"DIV",{class:!0});var de=L(t);A(r.$$.fragment,de),de.forEach(b),o=E(h),n=O(h,"DIV",{class:!0});var P=L(n);l=O(P,"H1",{class:!0,"data-testid":!0,"data-svelte-h":!0}),pt(l)!=="svelte-kdp92k"&&(l.textContent=s),u=E(P),i=O(P,"DIV",{class:!0});var ie=L(i);A(f.$$.fragment,ie),v=E(ie),A(S.$$.fragment,ie),ie.forEach(b),B=E(P),$=O(P,"DIV",{class:!0});var Ae=L($);A(p.$$.fragment,Ae),Ae.forEach(b),J=E(P),Q&&Q.l(P),Y=E(P),A(R.$$.fragment,P),be=E(P),z=O(P,"DIV",{class:!0});var fe=L(z);j&&j.l(fe),ce=E(fe),M=O(fe,"DIV",{class:!0});var ae=L(M);H=O(ae,"DIV",{class:!0});var oe=L(H);A(Z.$$.fragment,oe),he=E(oe),A(x.$$.fragment,oe),oe.forEach(b),we=E(ae),N.l(ae),ae.forEach(b),fe.forEach(b),ve=E(P),W&&W.l(P),me=E(P),X=O(P,"DIV",{class:!0});var Pe=L(X);A(_.$$.fragment,Pe),ee=E(Pe),A(U.$$.fragment,Pe),Pe.forEach(b),ke=E(P),q&&q.l(P),P.forEach(b),h.forEach(b),this.h()},h(){D(t,"class","mb-6 flex w-full items-start"),D(l,"class","mb-4 overflow-hidden text-base font-medium lg:text-2xl"),D(l,"data-testid","start-workflow"),D(i,"class","flex w-full flex-col items-center justify-between gap-2 md:flex-row md:gap-4"),D($,"class","flex w-full items-center justify-between gap-4"),D(H,"class","flex w-full items-end justify-between"),D(M,"class",pe="flex w-full flex-col gap-2 "+(a[5]&&"md:w-1/2")),D(z,"class","flex w-full flex-col items-end justify-between gap-4 md:flex-row"),D(X,"class","mt-4 flex w-full justify-between"),D(n,"class","flex w-full flex-col gap-4 lg:w-2/3 2xl:w-1/2"),D(e,"class","flex w-full flex-col items-center pb-24")},m(c,h){C(c,e,h),w(e,t),I(r,t,null),w(e,o),w(e,n),w(n,l),w(n,u),w(n,i),I(f,i,null),w(i,v),I(S,i,null),w(n,B),w(n,$),I(p,$,null),w(n,J),Q&&Q.m(n,null),w(n,Y),I(R,n,null),w(n,be),w(n,z),j&&j.m(z,null),w(z,ce),w(z,M),w(M,H),I(Z,H,null),w(H,he),I(x,H,null),w(M,we),N.m(M,null),w(n,ve),W&&W.m(n,null),w(n,me),w(n,X),I(_,X,null),w(X,ee),I(U,X,null),w(n,ke),q&&q.m(n,null),ne=!0},p(c,h){const de={};h[0]&6144&&(de.href=`${Qe({namespace:c[11]})}?${c[12]}`),h[1]&4&&(de.$$scope={dirty:h,ctx:c}),r.$set(de);const P={};!g&&h[0]&1&&(g=!0,P.value=c[0],re(()=>g=!1)),f.$set(P);const ie={};h[1]&4&&(ie.$$scope={dirty:h,ctx:c}),S.$set(ie);const Ae={};!y&&h[0]&2&&(y=!0,Ae.value=c[1],re(()=>y=!1)),p.$set(Ae),c[7]!==void 0?Q?(Q.p(c,h),h[0]&128&&m(Q,1)):(Q=Je(c),Q.c(),m(Q,1),Q.m(n,Y)):Q&&(se(),d(Q,1,1,()=>{Q=null}),ue());const fe={};!$e&&h[0]&4&&($e=!0,fe.value=c[2],re(()=>$e=!1)),R.$set(fe),c[5]?j?(j.p(c,h),h[0]&32&&m(j,1)):(j=Xe(c),j.c(),m(j,1),j.m(z,ce)):j&&(se(),d(j,1,1,()=>{j=null}),ue()),h[0]&16&&_e(Ee,Ee=c[4])?(se(),d(N,1,1,We),ue(),N=Ye(c),N.c(),m(N,1),N.m(M,null)):N.p(c,h),(!ne||h[0]&32&&pe!==(pe="flex w-full flex-col gap-2 "+(c[5]&&"md:w-1/2")))&&D(M,"class",pe),c[8]?W?(W.p(c,h),h[0]&256&&m(W,1)):(W=Ze(c),W.c(),m(W,1),W.m(n,me)):W&&(se(),d(W,1,1,()=>{W=null}),ue());const ae={};h[0]&256&&(ae.trailingIcon=c[8]?"chevron-up":"chevron-down"),h[1]&4&&(ae.$$scope={dirty:h,ctx:c}),_.$set(ae);const oe={};h[0]&1024&&(oe.disabled=!c[10]),h[1]&4&&(oe.$$scope={dirty:h,ctx:c}),U.$set(oe),c[6]?q?(q.p(c,h),h[0]&64&&m(q,1)):(q=xe(c),q.c(),m(q,1),q.m(n,null)):q&&(se(),d(q,1,1,()=>{q=null}),ue())},i(c){ne||(m(r.$$.fragment,c),m(f.$$.fragment,c),m(S.$$.fragment,c),m(p.$$.fragment,c),m(Q),m(R.$$.fragment,c),m(j),m(Z.$$.fragment,c),m(x.$$.fragment,c),m(N),m(W),m(_.$$.fragment,c),m(U.$$.fragment,c),m(q),ne=!0)},o(c){d(r.$$.fragment,c),d(f.$$.fragment,c),d(S.$$.fragment,c),d(p.$$.fragment,c),d(Q),d(R.$$.fragment,c),d(j),d(Z.$$.fragment,c),d(x.$$.fragment,c),d(N),d(W),d(_.$$.fragment,c),d(U.$$.fragment,c),d(q),ne=!1},d(c){c&&b(e),T(r),T(f),T(S),T(p),Q&&Q.d(),T(R),j&&j.d(),T(Z),T(x),N.d(c),W&&W.d(),T(_),T(U),q&&q.d()}}}function Xt(a,e,t){let r,o,n,l,s,u;Ie(a,tt,_=>t(19,l=_)),Ie(a,rt,_=>t(30,s=_)),Ie(a,wt,_=>t(12,u=_));let i="",f="",g="",v="",S=0,B="",$="",p="",y="",J,Y=!1,R=[];mt(()=>{t(0,i=l.url.searchParams.get("workflowId")||""),t(1,f=l.url.searchParams.get("taskQueue")||""),t(2,g=l.url.searchParams.get("workflowType")||""),B=l.url.searchParams.get("workflowId")||"",$=l.url.searchParams.get("workflowType")||"",(B||$)&&M(B,$)});const $e=_=>{t(3,v=_.detail)},be=async()=>{try{t(6,y=""),await kt({namespace:r,workflowId:i,taskQueue:f,workflowType:g,input:v,searchAttributes:R}),_t(Qe({namespace:r}))}catch(_){t(6,y=(_==null?void 0:_.message)||"Error start Workflow")}},z=()=>{t(0,i=bt()),He({parameter:"workflowId",value:i,url:l.url,allowEmpty:!0})},ce=async _=>{if(_){const{pollers:ee}=await ht({namespace:r,queue:_});t(7,J=ee.length)}},M=async(_,ee)=>{const U=await vt({namespace:r,workflowId:_,workflowType:ee});if(t(5,p=U.input),t(3,v=p),t(4,S=Date.now()),U!=null&&U.searchAttributes){const ke=Object.keys(s);Object.entries(U.searchAttributes).forEach(([ne,qe])=>{ke.includes(ne)&&t(9,R=[...R,{attribute:ne,value:String(qe)}])}),t(8,Y=!0)}},H=(_,ee)=>{const U=_.target.value;He({parameter:ee,value:U,url:l.url,allowEmpty:!0})},Z=_=>{t(3,v=_),t(4,S=Date.now())};function he(_){i=_,t(0,i)}const x=_=>H(_,"workflowId");function we(_){f=_,t(1,f)}const Ee=_=>H(_,"taskQueue");function pe(_){g=_,t(2,g)}const ve=_=>H(_,"workflowType");function me(_){R=_,t(9,R)}const X=()=>t(8,Y=!Y);return a.$$.update=()=>{a.$$.dirty[0]&524288&&t(11,{namespace:r}=l.params,r),a.$$.dirty[0]&524288&&t(18,o=l.url.searchParams.get("taskQueue")),a.$$.dirty[0]&524295&&t(10,n=!!i&&!!f&&!!g&&!At(l)),a.$$.dirty[0]&262144&&ce(o)},[i,f,g,v,S,p,y,J,Y,R,n,r,u,$e,be,z,H,Z,o,l,he,x,we,Ee,pe,ve,me,X]}class Yt extends De{constructor(e){super(),Ve(this,e,Xt,Jt,_e,{},null,[-1,-1])}}function Zt(a){let e,t,r,o;return e=new dt({props:{title:"Start Workflow",url:a[0].url.href}}),r=new Yt({}),{c(){k(e.$$.fragment),t=V(),k(r.$$.fragment)},l(n){A(e.$$.fragment,n),t=E(n),A(r.$$.fragment,n)},m(n,l){I(e,n,l),C(n,t,l),I(r,n,l),o=!0},p(n,[l]){const s={};l&1&&(s.url=n[0].url.href),e.$set(s)},i(n){o||(m(e.$$.fragment,n),m(r.$$.fragment,n),o=!0)},o(n){d(e.$$.fragment,n),d(r.$$.fragment,n),o=!1},d(n){n&&b(t),T(e,n),T(r,n)}}}function xt(a,e,t){let r;return Ie(a,tt,o=>t(0,r=o)),[r]}class Tr extends De{constructor(e){super(),Ve(this,e,xt,Zt,_e,{})}}export{Tr as component,Ir as universal};
