import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as Ot,f as P,t as w,e as l,b as At,j as r,r as a,h as s,g as t,v as d,c as N,i as xt,n as C,k as D,o as Ct}from"../chunks/DZ1-1a5q.js";import{i as Dt}from"../chunks/Bby3K3wO.js";import{s as Ht,a as $t}from"../chunks/TaaIktnz.js";import{p as Jt}from"../chunks/P-60DauF.js";import{P as Kt}from"../chunks/BvHFjIFb.js";import{t as _}from"../chunks/DEjs8ZrU.js";import{s as o}from"../chunks/DxwvfIkW.js";import{i as H}from"../chunks/DnKg3jxh.js";import{e as gt,i as Et}from"../chunks/DGhzC9On.js";import{p as Mt}from"../chunks/DE54uinE.js";import{L as J}from"../chunks/DIRNUFUF.js";import{T as bt,a as Pt,b as It}from"../chunks/D4J3bl6a.js";import{g as Qt}from"../chunks/QlZFm-Do.js";import{g as Ut,a as Vt}from"../chunks/D7bqTTHz.js";import{f as Xt}from"../chunks/JlE54h4V.js";import{w as Yt}from"../chunks/D3HmRl1U.js";import{g as yt}from"../chunks/MQ2DlZDz.js";import{k as Zt}from"../chunks/B1tVkkGY.js";import{c as Rt,d as Tt,a as Lt}from"../chunks/DCDVNMgg.js";import{f as te}from"../chunks/DNNVWk-J.js";var ee=P("<p> </p>"),re=P('<td class="break-all text-left" data-testid="caller-event"><!></td> <td class="break-all text-left" data-testid="link-event"><!></td> <td class="break-all text-left" data-testid="link-namespace"><!></td> <td class="break-all text-left" data-testid="handler-event"><!></td>',1),ae=P('<caption class="sr-only" slot="caption"> </caption>'),oe=P('<th class="w-24"> </th> <th> </th> <th> </th> <th> </th>',1),se=P("<h3>Inbound</h3> <!>",1),ne=P(" <!>",1),le=P('<td class="break-all text-left" data-testid="link-event"><!></td> <td class="break-all text-left" data-testid="link-endpoint"> </td> <td class="break-all text-left" data-testid="link-service"> </td> <td class="break-all text-left" data-testid="link-operation"> </td> <td class="break-all text-left" data-testid="link-namespace"><!></td> <td class="break-all text-left" data-testid="link-href"><!></td> <td class="break-all text-left" data-testid="link-href"><!></td>',1),de=P('<caption class="sr-only" slot="caption"> </caption>'),ve=P('<th class="w-28"> </th> <th> </th> <th> </th> <th> </th> <th> </th> <th> </th> <th> </th>',1),ie=P("<h3>Outbound</h3> <!>",1),fe=P('<section class="flex flex-col gap-4"><h2 data-testid="nexus-links-title"> </h2> <!> <!> <!></section>');function ue(it,ft){Ot(ft,!0);const rt=()=>$t(Yt,"$workflowRun",ot),at=()=>$t(Xt,"$fullEventHistory",ot),[ot,ut]=Ht(),Q=d(()=>Mt.params),V=d(()=>t(Q).namespace),st=d(()=>t(Q).workflow),nt=d(()=>t(Q).run),U=d(()=>rt().workflow),Nt=d(()=>t(U)===null||t(U)===void 0?void 0:t(U).pendingActivities),St=d(()=>t(U)===null||t(U)===void 0?void 0:t(U).pendingNexusOperations),Ft=d(()=>Qt(at(),"ascending",t(Nt),t(St))),pt=d(()=>t(Ft).filter(p=>{var v;return p.category==="nexus"&&((v=p.links)===null||v===void 0?void 0:v.length)})),ct=d(()=>Ut(at()));var wt=fe(),_t=r(wt),qt=r(_t,!0);a(_t);var ht=s(_t,2);{var jt=p=>{var v=ee(),X=r(v,!0);a(v),w(m=>o(X,m),[()=>_("nexus.links-empty-state")]),l(p,v)};H(ht,p=>{var v;!((v=t(ct))!=null&&v.length)&&!t(pt).length&&p(jt)})}var mt=s(ht,2);{var Gt=p=>{var v=se(),X=s(N(v),2);bt(X,{class:"mb-6 w-full min-w-[600px]",fixed:!0,children:(m,Y)=>{var f=xt(),S=N(f);gt(S,17,()=>t(ct),Et,(k,$)=>{const e=d(()=>Vt(t($)));It(k,{"data-testid":"worker-row",children:(h,I)=>{var y=re(),O=N(y),E=r(O);{var K=u=>{{let n=d(()=>yt(t(e)));J(u,{get href(){return t(n)},children:(A,q)=>{C();var g=D();w(()=>{var lt,dt;return o(g,(dt=(lt=t(e).workflowEvent)==null?void 0:lt.eventRef)==null?void 0:dt.eventId)}),l(A,g)},$$slots:{default:!0}})}};H(E,u=>{var n;(n=t(e))!=null&&n.workflowEvent&&u(K)})}a(O);var x=s(O,2),M=r(x);{var R=u=>{{let n=d(()=>Tt({namespace:t(e).workflowEvent.namespace,workflow:t(e).workflowEvent.workflowId,run:t(e).workflowEvent.runId}));J(u,{get href(){return t(n)},children:(A,q)=>{C();var g=D();w(()=>o(g,t(e).workflowEvent.workflowId)),l(A,g)},$$slots:{default:!0}})}};H(M,u=>{var n;(n=t(e))!=null&&n.workflowEvent&&u(R)})}a(x);var F=s(x,2),j=r(F);{var Z=u=>{{let n=d(()=>Lt({namespace:t(e).workflowEvent.namespace}));J(u,{get href(){return t(n)},children:(A,q)=>{C();var g=D();w(()=>o(g,t(e).workflowEvent.namespace)),l(A,g)},$$slots:{default:!0}})}};H(j,u=>{var n;(n=t(e))!=null&&n.workflowEvent&&u(Z)})}a(F);var G=s(F,2),tt=r(G);{let u=d(()=>Rt({namespace:t(V),workflow:t(st),run:t(nt),eventId:t($).id}));J(tt,{get href(){return t(u)},children:(n,A)=>{C();var q=D();w(()=>o(q,`${t($).name??""}
              (${t($).id??""})`)),l(n,q)},$$slots:{default:!0}})}a(G),l(h,y)},$$slots:{default:!0}})}),l(m,f)},$$slots:{default:!0,caption:(m,Y)=>{var f=ae(),S=r(f,!0);a(f),w(k=>o(S,k),[()=>_("workflows.workers-tab")]),l(m,f)},headers:(m,Y)=>{Pt(m,{slot:"headers",children:(f,S)=>{var k=oe(),$=N(k),e=r($,!0);a($);var h=s($,2),I=r(h,!0);a(h);var y=s(h,2),O=r(y,!0);a(y);var E=s(y,2),K=r(E,!0);a(E),w((x,M,R,F)=>{o(e,x),o(I,M),o(O,R),o(K,F)},[()=>_("nexus.caller-event"),()=>_("nexus.caller-workflow"),()=>_("nexus.caller-namespace"),()=>_("nexus.handler-event")]),l(f,k)},$$slots:{default:!0}})}}}),l(p,v)};H(mt,p=>{var v;(v=t(ct))!=null&&v.length&&p(Gt)})}var Wt=s(mt,2);{var zt=p=>{var v=ie(),X=s(N(v),2);bt(X,{class:"mb-6 w-full min-w-[600px]",fixed:!0,children:(m,Y)=>{var f=xt(),S=N(f);gt(S,17,()=>t(pt),Et,(k,$)=>{const e=d(()=>{var I;return(I=t($).links)==null?void 0:I[0]}),h=d(()=>t($).eventList.find(I=>Zt(I)));It(k,{"data-testid":"worker-row",children:(I,y)=>{var O=le(),E=N(O),K=r(E);{let c=d(()=>Rt({namespace:t(V),workflow:t(st),run:t(nt),eventId:t(h).id}));J(K,{get href(){return t(c)},children:(i,b)=>{C();var T=D();w(()=>o(T,t(h).id)),l(i,T)},$$slots:{default:!0}})}a(E);var x=s(E,2),M=r(x,!0);a(x);var R=s(x,2),F=r(R,!0);a(R);var j=s(R,2),Z=r(j,!0);a(j);var G=s(j,2),tt=r(G);{var u=c=>{{let i=d(()=>{var b,T;return Lt({namespace:(T=(b=t(e))==null?void 0:b.workflowEvent)==null?void 0:T.namespace})});J(c,{get href(){return t(i)},children:(b,T)=>{C();var L=D();w(()=>{var W,vt;return o(L,(vt=(W=t(e))==null?void 0:W.workflowEvent)==null?void 0:vt.namespace)}),l(b,L)},$$slots:{default:!0}})}};H(tt,c=>{var i;(i=t(e))!=null&&i.workflowEvent&&c(u)})}a(G);var n=s(G,2),A=r(n);{var q=c=>{{let i=d(()=>Tt({namespace:t(e).workflowEvent.namespace,workflow:t(e).workflowEvent.workflowId,run:t(e).workflowEvent.runId}));J(c,{get href(){return t(i)},children:(b,T)=>{C();var L=D();w(()=>o(L,t(e).workflowEvent.workflowId)),l(b,L)},$$slots:{default:!0}})}};H(A,c=>{var i;(i=t(e))!=null&&i.workflowEvent&&c(q)})}a(n);var g=s(n,2),lt=r(g);{var dt=c=>{{let i=d(()=>yt(t(e)));J(c,{get href(){return t(i)},children:(b,T)=>{C();var L=ne(),W=N(L),vt=s(W);{var Bt=z=>{var B=D();w(()=>o(B,`(${t(e).workflowEvent.eventRef.eventId??""})`)),l(z,B)};H(vt,z=>{var B,et;(et=(B=t(e).workflowEvent)==null?void 0:B.eventRef)!=null&&et.eventId&&z(Bt)})}w(z=>o(W,`${z??""} `),[()=>{var z,B,et,kt;return te(((B=(z=t(e).workflowEvent)==null?void 0:z.eventRef)==null?void 0:B.eventType)||((kt=(et=t(e).workflowEvent)==null?void 0:et.requestIdRef)==null?void 0:kt.eventType),"EventType")}]),l(b,L)},$$slots:{default:!0}})}};H(lt,c=>{var i;(i=t(e))!=null&&i.workflowEvent&&c(dt)})}a(g),w(()=>{var c,i,b,T,L,W;o(M,(i=(c=t(h))==null?void 0:c.nexusOperationScheduledEventAttributes)==null?void 0:i.endpoint),o(F,(T=(b=t(h))==null?void 0:b.nexusOperationScheduledEventAttributes)==null?void 0:T.service),o(Z,(W=(L=t(h))==null?void 0:L.nexusOperationScheduledEventAttributes)==null?void 0:W.operation)}),l(I,O)},$$slots:{default:!0}})}),l(m,f)},$$slots:{default:!0,caption:(m,Y)=>{var f=de(),S=r(f,!0);a(f),w(k=>o(S,k),[()=>_("workflows.workers-tab")]),l(m,f)},headers:(m,Y)=>{Pt(m,{slot:"headers",children:(f,S)=>{var k=ve(),$=N(k),e=r($,!0);a($);var h=s($,2),I=r(h,!0);a(h);var y=s(h,2),O=r(y,!0);a(y);var E=s(y,2),K=r(E,!0);a(E);var x=s(E,2),M=r(x,!0);a(x);var R=s(x,2),F=r(R,!0);a(R);var j=s(R,2),Z=r(j,!0);a(j),w((G,tt,u,n,A,q,g)=>{o(e,G),o(I,tt),o(O,u),o(K,n),o(M,A),o(F,q),o(Z,g)},[()=>_("nexus.source-event"),()=>_("nexus.nexus-endpoint-simple"),()=>_("nexus.nexus-service"),()=>_("nexus.nexus-operation"),()=>_("nexus.handler-namespace"),()=>_("nexus.handler-workflow"),()=>_("nexus.handler-event")]),l(f,k)},$$slots:{default:!0}})}}}),l(p,v)};H(Wt,p=>{t(pt).length&&p(zt)})}a(wt),w(p=>o(qt,p),[()=>_("workflows.nexus-links-tab")]),l(it,wt),At(),ut()}var pe=P("<!> <!>",1);function Fe(it,ft){Ot(ft,!1);const rt=()=>$t(Jt,"$page",at),[at,ot]=Ht(),ut=rt().params.workflow;Dt();var Q=pe(),V=N(Q);{let nt=Ct(()=>`${_("workflows.nexus-links-tab")} | ${ut}`);Kt(V,{get title(){return t(nt)},get url(){return rt().url.href}})}var st=s(V,2);ue(st,{}),l(it,Q),At(),ot()}export{Fe as component};
