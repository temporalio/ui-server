import"../chunks/Bzak7iHL.js";import{p as L,ag as ae,aH as oe,h as ne,f as U,g as t,e as p,b as z,s as G,u as v,t as N,i as a,r as s,j as Q,c as i,d as ie,n as B,k as E,ae as le}from"../chunks/CeuSLZ0_.js";import{p as J,s as de,a as ce}from"../chunks/BqQLnCe4.js";import{p as ue}from"../chunks/DrfOI3OR.js";import{P as ve}from"../chunks/ROT02nYq.js";import{s as b}from"../chunks/BWPCX_-J.js";import{i as M}from"../chunks/CRQEv5x5.js";import{A as pe}from"../chunks/DcDJ5ze9.js";import{g as fe}from"../chunks/D8Da5phQ.js";import{p as me}from"../chunks/756y7qLl.js";import{t as A}from"../chunks/BXv1jDVW.js";import{e as ge,i as _e}from"../chunks/BDegIHXr.js";import{B as xe}from"../chunks/DtcLjaX3.js";import{C as ke}from"../chunks/BQcL9GMP.js";import{L as D}from"../chunks/CfURwROQ.js";import{P as he}from"../chunks/CB8kzcf1.js";import{k as we,o as be,a as K,i as Qe}from"../chunks/BcGVblhi.js";var Pe=N('<div class="flex w-full items-center justify-between"><p> </p></div>');function ye(T,e){L(e,!0);let d=ae(void 0);const $=async r=>{var c,u,k,h,m,g;const y=(k=(u=(c=r==null?void 0:r.spec)===null||c===void 0?void 0:c.target)===null||u===void 0?void 0:u.worker)===null||k===void 0?void 0:k.namespace,w=(g=(m=(h=r==null?void 0:r.spec)===null||h===void 0?void 0:h.target)===null||m===void 0?void 0:m.worker)===null||g===void 0?void 0:g.taskQueue;if(y&&w)try{const{pollers:C}=await fe({namespace:y,queue:w});G(d,C.length,!0)}catch{G(d,void 0)}};oe(()=>{$(e.endpoint)});var f=ne(),x=U(f);{var P=r=>{const c=v(()=>t(d)>0?"success":"warning"),u=v(()=>t(d)?"Task Queue is Active":"Task Queue is Inactive");pe(r,{get intent(){return t(c)},get title(){return t(u)},children:(k,h)=>{var m=Pe(),g=a(m),y=a(g);s(g),s(m),Q(w=>b(y,`${t(d)??""}
        ${w??""}`),[()=>me("Worker",t(d))]),p(k,m)},$$slots:{default:!0}})};M(x,r=>{t(d)!==void 0&&r(P)})}p(T,f),z()}var Ne=N("<i> </i>"),Te=N("<i> </i>"),$e=N('<h2>Allowed Caller Namespaces</h2> <div class="flex flex-wrap items-center gap-4"></div>',1),Ce=N('<div class="flex flex-col gap-8"><div class="relative flex flex-col gap-4 text-sm"><!></div> <div class="flex flex-col gap-1"><div class="flex items-center justify-between"><h1 data-testid="namespace-selector-title"> </h1> <!></div> <p> </p></div> <div class="surface-primary max-w-fit border border-secondary p-4"><p class="text-lg">Target</p> <div class="flex flex-col gap-4 lg:flex-row"><div class="flex items-center gap-2"><span class="font-medium">Namespace</span> <!></div> <div class="flex items-center gap-2"><span class="font-medium">Task Queue</span> <!></div> <!></div></div> <div class="w-full xl:w-1/2"><h2>Description</h2> <!></div> <!></div>');function Se(T,e){L(e,!0);let d=J(e,"editDisabled",3,!1),$=J(e,"backHref",19,we);var f=Ce(),x=a(f),P=a(x);D(P,{get href(){return $()},icon:"chevron-left",children:(o,_)=>{B();var n=E();Q(l=>b(n,l),[()=>A("nexus.back-to-endpoints")]),p(o,n)},$$slots:{default:!0}}),s(x);var r=i(x,2),c=a(r),u=a(c),k=a(u,!0);s(u);var h=i(u,2);const m=v(()=>be(e.endpoint.id));xe(h,{get href(){return t(m)},get disabled(){return d()},children:(o,_)=>{B();var n=E();Q(l=>b(n,l),[()=>A("common.edit")]),p(o,n)},$$slots:{default:!0}}),s(c);var g=i(c,2),y=a(g);s(g),s(r);var w=i(r,2),C=i(a(w),2),F=a(C),O=i(a(F),2);const R=v(()=>K({namespace:e.endpoint.spec.target.worker.namespace}));D(O,{get href(){return t(R)},children:(o,_)=>{var n=Ne(),l=a(n,!0);s(n),Q(()=>b(l,e.endpoint.spec.target.worker.namespace)),p(o,n)},$$slots:{default:!0}}),s(F);var I=i(F,2),V=i(a(I),2);const X=v(()=>A("common.copy-icon-title")),Y=v(()=>A("common.copy-success-icon-title"));ke(V,{get copyIconTitle(){return t(X)},get copySuccessIconTitle(){return t(Y)},get content(){return e.endpoint.spec.target.worker.taskQueue},children:(o,_)=>{const n=v(()=>Qe({namespace:e.endpoint.spec.target.worker.namespace,queue:e.endpoint.spec.target.worker.taskQueue}));D(o,{get href(){return t(n)},children:(l,q)=>{var S=Te(),H=a(S,!0);s(S),Q(()=>b(H,e.endpoint.spec.target.worker.taskQueue)),p(l,S)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(I);var Z=i(I,2);ie(Z,()=>e.taskQueueStatus??le),s(C),s(w);var j=i(w,2),ee=i(a(j),2);const te=v(()=>{var o;return((o=e.endpoint.spec)==null?void 0:o.descriptionString)||"No description provided"});he(ee,{get content(){return t(te)}}),s(j);var re=i(j,2);{var se=o=>{var _=$e(),n=i(U(_),2);ge(n,21,()=>{var l;return(l=e.endpoint.spec)==null?void 0:l.allowedCallerNamespaces},_e,(l,q)=>{const S=v(()=>K({namespace:t(q)}));D(l,{get href(){return t(S)},children:(H,De)=>{B();var W=E();Q(()=>b(W,t(q))),p(H,W)},$$slots:{default:!0}})}),s(n),p(o,_)};M(re,o=>{var _;(_=e.endpoint.spec)!=null&&_.allowedCallerNamespaces&&o(se)})}s(f),Q(()=>{b(k,e.endpoint.spec.name),b(y,`UUID: ${e.endpoint.id??""}`)}),p(T,f),z()}var Ae=N("<!> <!>",1);function Ve(T,e){L(e,!0);const[d,$]=de(),f=()=>ce(ue,"$page",d),x=v(()=>e.data.endpoint);var P=Ae(),r=U(P);const c=v(()=>A("nexus.nexus-endpoint",{id:f().params.id}));ve(r,{get title(){return t(c)},get url(){return f().url.href}});var u=i(r,2);Se(u,{get endpoint(){return t(x)},taskQueueStatus:h=>{ye(h,{get endpoint(){return t(x)}})},$$slots:{taskQueueStatus:!0}}),p(T,P),z(),$()}export{Ve as component};
