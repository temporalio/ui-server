import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as D,f as I,t as O,e as M,b as T,aM as Q,h as i,j as o,g as t,at as B,v as p,s as b,I as q,r as n,c as S,o as V}from"../chunks/BBjqMsu1.js";import{i as C}from"../chunks/DIZ-FoJG.js";import{p as v}from"../chunks/CAUIt2Hy.js";import{P as X}from"../chunks/BcjIxfWp.js";import{t as E}from"../chunks/DEjs8ZrU.js";import{s as F,a as P,e as Y}from"../chunks/D42yUzBQ.js";import{U as Z}from"../chunks/D9yCE-sy.js";import{o as ee}from"../chunks/r33Ll6et.js";import{e as re,s as te}from"../chunks/DHOm-mSm.js";import{i as ae}from"../chunks/DrCjka1e.js";import{k as se}from"../chunks/C9OGzM-W.js";import{T as oe}from"../chunks/5sHaeCkN.js";import{B as ne}from"../chunks/BFK-v_h8.js";import{I as ie}from"../chunks/CG6x3zff.js";import{P as le}from"../chunks/CHnmR_d3.js";import{a as de}from"../chunks/BKH-bcvM.js";import{a as fe}from"../chunks/DEsUSA2c.js";import{w as R}from"../chunks/y-jszXWn.js";var me=I('<div class="flex flex-1 flex-col border-l border-subtle"><div class="surface-information w-full px-6 py-2"><div class="flex items-center justify-between"><h3> </h3> <div class="flex flex-row items-center gap-2 lg:flex-col xl:flex-row"><p class="hidden sm:block">Press the <span class="mx-1 rounded bg-subtle px-1 text-sm font-medium leading-4">R</span> for freshness</p> <div class="flex items-center sm:hidden"><p>Press for freshness</p> <!></div> <!></div></div></div> <!></div>');function ce(f,m){D(m,!0);const r=()=>P(R,"$workflowRun",l),a=()=>P(fe,"$authUser",l),[l,s]=F();var d;const w=p(()=>v.params),K=p(()=>t(w).namespace),_=p(()=>r().workflow),U=p(()=>((d=r()===null||r()===void 0?void 0:r().metadata)===null||d===void 0?void 0:d.currentDetails)||"");let c=B(!1),$=B(null);const g=async()=>{var e;if(!(!t(_)||t(c))){b(c,!0);try{const{settings:u}=v.data,N=await de({namespace:t(K),workflow:{id:t(_).id,runId:t(_).runId}},u,(e=a()===null||a()===void 0?void 0:a().accessToken)!==null&&e!==void 0?e:"");Y(R,q(r).metadata=N,q(r)),b($,new Date,!0)}catch(u){console.error("Error fetching current details:",u)}finally{b(c,!1)}}};ee(()=>{g()});const z=e=>{(e.key==="r"||e.key==="R")&&(e.preventDefault(),g())};var h=me();re("keydown",Q,z);var k=o(h),W=o(k),x=o(W),A=o(x,!0);n(x);var j=i(x,2),y=i(o(j),2),G=i(o(y),2);ne(G,{variant:"ghost",get disabled(){return t(c)},$$events:{click:g},children:(e,u)=>{ie(e,{name:"retry"})},$$slots:{default:!0}}),n(y);var H=i(y,2);{var J=e=>{oe(e,{as:"p",class:"text-xs text-secondary",get dateTime(){return t($)}})};ae(H,e=>{t($)&&e(J)})}n(j),n(W),n(k);var L=i(k,2);se(L,()=>t(U),e=>{le(e,{class:"p-3",overrideTheme:"primary",get content(){return t(U)}})}),n(h),O(e=>te(A,e),[()=>E("workflows.current-details")]),M(f,h),T(),s()}var ue=I('<div class="flex flex-col bg-primary lg:flex-row"><!> <!></div>');function pe(f,m){D(m,!1);const r=()=>P(R,"$workflowRun",a),[a,l]=F();C();var s=ue(),d=o(s);Z(d,{get summary(){return r().userMetadata.summary},get details(){return r().userMetadata.details}});var w=i(d,2);ce(w,{}),n(s),M(f,s),T(),l()}var ve=I("<!> <!>",1);function Ce(f,m){D(m,!1),C();var r=ve(),a=S(r);{let s=V(()=>`${E("workflows.user-metadata-tab")} | ${v.params.workflow}`);X(a,{get title(){return t(s)},get url(){return v.url.href}})}var l=i(a,2);pe(l,{}),M(f,r),T()}export{Ce as component};
