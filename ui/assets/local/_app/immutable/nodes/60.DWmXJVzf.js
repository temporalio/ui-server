import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as D,f as T,t as O,e as U,b as I,aR as Q,g as t,ax as B,h as i,v as p,s as b,K,j as o,r as n,c as S,o as V}from"../chunks/DZ1-1a5q.js";import{i as q}from"../chunks/Bby3K3wO.js";import{p as v}from"../chunks/BIQ0wFxb.js";import{P as X}from"../chunks/BvHFjIFb.js";import{t as C}from"../chunks/DEjs8ZrU.js";import{s as E,a as R,e as Y}from"../chunks/TaaIktnz.js";import{U as Z}from"../chunks/Cg6eYij6.js";import{o as ee}from"../chunks/D7JzDj9r.js";import{e as re,s as te}from"../chunks/DxwvfIkW.js";import{i as ae}from"../chunks/DnKg3jxh.js";import{k as se}from"../chunks/DhxkE7tO.js";import{T as oe}from"../chunks/4Dr_hdgK.js";import{B as ne}from"../chunks/BW-jqHJe.js";import{I as ie}from"../chunks/BwERH40W.js";import{P as le}from"../chunks/CoWZ86-R.js";import{a as de}from"../chunks/TrprhvsL.js";import{a as fe}from"../chunks/urDygoU8.js";import{w as P}from"../chunks/D3HmRl1U.js";var me=T('<div class="flex flex-1 flex-col border-l border-subtle"><div class="surface-information w-full px-6 py-2"><div class="flex items-center justify-between"><h3> </h3> <div class="flex flex-row items-center gap-2 lg:flex-col xl:flex-row"><p class="hidden sm:block">Press the <span class="mx-1 rounded bg-subtle px-1 text-sm font-medium leading-4">R</span> for freshness</p> <div class="flex items-center sm:hidden"><p>Press for freshness</p> <!></div> <!></div></div></div> <!></div>');function ce(f,m){D(m,!0);const r=()=>R(P,"$workflowRun",l),a=()=>R(fe,"$authUser",l),[l,s]=E();var d;const w=p(()=>v.params),F=p(()=>t(w).namespace),_=p(()=>r().workflow),M=p(()=>((d=r()===null||r()===void 0?void 0:r().metadata)===null||d===void 0?void 0:d.currentDetails)||"");let c=B(!1),$=B(null);const g=async()=>{var e;if(!(!t(_)||t(c))){b(c,!0);try{const{settings:u}=v.data,N=await de({namespace:t(F),workflow:{id:t(_).id,runId:t(_).runId}},u,(e=a()===null||a()===void 0?void 0:a().accessToken)!==null&&e!==void 0?e:"");Y(P,K(r).metadata=N,K(r)),b($,new Date,!0)}catch(u){console.error("Error fetching current details:",u)}finally{b(c,!1)}}};ee(()=>{g()});const z=e=>{(e.key==="r"||e.key==="R")&&(e.preventDefault(),g())};var h=me();re("keydown",Q,z);var k=o(h),W=o(k),x=o(W),A=o(x,!0);n(x);var j=i(x,2),y=i(o(j),2),G=i(o(y),2);ne(G,{variant:"ghost",get disabled(){return t(c)},$$events:{click:g},children:(e,u)=>{ie(e,{name:"retry"})},$$slots:{default:!0}}),n(y);var H=i(y,2);{var J=e=>{oe(e,{as:"p",class:"text-xs text-secondary",get dateTime(){return t($)}})};ae(H,e=>{t($)&&e(J)})}n(j),n(W),n(k);var L=i(k,2);se(L,()=>t(M),e=>{le(e,{class:"p-3",overrideTheme:"primary",get content(){return t(M)}})}),n(h),O(e=>te(A,e),[()=>C("workflows.current-details")]),U(f,h),I(),s()}var ue=T('<div class="flex flex-col bg-primary lg:flex-row"><!> <!></div>');function pe(f,m){D(m,!1);const r=()=>R(P,"$workflowRun",a),[a,l]=E();q();var s=ue(),d=o(s);Z(d,{get summary(){return r().userMetadata.summary},get details(){return r().userMetadata.details}});var w=i(d,2);ce(w,{}),n(s),U(f,s),I(),l()}var ve=T("<!> <!>",1);function qe(f,m){D(m,!1),q();var r=ve(),a=S(r);{let s=V(()=>`${C("workflows.user-metadata-tab")} | ${v.params.workflow}`);X(a,{get title(){return t(s)},get url(){return v.url.href}})}var l=i(a,2);pe(l,{}),U(f,r),I()}export{qe as component};
