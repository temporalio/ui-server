import"../chunks/CWj6FrbW.js";import{p as w,f as C,e as x,b as j,j as A,g as n,v as i,r as I,c as y,k as z,t as E,h as b,n as R}from"../chunks/DZ1-1a5q.js";import{s as Z}from"../chunks/DxwvfIkW.js";import{p as r,s as $,a as B}from"../chunks/TaaIktnz.js";import{g as F}from"../chunks/BU6dkjX5.js";import{p as P}from"../chunks/D_t7VQAt.js";import{P as S}from"../chunks/BvHFjIFb.js";import{L as q}from"../chunks/f5RCgCKP.js";import{t as _}from"../chunks/DEjs8ZrU.js";import{N as D,g as G}from"../chunks/Ol9vUODv.js";import{c as J}from"../chunks/B1Bl3MCt.js";import{n as K}from"../chunks/DpYqgY9S.js";import{n as H}from"../chunks/CYMFusVh.js";var M=C('<div class="flex w-full flex-col gap-8"><!></div>');function O(p,t){w(t,!0);let d=r(t,"targetNamespaceList",19,()=>[]),f=r(t,"callerNamespaceList",19,()=>[]),g=r(t,"isCloud",3,!1),s=r(t,"nameRegexPattern",3,/^[a-zA-Z][a-zA-Z0-9-]*[a-zA-Z0-9]$/),c=r(t,"nameHintText",3,void 0),v=r(t,"cancelHref",3,"/nexus");var o=M(),m=A(o);{let l=i(()=>_("nexus.create-endpoint"));D(m,{get nameRegexPattern(){return s()},get nameHintText(){return c()},get targetNamespaceList(){return d()},get callerNamespaceList(){return f()},get isCloud(){return g()},get cancelHref(){return v()},get submitButtonText(){return n(l)},get onSubmit(){return t.onCreate}})}I(o),x(p,o),j()}var Q=C('<!> <div class="flex flex-col gap-4"><!> <!></div>',1);function ce(p,t){w(t,!0);const d=()=>B(K,"$namespaces",f),[f,g]=$();var s;const c=i(()=>(s=P.url.searchParams.get("projectId"))!==null&&s!==void 0?s:void 0),v=async a=>{try{const e=await G(a);n(c)&&(e.projectId=n(c)),await J(e),await F(H(),{invalidateAll:!0})}catch(e){throw console.error("Error creating endpoint",e),e}},o=i(()=>d().map(a=>{var e,u;return{namespace:(u=(e=a.namespaceInfo)===null||e===void 0?void 0:e.name)!==null&&u!==void 0?u:""}}));var m=Q(),l=y(m);{let a=i(()=>_("nexus.create-endpoint"));S(l,{get title(){return n(a)},get url(){return P.url.href}})}var N=b(l,2),h=A(N);{let a=i(H);q(h,{get href(){return n(a)},icon:"chevron-left",children:(e,u)=>{R();var L=z();E(k=>Z(L,k),[()=>_("nexus.back-to-endpoints")]),x(e,L)},$$slots:{default:!0}})}var T=b(h,2);O(T,{onCreate:v,get targetNamespaceList(){return n(o)}}),I(N),x(p,m),j(),g()}export{ce as component};
