import"../chunks/CWj6FrbW.js";import{p as j,f as h,j as U,r as N,t as R,e as i,s as E,ax as H,g as e,v as a,b as W,h as r,c as F,n as b,k as S,i as nt,d as gt}from"../chunks/DZ1-1a5q.js";import{o as bt,a as St}from"../chunks/D7JzDj9r.js";import{s as L}from"../chunks/DxwvfIkW.js";import{a as Ut}from"../chunks/Ave-ZrbK.js";import{i as st}from"../chunks/DnKg3jxh.js";import{p as xt,s as Nt,b as mt,a as ft}from"../chunks/TaaIktnz.js";import{p as rt}from"../chunks/aARsTTMf.js";import{C as kt}from"../chunks/DTh3gV-B.js";import{t as o}from"../chunks/DEjs8ZrU.js";import{x as Pt,l as wt,y as Dt,z as $t,A as Ot,B as Mt,C as Vt,D as Xt}from"../chunks/C3IQD-Kx.js";import{a as Yt}from"../chunks/CrZfxCV7.js";import{a as Rt,b as B,c as _t,d as Tt}from"../chunks/CRZPTSEx.js";import"../chunks/69_IOA4Y.js";import{D as It,p as it}from"../chunks/DGEYQy5U.js";import{D as lt}from"../chunks/D3rGXfEl.js";import{g as Ft}from"../chunks/TZ5FFUA_.js";import{B as Lt}from"../chunks/Ct_6g4ZD.js";import{M as Qt}from"../chunks/B4zHPoTU.js";import{c as Gt,d as qt,b as yt}from"../chunks/CnHlilQN.js";import{M as Ht}from"../chunks/B1qTrUHR.js";import{M as Et}from"../chunks/DiMwhU_z.js";import{c as zt,t as Bt,a as jt}from"../chunks/D397q26W.js";import{t as ht}from"../chunks/Cc_MFLKO.js";import{g as pt}from"../chunks/BrqVdl23.js";import{i as Ct}from"../chunks/DRcmmJhF.js";import{I as Wt}from"../chunks/69ay32LW.js";import{c as Jt,s as Kt}from"../chunks/B3h3Bc2r.js";import{c as Zt}from"../chunks/CqqsKTDn.js";import{H as te}from"../chunks/DaqlfAHd.js";import{t as ee}from"../chunks/Bby3K3wO.js";import{A as ae}from"../chunks/BxPfauF3.js";import{E as re}from"../chunks/C4luSWbW.js";import{L as ie}from"../chunks/C0KfKJRW.js";import{T as oe,a as ne,b as ot}from"../chunks/B_KNJxJw.js";import{a as se}from"../chunks/DXhKRXj3.js";import{a as ut,S as ce}from"../chunks/CEH-u94i.js";var le=h('<h3 slot="title"> </h3>'),ue=h("<p> </p>");function ve(p,t){j(t,!0);let n=xt(t,"open",15),v=H(!1),l=H("");const d=pt(),I=async()=>{E(l,""),E(v,!0);try{await zt(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,d),n(!1),ht.push({id:"activity-cancellation-success-toast",message:o("standalone-activities.cancel-success")}),t.onConfirm()}catch(u){E(l,Ct(u)?u.message:o("common.unknown-error"),!0)}finally{E(v,!1)}};{let u=a(()=>o("common.confirm")),m=a(()=>o("common.cancel"));Et(p,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return e(u)},get cancelText(){return e(m)},get loading(){return e(v)},confirmType:"destructive",get error(){return e(l)},set error(f){E(l,f,!0)},get open(){return n()},set open(f){n(f)},$$events:{confirmModal:I},$$slots:{title:(f,y)=>{var x=le(),s=U(x,!0);N(x),R(_=>L(s,_),[()=>o("standalone-activities.cancel-modal-title")]),i(f,x)},content:(f,y)=>{var x=ue(),s=U(x,!0);N(x),R(_=>L(s,_),[()=>o("standalone-activities.cancel-modal-confirmation")]),i(f,x)}}})}W()}var de=h('<h3 slot="title"> </h3>'),me=h('<div class="space-y-2" slot="content"><p> </p> <!></div>');function fe(p,t){j(t,!0);let n=xt(t,"open",15),v=H(!1),l=H(""),d=H("");const I=pt(),u=async()=>{E(l,""),E(v,!0);try{await Bt(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,e(d),I),n(!1),ht.push({id:"activity-terminate-success-toast",message:o("standalone-activities.terminate-success")}),t.onConfirm()}catch(m){E(l,Ct(m)?m.message:o("common.unknown-error"),!0)}finally{E(v,!1)}};{let m=a(()=>o("standalone-activities.terminate")),f=a(()=>o("common.cancel"));Et(p,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get confirmText(){return e(m)},get cancelText(){return e(f)},get loading(){return e(v)},confirmType:"destructive",get error(){return e(l)},set error(y){E(l,y,!0)},get open(){return n()},set open(y){n(y)},$$events:{confirmModal:u},$$slots:{title:(y,x)=>{var s=de(),_=U(s,!0);N(s),R(k=>L(_,k),[()=>o("standalone-activities.terminate-modal-title")]),i(y,s)},content:(y,x)=>{var s=me(),_=U(s),k=U(_,!0);N(_);var C=r(_,2);{let P=a(()=>o("common.reason-placeholder")),$=a(()=>o("common.reason-placeholder"));Wt(C,{id:"terminate-activity-execution-reason",get label(){return e(P)},labelHidden:!0,get placeholder(){return e($)},get value(){return e(d)},set value(z){E(d,z,!0)}})}N(s),R(P=>L(k,P),[()=>o("standalone-activities.terminate-modal-confirmation")]),i(y,s)}}})}W()}var _e=h("<!> <!> <!>",1),Te=h("<!> <!>",1),Ie=h('<div class="flex items-center gap-2"><!> <!></div> <!> <!>',1);function ye(p,t){j(t,!0);let n=H(!1),v=H(!1),l=a(()=>t.activityExecutionInfo.status==="ACTIVITY_EXECUTION_STATUS_RUNNING");const d=()=>{t.poller.fetchOnce().then(()=>{t.poller.abort()})};var I=Ie(),u=F(I),m=U(u);{let s=a(()=>!e(l));Lt(m,{get disabled(){return e(s)},size:"sm",$$events:{click:()=>E(n,!0)},children:(_,k)=>{b();var C=S();R(P=>L(C,P),[()=>o("standalone-activities.request-cancellation")]),i(_,C)},$$slots:{default:!0}})}var f=r(m,2);Gt(f,{children:(s,_)=>{var k=Te(),C=F(k);Qt(C,{hasIndicator:!0,controls:"activity-execution-actions",variant:"secondary",size:"sm",children:($,z)=>{b();var A=S();R(c=>L(A,c),[()=>o("workflows.more-actions")]),i($,A)},$$slots:{default:!0}});var P=r(C,2);qt(P,{id:"activity-execution-actions",position:"right",class:"w-[16rem]",children:($,z)=>{var A=_e(),c=F(A);{let M=a(()=>!e(l));yt(c,{onclick:()=>E(v,!0),destructive:!0,get disabled(){return e(M)},"data-testid":"terminate-button",children:(V,X)=>{b();var T=S();R(G=>L(T,G),[()=>o("standalone-activities.terminate")]),i(V,T)},$$slots:{default:!0}})}var w=r(c,2);Ht(w);var O=r(w,2);yt(O,{onclick:()=>Ft(Pt({namespace:t.namespace,activityId:t.activityExecutionInfo.activityId,activityType:t.activityExecutionInfo.activityType.name,taskQueue:t.activityExecutionInfo.taskQueue,startToCloseTimeout:t.activityExecutionInfo.startToCloseTimeout,scheduleToCloseTimeout:t.activityExecutionInfo.scheduleToCloseTimeout})),"data-testid":"start-activity-button",children:(M,V)=>{b();var X=S();R(T=>L(X,T),[()=>o("standalone-activities.start-activity-like-this-one")]),i(M,X)},$$slots:{default:!0}}),i($,A)},$$slots:{default:!0}}),i(s,k)},$$slots:{default:!0}}),N(u);var y=r(u,2);ve(y,{onConfirm:d,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(n)},set open(s){E(n,s,!0)}});var x=r(y,2);fe(x,{onConfirm:d,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(v)},set open(s){E(v,s,!0)}}),i(p,I),W()}const ge={ACTIVITY_EXECUTION_STATUS_COMPLETED:"Completed",ACTIVITY_EXECUTION_STATUS_RUNNING:"Running",ACTIVITY_EXECUTION_STATUS_CANCELED:"Canceled",ACTIVITY_EXECUTION_STATUS_FAILED:"Failed",ACTIVITY_EXECUTION_STATUS_TERMINATED:"Terminated",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"Timed Out",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"Unspecified"};var xe=h("<div> <!></div>");function Ee(p,t){j(t,!0);const n=Zt(["flex items-center rounded-sm px-4 py-0.5 whitespace-nowrap text-black gap-1 font-medium text-lg"],{variants:{status:{ACTIVITY_EXECUTION_STATUS_RUNNING:"bg-blue-300",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"bg-orange-200",ACTIVITY_EXECUTION_STATUS_COMPLETED:"bg-green-200",ACTIVITY_EXECUTION_STATUS_FAILED:"bg-red-200",ACTIVITY_EXECUTION_STATUS_CANCELED:"bg-slate-100",ACTIVITY_EXECUTION_STATUS_TERMINATED:"bg-yellow-200",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"bg-slate-100"}}});var v=xe(),l=U(v),d=r(l);{var I=u=>{te(u,{})};st(d,u=>{t.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&u(I)})}N(v),R(u=>{Kt(v,1,u),L(l,`${ge[t.status]??""} `)},[()=>Jt(ee(n({status:t.status})))]),i(p,v),W()}var he=h("<!> <!> <!> <!> <!> <!> <!> <!>",1),pe=h("<!> <!> <!> <!> <!> <!>",1),Ce=h("<!> <!>",1),Ae=h('<div class="space-y-2"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><!> <div class="text-2xl font-medium"><!></div></div> <!></div> <!></div>');function be(p,t){j(t,!0);const n=a(()=>t.activityExecutionInfo.activityType.name),v=a(()=>Dt({namespace:t.namespace},`ActivityType="${e(n)}"`));var l=Ae(),d=U(l),I=U(d),u=U(I);Ee(u,{get status(){return t.activityExecutionInfo.status}});var m=r(u,2),f=U(m);{let s=a(()=>o("common.copy-icon-title")),_=a(()=>o("common.copy-success-icon-title"));kt(f,{get copyIconTitle(){return e(s)},get copySuccessIconTitle(){return e(_)},get content(){return t.activityExecutionInfo.activityId},clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis text-left"})}N(m),N(I);var y=r(I,2);ye(y,{get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get poller(){return t.poller}}),N(d);var x=r(d,2);Rt(x,{"aria-label":"activity execution details",rowCount:4,children:(s,_)=>{var k=Ce(),C=F(k);It(C,{children:($,z)=>{var A=he(),c=F(A);B(c,{children:(g,Y)=>{b();var D=S("Scheduled Time");i(g,D)},$$slots:{default:!0}});var w=r(c,2);lt(w,{get timestamp(){return t.activityExecutionInfo.scheduleTime}});var O=r(w,2);B(O,{children:(g,Y)=>{b();var D=S("Last Started Time");i(g,D)},$$slots:{default:!0}});var M=r(O,2);lt(M,{get timestamp(){return t.activityExecutionInfo.lastStartedTime}});var V=r(M,2);B(V,{children:(g,Y)=>{b();var D=S("Close Time");i(g,D)},$$slots:{default:!0}});var X=r(V,2);lt(X,{get timestamp(){return t.activityExecutionInfo.closeTime},fallback:"-"});var T=r(X,2);B(T,{children:(g,Y)=>{b();var D=S("Duration");i(g,D)},$$slots:{default:!0}});var G=r(T,2);{let g=a(()=>t.activityExecutionInfo.executionDuration?Yt(t.activityExecutionInfo.executionDuration):"-");_t(G,{get text(){return e(g)}})}i($,A)}});var P=r(C,2);It(P,{children:($,z)=>{var A=pe(),c=F(A);B(c,{children:(T,G)=>{b();var g=S("Run ID");i(T,g)},$$slots:{default:!0}});var w=r(c,2);_t(w,{copyable:!0,get text(){return t.activityExecutionInfo.runId}});var O=r(w,2);B(O,{children:(T,G)=>{b();var g=S("Activity Type");i(T,g)},$$slots:{default:!0}});var M=r(O,2);Tt(M,{copyable:!0,iconName:"filter",get text(){return e(n)},get href(){return e(v)}});var V=r(M,2);B(V,{children:(T,G)=>{b();var g=S("Task Queue");i(T,g)},$$slots:{default:!0}});var X=r(V,2);{let T=a(()=>wt({namespace:t.namespace,queue:t.activityExecutionInfo.taskQueue}));Tt(X,{get href(){return e(T)},get text(){return t.activityExecutionInfo.taskQueue}})}i($,A)}}),i(s,k)}}),N(l),i(p,l),W()}var Se=h("<!> <!> <!> <!>",1),Ue=h('<div class="flex flex-col gap-4"><div class="flex items-center gap-2"><!></div> <!> <!> <!> <!></div>');function Ne(p,t){j(t,!0);const n=()=>ft(ut,"$activityExecution",l),v=()=>ft(jt,"$activitiesSearchParams",l),[l,d]=Nt();let I=H(void 0);const u=new AbortController,m=a(()=>new ce(t.namespace,t.activityId,t.runId,u,c=>{mt(ut,c)},c=>{E(I,c,!0)})),f=a(()=>({namespace:t.namespace,activityId:t.activityId,runId:t.runId})),y=a(()=>Ot(e(f))),x=a(()=>Mt(e(f))),s=a(()=>Vt(e(f))),_=a(()=>Xt(e(f))),k=a(()=>`${$t({namespace:t.namespace})}?${v()}`),C=a(()=>{var c;if(!((c=n()===null||n()===void 0?void 0:n().info)===null||c===void 0)&&c.taskQueue)return se({queue:n().info.taskQueue,namespace:t.namespace})});bt(async()=>{e(m).start()}),St(()=>{e(m).abort(),mt(ut,void 0)});var P=nt(),$=F(P);{var z=c=>{var w=Ue(),O=U(w),M=U(O);ie(M,{get href(){return e(k)},"data-testid":"back-to-activities",icon:"chevron-left",children:(Y,D)=>{b();var J=S();R(Z=>L(J,Z),[()=>o("standalone-activities.back-to-activities")]),i(Y,J)},$$slots:{default:!0}}),N(O);var V=r(O,2);be(V,{get namespace(){return t.namespace},get poller(){return e(m)},get activityExecutionInfo(){return n().info}});var X=r(V,2);oe(X,{children:(Y,D)=>{{let J=a(()=>o("standalone-activities.layout-tabs-label"));ne(Y,{get label(){return e(J)},children:(Z,vt)=>{var tt=Se(),et=F(tt);{let Q=a(()=>o("standalone-activities.layout-details-tab")),q=a(()=>it(rt.url.pathname,e(y)));ot(et,{get label(){return e(Q)},id:"activity-execution-details-tab",get href(){return e(y)},get active(){return e(q)}})}var at=r(et,2);{let Q=a(()=>o("standalone-activities.layout-workers-tab")),q=a(()=>it(rt.url.pathname,e(x)));ot(at,{get label(){return e(Q)},id:"activity-execution-workers-tab",get href(){return e(x)},get active(){return e(q)}})}var K=r(at,2);{let Q=a(()=>o("standalone-activities.layout-search-attributes-tab")),q=a(()=>it(rt.url.pathname,e(s)));ot(K,{get label(){return e(Q)},id:"activity-execution-search-attributes-tab",get href(){return e(s)},get active(){return e(q)}})}var ct=r(K,2);{let Q=a(()=>o("standalone-activities.layout-user-metadata-tab")),q=a(()=>it(rt.url.pathname,e(_)));ot(ct,{get label(){return e(Q)},id:"activity-execution-metadata-tab",get href(){return e(_)},get active(){return e(q)}})}i(Z,tt)},$$slots:{default:!0}})}},$$slots:{default:!0}});var T=r(X,2);{var G=Y=>{var D=nt(),J=F(D);Ut(J,()=>e(C),null,(Z,vt)=>{var tt=nt(),et=F(tt);{var at=K=>{{let ct=a(()=>o("workflows.workflow-error-no-workers-title"));ae(K,{intent:"error",get title(){return e(ct)},children:(Q,q)=>{b();var dt=S();R(At=>L(dt,At),[()=>o("workflows.workflow-error-no-workers-description",{taskQueue:n().info.taskQueue})]),i(Q,dt)},$$slots:{default:!0}})}};st(et,K=>{!e(vt).pollers&&n().info.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&K(at)})}i(Z,tt)}),i(Y,D)};st(T,Y=>{e(C)&&Y(G)})}var g=r(T,2);gt(g,()=>t.children),N(w),i(c,w)},A=c=>{re(c,{get error(){return e(I)}})};st($,c=>{n()?c(z):e(I)&&c(A,1)})}i(p,P),W(),d()}function ma(p,t){j(t,!0);const n=a(()=>t.params.namespace),v=a(()=>t.params.activityId),l=a(()=>t.params.runId);Ne(p,{get namespace(){return e(n)},get activityId(){return e(v)},get runId(){return e(l)},children:(d,I)=>{var u=nt(),m=F(u);gt(m,()=>t.children),i(d,u)},$$slots:{default:!0}}),W()}export{ma as component};
