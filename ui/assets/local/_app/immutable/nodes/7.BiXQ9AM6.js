import"../chunks/CWj6FrbW.js";import{o as It,a as gt}from"../chunks/DIJxQKhU.js";import{p as j,f as U,j as $,r as D,t as X,e as i,s as C,at as H,g as e,v as a,b as W,h as r,c as R,n as P,k as w,i as et,d as ut}from"../chunks/DPYmeJXN.js";import{i as at}from"../chunks/DqIiO-ir.js";import{p as vt,s as dt,a as mt,b as xt}from"../chunks/BkgVXhYA.js";import{p as J}from"../chunks/OrZoP8q2.js";import{E as Et}from"../chunks/dkSrUxw-.js";import{s as Y}from"../chunks/DtOlEDQN.js";import{a as pt}from"../chunks/B9MblnVr.js";import{C as ht}from"../chunks/CeFBHCCT.js";import{t as n}from"../chunks/DEjs8ZrU.js";import{w as Ct,k as At,x as bt,y as St,z as Ut,A as Nt,B as kt,C as Pt}from"../chunks/Cy8Qnuvf.js";import{a as wt}from"../chunks/CtQjrHKC.js";import{a as $t,b as B,c as ot,d as nt}from"../chunks/CvGkNWry.js";import"../chunks/69_IOA4Y.js";import{D as st,p as Z}from"../chunks/v_6_9-ZU.js";import{D as it}from"../chunks/C6XCc6Gp.js";import{g as Dt}from"../chunks/CcSSchUy.js";import{B as Ot}from"../chunks/DxglRBjo.js";import{M as Mt}from"../chunks/FMMEt3UL.js";import{c as Vt,d as Xt,b as ct}from"../chunks/DUvVNg5r.js";import{M as Yt}from"../chunks/VYL9lR52.js";import{M as ft}from"../chunks/Ky_8y2h2.js";import{c as Rt,t as Ft,a as Lt}from"../chunks/DRsUC-Av.js";import{t as _t}from"../chunks/DAY2qct0.js";import{g as Tt}from"../chunks/BgG8ash6.js";import{i as yt}from"../chunks/DRcmmJhF.js";import{I as Qt}from"../chunks/wNvbqC2L.js";import{c as Gt,s as qt}from"../chunks/BuyG_Alt.js";import{c as Ht}from"../chunks/Bn2mFndZ.js";import{H as zt}from"../chunks/CoyVKky0.js";import{t as Bt}from"../chunks/VvTteBni.js";import{A as jt}from"../chunks/a_Pwoeun.js";import{L as Wt}from"../chunks/dJ-AVtp8.js";import{T as Jt,a as Kt,b as tt}from"../chunks/6mMG0plU.js";import{a as Zt}from"../chunks/CQDlCps-.js";import{S as te,a as lt}from"../chunks/CUIfbMqs.js";var ee=U('<h3 slot="title"> </h3>'),ae=U("<p> </p>");function re(N,t){j(t,!0);let f=vt(t,"open",15),u=H(!1),c=H("");const v=Tt(),I=async()=>{C(c,""),C(u,!0);try{await Rt(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,v),f(!1),_t.push({id:"activity-cancellation-success-toast",message:n("standalone-activities.cancel-success")}),t.onConfirm()}catch(s){C(c,yt(s)?s.message:n("common.unknown-error"),!0)}finally{C(u,!1)}};{let s=a(()=>n("common.confirm")),g=a(()=>n("common.cancel"));ft(N,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return e(s)},get cancelText(){return e(g)},get loading(){return e(u)},confirmType:"destructive",get error(){return e(c)},set error(_){C(c,_,!0)},get open(){return f()},set open(_){f(_)},$$events:{confirmModal:I},$$slots:{title:(_,T)=>{var x=ee(),o=$(x,!0);D(x),X(y=>Y(o,y),[()=>n("standalone-activities.cancel-modal-title")]),i(_,x)},content:(_,T)=>{var x=ae(),o=$(x,!0);D(x),X(y=>Y(o,y),[()=>n("standalone-activities.cancel-modal-confirmation")]),i(_,x)}}})}W()}var ie=U('<h3 slot="title"> </h3>'),oe=U('<div class="space-y-2" slot="content"><p> </p> <!></div>');function ne(N,t){j(t,!0);let f=vt(t,"open",15),u=H(!1),c=H(""),v=H("");const I=Tt(),s=async()=>{C(c,""),C(u,!0);try{await Ft(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,e(v),I),f(!1),_t.push({id:"activity-terminate-success-toast",message:n("standalone-activities.terminate-success")}),t.onConfirm()}catch(g){C(c,yt(g)?g.message:n("common.unknown-error"),!0)}finally{C(u,!1)}};{let g=a(()=>n("standalone-activities.terminate")),_=a(()=>n("common.cancel"));ft(N,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get confirmText(){return e(g)},get cancelText(){return e(_)},get loading(){return e(u)},confirmType:"destructive",get error(){return e(c)},set error(T){C(c,T,!0)},get open(){return f()},set open(T){f(T)},$$events:{confirmModal:s},$$slots:{title:(T,x)=>{var o=ie(),y=$(o,!0);D(o),X(l=>Y(y,l),[()=>n("standalone-activities.terminate-modal-title")]),i(T,o)},content:(T,x)=>{var o=oe(),y=$(o),l=$(y,!0);D(y);var E=r(y,2);{let b=a(()=>n("common.reason-placeholder")),p=a(()=>n("common.reason-placeholder"));Qt(E,{id:"terminate-activity-execution-reason",get label(){return e(b)},labelHidden:!0,get placeholder(){return e(p)},get value(){return e(v)},set value(F){C(v,F,!0)}})}D(o),X(b=>Y(l,b),[()=>n("standalone-activities.terminate-modal-confirmation")]),i(T,o)}}})}W()}var se=U("<!> <!> <!>",1),ce=U("<!> <!>",1),le=U('<div class="flex items-center gap-2"><!> <!></div> <!> <!>',1);function ue(N,t){j(t,!0);let f=H(!1),u=H(!1),c=a(()=>t.activityExecutionInfo.status==="ACTIVITY_EXECUTION_STATUS_RUNNING");const v=()=>{t.poller.fetchOnce().then(()=>{t.poller.abort()})};var I=le(),s=R(I),g=$(s);{let o=a(()=>!e(c));Ot(g,{get disabled(){return e(o)},size:"sm",$$events:{click:()=>C(f,!0)},children:(y,l)=>{P();var E=w();X(b=>Y(E,b),[()=>n("standalone-activities.request-cancellation")]),i(y,E)},$$slots:{default:!0}})}var _=r(g,2);Vt(_,{children:(o,y)=>{var l=ce(),E=R(l);Mt(E,{hasIndicator:!0,controls:"activity-execution-actions",variant:"secondary",size:"sm",children:(p,F)=>{P();var S=w();X(k=>Y(S,k),[()=>n("workflows.more-actions")]),i(p,S)},$$slots:{default:!0}});var b=r(E,2);Xt(b,{id:"activity-execution-actions",position:"right",class:"w-[16rem]",children:(p,F)=>{var S=se(),k=R(S);{let A=a(()=>!e(c));ct(k,{onclick:()=>C(u,!0),destructive:!0,get disabled(){return e(A)},"data-testid":"terminate-button",children:(O,h)=>{P();var m=w();X(Q=>Y(m,Q),[()=>n("standalone-activities.terminate")]),i(O,m)},$$slots:{default:!0}})}var V=r(k,2);Yt(V);var L=r(V,2);ct(L,{onclick:()=>Dt(Ct({namespace:t.namespace,activityId:t.activityExecutionInfo.activityId,activityType:t.activityExecutionInfo.activityType.name,taskQueue:t.activityExecutionInfo.taskQueue,startToCloseTimeout:t.activityExecutionInfo.startToCloseTimeout,scheduleToCloseTimeout:t.activityExecutionInfo.scheduleToCloseTimeout})),"data-testid":"start-activity-button",children:(A,O)=>{P();var h=w();X(m=>Y(h,m),[()=>n("standalone-activities.start-activity-like-this-one")]),i(A,h)},$$slots:{default:!0}}),i(p,S)},$$slots:{default:!0}}),i(o,l)},$$slots:{default:!0}}),D(s);var T=r(s,2);re(T,{onConfirm:v,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(f)},set open(o){C(f,o,!0)}});var x=r(T,2);ne(x,{onConfirm:v,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(u)},set open(o){C(u,o,!0)}}),i(N,I),W()}const ve={ACTIVITY_EXECUTION_STATUS_COMPLETED:"Completed",ACTIVITY_EXECUTION_STATUS_RUNNING:"Running",ACTIVITY_EXECUTION_STATUS_CANCELED:"Canceled",ACTIVITY_EXECUTION_STATUS_FAILED:"Failed",ACTIVITY_EXECUTION_STATUS_TERMINATED:"Terminated",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"Timed Out",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"Unspecified"};var de=U("<div> <!></div>");function me(N,t){j(t,!0);const f=Ht(["flex items-center rounded-sm px-4 py-0.5 whitespace-nowrap text-black gap-1 font-medium text-lg"],{variants:{status:{ACTIVITY_EXECUTION_STATUS_RUNNING:"bg-blue-300",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"bg-orange-200",ACTIVITY_EXECUTION_STATUS_COMPLETED:"bg-green-200",ACTIVITY_EXECUTION_STATUS_FAILED:"bg-red-200",ACTIVITY_EXECUTION_STATUS_CANCELED:"bg-slate-100",ACTIVITY_EXECUTION_STATUS_TERMINATED:"bg-yellow-200",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"bg-slate-100"}}});var u=de(),c=$(u),v=r(c);{var I=s=>{zt(s,{})};at(v,s=>{t.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&s(I)})}D(u),X(s=>{qt(u,1,s),Y(c,`${ve[t.status]??""} `)},[()=>Gt(Bt(f({status:t.status})))]),i(N,u),W()}var fe=U("<!> <!> <!> <!> <!> <!> <!> <!>",1),_e=U("<!> <!> <!> <!> <!> <!>",1),Te=U("<!> <!>",1),ye=U('<div class="space-y-2"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><!> <div class="text-2xl font-medium"><!></div></div> <!></div> <!></div>');function Ie(N,t){j(t,!0);const f=a(()=>t.activityExecutionInfo.activityType.name),u=a(()=>bt({namespace:t.namespace},`ActivityType="${e(f)}"`));var c=ye(),v=$(c),I=$(v),s=$(I);me(s,{get status(){return t.activityExecutionInfo.status}});var g=r(s,2),_=$(g);{let o=a(()=>n("common.copy-icon-title")),y=a(()=>n("common.copy-success-icon-title"));ht(_,{get copyIconTitle(){return e(o)},get copySuccessIconTitle(){return e(y)},get content(){return t.activityExecutionInfo.activityId},clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis text-left"})}D(g),D(I);var T=r(I,2);ue(T,{get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get poller(){return t.poller}}),D(v);var x=r(v,2);$t(x,{"aria-label":"activity execution details",rowCount:4,children:(o,y)=>{var l=Te(),E=R(l);st(E,{children:(p,F)=>{var S=fe(),k=R(S);B(k,{children:(d,q)=>{P();var M=w("Scheduled Time");i(d,M)},$$slots:{default:!0}});var V=r(k,2);it(V,{get timestamp(){return t.activityExecutionInfo.scheduleTime}});var L=r(V,2);B(L,{children:(d,q)=>{P();var M=w("Last Started Time");i(d,M)},$$slots:{default:!0}});var A=r(L,2);it(A,{get timestamp(){return t.activityExecutionInfo.lastStartedTime}});var O=r(A,2);B(O,{children:(d,q)=>{P();var M=w("Close Time");i(d,M)},$$slots:{default:!0}});var h=r(O,2);it(h,{get timestamp(){return t.activityExecutionInfo.closeTime},fallback:"-"});var m=r(h,2);B(m,{children:(d,q)=>{P();var M=w("Duration");i(d,M)},$$slots:{default:!0}});var Q=r(m,2);{let d=a(()=>t.activityExecutionInfo.executionDuration?wt(t.activityExecutionInfo.executionDuration):"-");ot(Q,{get text(){return e(d)}})}i(p,S)}});var b=r(E,2);st(b,{children:(p,F)=>{var S=_e(),k=R(S);B(k,{children:(m,Q)=>{P();var d=w("Run ID");i(m,d)},$$slots:{default:!0}});var V=r(k,2);ot(V,{copyable:!0,get text(){return t.activityExecutionInfo.runId}});var L=r(V,2);B(L,{children:(m,Q)=>{P();var d=w("Activity Type");i(m,d)},$$slots:{default:!0}});var A=r(L,2);nt(A,{copyable:!0,iconName:"filter",get text(){return e(f)},get href(){return e(u)}});var O=r(A,2);B(O,{children:(m,Q)=>{P();var d=w("Task Queue");i(m,d)},$$slots:{default:!0}});var h=r(O,2);{let m=a(()=>At({namespace:t.namespace,queue:t.activityExecutionInfo.taskQueue}));nt(h,{get href(){return e(m)},get text(){return t.activityExecutionInfo.taskQueue}})}i(p,S)}}),i(o,l)}}),D(c),i(N,c),W()}var ge=U("<!> <!> <!> <!>",1),xe=U('<div class="flex flex-col gap-4"><div class="flex items-center gap-2"><!></div> <!> <!> <!> <!></div>');function Ee(N,t){j(t,!0);const f=()=>mt(Lt,"$activitiesSearchParams",u),[u,c]=dt(),v=a(()=>({namespace:t.namespace,activityId:t.activityId})),I=a(()=>Ut(e(v))),s=a(()=>Nt(e(v))),g=a(()=>kt(e(v))),_=a(()=>Pt(e(v))),T=a(()=>`${St({namespace:t.namespace})}?${f()}`),x=a(()=>Zt({queue:t.activityExecution.info.taskQueue,namespace:t.namespace}));var o=et(),y=R(o);{var l=E=>{var b=xe(),p=$(b),F=$(p);Wt(F,{get href(){return e(T)},"data-testid":"back-to-activities",icon:"chevron-left",children:(A,O)=>{P();var h=w();X(m=>Y(h,m),[()=>n("standalone-activities.back-to-activities")]),i(A,h)},$$slots:{default:!0}}),D(p);var S=r(p,2);Ie(S,{get namespace(){return t.namespace},get poller(){return t.poller},get activityExecutionInfo(){return t.activityExecution.info}});var k=r(S,2);Jt(k,{children:(A,O)=>{{let h=a(()=>n("standalone-activities.layout-tabs-label"));Kt(A,{get label(){return e(h)},children:(m,Q)=>{var d=ge(),q=R(d);{let G=a(()=>n("standalone-activities.layout-details-tab")),z=a(()=>Z(J.url.pathname,e(I)));tt(q,{get label(){return e(G)},id:"activity-execution-details-tab",get href(){return e(I)},get active(){return e(z)}})}var M=r(q,2);{let G=a(()=>n("standalone-activities.layout-workers-tab")),z=a(()=>Z(J.url.pathname,e(s)));tt(M,{get label(){return e(G)},id:"activity-execution-workers-tab",get href(){return e(s)},get active(){return e(z)}})}var rt=r(M,2);{let G=a(()=>n("standalone-activities.layout-search-attributes-tab")),z=a(()=>Z(J.url.pathname,e(g)));tt(rt,{get label(){return e(G)},id:"activity-execution-search-attributes-tab",get href(){return e(g)},get active(){return e(z)}})}var K=r(rt,2);{let G=a(()=>n("standalone-activities.layout-user-metadata-tab")),z=a(()=>Z(J.url.pathname,e(_)));tt(K,{get label(){return e(G)},id:"activity-execution-metadata-tab",get href(){return e(_)},get active(){return e(z)}})}i(m,d)},$$slots:{default:!0}})}},$$slots:{default:!0}});var V=r(k,2);pt(V,()=>e(x),null,(A,O)=>{var h=et(),m=R(h);{var Q=d=>{{let q=a(()=>n("workflows.workflow-error-no-workers-title"));jt(d,{intent:"error",get title(){return e(q)},children:(M,rt)=>{P();var K=w();X(G=>Y(K,G),[()=>n("workflows.workflow-error-no-workers-description",{taskQueue:t.activityExecution.info.taskQueue})]),i(M,K)},$$slots:{default:!0}})}};at(m,d=>{!e(O).pollers&&t.activityExecution.info.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&d(Q)})}i(A,h)});var L=r(V,2);ut(L,()=>t.children),D(b),i(E,b)};at(y,E=>{t.activityExecution&&E(l)})}i(N,o),W(),c()}function oa(N,t){j(t,!0);const f=()=>mt(lt,"$activityExecution",u),[u,c]=dt(),v=a(()=>J.params.namespace),I=a(()=>J.params.activityId);let s=H(void 0);const g=new AbortController,_=a(()=>new te(e(v),e(I),g,l=>{xt(lt,l)},l=>{C(s,l,!0)}));It(async()=>{e(_).start()}),gt(()=>{e(_).abort()});var T=et(),x=R(T);{var o=l=>{Et(l,{get error(){return e(s)}})},y=l=>{Ee(l,{get poller(){return e(_)},get activityExecution(){return f()},get namespace(){return e(v)},get activityId(){return e(I)},children:(E,b)=>{var p=et(),F=R(p);ut(F,()=>t.children),i(E,p)},$$slots:{default:!0}})};at(x,l=>{e(s)?l(o):l(y,!1)})}i(N,T),W(),c()}export{oa as component};
