import"../chunks/CWj6FrbW.js";import{p as j,f as C,j as w,r as D,t as F,e as r,s as E,at as H,g as e,v as a,b as W,h as i,c as V,n as k,k as P,i as et,d as gt}from"../chunks/BzuLCQNf.js";import{o as bt,a as St}from"../chunks/SxBBeV83.js";import{s as L}from"../chunks/HOnlAALn.js";import{a as Ut}from"../chunks/D-F-0Ojj.js";import{i as at}from"../chunks/Be-bjpec.js";import{p as xt,s as Nt,b as mt,a as ft}from"../chunks/DdNojIXk.js";import{p as ot}from"../chunks/BPIP8Ni0.js";import{C as kt}from"../chunks/Vk2HnYFn.js";import{t as o}from"../chunks/DEjs8ZrU.js";import{x as Pt,l as wt,y as Dt,z as $t,A as Ot,B as Mt,C as Vt,D as Xt}from"../chunks/RE4EaMEX.js";import{a as Yt}from"../chunks/CrZfxCV7.js";import{a as Rt,b as B,c as _t,d as Tt}from"../chunks/BErk98E6.js";import"../chunks/69_IOA4Y.js";import{D as It,p as nt}from"../chunks/KkGxAjNx.js";import{D as lt}from"../chunks/SlIR4G3F.js";import{g as Ft}from"../chunks/Ij_vO0mX.js";import{B as Lt}from"../chunks/BaZ1uhbi.js";import{M as Qt}from"../chunks/oj7FfB3a.js";import{c as Gt,d as qt,b as yt}from"../chunks/CjrP6doz.js";import{M as Ht}from"../chunks/5dmSL4nV.js";import{M as Et}from"../chunks/CrhzZjhm.js";import{c as zt,t as Bt,a as jt}from"../chunks/DQLNoxHR.js";import{t as ht}from"../chunks/mTWriMIu.js";import{g as pt}from"../chunks/CeN1S7l_.js";import{i as Ct}from"../chunks/DRcmmJhF.js";import{I as Wt}from"../chunks/Bq-uf1Q1.js";import{c as Jt,s as Kt}from"../chunks/wWuJlbLq.js";import{c as Zt}from"../chunks/BvcST-tr.js";import{H as te}from"../chunks/BnJW_ude.js";import{t as ee}from"../chunks/W-5sOwmb.js";import{A as ae}from"../chunks/feDwqkM8.js";import{E as re}from"../chunks/BEio5GIL.js";import{L as ie}from"../chunks/B8Tddeb-.js";import{T as oe,a as ne,b as st}from"../chunks/C3NJtmsx.js";import{a as se}from"../chunks/CyhVvVEK.js";import{a as ut,S as ce}from"../chunks/BAoKsjp4.js";var le=C('<h3 slot="title"> </h3>'),ue=C("<p> </p>");function ve(A,t){j(t,!0);let n=xt(t,"open",15),v=H(!1),l=H("");const d=pt(),I=async()=>{E(l,""),E(v,!0);try{await zt(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,d),n(!1),ht.push({id:"activity-cancellation-success-toast",message:o("standalone-activities.cancel-success")}),t.onConfirm()}catch(u){E(l,Ct(u)?u.message:o("common.unknown-error"),!0)}finally{E(v,!1)}};{let u=a(()=>o("common.confirm")),m=a(()=>o("common.cancel"));Et(A,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return e(u)},get cancelText(){return e(m)},get loading(){return e(v)},confirmType:"destructive",get error(){return e(l)},set error(f){E(l,f,!0)},get open(){return n()},set open(f){n(f)},$$events:{confirmModal:I},$$slots:{title:(f,y)=>{var x=le(),s=w(x,!0);D(x),F(_=>L(s,_),[()=>o("standalone-activities.cancel-modal-title")]),r(f,x)},content:(f,y)=>{var x=ue(),s=w(x,!0);D(x),F(_=>L(s,_),[()=>o("standalone-activities.cancel-modal-confirmation")]),r(f,x)}}})}W()}var de=C('<h3 slot="title"> </h3>'),me=C('<div class="space-y-2" slot="content"><p> </p> <!></div>');function fe(A,t){j(t,!0);let n=xt(t,"open",15),v=H(!1),l=H(""),d=H("");const I=pt(),u=async()=>{E(l,""),E(v,!0);try{await Bt(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,e(d),I),n(!1),ht.push({id:"activity-terminate-success-toast",message:o("standalone-activities.terminate-success")}),t.onConfirm()}catch(m){E(l,Ct(m)?m.message:o("common.unknown-error"),!0)}finally{E(v,!1)}};{let m=a(()=>o("standalone-activities.terminate")),f=a(()=>o("common.cancel"));Et(A,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get confirmText(){return e(m)},get cancelText(){return e(f)},get loading(){return e(v)},confirmType:"destructive",get error(){return e(l)},set error(y){E(l,y,!0)},get open(){return n()},set open(y){n(y)},$$events:{confirmModal:u},$$slots:{title:(y,x)=>{var s=de(),_=w(s,!0);D(s),F($=>L(_,$),[()=>o("standalone-activities.terminate-modal-title")]),r(y,s)},content:(y,x)=>{var s=me(),_=w(s),$=w(_,!0);D(_);var b=i(_,2);{let O=a(()=>o("common.reason-placeholder")),X=a(()=>o("common.reason-placeholder"));Wt(b,{id:"terminate-activity-execution-reason",get label(){return e(O)},labelHidden:!0,get placeholder(){return e(X)},get value(){return e(d)},set value(z){E(d,z,!0)}})}D(s),F(O=>L($,O),[()=>o("standalone-activities.terminate-modal-confirmation")]),r(y,s)}}})}W()}var _e=C("<!> <!> <!>",1),Te=C("<!> <!>",1),Ie=C('<div class="flex items-center gap-2"><!> <!></div> <!> <!>',1);function ye(A,t){j(t,!0);let n=H(!1),v=H(!1),l=a(()=>t.activityExecutionInfo.status==="ACTIVITY_EXECUTION_STATUS_RUNNING");const d=()=>{t.poller.fetchOnce().then(()=>{t.poller.abort()})};var I=Ie(),u=V(I),m=w(u);{let s=a(()=>!e(l));Lt(m,{get disabled(){return e(s)},size:"sm",$$events:{click:()=>E(n,!0)},children:(_,$)=>{k();var b=P();F(O=>L(b,O),[()=>o("standalone-activities.request-cancellation")]),r(_,b)},$$slots:{default:!0}})}var f=i(m,2);Gt(f,{children:(s,_)=>{var $=Te(),b=V($);Qt(b,{hasIndicator:!0,controls:"activity-execution-actions",variant:"secondary",size:"sm",children:(X,z)=>{k();var S=P();F(c=>L(S,c),[()=>o("workflows.more-actions")]),r(X,S)},$$slots:{default:!0}});var O=i(b,2);qt(O,{id:"activity-execution-actions",position:"right",class:"w-[16rem]",children:(X,z)=>{var S=_e(),c=V(S);{let N=a(()=>!e(l));yt(c,{onclick:()=>E(v,!0),destructive:!0,get disabled(){return e(N)},"data-testid":"terminate-button",children:(p,Y)=>{k();var T=P();F(G=>L(T,G),[()=>o("standalone-activities.terminate")]),r(p,T)},$$slots:{default:!0}})}var h=i(c,2);Ht(h);var U=i(h,2);yt(U,{onclick:()=>Ft(Pt({namespace:t.namespace,activityId:t.activityExecutionInfo.activityId,activityType:t.activityExecutionInfo.activityType.name,taskQueue:t.activityExecutionInfo.taskQueue,startToCloseTimeout:t.activityExecutionInfo.startToCloseTimeout,scheduleToCloseTimeout:t.activityExecutionInfo.scheduleToCloseTimeout})),"data-testid":"start-activity-button",children:(N,p)=>{k();var Y=P();F(T=>L(Y,T),[()=>o("standalone-activities.start-activity-like-this-one")]),r(N,Y)},$$slots:{default:!0}}),r(X,S)},$$slots:{default:!0}}),r(s,$)},$$slots:{default:!0}}),D(u);var y=i(u,2);ve(y,{onConfirm:d,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(n)},set open(s){E(n,s,!0)}});var x=i(y,2);fe(x,{onConfirm:d,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(v)},set open(s){E(v,s,!0)}}),r(A,I),W()}const ge={ACTIVITY_EXECUTION_STATUS_COMPLETED:"Completed",ACTIVITY_EXECUTION_STATUS_RUNNING:"Running",ACTIVITY_EXECUTION_STATUS_CANCELED:"Canceled",ACTIVITY_EXECUTION_STATUS_FAILED:"Failed",ACTIVITY_EXECUTION_STATUS_TERMINATED:"Terminated",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"Timed Out",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"Unspecified"};var xe=C("<div> <!></div>");function Ee(A,t){j(t,!0);const n=Zt(["flex items-center rounded-sm px-4 py-0.5 whitespace-nowrap text-black gap-1 font-medium text-lg"],{variants:{status:{ACTIVITY_EXECUTION_STATUS_RUNNING:"bg-blue-300",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"bg-orange-200",ACTIVITY_EXECUTION_STATUS_COMPLETED:"bg-green-200",ACTIVITY_EXECUTION_STATUS_FAILED:"bg-red-200",ACTIVITY_EXECUTION_STATUS_CANCELED:"bg-slate-100",ACTIVITY_EXECUTION_STATUS_TERMINATED:"bg-yellow-200",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"bg-slate-100"}}});var v=xe(),l=w(v),d=i(l);{var I=u=>{te(u,{})};at(d,u=>{t.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&u(I)})}D(v),F(u=>{Kt(v,1,u),L(l,`${ge[t.status]??""} `)},[()=>Jt(ee(n({status:t.status})))]),r(A,v),W()}var he=C("<!> <!> <!> <!> <!> <!> <!> <!>",1),pe=C("<!> <!> <!> <!> <!> <!>",1),Ce=C("<!> <!>",1),Ae=C('<div class="space-y-2"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><!> <div class="text-2xl font-medium"><!></div></div> <!></div> <!></div>');function be(A,t){j(t,!0);const n=a(()=>t.activityExecutionInfo.activityType.name),v=a(()=>Dt({namespace:t.namespace},`ActivityType="${e(n)}"`));var l=Ae(),d=w(l),I=w(d),u=w(I);Ee(u,{get status(){return t.activityExecutionInfo.status}});var m=i(u,2),f=w(m);{let s=a(()=>o("common.copy-icon-title")),_=a(()=>o("common.copy-success-icon-title"));kt(f,{get copyIconTitle(){return e(s)},get copySuccessIconTitle(){return e(_)},get content(){return t.activityExecutionInfo.activityId},clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis text-left"})}D(m),D(I);var y=i(I,2);ye(y,{get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get poller(){return t.poller}}),D(d);var x=i(d,2);Rt(x,{"aria-label":"activity execution details",rowCount:4,children:(s,_)=>{var $=Ce(),b=V($);It(b,{children:(X,z)=>{var S=he(),c=V(S);B(c,{children:(g,R)=>{k();var M=P("Scheduled Time");r(g,M)},$$slots:{default:!0}});var h=i(c,2);lt(h,{get timestamp(){return t.activityExecutionInfo.scheduleTime}});var U=i(h,2);B(U,{children:(g,R)=>{k();var M=P("Last Started Time");r(g,M)},$$slots:{default:!0}});var N=i(U,2);lt(N,{get timestamp(){return t.activityExecutionInfo.lastStartedTime}});var p=i(N,2);B(p,{children:(g,R)=>{k();var M=P("Close Time");r(g,M)},$$slots:{default:!0}});var Y=i(p,2);lt(Y,{get timestamp(){return t.activityExecutionInfo.closeTime},fallback:"-"});var T=i(Y,2);B(T,{children:(g,R)=>{k();var M=P("Duration");r(g,M)},$$slots:{default:!0}});var G=i(T,2);{let g=a(()=>t.activityExecutionInfo.executionDuration?Yt(t.activityExecutionInfo.executionDuration):"-");_t(G,{get text(){return e(g)}})}r(X,S)}});var O=i(b,2);It(O,{children:(X,z)=>{var S=pe(),c=V(S);B(c,{children:(T,G)=>{k();var g=P("Run ID");r(T,g)},$$slots:{default:!0}});var h=i(c,2);_t(h,{copyable:!0,get text(){return t.activityExecutionInfo.runId}});var U=i(h,2);B(U,{children:(T,G)=>{k();var g=P("Activity Type");r(T,g)},$$slots:{default:!0}});var N=i(U,2);Tt(N,{copyable:!0,iconName:"filter",get text(){return e(n)},get href(){return e(v)}});var p=i(N,2);B(p,{children:(T,G)=>{k();var g=P("Task Queue");r(T,g)},$$slots:{default:!0}});var Y=i(p,2);{let T=a(()=>wt({namespace:t.namespace,queue:t.activityExecutionInfo.taskQueue}));Tt(Y,{get href(){return e(T)},get text(){return t.activityExecutionInfo.taskQueue}})}r(X,S)}}),r(s,$)}}),D(l),r(A,l),W()}var Se=C("<!> <!> <!> <!>",1),Ue=C('<div class="flex flex-col gap-4"><div class="flex items-center gap-2"><!></div> <!> <!> <!> <!></div>');function Ne(A,t){j(t,!0);const n=()=>ft(ut,"$activityExecution",l),v=()=>ft(jt,"$activitiesSearchParams",l),[l,d]=Nt();let I=H(void 0);const u=new AbortController,m=a(()=>new ce(t.namespace,t.activityId,t.runId,u,c=>{mt(ut,c)},c=>{E(I,c,!0)})),f=a(()=>({namespace:t.namespace,activityId:t.activityId,runId:t.runId})),y=a(()=>Ot(e(f))),x=a(()=>Mt(e(f))),s=a(()=>Vt(e(f))),_=a(()=>Xt(e(f))),$=a(()=>`${$t({namespace:t.namespace})}?${v()}`),b=a(()=>{var c;if(!((c=n()===null||n()===void 0?void 0:n().info)===null||c===void 0)&&c.taskQueue)return se({queue:n().info.taskQueue,namespace:t.namespace})});bt(async()=>{e(m).start()}),St(()=>{e(m).abort(),mt(ut,void 0)});var O=et(),X=V(O);{var z=c=>{var h=Ue(),U=w(h),N=w(U);ie(N,{get href(){return e($)},"data-testid":"back-to-activities",icon:"chevron-left",children:(R,M)=>{k();var J=P();F(Z=>L(J,Z),[()=>o("standalone-activities.back-to-activities")]),r(R,J)},$$slots:{default:!0}}),D(U);var p=i(U,2);be(p,{get namespace(){return t.namespace},get poller(){return e(m)},get activityExecutionInfo(){return n().info}});var Y=i(p,2);oe(Y,{children:(R,M)=>{{let J=a(()=>o("standalone-activities.layout-tabs-label"));ne(R,{get label(){return e(J)},children:(Z,vt)=>{var tt=Se(),rt=V(tt);{let Q=a(()=>o("standalone-activities.layout-details-tab")),q=a(()=>nt(ot.url.pathname,e(y)));st(rt,{get label(){return e(Q)},id:"activity-execution-details-tab",get href(){return e(y)},get active(){return e(q)}})}var it=i(rt,2);{let Q=a(()=>o("standalone-activities.layout-workers-tab")),q=a(()=>nt(ot.url.pathname,e(x)));st(it,{get label(){return e(Q)},id:"activity-execution-workers-tab",get href(){return e(x)},get active(){return e(q)}})}var K=i(it,2);{let Q=a(()=>o("standalone-activities.layout-search-attributes-tab")),q=a(()=>nt(ot.url.pathname,e(s)));st(K,{get label(){return e(Q)},id:"activity-execution-search-attributes-tab",get href(){return e(s)},get active(){return e(q)}})}var ct=i(K,2);{let Q=a(()=>o("standalone-activities.layout-user-metadata-tab")),q=a(()=>nt(ot.url.pathname,e(_)));st(ct,{get label(){return e(Q)},id:"activity-execution-metadata-tab",get href(){return e(_)},get active(){return e(q)}})}r(Z,tt)},$$slots:{default:!0}})}},$$slots:{default:!0}});var T=i(Y,2);{var G=R=>{var M=et(),J=V(M);Ut(J,()=>e(b),null,(Z,vt)=>{var tt=et(),rt=V(tt);{var it=K=>{{let ct=a(()=>o("workflows.workflow-error-no-workers-title"));ae(K,{intent:"error",get title(){return e(ct)},children:(Q,q)=>{k();var dt=P();F(At=>L(dt,At),[()=>o("workflows.workflow-error-no-workers-description",{taskQueue:n().info.taskQueue})]),r(Q,dt)},$$slots:{default:!0}})}};at(rt,K=>{!e(vt).pollers&&n().info.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&K(it)})}r(Z,tt)}),r(R,M)};at(T,R=>{e(b)&&R(G)})}var g=i(T,2);gt(g,()=>t.children),D(h),r(c,h)},S=c=>{var h=et(),U=V(h);{var N=p=>{re(p,{get error(){return e(I)}})};at(U,p=>{e(I)&&p(N)},!0)}r(c,h)};at(X,c=>{n()?c(z):c(S,!1)})}r(A,O),W(),d()}function ma(A,t){j(t,!0);const n=a(()=>t.params.namespace),v=a(()=>t.params.activityId),l=a(()=>t.params.runId);Ne(A,{get namespace(){return e(n)},get activityId(){return e(v)},get runId(){return e(l)},children:(d,I)=>{var u=et(),m=V(u);gt(m,()=>t.children),r(d,u)},$$slots:{default:!0}}),W()}export{ma as component};
