import"../chunks/CWj6FrbW.js";import{o as It,a as gt}from"../chunks/CfXw_P7u.js";import{p as j,f as U,j as D,r as O,t as X,e as i,s as p,at as H,g as e,v as a,b as W,h as r,c as R,n as P,k as w,i as et,d as ut}from"../chunks/B6CF0p-B.js";import{i as at}from"../chunks/DVfqY6Lp.js";import{p as vt,s as dt,a as mt,b as xt}from"../chunks/BrOjBIf0.js";import{E as Et}from"../chunks/Cacln1Rr.js";import{s as Y}from"../chunks/BSSJzwu8.js";import{a as ht}from"../chunks/COSDPnZv.js";import{p as K}from"../chunks/BlpOiTbA.js";import{C as pt}from"../chunks/DtNOqOv-.js";import{t as n}from"../chunks/DEjs8ZrU.js";import{w as Ct,k as At,x as bt,y as St,z as Ut,A as Nt,B as kt,C as Pt}from"../chunks/BGTAq_2b.js";import{a as wt}from"../chunks/CtQjrHKC.js";import{a as Dt,b as B,c as ot,d as nt}from"../chunks/wG0RV8w0.js";import"../chunks/69_IOA4Y.js";import{D as st,p as Z}from"../chunks/B1KX-InC.js";import{D as it}from"../chunks/DBu7b7NP.js";import{g as Ot}from"../chunks/B_6Xtiim.js";import{B as $t}from"../chunks/RaugSqEI.js";import{M as Mt}from"../chunks/BeYqxBLu.js";import{c as Vt,d as Xt,b as ct}from"../chunks/C8yzQBLH.js";import{M as Yt}from"../chunks/8iXXs4OF.js";import{M as ft}from"../chunks/DKDT7Qj6.js";import{c as Rt,t as Ft,a as Lt}from"../chunks/Cd7hanZf.js";import{t as _t}from"../chunks/BxHUL3FD.js";import{g as Tt}from"../chunks/BwDtjoB5.js";import{i as yt}from"../chunks/DRcmmJhF.js";import{I as Qt}from"../chunks/BmrYUP7q.js";import{c as Gt,s as qt}from"../chunks/CVNTlwXL.js";import{c as Ht}from"../chunks/D3maMAGB.js";import{H as zt}from"../chunks/B7BUeBgA.js";import{t as Bt}from"../chunks/BC0HqUZ9.js";import{A as jt}from"../chunks/DFhL1XQn.js";import{L as Wt}from"../chunks/1tHRNSDi.js";import{T as Jt,a as Kt,b as tt}from"../chunks/DwFtRgPb.js";import{a as Zt}from"../chunks/CN3HJeeG.js";import{S as te,a as lt}from"../chunks/6LqznRr4.js";var ee=U('<h3 slot="title"> </h3>'),ae=U("<p> </p>");function re(N,t){j(t,!0);let f=vt(t,"open",15),u=H(!1),l=H("");const v=Tt(),I=async()=>{p(l,""),p(u,!0);try{await Rt(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,v),f(!1),_t.push({id:"activity-cancellation-success-toast",message:n("standalone-activities.cancel-success")}),t.onConfirm()}catch(s){p(l,yt(s)?s.message:n("common.unknown-error"),!0)}finally{p(u,!1)}};{let s=a(()=>n("common.confirm")),T=a(()=>n("common.cancel"));ft(N,{id:"cancel-confirmation-modal","data-testid":"cancel-confirmation-modal",get confirmText(){return e(s)},get cancelText(){return e(T)},get loading(){return e(u)},confirmType:"destructive",get error(){return e(l)},set error(g){p(l,g,!0)},get open(){return f()},set open(g){f(g)},$$events:{confirmModal:I},$$slots:{title:(g,_)=>{var x=ee(),o=D(x,!0);O(x),X(y=>Y(o,y),[()=>n("standalone-activities.cancel-modal-title")]),i(g,x)},content:(g,_)=>{var x=ae(),o=D(x,!0);O(x),X(y=>Y(o,y),[()=>n("standalone-activities.cancel-modal-confirmation")]),i(g,x)}}})}W()}var ie=U('<h3 slot="title"> </h3>'),oe=U('<div class="space-y-2" slot="content"><p> </p> <!></div>');function ne(N,t){j(t,!0);let f=vt(t,"open",15),u=H(!1),l=H(""),v=H("");const I=Tt(),s=async()=>{p(l,""),p(u,!0);try{await Ft(t.namespace,t.activityExecutionInfo.activityId,t.activityExecutionInfo.runId,e(v),I),f(!1),_t.push({id:"activity-terminate-success-toast",message:n("standalone-activities.terminate-success")}),t.onConfirm()}catch(T){p(l,yt(T)?T.message:n("common.unknown-error"),!0)}finally{p(u,!1)}};{let T=a(()=>n("standalone-activities.terminate")),g=a(()=>n("common.cancel"));ft(N,{id:"terminate-confirmation-modal","data-testid":"terminate-confirmation-modal",get confirmText(){return e(T)},get cancelText(){return e(g)},get loading(){return e(u)},confirmType:"destructive",get error(){return e(l)},set error(_){p(l,_,!0)},get open(){return f()},set open(_){f(_)},$$events:{confirmModal:s},$$slots:{title:(_,x)=>{var o=ie(),y=D(o,!0);O(o),X(b=>Y(y,b),[()=>n("standalone-activities.terminate-modal-title")]),i(_,o)},content:(_,x)=>{var o=oe(),y=D(o),b=D(y,!0);O(y);var c=r(y,2);{let C=a(()=>n("common.reason-placeholder")),S=a(()=>n("common.reason-placeholder"));Qt(c,{id:"terminate-activity-execution-reason",get label(){return e(C)},labelHidden:!0,get placeholder(){return e(S)},get value(){return e(v)},set value(F){p(v,F,!0)}})}O(o),X(C=>Y(b,C),[()=>n("standalone-activities.terminate-modal-confirmation")]),i(_,o)}}})}W()}var se=U("<!> <!> <!>",1),ce=U("<!> <!>",1),le=U('<div class="flex items-center gap-2"><!> <!></div> <!> <!>',1);function ue(N,t){j(t,!0);let f=H(!1),u=H(!1),l=a(()=>t.activityExecutionInfo.status==="ACTIVITY_EXECUTION_STATUS_RUNNING");const v=()=>{t.poller.fetchOnce().then(()=>{t.poller.abort()})};var I=le(),s=R(I),T=D(s);{let o=a(()=>!e(l));$t(T,{get disabled(){return e(o)},size:"sm",$$events:{click:()=>p(f,!0)},children:(y,b)=>{P();var c=w();X(C=>Y(c,C),[()=>n("standalone-activities.request-cancellation")]),i(y,c)},$$slots:{default:!0}})}var g=r(T,2);Vt(g,{children:(o,y)=>{var b=ce(),c=R(b);Mt(c,{hasIndicator:!0,controls:"activity-execution-actions",variant:"secondary",size:"sm",children:(S,F)=>{P();var E=w();X(k=>Y(E,k),[()=>n("workflows.more-actions")]),i(S,E)},$$slots:{default:!0}});var C=r(c,2);Xt(C,{id:"activity-execution-actions",position:"right",class:"w-[16rem]",children:(S,F)=>{var E=se(),k=R(E);{let A=a(()=>!e(l));ct(k,{onclick:()=>p(u,!0),destructive:!0,get disabled(){return e(A)},"data-testid":"terminate-button",children:($,h)=>{P();var m=w();X(Q=>Y(m,Q),[()=>n("standalone-activities.terminate")]),i($,m)},$$slots:{default:!0}})}var V=r(k,2);Yt(V);var L=r(V,2);ct(L,{onclick:()=>Ot(Ct({namespace:t.namespace,activityId:t.activityExecutionInfo.activityId,activityType:t.activityExecutionInfo.activityType.name,taskQueue:t.activityExecutionInfo.taskQueue,startToCloseTimeout:t.activityExecutionInfo.startToCloseTimeout,scheduleToCloseTimeout:t.activityExecutionInfo.scheduleToCloseTimeout})),"data-testid":"start-activity-button",children:(A,$)=>{P();var h=w();X(m=>Y(h,m),[()=>n("standalone-activities.start-activity-like-this-one")]),i(A,h)},$$slots:{default:!0}}),i(S,E)},$$slots:{default:!0}}),i(o,b)},$$slots:{default:!0}}),O(s);var _=r(s,2);re(_,{onConfirm:v,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(f)},set open(o){p(f,o,!0)}});var x=r(_,2);ne(x,{onConfirm:v,get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get open(){return e(u)},set open(o){p(u,o,!0)}}),i(N,I),W()}const ve={ACTIVITY_EXECUTION_STATUS_COMPLETED:"Completed",ACTIVITY_EXECUTION_STATUS_RUNNING:"Running",ACTIVITY_EXECUTION_STATUS_CANCELED:"Canceled",ACTIVITY_EXECUTION_STATUS_FAILED:"Failed",ACTIVITY_EXECUTION_STATUS_TERMINATED:"Terminated",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"Timed Out",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"Unspecified"};var de=U("<div> <!></div>");function me(N,t){j(t,!0);const f=Ht(["flex items-center rounded-sm px-4 py-0.5 whitespace-nowrap text-black gap-1 font-medium text-lg"],{variants:{status:{ACTIVITY_EXECUTION_STATUS_RUNNING:"bg-blue-300",ACTIVITY_EXECUTION_STATUS_TIMED_OUT:"bg-orange-200",ACTIVITY_EXECUTION_STATUS_COMPLETED:"bg-green-200",ACTIVITY_EXECUTION_STATUS_FAILED:"bg-red-200",ACTIVITY_EXECUTION_STATUS_CANCELED:"bg-slate-100",ACTIVITY_EXECUTION_STATUS_TERMINATED:"bg-yellow-200",ACTIVITY_EXECUTION_STATUS_UNSPECIFIED:"bg-slate-100"}}});var u=de(),l=D(u),v=r(l);{var I=s=>{zt(s,{})};at(v,s=>{t.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&s(I)})}O(u),X(s=>{qt(u,1,s),Y(l,`${ve[t.status]??""} `)},[()=>Gt(Bt(f({status:t.status})))]),i(N,u),W()}var fe=U("<!> <!> <!> <!> <!> <!> <!> <!>",1),_e=U("<!> <!> <!> <!> <!> <!>",1),Te=U("<!> <!>",1),ye=U('<div class="space-y-2"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><!> <div class="text-2xl font-medium"><!></div></div> <!></div> <!></div>');function Ie(N,t){j(t,!0);const f=a(()=>t.activityExecutionInfo.activityType.name),u=a(()=>bt({namespace:t.namespace},`ActivityType="${e(f)}"`));var l=ye(),v=D(l),I=D(v),s=D(I);me(s,{get status(){return t.activityExecutionInfo.status}});var T=r(s,2),g=D(T);{let o=a(()=>n("common.copy-icon-title")),y=a(()=>n("common.copy-success-icon-title"));pt(g,{get copyIconTitle(){return e(o)},get copySuccessIconTitle(){return e(y)},get content(){return t.activityExecutionInfo.activityId},clickAllToCopy:!0,"container-class":"w-full",class:"overflow-hidden text-ellipsis text-left"})}O(T),O(I);var _=r(I,2);ue(_,{get activityExecutionInfo(){return t.activityExecutionInfo},get namespace(){return t.namespace},get poller(){return t.poller}}),O(v);var x=r(v,2);Dt(x,{"aria-label":"activity execution details",rowCount:4,children:(o,y)=>{var b=Te(),c=R(b);st(c,{children:(S,F)=>{var E=fe(),k=R(E);B(k,{children:(d,q)=>{P();var M=w("Scheduled Time");i(d,M)},$$slots:{default:!0}});var V=r(k,2);it(V,{get timestamp(){return t.activityExecutionInfo.scheduleTime}});var L=r(V,2);B(L,{children:(d,q)=>{P();var M=w("Last Started Time");i(d,M)},$$slots:{default:!0}});var A=r(L,2);it(A,{get timestamp(){return t.activityExecutionInfo.lastStartedTime}});var $=r(A,2);B($,{children:(d,q)=>{P();var M=w("Close Time");i(d,M)},$$slots:{default:!0}});var h=r($,2);it(h,{get timestamp(){return t.activityExecutionInfo.closeTime},fallback:"-"});var m=r(h,2);B(m,{children:(d,q)=>{P();var M=w("Duration");i(d,M)},$$slots:{default:!0}});var Q=r(m,2);{let d=a(()=>t.activityExecutionInfo.executionDuration?wt(t.activityExecutionInfo.executionDuration):"-");ot(Q,{get text(){return e(d)}})}i(S,E)}});var C=r(c,2);st(C,{children:(S,F)=>{var E=_e(),k=R(E);B(k,{children:(m,Q)=>{P();var d=w("Run ID");i(m,d)},$$slots:{default:!0}});var V=r(k,2);ot(V,{copyable:!0,get text(){return t.activityExecutionInfo.runId}});var L=r(V,2);B(L,{children:(m,Q)=>{P();var d=w("Activity Type");i(m,d)},$$slots:{default:!0}});var A=r(L,2);nt(A,{copyable:!0,iconName:"filter",get text(){return e(f)},get href(){return e(u)}});var $=r(A,2);B($,{children:(m,Q)=>{P();var d=w("Task Queue");i(m,d)},$$slots:{default:!0}});var h=r($,2);{let m=a(()=>At({namespace:t.namespace,queue:t.activityExecutionInfo.taskQueue}));nt(h,{get href(){return e(m)},get text(){return t.activityExecutionInfo.taskQueue}})}i(S,E)}}),i(o,b)}}),O(l),i(N,l),W()}var ge=U("<!> <!> <!> <!>",1),xe=U('<div class="flex flex-col gap-4"><div class="flex items-center gap-2"><!></div> <!> <!> <!> <!></div>');function Ee(N,t){j(t,!0);const f=()=>mt(Lt,"$activitiesSearchParams",u),[u,l]=dt(),v=a(()=>({namespace:t.namespace,activityId:t.activityId,runId:t.runId})),I=a(()=>Ut(e(v))),s=a(()=>Nt(e(v))),T=a(()=>kt(e(v))),g=a(()=>Pt(e(v))),_=a(()=>`${St({namespace:t.namespace})}?${f()}`),x=a(()=>Zt({queue:t.activityExecution.info.taskQueue,namespace:t.namespace}));var o=et(),y=R(o);{var b=c=>{var C=xe(),S=D(C),F=D(S);Wt(F,{get href(){return e(_)},"data-testid":"back-to-activities",icon:"chevron-left",children:(A,$)=>{P();var h=w();X(m=>Y(h,m),[()=>n("standalone-activities.back-to-activities")]),i(A,h)},$$slots:{default:!0}}),O(S);var E=r(S,2);Ie(E,{get namespace(){return t.namespace},get poller(){return t.poller},get activityExecutionInfo(){return t.activityExecution.info}});var k=r(E,2);Jt(k,{children:(A,$)=>{{let h=a(()=>n("standalone-activities.layout-tabs-label"));Kt(A,{get label(){return e(h)},children:(m,Q)=>{var d=ge(),q=R(d);{let G=a(()=>n("standalone-activities.layout-details-tab")),z=a(()=>Z(K.url.pathname,e(I)));tt(q,{get label(){return e(G)},id:"activity-execution-details-tab",get href(){return e(I)},get active(){return e(z)}})}var M=r(q,2);{let G=a(()=>n("standalone-activities.layout-workers-tab")),z=a(()=>Z(K.url.pathname,e(s)));tt(M,{get label(){return e(G)},id:"activity-execution-workers-tab",get href(){return e(s)},get active(){return e(z)}})}var rt=r(M,2);{let G=a(()=>n("standalone-activities.layout-search-attributes-tab")),z=a(()=>Z(K.url.pathname,e(T)));tt(rt,{get label(){return e(G)},id:"activity-execution-search-attributes-tab",get href(){return e(T)},get active(){return e(z)}})}var J=r(rt,2);{let G=a(()=>n("standalone-activities.layout-user-metadata-tab")),z=a(()=>Z(K.url.pathname,e(g)));tt(J,{get label(){return e(G)},id:"activity-execution-metadata-tab",get href(){return e(g)},get active(){return e(z)}})}i(m,d)},$$slots:{default:!0}})}},$$slots:{default:!0}});var V=r(k,2);ht(V,()=>e(x),null,(A,$)=>{var h=et(),m=R(h);{var Q=d=>{{let q=a(()=>n("workflows.workflow-error-no-workers-title"));jt(d,{intent:"error",get title(){return e(q)},children:(M,rt)=>{P();var J=w();X(G=>Y(J,G),[()=>n("workflows.workflow-error-no-workers-description",{taskQueue:t.activityExecution.info.taskQueue})]),i(M,J)},$$slots:{default:!0}})}};at(m,d=>{!e($).pollers&&t.activityExecution.info.status==="ACTIVITY_EXECUTION_STATUS_RUNNING"&&d(Q)})}i(A,h)});var L=r(V,2);ut(L,()=>t.children),O(C),i(c,C)};at(y,c=>{t.activityExecution&&c(b)})}i(N,o),W(),l()}function oa(N,t){j(t,!0);const f=()=>mt(lt,"$activityExecution",u),[u,l]=dt(),v=a(()=>t.params.namespace),I=a(()=>t.params.activityId),s=a(()=>t.params.runId);let T=H(void 0);const g=new AbortController,_=a(()=>new te(e(v),e(I),e(s),g,c=>{xt(lt,c)},c=>{p(T,c,!0)}));It(async()=>{e(_).start()}),gt(()=>{e(_).abort()});var x=et(),o=R(x);{var y=c=>{Et(c,{get error(){return e(T)}})},b=c=>{Ee(c,{get poller(){return e(_)},get activityExecution(){return f()},get namespace(){return e(v)},get activityId(){return e(I)},get runId(){return e(s)},children:(C,S)=>{var F=et(),E=R(F);ut(E,()=>t.children),i(C,F)},$$slots:{default:!0}})};at(o,c=>{e(T)?c(y):c(b,!1)})}i(N,x),W(),l()}export{oa as component};
